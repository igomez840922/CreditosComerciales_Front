{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{translationHelpers}from'../../../helpers';import{Modal,ModalHeader,ModalBody,Label,Row,Col,Button}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import{useEffect,useState}from'react';import{CoreServices}from'../../../services';import Select from\"react-select\";import*as OPTs from\"../../../helpers/options_helper\";import\"flatpickr/dist/themes/material_blue.css\";import Flatpickr from\"react-flatpickr\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalNewWarrant=function ModalNewWarrant(props){var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),tipoGaranteSelect=_useState2[0],settipoGaranteSelect=_useState2[1];// state\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),campoRequeridoGarantia=_useState4[0],setcampoRequeridoGarantia=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),codigoGarantia=_useState6[0],setcodigoGarantia=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tiposGarantia=_useState8[0],setTiposGarantia=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),fechaSet=_useState10[0],setfechaSet=_useState10[1];// services\nvar coreServices=new CoreServices();React.useEffect(function(){setfechaSet(props.dataSet.appraisalDate?moment(props.dataSet.appraisalDate).format(\"DD-MM-YYYY\"):\" \");// Read Api Service data\nvar defaultVal=null;settipoGaranteSelect(undefined);try{if(tiposGarantia.length>0&&props.dataSet.guaranteeTypeName!==null&&tipoGaranteSelect===undefined){defaultVal=tiposGarantia.find(function(x){return x.label===props.dataSet.guaranteeTypeName;});if(defaultVal!==undefined){settipoGaranteSelect(defaultVal);}}}catch(err){}},[props,tiposGarantia]);useEffect(function(){cargarCatalogoGarantias();},[]);function cargarCatalogoGarantias(){coreServices.getTipoGarantiaCatalogo().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}var optionGroup1=[{label:t(\"SelectGroup\"),options:json}];setTiposGarantia(json);});}function handleSubmit(event,errors,value){if(codigoGarantia==null){setcampoRequeridoGarantia(true);return;}else{setcampoRequeridoGarantia(false);}event.preventDefault();if(errors.length>0){return;}value.guaranteeTypeName=codigoGarantia;props.guardarDatos(value,props.tipo);props.toggle();}function handleCancel(){props.toggle();}function check(e){var tecla=document.all?e.keyCode:e.which;//Tecla de retroceso para borrar, siempre la permite\nif(tecla===45){e.preventDefault();return true;}return false;}return/*#__PURE__*/_jsxs(Modal,{isOpen:props.isOpen,toggle:props.toggle,centered:true,size:\"md\",children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:props.toggle,color:\"primary\",children:t(\"Warrants\")}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(AvForm,{className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"type\",children:t(\"Warrant Type\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){settipoGaranteSelect(tiposGarantia.find(function(x){return x.label===e.label;}));setcodigoGarantia(e.label);},options:tiposGarantia,value:tipoGaranteSelect,classNamePrefix:\"select2-selection\",placeholder:t(\"SelectGroup\")}),campoRequeridoGarantia?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"commercialValue\",children:t(\"Commercial Value\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"commercialValue\",min:0,type:\"number\",onKeyPress:function onKeyPress(e){return check(e);},value:props.dataSet.commercialValue,id:\"commercialValue\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"fastValue\",children:t(\"Quick V-Value\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"fastValue\",min:0,type:\"number\",onKeyPress:function onKeyPress(e){return check(e);},value:props.dataSet.fastValue,id:\"fastValue\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"observations\",children:t(\"Description\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"observations\",type:\"textarea\",value:props.dataSet.observations,id:\"observations\",rows:\"4\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"ltv\",children:t(\"LTV%\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"ltv\",type:\"number\",onKeyPress:function onKeyPress(e){return check(e);},value:props.dataSet.ltv,id:\"ltv\",min:0,max:\"100\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"appraisalDate\",children:t(\"Appraisal Date\")}),fechaSet&&/*#__PURE__*/_jsx(Flatpickr,{name:\"estimatedDate\",id:\"estimatedDate\",className:\"form-control d-block\",placeholder:OPTs.FORMAT_DATE_SHOW,options:{dateFormat:OPTs.FORMAT_DATE,defaultDate:fechaSet//selectClient !== undefined ? moment(selectClient.birthDate) : null\n},onChange:function onChange(selectedDates,dateStr,instance){setfechaSet(moment(dateStr,\"DD/MM/YYYY\").format(\"YYYY-MM-DD\"));}// onChange={(selectedDates, dateStr, instance) => { handleChangeInputFormClient({ target: { name: \"birthDate\", value: moment(dateStr,\"DD/MM/YYYY\").format(\"YYYY-MM-DD\") } }) }}\n// onChange={(selectedDates, dateStr, instance) => { handleChangeInputFormClient({ target: { name: \"birthDate\", value: moment(dateStr).format(\"YYYY-MM-DD\") } }) }}\n})]})})]}),/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"signature\",children:t(\"Signature\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"signature\",type:\"text\",value:props.dataSet.signature,id:\"signature\"})]}),/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Label,{htmlFor:\"trustNumber\",children:[\"No. \",t(\"Escrow\")]}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"trustNumber\",type:\"text\",value:props.dataSet.trustNumber,id:\"trustNumber\"})]}),/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"fiduciary\",children:t(\"Fiduciary\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"fiduciary\",type:\"text\",value:props.dataSet.fiduciary,id:\"fiduciary\"})]}),/*#__PURE__*/_jsx(Row,{className:\"my-2\",children:/*#__PURE__*/_jsxs(Col,{xl:\"12 text-end\",children:[/*#__PURE__*/_jsx(Button,{id:\"btnCancel\",color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:handleCancel,children:c(\"Cancel\")}),props.botones?/*#__PURE__*/_jsxs(Button,{id:\"btnSearch\",color:\"success\",type:\"submit\",style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",\" \",props.tipo==\"COMISION\"?c(\"Save\"):c(\"Edit\")]}):null]})})]})})]});};export default ModalNewWarrant;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/facilities/ModalNewWarrant.js"],"names":["React","translationHelpers","Modal","ModalHeader","ModalBody","Label","Row","Col","Button","AvForm","AvField","AvGroup","useEffect","useState","CoreServices","Select","OPTs","Flatpickr","moment","ModalNewWarrant","props","t","c","undefined","tipoGaranteSelect","settipoGaranteSelect","campoRequeridoGarantia","setcampoRequeridoGarantia","codigoGarantia","setcodigoGarantia","tiposGarantia","setTiposGarantia","fechaSet","setfechaSet","coreServices","dataSet","appraisalDate","format","defaultVal","length","guaranteeTypeName","find","x","label","err","cargarCatalogoGarantias","getTipoGarantiaCatalogo","then","response","json","i","Records","push","value","optionGroup1","options","handleSubmit","event","errors","preventDefault","guardarDatos","tipo","toggle","handleCancel","check","e","tecla","document","all","keyCode","which","isOpen","commercialValue","fastValue","observations","ltv","FORMAT_DATE_SHOW","dateFormat","FORMAT_DATE","defaultDate","selectedDates","dateStr","instance","signature","trustNumber","fiduciary","margin","botones"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport PropTypes from 'prop-types'\r\nimport { translationHelpers } from '../../../helpers';\r\n\r\n\r\nimport {\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  Label,\r\n  Row,\r\n  Col,\r\n  Button\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport { useEffect, useState } from 'react';\r\nimport { CoreServices } from '../../../services';\r\nimport Select from \"react-select\";\r\n\r\nimport * as OPTs from \"../../../helpers/options_helper\";\r\nimport \"flatpickr/dist/themes/material_blue.css\";\r\nimport Flatpickr from \"react-flatpickr\";\r\nimport moment from \"moment\";\r\n\r\nconst ModalNewWarrant = (props) => {\r\n\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n  const [tipoGaranteSelect, settipoGaranteSelect] = useState(undefined);\r\n  // state\r\n  const [campoRequeridoGarantia, setcampoRequeridoGarantia] = useState(false);\r\n  const [codigoGarantia, setcodigoGarantia] = useState(null);\r\n  const [tiposGarantia, setTiposGarantia] = useState([]);\r\n\r\n  const [fechaSet, setfechaSet] = useState(null);\r\n\r\n\r\n  // services\r\n  const coreServices = new CoreServices();\r\n  React.useEffect(() => {\r\n\r\n    setfechaSet(props.dataSet.appraisalDate ? moment(props.dataSet.appraisalDate).format(\"DD-MM-YYYY\") : \" \")\r\n\r\n    // Read Api Service data\r\n    var defaultVal = null;\r\n    settipoGaranteSelect(undefined)\r\n    try {\r\n      if (tiposGarantia.length > 0 && props.dataSet.guaranteeTypeName !== null && tipoGaranteSelect === undefined) {\r\n        defaultVal = tiposGarantia.find(x => x.label === props.dataSet.guaranteeTypeName);\r\n        if (defaultVal !== undefined) {\r\n          settipoGaranteSelect(defaultVal);\r\n        }\r\n      }\r\n    }\r\n    catch (err) { }\r\n\r\n  }, [props, tiposGarantia]);\r\n  useEffect(() => {\r\n    cargarCatalogoGarantias();\r\n  }, []);\r\n\r\n  function cargarCatalogoGarantias() {\r\n    coreServices.getTipoGarantiaCatalogo()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.Records.length; i++) {\r\n          json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n        }\r\n        const optionGroup1 = [\r\n          {\r\n            label: t(\"SelectGroup\"),\r\n            options: json,\r\n          },\r\n\r\n        ];\r\n        setTiposGarantia(json);\r\n      });\r\n  }\r\n\r\n  function handleSubmit(event, errors, value) {\r\n    if (codigoGarantia == null) {\r\n      setcampoRequeridoGarantia(true);\r\n      return;\r\n    } else {\r\n      setcampoRequeridoGarantia(false);\r\n    }\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    value.guaranteeTypeName = codigoGarantia;\r\n    props.guardarDatos(value, props.tipo);\r\n    props.toggle();\r\n  }\r\n\r\n  function handleCancel() {\r\n    props.toggle();\r\n  }\r\n\r\n  function check(e) {\r\n    let tecla = (document.all) ? e.keyCode : e.which;\r\n    //Tecla de retroceso para borrar, siempre la permite\r\n    if (tecla === 45) {\r\n      e.preventDefault();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={props.isOpen}\r\n      toggle={props.toggle}\r\n      centered={true}\r\n      size=\"md\">\r\n      <ModalHeader toggle={props.toggle} color=\"primary\">{t(\"Warrants\")}</ModalHeader>\r\n      <ModalBody>\r\n        <AvForm className=\"needs-validation\" onSubmit={handleSubmit}>\r\n          <Row>\r\n            <Col lg=\"12\">\r\n              <AvGroup className=\"mb-3\">\r\n                <Label htmlFor=\"type\">{t(\"Warrant Type\")}</Label>\r\n                <Select noOptionsMessage={() => \"\"}\r\n                  onChange={(e) => {\r\n                    settipoGaranteSelect(tiposGarantia.find(x => x.label === e.label)); setcodigoGarantia(e.label);\r\n                  }}\r\n                  options={tiposGarantia}\r\n                  value={tipoGaranteSelect}\r\n                  classNamePrefix=\"select2-selection\"\r\n                  placeholder={t(\"SelectGroup\")}\r\n                />\r\n                {campoRequeridoGarantia ?\r\n                  <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                  : null}\r\n              </AvGroup>\r\n            </Col>\r\n            <Col lg=\"6\">\r\n              <AvGroup className=\"mb-3\">\r\n                <Label htmlFor=\"commercialValue\">{t(\"Commercial Value\")}</Label>\r\n                <AvField\r\n                  className=\"form-control\"\r\n                  name=\"commercialValue\"\r\n                  min={0}\r\n                  type=\"number\"\r\n                  onKeyPress={(e) => { return check(e) }}\r\n                  value={props.dataSet.commercialValue}\r\n                  id=\"commercialValue\" />\r\n              </AvGroup>\r\n\r\n            </Col>\r\n            <Col lg=\"6\">\r\n              <AvGroup className=\"mb-3\">\r\n                <Label htmlFor=\"fastValue\">{t(\"Quick V-Value\")}</Label>\r\n                <AvField\r\n                  className=\"form-control\"\r\n                  name=\"fastValue\"\r\n                  min={0}\r\n                  type=\"number\"\r\n                  onKeyPress={(e) => { return check(e) }}\r\n                  value={props.dataSet.fastValue}\r\n                  id=\"fastValue\" />\r\n              </AvGroup>\r\n\r\n            </Col>\r\n            <Col lg=\"12\">\r\n              <AvGroup className=\"mb-3\">\r\n                <Label htmlFor=\"observations\">{t(\"Description\")}</Label>\r\n                <AvField\r\n                  className=\"form-control\"\r\n                  name=\"observations\"\r\n                  type=\"textarea\"\r\n                  value={props.dataSet.observations}\r\n                  id=\"observations\"\r\n                  rows=\"4\" />\r\n              </AvGroup>\r\n\r\n            </Col>\r\n            <Col lg=\"6\">\r\n              <AvGroup className=\"mb-3\">\r\n                <Label htmlFor=\"ltv\">{t(\"LTV%\")}</Label>\r\n                <AvField\r\n                  className=\"form-control\"\r\n                  name=\"ltv\"\r\n                  type=\"number\"\r\n                  onKeyPress={(e) => { return check(e) }}\r\n                  value={props.dataSet.ltv}\r\n                  id=\"ltv\"\r\n                  min={0}\r\n                  max=\"100\" />\r\n              </AvGroup>\r\n\r\n            </Col>\r\n            <Col lg=\"6\">\r\n              <AvGroup className=\"mb-3\">\r\n                <Label htmlFor=\"appraisalDate\">{t(\"Appraisal Date\")}</Label>\r\n                {/* <AvField\r\n                  className=\"form-control\"\r\n                  name=\"appraisalDate\"\r\n                  type=\"date\"\r\n                  value={props.dataSet.appraisalDate}\r\n                  id=\"appraisalDate\" /> */}\r\n                {fechaSet &&\r\n                  (<Flatpickr\r\n                    name=\"estimatedDate\"\r\n                    id=\"estimatedDate\"\r\n                    className=\"form-control d-block\"\r\n                    placeholder={OPTs.FORMAT_DATE_SHOW}\r\n                    options={{\r\n                      dateFormat: OPTs.FORMAT_DATE,\r\n                      defaultDate: fechaSet,//selectClient !== undefined ? moment(selectClient.birthDate) : null\r\n                    }}\r\n                    onChange={(selectedDates, dateStr, instance) => {\r\n                      setfechaSet(moment(dateStr, \"DD/MM/YYYY\").format(\"YYYY-MM-DD\"))\r\n                    }}\r\n                  // onChange={(selectedDates, dateStr, instance) => { handleChangeInputFormClient({ target: { name: \"birthDate\", value: moment(dateStr,\"DD/MM/YYYY\").format(\"YYYY-MM-DD\") } }) }}\r\n\r\n                  // onChange={(selectedDates, dateStr, instance) => { handleChangeInputFormClient({ target: { name: \"birthDate\", value: moment(dateStr).format(\"YYYY-MM-DD\") } }) }}\r\n                  />)}\r\n              </AvGroup>\r\n            </Col>\r\n          </Row>\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"signature\">{t(\"Signature\")}</Label>\r\n            <AvField\r\n              className=\"form-control\"\r\n              name=\"signature\"\r\n              type=\"text\"\r\n              value={props.dataSet.signature}\r\n              id=\"signature\" />\r\n          </AvGroup>\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"trustNumber\">No. {t(\"Escrow\")}</Label>\r\n            <AvField\r\n              className=\"form-control\"\r\n              name=\"trustNumber\"\r\n              type=\"text\"\r\n              value={props.dataSet.trustNumber}\r\n              id=\"trustNumber\" />\r\n          </AvGroup>\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"fiduciary\">{t(\"Fiduciary\")}</Label>\r\n            <AvField\r\n              className=\"form-control\"\r\n              name=\"fiduciary\"\r\n              type=\"text\"\r\n              value={props.dataSet.fiduciary}\r\n              id=\"fiduciary\" />\r\n          </AvGroup>\r\n          <Row className=\"my-2\">\r\n            <Col xl=\"12 text-end\">\r\n              <Button id=\"btnCancel\" color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={handleCancel}>\r\n                {c(\"Cancel\")}\r\n              </Button>\r\n              {props.botones ?\r\n                <Button id=\"btnSearch\" color=\"success\" type=\"submit\" style={{ margin: '5px' }}><i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n                  {\" \"} {props.tipo == \"COMISION\" ? c(\"Save\") : c(\"Edit\")}\r\n                </Button> : null}\r\n            </Col>\r\n          </Row>\r\n        </AvForm>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n};\r\n\r\nModalNewWarrant.propTypes = {\r\n  onSave: PropTypes.func.isRequired,\r\n  toggle: PropTypes.func,\r\n  isOpen: PropTypes.bool\r\n};\r\n\r\n\r\nexport default ModalNewWarrant;\r\n"]},"metadata":{},"sourceType":"module"}