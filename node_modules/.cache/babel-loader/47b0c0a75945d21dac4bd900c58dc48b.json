{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../helpers/url_helper\";import{useTranslation,withTranslation}from\"react-i18next\";import{Row,Col,Button,Card,CardBody,CardFooter,CardHeader,Label,Table}from\"reactstrap\";import{Link}from\"react-router-dom\";// UI Components\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{FacilityListBpm,FacilityListCore,ChangeSummaryReadOnly,CorporateExposure,CorporateExposureClient,FacilityList,FinancialSummary,GeneralSection}from\"../../../components/PropuestaCreditoComercial\";import SweetAlert from\"react-bootstrap-sweetalert\";import AttachmentFileCore from\"../../../components/Common/AttachmentFileCore\";import*as OPTs from\"../../../helpers/options_helper\";import{AttachmentFileInputModel}from'../../../models/Common/AttachmentFileInputModel';import HeaderSections from\"../../../components/Common/HeaderSections\";import ModalEndProcess from\"../../../components/EndProcess/ModalEndProcess\";// Services\nimport{BackendServices,CoreServices,BpmServices}from\"../../../services\";import LoadingOverlay from\"react-loading-overlay\";import{translationHelpers,formatCurrency}from'../../../helpers';import{success}from\"toastr\";import{InfoBpmModel}from'../../../models/Common/InfoBpmModel';import{LogProcessModel}from'../../../models/Common/LogProcessModel';import LogProcess from\"../../../components/LogProcess/index\";import FacilityHistory from\"../../../components/Common/FacilityHistory\";import ModalBitacora from\"../../../components/Common/ModalBitacora\";import{saveLogProcess}from\"../../../helpers/logs_helper\";import HorizontalSteeper from\"../../../components/Common/HorizontalSteeper\";import ExposicionCorportativa from\"../5_PropuestaCredito/Secciones/ExposicionCorporativa\";import ExposicionCorporativaClientes from\"../5_PropuestaCredito/Secciones/ExposicionCorporativaCliente\";import LevelAutonomy from\"../5_PropuestaCredito/Secciones/LevelAutonomy\";import{uniq_key}from\"../../../helpers/unq_key\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommercialCreditProposalPage=function CommercialCreditProposalPage(props){var _data$datosGenerales$,_data$datosGenerales$2,_data$datosGenerales$3,_data$datosGenerales$4,_data$datosGenerales$5,_data$datosGenerales$6,_data$datosGenerales$7,_data$datosGenerales$8,_data$datosGenerales$9,_data$datosGenerales$10,_data$datosGenerales$11,_data$datosGenerales$12;var history=useHistory();var location=useLocation();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var sumaryData={client:{name:'Nombre Deudor'},financialStatus:{headers:['Auditados Dic-18','Auditados Dic-19','Auditados Dic-20','Proyecciones Dic-21'],items:[{label:'Clasificación SAFI',data:['-','-','5:6 Riesgo','-']},{label:'Crecimiento',data:['-','-3.4%','-12.5%','0.0%']},{label:'Costo de Ventas',data:['(1550)66.2%','(1510)66.8%','(1360)68.8%','(1360)68.8%']},{label:'Beneficio Mutuo en Operaciones',data:['(790)66.2%','(751)66.8%','(618)68.8%','(618)68.8%']},{label:'Margen Bruto',data:['','','','']}]},balances:{active:{title:t('Active Balance'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},passive:{title:t('Passive Balance and Capital'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},application:{title:t('Origin and Application Status'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},indicators:{title:t('Indicators'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]}},debts:{short:{items:[{bank:'Capital Bank',purpose:'Linea de Crédito',approvedAmount:200,balanceLastYear:200,balanceLast6Months:154,balanceForecast:200,rate:7.0,surety:'Fianza'},{bank:'St Georges',purpose:'Linea de Crédito',approvedAmount:320,balanceLastYear:200,balanceLast6Months:436,balanceForecast:450,rate:7.5,surety:'Fianza'},{bank:'St Georges',purpose:'TDC',approvedAmount:11,balanceLastYear:11,balanceLast6Months:0,balanceForecast:11,rate:null,surety:''}]},long:{items:[{bank:'Banesco',purpose:'Préstamo',approvedAmount:126,balanceLastYear:0,balanceLast6Months:0,balanceForecast:126,rate:6.5,surety:'Bien Inmueble'}]}},history:{headers:[t('# days',{days:30}),t('# days',{days:60}),t('# days',{days:90}),t('# days',{days:120}),t('# days',{days:150}),t('# days',{days:180}),t('# days',{days:210}),t('# days',{days:240}),t('# days',{days:270}),t('# days',{days:300}),t('# days',{days:330}),t('+# days',{days:331}),t('Totals')],data:[{name:'Banesco',data:[100,80,80,80,100,80,80,80,100,80,80,200,0]},{name:'Banesco',data:[100,80,80,80,100,80,80,80,100,80,80,200,0]}]}};var modelo={datosGenerales:{codigoTipoIdentificacion:null,numeroCliente:null,primerNombre:null,segundoNombre:null,primerApellido:null,segundoApellido:null,numeroIdentificacion:null,transactId:0,economicGroup:{code:\"\",name:\"\"},economicActivity:{code:\"\",name:\"\"},subeconomicActivity:{code:\"\",name:\"\"},bank:{code:\"\",name:\"\"}}};var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),proposal=_useState4[0],setProposal=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),changeSummaryItems=_useState6[0],setChangeSummaryItems=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),facilityListItems=_useState8[0],setFacilityListItems=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),identificationList=_useState10[0],setIdentificationList=_useState10[1];var _useState11=useState(sumaryData),_useState12=_slicedToArray(_useState11,2),financialSummary=_useState12[0],setFinancialSummary=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),prospect=_useState14[0],setProspect=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isActiveLoading=_useState16[0],setIsActiveLoading=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),personId=_useState18[0],setpersonId=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),mainDebtor=_useState20[0],setmainDebtor=_useState20[1];var _useState21=useState(modelo),_useState22=_slicedToArray(_useState21,2),data=_useState22[0],setData=_useState22[1];//mostrar el modal para la opción de finalizar proceso\nvar _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),displayModalEndProcess=_useState24[0],setdisplayModalEndProcess=_useState24[1];var _useState25=useState({msg:\"\",show:false,error:false}),_useState26=_slicedToArray(_useState25,2),messageDlg=_useState26[0],setmessageDlg=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),datosDeudores=_useState28[0],setdatosDeudores=_useState28[1];//Servicios\nvar _useState29=useState(new BackendServices()),_useState30=_slicedToArray(_useState29,2),backendServices=_useState30[0],setbackendServices=_useState30[1];var _useState31=useState(new BpmServices()),_useState32=_slicedToArray(_useState31,2),bpmServices=_useState32[0],setbpmServices=_useState32[1];var _useState33=useState(new CoreServices()),_useState34=_slicedToArray(_useState33,2),coreServices=_useState34[0],setcoreServices=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),displayModalBitacora=_useState36[0],setdisplayModalBitacora=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),optionSelected=_useState38[0],setoptionSelected=_useState38[1];//On Mounting (componentDidMount)\nuseEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);fetchData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);fetchData(result);}}},[]);//Caraga Inicial de datos\nfunction fetchData(locationData){console.log(\"fetchData\",locationData);//chequear si la tarea no ha sido iniciada\nbpmServices.checkAndStartTask(locationData).then(function(iniresult){if(iniresult===false){history.push(url.URL_DASHBOARD);}});backendServices.consultGeneralDataIGR(locationData.transactionId).then(function(resp){if(resp!=undefined){data.datosGenerales.transactId=locationData.transactionId;data.datosGenerales.economicGroup.code=resp.economicGroup.code;data.datosGenerales.economicGroup.name=resp.economicGroup.name;data.datosGenerales.economicActivity.code=resp.economicActivity.code;data.datosGenerales.economicActivity.name=resp.economicActivity.name;data.datosGenerales.subeconomicActivity.code=resp.subeconomicActivity.code;data.datosGenerales.subeconomicActivity.name=resp.subeconomicActivity.name;data.datosGenerales.bank.code=resp.bank.code;data.datosGenerales.bank.name=resp.bank.name;setData(data);}}).catch(function(error){});backendServices.consultarCatalogoTipoPersonaDescripcion(\"\").then(function(resp2){if(resp2!=undefined){// consultarDeudores\nbackendServices.consultarDeudores(locationData.transactionId).then(function(resp){if(resp==undefined)return;if(resp.length>0){setdatosDeudores(resp.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:resp2.find(function(x){return x.code===Number(data.typePerson);}).label}),/*#__PURE__*/_jsx(\"td\",{children:Number(data.typePerson)===2?data.name:data.name+\" \"+data.name2+\" \"+data.lastName+\" \"+data.lastName2}),/*#__PURE__*/_jsx(\"td\",{children:data.idType}),/*#__PURE__*/_jsx(\"td\",{children:data.clientDocId}),/*#__PURE__*/_jsx(\"td\",{children:data.customerNumberT24})]},uniq_key());}));}else{setdatosDeudores(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{textAlign:'center'}})},uniq_key()));}}).catch(function(error){});}});loadUserProspect(locationData.transactionId);getProspect(locationData);}function loadUserProspect(transactionId){// consultarDeudorPrincipal\nbackendServices.consultPrincipalDebtor(transactionId).then(function(data){if(data!==undefined){setmainDebtor(data);}});}function loadIdentifications(){return new Promise(function(resolve,reject){backendServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){setIdentificationList(data);}resolve();}).catch(function(error){resolve();console.error('api error: ',error);});});}function handleReturn(){history.push(url.URL_DASHBOARD);}function handleClose(){history.push(url.URL_DASHBOARD);}function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}function getProspect(locationData){Promise.allSettled([//backServices.consultarUsuarioProspecto(location.data.transactionId),\n//backServices.consultProspectUser(location.data.transactionId),\nbackendServices.consultPrincipalDebtor(locationData.transactionId),loadIdentifications()]).then(function(resp){var _resp=_slicedToArray(resp,1),PrincipalDebtor=_resp[0].value;console.log(resp,location,PrincipalDebtor);setIsActiveLoading(false);var customerNumberT24=PrincipalDebtor.customerNumberT24;setProspect(customerNumberT24);//loadFacilitiesList(customerNumberT24);\nsetpersonId(PrincipalDebtor.personId);}).catch(function(err){// console.log(err);\n});// backServices.consultProspectUser(location.data.transactionId).then(async (resp) => {\n//   console.log(resp);\n//   setIsActiveLoading(false)\n//   // customerNumberT24 = resp.customerNumberT24;\n//   setProspect(customerNumberT24);\n//   loadFacilitiesList(customerNumberT24);\n//   fetchProposal();\n// });\n// backServices.consultPrincipalDebtor(location.data.transactionId).then(async (resp) => {\n//   setpersonId(resp.personId);\n// });\n}/*\r\n  function loadFacilitiesList(idcliente) {\r\n      return new Promise(function (resolve, reject) {\r\n        coreServices.getFacilitiesByTransaction(locationData.transactionId)\r\n          .then(resp => {\r\n            setFacilityListItems(resp);\r\n            resolve();\r\n          })\r\n          .catch(err => {\r\n            resolve();\r\n          });\r\n      })\r\n    }\r\n  */function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}////////// PARTE ES LA FINAL DEL PROCESO ///////\nfunction onSaveProcess(option){switch(option){case OPTs.PROCESS_CANCELPROCESS:{break;}}saveJBPMProcess(option);}function saveJBPMProcess(_x){return _saveJBPMProcess.apply(this,arguments);}function _saveJBPMProcess(){_saveJBPMProcess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(option){var _locationData$infoBpm,_locationData$infoBpm2,_locationData$infoBpm3,_locationData$infoBpm4;var maindebtor,infoBpmModel,values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 2:maindebtor=_context.sent;infoBpmModel=new InfoBpmModel((_locationData$infoBpm=(_locationData$infoBpm2=locationData.infoBpmModel)===null||_locationData$infoBpm2===void 0?void 0:_locationData$infoBpm2.instanceId)!==null&&_locationData$infoBpm!==void 0?_locationData$infoBpm:locationData.instanceId,(_locationData$infoBpm3=(_locationData$infoBpm4=locationData.infoBpmModel)===null||_locationData$infoBpm4===void 0?void 0:_locationData$infoBpm4.transactId)!==null&&_locationData$infoBpm3!==void 0?_locationData$infoBpm3:locationData.transactionId,0,0,maindebtor===null||maindebtor===void 0?void 0:maindebtor.personId);infoBpmModel.personName=maindebtor!==undefined?maindebtor.typePerson==\"2\"?maindebtor.name:maindebtor.name+\" \"+maindebtor.name2+\" \"+maindebtor.lastName+\" \"+maindebtor.lastName2:\"\";_context.t0=option;_context.next=_context.t0===OPTs.PROCESS_CANCELPROCESS?8:_context.t0===OPTs.PROCESS_ANALISISCREDITO?10:_context.t0===OPTs.PROCESS_INFORMEFINANCIERO?15:_context.t0===OPTs.PROCESS_INFORMEGESTION?20:25;break;case 8:bpmServices.abortProcess(infoBpmModel.instanceId).then(function(data){if(data!==undefined){saveAutoLog(OPTs.APPLICATION_STATUS_CANC,\"\");history.push(url.URL_DASHBOARD);}else{showMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 10:infoBpmModel.processId=OPTs.PROCESS_ANALISISCREDITO;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_ANALISISCREDITO.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId.toString()};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){showMessage({msg:t(\"Datahasbeensavedsuccessfully\"),error:false,show:true});history.push(url.URL_DASHBOARD);}else{showMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 15:infoBpmModel.processId=OPTs.PROCESS_INFORMEFINANCIERO;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_INFORMEFINANCIERO.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId.toString()};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){saveAutoLog(t(\"ActivityHasBeenFinishedSuccessfully\"));history.push({pathname:url.URL_FINANCIALINFO,data:locationData});}else{showMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 20://requiere ajustes\ninfoBpmModel.processId=OPTs.PROCESS_INFORMEGESTION;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_INFORMEGESTION.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"requestId\":locationData.requestId,\"decision\":\"ajuste\",//requiere ajustes\n\"ajuste\":\"ejecutivo\"//\"dcreditoparalelo\": \"sinparalelo\",\n//\"statuscredito\": \"completo\", //el paralelo de Credito esta activo\n};bpmServices.completedStatusTask(locationData.taskId,values).then(function(data){if(data!==undefined){saveAutoLog(OPTs.APPLICATION_STATUS_DEV,t(\"The activity has been returned for adjustment\"));history.push(url.URL_DASHBOARD);}else{//Mensaje ERROR\nshowMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 25:return _context.abrupt(\"break\",26);case 26:case\"end\":return _context.stop();}}},_callee);}));return _saveJBPMProcess.apply(this,arguments);}function showMessage(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(data!==null){setmessageDlg(data);}else{setmessageDlg({msg:\"\",show:false,error:false});}}function showModalBitacora(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setdisplayModalBitacora(show);}function saveAutoLog(){return _saveAutoLog.apply(this,arguments);}function _saveAutoLog(){_saveAutoLog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _mainDebtor$personId,_ref,_APPLICATION_STATUS$i,_APPLICATION_STATUS$n;var APPLICATION_STATUS,observations,mainDebtor,log,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:APPLICATION_STATUS=_args2.length>0&&_args2[0]!==undefined?_args2[0]:null;observations=_args2.length>1&&_args2[1]!==undefined?_args2[1]:null;_context2.next=4;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 4:mainDebtor=_context2.sent;log=new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_ANALISISCREDITO,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_04);log.clientId=(_mainDebtor$personId=mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.personId)!==null&&_mainDebtor$personId!==void 0?_mainDebtor$personId:log.clientId;log.observations=(_ref=observations==null?t(\"ActivityHasBeenFinishedSuccessfully\"):observations)!==null&&_ref!==void 0?_ref:\"\";log.requestId=(_APPLICATION_STATUS$i=APPLICATION_STATUS===null||APPLICATION_STATUS===void 0?void 0:APPLICATION_STATUS.id)!==null&&_APPLICATION_STATUS$i!==void 0?_APPLICATION_STATUS$i:0;log.statusDescription=(_APPLICATION_STATUS$n=APPLICATION_STATUS===null||APPLICATION_STATUS===void 0?void 0:APPLICATION_STATUS.name)!==null&&_APPLICATION_STATUS$n!==void 0?_APPLICATION_STATUS$n:\"\";saveLogProcess(log);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _saveAutoLog.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:locationData?/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Commercial Credit\"),breadcrumbItem:t(\"Credit Analysis\")}),/*#__PURE__*/_jsx(HorizontalSteeper,{processNumber:1,activeStep:2}),/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:[/*#__PURE__*/_jsxs(Row,{style:{marginTop:\"0px\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",style:{margin:'5px 0px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_CANCELPROCESS);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"CancelProcess\")]}),/*#__PURE__*/_jsxs(Button,{color:\"primary\",style:{margin:'0px 5px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_INFORMEGESTION);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-backspace-outline mid-12px\"}),\" \",t(\"AdjustRequired\")]})]}),/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_ANALISISCREDITO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save-outline mid-12px\"}),\" \",t(\"Exit\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",onClick:function onClick(){onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"FinantialReport\")]})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"Credit Analysis\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"This form is official and must be filled out correctly\")})]}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title title-header\",children:[mainDebtor!=null?mainDebtor.typePerson===\"1\"?mainDebtor.name+\" \"+mainDebtor.name2+\" \"+mainDebtor.lastName+\" \"+mainDebtor.lastName2:mainDebtor.name:\"\",\" \"]})}),/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",style:{textAlign:\"right\"},children:[t(\"Tramit\"),\":\",\" \",\"#\",locationData===null||locationData===void 0?void 0:locationData.transactionId]})})]})}),/*#__PURE__*/_jsx(Col,{md:12,className:\"d-flex flex-column flex-sm-row justify-content-between\",children:/*#__PURE__*/_jsx(LevelAutonomy,{})})]})}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(GeneralSection,{proposal:proposal,prospect:prospect})})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:t(\"General Data\")})}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"PersonType\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"FullName\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"IdentificationType\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"IdentificationNumber\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Customer ID\")})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:datosDeudores})]})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsx(\"strong\",{htmlFor:\"clientNumber\",children:t(\"Economic Group\")})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$datosGenerales$=data.datosGenerales.economicGroup)===null||_data$datosGenerales$===void 0?void 0:_data$datosGenerales$.name)==\"\"||((_data$datosGenerales$2=data.datosGenerales.economicGroup)===null||_data$datosGenerales$2===void 0?void 0:_data$datosGenerales$2.name)==null?t(\"NoData\"):(_data$datosGenerales$3=data.datosGenerales.economicGroup)===null||_data$datosGenerales$3===void 0?void 0:_data$datosGenerales$3.name})}),/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsx(\"strong\",{htmlFor:\"clientNumber\",children:t(\"Economic Activity\")})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$datosGenerales$4=data.datosGenerales.economicActivity)===null||_data$datosGenerales$4===void 0?void 0:_data$datosGenerales$4.name)==\"\"||((_data$datosGenerales$5=data.datosGenerales.economicActivity)===null||_data$datosGenerales$5===void 0?void 0:_data$datosGenerales$5.name)==null?t(\"NoData\"):(_data$datosGenerales$6=data.datosGenerales.economicActivity)===null||_data$datosGenerales$6===void 0?void 0:_data$datosGenerales$6.name})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsx(\"strong\",{htmlFor:\"clientNumber\",children:t(\"Banking\")})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$datosGenerales$7=data.datosGenerales.bank)===null||_data$datosGenerales$7===void 0?void 0:_data$datosGenerales$7.name)==\"\"||((_data$datosGenerales$8=data.datosGenerales.bank)===null||_data$datosGenerales$8===void 0?void 0:_data$datosGenerales$8.name)==null?t(\"NoData\"):(_data$datosGenerales$9=data.datosGenerales.bank)===null||_data$datosGenerales$9===void 0?void 0:_data$datosGenerales$9.name})}),/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsxs(\"strong\",{htmlFor:\"clientNumber\",children:[\"Sub\",t(\"Economic Activity\")]})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$datosGenerales$10=data.datosGenerales.subeconomicActivity)===null||_data$datosGenerales$10===void 0?void 0:_data$datosGenerales$10.name)==\"\"||((_data$datosGenerales$11=data.datosGenerales.subeconomicActivity)===null||_data$datosGenerales$11===void 0?void 0:_data$datosGenerales$11.name)==null?t(\"NoData\"):(_data$datosGenerales$12=data.datosGenerales.subeconomicActivity)===null||_data$datosGenerales$12===void 0?void 0:_data$datosGenerales$12.name})})]})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:mainDebtor?/*#__PURE__*/ // <CorporateExposure title={t(\"CorporateExhibition\")} customerNumberT24={mainDebtor?.customerNumberT24} />\n_jsx(ExposicionCorportativa,{activeTab:2,title:t(\"CorporateExhibition\"),customerNumberT24:mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.customerNumberT24}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:mainDebtor?/*#__PURE__*/ // <CorporateExposureClient title={t(\"CorporateExhibitionClient\")} customerNumberT24={mainDebtor?.customerNumberT24} />\n_jsx(ExposicionCorporativaClientes,{activeTab:2,title:t(\"CorporateExhibitionClient\"),customerNumberT24:mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.customerNumberT24}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:locationData?/*#__PURE__*/_jsx(ChangeSummaryReadOnly,{transactionId:locationData===null||locationData===void 0?void 0:locationData.transactionId}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:mainDebtor&&locationData?/*#__PURE__*/ // <FacilityListCore transactId={locationData.transactionId} customerNumberT24={mainDebtor?.customerNumberT24} />\n_jsx(FacilityHistory,{validacion:true,transactId:locationData.transactionId,design:true,mainDebtor:mainDebtor,partyId:mainDebtor.customerNumberT24}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:locationData?/*#__PURE__*/_jsx(FacilityListBpm,{transactionId:locationData===null||locationData===void 0?void 0:locationData.transactionId}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(HeaderSections,{title:\"Attachments\",t:t}),locationData?/*#__PURE__*/_jsx(AttachmentFileCore,{attachmentFileInputModel:new AttachmentFileInputModel(locationData.transactionId,OPTs.PROCESS_ANALISISCREDITO)}):null]})})})]}),/*#__PURE__*/_jsx(CardFooter,{})]})]}),locationData?/*#__PURE__*/_jsx(LogProcess,{logProcessModel:new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_ANALISISCREDITO,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_04)}):null,/*#__PURE__*/_jsxs(Row,{style:{marginTop:\"0px\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",style:{margin:'5px 0px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_CANCELPROCESS);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"CancelProcess\")]}),/*#__PURE__*/_jsxs(Button,{color:\"primary\",style:{margin:'0px 5px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_INFORMEGESTION);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-backspace-outline mid-12px\"}),\" \",t(\"AdjustRequired\")]})]}),/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_ANALISISCREDITO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save-outline mid-12px\"}),\" \",t(\"Exit\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",onClick:function onClick(){onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"FinantialReport\")]})]})]}),locationData&&displayModalBitacora?/*#__PURE__*/_jsx(ModalBitacora,{logProcessModel:new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_ANALISISCREDITO,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_04),successSaved:function successSaved(){onSaveProcess(optionSelected);},isOpen:displayModalBitacora,toggle:function toggle(){showModalBitacora(false);}}):null,messageDlg&&messageDlg.show?/*#__PURE__*/_jsx(SweetAlert,{type:messageDlg.error?\"error\":\"success\",title:messageDlg.error?t(\"Error\"):t(\"Message\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){showMessage();},children:messageDlg.msg}):null]}):null});};export default CommercialCreditProposalPage;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/6_AnalisisCredito/CommercialCreditProposalPage.js"],"names":["React","useEffect","useState","useLocation","useHistory","url","useTranslation","withTranslation","Row","Col","Button","Card","CardBody","CardFooter","CardHeader","Label","Table","Link","Breadcrumbs","FacilityListBpm","FacilityListCore","ChangeSummaryReadOnly","CorporateExposure","CorporateExposureClient","FacilityList","FinancialSummary","GeneralSection","SweetAlert","AttachmentFileCore","OPTs","AttachmentFileInputModel","HeaderSections","ModalEndProcess","BackendServices","CoreServices","BpmServices","LoadingOverlay","translationHelpers","formatCurrency","success","InfoBpmModel","LogProcessModel","LogProcess","FacilityHistory","ModalBitacora","saveLogProcess","HorizontalSteeper","ExposicionCorportativa","ExposicionCorporativaClientes","LevelAutonomy","uniq_key","CommercialCreditProposalPage","props","history","location","t","i18n","locationData","setLocationData","sumaryData","client","name","financialStatus","headers","items","label","data","balances","active","title","passive","application","indicators","debts","short","bank","purpose","approvedAmount","balanceLastYear","balanceLast6Months","balanceForecast","rate","surety","long","days","modelo","datosGenerales","codigoTipoIdentificacion","numeroCliente","primerNombre","segundoNombre","primerApellido","segundoApellido","numeroIdentificacion","transactId","economicGroup","code","economicActivity","subeconomicActivity","proposal","setProposal","changeSummaryItems","setChangeSummaryItems","facilityListItems","setFacilityListItems","identificationList","setIdentificationList","financialSummary","setFinancialSummary","prospect","setProspect","isActiveLoading","setIsActiveLoading","personId","setpersonId","mainDebtor","setmainDebtor","setData","displayModalEndProcess","setdisplayModalEndProcess","msg","show","error","messageDlg","setmessageDlg","datosDeudores","setdatosDeudores","backendServices","setbackendServices","bpmServices","setbpmServices","coreServices","setcoreServices","displayModalBitacora","setdisplayModalBitacora","optionSelected","setoptionSelected","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","fetchData","result","getItem","parse","console","log","checkAndStartTask","then","iniresult","consultGeneralDataIGR","resp","catch","consultarCatalogoTipoPersonaDescripcion","resp2","consultarDeudores","map","find","x","Number","typePerson","name2","lastName","lastName2","idType","clientDocId","customerNumberT24","textAlign","loadUserProspect","getProspect","consultPrincipalDebtor","loadIdentifications","Promise","resolve","reject","consultarCatalogoTipoIdentificacion","handleReturn","handleClose","handleSaveFacility","newItem","newFacilities","allSettled","PrincipalDebtor","value","err","onSaveProcess","option","PROCESS_CANCELPROCESS","saveJBPMProcess","maindebtor","infoBpmModel","instanceId","personName","PROCESS_ANALISISCREDITO","PROCESS_INFORMEFINANCIERO","PROCESS_INFORMEGESTION","abortProcess","saveAutoLog","APPLICATION_STATUS_CANC","showMessage","processId","activityId","ACT_NONE","values","toString","updatevariables","pathname","URL_FINANCIALINFO","requestId","completedStatusTask","taskId","APPLICATION_STATUS_DEV","showModalBitacora","APPLICATION_STATUS","observations","BPM_ACTIVITY_04","clientId","id","statusDescription","marginTop","marginBottom","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  Label,\r\n  Table,\r\n} from \"reactstrap\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\n// UI Components\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport {\r\n  FacilityListBpm, FacilityListCore, ChangeSummaryReadOnly, CorporateExposure, CorporateExposureClient,\r\n  FacilityList, FinancialSummary,\r\n  GeneralSection\r\n} from \"../../../components/PropuestaCreditoComercial\"\r\n\r\n\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport AttachmentFileCore from \"../../../components/Common/AttachmentFileCore\";\r\nimport * as OPTs from \"../../../helpers/options_helper\";\r\nimport { AttachmentFileInputModel } from '../../../models/Common/AttachmentFileInputModel';\r\nimport HeaderSections from \"../../../components/Common/HeaderSections\";\r\nimport ModalEndProcess from \"../../../components/EndProcess/ModalEndProcess\"\r\n\r\n// Services\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport LoadingOverlay from \"react-loading-overlay\"\r\nimport { translationHelpers, formatCurrency } from '../../../helpers';\r\nimport { success } from \"toastr\"\r\n\r\nimport { InfoBpmModel } from '../../../models/Common/InfoBpmModel';\r\n\r\nimport { LogProcessModel } from '../../../models/Common/LogProcessModel';\r\nimport LogProcess from \"../../../components/LogProcess/index\";\r\nimport FacilityHistory from \"../../../components/Common/FacilityHistory\"\r\n\r\nimport ModalBitacora from \"../../../components/Common/ModalBitacora\";\r\n\r\nimport { saveLogProcess } from \"../../../helpers/logs_helper\";\r\n\r\nimport HorizontalSteeper from \"../../../components/Common/HorizontalSteeper\";\r\nimport ExposicionCorportativa from \"../5_PropuestaCredito/Secciones/ExposicionCorporativa\"\r\nimport ExposicionCorporativaClientes from \"../5_PropuestaCredito/Secciones/ExposicionCorporativaCliente\"\r\nimport LevelAutonomy from \"../5_PropuestaCredito/Secciones/LevelAutonomy\"\r\nimport { uniq_key } from \"../../../helpers/unq_key\"\r\n\r\nconst CommercialCreditProposalPage = (props) => {\r\n\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const { t, i18n } = useTranslation();\r\n  const [locationData, setLocationData] = useState(null);\r\n\r\n  const sumaryData = {\r\n    client: {\r\n      name: 'Nombre Deudor'\r\n    },\r\n    financialStatus: {\r\n      headers: ['Auditados Dic-18', 'Auditados Dic-19', 'Auditados Dic-20', 'Proyecciones Dic-21'],\r\n      items: [\r\n        {\r\n          label: 'Clasificación SAFI',\r\n          data: ['-', '-', '5:6 Riesgo', '-']\r\n        },\r\n        {\r\n          label: 'Crecimiento',\r\n          data: ['-', '-3.4%', '-12.5%', '0.0%']\r\n        },\r\n        {\r\n          label: 'Costo de Ventas',\r\n          data: ['(1550)66.2%', '(1510)66.8%', '(1360)68.8%', '(1360)68.8%']\r\n        },\r\n        {\r\n          label: 'Beneficio Mutuo en Operaciones',\r\n          data: ['(790)66.2%', '(751)66.8%', '(618)68.8%', '(618)68.8%']\r\n        },\r\n        {\r\n          label: 'Margen Bruto',\r\n          data: ['', '', '', '']\r\n        }\r\n      ]\r\n    },\r\n    balances: {\r\n      active: {\r\n        title: t('Active Balance'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      },\r\n      passive: {\r\n        title: t('Passive Balance and Capital'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      },\r\n      application: {\r\n        title: t('Origin and Application Status'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      },\r\n      indicators: {\r\n        title: t('Indicators'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      }\r\n    },\r\n    debts: {\r\n      short: {\r\n        items: [\r\n          {\r\n            bank: 'Capital Bank',\r\n            purpose: 'Linea de Crédito',\r\n            approvedAmount: 200,\r\n            balanceLastYear: 200,\r\n            balanceLast6Months: 154,\r\n            balanceForecast: 200,\r\n            rate: 7.0,\r\n            surety: 'Fianza'\r\n          },\r\n          {\r\n            bank: 'St Georges',\r\n            purpose: 'Linea de Crédito',\r\n            approvedAmount: 320,\r\n            balanceLastYear: 200,\r\n            balanceLast6Months: 436,\r\n            balanceForecast: 450,\r\n            rate: 7.5,\r\n            surety: 'Fianza'\r\n          },\r\n          {\r\n            bank: 'St Georges',\r\n            purpose: 'TDC',\r\n            approvedAmount: 11,\r\n            balanceLastYear: 11,\r\n            balanceLast6Months: 0,\r\n            balanceForecast: 11,\r\n            rate: null,\r\n            surety: ''\r\n          }\r\n        ]\r\n      },\r\n      long: {\r\n        items: [\r\n          {\r\n            bank: 'Banesco',\r\n            purpose: 'Préstamo',\r\n            approvedAmount: 126,\r\n            balanceLastYear: 0,\r\n            balanceLast6Months: 0,\r\n            balanceForecast: 126,\r\n            rate: 6.5,\r\n            surety: 'Bien Inmueble'\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    history: {\r\n      headers: [\r\n        t('# days', { days: 30 }),\r\n        t('# days', { days: 60 }),\r\n        t('# days', { days: 90 }),\r\n        t('# days', { days: 120 }),\r\n        t('# days', { days: 150 }),\r\n        t('# days', { days: 180 }),\r\n        t('# days', { days: 210 }),\r\n        t('# days', { days: 240 }),\r\n        t('# days', { days: 270 }),\r\n        t('# days', { days: 300 }),\r\n        t('# days', { days: 330 }),\r\n        t('+# days', { days: 331 }),\r\n        t('Totals')\r\n      ],\r\n      data: [\r\n        {\r\n          name: 'Banesco',\r\n          data: [100, 80, 80, 80, 100, 80, 80, 80, 100, 80, 80, 200, 0]\r\n        },\r\n        {\r\n          name: 'Banesco',\r\n          data: [100, 80, 80, 80, 100, 80, 80, 80, 100, 80, 80, 200, 0]\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  let modelo = {\r\n    datosGenerales: {\r\n      codigoTipoIdentificacion: null,\r\n      numeroCliente: null,\r\n      primerNombre: null,\r\n      segundoNombre: null,\r\n      primerApellido: null,\r\n      segundoApellido: null,\r\n      numeroIdentificacion: null,\r\n      transactId: 0,\r\n      economicGroup: {\r\n        code: \"\",\r\n        name: \"\"\r\n      },\r\n      economicActivity: {\r\n        code: \"\",\r\n        name: \"\"\r\n      },\r\n      subeconomicActivity: {\r\n        code: \"\",\r\n        name: \"\"\r\n      },\r\n      bank: {\r\n        code: \"\",\r\n        name: \"\"\r\n      },\r\n    },\r\n  }\r\n  const [proposal, setProposal] = useState(null);\r\n  const [changeSummaryItems, setChangeSummaryItems] = useState([]);\r\n  const [facilityListItems, setFacilityListItems] = useState([]);\r\n  const [identificationList, setIdentificationList] = useState([]);\r\n  const [financialSummary, setFinancialSummary] = useState(sumaryData);\r\n  const [prospect, setProspect] = useState({});\r\n  const [isActiveLoading, setIsActiveLoading] = useState(true);\r\n  const [personId, setpersonId] = useState(null);\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n  const [data, setData] = useState(modelo)\r\n  //mostrar el modal para la opción de finalizar proceso\r\n  const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\r\n  const [messageDlg, setmessageDlg] = useState({ msg: \"\", show: false, error: false });\r\n  const [datosDeudores, setdatosDeudores] = useState(null)\r\n\r\n\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n  const [coreServices, setcoreServices] = useState(new CoreServices());\r\n\r\n  const [displayModalBitacora, setdisplayModalBitacora] = useState(false);\r\n  const [optionSelected, setoptionSelected] = useState(null);\r\n\r\n  //On Mounting (componentDidMount)\r\n  useEffect(() => {\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        fetchData(location.data);\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        fetchData(result);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  //Caraga Inicial de datos\r\n  function fetchData(locationData) {\r\n\r\n    console.log(\"fetchData\", locationData);\r\n    //chequear si la tarea no ha sido iniciada\r\n    bpmServices.checkAndStartTask(locationData)\r\n      .then((iniresult) => {\r\n        if (iniresult === false) {\r\n          history.push(url.URL_DASHBOARD);\r\n        }\r\n      })\r\n    backendServices.consultGeneralDataIGR(locationData.transactionId).then(resp => {\r\n      if (resp != undefined) {\r\n        data.datosGenerales.transactId = locationData.transactionId;\r\n        data.datosGenerales.economicGroup.code = resp.economicGroup.code;\r\n        data.datosGenerales.economicGroup.name = resp.economicGroup.name;\r\n        data.datosGenerales.economicActivity.code = resp.economicActivity.code;\r\n        data.datosGenerales.economicActivity.name = resp.economicActivity.name;\r\n        data.datosGenerales.subeconomicActivity.code = resp.subeconomicActivity.code;\r\n        data.datosGenerales.subeconomicActivity.name = resp.subeconomicActivity.name;\r\n        data.datosGenerales.bank.code = resp.bank.code;\r\n        data.datosGenerales.bank.name = resp.bank.name;\r\n        setData(data);\r\n\r\n      }\r\n    }).catch((error) => {\r\n    });\r\n    backendServices.consultarCatalogoTipoPersonaDescripcion(\"\").then(resp2 => {\r\n      if (resp2 != undefined) {\r\n        // consultarDeudores\r\n        backendServices.consultarDeudores(locationData.transactionId).then(resp => {\r\n          if (resp == undefined) return;\r\n          if (resp.length > 0) {\r\n            setdatosDeudores(resp.map((data) => (\r\n              <tr key={uniq_key()}>\r\n                <td>{resp2.find(x => x.code === Number(data.typePerson)).label}</td>\r\n                <td>{Number(data.typePerson) === 2 ? data.name : data.name + \" \" + data.name2 + \" \" + data.lastName + \" \" + data.lastName2}</td>\r\n                <td>{data.idType}</td>\r\n                <td>{data.clientDocId}</td>\r\n                <td>{data.customerNumberT24}</td>\r\n              </tr>)))\r\n          } else {\r\n            setdatosDeudores(\r\n              <tr key={uniq_key()}>\r\n                <td colSpan=\"4\" style={{ textAlign: 'center' }}></td>\r\n              </tr>);\r\n\r\n          }\r\n\r\n        }).catch((error) => {\r\n\r\n        });\r\n      }\r\n    })\r\n    loadUserProspect(locationData.transactionId)\r\n    getProspect(locationData);\r\n  }\r\n\r\n  function loadUserProspect(transactionId) {\r\n    // consultarDeudorPrincipal\r\n    backendServices.consultPrincipalDebtor(transactionId)\r\n      .then((data) => {\r\n        if (data !== undefined) {\r\n          setmainDebtor(data);\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n\r\n  function loadIdentifications() {\r\n\r\n    return new Promise((resolve, reject) => {\r\n      backendServices.consultarCatalogoTipoIdentificacion()\r\n        .then((data) => {\r\n          if (data !== null && data !== undefined) {\r\n            setIdentificationList(data);\r\n          }\r\n          resolve();\r\n        })\r\n        .catch((error) => {\r\n          resolve();\r\n          console.error('api error: ', error);\r\n        });\r\n    })\r\n  }\r\n\r\n  function handleReturn() {\r\n    history.push(url.URL_DASHBOARD);\r\n  }\r\n\r\n  function handleClose() {\r\n    history.push(url.URL_DASHBOARD);\r\n  }\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n  function getProspect(locationData) {\r\n    Promise.allSettled([\r\n      //backServices.consultarUsuarioProspecto(location.data.transactionId),\r\n      //backServices.consultProspectUser(location.data.transactionId),\r\n      backendServices.consultPrincipalDebtor(locationData.transactionId),\r\n      loadIdentifications()\r\n    ]).then((resp) => {\r\n      const [{ value: PrincipalDebtor }] = resp;\r\n      console.log(resp, location, PrincipalDebtor);\r\n      setIsActiveLoading(false);\r\n      let customerNumberT24 = PrincipalDebtor.customerNumberT24;\r\n      setProspect(customerNumberT24);\r\n      //loadFacilitiesList(customerNumberT24);\r\n      setpersonId(PrincipalDebtor.personId);\r\n    }).catch(err => {\r\n      // console.log(err);\r\n    });\r\n\r\n    // backServices.consultProspectUser(location.data.transactionId).then(async (resp) => {\r\n    //   console.log(resp);\r\n    //   setIsActiveLoading(false)\r\n    //   // customerNumberT24 = resp.customerNumberT24;\r\n    //   setProspect(customerNumberT24);\r\n    //   loadFacilitiesList(customerNumberT24);\r\n    //   fetchProposal();\r\n    // });\r\n\r\n    // backServices.consultPrincipalDebtor(location.data.transactionId).then(async (resp) => {\r\n    //   setpersonId(resp.personId);\r\n    // });\r\n\r\n  }\r\n\r\n  /*\r\n  function loadFacilitiesList(idcliente) {\r\n      return new Promise(function (resolve, reject) {\r\n        coreServices.getFacilitiesByTransaction(locationData.transactionId)\r\n          .then(resp => {\r\n            setFacilityListItems(resp);\r\n            resolve();\r\n          })\r\n          .catch(err => {\r\n            resolve();\r\n          });\r\n      })\r\n    }\r\n  */\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n\r\n  ////////// PARTE ES LA FINAL DEL PROCESO ///////\r\n\r\n  function onSaveProcess(option) {\r\n\r\n    switch (option) {\r\n      case OPTs.PROCESS_CANCELPROCESS: {\r\n        break;\r\n      }\r\n    }\r\n    saveJBPMProcess(option);\r\n  }\r\n  async function saveJBPMProcess(option) {\r\n    var maindebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n    var infoBpmModel = new InfoBpmModel(\r\n      locationData.infoBpmModel?.instanceId ?? locationData.instanceId,\r\n      locationData.infoBpmModel?.transactId ?? locationData.transactionId,\r\n      0, 0,\r\n      maindebtor?.personId\r\n    );\r\n    infoBpmModel.personName = maindebtor !== undefined ? (maindebtor.typePerson == \"2\" ? maindebtor.name : (maindebtor.name + \" \" + maindebtor.name2 + \" \" + maindebtor.lastName + \" \" + maindebtor.lastName2)) : \"\";\r\n\r\n    switch (option) {\r\n      case OPTs.PROCESS_CANCELPROCESS: {\r\n        bpmServices.abortProcess(infoBpmModel.instanceId)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              saveAutoLog(OPTs.APPLICATION_STATUS_CANC, \"\");\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_ANALISISCREDITO: {\r\n        infoBpmModel.processId = OPTs.PROCESS_ANALISISCREDITO;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_ANALISISCREDITO.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId.toString(),\r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              showMessage({ msg: t(\"Datahasbeensavedsuccessfully\"), error: false, show: true });\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_INFORMEFINANCIERO: {\r\n        infoBpmModel.processId = OPTs.PROCESS_INFORMEFINANCIERO;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_INFORMEFINANCIERO.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId.toString(),\r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n\r\n              saveAutoLog(t(\"ActivityHasBeenFinishedSuccessfully\"));\r\n\r\n              history.push({\r\n                pathname: url.URL_FINANCIALINFO,\r\n                data: locationData,\r\n              });\r\n            }\r\n            else {\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_INFORMEGESTION: { //requiere ajustes\r\n        infoBpmModel.processId = OPTs.PROCESS_INFORMEGESTION;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_INFORMEGESTION.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"requestId\": locationData.requestId,\r\n          \"decision\": \"ajuste\",          //requiere ajustes\r\n          \"ajuste\": \"ejecutivo\",\r\n          //\"dcreditoparalelo\": \"sinparalelo\",\r\n          //\"statuscredito\": \"completo\", //el paralelo de Credito esta activo\r\n        };\r\n        bpmServices.completedStatusTask(locationData.taskId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              saveAutoLog(OPTs.APPLICATION_STATUS_DEV, t(\"The activity has been returned for adjustment\"));\r\n\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function showMessage(data = null) {\r\n    if (data !== null) {\r\n      setmessageDlg(data)\r\n    }\r\n    else {\r\n      setmessageDlg({ msg: \"\", show: false, error: false })\r\n    }\r\n  }\r\n\r\n  function showModalBitacora(show = true) {\r\n    setdisplayModalBitacora(show);\r\n  }\r\n\r\n  async function saveAutoLog(APPLICATION_STATUS = null, observations = null) {\r\n    var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId);\r\n    var log = new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ANALISISCREDITO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_04)\r\n    log.clientId = mainDebtor?.personId ?? log.clientId;\r\n    log.observations = (observations == null ? t(\"ActivityHasBeenFinishedSuccessfully\") : observations) ?? \"\";\r\n    log.requestId = APPLICATION_STATUS?.id ?? 0;\r\n    log.statusDescription = APPLICATION_STATUS?.name ?? \"\";\r\n    saveLogProcess(log);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {locationData ?\r\n        <div className=\"page-content\">\r\n\r\n          <Breadcrumbs title={t(\"Commercial Credit\")} breadcrumbItem={t(\"Credit Analysis\")} />\r\n\r\n          <HorizontalSteeper processNumber={1} activeStep={2}></HorizontalSteeper>\r\n\r\n          <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n            <Row style={{ marginTop: \"0px\", marginBottom: \"15px\" }}>\r\n              <Col md={6} style={{ textAlign: \"left\" }}>\r\n                <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_CANCELPROCESS); showModalBitacora() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n                <Button color=\"primary\" style={{ margin: '0px 5px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_INFORMEGESTION); showModalBitacora() }}><i className=\"mdi mdi-backspace-outline mid-12px\"></i> {t(\"AdjustRequired\")}</Button>\r\n\r\n              </Col>\r\n              <Col md={6} style={{ textAlign: \"right\" }}>\r\n                <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.PROCESS_ANALISISCREDITO) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n                <Button color=\"success\" type=\"button\"\r\n                  onClick={() => { onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO) }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"FinantialReport\")}</Button>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <Row>\r\n                  <Col md={6}>\r\n                    <h4 className=\"card-title\">{t(\"Credit Analysis\")}</h4>\r\n                    <p className=\"card-title-desc\">{t(\"This form is official and must be filled out correctly\")}</p>\r\n                  </Col>\r\n                  <Col md={6}>\r\n                    <Row>\r\n                      <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                        <h5 className=\"card-title title-header\">{mainDebtor != null ? (mainDebtor.typePerson === \"1\" ? (mainDebtor.name + \" \" + mainDebtor.name2 + \" \" + mainDebtor.lastName + \" \" + mainDebtor.lastName2) : (mainDebtor.name)) : \"\"} </h5>\r\n                      </Col>\r\n                      <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                        <h5 className=\"card-title\" style={{ textAlign: \"right\" }}>{t(\"Tramit\")}:{\" \"}#{locationData?.transactionId}</h5>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                  <Col md={12} className=\"d-flex flex-column flex-sm-row justify-content-between\">\r\n                    <LevelAutonomy />\r\n                  </Col>\r\n                </Row>\r\n              </CardHeader>\r\n\r\n              <CardBody>\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    <GeneralSection proposal={proposal} prospect={prospect} />\r\n                  </Col>\r\n                </Row>\r\n                <Card>\r\n                  <CardHeader>\r\n                    <h5 className=\"card-title\">{t(\"General Data\")}</h5>\r\n                  </CardHeader>\r\n                  <CardBody>\r\n                    <Row>\r\n                      <Col md=\"12\" className=\"table-responsive styled-table-div\">\r\n                        <Table className=\"table table-striped table-hover styled-table table\">\r\n                          <thead >\r\n                            <tr>\r\n                              <th><strong>{t(\"PersonType\")}</strong></th>\r\n                              <th><strong>{t(\"FullName\")}</strong></th>\r\n                              <th><strong>{t(\"IdentificationType\")}</strong></th>\r\n                              <th><strong>{t(\"IdentificationNumber\")}</strong></th>\r\n                              <th><strong>{t(\"Customer ID\")}</strong></th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {datosDeudores}\r\n                          </tbody>\r\n                        </Table>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">{t(\"Economic Group\")}</strong>\r\n                      </Col>\r\n                      <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.datosGenerales.economicGroup?.name == \"\" || data.datosGenerales.economicGroup?.name == null ? t(\"NoData\") : data.datosGenerales.economicGroup?.name}</Label>\r\n                      </Col>\r\n                      <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">{t(\"Economic Activity\")}</strong>\r\n                      </Col>\r\n                      <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.datosGenerales.economicActivity?.name == \"\" || data.datosGenerales.economicActivity?.name == null ? t(\"NoData\") : data.datosGenerales.economicActivity?.name}</Label>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">{t(\"Banking\")}</strong>\r\n                      </Col>\r\n                      <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.datosGenerales.bank?.name == \"\" || data.datosGenerales.bank?.name == null ? t(\"NoData\") : data.datosGenerales.bank?.name}</Label>\r\n                      </Col>\r\n                      <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">Sub{t(\"Economic Activity\")}</strong>\r\n                      </Col>\r\n                      <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.datosGenerales.subeconomicActivity?.name == \"\" || data.datosGenerales.subeconomicActivity?.name == null ? t(\"NoData\") : data.datosGenerales.subeconomicActivity?.name}</Label>\r\n                      </Col>\r\n                    </Row>\r\n                  </CardBody>\r\n                </Card>\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {mainDebtor ?\r\n                      // <CorporateExposure title={t(\"CorporateExhibition\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      <ExposicionCorportativa activeTab={2} title={t(\"CorporateExhibition\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {mainDebtor ?\r\n                      // <CorporateExposureClient title={t(\"CorporateExhibitionClient\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      <ExposicionCorporativaClientes activeTab={2} title={t(\"CorporateExhibitionClient\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n\r\n                    {locationData ?\r\n                      <ChangeSummaryReadOnly transactionId={locationData?.transactionId} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {mainDebtor && locationData ?\r\n                      // <FacilityListCore transactId={locationData.transactionId} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      <FacilityHistory validacion={true} transactId={locationData.transactionId} design={true} mainDebtor={mainDebtor} partyId={mainDebtor.customerNumberT24} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {locationData ?\r\n                      <FacilityListBpm transactionId={locationData?.transactionId} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    <CardBody>\r\n                      <HeaderSections title=\"Attachments\" t={t}></HeaderSections>\r\n                      {locationData ?\r\n                        <AttachmentFileCore attachmentFileInputModel={new AttachmentFileInputModel(locationData.transactionId, OPTs.PROCESS_ANALISISCREDITO)} />\r\n                        : null}\r\n                    </CardBody>\r\n                  </Col>\r\n                </Row>\r\n\r\n                {/* <Row>\r\n                  <Col xl=\"12\">\r\n                    <CardBody>\r\n                      <FinancialSummary client={financialSummary.client}\r\n                        financialStatus={financialSummary.financialStatus}\r\n                        balances={financialSummary.balances}\r\n                        debts={financialSummary.debts}\r\n                        debtorId={personId}\r\n                      />\r\n                    </CardBody>\r\n                  </Col>\r\n                </Row> */}\r\n              </CardBody>\r\n              <CardFooter>\r\n              </CardFooter>\r\n            </Card>\r\n\r\n\r\n          </LoadingOverlay >\r\n\r\n          {locationData ?\r\n            <LogProcess logProcessModel={new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ANALISISCREDITO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_04)} />\r\n            : null}\r\n\r\n          <Row style={{ marginTop: \"0px\", marginBottom: \"15px\" }}>\r\n            <Col md={6} style={{ textAlign: \"left\" }}>\r\n              <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_CANCELPROCESS); showModalBitacora() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n              <Button color=\"primary\" style={{ margin: '0px 5px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_INFORMEGESTION); showModalBitacora() }}><i className=\"mdi mdi-backspace-outline mid-12px\"></i> {t(\"AdjustRequired\")}</Button>\r\n\r\n            </Col>\r\n            <Col md={6} style={{ textAlign: \"right\" }}>\r\n              <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.PROCESS_ANALISISCREDITO) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n              <Button color=\"success\" type=\"button\"\r\n                onClick={() => { onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO) }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"FinantialReport\")}</Button>\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n          {locationData && displayModalBitacora ?\r\n            <ModalBitacora\r\n              logProcessModel={new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ANALISISCREDITO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_04)}\r\n              successSaved={() => { onSaveProcess(optionSelected); }}\r\n              isOpen={displayModalBitacora} toggle={() => { showModalBitacora(false) }} />\r\n            : null}\r\n\r\n          {\r\n            messageDlg && messageDlg.show ? (\r\n              <SweetAlert\r\n                type={messageDlg.error ? \"error\" : \"success\"}\r\n                title={messageDlg.error ? t(\"Error\") : t(\"Message\")}\r\n                confirmButtonText={t(\"Confirm\")}\r\n                cancelButtonText={t(\"Cancel\")}\r\n                onConfirm={() => { showMessage(); }}>\r\n                {messageDlg.msg}\r\n              </SweetAlert>\r\n            ) : null\r\n          }\r\n        </div>\r\n        : null}\r\n    </React.Fragment>\r\n  );\r\n\r\n}\r\n\r\n\r\nexport default CommercialCreditProposalPage;\r\n"]},"metadata":{},"sourceType":"module"}