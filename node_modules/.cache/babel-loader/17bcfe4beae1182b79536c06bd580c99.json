{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useLocation,useHistory}from'react-router-dom';import*as opt from\"../../../helpers/options_helper\";import*as url from\"../../../helpers/url_helper\";import moment from\"moment\";import{Row,Col,Card,CardBody,Label,CardFooter,Button,Table,CardHeader}from\"reactstrap\";import Alert from'react-bootstrap/Alert';import{Link}from\"react-router-dom\";import Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{setDefaults,useTranslation}from\"react-i18next\";import LoadingOverlay from'react-loading-overlay';import ClientForm from\"./ClientForm\";import ModalEndProcess from\"../../../components/EndProcess/ModalEndProcess\";import{BackendServices,CoreServices,BpmServices}from\"../../../services\";import{PersonModel}from'../../../models/Common/PersonModel';import{InfoBpmModel}from'../../../models/Common/InfoBpmModel';import SearchClientCore from\"../../../components/Common/SearchClientCore\";import SessionHelper from\"../../../helpers/SessionHelper\";import{LogProcessModel}from'../../../models/Common/LogProcessModel';import LogProcess from\"../../../components/LogProcess/index\";import{addDays}from\"@fullcalendar/react\";import LocalStorageHelper from\"../../../helpers/LocalStorageHelper\";import ModalSearchClient from\"./ModalSearchClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PreRequest=function PreRequest(props){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var history=useHistory();var location=useLocation();var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isActiveLoading=_useState4[0],setIsActiveLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openNewClient=_useState6[0],setopenNewClient=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),dataClientList=_useState8[0],setdataClientList=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),selectedClient=_useState10[0],setselectedClient=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),identificationTypeList=_useState12[0],setidentificationTypeList=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),personTypeList=_useState14[0],setpersonTypeList=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),displayModalEndProcess=_useState16[0],setdisplayModalEndProcess=_useState16[1];var _useState17=useState({show:false,msg:\"\",isError:false}),_useState18=_slicedToArray(_useState17,2),msgData=_useState18[0],setmsgData=_useState18[1];//Servicios\nvar _useState19=useState(new BackendServices()),_useState20=_slicedToArray(_useState19,2),backendServices=_useState20[0],setbackendServices=_useState20[1];var _useState21=useState(new CoreServices()),_useState22=_slicedToArray(_useState21,2),coreServices=_useState22[0],setcoreServices=_useState22[1];var _useState23=useState(new BpmServices()),_useState24=_slicedToArray(_useState23,2),bpmServices=_useState24[0],setbpmServices=_useState24[1];var _useState25=useState(new SessionHelper()),_useState26=_slicedToArray(_useState25,2),sessionHelper=_useState26[0],setsessionHelper=_useState26[1];var _useState27=useState(new LocalStorageHelper()),_useState28=_slicedToArray(_useState27,2),localStorageHelper=_useState28[0],setlocalStorageHelper=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),showModalSearchClient=_useState30[0],setshowModalSearchClient=_useState30[1];//On Mounting (componentDidMount)\nReact.useEffect(function(){var data=location.data!==undefined?location.data:sessionHelper.get(opt.VARNAME_LOCATIONDATA);if(data!==null&&data!==undefined){if(data.transactionId===undefined||data.transactionId.length<=0){data.transactionId=0;checkAndCreateProcedure(data);}else{setLocationData(data);fetchData(data);}}else{history.push(url.URL_DASHBOARD);}},[]);//Caraga Inicial de datos\nfunction fetchData(locationData){//chequear si la tarea no ha sido iniciada\nbpmServices.checkAndStartTask(locationData).then(function(iniresult){if(iniresult===false){history.push(url.URL_DASHBOARD);}});//checkAndCreateProcedure(locationData);\nloadIdentificationTypes();loadPersonTypes();getProcessClients(locationData.transactionId);}//CHEQUEAMOS Y GENERAMOS EL PROCESO EN BASE DE DATOS\nfunction checkAndCreateProcedure(locationData){var _credentials$usr;var credentials=localStorageHelper.get(opt.VARNAME_USRCREDENTIAL);backendServices.nuevoTramite(locationData.transactionId,locationData.instanceId,opt.PROCESS_BUSQUEDADESCARTE,opt.PROCESS_BUSQUEDADESCARTE,(_credentials$usr=credentials===null||credentials===void 0?void 0:credentials.usr)!==null&&_credentials$usr!==void 0?_credentials$usr:\"admin\",\"0\").then(function(data){if(data!==null&&data!==undefined){locationData.transactionId=data.transactId;sessionHelper.save(opt.VARNAME_LOCATIONDATA,locationData);setLocationData(locationData);fetchData(locationData);}}).catch(function(error){});}//cargar lista de tipo de identificacion\nfunction loadIdentificationTypes(){backendServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"description\"]),value:data[i][\"id\"]});}setidentificationTypeList(json);}}).catch(function(error){});}//cargar lista de tipo de personas\nfunction loadPersonTypes(){backendServices.consultarCatalogoTipoPersona().then(function(data){if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"label\"]),value:data[i][\"code\"]});}setpersonTypeList(json);}}).catch(function(error){});}//se buscan todos los clientes de este proceso \nfunction getProcessClients(transactionId){backendServices.consultarOrquestadoListaPersonaSolicitud(transactionId).then(function(data){if(data!==null&&data!==undefined){setdataClientList(data);/*if (data.length <= 0) {\r\n            setselectedClient(new PersonModel());\r\n            onOpenNewClient();\r\n          }*/}}).catch(function(error){});}//Abrir formulario Persona\nfunction onOpenNewClient(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setopenNewClient(show);}//Editar Persona\nfunction onEditClient(dataClient){dataClient[\"isNew\"]=false;setselectedClient(dataClient);onOpenNewClient();}//Eliminar Persona\nfunction onDeleteClient(dataClient){//eliminarOrquestadoListaPersonaSolicitud\nbackendServices.eliminarOrquestadoListaPersonaSolicitud(dataClient).then(function(data){getProcessClients(dataClient.transactId);}).catch(function(error){});}//retorna el Tipo de Persona\nfunction getPersnoType(pType){return personTypeList.find(function(x){return x.value===pType;});}//retorna el Tipo de identificacion\nfunction getIdentificationType(idType){if(idType!==undefined&&idType!==null&&idType.length>0){return identificationTypeList.find(function(x){return x.value===idType;});}return\"\";}//Carga de Datos de Cliente de T24 Seleccionado\nfunction loadClientDataT24(dataClientT24){var clientPerson=new PersonModel();clientPerson.customerNumberT24=dataClientT24.id;clientPerson.clientDocumentId=dataClientT24.idnumber;clientPerson.name=dataClientT24.firstname;clientPerson.secondName=dataClientT24.secondname;clientPerson.lastName=dataClientT24.lastname;clientPerson.secondSurname=dataClientT24.secondlastname;clientPerson.phone=dataClientT24.phoneNumber;clientPerson.email=dataClientT24.email;clientPerson.personType=personTypeList.find(function(x){return x.value===Number(dataClientT24.partyType);}).value;clientPerson.idType=identificationTypeList.find(function(x){return x.value===dataClientT24.idtype;}).value;clientPerson.isNew=false;onEditClient(clientPerson);}function showSearchClient(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setshowModalSearchClient(show);}//Chequear si el deudor principal tiene accionistas y agregarlos automaticamente\nfunction checkDebtorShareholders(){return _checkDebtorShareholders.apply(this,arguments);}//mostrar mensaje \nfunction _checkDebtorShareholders(){_checkDebtorShareholders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var lDdebtors,p,maindebtor,data,i,_data$i$Identificatio,_data$i$Identificatio2,_data$i$Phone$0$Phone,_data$i$Phone$,clientPerson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsActiveLoading(true);_context.prev=1;_context.next=4;return backendServices.consultarDeudores(locationData.transactionId);case 4:lDdebtors=_context.sent;if(!(lDdebtors===null||lDdebtors===undefined||lDdebtors.length<=0)){_context.next=8;break;}showMessage(t(\"Youmustselectatleastonedebtor\"),true);return _context.abrupt(\"return\");case 8:p=0;case 9:if(!(p<lDdebtors.length)){_context.next=54;break;}maindebtor=lDdebtors[p];//buscamos a los accionistas de este deudor\n_context.next=13;return coreServices.getPartiesStaff(maindebtor.customerNumberT24);case 13:data=_context.sent;if(!(data!==null&&data!==undefined&&data.results.length>0)){_context.next=51;break;}data=data.results;i=0;case 17:if(!(i<data.length)){_context.next=48;break;}_context.prev=18;console.log(\"getPartiesStaff\"+i,data[i]);clientPerson=new PersonModel();clientPerson.transactId=locationData.transactionId;clientPerson.personType=\"1\";//tipo de Persona\nclientPerson.idType=\"CED\";//tipo de Identificacion\nclientPerson.clientDocumentId=data[i].Identification!==undefined?(_data$i$Identificatio=(_data$i$Identificatio2=data[i].Identification[0])===null||_data$i$Identificatio2===void 0?void 0:_data$i$Identificatio2.Ident.IssuedIdentValue)!==null&&_data$i$Identificatio!==void 0?_data$i$Identificatio:\"\":\"\";//No. de identificacion\nclientPerson.customerNumberT24=\"\";//No. de Cliente T24\nclientPerson.name=data[i].PersonName.FirstName!==undefined?data[i].PersonName.FirstName:\"\";//1er Nombre\nclientPerson.secondName=data[i].PersonName.LastName!==undefined?data[i].PersonName.LastName:\"\";//2do Nombre\nclientPerson.lastName=data[i].PersonName.SecondLastName!==undefined?data[i].PersonName.SecondLastName:\"\";//1er Apellido\nclientPerson.secondSurname=data[i].PersonName.SecondName!==undefined?data[i].PersonName.SecondName:\"\";//2do Apellido\nclientPerson.nationality=data[i].Nationality!==undefined?data[i].Nationality:\"\";//Nacionalidad\nclientPerson.birthDate=data[i].BirthDt!==undefined?moment(data[i].BirthDt).format(\"YYYY-MM-DD\"):moment().format(\"YYYY-MM-DD\");//Fecha nacimiento \"1998-08-17\",\nclientPerson.address=\"\";//direccion\nclientPerson.phone=data[i].Phone!==undefined?(_data$i$Phone$0$Phone=(_data$i$Phone$=data[i].Phone[0])===null||_data$i$Phone$===void 0?void 0:_data$i$Phone$.PhoneNum)!==null&&_data$i$Phone$0$Phone!==void 0?_data$i$Phone$0$Phone:\"\":\"\";//Telefono,\n//clientPerson.email=data[i].Phone[0]?.PhoneNum??\"\";//Email\nclientPerson.countryOfResidence=\"PA\";//pais de residencia\nclientPerson.comments=\"\";clientPerson.roles=[{roleId:'ACC'}];clientPerson.blacklist=[{blackList:false,comment:\"\",date:moment().format(\"YYYY-MM-DD\"),personId:0,roleId:\"ACC\",status:true,transactId:locationData.transactionId}];_context.next=40;return backendServices.nuevoOrquestadoListaPersonaSolicitud(clientPerson);case 40:_context.next=45;break;case 42:_context.prev=42;_context.t0=_context[\"catch\"](18);console.error(_context.t0);case 45:i++;_context.next=17;break;case 48:getProcessClients(locationData.transactionId);_context.next=51;break;case 51:p++;_context.next=9;break;case 54:_context.next=58;break;case 56:_context.prev=56;_context.t1=_context[\"catch\"](1);case 58:_context.prev=58;setIsActiveLoading(false);return _context.finish(58);case 61:case\"end\":return _context.stop();}}},_callee,null,[[1,56,58,61],[18,42]]);}));return _checkDebtorShareholders.apply(this,arguments);}function showMessage(message){var isError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setmsgData({show:true,msg:message,isError:isError});}////////// PARTE ES LA FINAL DEL PROCESO ///////\n//Modal Para mostrar Comentario de Fin de Proceso\nfunction showModalEndProcess(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setdisplayModalEndProcess(show);}//Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\nfunction onSaveProcess(option){var person=null;for(var i=0;i<dataClientList.length;i++){console.log(dataClientList[i]);if(dataClientList[i].blacklist[dataClientList[i].blacklist.length-1].blackList===true){person=dataClientList[i];break;}}if(person!==null&&option===opt.PROCESS_LISTAEXCLUSION){option=opt.PROCESS_CUMPLIMIENTO;}switch(option){case opt.PROCESS_LISTAEXCLUSION:case opt.PROCESS_CUMPLIMIENTO:{//chequear si existe algun deudor para poder continuar\nbackendServices.consultPrincipalDebtor(locationData.transactionId).then(function(data){if(data!==null&&data!==undefined){saveJBPMProcess(option);}else{//Mensaje ERROR\nshowMessage(t(\"Youmustselectatleastonedebtor\"),true);}}).catch(function(error){});break;}default:{saveJBPMProcess(option);break;}}}function saveJBPMProcess(_x){return _saveJBPMProcess.apply(this,arguments);}//salvar comentario de end process\nfunction _saveJBPMProcess(){_saveJBPMProcess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(option){var result,values,maindebtor,infoBpmModel;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(locationData.instanceId===undefined||locationData.instanceId.length<=0)){_context2.next=16;break;}_context2.next=3;return bpmServices.createNewInstance();case 3:result=_context2.sent;if(!(result!==undefined)){_context2.next=14;break;}//instanceId:result.instanceId,taskId:result.taskId,taskStatus:result.status\nlocationData.instanceId=result.instanceId;locationData.taskId=result.taskId;locationData.taskStatus=result.status;sessionHelper.save(opt.VARNAME_LOCATIONDATA,locationData);//Actualizamos Variables\nvalues={\"transactionId\":locationData.transactionId};_context2.next=12;return bpmServices.updatevariables(locationData.instanceId,values);case 12:_context2.next=16;break;case 14://Mensaje ERROR\nshowMessage(t(\"TheProcessCouldNotFinish\"),true);return _context2.abrupt(\"return\");case 16:_context2.next=18;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 18:maindebtor=_context2.sent;infoBpmModel=new InfoBpmModel(locationData.instanceId,locationData.transactionId,opt.PROCESS_BUSQUEDADESCARTE,opt.ACT_NONE,maindebtor===null||maindebtor===void 0?void 0:maindebtor.personId);infoBpmModel.personName=maindebtor!==undefined?maindebtor.name+\" \"+maindebtor.name2+\" \"+maindebtor.lastName+\" \"+maindebtor.lastName2:\"\";console.log(\"infoBpmModel\",infoBpmModel,maindebtor);_context2.t0=option;_context2.next=_context2.t0===opt.PROCESS_CANCELPROCESS?25:_context2.t0===opt.PROCESS_BUSQUEDADESCARTE?27:_context2.t0===opt.PROCESS_CUMPLIMIENTO?32:_context2.t0===opt.PROCESS_LISTAEXCLUSION?37:42;break;case 25:bpmServices.abortProcess(locationData.instanceId).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);}else{//Mensaje ERROR\nshowMessage(t(\"TheProcessCouldNotFinish\"),true);}});return _context2.abrupt(\"break\",42);case 27:infoBpmModel.processId=opt.PROCESS_BUSQUEDADESCARTE;infoBpmModel.activityId=opt.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":opt.PROCESS_BUSQUEDADESCARTE.toString(),\"activityId\":opt.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"customerId\":\"\",\"applicationNumber\":\"\",\"procedureNumber\":\"\"//\"decision\":\"no\"          \n};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){showMessage(t(\"TheProcessCouldNotFinish\"));}else{//Mensaje ERROR\nshowMessage(t(\"ErrorSaveMessage\"),true);}});return _context2.abrupt(\"break\",42);case 32:infoBpmModel.processId=opt.PROCESS_CUMPLIMIENTO;infoBpmModel.activityId=opt.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":opt.PROCESS_CUMPLIMIENTO.toString(),\"activityId\":opt.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"customerId\":\"\",\"applicationNumber\":\"\",\"procedureNumber\":\"\",\"decision\":\"si\"};bpmServices.completedStatusTask(locationData.taskId,values).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);showMessage(t(\"TheProcessCouldNotFinish\"));}else{//Mensaje ERROR\nshowMessage(t(\"ErrorSaveMessage\"),true);}});return _context2.abrupt(\"break\",42);case 37:infoBpmModel.processId=opt.PROCESS_LISTAEXCLUSION;infoBpmModel.activityId=opt.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":opt.PROCESS_LISTAEXCLUSION.toString(),\"activityId\":opt.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"customerId\":\"\",\"applicationNumber\":\"\",\"procedureNumber\":\"\",\"decision\":\"no\"};bpmServices.completedStatusTask(locationData.taskId,values).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);showMessage(t(\"TheProcessCouldNotFinish\"));}else{//Mensaje ERROR\nshowMessage(t(\"ErrorSaveMessage\"),true);}});return _context2.abrupt(\"break\",42);case 42:case\"end\":return _context2.stop();}}},_callee2);}));return _saveJBPMProcess.apply(this,arguments);}function onSaveEndProcess(values){onSaveProcess(opt.PROCESS_CANCELPROCESS);}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"CommercialCredit\"),breadcrumbItem:t(\"PreRequest\")}),/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"PreRequest\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"This form is official and must be filled out correctly\")})]}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",style:{textAlign:\"right\"},children:[t(\"Tramit\"),\":\",\" \",\"#\",locationData===null||locationData===void 0?void 0:locationData.transactionId]})})})})]})}),/*#__PURE__*/_jsx(CardBody,{children:openNewClient?/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(ClientForm,{transactId:locationData.transactionId,clientSelected:selectedClient,onCancel:function onCancel(){onOpenNewClient(false);getProcessClients(locationData.transactionId);}})})}):/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-sub-title\",children:t(\"ParticipantsList\")})}),/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"right\"},children:[dataClientList.length>0?/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){checkDebtorShareholders();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-account-plus-outline mid-12px\"}),\" \",t(\"DownloadShareholders\")]}):null,/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){showSearchClient();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-account-search-outline mdi-12px\"}),\" \",t(\"Search\")]}),/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){setselectedClient(undefined);onOpenNewClient();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-account-plus-outline mdi-12px\"}),\" \",t(\"AddNew\")]})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"PersonType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"FullName\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"IdentificationType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"IdentificationNumber\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Roles\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"WatchList\")}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataClientList.length>0?dataClientList.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:getPersnoType(Number(item.personType)).label}),/*#__PURE__*/_jsx(\"td\",{children:Number(item.personType)>1?item.name:item.name+\" \"+item.secondName+\" \"+item.lastName+\" \"+item.secondSurname}),/*#__PURE__*/_jsx(\"td\",{children:getIdentificationType(item.idType).label}),/*#__PURE__*/_jsx(\"td\",{children:item.clientDocumentId}),/*#__PURE__*/_jsx(\"td\",{children:item.roles!==undefined?item.roles.map(function(rol,index){return rol.roleDescription+\" - \";}):null}),/*#__PURE__*/_jsx(\"td\",{children:item.blacklist!==undefined&&item.blacklist.length>0?item.blacklist[item.blacklist.length-1].blackList===true?\"Aplica\":\"No Aplica\":\"No Aplica\"}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:function onClick(e){onEditClient(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:function onClick(e){onDeleteClient(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]});}):/*#__PURE__*/_jsx(\"td\",{colspan:\"7\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{textAlign:\"center\"},children:t(\"NoData\")})})})]})})})})]})})}),!openNewClient?/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(CardFooter,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(Alert,{show:msgData.show,variant:msgData.isError?\"danger\":\"success\",dismissible:true,onClose:function onClose(){console.log(\"onClose\");setmsgData({show:false,msg:\"\",isError:false});},children:msgData.msg})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\",style:{textAlign:\"left\"},children:/*#__PURE__*/_jsxs(Button,{color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){showModalEndProcess();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]})}),/*#__PURE__*/_jsx(Col,{md:\"9\",style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(opt.PROCESS_LISTAEXCLUSION);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"Advance\")]})})]})]})}):null]})}),locationData?/*#__PURE__*/_jsx(LogProcess,{logProcessModel:new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",opt.PROCESS_BUSQUEDADESCARTE,opt.ACT_NONE)}):null,/*#__PURE__*/_jsx(ModalEndProcess,{onSaveEndProcess:onSaveEndProcess,isOpen:displayModalEndProcess,toggle:function toggle(){showModalEndProcess(false);}}),showModalSearchClient?/*#__PURE__*/_jsx(ModalSearchClient,{isOpen:showSearchClient,toggle:function toggle(){showSearchClient(!showModalSearchClient);},onClientSelect:function onClientSelect(data){loadClientDataT24(data);showSearchClient(false);},onNewClientSelect:function onNewClientSelect(){setselectedClient(undefined);onOpenNewClient();showSearchClient(false);}}):null]});};export default PreRequest;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/1_Presolicitud/index2.js"],"names":["React","useState","useLocation","useHistory","opt","url","moment","Row","Col","Card","CardBody","Label","CardFooter","Button","Table","CardHeader","Alert","Link","Breadcrumbs","setDefaults","useTranslation","LoadingOverlay","ClientForm","ModalEndProcess","BackendServices","CoreServices","BpmServices","PersonModel","InfoBpmModel","SearchClientCore","SessionHelper","LogProcessModel","LogProcess","addDays","LocalStorageHelper","ModalSearchClient","PreRequest","props","t","i18n","history","location","undefined","locationData","setLocationData","isActiveLoading","setIsActiveLoading","openNewClient","setopenNewClient","dataClientList","setdataClientList","selectedClient","setselectedClient","identificationTypeList","setidentificationTypeList","personTypeList","setpersonTypeList","displayModalEndProcess","setdisplayModalEndProcess","show","msg","isError","msgData","setmsgData","backendServices","setbackendServices","coreServices","setcoreServices","bpmServices","setbpmServices","sessionHelper","setsessionHelper","localStorageHelper","setlocalStorageHelper","showModalSearchClient","setshowModalSearchClient","useEffect","data","get","VARNAME_LOCATIONDATA","transactionId","length","checkAndCreateProcedure","fetchData","push","URL_DASHBOARD","checkAndStartTask","then","iniresult","loadIdentificationTypes","loadPersonTypes","getProcessClients","credentials","VARNAME_USRCREDENTIAL","nuevoTramite","instanceId","PROCESS_BUSQUEDADESCARTE","usr","transactId","save","catch","error","consultarCatalogoTipoIdentificacion","json","i","label","value","consultarCatalogoTipoPersona","consultarOrquestadoListaPersonaSolicitud","onOpenNewClient","onEditClient","dataClient","onDeleteClient","eliminarOrquestadoListaPersonaSolicitud","getPersnoType","pType","find","x","getIdentificationType","idType","loadClientDataT24","dataClientT24","clientPerson","customerNumberT24","id","clientDocumentId","idnumber","name","firstname","secondName","secondname","lastName","lastname","secondSurname","secondlastname","phone","phoneNumber","email","personType","Number","partyType","idtype","isNew","showSearchClient","checkDebtorShareholders","consultarDeudores","lDdebtors","showMessage","p","maindebtor","getPartiesStaff","results","console","log","Identification","Ident","IssuedIdentValue","PersonName","FirstName","LastName","SecondLastName","SecondName","nationality","Nationality","birthDate","BirthDt","format","address","Phone","PhoneNum","countryOfResidence","comments","roles","roleId","blacklist","blackList","comment","date","personId","status","nuevoOrquestadoListaPersonaSolicitud","message","showModalEndProcess","onSaveProcess","option","person","PROCESS_LISTAEXCLUSION","PROCESS_CUMPLIMIENTO","consultPrincipalDebtor","saveJBPMProcess","createNewInstance","result","taskId","taskStatus","values","updatevariables","infoBpmModel","ACT_NONE","personName","name2","lastName2","PROCESS_CANCELPROCESS","abortProcess","processId","activityId","JSON","stringify","toString","completedStatusTask","onSaveEndProcess","textAlign","margin","map","item","index","rol","roleDescription","e"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as opt from \"../../../helpers/options_helper\"\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport moment from \"moment\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Label,\r\n  CardFooter,\r\n  Button,\r\n  Table,\r\n  CardHeader,\r\n} from \"reactstrap\"\r\nimport Alert from 'react-bootstrap/Alert'\r\nimport { Link } from \"react-router-dom\"\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport { setDefaults, useTranslation } from \"react-i18next\";\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport ClientForm from \"./ClientForm\";\r\nimport ModalEndProcess from \"../../../components/EndProcess/ModalEndProcess\";\r\nimport { BackendServices, CoreServices, BpmServices} from \"../../../services\";\r\nimport { PersonModel } from '../../../models/Common/PersonModel';\r\nimport { InfoBpmModel } from '../../../models/Common/InfoBpmModel';\r\n\r\nimport SearchClientCore from \"../../../components/Common/SearchClientCore\";\r\nimport SessionHelper from \"../../../helpers/SessionHelper\";\r\n\r\nimport { LogProcessModel } from '../../../models/Common/LogProcessModel';\r\nimport LogProcess from \"../../../components/LogProcess/index\";\r\nimport { addDays } from \"@fullcalendar/react\";\r\n\r\nimport LocalStorageHelper from \"../../../helpers/LocalStorageHelper\";\r\nimport ModalSearchClient from \"./ModalSearchClient\"\r\n\r\nconst PreRequest = props => {\r\n  const { t, i18n } = useTranslation();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [locationData, setLocationData] = useState(undefined);\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n  const [openNewClient, setopenNewClient] = useState(false);\r\n  const [dataClientList, setdataClientList] = useState([]);\r\n  const [selectedClient, setselectedClient] = useState(undefined);\r\n  const [identificationTypeList, setidentificationTypeList] = useState([]);\r\n  const [personTypeList, setpersonTypeList] = useState([]);\r\n  const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\r\n  const [msgData, setmsgData] = useState({ show: false, msg: \"\", isError: false });\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [coreServices,setcoreServices] = useState(new CoreServices());\r\n  const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n  const [sessionHelper, setsessionHelper] = useState(new SessionHelper());\r\n\r\n  const [localStorageHelper, setlocalStorageHelper] = useState(new LocalStorageHelper());\r\n  const [showModalSearchClient, setshowModalSearchClient] = useState(false);\r\n\r\n  //On Mounting (componentDidMount)\r\n  React.useEffect(() => {\r\n    var data = location.data !== undefined ? location.data : sessionHelper.get(opt.VARNAME_LOCATIONDATA);\r\n    if (data !== null && data !== undefined) {\r\n      if (data.transactionId === undefined || data.transactionId.length <= 0) {\r\n        data.transactionId = 0;\r\n        checkAndCreateProcedure(data);\r\n      }\r\n      else {\r\n        setLocationData(data);\r\n        fetchData(data);\r\n      }\r\n    }\r\n    else {\r\n      history.push(url.URL_DASHBOARD);\r\n    }\r\n  }, []);\r\n  //Caraga Inicial de datos\r\n  function fetchData(locationData) {\r\n    //chequear si la tarea no ha sido iniciada\r\n    bpmServices.checkAndStartTask(locationData)\r\n      .then((iniresult) => {\r\n        if (iniresult === false) {\r\n          history.push(url.URL_DASHBOARD);\r\n        }\r\n      })\r\n    //checkAndCreateProcedure(locationData);\r\n    loadIdentificationTypes();\r\n    loadPersonTypes();\r\n    getProcessClients(locationData.transactionId);\r\n  }\r\n  //CHEQUEAMOS Y GENERAMOS EL PROCESO EN BASE DE DATOS\r\n  function checkAndCreateProcedure(locationData) {\r\n    var credentials = localStorageHelper.get(opt.VARNAME_USRCREDENTIAL);\r\n    backendServices.nuevoTramite(locationData.transactionId, locationData.instanceId, opt.PROCESS_BUSQUEDADESCARTE, opt.PROCESS_BUSQUEDADESCARTE, credentials?.usr ?? \"admin\", \"0\")\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          locationData.transactionId = data.transactId;\r\n          sessionHelper.save(opt.VARNAME_LOCATIONDATA, locationData);\r\n          setLocationData(locationData);\r\n          fetchData(locationData);\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //cargar lista de tipo de identificacion\r\n  function loadIdentificationTypes() {\r\n    backendServices.consultarCatalogoTipoIdentificacion()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"description\"]), value: data[i][\"id\"] })\r\n          }\r\n          setidentificationTypeList(json);\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //cargar lista de tipo de personas\r\n  function loadPersonTypes() {\r\n    backendServices.consultarCatalogoTipoPersona()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"label\"]), value: data[i][\"code\"] })\r\n          }\r\n          setpersonTypeList(json);\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //se buscan todos los clientes de este proceso \r\n  function getProcessClients(transactionId) {\r\n    backendServices.consultarOrquestadoListaPersonaSolicitud(transactionId)\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          setdataClientList(data)\r\n          /*if (data.length <= 0) {\r\n            setselectedClient(new PersonModel());\r\n            onOpenNewClient();\r\n          }*/\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //Abrir formulario Persona\r\n  function onOpenNewClient(show = true) {\r\n    setopenNewClient(show)\r\n  }\r\n  //Editar Persona\r\n  function onEditClient(dataClient) {\r\n    dataClient[\"isNew\"] = false;\r\n    setselectedClient(dataClient)\r\n    onOpenNewClient();\r\n  }\r\n  //Eliminar Persona\r\n  function onDeleteClient(dataClient) {\r\n    //eliminarOrquestadoListaPersonaSolicitud\r\n    backendServices.eliminarOrquestadoListaPersonaSolicitud(dataClient)\r\n      .then((data) => {\r\n        getProcessClients(dataClient.transactId);\r\n      }).catch((error) => { });\r\n  }\r\n  //retorna el Tipo de Persona\r\n  function getPersnoType(pType) {\r\n    return personTypeList.find(x => x.value === pType);\r\n  }\r\n  //retorna el Tipo de identificacion\r\n  function getIdentificationType(idType) {\r\n    if (idType !== undefined && idType !== null && idType.length > 0) {\r\n      return identificationTypeList.find(x => x.value === idType);\r\n    }\r\n    return \"\";\r\n  }\r\n  //Carga de Datos de Cliente de T24 Seleccionado\r\n  function loadClientDataT24(dataClientT24) {\r\n    var clientPerson = new PersonModel();\r\n    clientPerson.customerNumberT24 = dataClientT24.id;\r\n    clientPerson.clientDocumentId = dataClientT24.idnumber;\r\n    clientPerson.name = dataClientT24.firstname;\r\n    clientPerson.secondName = dataClientT24.secondname;\r\n    clientPerson.lastName = dataClientT24.lastname;\r\n    clientPerson.secondSurname = dataClientT24.secondlastname;\r\n    clientPerson.phone=dataClientT24.phoneNumber;\r\n    clientPerson.email=dataClientT24.email;\r\n    clientPerson.personType = personTypeList.find(x => x.value === Number(dataClientT24.partyType)).value;\r\n    clientPerson.idType = identificationTypeList.find(x => x.value === dataClientT24.idtype).value;\r\n    clientPerson.isNew=false;\r\n    onEditClient(clientPerson);\r\n  }\r\n\r\n  function showSearchClient(show = true) {\r\n    setshowModalSearchClient(show);\r\n  }\r\n\r\n  //Chequear si el deudor principal tiene accionistas y agregarlos automaticamente\r\n  async function checkDebtorShareholders(){\r\n    setIsActiveLoading(true)    \r\n    try{\r\n    var lDdebtors = await backendServices.consultarDeudores(locationData.transactionId)\r\n    if(lDdebtors===null || lDdebtors===undefined || lDdebtors.length<=0){\r\n      showMessage(t(\"Youmustselectatleastonedebtor\"), true);\r\n      return;\r\n    }\r\n\r\n    for (let p = 0; p < lDdebtors.length; p++){\r\n      var maindebtor = lDdebtors[p];\r\n      //buscamos a los accionistas de este deudor\r\n    var data = await coreServices.getPartiesStaff(maindebtor.customerNumberT24);\r\n    if (data !== null && data !== undefined && data.results.length>0) {          \r\n      data=data.results;      \r\n      for (let i = 0; i < data.length; i++) {\r\n        try{\r\n          console.log(\"getPartiesStaff\" + i,data[i]);\r\n        var clientPerson = new PersonModel();\r\n        clientPerson.transactId=locationData.transactionId;\r\n        clientPerson.personType=\"1\"; //tipo de Persona\r\n        clientPerson.idType=\"CED\"; //tipo de Identificacion\r\n        clientPerson.clientDocumentId=data[i].Identification!==undefined? data[i].Identification[0]?.Ident.IssuedIdentValue??\"\":\"\";//No. de identificacion\r\n        clientPerson.customerNumberT24=\"\"; //No. de Cliente T24\r\n        clientPerson.name=data[i].PersonName.FirstName!==undefined?data[i].PersonName.FirstName:\"\";//1er Nombre\r\n        clientPerson.secondName=data[i].PersonName.LastName!==undefined?data[i].PersonName.LastName:\"\";//2do Nombre\r\n        clientPerson.lastName=data[i].PersonName.SecondLastName!==undefined?data[i].PersonName.SecondLastName:\"\"; //1er Apellido\r\n        clientPerson.secondSurname=data[i].PersonName.SecondName!==undefined?data[i].PersonName.SecondName:\"\";//2do Apellido\r\n        clientPerson.nationality=data[i].Nationality!==undefined?data[i].Nationality:\"\";//Nacionalidad\r\n        clientPerson.birthDate= data[i].BirthDt!==undefined? moment(data[i].BirthDt).format(\"YYYY-MM-DD\"):moment().format(\"YYYY-MM-DD\");//Fecha nacimiento \"1998-08-17\",\r\n        clientPerson.address=\"\"; //direccion\r\n        clientPerson.phone= data[i].Phone!==undefined? data[i].Phone[0]?.PhoneNum??\"\":\"\"; //Telefono,\r\n        //clientPerson.email=data[i].Phone[0]?.PhoneNum??\"\";//Email\r\n        clientPerson.countryOfResidence=\"PA\";//pais de residencia\r\n        clientPerson.comments=\"\";\r\n        clientPerson.roles =[{roleId: 'ACC'}];\r\n        clientPerson.blacklist =[{blackList: false,comment: \"\",date:moment().format(\"YYYY-MM-DD\"),\r\n        personId: 0,roleId: \"ACC\",status: true,transactId: locationData.transactionId}];              \r\n\r\n        await backendServices.nuevoOrquestadoListaPersonaSolicitud(clientPerson);\r\n        //clientPerson.isNew =true;\r\n        //BirthDt: data[\"BirthDt\"],\r\n             //PersonName:data[\"PersonName\"],\r\n             //Nationality: data[\"PartyData\"][\"Nationality\"],\r\n             //Address: data[\"PartyData\"][\"Contact\"][\"Locator\"][\"PostAddr\"],\r\n             //Phone: data[\"PartyData\"][\"Contact\"][\"Locator\"][\"Phone\"],\r\n             //Identification: data[\"PartyData\"][\"IssuedIdent\"],\r\n        }\r\n        catch(err){console.error(err)}          \r\n      }\r\n      getProcessClients(locationData.transactionId)\r\n    }\r\n    else{\r\n      //showMessage(t(\"NoResults\"), true);\r\n      //return;\r\n    }\r\n    }\r\n    \r\n  }\r\n  catch(err){}\r\n  finally{setIsActiveLoading(false)\r\n  }\r\n  }\r\n\r\n\r\n  //mostrar mensaje \r\n  function showMessage(message, isError = false) {\r\n\r\n    setmsgData({ show: true, msg: message, isError: isError })\r\n  }\r\n  ////////// PARTE ES LA FINAL DEL PROCESO ///////\r\n  //Modal Para mostrar Comentario de Fin de Proceso\r\n  function showModalEndProcess(show = true) {\r\n    setdisplayModalEndProcess(show);\r\n  }\r\n  //Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\r\n  function onSaveProcess(option) {\r\n\r\n    var person = null;\r\n    for (var i = 0; i < dataClientList.length; i++) {\r\n      console.log(dataClientList[i])\r\n      if (dataClientList[i].blacklist[dataClientList[i].blacklist.length - 1].blackList === true) {\r\n        person = dataClientList[i];\r\n        break;\r\n      }\r\n    }\r\n    if (person !== null && option === opt.PROCESS_LISTAEXCLUSION) {\r\n      option = opt.PROCESS_CUMPLIMIENTO;\r\n    }\r\n    switch (option) {\r\n      case opt.PROCESS_LISTAEXCLUSION:\r\n      case opt.PROCESS_CUMPLIMIENTO: {\r\n        //chequear si existe algun deudor para poder continuar\r\n        backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n          .then((data) => {\r\n            if (data !== null && data !== undefined) {\r\n              saveJBPMProcess(option);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"Youmustselectatleastonedebtor\"), true);\r\n            }\r\n          }).catch((error) => { });\r\n        break;\r\n      }\r\n      default: {\r\n        saveJBPMProcess(option);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  async function saveJBPMProcess(option) {\r\n\r\n    if (locationData.instanceId === undefined || locationData.instanceId.length <= 0) {\r\n      var result = await bpmServices.createNewInstance();\r\n      if (result !== undefined) {\r\n\r\n        //instanceId:result.instanceId,taskId:result.taskId,taskStatus:result.status\r\n        locationData.instanceId = result.instanceId;\r\n        locationData.taskId = result.taskId;\r\n        locationData.taskStatus = result.status;\r\n\r\n        sessionHelper.save(opt.VARNAME_LOCATIONDATA, locationData);\r\n\r\n        //Actualizamos Variables\r\n        var values = { \"transactionId\": locationData.transactionId };\r\n        await bpmServices.updatevariables(locationData.instanceId, values);\r\n      }\r\n      else {\r\n        //Mensaje ERROR\r\n        showMessage(t(\"TheProcessCouldNotFinish\"), true);\r\n        return;\r\n      }\r\n    }\r\n\r\n    var maindebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n    var infoBpmModel = new InfoBpmModel(locationData.instanceId, locationData.transactionId,\r\n      opt.PROCESS_BUSQUEDADESCARTE, opt.ACT_NONE, maindebtor?.personId);\r\n    infoBpmModel.personName = maindebtor !== undefined ? (maindebtor.name + \" \" + maindebtor.name2 + \" \" + maindebtor.lastName + \" \" + maindebtor.lastName2) : \"\";\r\n\r\n    console.log(\"infoBpmModel\", infoBpmModel, maindebtor);\r\n\r\n    switch (option) {\r\n      case opt.PROCESS_CANCELPROCESS: {\r\n        bpmServices.abortProcess(locationData.instanceId)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"TheProcessCouldNotFinish\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case opt.PROCESS_BUSQUEDADESCARTE: {\r\n\r\n        infoBpmModel.processId = opt.PROCESS_BUSQUEDADESCARTE;\r\n        infoBpmModel.activityId = opt.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": opt.PROCESS_BUSQUEDADESCARTE.toString(),\r\n          \"activityId\": opt.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"customerId\": \"\",\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          //\"decision\":\"no\"          \r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              showMessage(t(\"TheProcessCouldNotFinish\"));\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"ErrorSaveMessage\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case opt.PROCESS_CUMPLIMIENTO: {\r\n\r\n        infoBpmModel.processId = opt.PROCESS_CUMPLIMIENTO;\r\n        infoBpmModel.activityId = opt.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": opt.PROCESS_CUMPLIMIENTO.toString(),\r\n          \"activityId\": opt.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"customerId\": \"\",\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          \"decision\": \"si\"\r\n        };\r\n        bpmServices.completedStatusTask(locationData.taskId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n              showMessage(t(\"TheProcessCouldNotFinish\"));\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"ErrorSaveMessage\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case opt.PROCESS_LISTAEXCLUSION: {\r\n\r\n        infoBpmModel.processId = opt.PROCESS_LISTAEXCLUSION;\r\n        infoBpmModel.activityId = opt.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": opt.PROCESS_LISTAEXCLUSION.toString(),\r\n          \"activityId\": opt.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"customerId\": \"\",\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          \"decision\": \"no\"\r\n        };\r\n        bpmServices.completedStatusTask(locationData.taskId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n              showMessage(t(\"TheProcessCouldNotFinish\"));\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"ErrorSaveMessage\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  //salvar comentario de end process\r\n  function onSaveEndProcess(values) {\r\n    onSaveProcess(opt.PROCESS_CANCELPROCESS);\r\n  }\r\n\r\n  \r\n  return (\r\n    <div className=\"page-content\">\r\n      <Breadcrumbs title={t(\"CommercialCredit\")} breadcrumbItem={t(\"PreRequest\")} />\r\n      <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n        <Card>\r\n          <CardHeader>\r\n            <Row>\r\n              <Col md={6}>\r\n                <h4 className=\"card-title\">{t(\"PreRequest\")}</h4>\r\n                <p className=\"card-title-desc\">{t(\"This form is official and must be filled out correctly\")}</p>\r\n              </Col>\r\n              <Col md={6}>\r\n                <Row>\r\n                  <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                    <h5 className=\"card-title\" style={{ textAlign: \"right\" }}>{t(\"Tramit\")}:{\" \"}#{locationData?.transactionId}</h5>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </CardHeader>\r\n          <CardBody>\r\n\r\n            {openNewClient ?\r\n              <Row>\r\n                <Col md=\"12\">\r\n                  <ClientForm transactId={locationData.transactionId} clientSelected={selectedClient} onCancel={() => { onOpenNewClient(false); getProcessClients(locationData.transactionId) }}></ClientForm>\r\n                </Col>\r\n              </Row>\r\n              :\r\n              <React.Fragment>\r\n                {/*<Row>\r\n                  <Col md=\"12\">\r\n                    <SearchClientCore onClientSelect={loadClientDataT24} onNewClientSelect={() => { setselectedClient(undefined); onOpenNewClient() }}/>      \r\n                  </Col>\r\n            </Row>*/}\r\n                <Card>\r\n                  <Row>\r\n                    <Col md=\"6\">\r\n                      <h5 className=\"card-sub-title\">{t(\"ParticipantsList\")}</h5>\r\n                    </Col>\r\n                    <Col md={6} style={{ textAlign: \"right\", }}>\r\n                    {dataClientList.length > 0 ?\r\n                    <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { checkDebtorShareholders() }}><i className=\"mdi mdi-account-plus-outline mid-12px\"></i> {t(\"DownloadShareholders\")}</Button>\r\n                    :null}\r\n                    <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { showSearchClient() }}><i className=\"mdi mdi-account-search-outline mdi-12px\"></i> {t(\"Search\")}</Button>\r\n                    <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { setselectedClient(undefined); onOpenNewClient() }}><i className=\"mdi mdi-account-plus-outline mdi-12px\"></i> {t(\"AddNew\")}</Button>\r\n                    \r\n                      {/*<h5 className=\"card-sub-title\">\r\n                        <Link to=\"#\" onClick={() => { showSearchClient() }} title={t(\"Search\")}><i className=\"mdi mdi-account-search-outline mdi-24px\"></i>{\" \"}</Link>\r\n                        &nbsp;&nbsp;\r\n                        <Link to=\"#\" onClick={() => { setselectedClient(undefined); onOpenNewClient() }} title={t(\"AddNew\")}><i className=\"mdi mdi-account-plus-outline mdi-24px\"></i>{\" \"}</Link>\r\n                      </h5>\r\n                    */}\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <div className=\"table-responsive\">\r\n                        <Table className=\"table mb-0\">\r\n                          <thead className=\"table-light\">\r\n                            <tr>\r\n                              <th>{t(\"PersonType\")}</th>\r\n                              <th>{t(\"FullName\")}</th>\r\n                              <th>{t(\"IdentificationType\")}</th>\r\n                              <th>{t(\"IdentificationNumber\")}</th>\r\n                              <th>{t(\"Roles\")}</th>\r\n                              <th>{t(\"WatchList\")}</th>\r\n                              <th></th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n\r\n                            {dataClientList.length > 0 ?\r\n                              dataClientList.map((item, index) => (\r\n                                <tr>\r\n                                  <td>{getPersnoType(Number(item.personType)).label}</td>\r\n                                  <td>{Number(item.personType) > 1 ? (item.name) : (item.name + \" \" + item.secondName + \" \" + item.lastName + \" \" + item.secondSurname)}</td>\r\n                                  <td>{getIdentificationType(item.idType).label}</td>\r\n                                  <td>{item.clientDocumentId}</td>\r\n                                  <td>\r\n                                    {item.roles !== undefined ?\r\n                                      item.roles.map((rol, index) => (\r\n                                        rol.roleDescription + \" - \"\r\n                                      )) : null}\r\n                                  </td>\r\n                                  <td>\r\n                                    {item.blacklist !== undefined && item.blacklist.length > 0 ?\r\n                                      (item.blacklist[item.blacklist.length - 1].blackList === true ? \"Aplica\" : \"No Aplica\") : \"No Aplica\"}\r\n                                  </td>\r\n                                  <td style={{ textAlign: \"right\" }}>\r\n                                    <Link to=\"#\" onClick={(e) => { onEditClient(item) }}><i className=\"mdi mdi-border-color mdi-24px\"></i></Link>\r\n                                    <Link to=\"#\" onClick={(e) => { onDeleteClient(item) }}><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Link>\r\n                                  </td>\r\n                                </tr>\r\n                              )) :\r\n                              <td colspan=\"7\"><div className=\"alert alert-info\" style={{ textAlign: \"center\" }}>{t(\"NoData\")}</div></td>\r\n                            }\r\n                          </tbody>\r\n                        </Table>\r\n                      </div>\r\n                    </Col>\r\n                    \r\n                  </Row>\r\n                </Card>\r\n              </React.Fragment>\r\n            }\r\n          </CardBody>\r\n\r\n          {!openNewClient ?\r\n            <React.Fragment>\r\n\r\n              <CardFooter>\r\n                <Row>\r\n                  <Col md=\"12\">\r\n                    <Alert show={msgData.show} variant={msgData.isError ? \"danger\" : \"success\"} dismissible onClose={() => { console.log(\"onClose\"); setmsgData({ show: false, msg: \"\", isError: false }) }}>\r\n                      {msgData.msg}\r\n                    </Alert>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col md=\"3\" style={{ textAlign: \"left\" }}>\r\n                    <Button color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={() => { showModalEndProcess() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"Cancel\")}</Button>\r\n                  </Col>\r\n                  <Col md=\"9\" style={{ textAlign: \"right\" }}>\r\n                    <Button color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(opt.PROCESS_LISTAEXCLUSION) }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"Advance\")}</Button>\r\n                  </Col>\r\n                </Row>\r\n              </CardFooter>\r\n            </React.Fragment>\r\n            : null\r\n          }\r\n        </Card>\r\n      </LoadingOverlay>\r\n\r\n      {locationData ?\r\n        <LogProcess logProcessModel={new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", opt.PROCESS_BUSQUEDADESCARTE, opt.ACT_NONE)} />\r\n        : null}\r\n\r\n      <ModalEndProcess onSaveEndProcess={onSaveEndProcess} isOpen={displayModalEndProcess} toggle={() => { showModalEndProcess(false) }} />\r\n\r\n      {showModalSearchClient ?\r\n        <ModalSearchClient isOpen={showSearchClient} toggle={() => { showSearchClient(!showModalSearchClient) }} onClientSelect={(data) => { loadClientDataT24(data); showSearchClient(false); }} onNewClientSelect={() => { setselectedClient(undefined); onOpenNewClient(); showSearchClient(false) }} />\r\n        : null}\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default PreRequest\r\n"]},"metadata":{},"sourceType":"module"}