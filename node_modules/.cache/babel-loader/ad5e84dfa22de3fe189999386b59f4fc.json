{"ast":null,"code":"import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Card,CardBody}from\"reactstrap\";import ReactApexChart from\"react-apexcharts\";import{BackendServices}from\"../../services\";import*as moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SalesAnalytics=/*#__PURE__*/function(_Component){_inherits(SalesAnalytics,_Component);var _super=_createSuper(SalesAnalytics);function SalesAnalytics(props){var _this;_classCallCheck(this,SalesAnalytics);_this=_super.call(this,props);_this.backendServices=new BackendServices();_this.inicialize();_this.state={series:[],options:{labels:[],plotOptions:{pie:{donut:{size:'75%'}}},legend:{show:false},colors:['#3b5de7','#45cb85','#eeb902'],events:{dataPointSelection:function dataPointSelection(event,chartContext,config){console.log(config.w.config.labels[config.dataPointIndex]);}}}};return _this;}_createClass(SalesAnalytics,[{key:\"inicialize\",value:function inicialize(){var _this2=this;this.backendServices.getBpmStatistics().then(function(resp){var processBpmId=_this2.groupBy(resp,\"activityBpmName\");var labels=processBpmId.map(function(process){return process.at(0).activityBpmName;});var series=processBpmId.map(function(process){return process.length;});_this2.setState(_objectSpread(_objectSpread({},_this2.state),{},{series:series,options:_objectSpread(_objectSpread({},_this2.state.options),{},{labels:labels})}));}).catch(function(err){});}/**\r\n   * groupBy, agrupa los items de un JSON\r\n   * @param {Array} collection \r\n   * @param {string} property \r\n   * @returns {Array}\r\n   */},{key:\"groupBy\",value:function groupBy(collection,property){var i=0,val,index,values=[],result=[];for(;i<collection.length;i++){val=collection[i][property];index=values.indexOf(val);if(index>-1)result[index].push(collection[i]);else{values.push(val);result.push([collection[i]]);}}return result;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title mb-4\",children:\"Estad\\xEDsticas\"}),/*#__PURE__*/_jsx(Row,{className:\"align-items-center\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ReactApexChart,{options:this.state.options,series:this.state.series,type:\"donut\",height:245,onClick:function onClick(e){console.log(e);},className:\"apex-charts\"})})})]})})});}}]);return SalesAnalytics;}(Component);export default SalesAnalytics;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/Dashboard/sales-analytics.js"],"names":["React","Component","Row","Col","Card","CardBody","ReactApexChart","BackendServices","moment","SalesAnalytics","props","backendServices","inicialize","state","series","options","labels","plotOptions","pie","donut","size","legend","show","colors","events","dataPointSelection","event","chartContext","config","console","log","w","dataPointIndex","getBpmStatistics","then","resp","processBpmId","groupBy","map","process","at","activityBpmName","length","setState","catch","err","collection","property","i","val","index","values","result","indexOf","push","e"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\r\nimport { Row, Col, Card, CardBody } from \"reactstrap\"\r\nimport ReactApexChart from \"react-apexcharts\"\r\nimport { BackendServices } from \"../../services\";\r\nimport * as moment from 'moment';\r\n\r\nclass SalesAnalytics extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.backendServices = new BackendServices();\r\n    this.inicialize();\r\n\r\n    this.state = {\r\n      series: [],\r\n      options: {\r\n        labels: [],\r\n        plotOptions: {\r\n          pie: {\r\n            donut: {\r\n              size: '75%'\r\n            }\r\n          }\r\n        },\r\n        legend: {\r\n          show: false,\r\n        },\r\n        colors: ['#3b5de7', '#45cb85', '#eeb902'],\r\n        events: {\r\n          dataPointSelection: (event, chartContext, config) => {\r\n            console.log(config.w.config.labels[config.dataPointIndex])\r\n          }\r\n        }\r\n      },\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  inicialize() {\r\n    this.backendServices.getBpmStatistics().then(resp => {\r\n      let processBpmId = this.groupBy(resp, \"activityBpmName\");\r\n      let labels = processBpmId.map(process => process.at(0).activityBpmName);\r\n      let series = processBpmId.map(process => process.length);\r\n      this.setState({ ...this.state, series, options: { ...this.state.options, labels } });\r\n    }).catch(err => { })\r\n  }\r\n\r\n  /**\r\n   * groupBy, agrupa los items de un JSON\r\n   * @param {Array} collection \r\n   * @param {string} property \r\n   * @returns {Array}\r\n   */\r\n  groupBy(collection, property) {\r\n    var i = 0, val, index,\r\n      values = [], result = [];\r\n    for (; i < collection.length; i++) {\r\n      val = collection[i][property];\r\n      index = values.indexOf(val);\r\n      if (index > -1)\r\n        result[index].push(collection[i]);\r\n      else {\r\n        values.push(val);\r\n        result.push([collection[i]]);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Card>\r\n          <CardBody>\r\n            <h4 className=\"card-title mb-4\">Estad√≠sticas</h4>\r\n\r\n            <Row className=\"align-items-center\">\r\n              <Col>\r\n                <ReactApexChart\r\n                  options={this.state.options}\r\n                  series={this.state.series}\r\n                  type=\"donut\"\r\n                  height={245}\r\n                  onClick={(e) => { console.log(e); }}\r\n                  className=\"apex-charts\"\r\n                />\r\n              </Col>\r\n              {/* <Col sm={6}>\r\n                <div>\r\n                  <Row>\r\n                    <div className=\"col-6\">\r\n                      <div className=\"py-3\">\r\n                        <p className=\"mb-1 text-truncate\"><i\r\n                          className=\"mdi mdi-circle text-primary me-1\"></i>{\" \"}Analisis\r\n                        </p>\r\n                        <h5>$ 2,652</h5>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <div className=\"py-3\">\r\n                        <p className=\"mb-1 text-truncate\"><i\r\n                          className=\"mdi mdi-circle text-success me-1\"></i>{\" \"}Desembolso</p>\r\n                        <h5>$ 2,284</h5>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <div className=\"py-3\">\r\n                        <p className=\"mb-1 text-truncate\"><i\r\n                          className=\"mdi mdi-circle text-warning me-1\"></i>{\" \"}Propuesta</p>\r\n                        <h5>$ 1,753</h5>\r\n                      </div>\r\n                    </div>\r\n                  </Row>\r\n                </div>\r\n              </Col> */}\r\n            </Row>\r\n          </CardBody>\r\n        </Card>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SalesAnalytics\r\n"]},"metadata":{},"sourceType":"module"}