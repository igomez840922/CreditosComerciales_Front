{"ast":null,"code":"import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import TokenService from\"./TokenService\";import*as url from\"../helpers/url_helper\";import qs from'qs';import http from\"http\";import https from\"https\";import{BackendServices}from\"../services\";import errorDispacherHelper from\"../helpers/errorDispacherHelper\";import*as OPTs from\"../helpers/options_helper\";var userId=\"ARICO1\";var channelId=\"CreditosComerciales\";var client_id='6cbk7drlvbc88vdgvgo1tg1r3o';//'rrcmi5fefq56q4bc9pri0mfa0';//\nvar client_secret='b9vti5n8pbn1cn2gr35vlgq8s3uq7mm1j2d79ih0u1jjb4hkd3m';//'k7f89803rmgu8n93ppr3e2honuguo064ga8co4oqgml8k0tdrbp';//\nvar httpAgent=new http.Agent({keepAlive:true});var httpsAgent=new https.Agent({keepAlive:true});//apply base url for axios\nvar API_URL=\"\";var axiosApi=axios.create({baseURL:API_URL,httpAgent:httpAgent,httpsAgent:httpsAgent,headers:{\"Content-Type\":\"application/json\",\"userId\":userId,\"channelId\":channelId}});/*\r\naxiosApi.interceptors.response.use(\r\n  response => response,\r\n  error => Promise.reject(error)\r\n)\r\n*/axiosApi.interceptors.request.use(function(config){var token=TokenService.getLocalAccessToken();if(token){config.headers[\"Authorization\"]='Bearer '+token.access_token;//config.headers[\"x-access-token\"] = token; // for Node.js Express back-end\n}// console.log('config: ',config);\nreturn config;},function(error){return Promise.reject(error);});axiosApi.interceptors.response.use(function(res){return res;},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(err){var originalConfig,token,elapsed,data,headers,rs,responsetokenJson,tokenexpiration;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://return Promise.reject(err);\nconsole.log('err: ',err);originalConfig=err.config;// console.log('originalConfig: ',originalConfig);\nif(!(originalConfig.url===url.URL_CORE_TOKENGEN)){_context.next=4;break;}return _context.abrupt(\"return\",Promise.reject(err));case 4:token=TokenService.getLocalAccessToken();//si existe Token chequear la validez de tiempo\nif(!token){_context.next=9;break;}//calculamos que el expiration time esté correcto\nelapsed=new Date().getTime()-token.tokenexpiration;if(!(elapsed<0)){_context.next=9;break;}return _context.abrupt(\"return\",Promise.reject(err));case 9:TokenService.removeLocalAccessToken();originalConfig._retry=true;_context.prev=11;data=qs.stringify({grant_type:'client_credentials'});headers={'Content-Type':'application/x-www-form-urlencoded','Authorization':\"Basic \"+btoa(client_id+\":\"+client_secret)};_context.next=16;return axiosApi.post(url.URL_CORE_TOKENGEN,data,{headers:headers});case 16:rs=_context.sent;responsetokenJson=rs.data;tokenexpiration=new Date();tokenexpiration.setSeconds(new Date().getSeconds()+parseInt(responsetokenJson.expires_in));responsetokenJson.tokenexpiration=tokenexpiration.getTime();TokenService.updateLocalAccessToken(responsetokenJson);originalConfig.headers[\"Authorization\"]='Bearer '+responsetokenJson.access_token;return _context.abrupt(\"return\",axiosApi(originalConfig));case 26:_context.prev=26;_context.t0=_context[\"catch\"](11);return _context.abrupt(\"return\",Promise.reject(_context.t0));case 29:case\"end\":return _context.stop();}}},_callee,null,[[11,26]]);}));return function(_x){return _ref.apply(this,arguments);};}());var ApiServiceCore=/*#__PURE__*/function(){function ApiServiceCore(){_classCallCheck(this,ApiServiceCore);}_createClass(ApiServiceCore,[{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){var config,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config=_args2.length>1&&_args2[1]!==undefined?_args2[1]:{};_context2.next=3;return axiosApi.get(url,_objectSpread({},config)).then(function(response){var _response$data,_response$data$Status,_response$data2,_response$data2$Statu,_response$data3,_response$data3$Statu;if((response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$Status=_response$data.Status)===null||_response$data$Status===void 0?void 0:_response$data$Status.StatusCode)!==OPTs.ResponseT24_STATUSOK&&(response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:(_response$data2$Statu=_response$data2.Status)===null||_response$data2$Statu===void 0?void 0:_response$data2$Statu.StatusCode)!==OPTs.ResponseT24_STATUSOK1&&(response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:(_response$data3$Statu=_response$data3.Status)===null||_response$data3$Statu===void 0?void 0:_response$data3$Statu.StatusCode)!==OPTs.ResponseT24_STATUSOK2){var _response$data4;if(response===null||response===void 0?void 0:(_response$data4=response.data)===null||_response$data4===void 0?void 0:_response$data4.catalog){}else{var _response$data$Status2,_response$data5,_response$data5$Statu,_response$data$Status3,_response$data6,_response$data6$Statu;errorDispacherHelper.dispatch({status:(_response$data$Status2=response===null||response===void 0?void 0:(_response$data5=response.data)===null||_response$data5===void 0?void 0:(_response$data5$Statu=_response$data5.Status)===null||_response$data5$Statu===void 0?void 0:_response$data5$Statu.StatusCode)!==null&&_response$data$Status2!==void 0?_response$data$Status2:\"500\",error:(_response$data$Status3=response===null||response===void 0?void 0:(_response$data6=response.data)===null||_response$data6===void 0?void 0:(_response$data6$Statu=_response$data6.Status)===null||_response$data6$Statu===void 0?void 0:_response$data6$Statu.StatusDesc)!==null&&_response$data$Status3!==void 0?_response$data$Status3:\"NO DATA ERROR\",url:url,type:\"GET\"});}}return response.data;}).catch(function(err){var _err$response$status,_err$response,_err$response$data,_err$response2;console.error(\"ApiServiceCore\",err);errorDispacherHelper.dispatch({status:(_err$response$status=err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)!==null&&_err$response$status!==void 0?_err$response$status:\"500\",error:(_err$response$data=err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)!==null&&_err$response$data!==void 0?_err$response$data:\"NO DATA ERROR\",url:url,type:\"GET\"});});case 3:return _context2.abrupt(\"return\",_context2.sent);case 4:case\"end\":return _context2.stop();}}},_callee2);}));function get(_x2){return _get.apply(this,arguments);}return get;}()},{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(url,data){var config,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config=_args3.length>2&&_args3[2]!==undefined?_args3[2]:{};return _context3.abrupt(\"return\",axiosApi.post(url,_objectSpread({},data),_objectSpread({},config)).then(function(response){var _response$data7,_response$data7$Statu,_response$data8,_response$data8$Statu,_response$data9,_response$data9$Statu;if((response===null||response===void 0?void 0:(_response$data7=response.data)===null||_response$data7===void 0?void 0:(_response$data7$Statu=_response$data7.Status)===null||_response$data7$Statu===void 0?void 0:_response$data7$Statu.StatusCode)!==OPTs.ResponseT24_STATUSOK&&(response===null||response===void 0?void 0:(_response$data8=response.data)===null||_response$data8===void 0?void 0:(_response$data8$Statu=_response$data8.Status)===null||_response$data8$Statu===void 0?void 0:_response$data8$Statu.StatusCode)!==OPTs.ResponseT24_STATUSOK1&&(response===null||response===void 0?void 0:(_response$data9=response.data)===null||_response$data9===void 0?void 0:(_response$data9$Statu=_response$data9.Status)===null||_response$data9$Statu===void 0?void 0:_response$data9$Statu.StatusCode)!==OPTs.ResponseT24_STATUSOK2){var _response$data10;if(response===null||response===void 0?void 0:(_response$data10=response.data)===null||_response$data10===void 0?void 0:_response$data10.catalog){}else{var _response$data$Status4,_response$data11,_response$data11$Stat,_response$data$Status5,_response$data12,_response$data12$Stat;errorDispacherHelper.dispatch({status:(_response$data$Status4=response===null||response===void 0?void 0:(_response$data11=response.data)===null||_response$data11===void 0?void 0:(_response$data11$Stat=_response$data11.Status)===null||_response$data11$Stat===void 0?void 0:_response$data11$Stat.StatusCode)!==null&&_response$data$Status4!==void 0?_response$data$Status4:\"500\",error:(_response$data$Status5=response===null||response===void 0?void 0:(_response$data12=response.data)===null||_response$data12===void 0?void 0:(_response$data12$Stat=_response$data12.Status)===null||_response$data12$Stat===void 0?void 0:_response$data12$Stat.StatusDesc)!==null&&_response$data$Status5!==void 0?_response$data$Status5:\"NO DATA ERROR\",url:url,type:\"POST\"});}}return response.data;}).catch(function(err){var _err$response$status2,_err$response3,_err$response$data2,_err$response4,_err$response$status3,_err$response5,_err$response$data3,_err$response6;console.error(\"ApiServiceCore\",err);errorDispacherHelper.dispatch({status:(_err$response$status2=err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)!==null&&_err$response$status2!==void 0?_err$response$status2:\"500\",error:(_err$response$data2=err===null||err===void 0?void 0:(_err$response4=err.response)===null||_err$response4===void 0?void 0:_err$response4.data)!==null&&_err$response$data2!==void 0?_err$response$data2:\"NO DATA ERROR\",url:url,type:\"POST\"});return{url:url,status:(_err$response$status3=err===null||err===void 0?void 0:(_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.status)!==null&&_err$response$status3!==void 0?_err$response$status3:\"500\",error:(_err$response$data3=err===null||err===void 0?void 0:(_err$response6=err.response)===null||_err$response6===void 0?void 0:_err$response6.data)!==null&&_err$response$data3!==void 0?_err$response$data3:\"\"};}));case 2:case\"end\":return _context3.stop();}}},_callee3);}));function post(_x3,_x4){return _post.apply(this,arguments);}return post;}()},{key:\"put\",value:function(){var _put=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url,data){var config,_args4=arguments;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config=_args4.length>2&&_args4[2]!==undefined?_args4[2]:{};return _context4.abrupt(\"return\",axiosApi.put(url,_objectSpread({},data),_objectSpread({},config)).then(function(response){var _response$data13,_response$data13$Stat,_response$data14,_response$data14$Stat,_response$data15,_response$data15$Stat;if((response===null||response===void 0?void 0:(_response$data13=response.data)===null||_response$data13===void 0?void 0:(_response$data13$Stat=_response$data13.Status)===null||_response$data13$Stat===void 0?void 0:_response$data13$Stat.StatusCode)!==OPTs.ResponseT24_STATUSOK&&(response===null||response===void 0?void 0:(_response$data14=response.data)===null||_response$data14===void 0?void 0:(_response$data14$Stat=_response$data14.Status)===null||_response$data14$Stat===void 0?void 0:_response$data14$Stat.StatusCode)!==OPTs.ResponseT24_STATUSOK1&&(response===null||response===void 0?void 0:(_response$data15=response.data)===null||_response$data15===void 0?void 0:(_response$data15$Stat=_response$data15.Status)===null||_response$data15$Stat===void 0?void 0:_response$data15$Stat.StatusCode)!==OPTs.ResponseT24_STATUSOK2){var _response$data16;if(response===null||response===void 0?void 0:(_response$data16=response.data)===null||_response$data16===void 0?void 0:_response$data16.catalog){}else{var _response$data$Status6,_response$data17,_response$data17$Stat,_response$data$Status7,_response$data18,_response$data18$Stat;errorDispacherHelper.dispatch({status:(_response$data$Status6=response===null||response===void 0?void 0:(_response$data17=response.data)===null||_response$data17===void 0?void 0:(_response$data17$Stat=_response$data17.Status)===null||_response$data17$Stat===void 0?void 0:_response$data17$Stat.StatusCode)!==null&&_response$data$Status6!==void 0?_response$data$Status6:\"500\",error:(_response$data$Status7=response===null||response===void 0?void 0:(_response$data18=response.data)===null||_response$data18===void 0?void 0:(_response$data18$Stat=_response$data18.Status)===null||_response$data18$Stat===void 0?void 0:_response$data18$Stat.StatusDesc)!==null&&_response$data$Status7!==void 0?_response$data$Status7:\"NO DATA ERROR\",url:url,type:\"PUT\"});}}return response.data;}).catch(function(err){var _err$response$status4,_err$response7,_err$response$data4,_err$response8,_err$response$status5,_err$response9,_err$response$data5,_err$response10;console.error(\"ApiServiceCore\",err);errorDispacherHelper.dispatch({status:(_err$response$status4=err===null||err===void 0?void 0:(_err$response7=err.response)===null||_err$response7===void 0?void 0:_err$response7.status)!==null&&_err$response$status4!==void 0?_err$response$status4:\"500\",error:(_err$response$data4=err===null||err===void 0?void 0:(_err$response8=err.response)===null||_err$response8===void 0?void 0:_err$response8.data)!==null&&_err$response$data4!==void 0?_err$response$data4:\"NO DATA ERROR\",url:url,type:\"PUT\"});return{url:url,status:(_err$response$status5=err===null||err===void 0?void 0:(_err$response9=err.response)===null||_err$response9===void 0?void 0:_err$response9.status)!==null&&_err$response$status5!==void 0?_err$response$status5:\"500\",error:(_err$response$data5=err===null||err===void 0?void 0:(_err$response10=err.response)===null||_err$response10===void 0?void 0:_err$response10.data)!==null&&_err$response$data5!==void 0?_err$response$data5:\"\"};}));case 2:case\"end\":return _context4.stop();}}},_callee4);}));function put(_x5,_x6){return _put.apply(this,arguments);}return put;}()},{key:\"del\",value:function(){var _del=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(url){var config,_args5=arguments;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:config=_args5.length>1&&_args5[1]!==undefined?_args5[1]:{};_context5.next=3;return axiosApi.delete(url,_objectSpread({},config)).then(function(response){var _response$data19,_response$data19$Stat,_response$data20,_response$data20$Stat,_response$data21,_response$data21$Stat;if((response===null||response===void 0?void 0:(_response$data19=response.data)===null||_response$data19===void 0?void 0:(_response$data19$Stat=_response$data19.Status)===null||_response$data19$Stat===void 0?void 0:_response$data19$Stat.StatusCode)!==OPTs.ResponseT24_STATUSOK&&(response===null||response===void 0?void 0:(_response$data20=response.data)===null||_response$data20===void 0?void 0:(_response$data20$Stat=_response$data20.Status)===null||_response$data20$Stat===void 0?void 0:_response$data20$Stat.StatusCode)!==OPTs.ResponseT24_STATUSOK1&&(response===null||response===void 0?void 0:(_response$data21=response.data)===null||_response$data21===void 0?void 0:(_response$data21$Stat=_response$data21.Status)===null||_response$data21$Stat===void 0?void 0:_response$data21$Stat.StatusCode)!==OPTs.ResponseT24_STATUSOK2){var _response$data22;if(response===null||response===void 0?void 0:(_response$data22=response.data)===null||_response$data22===void 0?void 0:_response$data22.catalog){}else{var _response$data$Status8,_response$data23,_response$data23$Stat,_response$data$Status9,_response$data24,_response$data24$Stat;errorDispacherHelper.dispatch({status:(_response$data$Status8=response===null||response===void 0?void 0:(_response$data23=response.data)===null||_response$data23===void 0?void 0:(_response$data23$Stat=_response$data23.Status)===null||_response$data23$Stat===void 0?void 0:_response$data23$Stat.StatusCode)!==null&&_response$data$Status8!==void 0?_response$data$Status8:\"500\",error:(_response$data$Status9=response===null||response===void 0?void 0:(_response$data24=response.data)===null||_response$data24===void 0?void 0:(_response$data24$Stat=_response$data24.Status)===null||_response$data24$Stat===void 0?void 0:_response$data24$Stat.StatusDesc)!==null&&_response$data$Status9!==void 0?_response$data$Status9:\"NO DATA ERROR\",url:url,type:\"DELETE\"});}}return response.data;}).catch(function(err){var _err$response$status6,_err$response11,_err$response$data6,_err$response12,_err$response$status7,_err$response13,_err$response$data7,_err$response14;console.error(\"ApiServiceCore\",err);errorDispacherHelper.dispatch({status:(_err$response$status6=err===null||err===void 0?void 0:(_err$response11=err.response)===null||_err$response11===void 0?void 0:_err$response11.status)!==null&&_err$response$status6!==void 0?_err$response$status6:\"500\",error:(_err$response$data6=err===null||err===void 0?void 0:(_err$response12=err.response)===null||_err$response12===void 0?void 0:_err$response12.data)!==null&&_err$response$data6!==void 0?_err$response$data6:\"NO DATA ERROR\",url:url,type:\"DELETE\"});return{url:url,status:(_err$response$status7=err===null||err===void 0?void 0:(_err$response13=err.response)===null||_err$response13===void 0?void 0:_err$response13.status)!==null&&_err$response$status7!==void 0?_err$response$status7:\"500\",error:(_err$response$data7=err===null||err===void 0?void 0:(_err$response14=err.response)===null||_err$response14===void 0?void 0:_err$response14.data)!==null&&_err$response$data7!==void 0?_err$response$data7:\"\"};});case 3:return _context5.abrupt(\"return\",_context5.sent);case 4:case\"end\":return _context5.stop();}}},_callee5);}));function del(_x7){return _del.apply(this,arguments);}return del;}()//////////////////////////////\n//////////////////////////////\n/*\r\n\r\nfetch = function() {\r\nlet self = this;\r\nlet args = arguments;\r\nreturn originalFetch.apply(self, args).then(async function(data) {\r\n  if (data.status === 200)\r\n    console.log(\"---------Status 200----------\");\r\n  if (data.status === 401) {\r\n    // request for token with original fetch if status is 401\r\n    console.log('failed');\r\n    let response = await originalFetch(TEMP_API['200'].url, TEMP_API['200'].args);\r\n    // if status is 401 from token api return empty response to close recursion\r\n    console.log(\"==========401 UnAuthorize.=============\");\r\n    console.log(response);\r\n    if (response.status === 401) {\r\n      return {};\r\n    }\r\n    // else set token\r\n    // recall old fetch\r\n    // here i used 200 because 401 or 404 old response will cause it to rerun\r\n    // return fetch(...args); <- change to this for real scenarios\r\n    // return fetch(args[0], args[1]); <- or to this for real sceaerios\r\n    return fetch(TEMP_API['200'].url, TEMP_API['200'].args);\r\n  }\r\n  // condition will be tested again after 401 condition and will be ran with old args\r\n  if (data.status === 404) {\r\n    console.log(\"==========404 Not Found.=============\");\r\n    // here i used 200 because 401 or 404 old response will cause it to rerun\r\n    // return fetch(...args); <- change to this for real scenarios\r\n    // return fetch(args[0], args[1]); <- or to this for real scenarios\r\n    return fetch(TEMP_API['200'].url, TEMP_API['200'].args);\r\n    //scenaerios\r\n  }\r\n  else {\r\n    return data;\r\n  }\r\n});\r\n};\r\n*/}]);return ApiServiceCore;}();export{ApiServiceCore as default};","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/services/ApiServiceCore.js"],"names":["axios","TokenService","url","qs","http","https","BackendServices","errorDispacherHelper","OPTs","userId","channelId","client_id","client_secret","httpAgent","Agent","keepAlive","httpsAgent","API_URL","axiosApi","create","baseURL","headers","interceptors","request","use","config","token","getLocalAccessToken","access_token","error","Promise","reject","response","res","err","console","log","originalConfig","URL_CORE_TOKENGEN","elapsed","Date","getTime","tokenexpiration","removeLocalAccessToken","_retry","data","stringify","grant_type","btoa","post","rs","responsetokenJson","setSeconds","getSeconds","parseInt","expires_in","updateLocalAccessToken","ApiServiceCore","get","then","Status","StatusCode","ResponseT24_STATUSOK","ResponseT24_STATUSOK1","ResponseT24_STATUSOK2","catalog","dispatch","status","StatusDesc","type","catch","put","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\"\r\nimport TokenService from \"./TokenService\";\r\nimport * as url from \"../helpers/url_helper\"\r\nimport qs from 'qs';\r\nimport http from \"http\";\r\nimport https from \"https\";\r\nimport { BackendServices } from \"../services\";\r\nimport errorDispacherHelper from \"../helpers/errorDispacherHelper\";\r\nimport * as OPTs from \"../helpers/options_helper\"\r\n\r\nconst userId = \"ARICO1\";\r\nconst channelId = \"CreditosComerciales\"\r\nconst client_id = '6cbk7drlvbc88vdgvgo1tg1r3o'; //'rrcmi5fefq56q4bc9pri0mfa0';//\r\nconst client_secret = 'b9vti5n8pbn1cn2gr35vlgq8s3uq7mm1j2d79ih0u1jjb4hkd3m'//'k7f89803rmgu8n93ppr3e2honuguo064ga8co4oqgml8k0tdrbp';//\r\n\r\nconst httpAgent = new http.Agent({ keepAlive: true })\r\nconst httpsAgent = new https.Agent({ keepAlive: true })\r\n\r\n//apply base url for axios\r\nconst API_URL = \"\"\r\n\r\nconst axiosApi = axios.create({\r\n  baseURL: API_URL,\r\n  httpAgent,\r\n  httpsAgent,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    \"userId\": userId,\r\n    \"channelId\": channelId\r\n  },\r\n})\r\n\r\n/*\r\naxiosApi.interceptors.response.use(\r\n  response => response,\r\n  error => Promise.reject(error)\r\n)\r\n*/\r\n\r\naxiosApi.interceptors.request.use(\r\n  (config) => {\r\n    const token = TokenService.getLocalAccessToken();\r\n    if (token) {\r\n      config.headers[\"Authorization\"] = 'Bearer ' + token.access_token;\r\n      //config.headers[\"x-access-token\"] = token; // for Node.js Express back-end\r\n    }\r\n\r\n    // console.log('config: ',config);\r\n\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n\r\naxiosApi.interceptors.response.use(\r\n  (res) => {\r\n    return res;\r\n  },\r\n  async (err) => {\r\n    //return Promise.reject(err);\r\n\r\n    console.log('err: ', err);\r\n    const originalConfig = err.config;\r\n\r\n    // console.log('originalConfig: ',originalConfig);\r\n    if (originalConfig.url === url.URL_CORE_TOKENGEN) {\r\n      return Promise.reject(err);\r\n    }\r\n\r\n    var token = TokenService.getLocalAccessToken();\r\n\r\n    //si existe Token chequear la validez de tiempo\r\n    if (token) {\r\n      //calculamos que el expiration time esté correcto\r\n      var elapsed = (new Date()).getTime() - token.tokenexpiration;\r\n\r\n      if (elapsed < 0) {\r\n        return Promise.reject(err);\r\n      }\r\n    }\r\n\r\n    TokenService.removeLocalAccessToken();\r\n\r\n    originalConfig._retry = true;\r\n    try {\r\n\r\n      const data = qs.stringify({ grant_type: 'client_credentials' });\r\n      const headers = {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Authorization': \"Basic \" + btoa(client_id + \":\" + client_secret)\r\n      };\r\n\r\n      var rs = await axiosApi.post(url.URL_CORE_TOKENGEN, data, {\r\n        headers: headers\r\n      });\r\n\r\n      var responsetokenJson = rs.data;\r\n\r\n      var tokenexpiration = new Date();\r\n      tokenexpiration.setSeconds(new Date().getSeconds() + parseInt(responsetokenJson.expires_in))\r\n      responsetokenJson.tokenexpiration = tokenexpiration.getTime();\r\n\r\n      TokenService.updateLocalAccessToken(responsetokenJson);\r\n\r\n      originalConfig.headers[\"Authorization\"] = 'Bearer ' + responsetokenJson.access_token;\r\n      return axiosApi(originalConfig);\r\n\r\n    }\r\n    catch (_error) {\r\n      return Promise.reject(_error);\r\n    }\r\n\r\n    /*\r\n    //originalConfig.url !== \"/auth/signin\" &&\r\n    if (err.response) {\r\n      // Access Token was expired\r\n      if (err.response.status === 401 && !originalConfig._retry) {\r\n        originalConfig._retry = true;\r\n\r\n        try {\r\n\r\n          const data = qs.stringify({\r\n            grant_type: 'client_credentials'\r\n          });\r\n          const headers = {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'Authorization': \"Basic \" + btoa(client_id + \":\" + client_secret)\r\n          };\r\n\r\n          const rs = await axiosApi.post(url_TokenGeneration,\r\n            data,headers\r\n          );\r\n\r\n          console.log(rs.data);\r\n          TokenService.updateLocalAccessToken(rs.data);\r\n\r\n          //const { accessToken } = rs.data;\r\n          return axiosApi(originalConfig);\r\n\r\n        }\r\n        catch (_error) {\r\n          return Promise.reject(_error);\r\n        }\r\n      }\r\n    }\r\n\r\n    return Promise.reject(err);\r\n\r\n    */\r\n  }\r\n);\r\n\r\n\r\nexport default class ApiServiceCore {\r\n\r\n  async get(url, config = {}) {\r\n\r\n    return await axiosApi\r\n      .get(url, { ...config })\r\n      .then(response => {\r\n        if (response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK1 && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK2) {\r\n          if (response?.data?.catalog) {\r\n          } else {\r\n            errorDispacherHelper.dispatch({ status: response?.data?.Status?.StatusCode ?? \"500\", error: response?.data?.Status?.StatusDesc ?? \"NO DATA ERROR\", url: url, type: \"GET\" });\r\n          }\r\n        }\r\n        return response.data\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"ApiServiceCore\", err);\r\n        errorDispacherHelper.dispatch({ status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"NO DATA ERROR\", url: url, type: \"GET\" });\r\n      })\r\n  }\r\n\r\n  async post(url, data, config = {}) {\r\n    return axiosApi\r\n      .post(url, { ...data }, { ...config })\r\n      .then(response => {\r\n        if (response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK1 && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK2) {\r\n          if (response?.data?.catalog) {\r\n          } else {\r\n            errorDispacherHelper.dispatch({ status: response?.data?.Status?.StatusCode ?? \"500\", error: response?.data?.Status?.StatusDesc ?? \"NO DATA ERROR\", url: url, type: \"POST\" });\r\n          }\r\n        }\r\n        return response.data\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"ApiServiceCore\", err);\r\n        errorDispacherHelper.dispatch({ status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"NO DATA ERROR\", url: url, type: \"POST\" });\r\n        return { url: url, status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"\" };\r\n      })\r\n  }\r\n\r\n  async put(url, data, config = {}) {\r\n    return axiosApi\r\n      .put(url, { ...data }, { ...config })\r\n      .then(response => {\r\n        if (response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK1 && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK2) {\r\n          if (response?.data?.catalog) {\r\n          } else {\r\n            errorDispacherHelper.dispatch({ status: response?.data?.Status?.StatusCode ?? \"500\", error: response?.data?.Status?.StatusDesc ?? \"NO DATA ERROR\", url: url, type: \"PUT\" });\r\n          }\r\n        }\r\n        return response.data\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"ApiServiceCore\", err);\r\n        errorDispacherHelper.dispatch({ status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"NO DATA ERROR\", url: url, type: \"PUT\" });\r\n        return { url: url, status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"\" };\r\n      })\r\n  }\r\n\r\n  async del(url, config = {}) {\r\n    return await axiosApi\r\n      .delete(url, { ...config })\r\n      .then(response => {\r\n        if (response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK1 && response?.data?.Status?.StatusCode !== OPTs.ResponseT24_STATUSOK2) {\r\n          if (response?.data?.catalog) {\r\n          } else {\r\n            errorDispacherHelper.dispatch({ status: response?.data?.Status?.StatusCode ?? \"500\", error: response?.data?.Status?.StatusDesc ?? \"NO DATA ERROR\", url: url, type: \"DELETE\" });\r\n          }\r\n        }\r\n        return response.data\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"ApiServiceCore\", err);\r\n        errorDispacherHelper.dispatch({ status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"NO DATA ERROR\", url: url, type: \"DELETE\" });\r\n        return { url: url, status: err?.response?.status ?? \"500\", error: err?.response?.data ?? \"\" };\r\n      })\r\n  }\r\n\r\n  //////////////////////////////\r\n  //////////////////////////////\r\n\r\n  /*\r\n\r\nfetch = function() {\r\nlet self = this;\r\nlet args = arguments;\r\nreturn originalFetch.apply(self, args).then(async function(data) {\r\n  if (data.status === 200)\r\n    console.log(\"---------Status 200----------\");\r\n  if (data.status === 401) {\r\n    // request for token with original fetch if status is 401\r\n    console.log('failed');\r\n    let response = await originalFetch(TEMP_API['200'].url, TEMP_API['200'].args);\r\n    // if status is 401 from token api return empty response to close recursion\r\n    console.log(\"==========401 UnAuthorize.=============\");\r\n    console.log(response);\r\n    if (response.status === 401) {\r\n      return {};\r\n    }\r\n    // else set token\r\n    // recall old fetch\r\n    // here i used 200 because 401 or 404 old response will cause it to rerun\r\n    // return fetch(...args); <- change to this for real scenarios\r\n    // return fetch(args[0], args[1]); <- or to this for real sceaerios\r\n    return fetch(TEMP_API['200'].url, TEMP_API['200'].args);\r\n  }\r\n  // condition will be tested again after 401 condition and will be ran with old args\r\n  if (data.status === 404) {\r\n    console.log(\"==========404 Not Found.=============\");\r\n    // here i used 200 because 401 or 404 old response will cause it to rerun\r\n    // return fetch(...args); <- change to this for real scenarios\r\n    // return fetch(args[0], args[1]); <- or to this for real scenarios\r\n    return fetch(TEMP_API['200'].url, TEMP_API['200'].args);\r\n    //scenaerios\r\n  }\r\n  else {\r\n    return data;\r\n  }\r\n});\r\n};\r\n*/\r\n\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}