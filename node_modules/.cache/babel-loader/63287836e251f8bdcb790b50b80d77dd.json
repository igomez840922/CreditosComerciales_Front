{"ast":null,"code":"import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{translationHelpers}from'../../helpers/translation-helper';import{Table,Card,CardBody,Row,Col,Button}from\"reactstrap\";import React,{useState}from'react';import{BackendServices}from\"../../services\";import{useLocation}from'react-router-dom';import ModalFinancialInformation from\"../../pages/CommercialCredit/6_AnalisisCredito/ModalFinancialInformation\";import SweetAlert from\"react-bootstrap-sweetalert\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FinancialInformation=function FinancialInformation(props){React.useEffect(function(){LoadFinancialInformation();},[]);var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),successSave_dlg=_useState2[0],setsuccessSave_dlg=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error_dlg=_useState4[0],seterror_dlg=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error_msg=_useState6[0],seterror_msg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),info_dlg=_useState8[0],setinfo_dlg=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),info_msg=_useState10[0],setinfo_msg=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),dynamic_title=_useState12[0],setdynamic_title=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),confirm_alert=_useState14[0],setconfirm_alert=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success_dlg=_useState16[0],setsuccess_dlg=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),dynamic_description=_useState18[0],setdynamic_description=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),financialInformation=_useState20[0],setFinancialInformation=_useState20[1];var _useState21=useState(location.data),_useState22=_slicedToArray(_useState21,2),dataLocation=_useState22[0],setData=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),ShowModelFinancialInformation=_useState24[0],setShowModelFinancialInformation=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),DataUpdate=_useState26[0],setDataUpdate=_useState26[1];var _useState27=useState('guardar'),_useState28=_slicedToArray(_useState27,2),tipo=_useState28[0],setTipo=_useState28[1];var aligCell={verticalAlign:\"middle\",textAlign:\"center\"};// setFinancialInformation({\n//   headers: ['Yarly Reyes (sep-19)', 'Yarly Reyes (sep-20)'],\n//   data: [\n//     { key: 'Participación', values: ['50%', '50%'] },\n//     { key: '- ACTIVOS', values: null },\n//     { key: 'Efectivos', values: ['$2400', '$3000'] },\n//     { key: 'Acciones', values: ['$10000', '$10000'] },\n//     { key: 'TOTAL ACTIVOS', values: ['$12400', '$13000'] },\n//     { key: '- PASIVOS', values: null },\n//     { key: 'Prestamos', values: ['$2800', '$2800'] },\n//     { key: '- PATRIMONIO', values: null },\n//     { key: 'Patrimonio Personal', values: ['$10000', '$10000'] },\n//     { key: '- TOTAL PASIVO Y PATRIMONIO', values: ['$12800', '$12800'] }\n//   ]\n// });\nvar _translationHelpers=translationHelpers('commercial_credit','common','translation'),_translationHelpers2=_slicedToArray(_translationHelpers,3),t=_translationHelpers2[0],c=_translationHelpers2[1],tr=_translationHelpers2[2];// const { headers, data } = financialInformation.data;\n// const dataRows = data.map((item, index) => (\n//   <tr key={'row-' + index}>\n//     <td>{item.key}</td>\n//     {item.values ? item.values.map(col => (\n//       <td>{col}</td>\n//     )) : <td colSpan=\"2\">&nbsp;</td>}\n//   </tr>)\n// );\nfunction LoadFinancialInformation(){var api=new BackendServices();api.consultarInformiacionFinancieraFiadores(dataLocation.transactionId).then(function(data){data&&DrawInformation(data);});}function toggleShowModel(){setShowModelFinancialInformation(!ShowModelFinancialInformation);}function SendDataToServer(data){data=_objectSpread({transactId:dataLocation.transactionId,debtorId:2},data);if(tipo=='guardar'){InserData(data);}else{UpdateData(data);}}function InserData(data){var api=new BackendServices();api.nuevoInformacionFinancieraFiadores(data).then(function(resp){LoadFinancialInformation();setsuccessSave_dlg(true);});}function UpdateData(data){var api=new BackendServices();api.actualizarInformacionFinancieraFiadores(data).then(function(resp){LoadFinancialInformation();setsuccessSave_dlg(true);});}function EditDataFiadores(data){setDataUpdate(data);toggleShowModel();}function DeleteDataFiadores(data){setconfirm_alert(true);}function DrawInformation(data){setTipo('editar');var Cells=data===null||data===void 0?void 0:data.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"center\"},children:[item.secondName,\" \",item.firstName]}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.personType}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.activeCash}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.activeShares}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.activeCash+item.activeShares}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.passiveLoan}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.passiveLoan}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.personalWealth}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.passiveLoan+item.personalWealth}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){EditDataFiadores(item);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){DeleteDataFiadores(item);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]},'row-'+index);});setFinancialInformation(Cells);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"card-title\",children:[t(\"Guarantors Financial Information\"),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){toggleShowModel();},id:\"btnNew\",color:\"success\",type:\"button\",className:\"float-end\",style:{margin:'5px'},children:c(\"New\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"Natural and Legal Person\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsxs(\"thead\",{className:\"table-light\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",style:aligCell,children:tr(\"Client\")}),/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",style:aligCell,children:tr(\"Participation\")}),/*#__PURE__*/_jsx(\"th\",{colSpan:\"2\",style:aligCell,children:tr(\"ASSETS\")}),/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",style:aligCell,children:/*#__PURE__*/_jsx(\"b\",{children:tr(\"TOTALASSETS\")})}),/*#__PURE__*/_jsx(\"th\",{style:aligCell,children:tr(\"PASSIVE\")}),/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",style:aligCell,children:/*#__PURE__*/_jsx(\"b\",{children:tr(\"TOTALLIABILITIES\")})}),/*#__PURE__*/_jsx(\"th\",{style:aligCell,children:tr(\"HERITAGE\")}),/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",style:aligCell,children:/*#__PURE__*/_jsx(\"b\",{children:tr(\"TOTALLIABILITIESANDEQUITY\")})}),/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",style:aligCell})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:aligCell,children:\"Efectivos\"}),/*#__PURE__*/_jsx(\"th\",{style:aligCell,children:\"Acciones\"}),/*#__PURE__*/_jsx(\"th\",{style:aligCell,children:\"Prestamos\"}),/*#__PURE__*/_jsx(\"th\",{style:aligCell,children:\"Patrimonio Personal\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:financialInformation})]})})})}),/*#__PURE__*/_jsx(ModalFinancialInformation,{isOpen:ShowModelFinancialInformation,toggle:function toggle(){toggleShowModel();},tipo:tipo,SendDataToServer:SendDataToServer,DataUpdate:DataUpdate}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);LoadFinancialInformation();},children:t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),onConfirm:function onConfirm(){seterror_dlg(false);LoadFinancialInformation();},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:t(\"Yesdeleteit\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){var apiBack=new BackendServices();apiBack.eliminarInformacionFinancieraFiadores(dataLocation.transactionId,DataUpdate.debtorId,DataUpdate.guarantorId).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(true);}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(true);});},onCancel:function onCancel(){return setconfirm_alert(false);},children:t(\"Youwontbeabletorevertthis\")}):null]});};export default FinancialInformation;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/InformeFinanciero/FinancialInformation.js"],"names":["translationHelpers","Table","Card","CardBody","Row","Col","Button","React","useState","BackendServices","useLocation","ModalFinancialInformation","SweetAlert","FinancialInformation","props","useEffect","LoadFinancialInformation","location","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","info_dlg","setinfo_dlg","info_msg","setinfo_msg","dynamic_title","setdynamic_title","confirm_alert","setconfirm_alert","success_dlg","setsuccess_dlg","dynamic_description","setdynamic_description","financialInformation","setFinancialInformation","data","dataLocation","setData","ShowModelFinancialInformation","setShowModelFinancialInformation","DataUpdate","setDataUpdate","tipo","setTipo","aligCell","verticalAlign","textAlign","t","c","tr","api","consultarInformiacionFinancieraFiadores","transactionId","then","DrawInformation","toggleShowModel","SendDataToServer","transactId","debtorId","InserData","UpdateData","nuevoInformacionFinancieraFiadores","resp","actualizarInformacionFinancieraFiadores","EditDataFiadores","DeleteDataFiadores","Cells","map","item","index","secondName","firstName","personType","activeCash","activeShares","passiveLoan","personalWealth","margin","apiBack","eliminarInformacionFinancieraFiadores","guarantorId","statusCode","catch","error"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../helpers/translation-helper';\r\n\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button\r\n} from \"reactstrap\"\r\nimport React, { useState } from 'react';\r\nimport { BackendServices } from \"../../services\";\r\nimport { useLocation } from 'react-router-dom';\r\nimport ModalFinancialInformation from \"../../pages/CommercialCredit/6_AnalisisCredito/ModalFinancialInformation\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nconst FinancialInformation = (props) => {\r\n  React.useEffect(() => {\r\n    LoadFinancialInformation();\r\n  }, []);\r\n\r\n  const location = useLocation()\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [info_dlg, setinfo_dlg] = useState(false)\r\n  const [info_msg, setinfo_msg] = useState(\"\")\r\n  const [dynamic_title, setdynamic_title] = useState(\"\")\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [success_dlg, setsuccess_dlg] = useState(false)\r\n  const [dynamic_description, setdynamic_description] = useState(\"\")\r\n\r\n\r\n  const [financialInformation, setFinancialInformation] = useState(null);\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [ShowModelFinancialInformation, setShowModelFinancialInformation] = useState(false);\r\n  const [DataUpdate, setDataUpdate] = useState(null);\r\n  const [tipo, setTipo] = useState('guardar');\r\n\r\n  var aligCell = { verticalAlign: \"middle\", textAlign: \"center\", };\r\n\r\n  // setFinancialInformation({\r\n  //   headers: ['Yarly Reyes (sep-19)', 'Yarly Reyes (sep-20)'],\r\n  //   data: [\r\n  //     { key: 'Participación', values: ['50%', '50%'] },\r\n  //     { key: '- ACTIVOS', values: null },\r\n  //     { key: 'Efectivos', values: ['$2400', '$3000'] },\r\n  //     { key: 'Acciones', values: ['$10000', '$10000'] },\r\n  //     { key: 'TOTAL ACTIVOS', values: ['$12400', '$13000'] },\r\n  //     { key: '- PASIVOS', values: null },\r\n  //     { key: 'Prestamos', values: ['$2800', '$2800'] },\r\n  //     { key: '- PATRIMONIO', values: null },\r\n  //     { key: 'Patrimonio Personal', values: ['$10000', '$10000'] },\r\n  //     { key: '- TOTAL PASIVO Y PATRIMONIO', values: ['$12800', '$12800'] }\r\n  //   ]\r\n  // });\r\n\r\n  const [t, c, tr] = translationHelpers('commercial_credit', 'common', 'translation');\r\n\r\n  // const { headers, data } = financialInformation.data;\r\n\r\n\r\n  // const dataRows = data.map((item, index) => (\r\n  //   <tr key={'row-' + index}>\r\n  //     <td>{item.key}</td>\r\n  //     {item.values ? item.values.map(col => (\r\n  //       <td>{col}</td>\r\n  //     )) : <td colSpan=\"2\">&nbsp;</td>}\r\n  //   </tr>)\r\n  // );\r\n\r\n  function LoadFinancialInformation() {\r\n    const api = new BackendServices()\r\n    api.consultarInformiacionFinancieraFiadores(dataLocation.transactionId).then(data => {\r\n      data && DrawInformation(data)\r\n    });\r\n  }\r\n\r\n  function toggleShowModel() {\r\n    setShowModelFinancialInformation(!ShowModelFinancialInformation);\r\n  }\r\n\r\n  function SendDataToServer(data) {\r\n    data = { transactId: dataLocation.transactionId, debtorId: 2, ...data };\r\n    if (tipo == 'guardar') {\r\n      InserData(data);\r\n    } else {\r\n      UpdateData(data);\r\n    }\r\n  }\r\n\r\n  function InserData(data) {\r\n    const api = new BackendServices()\r\n    api.nuevoInformacionFinancieraFiadores(data).then(resp => {\r\n      LoadFinancialInformation();\r\n      setsuccessSave_dlg(true);\r\n    })\r\n  }\r\n\r\n  function UpdateData(data) {\r\n    const api = new BackendServices()\r\n    api.actualizarInformacionFinancieraFiadores(data).then(resp => {\r\n      LoadFinancialInformation();\r\n      setsuccessSave_dlg(true)\r\n    })\r\n  }\r\n\r\n  function EditDataFiadores(data) {\r\n    setDataUpdate(data);\r\n    toggleShowModel()\r\n  }\r\n\r\n  function DeleteDataFiadores(data) {\r\n    setconfirm_alert(true);\r\n  }\r\n\r\n  function DrawInformation(data) {\r\n    setTipo('editar');\r\n    let Cells = data?.map((item, index) => (\r\n      <tr key={'row-' + index}>\r\n        <td style={{ textAlign: \"center\" }}>{item.secondName} {item.firstName}</td>\r\n        <td style={{ textAlign: \"center\" }}>{item.personType}</td>\r\n        <td style={{ textAlign: \"center\" }}>{item.activeCash}</td>\r\n        <td style={{ textAlign: \"center\" }}>{item.activeShares}</td>\r\n        <td style={{ textAlign: \"center\" }}>{(item.activeCash + item.activeShares)}</td>\r\n        <td style={{ textAlign: \"center\" }}>{item.passiveLoan}</td>\r\n        <td style={{ textAlign: \"center\" }}>{item.passiveLoan}</td>\r\n        <td style={{ textAlign: \"center\" }}>{item.personalWealth}</td>\r\n        <td style={{ textAlign: \"center\" }}>{(item.passiveLoan + item.personalWealth)}</td>\r\n        <td style={{ textAlign: \"right\" }}>\r\n          <Button type=\"button\" color=\"link\" onClick={(resp) => { EditDataFiadores(item) }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n          <Button type=\"button\" color=\"link\" onClick={(resp) => { DeleteDataFiadores(item) }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n        </td>\r\n      </tr>\r\n    ))\r\n    setFinancialInformation(Cells);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h4 className=\"card-title\">{t(\"Guarantors Financial Information\")}\r\n        <Button onClick={() => { toggleShowModel() }} id=\"btnNew\" color=\"success\" type=\"button\" className=\"float-end\" style={{ margin: '5px' }}>\r\n          {c(\"New\")}\r\n        </Button>\r\n      </h4>\r\n      <p className=\"card-title-desc\">{t(\"Natural and Legal Person\")}</p>\r\n\r\n\r\n      <Row>\r\n        <Col lg=\"12\">\r\n          <div className=\"table-responsive\">\r\n            <Table className=\"table mb-0\">\r\n              <thead className=\"table-light\">\r\n                <tr>\r\n                  {/* <th>&nbsp;</th>\r\n                    <th>{headres}</th> */}\r\n                  <th rowSpan=\"2\" style={aligCell}>{tr(\"Client\")}</th>\r\n                  <th rowSpan=\"2\" style={aligCell}>{tr(\"Participation\")}</th>\r\n                  <th colSpan=\"2\" style={aligCell}>{tr(\"ASSETS\")}</th>\r\n                  <th rowSpan=\"2\" style={aligCell}><b>{tr(\"TOTALASSETS\")}</b></th>\r\n                  <th style={aligCell}>{tr(\"PASSIVE\")}</th>\r\n                  <th rowSpan=\"2\" style={aligCell}><b>{tr(\"TOTALLIABILITIES\")}</b></th>\r\n                  <th style={aligCell}>{tr(\"HERITAGE\")}</th>\r\n                  <th rowSpan=\"2\" style={aligCell}><b>{tr(\"TOTALLIABILITIESANDEQUITY\")}</b></th>\r\n                  <th rowSpan=\"2\" style={aligCell}></th>\r\n                </tr>\r\n                <tr>\r\n                  <th style={aligCell}>Efectivos</th>\r\n                  <th style={aligCell}>Acciones</th>\r\n                  <th style={aligCell}>Prestamos</th>\r\n                  <th style={aligCell}>Patrimonio Personal</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {financialInformation}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <ModalFinancialInformation isOpen={ShowModelFinancialInformation} toggle={() => { toggleShowModel() }} tipo={tipo} SendDataToServer={SendDataToServer} DataUpdate={DataUpdate} />\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={t(\"SuccessDialog\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false)\r\n            LoadFinancialInformation();\r\n          }}\r\n        >\r\n          {t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={t(\"ErrorDialog\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n            LoadFinancialInformation();\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={t(\"Yesdeleteit\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            const apiBack = new BackendServices();\r\n            apiBack.eliminarInformacionFinancieraFiadores(dataLocation.transactionId, DataUpdate.debtorId, DataUpdate.guarantorId).then(resp => {\r\n              if (resp.statusCode == \"500\") {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(true)\r\n              } else {\r\n                setconfirm_alert(false)\r\n                setsuccessSave_dlg(true)\r\n              }\r\n            }).catch(error => {\r\n              setconfirm_alert(false)\r\n              seterror_dlg(true)\r\n            })\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nFinancialInformation.propTypes = {\r\n  products: PropTypes.array\r\n};\r\n\r\nexport default FinancialInformation;\r\n"]},"metadata":{},"sourceType":"module"}