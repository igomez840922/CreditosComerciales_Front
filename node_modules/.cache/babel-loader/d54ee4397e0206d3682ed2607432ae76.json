{"ast":null,"code":"import { BackendServices, BpmServices, CoreServices } from \"../../../../services\";\nexport class LevelAutonomyClass {\n  constructor(dataSession = {}) {\n    var _this$location, _this$location2;\n\n    this.backendServices = new BackendServices();\n    this.bpmServices = new BpmServices();\n    this.coreServices = new CoreServices();\n    this.MODEL_FACILITY = {\n      \"approved\": 0,\n      \"currentBalance\": 0,\n      \"ltv\": 0,\n      \"proposed\": 0,\n      \"guarantee\": 0\n    };\n\n    if (((_this$location = this.location) === null || _this$location === void 0 ? void 0 : _this$location.data) !== null && ((_this$location2 = this.location) === null || _this$location2 === void 0 ? void 0 : _this$location2.data) !== undefined) {\n      var _this$location3, _this$location4;\n\n      if (((_this$location3 = this.location) === null || _this$location3 === void 0 ? void 0 : _this$location3.data.transactionId) === undefined || ((_this$location4 = this.location) === null || _this$location4 === void 0 ? void 0 : _this$location4.data.transactionId.length) <= 0) {\n        //this.location?.data.transactionId = 0;\n        //checkAndCreateProcedure(this.location?.data);\n        this.validateRoute = true;\n      } else {\n        var _this$location5, _this$location6;\n\n        sessionStorage.setItem('locationData', JSON.stringify((_this$location5 = this.location) === null || _this$location5 === void 0 ? void 0 : _this$location5.data));\n        this.locationData = (_this$location6 = this.location) === null || _this$location6 === void 0 ? void 0 : _this$location6.data;\n      }\n    } else {\n      //chequeamos si tenemos guardado en session\n      var result = sessionStorage.getItem('locationData');\n\n      if (result !== undefined && result !== null) {\n        result = JSON.parse(result);\n        this.locationData = result;\n      } else {\n        this.locationData = dataSession;\n      }\n    }\n  }\n\n  async getLevelAutonomy() {\n    return new Promise((resolve, reject) => {\n      var _this$locationData$tr, _this$locationData;\n\n      //facility type prendaria code PR\n      Promise.allSettled([this.backendServices.consultGeneralDataPropCred((_this$locationData$tr = (_this$locationData = this.locationData) === null || _this$locationData === void 0 ? void 0 : _this$locationData.transactionId) !== null && _this$locationData$tr !== void 0 ? _this$locationData$tr : 0)]).then(async allPromise => {\n        var _propuesta$, _facilitiesProposal$r, _facilitiesProposal$r2;\n\n        const [{\n          value: propuesta\n        }] = allPromise;\n        let requestId = (_propuesta$ = propuesta[0]) === null || _propuesta$ === void 0 ? void 0 : _propuesta$.requestId;\n        let facilitiesProposal = await this.backendServices.consultarFacilidades(requestId !== null && requestId !== void 0 ? requestId : '');\n        let tipo = (facilitiesProposal === null || facilitiesProposal === void 0 ? void 0 : facilitiesProposal.some(facility => facility.facilityTypeId === 'PR')) ? '4' : '';\n        let amount = (_facilitiesProposal$r = facilitiesProposal === null || facilitiesProposal === void 0 ? void 0 : facilitiesProposal.reduce((acu, crr) => crr.facilityTypeId === 'PR' ? acu + crr.amount : 0, 0)) !== null && _facilitiesProposal$r !== void 0 ? _facilitiesProposal$r : 0;\n        let ltv = (_facilitiesProposal$r2 = facilitiesProposal === null || facilitiesProposal === void 0 ? void 0 : facilitiesProposal.reduce((acu, crr) => crr.facilityTypeId === 'PR' ? acu + crr.ltv : 0, 0)) !== null && _facilitiesProposal$r2 !== void 0 ? _facilitiesProposal$r2 : 0;\n\n        if (tipo !== '4') {\n          var _expositionCorporativ, _expositionCorporativ2;\n\n          let expositionCorporative = await this.backendServices.getExposicionCorporativaBD(this.locationData.transactionId);\n          let facilityCP = (_expositionCorporativ = expositionCorporative.find(x => x.description.toUpperCase() === \"Facilidades Corto Plazo\".toUpperCase())) !== null && _expositionCorporativ !== void 0 ? _expositionCorporativ : this.MODEL_FACILITY;\n          let facilityLP = (_expositionCorporativ2 = expositionCorporative.find(x => x.description.toUpperCase() === \"Facilidades Largo Plazo\".toUpperCase())) !== null && _expositionCorporativ2 !== void 0 ? _expositionCorporativ2 : this.MODEL_FACILITY;\n          let facilities = await this.backendServices.consultarFacilidadesExposicionCorporativa(requestId !== null && requestId !== void 0 ? requestId : '');\n          let jsonFacilidades = {\n            CP: (facilities === null || facilities === void 0 ? void 0 : facilities.CP.reduce((acu, crr) => acu + crr.requestAmount, 0)) || 0,\n            LP: (facilities === null || facilities === void 0 ? void 0 : facilities.LP.reduce((acu, crr) => acu + crr.requestAmount, 0)) || 0\n          };\n          let amountCP = parseFloat(facilityCP.approved) + parseFloat(jsonFacilidades.CP);\n          let amountLP = parseFloat(facilityLP.currentBalance) + parseFloat(jsonFacilidades.LP);\n          let ltvCP = facilityCP.guarantee > 0 ? parseFloat(facilityCP.proposed) / parseFloat(facilityCP.guarantee) * 100 : 0;\n          let ltvLP = facilityLP.guarantee > 0 ? parseFloat(facilityLP.proposed) / parseFloat(facilityLP.guarantee) * 100 : 0;\n          const {\n            amount: amounting,\n            ltv: ltvF\n          } = amountCP > amountLP ? {\n            amount: amountCP,\n            ltvF: ltvCP\n          } : {\n            amount: amountLP,\n            ltvF: ltvLP\n          };\n          amount = amounting;\n          ltv = ltvF;\n          tipo = ltv >= 70 ? '1' : '2';\n        }\n\n        resolve(await this.onLevelAutonomy({\n          tipo,\n          amount\n        }));\n      }).catch(err => {\n        console.error(err);\n      });\n    });\n  }\n\n  onLevelAutonomy({\n    tipo,\n    amount\n  }) {\n    return new Promise((resolve, reject) => {\n      amount > 0 && this.bpmServices.saveAutonomy({\n        tipo,\n        amount\n      }).then(resp => {\n        var _resp$body, _resp$body$result$dmn, _resp$body$result$dmn2, _resp$body2, _resp$body2$result$dm, _resp$body2$result$dm2;\n\n        let banca = resp === null || resp === void 0 ? void 0 : (_resp$body = resp.body) === null || _resp$body === void 0 ? void 0 : (_resp$body$result$dmn = _resp$body.result['dmn-evaluation-result']['dmn-context']) === null || _resp$body$result$dmn === void 0 ? void 0 : (_resp$body$result$dmn2 = _resp$body$result$dmn.autonomiaduales) === null || _resp$body$result$dmn2 === void 0 ? void 0 : _resp$body$result$dmn2.banca;\n        let credit = resp === null || resp === void 0 ? void 0 : (_resp$body2 = resp.body) === null || _resp$body2 === void 0 ? void 0 : (_resp$body2$result$dm = _resp$body2.result['dmn-evaluation-result']['dmn-context']) === null || _resp$body2$result$dm === void 0 ? void 0 : (_resp$body2$result$dm2 = _resp$body2$result$dm.autonomiaduales) === null || _resp$body2$result$dm2 === void 0 ? void 0 : _resp$body2$result$dm2.credito;\n        resolve({\n          banca,\n          credit\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    });\n  }\n\n}","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/LevelAutonomy.model.js"],"names":["BackendServices","BpmServices","CoreServices","LevelAutonomyClass","constructor","dataSession","backendServices","bpmServices","coreServices","MODEL_FACILITY","location","data","undefined","transactionId","length","validateRoute","sessionStorage","setItem","JSON","stringify","locationData","result","getItem","parse","getLevelAutonomy","Promise","resolve","reject","allSettled","consultGeneralDataPropCred","then","allPromise","value","propuesta","requestId","facilitiesProposal","consultarFacilidades","tipo","some","facility","facilityTypeId","amount","reduce","acu","crr","ltv","expositionCorporative","getExposicionCorporativaBD","facilityCP","find","x","description","toUpperCase","facilityLP","facilities","consultarFacilidadesExposicionCorporativa","jsonFacilidades","CP","requestAmount","LP","amountCP","parseFloat","approved","amountLP","currentBalance","ltvCP","guarantee","proposed","ltvLP","amounting","ltvF","onLevelAutonomy","catch","err","console","error","saveAutonomy","resp","banca","body","autonomiaduales","credit","credito","log"],"mappings":"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","sourcesContent":["import { BackendServices, BpmServices, CoreServices } from \"../../../../services\";\r\n\r\nexport class LevelAutonomyClass {\r\n\r\n    backendServices = new BackendServices();\r\n    bpmServices = new BpmServices();\r\n    coreServices = new CoreServices();\r\n    locationData;\r\n\r\n    MODEL_FACILITY = {\r\n        \"approved\": 0,\r\n        \"currentBalance\": 0,\r\n        \"ltv\": 0,\r\n        \"proposed\": 0,\r\n        \"guarantee\": 0,\r\n    }\r\n\r\n    constructor(dataSession = {}) {\r\n\r\n        if (this.location?.data !== null && this.location?.data !== undefined) {\r\n            if (this.location?.data.transactionId === undefined || this.location?.data.transactionId.length <= 0) {\r\n                //this.location?.data.transactionId = 0;\r\n                //checkAndCreateProcedure(this.location?.data);\r\n                this.validateRoute = true\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(this.location?.data));\r\n                this.locationData = this.location?.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                this.locationData = result;\r\n            } else {\r\n                this.locationData = dataSession\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    async getLevelAutonomy() {\r\n        return new Promise((resolve, reject) => {\r\n            //facility type prendaria code PR\r\n            Promise.allSettled([\r\n                this.backendServices.consultGeneralDataPropCred(this.locationData?.transactionId ?? 0),\r\n            ]).then(async allPromise => {\r\n                const [{ value: propuesta }] = allPromise;\r\n\r\n                let requestId = propuesta[0]?.requestId;\r\n                let facilitiesProposal = await this.backendServices.consultarFacilidades(requestId ?? '');\r\n\r\n                let tipo = facilitiesProposal?.some(facility => facility.facilityTypeId === 'PR') ? '4' : '';\r\n                let amount = facilitiesProposal?.reduce((acu, crr) => crr.facilityTypeId === 'PR' ? acu + crr.amount : 0, 0) ?? 0;\r\n                let ltv = facilitiesProposal?.reduce((acu, crr) => crr.facilityTypeId === 'PR' ? acu + crr.ltv : 0, 0) ?? 0;\r\n\r\n                if (tipo !== '4') {\r\n                    let expositionCorporative = await this.backendServices.getExposicionCorporativaBD(this.locationData.transactionId);\r\n                    let facilityCP = expositionCorporative.find(x => x.description.toUpperCase() === \"Facilidades Corto Plazo\".toUpperCase()) ?? this.MODEL_FACILITY;\r\n                    let facilityLP = expositionCorporative.find(x => x.description.toUpperCase() === \"Facilidades Largo Plazo\".toUpperCase()) ?? this.MODEL_FACILITY;\r\n\r\n                    let facilities = await this.backendServices.consultarFacilidadesExposicionCorporativa(requestId ?? '');\r\n                    let jsonFacilidades = {\r\n                        CP: facilities?.CP.reduce((acu, crr) => (acu + crr.requestAmount), 0) || 0,\r\n                        LP: facilities?.LP.reduce((acu, crr) => (acu + crr.requestAmount), 0) || 0,\r\n                    }\r\n                    let amountCP = parseFloat(facilityCP.approved) + parseFloat(jsonFacilidades.CP);\r\n                    let amountLP = parseFloat(facilityLP.currentBalance) + parseFloat(jsonFacilidades.LP);\r\n\r\n                    let ltvCP = facilityCP.guarantee > 0 ? parseFloat(facilityCP.proposed) / parseFloat(facilityCP.guarantee) * 100 : 0;\r\n                    let ltvLP = facilityLP.guarantee > 0 ? parseFloat(facilityLP.proposed) / parseFloat(facilityLP.guarantee) * 100 : 0;\r\n\r\n                    const { amount: amounting, ltv: ltvF } = amountCP > amountLP ? { amount: amountCP, ltvF: ltvCP } : { amount: amountLP, ltvF: ltvLP };\r\n                    amount = amounting;\r\n                    ltv = ltvF;\r\n                    tipo = ltv >= 70 ? '1' : '2';\r\n\r\n                }\r\n\r\n                resolve(await this.onLevelAutonomy({ tipo, amount }))\r\n\r\n            }).catch(err => {\r\n                console.error(err)\r\n            })\r\n        })\r\n    }\r\n\r\n    onLevelAutonomy({ tipo, amount }) {\r\n        return new Promise((resolve, reject) => {\r\n            amount > 0 && this.bpmServices.saveAutonomy({ tipo, amount }).then(resp => {\r\n                let banca = resp?.body?.result['dmn-evaluation-result']['dmn-context']?.autonomiaduales?.banca;\r\n                let credit = resp?.body?.result['dmn-evaluation-result']['dmn-context']?.autonomiaduales?.credito;\r\n                resolve({ banca, credit });\r\n            }).catch(err => {\r\n                console.log(err)\r\n            });\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}