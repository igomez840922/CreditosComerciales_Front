{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{translationHelper}from'../../helpers';import{AvForm,AvGroup,AvField,AvFeedback}from\"availity-reactstrap-validation\";import{Table,Card,CardBody,Row,Col,Label}from\"reactstrap\";import HeaderSections from'../Common/HeaderSections';import{useTranslation}from\"react-i18next\";import{BackendServices,CoreServices}from\"../../services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FacilityListBpm=function FacilityListBpm(props){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),dataReturn=_useState2[0],setdataReturn=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),debtorList=_useState4[0],setdebtorList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),facilityTypeList=_useState6[0],setfacilityTypeList=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),proposalTypeList=_useState8[0],setproposalTypeList=_useState8[1];//Servicios\nvar _useState9=useState(new CoreServices()),_useState10=_slicedToArray(_useState9,2),coreServices=_useState10[0],setcoreServices=_useState10[1];var _useState11=useState(new BackendServices()),_useState12=_slicedToArray(_useState11,2),backendServices=_useState12[0],setbackendServices=_useState12[1];useEffect(function(){if(props.transactionId!=null){initializeData();}},[]);function initializeData(){return _initializeData.apply(this,arguments);}function _initializeData(){_initializeData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultarDeudores(props.transactionId);case 2:result=_context.sent;if(result!==undefined){setdebtorList(result);}//catalogo de facilidades\n_context.next=6;return backendServices.retrieveFacilityType();case 6:result=_context.sent;if(result!==undefined){setfacilityTypeList(result);}//catalogo de Propuestas\n_context.next=10;return backendServices.retrieveProposalType();case 10:result=_context.sent;if(result!==undefined){setproposalTypeList(result);}// consultarPropuesta de Credito\nbackendServices.consultGeneralDataPropCred(props.transactionId).then(function(resp){if(resp!==undefined){//Consultar Lista de Facilidades\nbackendServices.consultarFacilidades(resp[0].requestId).then(function(resp){setdataReturn(resp);});}});case 13:case\"end\":return _context.stop();}}},_callee);}));return _initializeData.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(HeaderSections,{title:\"FacilityActual\",t:t}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(Table,{className:\"table mt-1\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Debtor\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"ProposedRisk\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"ProposedRate\")})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataReturn?dataReturn.filter(function(item){return item.facilityType!==\"1\";}).map(function(item,index){var _facilityTypeList$fin,_proposalTypeList$fin;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.debtor}),/*#__PURE__*/_jsx(\"td\",{children:(_facilityTypeList$fin=facilityTypeList.find(function(x){return x.id===item.facilityType;}))===null||_facilityTypeList$fin===void 0?void 0:_facilityTypeList$fin.description}),/*#__PURE__*/_jsx(\"td\",{children:(_proposalTypeList$fin=proposalTypeList.find(function(x){return x.id===item.proposedType;}))===null||_proposalTypeList$fin===void 0?void 0:_proposalTypeList$fin.description}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$\",item.amount]}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$\",item.proposedRate]})]},'row-'+index);}):null})]})]})})});};export default FacilityListBpm;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/FacilityListBpm.js"],"names":["React","useState","useEffect","translationHelper","AvForm","AvGroup","AvField","AvFeedback","Table","Card","CardBody","Row","Col","Label","HeaderSections","useTranslation","BackendServices","CoreServices","FacilityListBpm","props","t","i18n","dataReturn","setdataReturn","debtorList","setdebtorList","facilityTypeList","setfacilityTypeList","proposalTypeList","setproposalTypeList","coreServices","setcoreServices","backendServices","setbackendServices","transactionId","initializeData","consultarDeudores","result","undefined","retrieveFacilityType","retrieveProposalType","consultGeneralDataPropCred","then","resp","consultarFacilidades","requestId","filter","item","facilityType","map","index","debtor","find","x","id","description","proposedType","amount","proposedRate"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelper } from '../../helpers';\r\nimport { AvForm, AvGroup, AvField, AvFeedback } from \"availity-reactstrap-validation\"\r\nimport {\r\n    Table,\r\n    Card,\r\n    CardBody,\r\n    Row,\r\n    Col,\r\n    Label,\r\n} from \"reactstrap\"\r\n\r\nimport HeaderSections from '../Common/HeaderSections';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { BackendServices, CoreServices } from \"../../services\";\r\n\r\nconst FacilityListBpm = (props) => {\r\n    \r\n    const { t, i18n } = useTranslation();\r\n    const [dataReturn, setdataReturn] = useState(null);\r\n    const [debtorList, setdebtorList] = useState([]);\r\n    const [facilityTypeList, setfacilityTypeList] = useState([]);\r\n    const [proposalTypeList, setproposalTypeList] = useState([]);\r\n    \r\n  //Servicios\r\n  const [coreServices, setcoreServices] = useState(new CoreServices());\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n\r\n    useEffect(() => {\r\n        if (props.transactionId != null) {\r\n            initializeData();        }\r\n    }, []);\r\n\r\n    async function initializeData() {\r\n\r\n        //los deudores\r\n      var result =  await backendServices.consultarDeudores(props.transactionId);\r\n      if(result!==undefined){\r\n        setdebtorList(result);\r\n      }\r\n       \r\n      //catalogo de facilidades\r\n       result =  await backendServices.retrieveFacilityType();\r\n      if(result!==undefined){\r\n        setfacilityTypeList(result);\r\n      }\r\n      \r\n      //catalogo de Propuestas\r\n      result =  await backendServices.retrieveProposalType();\r\n      if(result!==undefined){\r\n        setproposalTypeList(result);\r\n      }\r\n\r\n       // consultarPropuesta de Credito\r\n       backendServices.consultGeneralDataPropCred(props.transactionId).then((resp) => {\r\n        if(resp!==undefined){\r\n            //Consultar Lista de Facilidades\r\n            backendServices.consultarFacilidades(resp[0].requestId).then((resp) => {\r\n                setdataReturn(resp)\r\n            });\r\n        }\r\n    });    \r\n    }\r\n    \r\n    return (\r\n\r\n        <React.Fragment>\r\n      <>\r\n        <CardBody>\r\n          <HeaderSections title={\"FacilityActual\"} t={t}></HeaderSections>\r\n          <p className=\"card-title-desc\">\r\n          </p>\r\n          <Table className=\"table mt-1\" responsive>\r\n            <thead className=\"table-light\">\r\n              <tr>\r\n                <th>{t(\"Debtor\")}</th>\r\n                <th>{t(\"Facility Type\")}</th>\r\n                <th>{t(\"Proposal\")}</th>\r\n                <th className=\"text-end\">{t(\"ProposedRisk\")}</th>\r\n                <th className=\"text-end\">{t(\"ProposedRate\")}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {dataReturn?\r\n              dataReturn.filter(item => item.facilityType!==\"1\").map((item,index) => (\r\n                <tr key={'row-' + index}>\r\n                  <td>\r\n                    {\r\n                      item.debtor\r\n                    }\r\n                  </td>\r\n                  <td>\r\n                    {\r\n                      facilityTypeList.find(x => x.id === item.facilityType)?.description\r\n                    }\r\n                  </td>\r\n                  <td>\r\n                    {\r\n                      proposalTypeList.find(x => x.id === item.proposedType)?.description\r\n                    }\r\n                  </td>\r\n                  <td className=\"text-end\">${item.amount}</td>\r\n                  <td className=\"text-end\">${item.proposedRate}</td>\r\n                </tr>\r\n              ))              \r\n              :null}\r\n            </tbody>\r\n          </Table>\r\n        </CardBody>\r\n      </>\r\n    </React.Fragment >   \r\n       \r\n    );\r\n};\r\nFacilityListBpm.propTypes = {\r\n    transactionId: PropTypes.string,\r\n};\r\nexport default FacilityListBpm;\r\n"]},"metadata":{},"sourceType":"module"}