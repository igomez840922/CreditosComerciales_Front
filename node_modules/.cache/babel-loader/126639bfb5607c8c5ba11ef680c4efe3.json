{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{withTranslation}from\"react-i18next\";import{Link}from\"react-router-dom\";import{Table,Card,CardBody,Pagination,PaginationItem,PaginationLink,CardFooter,Button,Row,Col}from\"reactstrap\";import ApiServicesDetalleDocumentacion from'../../../../services/DocumentacionLegal/ApiServicesDetalleDocumentacion';import{BpmServices,BackendServices}from\"../../../../services\";import{useLocation,useHistory}from\"react-router-dom\";import*as url from\"../../../../helpers/url_helper\";import SweetAlert from\"react-bootstrap-sweetalert\";import{AvField,AvForm,AvGroup}from'availity-reactstrap-validation';import Switch from\"react-switch\";import{useTranslation}from'react-i18next';import Currency from'../../../../helpers/currency';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Offsymbol=function Offsymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"No\"]});};var OnSymbol=function OnSymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"Si\"]});};var estiloTotales={backgroundColor:\"lightgrey !important\",color:\"black !important\",textAlign:\"center\"};var Honorarios=function Honorarios(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),switch1=_useState2[0],setswitch1=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),switch2=_useState4[0],setswitch2=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),switch3=_useState6[0],setswitch3=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),switch4=_useState8[0],setswitch4=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),switch5=_useState10[0],setswitch5=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),switch6=_useState12[0],setswitch6=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),switch7=_useState14[0],setswitch7=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),switch8=_useState16[0],setswitch8=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),switch9=_useState18[0],setswitch9=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),switch10=_useState20[0],setswitch10=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),switch11=_useState22[0],setswitch11=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),switch12=_useState24[0],setswitch12=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),switch13=_useState26[0],setswitch13=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),switch14=_useState28[0],setswitch14=_useState28[1];var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var currencyData=new Currency();var apiServiceBackend=new BackendServices();var location=useLocation();var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),openModalRiesgo=_useState30[0],setopenModalRiesgo=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),facilidadesData=_useState32[0],setfacilidadesData=_useState32[1];var _useState33=useState(null),_useState34=_slicedToArray(_useState33,2),recordsFacilidades=_useState34[0],setrecordsFacilidades=_useState34[1];var _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),dataRows=_useState36[0],setdataRows=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),messageNotAvailable=_useState38[0],setmessageNotAvailable=_useState38[1];var _useState39=useState(location.data),_useState40=_slicedToArray(_useState39,2),locationData=_useState40[0],setLocationData=_useState40[1];var history=useHistory();var jsonHonorarios=[{min:0.01,max:10000.01,amountAdd:150.00,porcent:7},{min:10000.00,max:50000.00,amountAdd:200.00,porcent:7},{min:50000.00,max:100000.00,amountAdd:300.00,porcent:7},{min:100000.01,max:250000.00,amountAdd:350.00,porcent:7},{min:250000.01,max:1000000.01,amountAdd:500.00,porcent:7},{min:1000000.01,max:2000000.00,amountAdd:750.00,porcent:7},{min:2000000.01,max:3000000.00,amountAdd:1000.00,porcent:7},{min:3000000.01,max:4000000.00,amountAdd:1500.00,porcent:7},{min:4000000.01,max:5000000.00,amountAdd:2000.00,porcent:7},{min:5000000.01,max:6000000.00,amountAdd:2500.00,porcent:7},{min:6000000.01,max:7000000.00,amountAdd:3000.00,porcent:7},{min:7000000.01,max:8000000.00,amountAdd:3500.00,porcent:7},{min:8000000.01,max:9000000.00,amountAdd:4000.00,porcent:7},{min:9000000.01,max:10000000.00,amountAdd:4500.00,porcent:7}];React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){history.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}initializeData(dataSession);},[!locationData]);function initializeData(dataSession){var _ref,_dataSession$transact;apiServiceBackend.consultGeneralDataPropCred((_ref=(_dataSession$transact=dataSession===null||dataSession===void 0?void 0:dataSession.transactionId)!==null&&_dataSession$transact!==void 0?_dataSession$transact:dataSession===null||dataSession===void 0?void 0:dataSession.transactionId)!==null&&_ref!==void 0?_ref:0).then(function(data){var _data$;var requestId=(_data$=data[0])===null||_data$===void 0?void 0:_data$.requestId;apiServiceBackend.retrieveProposalType().then(function(propuesta){apiServiceBackend.retrieveFacilityType().then(function(facilidad){apiServiceBackend.consultarFacilidades(requestId).then(function(resp){var jsonSet=[];var totales={totalMonto:0,totalFinal:0};var _loop=function _loop(i){var _jsonAdd$,_jsonAdd$2,_facilidad$find,_propuesta$find,_jsonAdd$0$amountAdd,_jsonAdd$3,_jsonAdd$0$max,_jsonAdd$4,_jsonAdd$0$min,_jsonAdd$5,_jsonAdd$0$porcent,_jsonAdd$6,_jsonAdd$7,_jsonAdd$8;var jsonAdd=jsonHonorarios.filter(function(x){return resp[i].amount>=x.min&&resp[i].amount<=x.max;});totales.totalMonto=Number(parseFloat(totales.totalMonto))+Number(resp[i].amount);totales.totalFinal=Number(parseFloat(totales.totalFinal))+Number(parseFloat(((_jsonAdd$=jsonAdd[0])===null||_jsonAdd$===void 0?void 0:_jsonAdd$.amountAdd)+((_jsonAdd$2=jsonAdd[0])===null||_jsonAdd$2===void 0?void 0:_jsonAdd$2.porcent)/100*resp[i].amount).toFixed(2));jsonSet.push({amount:Number(resp[i].amount),facilityTypeId:resp[i].facilityTypeId,facilityTypeName:(_facilidad$find=facilidad.find(function(x){return x.id===resp[i].facilityTypeId;}))===null||_facilidad$find===void 0?void 0:_facilidad$find.description,proposalTypeId:resp[i].proposalTypeId,proposalTypeName:(_propuesta$find=propuesta.find(function(x){return x.id===resp[i].proposalTypeId;}))===null||_propuesta$find===void 0?void 0:_propuesta$find.description,debtor:resp[i].debtor,amountAdd:(_jsonAdd$0$amountAdd=(_jsonAdd$3=jsonAdd[0])===null||_jsonAdd$3===void 0?void 0:_jsonAdd$3.amountAdd)!==null&&_jsonAdd$0$amountAdd!==void 0?_jsonAdd$0$amountAdd:0,max:(_jsonAdd$0$max=(_jsonAdd$4=jsonAdd[0])===null||_jsonAdd$4===void 0?void 0:_jsonAdd$4.max)!==null&&_jsonAdd$0$max!==void 0?_jsonAdd$0$max:0,min:(_jsonAdd$0$min=(_jsonAdd$5=jsonAdd[0])===null||_jsonAdd$5===void 0?void 0:_jsonAdd$5.min)!==null&&_jsonAdd$0$min!==void 0?_jsonAdd$0$min:0,porcent:(_jsonAdd$0$porcent=(_jsonAdd$6=jsonAdd[0])===null||_jsonAdd$6===void 0?void 0:_jsonAdd$6.porcent)!==null&&_jsonAdd$0$porcent!==void 0?_jsonAdd$0$porcent:0,totalAmount:parseFloat(((_jsonAdd$7=jsonAdd[0])===null||_jsonAdd$7===void 0?void 0:_jsonAdd$7.amountAdd)+((_jsonAdd$8=jsonAdd[0])===null||_jsonAdd$8===void 0?void 0:_jsonAdd$8.porcent)/100*resp[i].amount).toFixed(2)});};for(var i=0;i<resp.length;i++){_loop(i);}setrecordsFacilidades(totales);setfacilidadesData(jsonSet.map(function(data,index){var _data$amount,_data$totalAmount;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.facilityTypeName}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"center\"},children:[\"$\",currencyData.formatTable((_data$amount=data.amount)!==null&&_data$amount!==void 0?_data$amount:0)]}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"center\"},children:[\"$\",currencyData.formatTable((_data$totalAmount=data.totalAmount)!==null&&_data$totalAmount!==void 0?_data$totalAmount:0)]})]});}));console.log(jsonSet);});});});});}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(AvForm,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Amount\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Total\")})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[facilidadesData,recordsFacilidades?/*#__PURE__*/_jsxs(\"tr\",{style:estiloTotales,children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Total Montos\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",currencyData.formatTable(recordsFacilidades.totalMonto)]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",currencyData.formatTable(recordsFacilidades.totalFinal)]})})]}):null]})]})})})})})});};export default Honorarios;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/11_DocumentacionLegal/PantallaDetalle/Honorarios.js"],"names":["React","useEffect","useState","withTranslation","Link","Table","Card","CardBody","Pagination","PaginationItem","PaginationLink","CardFooter","Button","Row","Col","ApiServicesDetalleDocumentacion","BpmServices","BackendServices","useLocation","useHistory","url","SweetAlert","AvField","AvForm","AvGroup","Switch","useTranslation","Currency","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","estiloTotales","backgroundColor","textAlign","Honorarios","props","switch1","setswitch1","switch2","setswitch2","switch3","setswitch3","switch4","setswitch4","switch5","setswitch5","switch6","setswitch6","switch7","setswitch7","switch8","setswitch8","switch9","setswitch9","switch10","setswitch10","switch11","setswitch11","switch12","setswitch12","switch13","setswitch13","switch14","setswitch14","t","i18n","currencyData","apiServiceBackend","location","openModalRiesgo","setopenModalRiesgo","facilidadesData","setfacilidadesData","recordsFacilidades","setrecordsFacilidades","dataRows","setdataRows","messageNotAvailable","setmessageNotAvailable","data","locationData","setLocationData","history","jsonHonorarios","min","max","amountAdd","porcent","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","initializeData","consultGeneralDataPropCred","then","requestId","retrieveProposalType","propuesta","retrieveFacilityType","facilidad","consultarFacilidades","resp","jsonSet","totales","totalMonto","totalFinal","i","jsonAdd","filter","x","amount","Number","parseFloat","toFixed","facilityTypeId","facilityTypeName","find","id","description","proposalTypeId","proposalTypeName","debtor","totalAmount","map","index","formatTable","console","log"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from \"react\"\r\nimport { withTranslation } from \"react-i18next\"\r\nimport { Link } from \"react-router-dom\"\r\nimport {\r\n    Table,\r\n    Card,\r\n    CardBody,\r\n    Pagination,\r\n    PaginationItem,\r\n    PaginationLink,\r\n    CardFooter,\r\n    Button,\r\n    Row,\r\n    Col,\r\n} from \"reactstrap\"\r\nimport ApiServicesDetalleDocumentacion from '../../../../services/DocumentacionLegal/ApiServicesDetalleDocumentacion';\r\nimport { BpmServices, BackendServices } from \"../../../../services\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport * as url from \"../../../../helpers/url_helper\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport { AvField, AvForm, AvGroup } from 'availity-reactstrap-validation';\r\nimport Switch from \"react-switch\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport Currency from '../../../../helpers/currency';\r\n\r\nconst Offsymbol = () => {\r\n    return (\r\n        <div\r\n            style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                height: \"100%\",\r\n                fontSize: 12,\r\n                color: \"#fff\",\r\n                paddingRight: 2,\r\n            }}\r\n        >\r\n            {\" \"}\r\n            No\r\n        </div>\r\n    );\r\n};\r\nconst OnSymbol = () => {\r\n    return (\r\n        <div\r\n            style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                height: \"100%\",\r\n                fontSize: 12,\r\n                color: \"#fff\",\r\n                paddingRight: 2,\r\n            }}\r\n        >\r\n            {\" \"}\r\n            Si\r\n        </div>\r\n    );\r\n};\r\nconst estiloTotales = { backgroundColor: \"lightgrey !important\", color: \"black !important\", textAlign: \"center\" }\r\nconst Honorarios = (props) => {\r\n    const [switch1, setswitch1] = useState(false);\r\n    const [switch2, setswitch2] = useState(false);\r\n    const [switch3, setswitch3] = useState(false);\r\n    const [switch4, setswitch4] = useState(false);\r\n    const [switch5, setswitch5] = useState(false);\r\n    const [switch6, setswitch6] = useState(false);\r\n    const [switch7, setswitch7] = useState(false);\r\n    const [switch8, setswitch8] = useState(false);\r\n    const [switch9, setswitch9] = useState(false);\r\n    const [switch10, setswitch10] = useState(false);\r\n    const [switch11, setswitch11] = useState(false);\r\n    const [switch12, setswitch12] = useState(false);\r\n    const [switch13, setswitch13] = useState(false);\r\n    const [switch14, setswitch14] = useState(false);\r\n    const { t, i18n } = useTranslation();\r\n    const currencyData = new Currency();\r\n    const apiServiceBackend = new BackendServices();\r\n    const location = useLocation()\r\n    const [openModalRiesgo, setopenModalRiesgo] = useState(false);\r\n    const [facilidadesData, setfacilidadesData] = useState(null);\r\n    const [recordsFacilidades, setrecordsFacilidades] = useState(null);\r\n    const [dataRows, setdataRows] = useState(null);\r\n    const [messageNotAvailable, setmessageNotAvailable] = useState(false);\r\n    const [locationData, setLocationData] = useState(location.data);\r\n    const history = useHistory();\r\n    const jsonHonorarios = [\r\n        {\r\n            min: 0.01,\r\n            max: 10000.01,\r\n            amountAdd: 150.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 10000.00,\r\n            max: 50000.00,\r\n            amountAdd: 200.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 50000.00,\r\n            max: 100000.00,\r\n            amountAdd: 300.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 100000.01,\r\n            max: 250000.00,\r\n            amountAdd: 350.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 250000.01,\r\n            max: 1000000.01,\r\n            amountAdd: 500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 1000000.01,\r\n            max: 2000000.00,\r\n            amountAdd: 750.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 2000000.01,\r\n            max: 3000000.00,\r\n            amountAdd: 1000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 3000000.01,\r\n            max: 4000000.00,\r\n            amountAdd: 1500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 4000000.01,\r\n            max: 5000000.00,\r\n            amountAdd: 2000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 5000000.01,\r\n            max: 6000000.00,\r\n            amountAdd: 2500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 6000000.01,\r\n            max: 7000000.00,\r\n            amountAdd: 3000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 7000000.01,\r\n            max: 8000000.00,\r\n            amountAdd: 3500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 8000000.01,\r\n            max: 9000000.00,\r\n            amountAdd: 4000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 9000000.01,\r\n            max: 10000000.00,\r\n            amountAdd: 4500.00,\r\n            porcent: 7\r\n        }\r\n    ]\r\n    React.useEffect(() => {\r\n        let dataSession;\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                history.push(url.URL_DASHBOARD);\r\n            } else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                dataSession = location.data;\r\n            }\r\n        } else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n        initializeData(dataSession)\r\n    }, [!locationData]);\r\n    function initializeData(dataSession) {\r\n        apiServiceBackend.consultGeneralDataPropCred(dataSession?.transactionId ?? dataSession?.transactionId ?? 0)\r\n            .then((data) => {\r\n                let requestId = data[0]?.requestId;\r\n                apiServiceBackend.retrieveProposalType()\r\n                    .then((propuesta) => {\r\n                        apiServiceBackend.retrieveFacilityType()\r\n                            .then((facilidad) => {\r\n                                apiServiceBackend.consultarFacilidades(requestId).then(resp => {\r\n                                    let jsonSet = [];\r\n                                    let totales = {\r\n                                        totalMonto: 0,\r\n                                        totalFinal: 0\r\n                                    };\r\n                                    for (let i = 0; i < resp.length; i++) {\r\n                                        let jsonAdd = jsonHonorarios.filter(x => resp[i].amount >= x.min && resp[i].amount <= x.max);\r\n                                        totales.totalMonto = Number(parseFloat(totales.totalMonto)) + Number(resp[i].amount);\r\n                                        totales.totalFinal = Number(parseFloat(totales.totalFinal)) + Number(parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * resp[i].amount)).toFixed(2));\r\n                                        jsonSet.push({\r\n                                            amount: Number(resp[i].amount),\r\n                                            facilityTypeId: resp[i].facilityTypeId,\r\n                                            facilityTypeName: facilidad.find(x => x.id === resp[i].facilityTypeId)?.description,\r\n                                            proposalTypeId: resp[i].proposalTypeId,\r\n                                            proposalTypeName: propuesta.find(x => x.id === resp[i].proposalTypeId)?.description,\r\n                                            debtor: resp[i].debtor,\r\n                                            amountAdd: jsonAdd[0]?.amountAdd ?? 0,\r\n                                            max: jsonAdd[0]?.max ?? 0,\r\n                                            min: jsonAdd[0]?.min ?? 0,\r\n                                            porcent: jsonAdd[0]?.porcent ?? 0,\r\n                                            totalAmount: parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * resp[i].amount)).toFixed(2),\r\n                                        })\r\n                                    }\r\n                                    setrecordsFacilidades(totales)\r\n                                    setfacilidadesData(jsonSet.map((data, index) => (<tr>\r\n                                        <td>{data.facilityTypeName}</td>\r\n                                        <td style={{textAlign: \"center\" }}>${currencyData.formatTable(data.amount ?? 0)}</td>\r\n                                        {/* <td>${currencyData.formatTable(data.min ?? 0)}</td>\r\n                                        <td>${currencyData.formatTable(data.max ?? 0)}</td>\r\n                                        <td>{currencyData.formatTable(data.porcent ?? 0)}%</td> */}\r\n                                        <td style={{textAlign: \"center\" }}>${currencyData.formatTable(data.totalAmount ?? 0)}</td>\r\n                                    </tr>)))\r\n                                    console.log(jsonSet);\r\n                                })\r\n                            });\r\n                    });\r\n            });\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <AvForm>\r\n                <Row>\r\n                    <Col md=\"12\">\r\n                        <div className=\"table-responsive styled-table-div\">\r\n                            <Table className=\"table table-striped table-hover styled-table table\">\r\n                                <thead>\r\n                                    <tr style={{ textAlign: \"center\" }}>\r\n                                        <th>{t(\"Facility Type\")}</th>\r\n                                        <th>{t(\"Amount\")}</th>\r\n                                        <th>{t(\"Total\")}</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {facilidadesData}\r\n                                    {recordsFacilidades ?\r\n                                        <tr style={estiloTotales}>\r\n                                            <td><b>Total Montos</b></td>\r\n                                            <td><b>${currencyData.formatTable(recordsFacilidades.totalMonto)}</b></td>\r\n                                            <td><b>${currencyData.formatTable(recordsFacilidades.totalFinal)}</b></td>\r\n                                        </tr> : null}\r\n                                </tbody>\r\n                            </Table>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </AvForm>\r\n        </React.Fragment>\r\n    );\r\n}\r\nexport default Honorarios;\r\n"]},"metadata":{},"sourceType":"module"}