{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\6_AnalisisCredito\\\\previsualizarAIF.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation, withTranslation } from \"react-i18next\";\nimport PropTypes from 'prop-types';\nimport { Row, Col, Button, Label, Input, Modal, Card, CardBody, CardFooter, InputGroup, CardHeader, Table } from \"reactstrap\";\nimport Switch from \"react-switch\";\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\";\nimport { BackendServices } from \"../../../services\";\nimport { useLocation, useHistory } from 'react-router-dom';\nimport FinancialReportComp from \"./FinancialReportComp\";\nimport { translationHelpers } from \"../../../helpers\";\nimport { Background, ExchangeRisk, FinancialInformation, Projections, Workload } from \"../../../components/InformeFinanciero\";\nimport Guarantees from \"../../../components/InformeFinanciero/background/Guarantees\";\nimport { FormCreditRisk, FormRecommendations } from \"../../../components/InformeFinanciero\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport FinancialReportContent from \"./FinancialReportContent\";\nimport * as url from \"../../../helpers/url_helper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ModalPrevicualizarAIF = props => {\n  _s();\n\n  var _location$data;\n\n  const location = useLocation();\n  console.log(location);\n  const [locationData, setLocationData] = useState((_location$data = location.data) !== null && _location$data !== void 0 ? _location$data : JSON.parse(sessionStorage.getItem('locationData')));\n  const [backendServices, setbackendServices] = useState(new BackendServices());\n  const [t, c, tr] = translationHelpers('translation', 'common', 'translation');\n  const [Opinion, setOpinion] = useState(null);\n  const [Recomendation, setRecomendation] = useState(null);\n  const {\n    isOpen,\n    toggle\n  } = props;\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    if (location.data !== null && location.data !== undefined) {\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\n        //location.data.transactionId = 0;\n        //checkAndCreateProcedure(location.data);\n        history.push(url.URL_DASHBOARD);\n      } else {\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\n        setLocationData(location.data);\n        fetchFinancialReport();\n      }\n    } else {\n      //chequeamos si tenemos guardado en session\n      var result = sessionStorage.getItem('locationData');\n\n      if (result !== undefined && result !== null) {\n        result = JSON.parse(result);\n        setLocationData(result);\n        fetchFinancialReport();\n      }\n    }\n  }, [props.isOpen]);\n\n  async function fetchFinancialReport() {\n    setIsActiveLoading(true);\n    Promise.allSettled([LoadOpinion(), LoadRecomendacion()]).then(() => {\n      setIsActiveLoading(false);\n    }).catch(err => {\n      setIsActiveLoading(false);\n    });\n  }\n\n  function LoadOpinion() {\n    return new Promise(function (resolve, reject) {\n      var _location$data$transa, _location$data2;\n\n      backendServices.consultarDetalleOpinionRiesgoCredito((_location$data$transa = (_location$data2 = location.data) === null || _location$data2 === void 0 ? void 0 : _location$data2.transactionId) !== null && _location$data$transa !== void 0 ? _location$data$transa : locationData.transactionId).then(resp => {\n        let data = resp[0];\n        (data != null || data != undefined) && setOpinion(data);\n        resolve();\n      }).catch(err => {\n        resolve();\n      });\n    });\n  }\n\n  function LoadRecomendacion() {\n    return new Promise(function (resolve, reject) {\n      var _location$data$transa2, _location$data3;\n\n      backendServices.consultarConclusionesRecomendacionesAnalisisFinanciero((_location$data$transa2 = (_location$data3 = location.data) === null || _location$data3 === void 0 ? void 0 : _location$data3.transactionId) !== null && _location$data$transa2 !== void 0 ? _location$data$transa2 : locationData.transactionId).then(resp => {\n        let data = resp[0];\n        (data != null || data != undefined) && setRecomendation(data);\n        resolve();\n      }).catch(err => {\n        resolve();\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    size: \"xl\",\n    isOpen: isOpen,\n    toggle: toggle,\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"card-title\",\n        style: {\n          \"marginRight\": \"10px\"\n        },\n        children: tr(\"Financial Report\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: toggle,\n        \"data-dismiss\": \"modal\",\n        className: \"close\",\n        \"aria-label\": \"Close\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          \"aria-hidden\": \"true\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      style: {\n        backgroundColor: \"#f3f5f7\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"m-0\",\n        children: /*#__PURE__*/_jsxDEV(CardBody, {\n          children: [/*#__PURE__*/_jsxDEV(FinancialReportContent, {\n            preview: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n            active: isActiveLoading,\n            spinner: true,\n            text: t(\"WaitingPlease\"),\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              className: \"mt-4\",\n              children: /*#__PURE__*/_jsxDEV(FormCreditRisk, {\n                preview: true,\n                Opinion: Opinion === null || Opinion === void 0 ? void 0 : Opinion.opinion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              className: \"mt-4\",\n              children: /*#__PURE__*/_jsxDEV(FormRecommendations, {\n                preview: true,\n                strengths: Recomendation === null || Recomendation === void 0 ? void 0 : Recomendation.strengths,\n                weakness: Recomendation === null || Recomendation === void 0 ? void 0 : Recomendation.weakness,\n                conclusion: Recomendation === null || Recomendation === void 0 ? void 0 : Recomendation.conclusion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ModalPrevicualizarAIF, \"Fekz8Vn6RXJgo2uWk4s/+KcS+r8=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = ModalPrevicualizarAIF;\nModalPrevicualizarAIF.propTypes = {\n  isOpen: PropTypes.bool,\n  toggle: PropTypes.func\n};\nexport default ModalPrevicualizarAIF;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModalPrevicualizarAIF\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/6_AnalisisCredito/previsualizarAIF.js"],"names":["React","useEffect","useState","useTranslation","withTranslation","PropTypes","Row","Col","Button","Label","Input","Modal","Card","CardBody","CardFooter","InputGroup","CardHeader","Table","Switch","AvForm","AvField","AvGroup","BackendServices","useLocation","useHistory","FinancialReportComp","translationHelpers","Background","ExchangeRisk","FinancialInformation","Projections","Workload","Guarantees","FormCreditRisk","FormRecommendations","LoadingOverlay","FinancialReportContent","url","ModalPrevicualizarAIF","props","location","console","log","locationData","setLocationData","data","JSON","parse","sessionStorage","getItem","backendServices","setbackendServices","t","c","tr","Opinion","setOpinion","Recomendation","setRecomendation","isOpen","toggle","isActiveLoading","setIsActiveLoading","history","undefined","transactionId","length","push","URL_DASHBOARD","setItem","stringify","fetchFinancialReport","result","Promise","allSettled","LoadOpinion","LoadRecomendacion","then","catch","err","resolve","reject","consultarDetalleOpinionRiesgoCredito","resp","consultarConclusionesRecomendacionesAnalisisFinanciero","backgroundColor","opinion","strengths","weakness","conclusion","propTypes","bool","func"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Label,\r\n    Input,\r\n    Modal,\r\n    Card,\r\n    CardBody,\r\n    CardFooter,\r\n    InputGroup,\r\n    CardHeader,\r\n    Table,\r\n} from \"reactstrap\"\r\nimport Switch from \"react-switch\";\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport { BackendServices } from \"../../../services\";\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport FinancialReportComp from \"./FinancialReportComp\";\r\nimport { translationHelpers } from \"../../../helpers\"\r\nimport { Background, ExchangeRisk, FinancialInformation, Projections, Workload } from \"../../../components/InformeFinanciero\";\r\nimport Guarantees from \"../../../components/InformeFinanciero/background/Guarantees\";\r\nimport { FormCreditRisk, FormRecommendations } from \"../../../components/InformeFinanciero\"\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport FinancialReportContent from \"./FinancialReportContent\";\r\nimport * as url from \"../../../helpers/url_helper\"\r\n\r\n\r\nconst ModalPrevicualizarAIF = (props) => {\r\n\r\n    const location = useLocation();\r\n    console.log(location);\r\n    const [locationData, setLocationData] = useState(location.data ?? JSON.parse(sessionStorage.getItem('locationData')));\r\n    const [backendServices, setbackendServices] = useState(new BackendServices());\r\n\r\n\r\n    const [t, c, tr] = translationHelpers('translation', 'common', 'translation');\r\n\r\n    const [Opinion, setOpinion] = useState(null);\r\n    const [Recomendation, setRecomendation] = useState(null);\r\n\r\n    const { isOpen, toggle } = props;\r\n\r\n    const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                fetchFinancialReport();\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                fetchFinancialReport();\r\n            }\r\n        }\r\n    }, [props.isOpen]);\r\n\r\n    async function fetchFinancialReport() {\r\n        setIsActiveLoading(true);\r\n        Promise.allSettled([\r\n            LoadOpinion(),\r\n            LoadRecomendacion(),\r\n        ]).then(() => {\r\n            setIsActiveLoading(false);\r\n        }).catch(err => {\r\n            setIsActiveLoading(false);\r\n        });\r\n    }\r\n\r\n    function LoadOpinion() {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            backendServices.consultarDetalleOpinionRiesgoCredito(location.data?.transactionId ?? locationData.transactionId).then(resp => {\r\n                let data = resp[0];\r\n                (data != null || data != undefined) && setOpinion(data);\r\n                resolve();\r\n            }).catch(err => {\r\n                resolve();\r\n            });\r\n        })\r\n    }\r\n\r\n    function LoadRecomendacion() {\r\n        return new Promise(function (resolve, reject) {\r\n            backendServices.consultarConclusionesRecomendacionesAnalisisFinanciero(location.data?.transactionId ?? locationData.transactionId).then(resp => {\r\n                let data = resp[0];\r\n                (data != null || data != undefined) && setRecomendation(data);\r\n                resolve();\r\n            }).catch(err => {\r\n                resolve();\r\n            });\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            size=\"xl\"\r\n            isOpen={isOpen}\r\n            toggle={toggle}\r\n            centered={true}>\r\n            <div className=\"modal-header\">\r\n                <h5 className=\"card-title\" style={{ \"marginRight\": \"10px\" }}>{tr(\"Financial Report\")}</h5>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={toggle}\r\n                    data-dismiss=\"modal\"\r\n                    className=\"close\"\r\n                    aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div className=\"\" style={{ backgroundColor: \"#f3f5f7\" }}>\r\n                <Card className=\"m-0\">\r\n\r\n                    <CardBody>\r\n                        {/* <FinancialReportComp\r\n                    customerNumberT24={customerNumberT24}\r\n                    debtorId={debtorId}\r\n\r\n                    client={financialSummary.client}\r\n                    financialStatus={financialSummary.financialStatus}\r\n                    balances={financialSummary.balances}\r\n                    debts={financialSummary.debts}\r\n                    history={financialSummary.history}\r\n                    preview={true}\r\n                />\r\n\r\n                <Col className=\"m-4\">\r\n                    <FinancialInformation preview={true} />\r\n                </Col>\r\n                <Col className=\"m-4\">\r\n                    <ExchangeRisk preview={true} />\r\n                </Col>\r\n\r\n                <Col className=\"m-4\">\r\n                    <Workload preview={true} />\r\n                </Col>\r\n\r\n                <Col className=\"m-4\">\r\n                    <Projections preview={true} />\r\n                </Col>\r\n\r\n                <Col className=\"m-4\">\r\n                    <Background items={background.items}\r\n                        facilities={background.facilities}\r\n                        restructuring={background.restructuring}\r\n                        guarantees={background.guarantees}\r\n                        preview={true}\r\n                    />\r\n                </Col>\r\n                <Col className=\"m-4\">\r\n                    <Guarantees preview={true} />\r\n                </Col> */}\r\n                        <FinancialReportContent\r\n                            preview={true}\r\n                        />\r\n\r\n                        <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n\r\n                            <Col className=\"mt-4\">\r\n                                <FormCreditRisk preview={true} Opinion={Opinion?.opinion} />\r\n                            </Col>\r\n\r\n\r\n                            <Col className=\"mt-4\">\r\n                                <FormRecommendations preview={true} strengths={Recomendation?.strengths} weakness={Recomendation?.weakness} conclusion={Recomendation?.conclusion} />\r\n                            </Col>\r\n                        </LoadingOverlay>\r\n\r\n                        {/* <Row>\r\n                    <Col lg=\"12\" style={{ textAlign: \"right\" }}>\r\n                        <Button color=\"dark\" type=\"button\" style={{ margin: '5px' }} onClick={props.toggle}>\r\n                            <i className=\"mdi mdi mdi-cancel mid-12px\"></i>{\" \"}{c(\"Cancel\")}\r\n                        </Button>\r\n                    </Col>\r\n                </Row> */}\r\n                    </CardBody>\r\n                </Card>\r\n\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nModalPrevicualizarAIF.propTypes = {\r\n    isOpen: PropTypes.bool,\r\n    toggle: PropTypes.func\r\n};\r\n\r\nexport default ModalPrevicualizarAIF;\r\n"]},"metadata":{},"sourceType":"module"}