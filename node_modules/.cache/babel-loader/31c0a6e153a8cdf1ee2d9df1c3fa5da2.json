{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{formatCurrency,translationHelpers}from'../../../../helpers';import{Table,Card,CardBody,Col}from\"reactstrap\";import React,{useEffect,useState}from\"react\";import{BackendServices,CoreServices,BpmServices}from\"../../../../services\";import{useTranslation}from'react-i18next';import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ExposicionCorporativaClientes=function ExposicionCorporativaClientes(props){var location=useLocation();var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var coreServices=new CoreServices();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),dataRows=_React$useState2[0],setdataRows=_React$useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),CorporateExposure=_useState4[0],setCorporateExposure=_useState4[1];var _React$useState3=React.useState(props.customerNumberT24),_React$useState4=_slicedToArray(_React$useState3,2),customerNumberT24=_React$useState4[0],setcustomerNumberT24=_React$useState4[1];useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}getCoporateExhibitionClient(dataSession);},[]);function getCoporateExhibitionClient(dataSession){// getCorporateExhibitionByClients\nvar backendServices=new BackendServices();backendServices.consultPrincipalDebtor(dataSession.transactionId).then(function(data){if(data!==undefined){coreServices.getCorporateExhibitionByClients(data.customerNumberT24).then(function(resp){if(resp===undefined){return;}setCorporateExposure(resp.length>0?resp:null);setdataRows(resp.map(function(item,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",width:\"30%\",children:item.clinteId}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"text-end\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"text-end\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"text-end\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"text-end\"})]},'row-'+index),item.data.map(function(item2,index2){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Type\"),scope:\"row\",width:\"30%\"}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"ApprovedRisk\"),scope:\"row\",className:\"text-start\",children:formatCurrency('$',item2.approved,0)}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"ProposedRisk\"),scope:\"row\",className:\"text-start\",children:formatCurrency('$',item2.balance,0)}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Variation\"),scope:\"row\",className:\"text-start\",children:formatCurrency('$',item2.proposal,0)}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Variation\"),scope:\"row\",className:\"text-start\",children:formatCurrency('$',item2.variation,0)})]},'subrow-'+index2);})]});}));});}});}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(Col,{md:\"12\",className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-right\",children:t(\"Type\")}),/*#__PURE__*/_jsx(\"th\",{className:\"table-right\",children:t(\"ApprovedRisk\")}),/*#__PURE__*/_jsx(\"th\",{className:\"table-right\",children:t(\"Balnce\")}),/*#__PURE__*/_jsx(\"th\",{className:\"table-right\",children:t(\"ProposedRisk\")}),/*#__PURE__*/_jsx(\"th\",{className:\"table-right\",children:t(\"Variation\")})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[dataRows,/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",width:\"30%\",children:t(\"Total\")}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"table-right\",children:formatCurrency('$',CorporateExposure===null||CorporateExposure===void 0?void 0:CorporateExposure.reduce(function(acu,crr){var _acu$data$reduce,_acu$data,_crr$data;var data1=(_acu$data$reduce=(_acu$data=acu.data)===null||_acu$data===void 0?void 0:_acu$data.reduce(function(acu2,crr2){var _acu2$approved;return((_acu2$approved=acu2.approved)!==null&&_acu2$approved!==void 0?_acu2$approved:acu2)+crr2.approved;}))!==null&&_acu$data$reduce!==void 0?_acu$data$reduce:acu;var data2=(_crr$data=crr.data)===null||_crr$data===void 0?void 0:_crr$data.reduce(function(acu2,crr2){var _acu2$approved2;return((_acu2$approved2=acu2.approved)!==null&&_acu2$approved2!==void 0?_acu2$approved2:acu2)+crr2.approved;});return data1+data2;}),0)}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"table-right\",children:formatCurrency('$',CorporateExposure===null||CorporateExposure===void 0?void 0:CorporateExposure.reduce(function(acu,crr){var _acu$data$reduce2,_acu$data2,_crr$data2;var data1=(_acu$data$reduce2=(_acu$data2=acu.data)===null||_acu$data2===void 0?void 0:_acu$data2.reduce(function(acu2,crr2){var _acu2$balance;return((_acu2$balance=acu2.balance)!==null&&_acu2$balance!==void 0?_acu2$balance:acu2)+crr2.balance;}))!==null&&_acu$data$reduce2!==void 0?_acu$data$reduce2:acu;var data2=(_crr$data2=crr.data)===null||_crr$data2===void 0?void 0:_crr$data2.reduce(function(acu2,crr2){var _acu2$balance2;return((_acu2$balance2=acu2.balance)!==null&&_acu2$balance2!==void 0?_acu2$balance2:acu2)+crr2.balance;});return data1+data2;}),0)}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"table-right\",children:formatCurrency('$',CorporateExposure===null||CorporateExposure===void 0?void 0:CorporateExposure.reduce(function(acu,crr){var _acu$data$reduce3,_acu$data3,_crr$data3;var data1=(_acu$data$reduce3=(_acu$data3=acu.data)===null||_acu$data3===void 0?void 0:_acu$data3.reduce(function(acu2,crr2){var _acu2$variation;return((_acu2$variation=acu2.variation)!==null&&_acu2$variation!==void 0?_acu2$variation:acu2)+crr2.variation;}))!==null&&_acu$data$reduce3!==void 0?_acu$data$reduce3:acu;var data2=(_crr$data3=crr.data)===null||_crr$data3===void 0?void 0:_crr$data3.reduce(function(acu2,crr2){var _acu2$variation2;return((_acu2$variation2=acu2.variation)!==null&&_acu2$variation2!==void 0?_acu2$variation2:acu2)+crr2.variation;});return data1+data2;}),0)}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",className:\"table-right\",children:formatCurrency('$',CorporateExposure===null||CorporateExposure===void 0?void 0:CorporateExposure.reduce(function(acu,crr){var _acu$data$reduce4,_acu$data4,_crr$data4;var data1=(_acu$data$reduce4=(_acu$data4=acu.data)===null||_acu$data4===void 0?void 0:_acu$data4.reduce(function(acu2,crr2){var _acu2$proposal;return((_acu2$proposal=acu2.proposal)!==null&&_acu2$proposal!==void 0?_acu2$proposal:acu2)+crr2.proposal;}))!==null&&_acu$data$reduce4!==void 0?_acu$data$reduce4:acu;var data2=(_crr$data4=crr.data)===null||_crr$data4===void 0?void 0:_crr$data4.reduce(function(acu2,crr2){var _acu2$proposal2;return((_acu2$proposal2=acu2.proposal)!==null&&_acu2$proposal2!==void 0?_acu2$proposal2:acu2)+crr2.proposal;});return data1+data2;}),0)})]})]})]})})]})})});};export default ExposicionCorporativaClientes;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/ExposicionCorporativaCliente.js"],"names":["formatCurrency","translationHelpers","Table","Card","CardBody","Col","React","useEffect","useState","BackendServices","CoreServices","BpmServices","useTranslation","useLocation","useHistory","url","ExposicionCorporativaClientes","props","location","history","locationData","setLocationData","coreServices","t","i18n","dataRows","setdataRows","CorporateExposure","setCorporateExposure","customerNumberT24","setcustomerNumberT24","dataSession","data","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","getCoporateExhibitionClient","backendServices","consultPrincipalDebtor","then","getCorporateExhibitionByClients","resp","map","item","index","clinteId","item2","index2","approved","balance","proposal","variation","title","reduce","acu","crr","data1","acu2","crr2","data2"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { formatCurrency, translationHelpers } from '../../../../helpers';\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Col,\r\n} from \"reactstrap\"\r\nimport React, { useEffect, useState } from \"react\"\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../../services\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport * as url from \"../../../../helpers/url_helper\"\r\n\r\nconst ExposicionCorporativaClientes = (props) => {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [locationData, setLocationData] = useState(null);\r\n  const coreServices = new CoreServices();\r\n  const { t, i18n } = useTranslation();\r\n  const [dataRows, setdataRows] = React.useState(null);\r\n  const [CorporateExposure, setCorporateExposure] = useState(null);\r\n  const [customerNumberT24, setcustomerNumberT24] = React.useState(props.customerNumberT24);\r\n  useEffect(() => {\r\n\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n\r\n\r\n    getCoporateExhibitionClient(dataSession);\r\n  }, []);\r\n  function getCoporateExhibitionClient(dataSession) {\r\n    // getCorporateExhibitionByClients\r\n    const backendServices = new BackendServices();\r\n    backendServices.consultPrincipalDebtor(dataSession.transactionId)\r\n      .then((data) => {\r\n        if (data !== undefined) {\r\n          coreServices.getCorporateExhibitionByClients(data.customerNumberT24).then(resp => {\r\n            if (resp === undefined) {\r\n              return;\r\n            }\r\n            setCorporateExposure(resp.length > 0 ? resp : null);\r\n            setdataRows(resp.map((item, index) => (\r\n              <>\r\n                <tr key={'row-' + index}>\r\n                  <th scope=\"row\" width=\"30%\">{item.clinteId}</th>\r\n                  <th scope=\"row\" className=\"text-end\"></th>\r\n                  <th scope=\"row\" className=\"text-end\"></th>\r\n                  <th scope=\"row\" className=\"text-end\"></th>\r\n                  <th scope=\"row\" className=\"text-end\"></th>\r\n                </tr>\r\n                {item.data.map((item2, index2) => (\r\n                  <tr key={'subrow-' + index2}>\r\n                    <td data-label={t(\"Type\")} scope=\"row\" width=\"30%\"></td>\r\n                    <td data-label={t(\"ApprovedRisk\")} scope=\"row\" className=\"text-start\">{formatCurrency('$', item2.approved, 0)}</td>\r\n                    <td data-label={t(\"ProposedRisk\")} scope=\"row\" className=\"text-start\">{formatCurrency('$', item2.balance, 0)}</td>\r\n                    <td data-label={t(\"Variation\")} scope=\"row\" className=\"text-start\">{formatCurrency('$', item2.proposal, 0)}</td>\r\n                    <td data-label={t(\"Variation\")} scope=\"row\" className=\"text-start\">{formatCurrency('$', item2.variation, 0)}</td>\r\n                  </tr>\r\n                ))}\r\n              </>\r\n            )\r\n            ));\r\n          });\r\n        }\r\n      });\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <Card>\r\n        <CardBody>\r\n          <h5 className=\"card-title\">{props.title}</h5>\r\n          <p className=\"card-title-desc\">\r\n          </p>\r\n          <Col md=\"12\" className=\"table-responsive styled-table-div\">\r\n            <Table className=\"table table-striped table-hover styled-table table\" >\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"table-right\">{t(\"Type\")}</th>\r\n                  <th className=\"table-right\">{t(\"ApprovedRisk\")}</th>\r\n                  <th className=\"table-right\">{t(\"Balnce\")}</th>\r\n                  <th className=\"table-right\">{t(\"ProposedRisk\")}</th>\r\n                  <th className=\"table-right\">{t(\"Variation\")}</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {dataRows}\r\n                <tr>\r\n                  <th scope=\"row\" width=\"30%\">{t(\"Total\")}</th>\r\n                  <th scope=\"row\" className=\"table-right\">{formatCurrency('$', CorporateExposure?.reduce((acu, crr) => {\r\n                    let data1 = (acu.data?.reduce((acu2, crr2) => ((acu2.approved ?? acu2) + crr2.approved)) ?? acu);\r\n                    let data2 = crr.data?.reduce((acu2, crr2) => ((acu2.approved ?? acu2) + crr2.approved));\r\n                    return (data1 + data2)\r\n                  }), 0)}</th>\r\n                  <th scope=\"row\" className=\"table-right\">{formatCurrency('$', CorporateExposure?.reduce((acu, crr) => {\r\n                    let data1 = (acu.data?.reduce((acu2, crr2) => ((acu2.balance ?? acu2) + crr2.balance)) ?? acu);\r\n                    let data2 = crr.data?.reduce((acu2, crr2) => ((acu2.balance ?? acu2) + crr2.balance));\r\n                    return (data1 + data2)\r\n                  }), 0)}</th>\r\n                  <th scope=\"row\" className=\"table-right\">{formatCurrency('$', CorporateExposure?.reduce((acu, crr) => {\r\n                    let data1 = (acu.data?.reduce((acu2, crr2) => ((acu2.variation ?? acu2) + crr2.variation)) ?? acu);\r\n                    let data2 = crr.data?.reduce((acu2, crr2) => ((acu2.variation ?? acu2) + crr2.variation));\r\n                    return (data1 + data2)\r\n                  }), 0)}</th>\r\n                  <th scope=\"row\" className=\"table-right\">{formatCurrency('$', CorporateExposure?.reduce((acu, crr) => {\r\n                    let data1 = (acu.data?.reduce((acu2, crr2) => ((acu2.proposal ?? acu2) + crr2.proposal)) ?? acu);\r\n                    let data2 = crr.data?.reduce((acu2, crr2) => ((acu2.proposal ?? acu2) + crr2.proposal));\r\n                    return (data1 + data2)\r\n                  }), 0)}</th>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n          </Col>\r\n        </CardBody>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n};\r\nExposicionCorporativaClientes.propTypes = {\r\n  title: PropTypes.string,\r\n  customerNumberT24: PropTypes.string,\r\n};\r\nexport default ExposicionCorporativaClientes;\r\n"]},"metadata":{},"sourceType":"module"}