{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{withTranslation}from\"react-i18next\";import{Link}from\"react-router-dom\";import{Table,Card,CardBody,Pagination,PaginationItem,PaginationLink,CardFooter,Button,Row,Col}from\"reactstrap\";import ApiServicesDetalleDocumentacion from'../../../../services/DocumentacionLegal/ApiServicesDetalleDocumentacion';import{BpmServices,BackendServices}from\"../../../../services\";import{useLocation,useHistory}from\"react-router-dom\";import*as url from\"../../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResultadosBusqueda=function ResultadosBusqueda(props){var apiServiceBackend=new BackendServices();var location=useLocation();/**\r\n   * All useState\r\n   */var _useState=useState(null),_useState2=_slicedToArray(_useState,2),dataRows=_useState2[0],setdataRows=_useState2[1];/**\r\n   * End All useSate\r\n   */var jsonCond=['rotary','commercialLoan','multipleRotary','rotaryNumber','overdraft','transfer','bail','trust','agroPawn','naturalBail','legalBail','crossedLegalBail','crossedNaturalBail','promiseLetter','privateRecord','trustRecord','loanGuarantees','fiduciaryLine','prefinance'];var _useState3=useState(location.data),_useState4=_slicedToArray(_useState3,2),locationData=_useState4[0],setLocationData=_useState4[1];var history=useHistory();React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}console.log('location');locationData&&searchData();},[!locationData]);function capitalizarPrimeraLetra(str){return str.charAt(0).toUpperCase()+str.slice(1);}function searchData(){Promise.allSettled([apiServiceBackend.getLegalDocsFunction(),apiServiceBackend.getLegalDocumentation(locationData.transactionId)]).then(function(resp){var _resp=_slicedToArray(resp,2),LegalDocsFunction=_resp[0].value,LegalDocumentation=_resp[1].value;setdataRows(drawRows(LegalDocsFunction.filter(function(docLegalMap){return!!LegalDocumentation.find(function(LegalDocumentationFind){return LegalDocumentationFind.legalDocumentId==docLegalMap.id;});})));}).catch(function(err){});/*apiServiceBackend.consultarDocumentacionLegal(location.data.transactionId).then(async data => {\r\n      delete data.status;\r\n      delete data.transactId;\r\n      delete data.legalDocumentationId;\r\n      data = Object.entries(data).filter(([key, value]) => value).map(([key, value]) => key);\r\n      let docLegal = await props.results.map(($$, index) => {\r\n        if (data.some($$ => $$ === jsonCond[index]))\r\n          return { ...$$, legal: jsonCond[index] }\r\n      }).filter(Boolean);\r\n      setdataRows(docLegal.map((data) => (\r\n        <tr key={data.id}>\r\n\r\n          <td>{data.comment}</td>\r\n          <td>\r\n            <Button color=\"link\" className=\"btn btn-link\" title={props.t(\"View\")}> <i className=\"mdi mdi-file-search-outline mdi-24px\"></i>  </Button>\r\n          </td>\r\n\r\n        </tr>)\r\n      ));\r\n    });*/}function drawRows(docLegal){return docLegal.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:capitalizarPrimeraLetra(data.documentName)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Link,{to:\"#\",title:props.t(\"View\"),children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-file-search-outline mdi-24px\"}),\"  \"]})})]},data.id);});}return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\"}),/*#__PURE__*/_jsx(\"tbody\",{children:dataRows})]})})}),/*#__PURE__*/_jsx(Col,{lg:\"12\"})]});};/*ResultadosBusqueda.propTypes = {\r\n  results: PropTypes.array.isRequired, //Resultado de la busqueda\r\n}*/export default withTranslation()(ResultadosBusqueda);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/12_Abogado/PantallaDetalle/ResultadosBusqueda.js"],"names":["React","useEffect","useState","withTranslation","Link","Table","Card","CardBody","Pagination","PaginationItem","PaginationLink","CardFooter","Button","Row","Col","ApiServicesDetalleDocumentacion","BpmServices","BackendServices","useLocation","useHistory","url","ResultadosBusqueda","props","apiServiceBackend","location","dataRows","setdataRows","jsonCond","data","locationData","setLocationData","history","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","console","log","searchData","capitalizarPrimeraLetra","str","charAt","toUpperCase","slice","Promise","allSettled","getLegalDocsFunction","getLegalDocumentation","then","resp","LegalDocsFunction","value","LegalDocumentation","drawRows","filter","docLegalMap","find","LegalDocumentationFind","legalDocumentId","id","catch","err","docLegal","map","documentName","t"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from \"react\"\r\n\r\nimport { withTranslation } from \"react-i18next\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Pagination,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  CardFooter,\r\n  Button,\r\n  Row,\r\n  Col,\r\n} from \"reactstrap\"\r\nimport ApiServicesDetalleDocumentacion from '../../../../services/DocumentacionLegal/ApiServicesDetalleDocumentacion';\r\nimport { BpmServices, BackendServices } from \"../../../../services\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport * as url from \"../../../../helpers/url_helper\"\r\n\r\n\r\nconst ResultadosBusqueda = (props) => {\r\n\r\n  const apiServiceBackend = new BackendServices();\r\n  const location = useLocation()\r\n\r\n  /**\r\n   * All useState\r\n   */\r\n  const [dataRows, setdataRows] = useState(null);\r\n\r\n  /**\r\n   * End All useSate\r\n   */\r\n\r\n  const jsonCond = [\r\n    'rotary',\r\n    'commercialLoan',\r\n    'multipleRotary',\r\n    'rotaryNumber',\r\n    'overdraft',\r\n    'transfer',\r\n    'bail',\r\n    'trust',\r\n    'agroPawn',\r\n    'naturalBail',\r\n    'legalBail',\r\n    'crossedLegalBail',\r\n    'crossedNaturalBail',\r\n    'promiseLetter',\r\n    'privateRecord',\r\n    'trustRecord',\r\n    'loanGuarantees',\r\n    'fiduciaryLine',\r\n    'prefinance',\r\n  ]\r\n\r\n  const [locationData, setLocationData] = useState(location.data);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n\r\n    let dataSession;\r\n\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      } else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    } else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n    console.log('location');\r\n    locationData && searchData();\r\n\r\n  }, [!locationData]);\r\n\r\n  function capitalizarPrimeraLetra(str) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n\r\n  function searchData() {\r\n    Promise.allSettled([\r\n      apiServiceBackend.getLegalDocsFunction(),\r\n      apiServiceBackend.getLegalDocumentation(locationData.transactionId),\r\n    ]).then(resp => {\r\n      const [{ value: LegalDocsFunction }, { value: LegalDocumentation }] = resp;\r\n\r\n      setdataRows(drawRows(LegalDocsFunction.filter(docLegalMap => !!LegalDocumentation.find(LegalDocumentationFind => LegalDocumentationFind.legalDocumentId == docLegalMap.id))));\r\n\r\n    }).catch(err => {\r\n\r\n    });\r\n\r\n    /*apiServiceBackend.consultarDocumentacionLegal(location.data.transactionId).then(async data => {\r\n      delete data.status;\r\n      delete data.transactId;\r\n      delete data.legalDocumentationId;\r\n      data = Object.entries(data).filter(([key, value]) => value).map(([key, value]) => key);\r\n      let docLegal = await props.results.map(($$, index) => {\r\n        if (data.some($$ => $$ === jsonCond[index]))\r\n          return { ...$$, legal: jsonCond[index] }\r\n      }).filter(Boolean);\r\n      setdataRows(docLegal.map((data) => (\r\n        <tr key={data.id}>\r\n\r\n          <td>{data.comment}</td>\r\n          <td>\r\n            <Button color=\"link\" className=\"btn btn-link\" title={props.t(\"View\")}> <i className=\"mdi mdi-file-search-outline mdi-24px\"></i>  </Button>\r\n          </td>\r\n\r\n        </tr>)\r\n      ));\r\n    });*/\r\n  }\r\n\r\n  function drawRows(docLegal) {\r\n    return docLegal.map((data) => (\r\n      <tr key={data.id} >\r\n\r\n        <td>{/*JSONCompare[index]*/}{capitalizarPrimeraLetra(data.documentName)}</td>\r\n        <td>\r\n          <Link to={\"#\"} title={props.t(\"View\")}> <i className=\"mdi mdi-file-search-outline mdi-24px\"></i>  </Link>\r\n        </td>\r\n\r\n      </tr >))\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <Row>\r\n      <Col lg=\"12\">\r\n        <div className=\"table-responsive\">\r\n          <Table className=\"table mb-0\">\r\n            <thead className=\"table-light\">\r\n            </thead>\r\n            <tbody>\r\n              {dataRows}\r\n            </tbody>\r\n          </Table>\r\n\r\n        </div>\r\n      </Col>\r\n      <Col lg=\"12\">\r\n\r\n      </Col>\r\n    </Row>\r\n\r\n\r\n  );\r\n}\r\n\r\n/*ResultadosBusqueda.propTypes = {\r\n  results: PropTypes.array.isRequired, //Resultado de la busqueda\r\n}*/\r\n\r\nexport default (withTranslation()(ResultadosBusqueda));\r\n"]},"metadata":{},"sourceType":"module"}