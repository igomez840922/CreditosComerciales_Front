{"ast":null,"code":"import { PropuestaCredito } from \"../../models\";\nimport ApiService from \"../ApiService\";\nimport BackendServices from \"../BackendServices/Services\";\nimport BpmServices from \"../BpmServices/Services\";\nexport default class ServicioPropuestaCredito extends ApiService {\n  constructor() {\n    super();\n    this.backend = new BackendServices();\n    this.bpm = new BpmServices();\n  }\n\n  guardarDatosGenerales(instanceId, requestId, values) {\n    values.transactId = Number(values.transactId);\n    console.log('guardarDatosGenerales()', values);\n\n    if (!requestId) {\n      return this.backend.newDataGeneralPropCred(values).then(result => {\n        if (result.status && result.status.statusCode === \"200\") {\n          // Actualizar Variable en BPM de requestId\n          this.bpm.updatevariables(instanceId, {\n            requestId: result.requestId\n          });\n        }\n\n        return result;\n      });\n    } else {\n      values.requestId = requestId;\n      return this.backend.updateDataGeneralPropCred(values);\n    }\n  }\n\n  actualizarDatosGenerales(transactId, values) {\n    console.log('actualizarDatosGenerales()', transactId);\n    return this.backend.updateDataGeneralPropCred(values);\n  }\n\n  async consultarDatosGenerales(requestId) {\n    const data = await this.backend.consultGeneralDataPropCred(requestId);\n    console.log('consultarDatosGenerales()', data);\n\n    if (data !== undefined) {\n      if (requestId) {\n        return data.find(record => record.requestId === requestId);\n      } else {\n        // return last array element\n        return data[data.length - 1];\n      }\n    }\n  }\n\n  consultarDocumentosPropuestaCredito(criteria) {\n    return this.sendCoreRequest('propuestacredito/documentos', 'POST', criteria).then(data => {\n      // parse results\n      return PropuestaCredito.fromJsonArray(data);\n    });\n  }\n\n}","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/services/PropuestaCredito/PropuestaCredito.js"],"names":["PropuestaCredito","ApiService","BackendServices","BpmServices","ServicioPropuestaCredito","constructor","backend","bpm","guardarDatosGenerales","instanceId","requestId","values","transactId","Number","console","log","newDataGeneralPropCred","then","result","status","statusCode","updatevariables","updateDataGeneralPropCred","actualizarDatosGenerales","consultarDatosGenerales","data","consultGeneralDataPropCred","undefined","find","record","length","consultarDocumentosPropuestaCredito","criteria","sendCoreRequest","fromJsonArray"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,cAAjC;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AAGA,eAAe,MAAMC,wBAAN,SAAuCH,UAAvC,CAAkD;AAE/DI,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,OAAL,GAAe,IAAIJ,eAAJ,EAAf;AACA,SAAKK,GAAL,GAAW,IAAIJ,WAAJ,EAAX;AACD;;AAEDK,EAAAA,qBAAqB,CAACC,UAAD,EAAaC,SAAb,EAAwBC,MAAxB,EAAgC;AACnDA,IAAAA,MAAM,CAACC,UAAP,GAAoBC,MAAM,CAACF,MAAM,CAACC,UAAR,CAA1B;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCJ,MAAvC;;AACA,QAAI,CAACD,SAAL,EAAgB;AACd,aAAO,KAAKJ,OAAL,CAAaU,sBAAb,CAAoCL,MAApC,EACJM,IADI,CACEC,MAAD,IAAY;AAChB,YAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcC,UAAd,KAA6B,KAAlD,EAAyD;AACvD;AACA,eAAKb,GAAL,CAASc,eAAT,CAAyBZ,UAAzB,EAAqC;AACnCC,YAAAA,SAAS,EAAEQ,MAAM,CAACR;AADiB,WAArC;AAGD;;AACD,eAAOQ,MAAP;AACD,OATI,CAAP;AAUD,KAXD,MAYK;AACHP,MAAAA,MAAM,CAACD,SAAP,GAAmBA,SAAnB;AACA,aAAO,KAAKJ,OAAL,CAAagB,yBAAb,CAAuCX,MAAvC,CAAP;AACD;AACF;;AAEDY,EAAAA,wBAAwB,CAACX,UAAD,EAAaD,MAAb,EAAqB;AAC3CG,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CH,UAA1C;AACA,WAAO,KAAKN,OAAL,CAAagB,yBAAb,CAAuCX,MAAvC,CAAP;AACD;;AAE4B,QAAvBa,uBAAuB,CAACd,SAAD,EAAY;AACvC,UAAMe,IAAI,GAAG,MAAM,KAAKnB,OAAL,CAAaoB,0BAAb,CAAwChB,SAAxC,CAAnB;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCU,IAAzC;;AACA,QAAIA,IAAI,KAAKE,SAAb,EAAwB;AACtB,UAAIjB,SAAJ,EAAe;AACb,eAAOe,IAAI,CAACG,IAAL,CAAUC,MAAM,IAAIA,MAAM,CAACnB,SAAP,KAAqBA,SAAzC,CAAP;AACD,OAFD,MAGK;AACH;AACA,eAAOe,IAAI,CAACA,IAAI,CAACK,MAAL,GAAc,CAAf,CAAX;AACD;AACF;AAEF;;AAGDC,EAAAA,mCAAmC,CAACC,QAAD,EAAW;AAC5C,WAAO,KAAKC,eAAL,CAAqB,6BAArB,EAAoD,MAApD,EAA4DD,QAA5D,EACJf,IADI,CACEQ,IAAD,IAAU;AACd;AACA,aAAOzB,gBAAgB,CAACkC,aAAjB,CAA+BT,IAA/B,CAAP;AACD,KAJI,CAAP;AAKD;;AAxD8D","sourcesContent":["import { PropuestaCredito } from \"../../models\";\r\nimport ApiService from \"../ApiService\";\r\nimport BackendServices from \"../BackendServices/Services\";\r\nimport BpmServices from \"../BpmServices/Services\";\r\n\r\n\r\nexport default class ServicioPropuestaCredito extends ApiService {\r\n\r\n  constructor() {\r\n    super();\r\n    this.backend = new BackendServices();\r\n    this.bpm = new BpmServices();\r\n  }\r\n\r\n  guardarDatosGenerales(instanceId, requestId, values) {\r\n    values.transactId = Number(values.transactId);\r\n    console.log('guardarDatosGenerales()', values);\r\n    if (!requestId) {\r\n      return this.backend.newDataGeneralPropCred(values)\r\n        .then((result) => {\r\n          if (result.status && result.status.statusCode === \"200\") {\r\n            // Actualizar Variable en BPM de requestId\r\n            this.bpm.updatevariables(instanceId, {\r\n              requestId: result.requestId\r\n            });\r\n          }\r\n          return result;\r\n        });\r\n    }\r\n    else {\r\n      values.requestId = requestId;\r\n      return this.backend.updateDataGeneralPropCred(values);\r\n    }\r\n  }\r\n\r\n  actualizarDatosGenerales(transactId, values) {\r\n    console.log('actualizarDatosGenerales()', transactId);\r\n    return this.backend.updateDataGeneralPropCred(values);\r\n  }\r\n\r\n  async consultarDatosGenerales(requestId) {\r\n    const data = await this.backend.consultGeneralDataPropCred(requestId);\r\n    console.log('consultarDatosGenerales()', data);\r\n    if (data !== undefined) {\r\n      if (requestId) {\r\n        return data.find(record => record.requestId === requestId);\r\n      }\r\n      else {\r\n        // return last array element\r\n        return data[data.length - 1];\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  consultarDocumentosPropuestaCredito(criteria) {\r\n    return this.sendCoreRequest('propuestacredito/documentos', 'POST', criteria)\r\n      .then((data) => {\r\n        // parse results\r\n        return PropuestaCredito.fromJsonArray(data);\r\n      });\r\n  }\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}