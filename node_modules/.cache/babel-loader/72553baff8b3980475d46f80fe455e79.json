{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*ReinforcedManagementReport = Lista de Informe Reforzado*/import React,{useState}from\"react\";import{BackendServices}from\"../../../../services\";import{useLocation}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Row,Col,Card,CardBody,CardHeader,Button,Label,Table}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";//i18n\nimport{withTranslation}from\"react-i18next\";import ModalBeneficiosFideicomiso from\"./ModalBeneficiosFideicomiso\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BeneficiarioSecundario=function BeneficiarioSecundario(props){var apiBack=new BackendServices();var location=useLocation();var _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),dataLocation=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),botonValidation=_useState4[0],setbotonValidation=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModalFideicomitente=_useState6[0],setShowModalFideicomitente=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),type=_useState8[0],settype=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),successSave_dlg=_useState10[0],setsuccessSave_dlg=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),error_dlg=_useState12[0],seterror_dlg=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),error_msg=_useState14[0],seterror_msg=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),info_dlg=_useState16[0],setinfo_dlg=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),info_msg=_useState18[0],setinfo_msg=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),dynamic_title=_useState20[0],setdynamic_title=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),confirm_alert=_useState22[0],setconfirm_alert=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),success_dlg=_useState24[0],setsuccess_dlg=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),dynamic_description=_useState26[0],setdynamic_description=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),dataFideicomitenteRows=_useState28[0],setdataFideicomitenteRows=_useState28[1];var _useState29=useState({\"transactId\":0,\"firstName\":\"\",\"secondName\":\"\",\"firstLastName\":\"\",\"secondLastName\":\"\",\"nationality\":\"\",\"personType\":\"\",\"documentType\":\"\",\"documentNumber\":\"\",\"address\":\"\",\"telephone\":\"\",\"relationship\":\"\",\"percentage\":0}),_useState30=_slicedToArray(_useState29,2),dataSet=_useState30[0],setdataSet=_useState30[1];React.useEffect(function(){// Read Api Service data\ninitializeData();},[]);function initializeData(){apiBack.consultarListaBeneficiarioSecundario(dataLocation.transactionId).then(function(resp){if(resp!=undefined||resp.length>0){setdataFideicomitenteRows(resp.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.firstName+\" \"+data.secondName+\" \"+data.firstLastName+\" \"+data.secondLastName}),/*#__PURE__*/_jsx(\"td\",{children:data.nationality}),/*#__PURE__*/_jsx(\"td\",{children:data.personType}),/*#__PURE__*/_jsx(\"td\",{children:data.documentType}),/*#__PURE__*/_jsx(\"td\",{children:data.documentNumber}),/*#__PURE__*/_jsx(\"td\",{children:data.address}),/*#__PURE__*/_jsx(\"td\",{children:data.telephone}),/*#__PURE__*/_jsx(\"td\",{children:data.relationship}),/*#__PURE__*/_jsx(\"td\",{children:data.percentage}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){editarDatosClientes(data);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){EliminarCliente(data);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]},data.beneficiaryId);}));}else{setdataFideicomitenteRows(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"9\",style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"h5\",{children:props.t(\"NoData\")})})},1));}});}function editarDatosClientes(data){settype(\"editar\");setdataSet(data);setbotonValidation(true);toggleShowModalFideicomitente();}function EliminarCliente(data){setdataSet(data);setconfirm_alert(true);}function gestionDatos(values,tipo){values.transactId=Number(dataLocation.transactionId);values.telephone=Number(values.telephone);var dataSend={\"transactId\":Number(dataLocation.transactionId),\"firstName\":values.firstName?values.firstName:\" \",\"secondName\":values.secondName?values.secondName:\" \",\"firstLastName\":values.firstLastName?values.firstLastName:\" \",\"secondLastName\":values.secondLastName?values.secondLastName:\" \",\"nationality\":values.codigoPais.label,\"personType\":values.personType,\"documentType\":values.documentType,\"documentNumber\":values.documentNumber,\"address\":values.address,\"telephone\":values.telephone,\"relationship\":values.relationship,\"percentage\":Number(values.percentage)};if(tipo==\"guardar\"){apiBack.nuevaListaBeneficiarioSecundario(dataSend).then(function(resp){if(resp!==null&&resp!==undefined){toggleShowModalFideicomitente();}else{toggleShowModalFideicomitente();seterror_dlg(true);}}).catch(function(error){seterror_dlg(true);});}else{dataSend.beneficiaryId=dataSet.beneficiaryId;apiBack.actualizarListaBeneficiarioSecundario(dataSend).then(function(resp){if(resp!==null&&resp!==undefined){toggleShowModalFideicomitente();}else{toggleShowModalFideicomitente();seterror_dlg(true);}}).catch(function(error){seterror_dlg(true);});}}//abrimos modal para adjunar archivos\nfunction toggleShowModalFideicomitente(){setShowModalFideicomitente(!showModalFideicomitente);removeBodyCss();}function removeBodyCss(){document.body.classList.add(\"no_padding\");}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{lg:\"12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:props.t(\"SecondaryBeneficiary\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Name\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Nationality\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Documenttype\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"PersonType\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Documentnumber\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Address\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Phone\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Relationship\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Percent\")}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Button,{type:\"button\",color:\"link\",className:\"btn btn-link\",onClick:function onClick(){toggleShowModalFideicomitente();settype(\"guardar\");setdataSet({\"transactId\":0,\"firstName\":\"\",\"secondName\":\"\",\"firstLastName\":\"\",\"secondLastName\":\"\",\"nationality\":\"\",\"personType\":\"\",\"documentType\":\"\",\"documentNumber\":\"\",\"address\":\"\",\"telephone\":\"\",\"relationship\":\"\",\"percentage\":0});},title:props.t(\"Add\"),children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-box-multiple-outline mdi-24px\"})]})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataFideicomitenteRows})]})]})}),/*#__PURE__*/_jsx(ModalBeneficiosFideicomiso,{tipo:type,dataSet:dataSet,botones:botonValidation,gestionDatos:gestionDatos,isOpen:showModalFideicomitente,toggle:function toggle(){toggleShowModalFideicomitente();}}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:props.t(\"SuccessDialog\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);initializeData();},children:props.t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:props.t(\"ErrorDialog\"),onConfirm:function onConfirm(){seterror_dlg(false);initializeData();},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:props.t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:props.t(\"Yesdeleteit\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){apiBack.eliminarListaBeneficiarioSecundario(dataLocation.transactionId,dataSet.beneficiaryId).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(true);}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(true);});},onCancel:function onCancel(){return setconfirm_alert(false);},children:props.t(\"Youwontbeabletorevertthis\")}):null]});};export default withTranslation()(BeneficiarioSecundario);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/10_Fideicomiso/AsignarNumeroFideicomiso/BeneficiarioSecundario.js"],"names":["React","useState","BackendServices","useLocation","SweetAlert","Row","Col","Card","CardBody","CardHeader","Button","Label","Table","AvForm","AvField","withTranslation","ModalBeneficiosFideicomiso","BeneficiarioSecundario","props","apiBack","location","data","dataLocation","setData","botonValidation","setbotonValidation","showModalFideicomitente","setShowModalFideicomitente","type","settype","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","info_dlg","setinfo_dlg","info_msg","setinfo_msg","dynamic_title","setdynamic_title","confirm_alert","setconfirm_alert","success_dlg","setsuccess_dlg","dynamic_description","setdynamic_description","dataFideicomitenteRows","setdataFideicomitenteRows","dataSet","setdataSet","useEffect","initializeData","consultarListaBeneficiarioSecundario","transactionId","then","resp","undefined","length","map","firstName","secondName","firstLastName","secondLastName","nationality","personType","documentType","documentNumber","address","telephone","relationship","percentage","textAlign","editarDatosClientes","EliminarCliente","beneficiaryId","t","toggleShowModalFideicomitente","gestionDatos","values","tipo","transactId","Number","dataSend","codigoPais","label","nuevaListaBeneficiarioSecundario","catch","error","actualizarListaBeneficiarioSecundario","removeBodyCss","document","body","classList","add","eliminarListaBeneficiarioSecundario","statusCode"],"mappings":"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","sourcesContent":["/*ReinforcedManagementReport = Lista de Informe Reforzado*/\r\nimport React, { useState } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport { BackendServices } from \"../../../../services\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Button,\r\n  Label,\r\n  Table\r\n} from \"reactstrap\";\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\";\r\n//i18n\r\nimport { withTranslation } from \"react-i18next\";\r\nimport ModalBeneficiosFideicomiso from \"./ModalBeneficiosFideicomiso\";\r\nconst BeneficiarioSecundario = (props) => {\r\n  const apiBack = new BackendServices();\r\n  const location = useLocation()\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [botonValidation, setbotonValidation] = useState(true);\r\n  const [showModalFideicomitente, setShowModalFideicomitente] = useState(false);\r\n  const [type, settype] = useState(\"\");\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [info_dlg, setinfo_dlg] = useState(false)\r\n  const [info_msg, setinfo_msg] = useState(\"\")\r\n  const [dynamic_title, setdynamic_title] = useState(\"\")\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [success_dlg, setsuccess_dlg] = useState(false)\r\n  const [dynamic_description, setdynamic_description] = useState(\"\")\r\n  const [dataFideicomitenteRows, setdataFideicomitenteRows] = useState(null)\r\n  const [dataSet, setdataSet] = useState({\r\n    \"transactId\": 0,\r\n    \"firstName\": \"\",\r\n    \"secondName\": \"\",\r\n    \"firstLastName\": \"\",\r\n    \"secondLastName\": \"\",\r\n    \"nationality\": \"\",\r\n    \"personType\": \"\",\r\n    \"documentType\": \"\",\r\n    \"documentNumber\": \"\",\r\n    \"address\": \"\",\r\n    \"telephone\": \"\",\r\n    \"relationship\": \"\",\r\n    \"percentage\": 0\r\n  });\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    initializeData();\r\n  }, []);\r\n  function initializeData() {\r\n    apiBack.consultarListaBeneficiarioSecundario(dataLocation.transactionId).then(resp => {\r\n      if (resp != undefined || resp.length > 0) {\r\n        setdataFideicomitenteRows(resp.map((data) => (\r\n          <tr key={data.beneficiaryId}>\r\n            <td>{data.firstName+\" \"+data.secondName+\" \"+data.firstLastName+\" \"+data.secondLastName}</td>\r\n            <td>{data.nationality}</td>\r\n            <td>{data.personType}</td>\r\n            <td>{data.documentType}</td>\r\n            <td>{data.documentNumber}</td>\r\n            <td>{data.address}</td>\r\n            <td>{data.telephone}</td>\r\n            <td>{data.relationship}</td>\r\n            <td>{data.percentage}</td>\r\n            <td style={{ textAlign: \"right\" }}>\r\n              <Button type=\"button\" color=\"link\" onClick={(resp) => { editarDatosClientes(data) }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n              <Button type=\"button\" color=\"link\" onClick={(resp) => { EliminarCliente(data) }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n            </td>\r\n          </tr>)\r\n        ));\r\n      } else {\r\n        setdataFideicomitenteRows(\r\n          <tr key={1}>\r\n            <td colSpan=\"9\" style={{ textAlign: 'center' }}><h5>{props.t(\"NoData\")}</h5></td>\r\n          </tr>);\r\n      }\r\n    })\r\n  }\r\n  function editarDatosClientes(data) {\r\n    settype(\"editar\")\r\n    setdataSet(data)\r\n    setbotonValidation(true);\r\n    toggleShowModalFideicomitente()\r\n  }\r\n  function EliminarCliente(data) {\r\n    setdataSet(data)\r\n    setconfirm_alert(true);\r\n  }\r\n  function gestionDatos(values, tipo) {\r\n    values.transactId = Number(dataLocation.transactionId);\r\n    values.telephone = Number(values.telephone);\r\n    let dataSend={\r\n      \"transactId\":Number(dataLocation.transactionId),\r\n      \"firstName\":values.firstName?values.firstName:\" \",\r\n      \"secondName\":values.secondName?values.secondName:\" \",\r\n      \"firstLastName\":values.firstLastName?values.firstLastName:\" \",\r\n      \"secondLastName\":values.secondLastName?values.secondLastName:\" \",\r\n      \"nationality\":values.codigoPais.label,\r\n      \"personType\":values.personType,\r\n      \"documentType\":values.documentType,\r\n      \"documentNumber\":values.documentNumber,\r\n      \"address\":values.address,\r\n      \"telephone\":values.telephone,\r\n      \"relationship\":values.relationship,\r\n      \"percentage\":Number(values.percentage)\r\n  }\r\n    if (tipo == \"guardar\") {\r\n      apiBack.nuevaListaBeneficiarioSecundario(dataSend).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          toggleShowModalFideicomitente();\r\n        } else {\r\n          toggleShowModalFideicomitente();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(error => {\r\n        seterror_dlg(true);\r\n      })\r\n    } else {\r\n      dataSend.beneficiaryId = dataSet.beneficiaryId;\r\n      apiBack.actualizarListaBeneficiarioSecundario(dataSend).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          toggleShowModalFideicomitente();\r\n        } else {\r\n          toggleShowModalFideicomitente();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(error => {\r\n        seterror_dlg(true);\r\n      })\r\n    }\r\n  }\r\n  //abrimos modal para adjunar archivos\r\n  function toggleShowModalFideicomitente() {\r\n    setShowModalFideicomitente(!showModalFideicomitente);\r\n    removeBodyCss()\r\n  }\r\n  function removeBodyCss() {\r\n    document.body.classList.add(\"no_padding\")\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <Row>\r\n        <Col lg=\"12\">\r\n          <p className=\"card-title-desc\"></p>\r\n          <h4 className=\"card-title\">{props.t(\"SecondaryBeneficiary\")}</h4>\r\n          <p className=\"card-title-desc\"></p>\r\n          <Table className=\"table mb-0\">\r\n            <thead className=\"table-light\">\r\n              <tr>\r\n                <th>{props.t(\"Name\")}</th>\r\n                <th>{props.t(\"Nationality\")}</th>\r\n                <th>{props.t(\"Documenttype\")}</th>\r\n                <th>{props.t(\"PersonType\")}</th>\r\n                <th>{props.t(\"Documentnumber\")}</th>\r\n                <th>{props.t(\"Address\")}</th>\r\n                <th>{props.t(\"Phone\")}</th>\r\n                <th>{props.t(\"Relationship\")}</th>\r\n                <th>{props.t(\"Percent\")}</th>\r\n                <th style={{ textAlign: \"right\" }}>\r\n                  <Button type=\"button\" color=\"link\" className=\"btn btn-link\" onClick={() => {\r\n                    toggleShowModalFideicomitente(); settype(\"guardar\"); setdataSet({\r\n                      \"transactId\": 0,\r\n                      \"firstName\": \"\",\r\n                      \"secondName\": \"\",\r\n                      \"firstLastName\": \"\",\r\n                      \"secondLastName\": \"\",\r\n                      \"nationality\": \"\",\r\n                      \"personType\": \"\",\r\n                      \"documentType\": \"\",\r\n                      \"documentNumber\": \"\",\r\n                      \"address\": \"\",\r\n                      \"telephone\": \"\",\r\n                      \"relationship\": \"\",\r\n                      \"percentage\": 0\r\n                    })\r\n                  }} title={props.t(\"Add\")}> <i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i>\r\n                  </Button>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {dataFideicomitenteRows}\r\n            </tbody>\r\n          </Table>\r\n        </Col>\r\n      </Row>\r\n      <ModalBeneficiosFideicomiso tipo={type} dataSet={dataSet} botones={botonValidation} gestionDatos={gestionDatos} isOpen={showModalFideicomitente} toggle={() => { toggleShowModalFideicomitente() }} />\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={props.t(\"SuccessDialog\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {props.t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={props.t(\"ErrorDialog\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={props.t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={props.t(\"Yesdeleteit\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            apiBack.eliminarListaBeneficiarioSecundario(dataLocation.transactionId, dataSet.beneficiaryId).then(resp => {\r\n              if (resp.statusCode == \"500\") {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(true)\r\n              } else {\r\n                setconfirm_alert(false)\r\n                setsuccessSave_dlg(true)\r\n              }\r\n            }).catch(error => {\r\n              setconfirm_alert(false)\r\n              seterror_dlg(true)\r\n            })\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {props.t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n}\r\nexport default (withTranslation()(BeneficiarioSecundario))\r\n"]},"metadata":{},"sourceType":"module"}