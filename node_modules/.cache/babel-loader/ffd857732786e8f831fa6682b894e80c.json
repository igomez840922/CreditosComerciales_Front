{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\4_InformeGestionReforzado\\\\FormularioIGR\\\\Secciones\\\\ModalInfoAccionistas.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useTranslation, withTranslation } from \"react-i18next\";\nimport PropTypes from 'prop-types';\nimport { Row, Col, Button, Label, Input, Modal, Card, CardBody, CardFooter } from \"reactstrap\";\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\";\nimport { CoreServices } from \"../../../../../services\";\nimport ApiServiceBackend from \"../../../../../services/BackendServices/Services\";\nimport Select from \"react-select\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModalInfoAccionistas = /*#__PURE__*/React.forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [paises, setPaises] = useState([]);\n  const [sumaParticipacion, setsumaParticipacion] = useState(0);\n  const [sumaParticipacionMessage, setsumaParticipacionMessage] = useState(false);\n  const [identificationType, setidentificationType] = useState(\"1\"); //1-Juridico, 2-Persona\n\n  const [tipo, setTipo] = useState(null);\n  const [cambio, setcambio] = useState(1);\n  const [identificationTypeList, setIdentificationTypeList] = useState([]); // Submitimos formulario para busqueda de clientes\n\n  const personTypeData = [{\n    label: t(\"Legal\"),\n    value: \"1\"\n  }, {\n    label: t(\"Natural\"),\n    value: \"2\"\n  }];\n\n  function handleSubmit(event, errors, values) {\n    if (sumaParticipacionMessage) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (errors.length > 0) {\n      return;\n    }\n\n    if (props.tipo == \"guardar\") {\n      props.addAccionist(values, props.tipo);\n    } else {\n      values.shareholderId = props.dataAcciones.shareholderId;\n      props.addAccionist(values, props.tipo);\n    }\n  }\n\n  React.useEffect(() => {\n    // Read Api Service data\n    console.log(props);\n    cargarPaises();\n\n    if (props.tipo != \"guardar\") {\n      setidentificationType(props.dataAcciones.personType);\n    }\n\n    if (props.dataGeneralIA != null) {\n      setsumaParticipacion(0);\n\n      if (props.tipo == \"guardar\") {\n        let sumaTotal = 0;\n\n        for (let i = 0; i < props.dataGeneralIA.length; i++) {\n          sumaTotal = sumaTotal + props.dataGeneralIA[i].participation;\n        }\n\n        setsumaParticipacion(sumaTotal);\n      } else {\n        let sumaTotal = 0;\n\n        for (let i = 0; i < props.dataGeneralIA.length; i++) {\n          if (props.dataGeneralIA[i].personId != props.dataAcciones.personId) {\n            sumaTotal = sumaTotal + props.dataGeneralIA[i].participation;\n          }\n        }\n\n        setsumaParticipacion(sumaTotal);\n      }\n    }\n  }, [props.isOpen]);\n\n  function cargarPaises() {\n    const api = new CoreServices();\n    api.getPaisesCatalogo().then(response => {\n      if (response === null) {\n        return;\n      }\n\n      let json = [];\n\n      for (let i = 0; i < response.Records.length; i++) {\n        json.push({\n          label: response.Records[i][\"Description\"],\n          value: response.Records[i][\"Code\"]\n        });\n      }\n\n      const optionGroup1 = [{\n        label: t(\"Selectacountry\"),\n        options: json\n      }];\n      setPaises(json);\n      setcambio(null);\n      setcambio(2);\n    });\n    const apiServiceBackend = new ApiServiceBackend();\n    apiServiceBackend.consultarCatalogoTipoIdentificacion().then(data => {\n      if (data !== null && data !== undefined) {\n        let json = [];\n\n        for (let i = 0; i < data.length; i++) {\n          json.push({\n            label: t(data[i][\"description\"]),\n            value: data[i][\"id\"]\n          });\n        }\n        /*const optionGroup1 = [\r\n          {\r\n            label: t(\"ID Type\"),\r\n            options: json,\r\n          },\r\n        ];*/\n\n\n        setIdentificationTypeList(json);\n      }\n    }).catch(error => {\n      console.error('api error: ', error);\n    });\n  } // validamos que el porcentaje de la participacion no sea mayor a 100\n\n\n  function validationParticipation(value) {\n    let sumaFinal = parseFloat(value) + parseFloat(sumaParticipacion);\n\n    if (parseFloat(sumaFinal) > 100) {\n      setsumaParticipacionMessage(true);\n    } else {\n      setsumaParticipacionMessage(false);\n    }\n  }\n\n  function check(e) {\n    let tecla = document.all ? e.keyCode : e.which; //Tecla de retroceso para borrar, siempre la permite\n\n    if (tecla === 45) {\n      e.preventDefault();\n      return true;\n    }\n\n    return false;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    size: \"md\",\n    isOpen: props.isOpen,\n    toggle: props.toggle,\n    centered: true,\n    children: /*#__PURE__*/_jsxDEV(AvForm, {\n      id: \"frmSearch\",\n      className: \"needs-validation\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: props.dataAcciones.name + \" \" + props.dataAcciones.secondName + \" \" + props.dataAcciones.lastName + \" \" + props.dataAcciones.secondSurname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: props.toggle,\n          \"data-dismiss\": \"modal\",\n          className: \"close\",\n          \"aria-label\": \"Close\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            \"aria-hidden\": \"true\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-body\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"name\",\n                children: [t(\"Participation\"), \" \", t(\"available\"), \" \", 100 - sumaParticipacion, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                className: \"form-control\",\n                type: \"number\",\n                onKeyPress: e => {\n                  return check(e);\n                },\n                min: 0,\n                max: \"100\",\n                name: \"participation\",\n                id: \"participation\",\n                onChange: e => {\n                  validationParticipation(e.target.value);\n                },\n                value: props.dataAcciones.participation,\n                validate: {\n                  required: {\n                    value: true,\n                    errorMessage: t(\"Required Field\")\n                  },\n                  number: {\n                    value: true,\n                    errorMessage: t(\"InvalidField\")\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this), sumaParticipacionMessage ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-error-parrafo\",\n                children: t(\"Thepercentageexceeds100%\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"name\",\n                children: t(\"YearsExprience\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                className: \"form-control\",\n                type: \"number\",\n                name: \"yearsExprience\",\n                value: props.dataAcciones.yearsExperience,\n                id: \"yearsExprience\",\n                validate: {\n                  required: {\n                    value: true,\n                    errorMessage: t(\"Required Field\")\n                  },\n                  number: {\n                    value: true,\n                    errorMessage: t(\"InvalidField\")\n                  },\n                  min: {\n                    value: 0,\n                    errorMessage: t(\"InvalidField\")\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"danger\",\n          style: {\n            margin: '5px 0px'\n          },\n          type: \"button\",\n          onClick: props.toggle,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"mdi mdi mdi-cancel mid-12px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), \" \", t(\"Cancel\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), props.botones ? /*#__PURE__*/_jsxDEV(Button, {\n          id: \"btnSearch\",\n          color: \"success\",\n          type: \"submit\",\n          style: {\n            margin: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"mdi mdi-content-save mdi-12px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this), \" \", \" \", props.tipo == \"guardar\" ? t(\"Save\") : t(\"Save\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}, \"4gS7/BRD34N8OercP8SCJtVx1rs=\", false, function () {\n  return [useTranslation];\n}));\n_c2 = ModalInfoAccionistas;\nModalInfoAccionistas.propTypes = {\n  isOpen: PropTypes.bool,\n  toggle: PropTypes.func,\n  onSelectClient: PropTypes.func.isRequired\n};\nexport default withTranslation()(ModalInfoAccionistas);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ModalInfoAccionistas$React.forwardRef\");\n$RefreshReg$(_c2, \"ModalInfoAccionistas\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalInfoAccionistas.js"],"names":["React","useState","useTranslation","withTranslation","PropTypes","Row","Col","Button","Label","Input","Modal","Card","CardBody","CardFooter","AvForm","AvField","AvGroup","CoreServices","ApiServiceBackend","Select","ModalInfoAccionistas","forwardRef","props","ref","t","i18n","paises","setPaises","sumaParticipacion","setsumaParticipacion","sumaParticipacionMessage","setsumaParticipacionMessage","identificationType","setidentificationType","tipo","setTipo","cambio","setcambio","identificationTypeList","setIdentificationTypeList","personTypeData","label","value","handleSubmit","event","errors","values","preventDefault","length","addAccionist","shareholderId","dataAcciones","useEffect","console","log","cargarPaises","personType","dataGeneralIA","sumaTotal","i","participation","personId","isOpen","api","getPaisesCatalogo","then","response","json","Records","push","optionGroup1","options","apiServiceBackend","consultarCatalogoTipoIdentificacion","data","undefined","catch","error","validationParticipation","sumaFinal","parseFloat","check","e","tecla","document","all","keyCode","which","toggle","name","secondName","lastName","secondSurname","target","required","errorMessage","number","yearsExperience","min","margin","botones","propTypes","bool","func","onSelectClient","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  Modal,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport { CoreServices } from \"../../../../../services\";\r\nimport ApiServiceBackend from \"../../../../../services/BackendServices/Services\";\r\nimport Select from \"react-select\";\r\n\r\nconst ModalInfoAccionistas = React.forwardRef((props, ref) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [paises, setPaises] = useState([]);\r\n  const [sumaParticipacion, setsumaParticipacion] = useState(0);\r\n  const [sumaParticipacionMessage, setsumaParticipacionMessage] = useState(false);\r\n  const [identificationType, setidentificationType] = useState(\"1\");//1-Juridico, 2-Persona\r\n  const [tipo, setTipo] = useState(null);\r\n  const [cambio, setcambio] = useState(1);\r\n  const [identificationTypeList, setIdentificationTypeList] = useState([]);\r\n  // Submitimos formulario para busqueda de clientes\r\n  const personTypeData = [{ label: t(\"Legal\"), value: \"1\" }, { label: t(\"Natural\"), value: \"2\" }]\r\n  function handleSubmit(event, errors, values) {\r\n    if (sumaParticipacionMessage) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    if (props.tipo == \"guardar\") {\r\n      props.addAccionist(values, props.tipo);\r\n    } else {\r\n      values.shareholderId = props.dataAcciones.shareholderId;\r\n      props.addAccionist(values, props.tipo);\r\n    }\r\n  }\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    console.log(props);\r\n    cargarPaises()\r\n    if (props.tipo != \"guardar\") {\r\n      setidentificationType(props.dataAcciones.personType)\r\n    }\r\n    if (props.dataGeneralIA != null) {\r\n      setsumaParticipacion(0);\r\n      if (props.tipo == \"guardar\") {\r\n        let sumaTotal = 0;\r\n        for (let i = 0; i < props.dataGeneralIA.length; i++) {\r\n          sumaTotal = sumaTotal + props.dataGeneralIA[i].participation;\r\n        }\r\n        setsumaParticipacion(sumaTotal);\r\n      } else {\r\n        let sumaTotal = 0;\r\n        for (let i = 0; i < props.dataGeneralIA.length; i++) {\r\n          if (props.dataGeneralIA[i].personId != props.dataAcciones.personId) {\r\n            sumaTotal = sumaTotal + props.dataGeneralIA[i].participation;\r\n          }\r\n        }\r\n        setsumaParticipacion(sumaTotal);\r\n      }\r\n    }\r\n  }, [props.isOpen]);\r\n  function cargarPaises() {\r\n    const api = new CoreServices();\r\n    api.getPaisesCatalogo()\r\n      .then(response => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.Records.length; i++) {\r\n          json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n        }\r\n        const optionGroup1 = [\r\n          {\r\n            label: t(\"Selectacountry\"),\r\n            options: json,\r\n          },\r\n\r\n        ];\r\n        setPaises(json);\r\n        setcambio(null)\r\n        setcambio(2)\r\n      });\r\n    const apiServiceBackend = new ApiServiceBackend();\r\n    apiServiceBackend.consultarCatalogoTipoIdentificacion()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"description\"]), value: data[i][\"id\"] })\r\n          }\r\n          /*const optionGroup1 = [\r\n            {\r\n              label: t(\"ID Type\"),\r\n              options: json,\r\n            },\r\n          ];*/\r\n          setIdentificationTypeList(json)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  // validamos que el porcentaje de la participacion no sea mayor a 100\r\n  function validationParticipation(value) {\r\n    let sumaFinal = parseFloat(value) + parseFloat(sumaParticipacion);\r\n    if (parseFloat(sumaFinal) > 100) {\r\n      setsumaParticipacionMessage(true);\r\n    } else {\r\n      setsumaParticipacionMessage(false)\r\n    }\r\n  }\r\n\r\n  function check(e) {\r\n    let tecla = (document.all) ? e.keyCode : e.which;\r\n    //Tecla de retroceso para borrar, siempre la permite\r\n    if (tecla === 45) {\r\n      e.preventDefault();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      size=\"md\"\r\n      isOpen={props.isOpen}\r\n      toggle={props.toggle}\r\n      centered={true}>\r\n      <AvForm id=\"frmSearch\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n        <div className=\"modal-header\">\r\n          <h5 className=\"card-title\">\r\n            {props.dataAcciones.name + \" \" + props.dataAcciones.secondName + \" \" + props.dataAcciones.lastName + \" \" + props.dataAcciones.secondSurname}\r\n          </h5>\r\n          {/* <h5 className=\"card-title float-right\" style={{ marginRight: '15px' }}>\r\n          {props.dataAcciones.clientDocumentId}\r\n        </h5> */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={props.toggle}\r\n            data-dismiss=\"modal\"\r\n            className=\"close\"\r\n            aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-body\">\r\n\r\n          <Row>\r\n            <Col md=\"12\">\r\n              <div className=\"mb-3\">\r\n                <Label htmlFor=\"name\">{t(\"Participation\")} {t(\"available\")} {100 - sumaParticipacion}%</Label>\r\n                <AvField\r\n                  className=\"form-control\"\r\n                  type=\"number\"\r\n                  onKeyPress={(e) => { return check(e) }}\r\n                  min={0}\r\n                  max=\"100\"\r\n                  name=\"participation\"\r\n                  id=\"participation\"\r\n                  onChange={(e) => { validationParticipation(e.target.value) }}\r\n                  value={props.dataAcciones.participation}\r\n                  validate={{\r\n                    required: { value: true, errorMessage: t(\"Required Field\") },\r\n                    number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                  }}\r\n                />\r\n                {sumaParticipacionMessage ?\r\n                  <p className=\"message-error-parrafo\">{t(\"Thepercentageexceeds100%\")}</p>\r\n                  : null}\r\n              </div>\r\n            </Col>\r\n            <Col md=\"12\">\r\n              <div className=\"mb-3\">\r\n                <Label htmlFor=\"name\">{t(\"YearsExprience\")}</Label>\r\n                <AvField\r\n                  className=\"form-control\"\r\n                  type=\"number\"\r\n                  name=\"yearsExprience\"\r\n                  value={props.dataAcciones.yearsExperience}\r\n                  id=\"yearsExprience\"\r\n                  validate={{\r\n                    required: { value: true, errorMessage: t(\"Required Field\") },\r\n                    number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                    min: { value: 0, errorMessage: t(\"InvalidField\") }\r\n                  }}\r\n                />\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={props.toggle}>\r\n            <i className=\"mdi mdi mdi-cancel mid-12px\"></i>{\" \"}{t(\"Cancel\")}\r\n          </Button>\r\n          {props.botones ?\r\n            <Button id=\"btnSearch\" color=\"success\" type=\"submit\" style={{ margin: '5px' }}>\r\n              <i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n              {\" \"} {props.tipo == \"guardar\" ? t(\"Save\") : t(\"Save\")}\r\n            </Button>\r\n            : null}\r\n        </div>\r\n      </AvForm>\r\n    </Modal>\r\n  );\r\n});\r\n\r\nModalInfoAccionistas.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  toggle: PropTypes.func,\r\n  onSelectClient: PropTypes.func.isRequired\r\n};\r\n\r\nexport default (withTranslation()(ModalInfoAccionistas));\r\n"]},"metadata":{},"sourceType":"module"}