{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{Row,Col,Card,CardBody,Button,Label}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import ApiServicesCommon from\"../../../../../services/Common/ApiServicesCommon\";import{BackendServices,CoreServices}from\"../../../../../services\";import Select from\"react-select\";import Switch from\"react-switch\";import Breadcrumb from\"../../../../../components/Common/Breadcrumb\";import{withTranslation}from\"react-i18next\";import{Link,useHistory,useLocation}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import Currency from\"../../../../../helpers/currency\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Offsymbol=function Offsymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"No\"]});};var OnSymbol=function OnSymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"Si\"]});};var PantallaBusqueda=function PantallaBusqueda(props){var _dataGeneral$revision,_dataGeneral$dueDate,_dataGeneral$limitDat,_dataGeneral$amount,_dataGeneral$maxTotal,_dataGeneral$modified,_dataLocation$facilit,_dataLocation$transac;var currencyData=new Currency();var history=useHistory();var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),successSave_dlg2=_useState2[0],setsuccessSave_dlg2=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error_dlg=_useState4[0],seterror_dlg=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error_msg=_useState6[0],seterror_msg=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),dataLocation=_useState8[0],setdataLocation=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showResults=_useState10[0],setShowResults=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),dataList=_useState12[0],setDataList=_useState12[1];var backendServices=new BackendServices();var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];var _useState15=useState(\"nuevo\"),_useState16=_slicedToArray(_useState15,2),typeGarantia=_useState16[0],settypeGarantia=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),displayClienteModal=_useState18[0],setDisplayClienteModal=_useState18[1];var _useState19=useState({\"transactId\":0,\"lineId\":\"\",\"revisionFrequency\":\"\",\"dueDate\":\"2022-03-09\",\"limitDate\":\"2022-03-09\",\"amount\":0,\"maxTotal\":0,\"modifiedAmount\":0,\"status\":true}),_useState20=_slicedToArray(_useState19,2),dataGeneral=_useState20[0],setdataGeneral=_useState20[1];var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;useEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){location.data.transactionId=0;}else{var _location$data;sessionStorage.setItem('locationData',JSON.stringify(location.data));if((_location$data=location.data)===null||_location$data===void 0?void 0:_location$data.dataGeneral){setdataGeneral(location.data.dataGeneral);settypeGarantia(\"editar\");}setdataLocation(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){var _result;result=JSON.parse(result);if((_result=result)===null||_result===void 0?void 0:_result.dataGeneral){setdataGeneral(result.dataGeneral);settypeGarantia(\"editar\");}setdataLocation(result);}}},[]);function handleSubmit(event,errors,values){var _values$amount,_values$maxTotal,_values$modifiedAmoun;event.preventDefault();if(errors.length>0){return;}var datosJson={\"transactId\":Number(dataLocation.transactionId),\"lineId\":dataGeneral.lineId,\"revisionFrequency\":values.revisionFrequency,\"dueDate\":values.dueDate,\"limitDate\":values.limitDate,\"amount\":Number(currencyData.getRealValue((_values$amount=values===null||values===void 0?void 0:values.amount)!==null&&_values$amount!==void 0?_values$amount:0)),\"maxTotal\":Number(currencyData.getRealValue((_values$maxTotal=values===null||values===void 0?void 0:values.maxTotal)!==null&&_values$maxTotal!==void 0?_values$maxTotal:0)),\"modifiedAmount\":Number(currencyData.getRealValue((_values$modifiedAmoun=values===null||values===void 0?void 0:values.modifiedAmount)!==null&&_values$modifiedAmoun!==void 0?_values$modifiedAmoun:0)),\"status\":true};backendServices.updateCreditLine(datosJson).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg2(true);}else{seterror_dlg(true);}}).catch(function(err){});}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Datos Generales\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(AvForm,{id:\"frmGarantiasMuebles\",className:\"needs-validation\",onSubmit:handleSubmit,autoComplete:\"off\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"Frecuebnciarevi\",children:t(\"Line Number or Limit\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"revisionFrequency\",value:(_dataGeneral$revision=dataGeneral===null||dataGeneral===void 0?void 0:dataGeneral.revisionFrequency)!==null&&_dataGeneral$revision!==void 0?_dataGeneral$revision:\"\",id:\"revisionFrequency\",title:t(\"Mensual\")})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"DueDate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"dueDate\",type:\"date\",value:(_dataGeneral$dueDate=dataGeneral===null||dataGeneral===void 0?void 0:dataGeneral.dueDate)!==null&&_dataGeneral$dueDate!==void 0?_dataGeneral$dueDate:\"\",id:\"dueDate\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Deadline\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"limitDate\",type:\"date\",value:(_dataGeneral$limitDat=dataGeneral===null||dataGeneral===void 0?void 0:dataGeneral.limitDate)!==null&&_dataGeneral$limitDat!==void 0?_dataGeneral$limitDat:\"\",id:\"limitDate\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"Monto\",children:t(\"Amount\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"amount\",value:currencyData.format((_dataGeneral$amount=dataGeneral===null||dataGeneral===void 0?void 0:dataGeneral.amount)!==null&&_dataGeneral$amount!==void 0?_dataGeneral$amount:0),id:\"amount\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},title:t(\"\")})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"Totmaximo\",children:t(\"Total Maximum\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"maxTotal\",value:currencyData.format((_dataGeneral$maxTotal=dataGeneral===null||dataGeneral===void 0?void 0:dataGeneral.maxTotal)!==null&&_dataGeneral$maxTotal!==void 0?_dataGeneral$maxTotal:0),id:\"maxTotal\",title:t(\"\"),pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"MontoModificado\",children:t(\"Modified Amount\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"modifiedAmount\",value:currencyData.format((_dataGeneral$modified=dataGeneral===null||dataGeneral===void 0?void 0:dataGeneral.modifiedAmount)!==null&&_dataGeneral$modified!==void 0?_dataGeneral$modified:0),id:\"modifiedAmount\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},title:t(\"\")})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:12,style:{textAlign:\"right\",marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(Link,{to:{pathname:'/creditocomercial/garantias/',data:{facilityId:(_dataLocation$facilit=dataLocation===null||dataLocation===void 0?void 0:dataLocation.facilityId)!==null&&_dataLocation$facilit!==void 0?_dataLocation$facilit:0,transactionId:(_dataLocation$transac=dataLocation===null||dataLocation===void 0?void 0:dataLocation.transactionId)!==null&&_dataLocation$transac!==void 0?_dataLocation$transac:0}},children:/*#__PURE__*/_jsxs(Button,{id:\"btnNew\",color:\"danger\",type:\"button\",style:{margin:\"5px\"},onClick:props.toggle,\"data-dismiss\":\"modal\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]})}),/*#__PURE__*/_jsxs(Button,{id:\"btnSearch\",type:\"submit\",color:\"success\",style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",\" \",t(\"Edit\")]})]})})]}),error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){seterror_dlg(false);},children:error_msg}):null,successSave_dlg2?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){var _dataLocation$facilit2,_dataLocation$transac2;setsuccessSave_dlg2(false);history.push({pathname:'/creditocomercial/garantias/',data:{facilityId:(_dataLocation$facilit2=dataLocation===null||dataLocation===void 0?void 0:dataLocation.facilityId)!==null&&_dataLocation$facilit2!==void 0?_dataLocation$facilit2:0,transactionId:(_dataLocation$transac2=dataLocation===null||dataLocation===void 0?void 0:dataLocation.transactionId)!==null&&_dataLocation$transac2!==void 0?_dataLocation$transac2:0}});},children:t(\"SuccessSaveMessage\")}):null]});};export default withTranslation()(PantallaBusqueda);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/14_AdminDesembolso/Colateral/MantenimientoLinea/Formulario.js"],"names":["React","useEffect","useState","useTranslation","Row","Col","Card","CardBody","Button","Label","AvForm","AvField","AvGroup","ApiServicesCommon","BackendServices","CoreServices","Select","Switch","Breadcrumb","withTranslation","Link","useHistory","useLocation","SweetAlert","Currency","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","PantallaBusqueda","props","currencyData","history","location","successSave_dlg2","setsuccessSave_dlg2","error_dlg","seterror_dlg","error_msg","seterror_msg","undefined","dataLocation","setdataLocation","showResults","setShowResults","dataList","setDataList","backendServices","loading","setLoading","typeGarantia","settypeGarantia","displayClienteModal","setDisplayClienteModal","dataGeneral","setdataGeneral","t","i18n","data","transactionId","length","sessionStorage","setItem","JSON","stringify","result","getItem","parse","handleSubmit","event","errors","values","preventDefault","datosJson","Number","lineId","revisionFrequency","dueDate","limitDate","getRealValue","amount","maxTotal","modifiedAmount","updateCreditLine","then","resp","catch","err","format","e","x","target","value","textAlign","marginTop","pathname","facilityId","margin","toggle","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Row, Col, Card, CardBody, Button, Label } from \"reactstrap\";\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\";\r\nimport ApiServicesCommon from \"../../../../../services/Common/ApiServicesCommon\";\r\nimport { BackendServices, CoreServices } from \"../../../../../services\";\r\nimport Select from \"react-select\";\r\nimport Switch from \"react-switch\";\r\nimport Breadcrumb from \"../../../../../components/Common/Breadcrumb\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport Currency from \"../../../../../helpers/currency\";\r\n\r\nconst Offsymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      No\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OnSymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      Si\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PantallaBusqueda = (props) => {\r\n  const currencyData = new Currency()\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [successSave_dlg2, setsuccessSave_dlg2] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [dataLocation, setdataLocation] = useState(undefined);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [dataList, setDataList] = useState([]);\r\n  const backendServices = new BackendServices();\r\n  const [loading, setLoading] = useState(false);\r\n  const [typeGarantia, settypeGarantia] = useState(\"nuevo\");\r\n  const [displayClienteModal, setDisplayClienteModal] = useState(false);\r\n  const [dataGeneral, setdataGeneral] = useState({\r\n    \"transactId\": 0,\r\n    \"lineId\": \"\",\r\n    \"revisionFrequency\": \"\",\r\n    \"dueDate\": \"2022-03-09\",\r\n    \"limitDate\": \"2022-03-09\",\r\n    \"amount\": 0,\r\n    \"maxTotal\": 0,\r\n    \"modifiedAmount\": 0,\r\n    \"status\": true\r\n  });\r\n  const { t, i18n } = useTranslation();\r\n  useEffect(() => {\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        location.data.transactionId = 0;\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        if (location.data?.dataGeneral) {\r\n          setdataGeneral(location.data.dataGeneral);\r\n          settypeGarantia(\"editar\")\r\n        }\r\n        setdataLocation(location.data);\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        if (result?.dataGeneral) {\r\n          setdataGeneral(result.dataGeneral);\r\n          settypeGarantia(\"editar\")\r\n        }\r\n        setdataLocation(result);\r\n      }\r\n    }\r\n\r\n  }, []);\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    const datosJson = {\r\n      \"transactId\": Number(dataLocation.transactionId),\r\n      \"lineId\": dataGeneral.lineId,\r\n      \"revisionFrequency\": values.revisionFrequency,\r\n      \"dueDate\": values.dueDate,\r\n      \"limitDate\": values.limitDate,\r\n      \"amount\": Number(currencyData.getRealValue(values?.amount ?? 0)),\r\n      \"maxTotal\": Number(currencyData.getRealValue(values?.maxTotal ?? 0)),\r\n      \"modifiedAmount\": Number(currencyData.getRealValue(values?.modifiedAmount ?? 0)),\r\n      \"status\": true\r\n    }\r\n    backendServices.updateCreditLine(datosJson).then(resp => {\r\n      if (resp !== null && resp !== undefined) {\r\n        setsuccessSave_dlg2(true)\r\n      } else {\r\n        seterror_dlg(true);\r\n      }\r\n    }).catch(err => {\r\n    })\r\n\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Datos Generales\")}</h5>\r\n      <p className=\"card-title-desc\"></p>\r\n\r\n      <AvForm id=\"frmGarantiasMuebles\" className=\"needs-validation\" onSubmit={handleSubmit} autoComplete=\"off\">\r\n        <Row>\r\n          <Col md=\"3\">\r\n            <div className=\"mb-3\">\r\n              <Label htmlFor=\"Frecuebnciarevi\">\r\n                {t(\"Line Number or Limit\")}\r\n              </Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                name=\"revisionFrequency\"\r\n                value={dataGeneral?.revisionFrequency ?? \"\"}\r\n                id=\"revisionFrequency\"\r\n                title={t(\"Mensual\")}\r\n              />\r\n            </div>\r\n          </Col>\r\n          <Col md=\"3\">\r\n            <div className=\"mb-3\">\r\n              <Label>{t(\"DueDate\")}</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"dueDate\"\r\n                type=\"date\"\r\n                value={dataGeneral?.dueDate ?? \"\"}\r\n                id=\"dueDate\"\r\n              />\r\n            </div>\r\n          </Col>\r\n          <Col md=\"3\">\r\n            <div className=\"mb-3\">\r\n              <Label>{t(\"Deadline\")}</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"limitDate\"\r\n                type=\"date\"\r\n                value={dataGeneral?.limitDate ?? \"\"}\r\n                id=\"limitDate\"\r\n              />\r\n            </div>\r\n          </Col>\r\n          <Col md=\"3\">\r\n            <div className=\"mb-3\">\r\n              <Label htmlFor=\"Monto\">\r\n                {t(\"Amount\")}\r\n              </Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                name=\"amount\"\r\n                value={currencyData.format(dataGeneral?.amount ?? 0)}\r\n                id=\"amount\"\r\n                pattern=\"^[0-9,.]*$\"\r\n                onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                title={t(\"\")}\r\n              />\r\n            </div>\r\n          </Col>\r\n          <Col md=\"3\">\r\n            <div className=\"mb-3\">\r\n              <Label htmlFor=\"Totmaximo\">\r\n                {t(\"Total Maximum\")}\r\n              </Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                name=\"maxTotal\"\r\n                value={currencyData.format(dataGeneral?.maxTotal ?? 0)}\r\n                id=\"maxTotal\"\r\n                title={t(\"\")}\r\n                pattern=\"^[0-9,.]*$\"\r\n                onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n              />\r\n            </div>\r\n          </Col>\r\n          <Col md=\"3\">\r\n            <div className=\"mb-3\">\r\n              <Label htmlFor=\"MontoModificado\">\r\n              {t(\"Modified Amount\")}\r\n              </Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                name=\"modifiedAmount\"\r\n                value={currencyData.format(dataGeneral?.modifiedAmount ?? 0)}\r\n                id=\"modifiedAmount\"\r\n                pattern=\"^[0-9,.]*$\"\r\n                onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                title={t(\"\")}\r\n              />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={12} style={{ textAlign: \"right\", marginTop: \"10px\" }}>\r\n            <Link\r\n              to={{\r\n                pathname: '/creditocomercial/garantias/',\r\n                data: { facilityId: dataLocation?.facilityId ?? 0, transactionId: dataLocation?.transactionId ?? 0 },\r\n              }}\r\n            >\r\n              <Button\r\n                id=\"btnNew\"\r\n                color=\"danger\"\r\n                type=\"button\"\r\n                style={{ margin: \"5px\" }}\r\n                onClick={props.toggle}\r\n                data-dismiss=\"modal\"\r\n              >\r\n                <i className=\"mdi mdi mdi-cancel mid-12px\"></i>{\" \"}\r\n                {t(\"Cancel\")}\r\n              </Button>\r\n            </Link>\r\n            <Button id=\"btnSearch\" type=\"submit\" color=\"success\" style={{ margin: '5px' }}>\r\n              <i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n              {\" \"} {t(\"Edit\")}</Button>\r\n          </Col>\r\n        </Row>\r\n      </AvForm>\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={t(\"ErrorDialog\")}\r\n          confirmButtonText={t(\"Confirm\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {successSave_dlg2 ? (\r\n        <SweetAlert\r\n          success\r\n          title={t(\"SuccessDialog\")}\r\n          confirmButtonText={t(\"Confirm\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg2(false)\r\n            history.push({\r\n              pathname: '/creditocomercial/garantias/',\r\n              data: { facilityId: dataLocation?.facilityId ?? 0, transactionId: dataLocation?.transactionId ?? 0 },\r\n            });\r\n          }}\r\n        >\r\n          {t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(PantallaBusqueda);\r\n"]},"metadata":{},"sourceType":"module"}