{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{translationHelpers}from\"../../../helpers\";import{Link}from\"react-router-dom\";import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../helpers/url_helper\";import{Row,Col,Button,Nav,NavLink,Card,CardBody}from\"reactstrap\";import Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{FinancialSummary}from\"../../../components/PropuestaCreditoComercial\";import{Background,Capex,CreditProposal,CreditPolicyReview,ExchangeRisk,FinancialInformation,FormCreditRisk,Projections,Workload,FormRecommendations,DocumentFooter}from\"../../../components/InformeFinanciero\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import{Tabs,Tab}from'react-bootstrap';import{getDateMeta}from\"@fullcalendar/react\";import classnames from\"classnames\";import FinancialReportComp from\"./FinancialReportComp\";import LoadingOverlay from\"react-loading-overlay\";import Guarantees from\"../../../components/InformeFinanciero/background/Guarantees\";import DebtSL from\"../../../components/PropuestaCreditoComercial/financialSummary/DebtSL\";import History from\"../../../components/PropuestaCreditoComercial/financialSummary/History\";import CapexIF from\"../../../components/InformeFinanciero/CapexIF\";import SweetAlert from\"react-bootstrap-sweetalert\";import{useTranslation,withTranslation}from\"react-i18next\";// Services\nimport{BackendServices,CoreServices,BpmServices}from\"../../../services\";import ModalPrevicualizarAIF from\"../../../pages/CommercialCredit/6_AnalisisCredito/previsualizarAIF\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FinancialReportContent=function FinancialReportContent(props){var _location$data;var _translationHelpers=translationHelpers('translation','common','translation'),_translationHelpers2=_slicedToArray(_translationHelpers,3),t=_translationHelpers2[0],c=_translationHelpers2[1],tr=_translationHelpers2[2];var history=useHistory();var location=useLocation();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),proposal=_useState2[0],setProposal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),policies=_useState4[0],setPolicies=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),financialSummary=_useState6[0],setFinancialSummary=_useState6[1];//const [financialInformation, setFinancialInformation] = useState(null);\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),capex=_useState8[0],setCapex=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),background=_useState10[0],setBackground=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),document=_useState12[0],setDocument=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),Opinion=_useState14[0],setOpinion=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),Recomendation=_useState16[0],setRecomendation=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),deudor=_useState18[0],setDeudor=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),debtorId=_useState20[0],setDebtorId=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),DataDeudor=_useState22[0],setDataDeudor=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isActiveLoading=_useState24[0],setIsActiveLoading=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isActiveLoading2=_useState26[0],setIsActiveLoading2=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),successSave_dlg=_useState28[0],setsuccessSave_dlg=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),error_dlg=_useState30[0],seterror_dlg=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),error_msg=_useState32[0],seterror_msg=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),confirm_alert=_useState34[0],setconfirm_alert=_useState34[1];var _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),mainDebtor=_useState36[0],setmainDebtor=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),preview=_useState38[0],setpreview=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),displayModal=_useState40[0],setDisplayModal=_useState40[1];var _useState41=useState((_location$data=location.data)!==null&&_location$data!==void 0?_location$data:JSON.parse(sessionStorage.getItem('locationData'))),_useState42=_slicedToArray(_useState41,2),locationData=_useState42[0],setLocationData=_useState42[1];//Servicios\nvar _useState43=useState(new BackendServices()),_useState44=_slicedToArray(_useState43,2),backendServices=_useState44[0],setbackendServices=_useState44[1];var _useState45=useState(new BpmServices()),_useState46=_slicedToArray(_useState45,2),bpmServices=_useState46[0],setbpmServices=_useState46[1];var _useState47=useState(new CoreServices()),_useState48=_slicedToArray(_useState47,2),coreServices=_useState48[0],setcoreServices=_useState48[1];//On Mounting (componentDidMount)\nvar dataSession;useEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));dataSession=location.data;setLocationData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);dataSession=result;setLocationData(result);}}fetchFinancialReport(dataSession);fetchData(dataSession);},[]);//Caraga Inicial de datos\nfunction fetchData(dataSession){//chequear si la tarea no ha sido iniciada\nbpmServices.checkAndStartTask(dataSession).then(function(iniresult){if(iniresult===false){history.push(url.URL_DASHBOARD);}});loadUserProspect(dataSession.transactionId);fetchFinancialReport();}function loadUserProspect(transactionId){// consultarDeudorPrincipal\nbackendServices.consultPrincipalDebtor(transactionId).then(function(data){if(data!==undefined){setmainDebtor(data);}});}function fetchFinancialReport(){return _fetchFinancialReport.apply(this,arguments);}function _fetchFinancialReport(){_fetchFinancialReport=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Promise.allSettled([LoadOpinion(),LoadRecomendacion(),drawTabs()]).then(function(resp){setIsActiveLoading(false);}).catch(function(err){setIsActiveLoading(false);});case 1:case\"end\":return _context.stop();}}},_callee);}));return _fetchFinancialReport.apply(this,arguments);}function handleNewDebt(newDebt){}function handleNewHistoryDetail(newHistoryDetail){}function handleSubmit(_x,_x2,_x3){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event,errors,values){var newOpinion,newRecommendations,errOpi,errConc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(errors.length>0)){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:newOpinion={transactId:dataSession.transactionId,opinion:values.opinion};newRecommendations={transactId:dataSession.transactionId,debtorId:debtorId,strengths:values.strengths,weakness:values.weakness,conclusion:values.conclusion};errOpi=false;if(!(Opinion!=undefined&&Opinion!=null)){_context2.next=11;break;}_context2.next=9;return backendServices.actualizarDetalleOpinionRiesgoCredito(newOpinion).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(false);errOpi=true;}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(false);});case 9:_context2.next=13;break;case 11:_context2.next=13;return backendServices.nuevoDetalleOpinionRiesgoCredito(newOpinion).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(false);errOpi=true;}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(false);});case 13:errConc=false;if(!(Recomendation!==undefined&&Recomendation!=null)){_context2.next=19;break;}_context2.next=17;return backendServices.actualizarConclusionesRecomendacionesAnalisisFinanciero(newRecommendations).then(function(resp){console.log(resp);if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(false);errConc=true;}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(false);});case 17:_context2.next=21;break;case 19:_context2.next=21;return backendServices.nuevoConclusionesRecomendacionesAnalisisFinanciero(newRecommendations).then(function(resp){console.log(resp);if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(false);errConc=true;}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(false);});case 21://props.onSubmit(values);\n!errOpi&&!errConc&&history.push(url.URL_DASHBOARD);case 22:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}function LoadOpinion(){return new Promise(function(resolve,reject){backendServices.consultarDetalleOpinionRiesgoCredito(dataSession.transactionId).then(function(resp){var data=resp[0];(data!=null||data!=undefined)&&setOpinion(data);resolve();}).catch(function(err){resolve();});});}function LoadRecomendacion(){return new Promise(function(resolve,reject){backendServices.consultarConclusionesRecomendacionesAnalisisFinanciero(dataSession.transactionId).then(function(resp){var data=resp[0];(data!=null||data!=undefined)&&setRecomendation(data);resolve();}).catch(function(err){resolve();});});}function drawTabs(){return new Promise(function(resolve,reject){// let resp = [{ debtorId: 1, name: 'Deudor 1' }, { debtorId: 20, name: 'Deudor 2' }, { debtorId: 32, name: 'Deudor 3' }, { debtorId: 4, name: 'Deudor 4' }];\nbackendServices.consultarDeudores(dataSession.transactionId).then(function(resp){// console.log(resp);\nresp=resp.map(function($$){return _objectSpread(_objectSpread({},$$),{},{debtorId:$$.personId,name:$$.typePerson==2?$$.name:\"\".concat($$.name,\" \").concat($$.name2,\" \").concat($$.lastName)});});setDataDeudor(resp);setDebtorId(resp[0].debtorId);props.changeDebtor&&props.changeDebtor(resp[0].debtorId);setDeudor(resp.map(function(items,index){return/*#__PURE__*/_jsx(Tab,{className:\"my-4\",eventKey:index,title:items.name,children:/*#__PURE__*/_jsx(FinancialReportComp,{customerNumberT24:items.customerNumberT24,debtorId:items.debtorId,preview:props.preview})},index);}));resolve();});});}function handleSelect(key){setDebtorId(DataDeudor[key].debtorId);props.changeDebtor&&props.changeDebtor(DataDeudor[key].debtorId);}function toggleModal(){setDisplayModal(!displayModal);}return/*#__PURE__*/_jsx(React.Fragment,{children:locationData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Tabs,{defaultActiveKey:\"0\",id:\"uncontrolled-tab-example\",className:\"m-0\",onSelect:function onSelect(e){handleSelect(e);},children:deudor})}),/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(FinancialInformation,{preview:props.preview})}),/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(ExchangeRisk,{preview:props.preview})}),/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(Workload,{preview:props.preview})}),/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(Projections,{preview:props.preview})}),/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(Background,{preview:props.preview})})]}),props.preview&&/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading2,spinner:true,text:t(\"WaitingPlease\"),children:[/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(FormCreditRisk,{preview:props.preview,Opinion:Opinion===null||Opinion===void 0?void 0:Opinion.opinion})}),/*#__PURE__*/_jsx(Col,{className:\"mt-4\",children:/*#__PURE__*/_jsx(FormRecommendations,{preview:props.preview,strengths:Recomendation===null||Recomendation===void 0?void 0:Recomendation.strengths,weakness:Recomendation===null||Recomendation===void 0?void 0:Recomendation.weakness,conclusion:Recomendation===null||Recomendation===void 0?void 0:Recomendation.conclusion})})]})]}):null});};export default FinancialReportContent;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/6_AnalisisCredito/FinancialReportContent.js"],"names":["React","useEffect","useState","translationHelpers","Link","useLocation","useHistory","url","Row","Col","Button","Nav","NavLink","Card","CardBody","Breadcrumbs","FinancialSummary","Background","Capex","CreditProposal","CreditPolicyReview","ExchangeRisk","FinancialInformation","FormCreditRisk","Projections","Workload","FormRecommendations","DocumentFooter","AvForm","AvField","AvGroup","Tabs","Tab","getDateMeta","classnames","FinancialReportComp","LoadingOverlay","Guarantees","DebtSL","History","CapexIF","SweetAlert","useTranslation","withTranslation","BackendServices","CoreServices","BpmServices","ModalPrevicualizarAIF","FinancialReportContent","props","t","c","tr","history","location","proposal","setProposal","policies","setPolicies","financialSummary","setFinancialSummary","capex","setCapex","background","setBackground","document","setDocument","Opinion","setOpinion","Recomendation","setRecomendation","deudor","setDeudor","debtorId","setDebtorId","DataDeudor","setDataDeudor","isActiveLoading","setIsActiveLoading","isActiveLoading2","setIsActiveLoading2","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","confirm_alert","setconfirm_alert","mainDebtor","setmainDebtor","preview","setpreview","displayModal","setDisplayModal","data","JSON","parse","sessionStorage","getItem","locationData","setLocationData","backendServices","setbackendServices","bpmServices","setbpmServices","coreServices","setcoreServices","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","setItem","stringify","result","fetchFinancialReport","fetchData","checkAndStartTask","then","iniresult","loadUserProspect","consultPrincipalDebtor","Promise","allSettled","LoadOpinion","LoadRecomendacion","drawTabs","resp","catch","err","handleNewDebt","newDebt","handleNewHistoryDetail","newHistoryDetail","handleSubmit","event","errors","values","preventDefault","newOpinion","transactId","opinion","newRecommendations","strengths","weakness","conclusion","errOpi","actualizarDetalleOpinionRiesgoCredito","statusCode","error","nuevoDetalleOpinionRiesgoCredito","errConc","actualizarConclusionesRecomendacionesAnalisisFinanciero","console","log","nuevoConclusionesRecomendacionesAnalisisFinanciero","resolve","reject","consultarDetalleOpinionRiesgoCredito","consultarConclusionesRecomendacionesAnalisisFinanciero","consultarDeudores","map","$$","personId","name","typePerson","name2","lastName","changeDebtor","items","index","customerNumberT24","handleSelect","key","toggleModal","e"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { translationHelpers } from \"../../../helpers\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as url from \"../../../helpers/url_helper\"\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Nav,\r\n    NavLink,\r\n    Card,\r\n    CardBody,\r\n} from \"reactstrap\"\r\n\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport { FinancialSummary } from \"../../../components/PropuestaCreditoComercial\"\r\nimport {\r\n    Background, Capex, CreditProposal, CreditPolicyReview,\r\n    ExchangeRisk, FinancialInformation, FormCreditRisk,\r\n    Projections, Workload, FormRecommendations, DocumentFooter\r\n} from \"../../../components/InformeFinanciero\"\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\n\r\nimport { Tabs, Tab } from 'react-bootstrap';\r\nimport { getDateMeta } from \"@fullcalendar/react\"\r\nimport classnames from \"classnames\"\r\nimport FinancialReportComp from \"./FinancialReportComp\";\r\nimport LoadingOverlay from \"react-loading-overlay\"\r\nimport Guarantees from \"../../../components/InformeFinanciero/background/Guarantees\"\r\nimport DebtSL from \"../../../components/PropuestaCreditoComercial/financialSummary/DebtSL\"\r\nimport History from \"../../../components/PropuestaCreditoComercial/financialSummary/History\"\r\nimport CapexIF from \"../../../components/InformeFinanciero/CapexIF\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\n\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\n\r\n// Services\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport ModalPrevicualizarAIF from \"../../../pages/CommercialCredit/6_AnalisisCredito/previsualizarAIF\";\r\n\r\nconst FinancialReportContent = (props) => {\r\n\r\n    const [t, c, tr] = translationHelpers('translation', 'common', 'translation');\r\n\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n\r\n    const [proposal, setProposal] = useState(null);\r\n    const [policies, setPolicies] = useState([]);\r\n    const [financialSummary, setFinancialSummary] = useState(null);\r\n    //const [financialInformation, setFinancialInformation] = useState(null);\r\n    const [capex, setCapex] = useState(null);\r\n    const [background, setBackground] = useState(null);\r\n    const [document, setDocument] = useState(null);\r\n    const [Opinion, setOpinion] = useState(null);\r\n    const [Recomendation, setRecomendation] = useState(null);\r\n    const [deudor, setDeudor] = useState(null);\r\n    const [debtorId, setDebtorId] = useState(null);\r\n    const [DataDeudor, setDataDeudor] = useState(0);\r\n    const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n    const [isActiveLoading2, setIsActiveLoading2] = useState(false);\r\n    const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n    const [error_dlg, seterror_dlg] = useState(false);\r\n    const [error_msg, seterror_msg] = useState(\"\");\r\n    const [confirm_alert, setconfirm_alert] = useState(false)\r\n    const [mainDebtor, setmainDebtor] = useState(null);\r\n    const [preview, setpreview] = useState(null);\r\n    const [displayModal, setDisplayModal] = useState(false);\r\n\r\n    const [locationData, setLocationData] = useState(location.data ?? JSON.parse(sessionStorage.getItem('locationData')));\r\n\r\n    //Servicios\r\n    const [backendServices, setbackendServices] = useState(new BackendServices());\r\n    const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n    const [coreServices, setcoreServices] = useState(new CoreServices());\r\n\r\n    //On Mounting (componentDidMount)\r\n\r\n    let dataSession;\r\n    useEffect(() => {\r\n\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                dataSession = location.data\r\n                setLocationData(location.data);\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                dataSession = result\r\n                setLocationData(result);\r\n            }\r\n        }\r\n\r\n        fetchFinancialReport(dataSession);\r\n        fetchData(dataSession);\r\n\r\n    }, []);\r\n\r\n    //Caraga Inicial de datos\r\n    function fetchData(dataSession) {\r\n        //chequear si la tarea no ha sido iniciada\r\n        bpmServices.checkAndStartTask(dataSession)\r\n            .then((iniresult) => {\r\n                if (iniresult === false) {\r\n                    history.push(url.URL_DASHBOARD);\r\n                }\r\n            })\r\n        loadUserProspect(dataSession.transactionId)\r\n        fetchFinancialReport();\r\n    }\r\n\r\n    function loadUserProspect(transactionId) {\r\n        // consultarDeudorPrincipal\r\n        backendServices.consultPrincipalDebtor(transactionId)\r\n            .then((data) => {\r\n                if (data !== undefined) {\r\n                    setmainDebtor(data);\r\n                }\r\n            });\r\n    }\r\n\r\n    async function fetchFinancialReport() {\r\n        Promise.allSettled([\r\n            LoadOpinion(),\r\n            LoadRecomendacion(),\r\n            drawTabs(),\r\n        ]).then((resp) => {\r\n            setIsActiveLoading(false);\r\n        }).catch(err => {\r\n            setIsActiveLoading(false);\r\n        });\r\n    }\r\n\r\n    function handleNewDebt(newDebt) {\r\n\r\n    }\r\n\r\n    function handleNewHistoryDetail(newHistoryDetail) {\r\n\r\n    }\r\n\r\n    async function handleSubmit(event, errors, values) {\r\n        event.preventDefault();\r\n        if (errors.length > 0) {\r\n            return;\r\n        }\r\n\r\n\r\n        let newOpinion = { transactId: dataSession.transactionId, opinion: values.opinion };\r\n        let newRecommendations = {\r\n            transactId: dataSession.transactionId,\r\n            debtorId: debtorId,\r\n            strengths: values.strengths,\r\n            weakness: values.weakness,\r\n            conclusion: values.conclusion\r\n        }\r\n\r\n        let errOpi = false;\r\n\r\n        if (Opinion != undefined && Opinion != null) {\r\n            await backendServices.actualizarDetalleOpinionRiesgoCredito(newOpinion).then(resp => {\r\n                if (resp.statusCode == \"500\") {\r\n                    setconfirm_alert(false)\r\n                    seterror_dlg(false)\r\n                    errOpi = true;\r\n                } else {\r\n                    setconfirm_alert(false)\r\n                    setsuccessSave_dlg(true)\r\n                }\r\n            }).catch(error => {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(false)\r\n            });\r\n        } else {\r\n            await backendServices.nuevoDetalleOpinionRiesgoCredito(newOpinion).then(resp => {\r\n                if (resp.statusCode == \"500\") {\r\n                    setconfirm_alert(false)\r\n                    seterror_dlg(false)\r\n                    errOpi = true;\r\n                } else {\r\n                    setconfirm_alert(false)\r\n                    setsuccessSave_dlg(true)\r\n                }\r\n            }).catch(error => {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(false)\r\n            });\r\n        }\r\n        let errConc = false;\r\n        if (Recomendation !== undefined && Recomendation != null) {\r\n            await backendServices.actualizarConclusionesRecomendacionesAnalisisFinanciero(newRecommendations).then(resp => {\r\n                console.log(resp)\r\n                if (resp.statusCode == \"500\") {\r\n                    setconfirm_alert(false)\r\n                    seterror_dlg(false)\r\n                    errConc = true;\r\n                } else {\r\n                    setconfirm_alert(false)\r\n                    setsuccessSave_dlg(true)\r\n                }\r\n            }).catch(error => {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(false)\r\n            });\r\n        } else {\r\n            await backendServices.nuevoConclusionesRecomendacionesAnalisisFinanciero(newRecommendations).then(resp => {\r\n                console.log(resp)\r\n                if (resp.statusCode == \"500\") {\r\n                    setconfirm_alert(false)\r\n                    seterror_dlg(false)\r\n                    errConc = true;\r\n                } else {\r\n                    setconfirm_alert(false)\r\n                    setsuccessSave_dlg(true)\r\n                }\r\n            }).catch(error => {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(false)\r\n            });\r\n        }\r\n\r\n        //props.onSubmit(values);\r\n        (!errOpi && !errConc) && history.push(url.URL_DASHBOARD);\r\n\r\n    }\r\n\r\n    function LoadOpinion() {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            backendServices.consultarDetalleOpinionRiesgoCredito(dataSession.transactionId).then(resp => {\r\n                let data = resp[0];\r\n                (data != null || data != undefined) && setOpinion(data);\r\n                resolve();\r\n            }).catch(err => {\r\n                resolve();\r\n            });\r\n        })\r\n    }\r\n\r\n    function LoadRecomendacion() {\r\n        return new Promise(function (resolve, reject) {\r\n            backendServices.consultarConclusionesRecomendacionesAnalisisFinanciero(dataSession.transactionId).then(resp => {\r\n                let data = resp[0];\r\n                (data != null || data != undefined) && setRecomendation(data);\r\n                resolve();\r\n            }).catch(err => {\r\n                resolve();\r\n            });\r\n        })\r\n    }\r\n\r\n    function drawTabs() {\r\n        return new Promise(function (resolve, reject) {\r\n            // let resp = [{ debtorId: 1, name: 'Deudor 1' }, { debtorId: 20, name: 'Deudor 2' }, { debtorId: 32, name: 'Deudor 3' }, { debtorId: 4, name: 'Deudor 4' }];\r\n            backendServices.consultarDeudores(dataSession.transactionId).then(resp => {\r\n                // console.log(resp);\r\n                resp = resp.map($$ => ({\r\n                    ...$$,\r\n                    debtorId: $$.personId,\r\n                    name: $$.typePerson == 2 ? $$.name : `${$$.name} ${$$.name2} ${$$.lastName}`\r\n                }))\r\n                setDataDeudor(resp);\r\n                setDebtorId(resp[0].debtorId)\r\n                props.changeDebtor && props.changeDebtor(resp[0].debtorId)\r\n\r\n                setDeudor(resp.map((items, index) => (\r\n                    <Tab className=\"my-4\" key={index} eventKey={index} title={items.name}>\r\n                        <FinancialReportComp\r\n                            customerNumberT24={items.customerNumberT24}\r\n                            debtorId={items.debtorId}\r\n                            preview={props.preview}\r\n                        />\r\n\r\n                    </Tab>\r\n                )));\r\n\r\n                resolve();\r\n\r\n            })\r\n        })\r\n    }\r\n\r\n    function handleSelect(key) {\r\n        setDebtorId(DataDeudor[key].debtorId);\r\n        props.changeDebtor && props.changeDebtor(DataDeudor[key].debtorId)\r\n    }\r\n\r\n    function toggleModal() {\r\n        setDisplayModal(!displayModal);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {locationData ?\r\n                <>\r\n                    <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n\r\n                        <Col>\r\n                            <Tabs defaultActiveKey=\"0\" id=\"uncontrolled-tab-example\" className=\"m-0\" onSelect={(e) => { handleSelect(e) }}>\r\n                                {deudor}\r\n                            </Tabs>\r\n                        </Col>\r\n\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <FinancialInformation\r\n                                preview={props.preview}\r\n                            />\r\n                        </Col>\r\n\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <ExchangeRisk\r\n                                preview={props.preview}\r\n                            />\r\n                        </Col>\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <Workload\r\n                                preview={props.preview}\r\n                            />\r\n                        </Col>\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <Projections\r\n                                preview={props.preview}\r\n                            />\r\n                        </Col>\r\n\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <Background\r\n                                preview={props.preview}\r\n                            />\r\n                        </Col>\r\n                    </LoadingOverlay >\r\n\r\n                    {props.preview && <LoadingOverlay active={isActiveLoading2} spinner text={t(\"WaitingPlease\")}>\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <FormCreditRisk preview={props.preview} Opinion={Opinion?.opinion} />\r\n                        </Col>\r\n\r\n\r\n                        <Col className=\"mt-4\">\r\n                            <FormRecommendations preview={props.preview} strengths={Recomendation?.strengths} weakness={Recomendation?.weakness} conclusion={Recomendation?.conclusion} />\r\n                        </Col>\r\n                    </LoadingOverlay>}\r\n                </>\r\n                : null}\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default FinancialReportContent;\r\n"]},"metadata":{},"sourceType":"module"}