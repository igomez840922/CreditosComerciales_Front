{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../helpers/url_helper\";import{useTranslation,withTranslation}from\"react-i18next\";import{Row,Col,Button,Card,CardBody,CardFooter,CardHeader}from\"reactstrap\";import{Link}from\"react-router-dom\";// UI Components\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{FacilityListBpm,FacilityListCore,ChangeSummaryReadOnly,CorporateExposure,CorporateExposureClient,FacilityList,FinancialSummary,GeneralSection}from\"../../../components/PropuestaCreditoComercial\";import SweetAlert from\"react-bootstrap-sweetalert\";import AttachmentFileCore from\"../../../components/Common/AttachmentFileCore\";import*as OPTs from\"../../../helpers/options_helper\";import{AttachmentFileInputModel}from'../../../models/Common/AttachmentFileInputModel';import HeaderSections from\"../../../components/Common/HeaderSections\";import ModalEndProcess from\"../../../components/EndProcess/ModalEndProcess\";// Services\nimport{BackendServices,CoreServices,BpmServices}from\"../../../services\";import LoadingOverlay from\"react-loading-overlay\";import{translationHelpers,formatCurrency}from'../../../helpers';import{success}from\"toastr\";import{InfoBpmModel}from'../../../models/Common/InfoBpmModel';import{LogProcessModel}from'../../../models/Common/LogProcessModel';import LogProcess from\"../../../components/LogProcess/index\";import FacilityHistory from\"../../../components/Common/FacilityHistory\";import ModalBitacora from\"../../../components/Common/ModalBitacora\";import{saveLogProcess}from\"../../../helpers/logs_helper\";import HorizontalSteeper from\"../../../components/Common/HorizontalSteeper\";import ExposicionCorportativa from\"../5_PropuestaCredito/Secciones/ExposicionCorporativa\";import ExposicionCorporativaClientes from\"../5_PropuestaCredito/Secciones/ExposicionCorporativaCliente\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommercialCreditProposalPage=function CommercialCreditProposalPage(props){var history=useHistory();var location=useLocation();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var sumaryData={client:{name:'Nombre Deudor'},financialStatus:{headers:['Auditados Dic-18','Auditados Dic-19','Auditados Dic-20','Proyecciones Dic-21'],items:[{label:'Clasificación SAFI',data:['-','-','5:6 Riesgo','-']},{label:'Crecimiento',data:['-','-3.4%','-12.5%','0.0%']},{label:'Costo de Ventas',data:['(1550)66.2%','(1510)66.8%','(1360)68.8%','(1360)68.8%']},{label:'Beneficio Mutuo en Operaciones',data:['(790)66.2%','(751)66.8%','(618)68.8%','(618)68.8%']},{label:'Margen Bruto',data:['','','','']}]},balances:{active:{title:t('Active Balance'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},passive:{title:t('Passive Balance and Capital'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},application:{title:t('Origin and Application Status'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},indicators:{title:t('Indicators'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]}},debts:{short:{items:[{bank:'Capital Bank',purpose:'Linea de Crédito',approvedAmount:200,balanceLastYear:200,balanceLast6Months:154,balanceForecast:200,rate:7.0,surety:'Fianza'},{bank:'St Georges',purpose:'Linea de Crédito',approvedAmount:320,balanceLastYear:200,balanceLast6Months:436,balanceForecast:450,rate:7.5,surety:'Fianza'},{bank:'St Georges',purpose:'TDC',approvedAmount:11,balanceLastYear:11,balanceLast6Months:0,balanceForecast:11,rate:null,surety:''}]},long:{items:[{bank:'Banesco',purpose:'Préstamo',approvedAmount:126,balanceLastYear:0,balanceLast6Months:0,balanceForecast:126,rate:6.5,surety:'Bien Inmueble'}]}},history:{headers:[t('# days',{days:30}),t('# days',{days:60}),t('# days',{days:90}),t('# days',{days:120}),t('# days',{days:150}),t('# days',{days:180}),t('# days',{days:210}),t('# days',{days:240}),t('# days',{days:270}),t('# days',{days:300}),t('# days',{days:330}),t('+# days',{days:331}),t('Totals')],data:[{name:'Banesco',data:[100,80,80,80,100,80,80,80,100,80,80,200,0]},{name:'Banesco',data:[100,80,80,80,100,80,80,80,100,80,80,200,0]}]}};var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),proposal=_useState4[0],setProposal=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),changeSummaryItems=_useState6[0],setChangeSummaryItems=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),facilityListItems=_useState8[0],setFacilityListItems=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),identificationList=_useState10[0],setIdentificationList=_useState10[1];var _useState11=useState(sumaryData),_useState12=_slicedToArray(_useState11,2),financialSummary=_useState12[0],setFinancialSummary=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),prospect=_useState14[0],setProspect=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isActiveLoading=_useState16[0],setIsActiveLoading=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),personId=_useState18[0],setpersonId=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),mainDebtor=_useState20[0],setmainDebtor=_useState20[1];//mostrar el modal para la opción de finalizar proceso\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),displayModalEndProcess=_useState22[0],setdisplayModalEndProcess=_useState22[1];var _useState23=useState({msg:\"\",show:false,error:false}),_useState24=_slicedToArray(_useState23,2),messageDlg=_useState24[0],setmessageDlg=_useState24[1];//Servicios\nvar _useState25=useState(new BackendServices()),_useState26=_slicedToArray(_useState25,2),backendServices=_useState26[0],setbackendServices=_useState26[1];var _useState27=useState(new BpmServices()),_useState28=_slicedToArray(_useState27,2),bpmServices=_useState28[0],setbpmServices=_useState28[1];var _useState29=useState(new CoreServices()),_useState30=_slicedToArray(_useState29,2),coreServices=_useState30[0],setcoreServices=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),displayModalBitacora=_useState32[0],setdisplayModalBitacora=_useState32[1];var _useState33=useState(null),_useState34=_slicedToArray(_useState33,2),optionSelected=_useState34[0],setoptionSelected=_useState34[1];//On Mounting (componentDidMount)\nuseEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);fetchData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);fetchData(result);}}},[]);//Caraga Inicial de datos\nfunction fetchData(locationData){console.log(\"fetchData\",locationData);//chequear si la tarea no ha sido iniciada\nbpmServices.checkAndStartTask(locationData).then(function(iniresult){if(iniresult===false){history.push(url.URL_DASHBOARD);}});loadUserProspect(locationData.transactionId);getProspect(locationData);}function loadUserProspect(transactionId){// consultarDeudorPrincipal\nbackendServices.consultPrincipalDebtor(transactionId).then(function(data){if(data!==undefined){setmainDebtor(data);}});}function loadIdentifications(){return new Promise(function(resolve,reject){backendServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){setIdentificationList(data);}resolve();}).catch(function(error){resolve();console.error('api error: ',error);});});}function handleReturn(){history.push(url.URL_DASHBOARD);}function handleClose(){history.push(url.URL_DASHBOARD);}function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}function getProspect(locationData){Promise.allSettled([//backServices.consultarUsuarioProspecto(location.data.transactionId),\n//backServices.consultProspectUser(location.data.transactionId),\nbackendServices.consultPrincipalDebtor(locationData.transactionId),loadIdentifications()]).then(function(resp){var _resp=_slicedToArray(resp,1),PrincipalDebtor=_resp[0].value;console.log(resp,location,PrincipalDebtor);setIsActiveLoading(false);var customerNumberT24=PrincipalDebtor.customerNumberT24;setProspect(customerNumberT24);//loadFacilitiesList(customerNumberT24);\nsetpersonId(PrincipalDebtor.personId);}).catch(function(err){// console.log(err);\n});// backServices.consultProspectUser(location.data.transactionId).then(async (resp) => {\n//   console.log(resp);\n//   setIsActiveLoading(false)\n//   // customerNumberT24 = resp.customerNumberT24;\n//   setProspect(customerNumberT24);\n//   loadFacilitiesList(customerNumberT24);\n//   fetchProposal();\n// });\n// backServices.consultPrincipalDebtor(location.data.transactionId).then(async (resp) => {\n//   setpersonId(resp.personId);\n// });\n}/*\r\n  function loadFacilitiesList(idcliente) {\r\n      return new Promise(function (resolve, reject) {\r\n        coreServices.getFacilitiesByTransaction(locationData.transactionId)\r\n          .then(resp => {\r\n            setFacilityListItems(resp);\r\n            resolve();\r\n          })\r\n          .catch(err => {\r\n            resolve();\r\n          });\r\n      })\r\n    }\r\n  */function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}////////// PARTE ES LA FINAL DEL PROCESO ///////\nfunction onSaveProcess(option){switch(option){case OPTs.PROCESS_CANCELPROCESS:{break;}}saveJBPMProcess(option);}function saveJBPMProcess(_x){return _saveJBPMProcess.apply(this,arguments);}function _saveJBPMProcess(){_saveJBPMProcess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(option){var _locationData$infoBpm,_locationData$infoBpm2,_locationData$infoBpm3,_locationData$infoBpm4;var maindebtor,infoBpmModel,values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 2:maindebtor=_context.sent;infoBpmModel=new InfoBpmModel((_locationData$infoBpm=(_locationData$infoBpm2=locationData.infoBpmModel)===null||_locationData$infoBpm2===void 0?void 0:_locationData$infoBpm2.instanceId)!==null&&_locationData$infoBpm!==void 0?_locationData$infoBpm:locationData.instanceId,(_locationData$infoBpm3=(_locationData$infoBpm4=locationData.infoBpmModel)===null||_locationData$infoBpm4===void 0?void 0:_locationData$infoBpm4.transactId)!==null&&_locationData$infoBpm3!==void 0?_locationData$infoBpm3:locationData.transactionId,0,0,maindebtor===null||maindebtor===void 0?void 0:maindebtor.personId);infoBpmModel.personName=maindebtor!==undefined?maindebtor.typePerson==\"2\"?maindebtor.name:maindebtor.name+\" \"+maindebtor.name2+\" \"+maindebtor.lastName+\" \"+maindebtor.lastName2:\"\";_context.t0=option;_context.next=_context.t0===OPTs.PROCESS_CANCELPROCESS?8:_context.t0===OPTs.PROCESS_ANALISISCREDITO?10:_context.t0===OPTs.PROCESS_INFORMEFINANCIERO?15:_context.t0===OPTs.PROCESS_INFORMEGESTION?20:25;break;case 8:bpmServices.abortProcess(infoBpmModel.instanceId).then(function(data){if(data!==undefined){saveAutoLog(OPTs.APPLICATION_STATUS_CANC,\"\");history.push(url.URL_DASHBOARD);}else{showMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 10:infoBpmModel.processId=OPTs.PROCESS_ANALISISCREDITO;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_ANALISISCREDITO.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId.toString()};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){showMessage({msg:t(\"Datahasbeensavedsuccessfully\"),error:false,show:true});history.push(url.URL_DASHBOARD);}else{showMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 15:infoBpmModel.processId=OPTs.PROCESS_INFORMEFINANCIERO;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_INFORMEFINANCIERO.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId.toString()};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){saveAutoLog(t(\"ActivityHasBeenFinishedSuccessfully\"));history.push({pathname:url.URL_FINANCIALINFO,data:locationData});}else{showMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 20://requiere ajustes\ninfoBpmModel.processId=OPTs.PROCESS_INFORMEGESTION;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_INFORMEGESTION.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"requestId\":locationData.requestId,\"decision\":\"si\",//requiere ajustes\n\"dcreditoparalelo\":\"sinparalelo\",\"statuscredito\":\"completo\"//el paralelo de Credito esta activo\n};bpmServices.completedStatusTask(locationData.taskId,values).then(function(data){if(data!==undefined){saveAutoLog(OPTs.APPLICATION_STATUS_DEV,t(\"The activity has been returned for adjustment\"));history.push(url.URL_DASHBOARD);}else{//Mensaje ERROR\nshowMessage({msg:t(\"ErrorSaveMessage\"),error:true,show:true});}});return _context.abrupt(\"break\",26);case 25:return _context.abrupt(\"break\",26);case 26:case\"end\":return _context.stop();}}},_callee);}));return _saveJBPMProcess.apply(this,arguments);}function showMessage(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(data!==null){setmessageDlg(data);}else{setmessageDlg({msg:\"\",show:false,error:false});}}function showModalBitacora(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setdisplayModalBitacora(show);}function saveAutoLog(){return _saveAutoLog.apply(this,arguments);}function _saveAutoLog(){_saveAutoLog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _mainDebtor$personId,_ref,_APPLICATION_STATUS$i,_APPLICATION_STATUS$n;var APPLICATION_STATUS,observations,mainDebtor,log,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:APPLICATION_STATUS=_args2.length>0&&_args2[0]!==undefined?_args2[0]:null;observations=_args2.length>1&&_args2[1]!==undefined?_args2[1]:null;_context2.next=4;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 4:mainDebtor=_context2.sent;log=new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_ANALISISCREDITO,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_04);log.clientId=(_mainDebtor$personId=mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.personId)!==null&&_mainDebtor$personId!==void 0?_mainDebtor$personId:log.clientId;log.observations=(_ref=observations==null?t(\"ActivityHasBeenFinishedSuccessfully\"):observations)!==null&&_ref!==void 0?_ref:\"\";log.requestId=(_APPLICATION_STATUS$i=APPLICATION_STATUS===null||APPLICATION_STATUS===void 0?void 0:APPLICATION_STATUS.id)!==null&&_APPLICATION_STATUS$i!==void 0?_APPLICATION_STATUS$i:0;log.statusDescription=(_APPLICATION_STATUS$n=APPLICATION_STATUS===null||APPLICATION_STATUS===void 0?void 0:APPLICATION_STATUS.name)!==null&&_APPLICATION_STATUS$n!==void 0?_APPLICATION_STATUS$n:\"\";saveLogProcess(log);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _saveAutoLog.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:locationData?/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Commercial Credit\"),breadcrumbItem:t(\"Credit Analysis\")}),/*#__PURE__*/_jsx(HorizontalSteeper,{processNumber:1,activeStep:2}),/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:[/*#__PURE__*/_jsxs(Row,{style:{marginTop:\"0px\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",style:{margin:'5px 0px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_CANCELPROCESS);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"CancelProcess\")]}),/*#__PURE__*/_jsxs(Button,{color:\"primary\",style:{margin:'0px 5px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_INFORMEGESTION);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-backspace-outline mid-12px\"}),\" \",t(\"AdjustRequired\")]})]}),/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_ANALISISCREDITO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save-outline mid-12px\"}),\" \",t(\"Exit\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",onClick:function onClick(){onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"FinantialReport\")]})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"Credit Analysis\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"This form is official and must be filled out correctly\")})]}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title title-header\",children:[mainDebtor!=null?mainDebtor.typePerson===\"1\"?mainDebtor.name+\" \"+mainDebtor.name2+\" \"+mainDebtor.lastName+\" \"+mainDebtor.lastName2:mainDebtor.name:\"\",\" \"]})}),/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",style:{textAlign:\"right\"},children:[t(\"Tramit\"),\":\",\" \",\"#\",locationData===null||locationData===void 0?void 0:locationData.transactionId]})})]})})]})}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(GeneralSection,{proposal:proposal,prospect:prospect})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:mainDebtor?/*#__PURE__*/ // <CorporateExposure title={t(\"CorporateExhibition\")} customerNumberT24={mainDebtor?.customerNumberT24} />\n_jsx(ExposicionCorportativa,{activeTab:2,title:t(\"CorporateExhibition\"),customerNumberT24:mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.customerNumberT24}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:mainDebtor?/*#__PURE__*/ // <CorporateExposureClient title={t(\"CorporateExhibitionClient\")} customerNumberT24={mainDebtor?.customerNumberT24} />\n_jsx(ExposicionCorporativaClientes,{activeTab:2,title:t(\"CorporateExhibitionClient\"),customerNumberT24:mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.customerNumberT24}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:locationData?/*#__PURE__*/_jsx(ChangeSummaryReadOnly,{transactionId:locationData===null||locationData===void 0?void 0:locationData.transactionId}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:mainDebtor&&locationData?/*#__PURE__*/ // <FacilityListCore transactId={locationData.transactionId} customerNumberT24={mainDebtor?.customerNumberT24} />\n_jsx(FacilityHistory,{validacion:true,transactId:locationData.transactionId,design:true,mainDebtor:mainDebtor,partyId:mainDebtor.customerNumberT24}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:locationData?/*#__PURE__*/_jsx(FacilityListBpm,{transactionId:locationData===null||locationData===void 0?void 0:locationData.transactionId}):null})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(HeaderSections,{title:\"Attachments\",t:t}),locationData?/*#__PURE__*/_jsx(AttachmentFileCore,{attachmentFileInputModel:new AttachmentFileInputModel(locationData.transactionId,OPTs.PROCESS_ANALISISCREDITO)}):null]})})})]}),/*#__PURE__*/_jsx(CardFooter,{})]})]}),locationData?/*#__PURE__*/_jsx(LogProcess,{logProcessModel:new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_ANALISISCREDITO,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_04)}):null,/*#__PURE__*/_jsxs(Row,{style:{marginTop:\"0px\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",style:{margin:'5px 0px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_CANCELPROCESS);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"CancelProcess\")]}),/*#__PURE__*/_jsxs(Button,{color:\"primary\",style:{margin:'0px 5px'},type:\"button\",onClick:function onClick(){setoptionSelected(OPTs.PROCESS_INFORMEGESTION);showModalBitacora();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-backspace-outline mid-12px\"}),\" \",t(\"AdjustRequired\")]})]}),/*#__PURE__*/_jsxs(Col,{md:6,style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_ANALISISCREDITO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save-outline mid-12px\"}),\" \",t(\"Exit\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",onClick:function onClick(){onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"FinantialReport\")]})]})]}),locationData&&displayModalBitacora?/*#__PURE__*/_jsx(ModalBitacora,{logProcessModel:new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_ANALISISCREDITO,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_04),successSaved:function successSaved(){onSaveProcess(optionSelected);},isOpen:displayModalBitacora,toggle:function toggle(){showModalBitacora(false);}}):null,messageDlg&&messageDlg.show?/*#__PURE__*/_jsx(SweetAlert,{type:messageDlg.error?\"error\":\"success\",title:messageDlg.error?t(\"Error\"):t(\"Message\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){showMessage();},children:messageDlg.msg}):null]}):null});};export default CommercialCreditProposalPage;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/6_AnalisisCredito/CommercialCreditProposalPage.js"],"names":["React","useEffect","useState","useLocation","useHistory","url","useTranslation","withTranslation","Row","Col","Button","Card","CardBody","CardFooter","CardHeader","Link","Breadcrumbs","FacilityListBpm","FacilityListCore","ChangeSummaryReadOnly","CorporateExposure","CorporateExposureClient","FacilityList","FinancialSummary","GeneralSection","SweetAlert","AttachmentFileCore","OPTs","AttachmentFileInputModel","HeaderSections","ModalEndProcess","BackendServices","CoreServices","BpmServices","LoadingOverlay","translationHelpers","formatCurrency","success","InfoBpmModel","LogProcessModel","LogProcess","FacilityHistory","ModalBitacora","saveLogProcess","HorizontalSteeper","ExposicionCorportativa","ExposicionCorporativaClientes","CommercialCreditProposalPage","props","history","location","t","i18n","locationData","setLocationData","sumaryData","client","name","financialStatus","headers","items","label","data","balances","active","title","passive","application","indicators","debts","short","bank","purpose","approvedAmount","balanceLastYear","balanceLast6Months","balanceForecast","rate","surety","long","days","proposal","setProposal","changeSummaryItems","setChangeSummaryItems","facilityListItems","setFacilityListItems","identificationList","setIdentificationList","financialSummary","setFinancialSummary","prospect","setProspect","isActiveLoading","setIsActiveLoading","personId","setpersonId","mainDebtor","setmainDebtor","displayModalEndProcess","setdisplayModalEndProcess","msg","show","error","messageDlg","setmessageDlg","backendServices","setbackendServices","bpmServices","setbpmServices","coreServices","setcoreServices","displayModalBitacora","setdisplayModalBitacora","optionSelected","setoptionSelected","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","fetchData","result","getItem","parse","console","log","checkAndStartTask","then","iniresult","loadUserProspect","getProspect","consultPrincipalDebtor","loadIdentifications","Promise","resolve","reject","consultarCatalogoTipoIdentificacion","catch","handleReturn","handleClose","handleSaveFacility","newItem","newFacilities","allSettled","resp","PrincipalDebtor","value","customerNumberT24","err","onSaveProcess","option","PROCESS_CANCELPROCESS","saveJBPMProcess","maindebtor","infoBpmModel","instanceId","transactId","personName","typePerson","name2","lastName","lastName2","PROCESS_ANALISISCREDITO","PROCESS_INFORMEFINANCIERO","PROCESS_INFORMEGESTION","abortProcess","saveAutoLog","APPLICATION_STATUS_CANC","showMessage","processId","activityId","ACT_NONE","values","toString","updatevariables","pathname","URL_FINANCIALINFO","requestId","completedStatusTask","taskId","APPLICATION_STATUS_DEV","showModalBitacora","APPLICATION_STATUS","observations","BPM_ACTIVITY_04","clientId","id","statusDescription","marginTop","marginBottom","textAlign","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n} from \"reactstrap\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\n// UI Components\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport {\r\n  FacilityListBpm, FacilityListCore, ChangeSummaryReadOnly, CorporateExposure, CorporateExposureClient,\r\n  FacilityList, FinancialSummary,\r\n  GeneralSection\r\n} from \"../../../components/PropuestaCreditoComercial\"\r\n\r\n\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport AttachmentFileCore from \"../../../components/Common/AttachmentFileCore\";\r\nimport * as OPTs from \"../../../helpers/options_helper\";\r\nimport { AttachmentFileInputModel } from '../../../models/Common/AttachmentFileInputModel';\r\nimport HeaderSections from \"../../../components/Common/HeaderSections\";\r\nimport ModalEndProcess from \"../../../components/EndProcess/ModalEndProcess\"\r\n\r\n// Services\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport LoadingOverlay from \"react-loading-overlay\"\r\nimport { translationHelpers, formatCurrency } from '../../../helpers';\r\nimport { success } from \"toastr\"\r\n\r\nimport { InfoBpmModel } from '../../../models/Common/InfoBpmModel';\r\n\r\nimport { LogProcessModel } from '../../../models/Common/LogProcessModel';\r\nimport LogProcess from \"../../../components/LogProcess/index\";\r\nimport FacilityHistory from \"../../../components/Common/FacilityHistory\"\r\n\r\nimport ModalBitacora from \"../../../components/Common/ModalBitacora\";\r\n\r\nimport { saveLogProcess } from \"../../../helpers/logs_helper\";\r\n\r\nimport HorizontalSteeper from \"../../../components/Common/HorizontalSteeper\";\r\nimport ExposicionCorportativa from \"../5_PropuestaCredito/Secciones/ExposicionCorporativa\"\r\nimport ExposicionCorporativaClientes from \"../5_PropuestaCredito/Secciones/ExposicionCorporativaCliente\"\r\n\r\nconst CommercialCreditProposalPage = (props) => {\r\n\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const { t, i18n } = useTranslation();\r\n  const [locationData, setLocationData] = useState(null);\r\n\r\n  const sumaryData = {\r\n    client: {\r\n      name: 'Nombre Deudor'\r\n    },\r\n    financialStatus: {\r\n      headers: ['Auditados Dic-18', 'Auditados Dic-19', 'Auditados Dic-20', 'Proyecciones Dic-21'],\r\n      items: [\r\n        {\r\n          label: 'Clasificación SAFI',\r\n          data: ['-', '-', '5:6 Riesgo', '-']\r\n        },\r\n        {\r\n          label: 'Crecimiento',\r\n          data: ['-', '-3.4%', '-12.5%', '0.0%']\r\n        },\r\n        {\r\n          label: 'Costo de Ventas',\r\n          data: ['(1550)66.2%', '(1510)66.8%', '(1360)68.8%', '(1360)68.8%']\r\n        },\r\n        {\r\n          label: 'Beneficio Mutuo en Operaciones',\r\n          data: ['(790)66.2%', '(751)66.8%', '(618)68.8%', '(618)68.8%']\r\n        },\r\n        {\r\n          label: 'Margen Bruto',\r\n          data: ['', '', '', '']\r\n        }\r\n      ]\r\n    },\r\n    balances: {\r\n      active: {\r\n        title: t('Active Balance'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      },\r\n      passive: {\r\n        title: t('Passive Balance and Capital'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      },\r\n      application: {\r\n        title: t('Origin and Application Status'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      },\r\n      indicators: {\r\n        title: t('Indicators'),\r\n        headers: [t('Period Date'), '', '', ''],\r\n        items: [\r\n          [t('Months'), '', '', ''],\r\n          [t('Auditor'), '', '', ''],\r\n          [t('Balance Type'), '', '', ''],\r\n          [t('Figures Types'), '', '', ''],\r\n          [t('Coins Types'), '', '', ''],\r\n          [t('Exchange Rates'), '', '', '']\r\n        ]\r\n      }\r\n    },\r\n    debts: {\r\n      short: {\r\n        items: [\r\n          {\r\n            bank: 'Capital Bank',\r\n            purpose: 'Linea de Crédito',\r\n            approvedAmount: 200,\r\n            balanceLastYear: 200,\r\n            balanceLast6Months: 154,\r\n            balanceForecast: 200,\r\n            rate: 7.0,\r\n            surety: 'Fianza'\r\n          },\r\n          {\r\n            bank: 'St Georges',\r\n            purpose: 'Linea de Crédito',\r\n            approvedAmount: 320,\r\n            balanceLastYear: 200,\r\n            balanceLast6Months: 436,\r\n            balanceForecast: 450,\r\n            rate: 7.5,\r\n            surety: 'Fianza'\r\n          },\r\n          {\r\n            bank: 'St Georges',\r\n            purpose: 'TDC',\r\n            approvedAmount: 11,\r\n            balanceLastYear: 11,\r\n            balanceLast6Months: 0,\r\n            balanceForecast: 11,\r\n            rate: null,\r\n            surety: ''\r\n          }\r\n        ]\r\n      },\r\n      long: {\r\n        items: [\r\n          {\r\n            bank: 'Banesco',\r\n            purpose: 'Préstamo',\r\n            approvedAmount: 126,\r\n            balanceLastYear: 0,\r\n            balanceLast6Months: 0,\r\n            balanceForecast: 126,\r\n            rate: 6.5,\r\n            surety: 'Bien Inmueble'\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    history: {\r\n      headers: [\r\n        t('# days', { days: 30 }),\r\n        t('# days', { days: 60 }),\r\n        t('# days', { days: 90 }),\r\n        t('# days', { days: 120 }),\r\n        t('# days', { days: 150 }),\r\n        t('# days', { days: 180 }),\r\n        t('# days', { days: 210 }),\r\n        t('# days', { days: 240 }),\r\n        t('# days', { days: 270 }),\r\n        t('# days', { days: 300 }),\r\n        t('# days', { days: 330 }),\r\n        t('+# days', { days: 331 }),\r\n        t('Totals')\r\n      ],\r\n      data: [\r\n        {\r\n          name: 'Banesco',\r\n          data: [100, 80, 80, 80, 100, 80, 80, 80, 100, 80, 80, 200, 0]\r\n        },\r\n        {\r\n          name: 'Banesco',\r\n          data: [100, 80, 80, 80, 100, 80, 80, 80, 100, 80, 80, 200, 0]\r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  const [proposal, setProposal] = useState(null);\r\n  const [changeSummaryItems, setChangeSummaryItems] = useState([]);\r\n  const [facilityListItems, setFacilityListItems] = useState([]);\r\n  const [identificationList, setIdentificationList] = useState([]);\r\n  const [financialSummary, setFinancialSummary] = useState(sumaryData);\r\n  const [prospect, setProspect] = useState({});\r\n  const [isActiveLoading, setIsActiveLoading] = useState(true);\r\n  const [personId, setpersonId] = useState(null);\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n\r\n  //mostrar el modal para la opción de finalizar proceso\r\n  const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\r\n  const [messageDlg, setmessageDlg] = useState({ msg: \"\", show: false, error: false });\r\n\r\n\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n  const [coreServices, setcoreServices] = useState(new CoreServices());\r\n\r\n  const [displayModalBitacora, setdisplayModalBitacora] = useState(false);\r\n  const [optionSelected, setoptionSelected] = useState(null);\r\n\r\n  //On Mounting (componentDidMount)\r\n  useEffect(() => {\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        fetchData(location.data);\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        fetchData(result);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  //Caraga Inicial de datos\r\n  function fetchData(locationData) {\r\n\r\n    console.log(\"fetchData\", locationData);\r\n    //chequear si la tarea no ha sido iniciada\r\n    bpmServices.checkAndStartTask(locationData)\r\n      .then((iniresult) => {\r\n        if (iniresult === false) {\r\n          history.push(url.URL_DASHBOARD);\r\n        }\r\n      })\r\n\r\n    loadUserProspect(locationData.transactionId)\r\n    getProspect(locationData);\r\n  }\r\n\r\n  function loadUserProspect(transactionId) {\r\n    // consultarDeudorPrincipal\r\n    backendServices.consultPrincipalDebtor(transactionId)\r\n      .then((data) => {\r\n        if (data !== undefined) {\r\n          setmainDebtor(data);\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n\r\n  function loadIdentifications() {\r\n\r\n    return new Promise((resolve, reject) => {\r\n      backendServices.consultarCatalogoTipoIdentificacion()\r\n        .then((data) => {\r\n          if (data !== null && data !== undefined) {\r\n            setIdentificationList(data);\r\n          }\r\n          resolve();\r\n        })\r\n        .catch((error) => {\r\n          resolve();\r\n          console.error('api error: ', error);\r\n        });\r\n    })\r\n  }\r\n\r\n  function handleReturn() {\r\n    history.push(url.URL_DASHBOARD);\r\n  }\r\n\r\n  function handleClose() {\r\n    history.push(url.URL_DASHBOARD);\r\n  }\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n  function getProspect(locationData) {\r\n    Promise.allSettled([\r\n      //backServices.consultarUsuarioProspecto(location.data.transactionId),\r\n      //backServices.consultProspectUser(location.data.transactionId),\r\n      backendServices.consultPrincipalDebtor(locationData.transactionId),\r\n      loadIdentifications()\r\n    ]).then((resp) => {\r\n      const [{ value: PrincipalDebtor }] = resp;\r\n      console.log(resp, location, PrincipalDebtor);\r\n      setIsActiveLoading(false);\r\n      let customerNumberT24 = PrincipalDebtor.customerNumberT24;\r\n      setProspect(customerNumberT24);\r\n      //loadFacilitiesList(customerNumberT24);\r\n      setpersonId(PrincipalDebtor.personId);\r\n    }).catch(err => {\r\n      // console.log(err);\r\n    });\r\n\r\n    // backServices.consultProspectUser(location.data.transactionId).then(async (resp) => {\r\n    //   console.log(resp);\r\n    //   setIsActiveLoading(false)\r\n    //   // customerNumberT24 = resp.customerNumberT24;\r\n    //   setProspect(customerNumberT24);\r\n    //   loadFacilitiesList(customerNumberT24);\r\n    //   fetchProposal();\r\n    // });\r\n\r\n    // backServices.consultPrincipalDebtor(location.data.transactionId).then(async (resp) => {\r\n    //   setpersonId(resp.personId);\r\n    // });\r\n\r\n  }\r\n\r\n  /*\r\n  function loadFacilitiesList(idcliente) {\r\n      return new Promise(function (resolve, reject) {\r\n        coreServices.getFacilitiesByTransaction(locationData.transactionId)\r\n          .then(resp => {\r\n            setFacilityListItems(resp);\r\n            resolve();\r\n          })\r\n          .catch(err => {\r\n            resolve();\r\n          });\r\n      })\r\n    }\r\n  */\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n\r\n  ////////// PARTE ES LA FINAL DEL PROCESO ///////\r\n\r\n  function onSaveProcess(option) {\r\n\r\n    switch (option) {\r\n      case OPTs.PROCESS_CANCELPROCESS: {\r\n        break;\r\n      }\r\n    }\r\n    saveJBPMProcess(option);\r\n  }\r\n  async function saveJBPMProcess(option) {\r\n    var maindebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n    var infoBpmModel = new InfoBpmModel(\r\n      locationData.infoBpmModel?.instanceId ?? locationData.instanceId,\r\n      locationData.infoBpmModel?.transactId ?? locationData.transactionId,\r\n      0, 0,\r\n      maindebtor?.personId\r\n    );\r\n    infoBpmModel.personName = maindebtor !== undefined ? (maindebtor.typePerson == \"2\" ? maindebtor.name : (maindebtor.name + \" \" + maindebtor.name2 + \" \" + maindebtor.lastName + \" \" + maindebtor.lastName2)) : \"\";\r\n\r\n    switch (option) {\r\n      case OPTs.PROCESS_CANCELPROCESS: {\r\n        bpmServices.abortProcess(infoBpmModel.instanceId)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              saveAutoLog(OPTs.APPLICATION_STATUS_CANC, \"\");\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_ANALISISCREDITO: {\r\n        infoBpmModel.processId = OPTs.PROCESS_ANALISISCREDITO;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_ANALISISCREDITO.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId.toString(),\r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              showMessage({ msg: t(\"Datahasbeensavedsuccessfully\"), error: false, show: true });\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_INFORMEFINANCIERO: {\r\n        infoBpmModel.processId = OPTs.PROCESS_INFORMEFINANCIERO;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_INFORMEFINANCIERO.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId.toString(),\r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n\r\n              saveAutoLog(t(\"ActivityHasBeenFinishedSuccessfully\"));\r\n\r\n              history.push({\r\n                pathname: url.URL_FINANCIALINFO,\r\n                data: locationData,\r\n              });\r\n            }\r\n            else {\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_INFORMEGESTION: { //requiere ajustes\r\n        infoBpmModel.processId = OPTs.PROCESS_INFORMEGESTION;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_INFORMEGESTION.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"requestId\": locationData.requestId,\r\n          \"decision\": \"si\",          //requiere ajustes\r\n          \"dcreditoparalelo\": \"sinparalelo\",\r\n          \"statuscredito\": \"completo\", //el paralelo de Credito esta activo\r\n        };\r\n        bpmServices.completedStatusTask(locationData.taskId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              saveAutoLog(OPTs.APPLICATION_STATUS_DEV, t(\"The activity has been returned for adjustment\"));\r\n\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n            }\r\n          });\r\n\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function showMessage(data = null) {\r\n    if (data !== null) {\r\n      setmessageDlg(data)\r\n    }\r\n    else {\r\n      setmessageDlg({ msg: \"\", show: false, error: false })\r\n    }\r\n  }\r\n\r\n  function showModalBitacora(show = true) {\r\n    setdisplayModalBitacora(show);\r\n  }\r\n\r\n  async function saveAutoLog(APPLICATION_STATUS = null, observations = null) {\r\n    var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId);\r\n    var log = new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ANALISISCREDITO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_04)\r\n    log.clientId = mainDebtor?.personId ?? log.clientId;\r\n    log.observations = (observations == null ? t(\"ActivityHasBeenFinishedSuccessfully\") : observations) ?? \"\";\r\n    log.requestId = APPLICATION_STATUS?.id ?? 0;\r\n    log.statusDescription = APPLICATION_STATUS?.name ?? \"\";\r\n    saveLogProcess(log);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {locationData ?\r\n        <div className=\"page-content\">\r\n\r\n          <Breadcrumbs title={t(\"Commercial Credit\")} breadcrumbItem={t(\"Credit Analysis\")} />\r\n\r\n          <HorizontalSteeper processNumber={1} activeStep={2}></HorizontalSteeper>\r\n\r\n          <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n            <Row style={{ marginTop: \"0px\", marginBottom: \"15px\" }}>\r\n              <Col md={6} style={{ textAlign: \"left\" }}>\r\n                <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_CANCELPROCESS); showModalBitacora() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n                <Button color=\"primary\" style={{ margin: '0px 5px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_INFORMEGESTION); showModalBitacora() }}><i className=\"mdi mdi-backspace-outline mid-12px\"></i> {t(\"AdjustRequired\")}</Button>\r\n\r\n              </Col>\r\n              <Col md={6} style={{ textAlign: \"right\" }}>\r\n                <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.PROCESS_ANALISISCREDITO) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n                <Button color=\"success\" type=\"button\"\r\n                  onClick={() => { onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO) }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"FinantialReport\")}</Button>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <Row>\r\n                  <Col md={6}>\r\n                    <h4 className=\"card-title\">{t(\"Credit Analysis\")}</h4>\r\n                    <p className=\"card-title-desc\">{t(\"This form is official and must be filled out correctly\")}</p>\r\n                  </Col>\r\n                  <Col md={6}>\r\n                    <Row>\r\n                      <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                        <h5 className=\"card-title title-header\">{mainDebtor != null ? (mainDebtor.typePerson === \"1\" ? (mainDebtor.name + \" \" + mainDebtor.name2 + \" \" + mainDebtor.lastName + \" \" + mainDebtor.lastName2) : (mainDebtor.name)) : \"\"} </h5>\r\n                      </Col>\r\n                      <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                        <h5 className=\"card-title\" style={{ textAlign: \"right\" }}>{t(\"Tramit\")}:{\" \"}#{locationData?.transactionId}</h5>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n              </CardHeader>\r\n\r\n              <CardBody>\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    <GeneralSection proposal={proposal} prospect={prospect} />\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {mainDebtor ?\r\n                      // <CorporateExposure title={t(\"CorporateExhibition\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      <ExposicionCorportativa activeTab={2} title={t(\"CorporateExhibition\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {mainDebtor ?\r\n                      // <CorporateExposureClient title={t(\"CorporateExhibitionClient\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      <ExposicionCorporativaClientes activeTab={2} title={t(\"CorporateExhibitionClient\")} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n\r\n                    {locationData ?\r\n                      <ChangeSummaryReadOnly transactionId={locationData?.transactionId} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {mainDebtor && locationData ?\r\n                      // <FacilityListCore transactId={locationData.transactionId} customerNumberT24={mainDebtor?.customerNumberT24} />\r\n                      <FacilityHistory validacion={true} transactId={locationData.transactionId} design={true} mainDebtor={mainDebtor} partyId={mainDebtor.customerNumberT24} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    {locationData ?\r\n                      <FacilityListBpm transactionId={locationData?.transactionId} />\r\n                      : null}\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col xl=\"12\">\r\n                    <CardBody>\r\n                      <HeaderSections title=\"Attachments\" t={t}></HeaderSections>\r\n                      {locationData ?\r\n                        <AttachmentFileCore attachmentFileInputModel={new AttachmentFileInputModel(locationData.transactionId, OPTs.PROCESS_ANALISISCREDITO)} />\r\n                        : null}\r\n                    </CardBody>\r\n                  </Col>\r\n                </Row>\r\n\r\n                {/* <Row>\r\n                  <Col xl=\"12\">\r\n                    <CardBody>\r\n                      <FinancialSummary client={financialSummary.client}\r\n                        financialStatus={financialSummary.financialStatus}\r\n                        balances={financialSummary.balances}\r\n                        debts={financialSummary.debts}\r\n                        debtorId={personId}\r\n                      />\r\n                    </CardBody>\r\n                  </Col>\r\n                </Row> */}\r\n              </CardBody>\r\n              <CardFooter>\r\n              </CardFooter>\r\n            </Card>\r\n\r\n\r\n          </LoadingOverlay >\r\n\r\n          {locationData ?\r\n            <LogProcess logProcessModel={new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ANALISISCREDITO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_04)} />\r\n            : null}\r\n\r\n          <Row style={{ marginTop: \"0px\", marginBottom: \"15px\" }}>\r\n            <Col md={6} style={{ textAlign: \"left\" }}>\r\n              <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_CANCELPROCESS); showModalBitacora() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n              <Button color=\"primary\" style={{ margin: '0px 5px' }} type=\"button\" onClick={() => { setoptionSelected(OPTs.PROCESS_INFORMEGESTION); showModalBitacora() }}><i className=\"mdi mdi-backspace-outline mid-12px\"></i> {t(\"AdjustRequired\")}</Button>\r\n\r\n            </Col>\r\n            <Col md={6} style={{ textAlign: \"right\" }}>\r\n              <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.PROCESS_ANALISISCREDITO) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n              <Button color=\"success\" type=\"button\"\r\n                onClick={() => { onSaveProcess(OPTs.PROCESS_INFORMEFINANCIERO) }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"FinantialReport\")}</Button>\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n          {locationData && displayModalBitacora ?\r\n            <ModalBitacora\r\n              logProcessModel={new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ANALISISCREDITO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_04)}\r\n              successSaved={() => { onSaveProcess(optionSelected); }}\r\n              isOpen={displayModalBitacora} toggle={() => { showModalBitacora(false) }} />\r\n            : null}\r\n\r\n          {\r\n            messageDlg && messageDlg.show ? (\r\n              <SweetAlert\r\n                type={messageDlg.error ? \"error\" : \"success\"}\r\n                title={messageDlg.error ? t(\"Error\") : t(\"Message\")}\r\n                confirmButtonText={t(\"Confirm\")}\r\n                cancelButtonText={t(\"Cancel\")}\r\n                onConfirm={() => { showMessage(); }}>\r\n                {messageDlg.msg}\r\n              </SweetAlert>\r\n            ) : null\r\n          }\r\n        </div>\r\n        : null}\r\n    </React.Fragment>\r\n  );\r\n\r\n}\r\n\r\n\r\nexport default CommercialCreditProposalPage;\r\n"]},"metadata":{},"sourceType":"module"}