{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Modal,ModalHeader,ModalBody,Label,Row,Col,Button}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import{useEffect,useState}from'react';import{CoreServices}from'../../../../services';import Select from\"react-select\";import{useTranslation}from\"react-i18next\";import Currency from\"../../../../helpers/currency\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalNewWarrant=function ModalNewWarrant(props){var _dataReturn$commercia,_dataReturn$fastValue;var currencyData=new Currency();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),tipoGaranteSelect=_useState2[0],settipoGaranteSelect=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),campoRequeridoGarantia=_useState4[0],setcampoRequeridoGarantia=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),codigoGarantia=_useState6[0],setcodigoGarantia=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tiposGarantia=_useState8[0],setTiposGarantia=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),dataReturn=_useState10[0],setdataReturn=_useState10[1];var coreServices=new CoreServices();React.useEffect(function(){// Read Api Service data\nvar defaultVal=null;setdataReturn(props.dataSet);settipoGaranteSelect(undefined);try{if(tiposGarantia.length>0&&props.dataSet.guaranteeTypeName!==null&&tipoGaranteSelect===undefined){defaultVal=tiposGarantia.find(function(x){return x.value===props.dataSet.guaranteeTypeName;});if(defaultVal!==undefined){settipoGaranteSelect(defaultVal);}}}catch(err){}},[props,tiposGarantia]);useEffect(function(){loadCatalogWarrant();},[]);function loadCatalogWarrant(){setTiposGarantia(null);// getTipoGarantiaCatalogo\ncoreServices.getTipoGarantiaCatalogo().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}setTiposGarantia(json);});}function handleSubmitGarantias(){if(codigoGarantia==null){setcampoRequeridoGarantia(true);return;}else{setcampoRequeridoGarantia(false);}dataReturn.guaranteeTypeName=codigoGarantia;setdataReturn(dataReturn);props.saveData(dataReturn,props.tipo);props.toggle();}function handleCancel(){props.toggle();}return/*#__PURE__*/_jsxs(Modal,{isOpen:props.isOpen,toggle:props.toggle,centered:true,size:\"md\",children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:props.toggle,color:\"primary\",children:t(\"Warrants\")}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"type\",children:t(\"Warrant Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){settipoGaranteSelect(tiposGarantia.find(function(x){return x.value===e.value;}));setcodigoGarantia(e.value);},options:tiposGarantia,value:tipoGaranteSelect,classNamePrefix:\"select2-selection\",placeholder:t(\"SelectGroup\")}),campoRequeridoGarantia?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"commercialValue\",children:t(\"Commercial Value\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"commercialValue\",type:\"text\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},value:currencyData.format((_dataReturn$commercia=dataReturn===null||dataReturn===void 0?void 0:dataReturn.commercialValue)!==null&&_dataReturn$commercia!==void 0?_dataReturn$commercia:0),onChange:function onChange(e){dataReturn.commercialValue=e.target.value;setdataReturn(dataReturn);},id:\"commercialValue\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"fastValue\",children:t(\"Quick V-Value\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"fastValue\",type:\"text\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},value:currencyData.format((_dataReturn$fastValue=dataReturn===null||dataReturn===void 0?void 0:dataReturn.fastValue)!==null&&_dataReturn$fastValue!==void 0?_dataReturn$fastValue:0),onChange:function onChange(e){dataReturn.fastValue=e.target.value;setdataReturn(dataReturn);},id:\"fastValue\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"observations\",children:t(\"Description\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"observations\",type:\"textarea\",value:dataReturn===null||dataReturn===void 0?void 0:dataReturn.observations,onChange:function onChange(e){dataReturn.observations=e.target.value;setdataReturn(dataReturn);},id:\"observations\",rows:\"4\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"ltv\",children:t(\"LTV%\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"ltv\",max:\"100\",type:\"number\",validate:{number:{value:true,errorMessage:t(\"InvalidField\")}},value:dataReturn===null||dataReturn===void 0?void 0:dataReturn.ltv,onChange:function onChange(e){dataReturn.ltv=e.target.value;setdataReturn(dataReturn);},id:\"ltv\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"appraisalDate\",children:t(\"Appraisal Date\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"appraisalDate\",type:\"date\",value:dataReturn===null||dataReturn===void 0?void 0:dataReturn.appraisalDate,onChange:function onChange(e){dataReturn.appraisalDate=e.target.value;setdataReturn(dataReturn);},id:\"appraisalDate\"})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"my-2\",children:/*#__PURE__*/_jsxs(Col,{xl:\"12 text-end\",children:[/*#__PURE__*/_jsxs(Button,{id:\"btnCancel\",color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:handleCancel,children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),props.botones?/*#__PURE__*/_jsxs(Button,{id:\"btnSearch\",color:\"success\",type:\"button\",onClick:function onClick(e){handleSubmitGarantias();},style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",\" \",t(\"Save\")]}):null]})})]})]});};export default ModalNewWarrant;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/ModalNewWarrant.js"],"names":["React","Modal","ModalHeader","ModalBody","Label","Row","Col","Button","AvForm","AvField","AvGroup","useEffect","useState","CoreServices","Select","useTranslation","Currency","ModalNewWarrant","props","currencyData","t","i18n","undefined","tipoGaranteSelect","settipoGaranteSelect","campoRequeridoGarantia","setcampoRequeridoGarantia","codigoGarantia","setcodigoGarantia","tiposGarantia","setTiposGarantia","dataReturn","setdataReturn","coreServices","defaultVal","dataSet","length","guaranteeTypeName","find","x","value","err","loadCatalogWarrant","getTipoGarantiaCatalogo","then","response","json","i","Records","push","label","handleSubmitGarantias","saveData","tipo","toggle","handleCancel","isOpen","e","getRealValue","target","format","commercialValue","fastValue","observations","number","errorMessage","ltv","appraisalDate","margin","botones"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    Label,\r\n    Row,\r\n    Col,\r\n    Button\r\n} from \"reactstrap\"\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport { useEffect, useState } from 'react';\r\nimport { CoreServices } from '../../../../services';\r\nimport Select from \"react-select\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Currency from \"../../../../helpers/currency\";\r\nconst ModalNewWarrant = (props) => {\r\n    const currencyData = new Currency();\r\n    const { t, i18n } = useTranslation();\r\n    const [tipoGaranteSelect, settipoGaranteSelect] = useState(undefined);\r\n    const [campoRequeridoGarantia, setcampoRequeridoGarantia] = useState(false);\r\n    const [codigoGarantia, setcodigoGarantia] = useState(null);\r\n    const [tiposGarantia, setTiposGarantia] = useState([]);\r\n    const [dataReturn, setdataReturn] = useState(null);\r\n    const coreServices = new CoreServices();\r\n    React.useEffect(() => {\r\n        // Read Api Service data\r\n        var defaultVal = null;\r\n        setdataReturn(props.dataSet)\r\n        settipoGaranteSelect(undefined)\r\n        try {\r\n            if (tiposGarantia.length > 0 && props.dataSet.guaranteeTypeName !== null && tipoGaranteSelect === undefined) {\r\n                defaultVal = tiposGarantia.find(x => x.value === props.dataSet.guaranteeTypeName);\r\n                if (defaultVal !== undefined) {\r\n                    settipoGaranteSelect(defaultVal);\r\n                }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n    }, [props, tiposGarantia]);\r\n    useEffect(() => {\r\n        loadCatalogWarrant();\r\n    }, []);\r\n\r\n    function loadCatalogWarrant() {\r\n        setTiposGarantia(null)\r\n        // getTipoGarantiaCatalogo\r\n        coreServices.getTipoGarantiaCatalogo().then((response) => {\r\n            if (response === null) { return; }\r\n            let json = [];\r\n            for (let i = 0; i < response.Records.length; i++) { json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] }) }\r\n            setTiposGarantia(json);\r\n        });\r\n    }\r\n    function handleSubmitGarantias() {\r\n        if (codigoGarantia == null) {\r\n            setcampoRequeridoGarantia(true);\r\n            return;\r\n        } else {\r\n            setcampoRequeridoGarantia(false);\r\n        }\r\n        dataReturn.guaranteeTypeName = codigoGarantia;\r\n        setdataReturn(dataReturn);\r\n        props.saveData(dataReturn, props.tipo);\r\n        props.toggle();\r\n    }\r\n    function handleCancel() {\r\n        props.toggle();\r\n    }\r\n    return (\r\n        <Modal isOpen={props.isOpen}\r\n            toggle={props.toggle}\r\n            centered={true}\r\n            size=\"md\">\r\n            <ModalHeader toggle={props.toggle} color=\"primary\">{t(\"Warrants\")}</ModalHeader>\r\n            <ModalBody>\r\n                <Row>\r\n                    <Col lg=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"type\">{t(\"Warrant Type\")}</Label>\r\n                            <Select\r\n                                onChange={(e) => {\r\n                                    settipoGaranteSelect(tiposGarantia.find(x => x.value === e.value)); setcodigoGarantia(e.value);\r\n                                }}\r\n                                options={tiposGarantia}\r\n                                value={tipoGaranteSelect}\r\n                                classNamePrefix=\"select2-selection\"\r\n                                placeholder={t(\"SelectGroup\")}\r\n                            />\r\n                            {campoRequeridoGarantia ?\r\n                                <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                                : null}\r\n                        </AvGroup>\r\n                    </Col>\r\n                    <Col lg=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"commercialValue\">{t(\"Commercial Value\")}</Label>\r\n                            <AvField\r\n                                className=\"form-control\"\r\n                                name=\"commercialValue\"\r\n                                type=\"text\"\r\n                                pattern=\"^[0-9,.]*$\"\r\n                                onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                                value={currencyData.format(dataReturn?.commercialValue ?? 0)}\r\n                                onChange={(e) => { dataReturn.commercialValue = e.target.value; setdataReturn(dataReturn); }}\r\n                                id=\"commercialValue\" />\r\n                        </AvGroup>\r\n\r\n                    </Col>\r\n                    <Col lg=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"fastValue\">{t(\"Quick V-Value\")}</Label>\r\n                            <AvField\r\n                                className=\"form-control\"\r\n                                name=\"fastValue\"\r\n                                type=\"text\"\r\n                                pattern=\"^[0-9,.]*$\"\r\n                                onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                                value={currencyData.format(dataReturn?.fastValue ?? 0)}\r\n                                onChange={(e) => { dataReturn.fastValue = e.target.value; setdataReturn(dataReturn); }}\r\n                                id=\"fastValue\" />\r\n                        </AvGroup>\r\n\r\n                    </Col>\r\n                    <Col lg=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"observations\">{t(\"Description\")}</Label>\r\n                            <AvField\r\n                                className=\"form-control\"\r\n                                name=\"observations\"\r\n                                type=\"textarea\"\r\n                                value={dataReturn?.observations}\r\n                                onChange={(e) => { dataReturn.observations = e.target.value; setdataReturn(dataReturn); }}\r\n                                id=\"observations\"\r\n                                rows=\"4\" />\r\n                        </AvGroup>\r\n\r\n                    </Col>\r\n                    <Col lg=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"ltv\">{t(\"LTV%\")}</Label>\r\n                            <AvField\r\n                                className=\"form-control\"\r\n                                name=\"ltv\"\r\n                                max=\"100\"\r\n                                type=\"number\"\r\n                                validate={{\r\n                                    number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                                }}\r\n                                value={dataReturn?.ltv}\r\n                                onChange={(e) => { dataReturn.ltv = e.target.value; setdataReturn(dataReturn); }}\r\n                                id=\"ltv\" />\r\n                        </AvGroup>\r\n\r\n                    </Col>\r\n                    <Col lg=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"appraisalDate\">{t(\"Appraisal Date\")}</Label>\r\n                            <AvField\r\n                                className=\"form-control\"\r\n                                name=\"appraisalDate\"\r\n                                type=\"date\"\r\n                                value={dataReturn?.appraisalDate}\r\n                                onChange={(e) => { dataReturn.appraisalDate = e.target.value; setdataReturn(dataReturn); }}\r\n                                id=\"appraisalDate\" />\r\n                        </AvGroup>\r\n                    </Col>\r\n                </Row>\r\n                <Row className=\"my-2\">\r\n                    <Col xl=\"12 text-end\">\r\n                        <Button id=\"btnCancel\" color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={handleCancel}>\r\n                            <i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"Cancel\")}\r\n                        </Button>\r\n                        {props.botones ?\r\n                            <Button id=\"btnSearch\" color=\"success\" type=\"button\" onClick={(e) => { handleSubmitGarantias() }} style={{ margin: '5px' }}><i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n                                {\" \"} {t(\"Save\")}\r\n                            </Button> : null}\r\n                    </Col>\r\n                </Row>\r\n            </ModalBody>\r\n        </Modal>\r\n    )\r\n};\r\nModalNewWarrant.propTypes = {\r\n    toggle: PropTypes.func,\r\n    isOpen: PropTypes.bool\r\n};\r\nexport default ModalNewWarrant;\r\n"]},"metadata":{},"sourceType":"module"}