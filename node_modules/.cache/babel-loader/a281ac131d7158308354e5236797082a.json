{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useLocation}from'react-router-dom';import{translationHelpers}from\"../../helpers\";import{Row,Col,Button,Label,Input,Modal,ModalHeader,ModalBody,Card,CardBody,CardFooter,Table}from\"reactstrap\";import CoreServices from'../../services/CoreServices/Services';import{BackendServices}from\"../../services\";import*as moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalReportingServices=function ModalReportingServices(props){var _location$data;var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var location=useLocation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),records=_useState2[0],setRecords=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),customerNumberT24=_useState4[0],setcustomerNumberT24=_useState4[1];var backendServices=new BackendServices();var coreServices=new CoreServices();var _useState5=useState((_location$data=location.data)!==null&&_location$data!==void 0?_location$data:JSON.parse(sessionStorage.getItem('locationData'))),_useState6=_slicedToArray(_useState5,2),dataLocation=_useState6[0],setData=_useState6[1];useEffect(function(){// const partyId = \"600133774\";\nvar transactionId=dataLocation.transactionId;Promise.allSettled([backendServices.consultPrincipalDebtor(transactionId)]).then(function(resp){var _resp=_slicedToArray(resp,1),PrincipalDebtor=_resp[0].value;fetchReportingServices(PrincipalDebtor.customerNumberT24);});},[]);function fetchProspect(transactionId){// console.log('fetchProspect', transactionId);\nreturn backendServices.consultPrincipalDebtor(transactionId).then(function(resp){// console.log('prospecto', resp);\nsetcustomerNumberT24(resp.customerNumberT24);return resp.customerNumberT24;}).catch(function(error){console.error('error fetching prospect',error);});}function fetchReportingServices(customerNumberT24){coreServices.getReportingServices(customerNumberT24).then(function(reportingServices){// console.log('reportingServices', reportingServices);\nif(!reportingServices||!reportingServices.Status){throw new Error('Error Fetching Data');}if(reportingServices.Status.StatusCode!==\"M0000\"){throw new Error('Invalid Status Response');}setRecords(reportingServices.records);}).catch(function(error){console.error('error fetching reporting services',error);});}var fields=[{key:'ACT_ECON',label:'ACT_ECON',type:'number'},{key:'BANCA',label:'BANCA',type:'text'},{key:'CENTRO_COSTO',label:'CENTRO COSTO',type:'number'},{key:'CLASIFICACION',label:'CLASIFICACION',type:'text'},{key:'CLIENTE_RUC',label:'RUC',type:'text'},{key:'COD_OFIC',label:'COD_OFIC',type:'text'},{key:'COD_OFIC2',label:'COD_OFIC2',type:'text'},{key:'CUENTA_CONTABLE',label:'CUENTA CONTABLE',type:'text'},{key:'CUOTA_XPAGAR',label:'CUOTA X PAGAR',type:'number'},{key:'DIAS_MORA',label:'DIAS MORA',type:'number'},{key:'FECHA',label:'FECHA',type:'date'},{key:'FECHA_INI',label:'FECHA INI',type:'date'},{key:'FECHA_FIN',label:'FECHA FIN',type:'date'},{key:'FECHA_REFIN',label:'FECHA REFIN',type:'text'},{key:'FECHA_RENEG',label:'FECHA RENEG',type:'text'},{key:'G1',label:'G1',type:'text'},{key:'G2',label:'G2',type:'text'},{key:'G3',label:'G3',type:'text'},{key:'G4',label:'G4',type:'text'},{key:'G5',label:'G5',type:'text'},{key:'GRUPO_ECON',label:'GRUPO_ECON',type:'text'},{key:'GRUPO_RUC',label:'GRUPO_RUC',type:'text'},{key:'INT_PC',label:'INT_PC',type:'number'},{key:'LOC_EXT',label:'LOC_EXT',type:'text'},{key:'MONEDA',label:'MONEDA',type:'text'},{key:'MONTO_G1',label:'MONTO G1',type:'number'},{key:'MONTO_G2',label:'MONTO G2',type:'number'},{key:'MONTO_G3',label:'MONTO G3',type:'number'},{key:'MONTO_G4',label:'MONTO G4',type:'number'},{key:'MONTO_G5',label:'MONTO G5',type:'number'},{key:'MONTO_IN',label:'MONTO IN',type:'number'},{key:'NOMBRE_CLIENTE',label:'NOMBRE CLIENTE',type:'text'},{key:'NUM_CLIENTE',label:'NUM CLIENTE',type:'text'},{key:'NUM_LINEA',label:'NUM LINEA',type:'text'},{key:'NUM_OPS',label:'NUM OPS',type:'text'},{key:'N_CUOTAS_VENCER',label:'NUM CUOTAS VENCER',type:'number'},{key:'N_CUOTA_VENCIDAS',label:'NUM CUOTAS VENCIDAS',type:'number'},{key:'PER_CAP',label:'PER CAP',type:'text'},{key:'PER_INT',label:'PER INT',type:'text'},{key:'PRODUCTO',label:'PRODUCTO',type:'text'},{key:'PRODUCTO1',label:'PRODUCTO1',type:'text'},{key:'PRODUCTO2',label:'PRODUCTO2',type:'text'},{key:'PRODUCTO3',label:'PRODUCTO3',type:'text'},{key:'PROV_NIIF',label:'PROV NIIF',type:'number'},{key:'PROV_PAIS',label:'PROV PAIS',type:'number'},{key:'PROV_REG',label:'PROV REG',type:'number'},{key:'PROX_CAP',label:'PROX CAP',type:'date'},{key:'PROX_INT',label:'PROX INT',type:'date'},{key:'RANGO_MORA',label:'RANGO MORA',type:'text'},{key:'REGION',label:'REGION',type:'text'},{key:'SALDO',label:'SALDO',type:'number'},{key:'SECTOR1',label:'SECTOR1',type:'text'},{key:'SECTOR2',label:'SECTOR2',type:'text'},{key:'SECTOR3',label:'SECTOR3',type:'text'},{key:'SECTOR4',label:'SECTOR4',type:'text'},{key:'SUCURSAL',label:'SUCURSAL',type:'text'},{key:'TASA_INT',label:'TASA INT',type:'number'},{key:'TNO_EMPRESA',label:'TNO EMPRESA',type:'text'},{key:'T_CREDITO',label:'T_CREDITO',type:'text'},{key:'T_FACILIDAD',label:'T_FACILIDAD',type:'text'},{key:'T_RELACION',label:'T_RELACION',type:'text'},{key:'VENCIDOS1A',label:'VENCIDOS1A',type:'number'},{key:'VENCIDOS30',label:'VENCIDOS30',type:'number'},{key:'VENCIDOS60',label:'VENCIDOS60',type:'number'},{key:'VENCIDOS90',label:'VENCIDOS90',type:'number'},{key:'VENCIDOS120',label:'VENCIDOS120',type:'number'},{key:'VENCIDOS180',label:'VENCIDOS180',type:'number'},{key:'VENCIDOSM1A',label:'VENCIDOSM1A',type:'number'},{key:'X_VENCER1A',label:'X_VENCER1A',type:'number'},{key:'X_VENCER5A',label:'X_VENCER5A',type:'number'},{key:'X_VENCER10A',label:'X_VENCER10A',type:'number'},{key:'X_VENCER30',label:'X_VENCER30',type:'number'},{key:'X_VENCER60',label:'X_VENCER60',type:'number'},{key:'X_VENCER90',label:'X_VENCER90',type:'number'},{key:'X_VENCER120',label:'X_VENCER120',type:'number'},{key:'X_VENCER180',label:'X_VENCER180',type:'number'},{key:'X_VENCERM10A',label:'X_VENCERM10A',type:'number'}];var cellAlign=function cellAlign(type){return type==='number'?'text-end':'';};var formatCell=function formatCell(value,type){switch(type){case'date':var m=moment(value,'YYYYMMDD');return m.format('DD/MM/YYYY');default:return value;}};var headerRow=/*#__PURE__*/_jsx(\"tr\",{children:fields.map(function(field,index){return/*#__PURE__*/_jsx(\"th\",{className:cellAlign(field.type),children:field.label},index);})});var rows=records.map(function(record,index){var cols=fields.map(function(field){return/*#__PURE__*/_jsx(\"td\",{className:cellAlign(field.type),children:formatCell(record[field.key],field.type)},index);});return/*#__PURE__*/_jsx(\"tr\",{children:cols},index);});return/*#__PURE__*/_jsxs(Modal,{isOpen:props.isOpen,toggle:props.toggle,centered:true,size:\"xl\",children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:props.toggle,color:\"primary\",children:t(\"Reporting Services\")}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsx(Row,{className:\"mt-2\",children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsxs(Table,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:headerRow}),/*#__PURE__*/_jsx(\"tbody\",{children:rows})]})})})})]});};export default ModalReportingServices;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/InformeFinanciero/ModalReportingServices.js"],"names":["React","useState","useEffect","useLocation","translationHelpers","Row","Col","Button","Label","Input","Modal","ModalHeader","ModalBody","Card","CardBody","CardFooter","Table","CoreServices","BackendServices","moment","ModalReportingServices","props","t","c","location","records","setRecords","customerNumberT24","setcustomerNumberT24","backendServices","coreServices","data","JSON","parse","sessionStorage","getItem","dataLocation","setData","transactionId","Promise","allSettled","consultPrincipalDebtor","then","resp","PrincipalDebtor","value","fetchReportingServices","fetchProspect","catch","error","console","getReportingServices","reportingServices","Status","Error","StatusCode","fields","key","label","type","cellAlign","formatCell","m","format","headerRow","map","field","index","rows","record","cols","isOpen","toggle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { translationHelpers } from \"../../helpers\";\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  Table,\r\n} from \"reactstrap\"\r\n\r\nimport CoreServices from '../../services/CoreServices/Services';\r\nimport { BackendServices } from \"../../services\";\r\nimport * as moment from 'moment';\r\n\r\nconst ModalReportingServices = (props) => {\r\n\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n\r\n  const location = useLocation();\r\n  const [records, setRecords] = useState([]);\r\n  const [customerNumberT24, setcustomerNumberT24] = useState(null);\r\n\r\n  const backendServices = new BackendServices();\r\n  const coreServices = new CoreServices();\r\n\r\n  const [dataLocation, setData] = useState(location.data ?? JSON.parse(sessionStorage.getItem('locationData')));\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    // const partyId = \"600133774\";\r\n    const transactionId = dataLocation.transactionId;\r\n\r\n    Promise.allSettled([\r\n      backendServices.consultPrincipalDebtor(transactionId)\r\n    ]).then(resp => {\r\n      const [{ value: PrincipalDebtor }] = resp;\r\n      fetchReportingServices(PrincipalDebtor.customerNumberT24);\r\n    });\r\n\r\n  }, []);\r\n\r\n  function fetchProspect(transactionId) {\r\n    // console.log('fetchProspect', transactionId);\r\n    return backendServices.consultPrincipalDebtor(transactionId)\r\n      .then(resp => {\r\n        // console.log('prospecto', resp);\r\n        setcustomerNumberT24(resp.customerNumberT24);\r\n        return resp.customerNumberT24;\r\n      })\r\n      .catch((error) => {\r\n        console.error('error fetching prospect', error);\r\n      })\r\n  }\r\n\r\n  function fetchReportingServices(customerNumberT24) {\r\n    coreServices.getReportingServices(customerNumberT24)\r\n      .then((reportingServices) => {\r\n        // console.log('reportingServices', reportingServices);\r\n        if (!reportingServices || !reportingServices.Status) {\r\n          throw new Error('Error Fetching Data');\r\n        }\r\n        if (reportingServices.Status.StatusCode !== \"M0000\") {\r\n          throw new Error('Invalid Status Response');\r\n        }\r\n        setRecords(reportingServices.records);\r\n      })\r\n      .catch((error) => {\r\n        console.error('error fetching reporting services', error);\r\n      });\r\n  }\r\n\r\n  const fields = [\r\n    { key: 'ACT_ECON', label: 'ACT_ECON', type: 'number' },\r\n    { key: 'BANCA', label: 'BANCA', type: 'text' },\r\n    { key: 'CENTRO_COSTO', label: 'CENTRO COSTO', type: 'number' },\r\n    { key: 'CLASIFICACION', label: 'CLASIFICACION', type: 'text' },\r\n    { key: 'CLIENTE_RUC', label: 'RUC', type: 'text' },\r\n    { key: 'COD_OFIC', label: 'COD_OFIC', type: 'text' },\r\n    { key: 'COD_OFIC2', label: 'COD_OFIC2', type: 'text' },\r\n    { key: 'CUENTA_CONTABLE', label: 'CUENTA CONTABLE', type: 'text' },\r\n    { key: 'CUOTA_XPAGAR', label: 'CUOTA X PAGAR', type: 'number' },\r\n    { key: 'DIAS_MORA', label: 'DIAS MORA', type: 'number' },\r\n    { key: 'FECHA', label: 'FECHA', type: 'date' },\r\n    { key: 'FECHA_INI', label: 'FECHA INI', type: 'date' },\r\n    { key: 'FECHA_FIN', label: 'FECHA FIN', type: 'date' },\r\n    { key: 'FECHA_REFIN', label: 'FECHA REFIN', type: 'text' },\r\n    { key: 'FECHA_RENEG', label: 'FECHA RENEG', type: 'text' },\r\n    { key: 'G1', label: 'G1', type: 'text' },\r\n    { key: 'G2', label: 'G2', type: 'text' },\r\n    { key: 'G3', label: 'G3', type: 'text' },\r\n    { key: 'G4', label: 'G4', type: 'text' },\r\n    { key: 'G5', label: 'G5', type: 'text' },\r\n    { key: 'GRUPO_ECON', label: 'GRUPO_ECON', type: 'text' },\r\n    { key: 'GRUPO_RUC', label: 'GRUPO_RUC', type: 'text' },\r\n    { key: 'INT_PC', label: 'INT_PC', type: 'number' },\r\n    { key: 'LOC_EXT', label: 'LOC_EXT', type: 'text' },\r\n    { key: 'MONEDA', label: 'MONEDA', type: 'text' },\r\n    { key: 'MONTO_G1', label: 'MONTO G1', type: 'number' },\r\n    { key: 'MONTO_G2', label: 'MONTO G2', type: 'number' },\r\n    { key: 'MONTO_G3', label: 'MONTO G3', type: 'number' },\r\n    { key: 'MONTO_G4', label: 'MONTO G4', type: 'number' },\r\n    { key: 'MONTO_G5', label: 'MONTO G5', type: 'number' },\r\n    { key: 'MONTO_IN', label: 'MONTO IN', type: 'number' },\r\n    { key: 'NOMBRE_CLIENTE', label: 'NOMBRE CLIENTE', type: 'text' },\r\n    { key: 'NUM_CLIENTE', label: 'NUM CLIENTE', type: 'text' },\r\n    { key: 'NUM_LINEA', label: 'NUM LINEA', type: 'text' },\r\n    { key: 'NUM_OPS', label: 'NUM OPS', type: 'text' },\r\n    { key: 'N_CUOTAS_VENCER', label: 'NUM CUOTAS VENCER', type: 'number' },\r\n    { key: 'N_CUOTA_VENCIDAS', label: 'NUM CUOTAS VENCIDAS', type: 'number' },\r\n    { key: 'PER_CAP', label: 'PER CAP', type: 'text' },\r\n    { key: 'PER_INT', label: 'PER INT', type: 'text' },\r\n    { key: 'PRODUCTO', label: 'PRODUCTO', type: 'text' },\r\n    { key: 'PRODUCTO1', label: 'PRODUCTO1', type: 'text' },\r\n    { key: 'PRODUCTO2', label: 'PRODUCTO2', type: 'text' },\r\n    { key: 'PRODUCTO3', label: 'PRODUCTO3', type: 'text' },\r\n    { key: 'PROV_NIIF', label: 'PROV NIIF', type: 'number' },\r\n    { key: 'PROV_PAIS', label: 'PROV PAIS', type: 'number' },\r\n    { key: 'PROV_REG', label: 'PROV REG', type: 'number' },\r\n    { key: 'PROX_CAP', label: 'PROX CAP', type: 'date' },\r\n    { key: 'PROX_INT', label: 'PROX INT', type: 'date' },\r\n    { key: 'RANGO_MORA', label: 'RANGO MORA', type: 'text' },\r\n    { key: 'REGION', label: 'REGION', type: 'text' },\r\n    { key: 'SALDO', label: 'SALDO', type: 'number' },\r\n    { key: 'SECTOR1', label: 'SECTOR1', type: 'text' },\r\n    { key: 'SECTOR2', label: 'SECTOR2', type: 'text' },\r\n    { key: 'SECTOR3', label: 'SECTOR3', type: 'text' },\r\n    { key: 'SECTOR4', label: 'SECTOR4', type: 'text' },\r\n    { key: 'SUCURSAL', label: 'SUCURSAL', type: 'text' },\r\n    { key: 'TASA_INT', label: 'TASA INT', type: 'number' },\r\n    { key: 'TNO_EMPRESA', label: 'TNO EMPRESA', type: 'text' },\r\n    { key: 'T_CREDITO', label: 'T_CREDITO', type: 'text' },\r\n    { key: 'T_FACILIDAD', label: 'T_FACILIDAD', type: 'text' },\r\n    { key: 'T_RELACION', label: 'T_RELACION', type: 'text' },\r\n    { key: 'VENCIDOS1A', label: 'VENCIDOS1A', type: 'number' },\r\n    { key: 'VENCIDOS30', label: 'VENCIDOS30', type: 'number' },\r\n    { key: 'VENCIDOS60', label: 'VENCIDOS60', type: 'number' },\r\n    { key: 'VENCIDOS90', label: 'VENCIDOS90', type: 'number' },\r\n    { key: 'VENCIDOS120', label: 'VENCIDOS120', type: 'number' },\r\n    { key: 'VENCIDOS180', label: 'VENCIDOS180', type: 'number' },\r\n    { key: 'VENCIDOSM1A', label: 'VENCIDOSM1A', type: 'number' },\r\n    { key: 'X_VENCER1A', label: 'X_VENCER1A', type: 'number' },\r\n    { key: 'X_VENCER5A', label: 'X_VENCER5A', type: 'number' },\r\n    { key: 'X_VENCER10A', label: 'X_VENCER10A', type: 'number' },\r\n    { key: 'X_VENCER30', label: 'X_VENCER30', type: 'number' },\r\n    { key: 'X_VENCER60', label: 'X_VENCER60', type: 'number' },\r\n    { key: 'X_VENCER90', label: 'X_VENCER90', type: 'number' },\r\n    { key: 'X_VENCER120', label: 'X_VENCER120', type: 'number' },\r\n    { key: 'X_VENCER180', label: 'X_VENCER180', type: 'number' },\r\n    { key: 'X_VENCERM10A', label: 'X_VENCERM10A', type: 'number' },\r\n  ];\r\n\r\n  const cellAlign = (type) => {\r\n    return type === 'number' ? 'text-end' : ''\r\n  };\r\n\r\n  const formatCell = (value, type) => {\r\n    switch (type) {\r\n      case 'date':\r\n        const m = moment(value, 'YYYYMMDD');\r\n        return m.format('DD/MM/YYYY');\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  const headerRow = (<tr>\r\n    {fields.map((field, index) => <th key={index} className={cellAlign(field.type)}>{field.label}</th>)}\r\n  </tr>);\r\n\r\n  const rows = records.map((record, index) => {\r\n\r\n    const cols = fields.map((field) => (\r\n      <td key={index} className={cellAlign(field.type)}>{formatCell(record[field.key], field.type)}</td>\r\n    ));\r\n\r\n    return (<tr key={index}>\r\n      {cols}\r\n    </tr>)\r\n  })\r\n\r\n  return (\r\n    <Modal isOpen={props.isOpen}\r\n      toggle={props.toggle}\r\n      centered={true}\r\n      size=\"xl\">\r\n\r\n      <ModalHeader toggle={props.toggle} color=\"primary\">{t(\"Reporting Services\")}</ModalHeader>\r\n\r\n      <ModalBody>\r\n        <Row className=\"mt-2\">\r\n          <Col xl=\"12\">\r\n            <Table responsive>\r\n              <thead className=\"table-light\">\r\n                {headerRow}\r\n              </thead>\r\n              <tbody>\r\n                {rows}\r\n              </tbody>\r\n            </Table>\r\n          </Col>\r\n        </Row>\r\n      </ModalBody>\r\n    </Modal>);\r\n\r\n};\r\n\r\nModalReportingServices.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  toggle: PropTypes.func,\r\n  // onSelectClient: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ModalReportingServices;\r\n"]},"metadata":{},"sourceType":"module"}