{"ast":null,"code":"import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useRef,useEffect}from\"react\";import{Link}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Table,Card,CardBody,Button,Row,Col,Label}from\"reactstrap\";import{AvForm,AvGroup,AvField,AvFeedback}from\"availity-reactstrap-validation\";import listaFacilidades from\"../../../../api/bpm/propuestacredito/facilidades\";import{Facilidad}from\"../../../../models/PropuestaCredito\";import{BackendServices,CoreServices}from\"../../../../services\";import Select from\"react-select\";import ComisionSeccion from\"./Comision\";import DisbursementSection from\"./DisturbementSeccion\";import WarrantsSection from\"./WarrantsSection\";import SuretiesSection from\"./SuretiesSection\";import Switch from\"react-switch\";import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../../helpers/url_helper\";import Currency from\"../../../../helpers/currency\";import{useTranslation}from\"react-i18next/\";import FacilityHistory from\"../../../../components/Common/FacilityHistory\";import LoadingOverlay from\"react-loading-overlay\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Offsymbol=function Offsymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"No\"]});};var OnSymbol=function OnSymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"Si\"]});};var ListaFacilidad=/*#__PURE__*/React.forwardRef(function(props,ref){var _dataSet$amount,_dataSet$balance,_dataSet$proposalRate,_dataSet$noSubsidyRat,_dataSet$effectiveRat,_dataSet$creditRiskOp;var location=useLocation();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState({\"requestId\":\"\",\"cr\":\"\",\"amount\":0,\"debtor\":\"\",\"clientTypeId\":0,\"balance\":0,\"proposalTypeId\":\"\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":true,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\"\",\"environmentRiskCategory\":0,\"covenant\":\"\",\"environmentRiskOpinion\":\"\",\"finantialCovenant\":\"\",\"legalDocumentation\":\"\",\"creditRiskOpinion\":\"\",\"provision\":\"\",\"numero\":\"\",\"otherConditions\":\"\",\"facilityId\":0}),_useState2=_slicedToArray(_useState,2),dataSet=_useState2[0],setdataSet=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),datosUsuario=_useState4[0],setdatosUsuario=_useState4[1];var _useState5=useState({tipoPropuestaRequerido:false,subPropuestaRequerido:false,tipoFacilidadRequerido:false}),_useState6=_slicedToArray(_useState5,2),dataValidation=_useState6[0],setdataValidation=_useState6[1];var _useState7=useState(location.data),_useState8=_slicedToArray(_useState7,2),context=_useState8[0],setcontext=_useState8[1];var propostalSectionRef=useRef();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),formValid=_useState10[0],setFormValid=_useState10[1];var _useState11=useState(location.data),_useState12=_slicedToArray(_useState11,2),dataLocation=_useState12[0],setData=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),commissions=_useState14[0],setCommissions=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),disbursementTerms=_useState16[0],setDisbursementTerms=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),paymentPrograms=_useState18[0],setPaymentPrograms=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),disbursementMethods=_useState20[0],setDisbursementMethods=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),warrants=_useState22[0],setWarrants=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),sureties=_useState24[0],setSureties=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),garantiaET=_useState26[0],setgarantiaET=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),ViewSeccion=_useState28[0],setViewSeccion=_useState28[1];var backendServices=new BackendServices();// Variables para alertas\nvar _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),successSave_dlg=_useState30[0],setsuccessSave_dlg=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),error_dlg=_useState32[0],seterror_dlg=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),error_msg=_useState34[0],seterror_msg=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),info_dlg=_useState36[0],setinfo_dlg=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),info_msg=_useState38[0],setinfo_msg=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),dynamic_title=_useState40[0],setdynamic_title=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),confirm_alert=_useState42[0],setconfirm_alert=_useState42[1];var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),success_dlg=_useState44[0],setsuccess_dlg=_useState44[1];var _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),applyEscrow=_useState46[0],setapplyEscrow=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),isActiveLoading=_useState48[0],setIsActiveLoading=_useState48[1];var history=useHistory();var currencyData=new Currency();var _useState49=useState(null),_useState50=_slicedToArray(_useState49,2),locationData=_useState50[0],setLocationData=_useState50[1];React.useImperativeHandle(ref,function(){return{submit:function submit(){var validate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var form=document.getElementById('formNewFacility');if(validate){if(formValid){form.requestSubmit();return true;}return false;}else{form.requestSubmit();return true;}},getFormValidation:function getFormValidation(){return formValid;}};});// services\nuseEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}// Read Api Service  ata\n// consultarDeudorPrincipal\nbackendServices.consultPrincipalDebtor(dataSession.transactionId).then(function(resp){dataSet.numero=resp.clientDocId;setdataSet(dataSet);setdatosUsuario(resp);});backendServices.consultEnvironmentalAspectsIGR(dataSession.transactionId).then(function(dataAsp){var _dataAsp$environmenta,_dataAsp$environmenta2;setgarantiaET((_dataAsp$environmenta=dataAsp===null||dataAsp===void 0?void 0:(_dataAsp$environmenta2=dataAsp.environmentalAspectsDTO)===null||_dataAsp$environmenta2===void 0?void 0:_dataAsp$environmenta2.riskClassificationConfirmation)!==null&&_dataAsp$environmenta!==void 0?_dataAsp$environmenta:\"\");});},[]);function handleSubmitFacilidad(event,errors,values){event.preventDefault();if(errors.length>0){return;}console.log(values);// console.log(document.getElementById(\"amount\").value.replace(\",\", \"\"));\nsetIsActiveLoading(true);values.amount=Number(currencyData.getRealValue(values.amount));values.clientTypeId=Number(1);values.balance=Number(currencyData.getRealValue(values.balance));values.proposalRate=Number(currencyData.getRealValue(values.proposalRate));values.noSubsidyRate=Number(currencyData.getRealValue(values.noSubsidyRate));values.effectiveRate=Number(currencyData.getRealValue(values.effectiveRate));values.feci=values.feci==\"true\"?true:false;values.termDays=values.termDays;values.ltv=Number(values.ltv);values.environmentRiskCategory=values.environmentRiskCategory;values.proposalTypeId=tipoPropuestaSelect==undefined?\" \":tipoPropuestaSelect.value;values.proposalTypeName=subPropuestaSelect==undefined?\" \":subPropuestaSelect.value;values.facilityTypeId=tipoFacilidadSelect==undefined?\" \":tipoFacilidadSelect.value;values.termType=terminosSelect==undefined?\" \":terminosSelect.value;values.facilityId=dataSet.facilityId;values.requestId=props.dataGlobal.requestId;values.applyEscrow=applyEscrow!==null&&applyEscrow!==void 0?applyEscrow:false;saveNewFacility(values).then(function(result){// props.onSave(values);\nprops.onDismiss();});}function newFacility(){settipoPropuestaSelect(undefined);setsubPropuestaSelect(undefined);settipoFacilidadSelect(undefined);var data={\"facilityNumber\":\"0\",\"cr\":\"0\",\"amount\":0,\"debtor\":\"  \",\"clientTypeId\":1,\"customer\":{\"id\":\"469303-1-434018\"},\"balance\":0,\"purpose\":\".\",\"sublimits\":\".\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":false,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\" \",\"environmentRiskCategory\":0,\"covenant\":\" \",\"environmentRiskOpinion\":\" \",\"finantialCovenant\":\" \",\"legalDocumentation\":\"  \",\"otherConditions\":\" \",\"creditRiskOpinion\":\" \",\"provision\":\" \",\"proposalTypeId\":\"RE\",\"proposalTypeName\":\"LRCC\",\"facilityTypeId\":\"LCN\",\"termType\":\"\",\"applyEscrow\":false,facilityId:0,\"requestId\":props.dataGlobal.requestId};// nuevoFacilidadPropCred\nbackendServices.newFacilityPropCred(data).then(function(resp){console.log(resp);data.facilityId=resp;setdataSet(data);setViewSeccion(!ViewSeccion);settipoPropuestaSelect(undefined);setsubPropuestaSelect(undefined);settipoFacilidadSelect(undefined);// setapplyEscrow(locationData)\nsetIsActiveLoading(true);Promise.allSettled([backendServices.consultarFacilidades(props.dataGlobal.requestId),backendServices.consultarDetalleOpinionRiesgoCredito(locationData.transactionId),backendServices.getEnvironmentalRiskInfo(locationData.transactionId)]).then(function(response){var _EnvironmentalRiskInf,_EnvironmentalRiskInf2;var _response=_slicedToArray(response,3),Facilidades=_response[0].value,DetalleOpinionRiesgoCredito=_response[1].value,EnvironmentalRiskInfo=_response[2].value;dataSet.covenant=(_EnvironmentalRiskInf=EnvironmentalRiskInfo===null||EnvironmentalRiskInfo===void 0?void 0:EnvironmentalRiskInfo.detail)!==null&&_EnvironmentalRiskInf!==void 0?_EnvironmentalRiskInf:\"\";dataSet.environmentRiskOpinion=(_EnvironmentalRiskInf2=EnvironmentalRiskInfo===null||EnvironmentalRiskInfo===void 0?void 0:EnvironmentalRiskInfo.recommendations)!==null&&_EnvironmentalRiskInf2!==void 0?_EnvironmentalRiskInf2:\"\";dataSet.opinionRiskCredit=DetalleOpinionRiesgoCredito.length>0?DetalleOpinionRiesgoCredito[0].opinion:\"\";dataSet.facilityIdVisible=(Facilidades===null||Facilidades===void 0?void 0:Facilidades.filter(function($$){return $$.debtor!=\"  \";}).length)+1;dataSet.facilityId=resp;setdataSet(dataSet);console.log(dataSet);setIsActiveLoading(false);}).catch(function(err){console.log(err);dataSet.facilityId=resp;setdataSet(dataSet);setIsActiveLoading(false);});});}function saveNewFacility(values){var datos={\"requestId\":values.requestId,\"facilityId\":dataSet.facilityId,\"cr\":values.cr,\"amount\":values.amount,\"debtor\":deudoresListSelect.value,\"clientTypeId\":deudoresListSelect.value,\"balance\":values.balance,\"proposalTypeId\":values.proposalTypeId,\"proposalTypeName\":values.proposalTypeName,\"facilityTypeId\":values.facilityTypeId,\"purpose\":values.purpose,\"sublimits\":values.sublimits,\"proposalRate\":values.proposalRate,\"noSubsidyRate\":values.noSubsidyRate,\"effectiveRate\":values.effectiveRate,\"feci\":values.feci,\"termDays\":values.termDays,\"termDescription\":values.termDescription,\"ltv\":values.ltv,\"finantialConditions\":values.finantialConditions,\"environmentRiskCategory\":0,\"covenant\":values.covenant,\"environmentRiskOpinion\":values.environmentRiskOpinion,\"finantialCovenant\":values.finantialCovenant,\"legalDocumentation\":values.legalDocumentation,\"creditRiskOpinion\":values.creditRiskOpinion,\"otherConditions\":values.otherConditions,\"provision\":values.provision,\"applyEscrow\":values.applyEscrow,\"termType\":values.termType};// actualizarFacilidadPropCred\nbackendServices.updateFacilityPropCred(datos).then(function(resp){if(resp!==null&&resp!==undefined){setViewSeccion(!ViewSeccion);setsuccessSave_dlg(true);}else{seterror_dlg(true);}cargarFacilidades(locationData);setIsActiveLoading(false);}).catch(function(err){seterror_dlg(true);setIsActiveLoading(false);});}function handleNewCommission(newItem){var newCommissions=[].concat(_toConsumableArray(commissions),[newItem]);setCommissions(newCommissions);}function handleDeleteCommission(item){var itemIndex=commissions.indexOf(item);if(itemIndex===-1){return;}var newCommissions=_toConsumableArray(commissions);newCommissions.splice(itemIndex,1);setCommissions(newCommissions);}function handleNewDisbursementTerm(newItem){var newDisbursementTerms=[].concat(_toConsumableArray(disbursementTerms),[newItem]);setDisbursementTerms(newDisbursementTerms);}function handleDeleteDisbursementTerm(item){var itemIndex=disbursementTerms.indexOf(item);if(itemIndex===-1){return;}var newDisbursementTerms=_toConsumableArray(disbursementTerms);newDisbursementTerms.splice(itemIndex,1);setDisbursementTerms(newDisbursementTerms);}function handleNewPaymentProgram(newItem){var newPaymentPrograms=[].concat(_toConsumableArray(paymentPrograms),[newItem]);setPaymentPrograms(newPaymentPrograms);}function handleDeletePaymentProgram(item){var itemIndex=paymentPrograms.indexOf(item);if(itemIndex===-1){return;}var newPaymentPrograms=_toConsumableArray(paymentPrograms);newPaymentPrograms.splice(itemIndex,1);setPaymentPrograms(newPaymentPrograms);}function handleNewDisbursementMethod(newItem){var newDisbursementMethods=[].concat(_toConsumableArray(disbursementMethods),[newItem]);setDisbursementMethods(newDisbursementMethods);}function handleDeleteDisbursementMethod(item){var itemIndex=disbursementMethods.indexOf(item);if(itemIndex===-1){return;}var newDisbursementMethods=_toConsumableArray(disbursementMethods);newDisbursementMethods.splice(itemIndex,1);setDisbursementMethods(newDisbursementMethods);}function handleNewWarrant(newItem){var newWarrants=[].concat(_toConsumableArray(warrants),[newItem]);setWarrants(newWarrants);}function handleDeleteWarrant(item){var itemIndex=warrants.indexOf(item);if(itemIndex===-1){return;}var newWarrants=_toConsumableArray(warrants);newWarrants.splice(itemIndex,1);setWarrants(newWarrants);}function handleNewSurety(newItem){var newSureties=[].concat(_toConsumableArray(sureties),[newItem]);setSureties(newSureties);}function handleDeleteSurety(item){var itemIndex=sureties.indexOf(item);if(itemIndex===-1){return;}var newSureties=_toConsumableArray(sureties);newSureties.splice(itemIndex,1);setSureties(newSureties);}// FUNCIONES PARA PROPOSTALSECTION\nvar api=new BackendServices();var apiCoreServices=new CoreServices();var _useState51=useState({proposalTypeId:null,proposalTypeName:null,facilityTypeId:null}),_useState52=_slicedToArray(_useState51,2),dataReturn=_useState52[0],setdataReturn=_useState52[1];var _useState53=useState(null),_useState54=_slicedToArray(_useState53,2),tipoPropuesta=_useState54[0],settipoPropuesta=_useState54[1];var _useState55=useState(undefined),_useState56=_slicedToArray(_useState55,2),tipoPropuestaSelect=_useState56[0],settipoPropuestaSelect=_useState56[1];var _useState57=useState(null),_useState58=_slicedToArray(_useState57,2),propuestaSet=_useState58[0],setpropuestaSet=_useState58[1];var _useState59=useState(false),_useState60=_slicedToArray(_useState59,2),tipoPropuestaRequerido=_useState60[0],settipoPropuestaRequerido=_useState60[1];var _useState61=useState(null),_useState62=_slicedToArray(_useState61,2),subPropuesta=_useState62[0],setsubPropuesta=_useState62[1];var _useState63=useState(undefined),_useState64=_slicedToArray(_useState63,2),subPropuestaSelect=_useState64[0],setsubPropuestaSelect=_useState64[1];var _useState65=useState(null),_useState66=_slicedToArray(_useState65,2),subPropuestaSet=_useState66[0],setsubPropuestaSet=_useState66[1];var _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),subPropuestaRequerido=_useState68[0],setsubPropuestaRequerido=_useState68[1];var _useState69=useState(null),_useState70=_slicedToArray(_useState69,2),tipoFacilidad=_useState70[0],settipoFacilidad=_useState70[1];var _useState71=useState(undefined),_useState72=_slicedToArray(_useState71,2),tipoFacilidadSelect=_useState72[0],settipoFacilidadSelect=_useState72[1];var _useState73=useState(undefined),_useState74=_slicedToArray(_useState73,2),deudoresListSelect=_useState74[0],setdeudoresListSelect=_useState74[1];var _useState75=useState(undefined),_useState76=_slicedToArray(_useState75,2),terminosSelect=_useState76[0],setterminosSelect=_useState76[1];var _useState77=useState(null),_useState78=_slicedToArray(_useState77,2),tipoFacilidadSet=_useState78[0],settipoFacilidadSet=_useState78[1];var _useState79=useState(null),_useState80=_slicedToArray(_useState79,2),deudoresList=_useState80[0],setdeudoresList=_useState80[1];var _useState81=useState(\"guardar\"),_useState82=_slicedToArray(_useState81,2),tipo=_useState82[0],settipo=_useState82[1];var _useState83=useState(null),_useState84=_slicedToArray(_useState83,2),dataRows=_useState84[0],setdataRows=_useState84[1];var _useState85=useState(null),_useState86=_slicedToArray(_useState85,2),dataEdit=_useState86[0],setdataEdit=_useState86[1];var _useState87=useState(false),_useState88=_slicedToArray(_useState87,2),campoRequeridoDeudores=_useState88[0],setcampoRequeridoDeudores=_useState88[1];var _useState89=useState(0),_useState90=_slicedToArray(_useState89,2),MontoFacilidad=_useState90[0],setMontoFacilidad=_useState90[1];var listaIdentificacion=props.identificationList;var _useState91=useState(false),_useState92=_slicedToArray(_useState91,2),tipoFacilidadRequerido=_useState92[0],settipoFacilidadRequerido=_useState92[1];var _useState93=useState(1),_useState94=_slicedToArray(_useState93,2),facilityNumber=_useState94[0],setfacilityNumber=_useState94[1];var typeTerms=[{label:t(\"Days\"),value:t(\"Days\")},{label:t(\"Month\"),value:t(\"Month\")},{label:t(\"Year\"),value:t(\"Year\")}];React.useEffect(function(){setterminosSelect(typeTerms[0]);// Read Api Service data\n// initializeData();\n},[]);React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}// Read Api Service data\ncargarFacilidades(dataSession);initializeData(dataSession);},[]);function cargarFacilidades(dataSession){api.consultarDeudores(dataSession.transactionId).then(function(data2){if(data2!==null&&data2!==undefined){var jsonDeudores=[];for(var i=0;i<data2.length;i++){jsonDeudores.push({label:data2[i][\"name\"]+\" \"+data2[i][\"name2\"]+\" \"+data2[i][\"lastName\"]+\" \"+data2[i][\"lastName2\"],value:data2[i][\"personId\"]});}api.retrieveProposalType().then(function(propuesta){api.retrieveFacilityType().then(function(facilidad){api.consultarFacilidades(props.dataGlobal.requestId).then(function(resp){var acu=0;if((resp===null||resp===void 0?void 0:resp.filter(function(data){return data.debtor!=\"  \";}).length)>0){// initializeData(dataSession);\nsetdataRows(resp.map(function(data,index){var _jsonDeudores$find,_facilidad$find,_propuesta$find;acu++;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Facility\"),children:acu}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Debtor\"),children:(_jsonDeudores$find=jsonDeudores.find(function(x){return x.value===Number(data.debtor);}))===null||_jsonDeudores$find===void 0?void 0:_jsonDeudores$find.label}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Facility Type\"),children:(_facilidad$find=facilidad.find(function(x){return x.id===data.facilityTypeId;}))===null||_facilidad$find===void 0?void 0:_facilidad$find.description}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Proposal\"),children:(_propuesta$find=propuesta.find(function(x){return x.id===data.proposalTypeId;}))===null||_propuesta$find===void 0?void 0:_propuesta$find.description}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Approved Risk\"),children:currencyData.format(data.amount)}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Amount\")+\" \"+t(\"Rate\"),children:currencyData.format(data.proposalRate)}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Actions\"),style:{textAlign:\"right\"},children:/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){console.log(acu);data.facilityIdVisible=index+1;setdataSet(data);cargarDataSelect(data);settipo(\"editar\");setViewSeccion(true);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})})})]},acu);}));}else{setdataRows(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",style:{textAlign:'center'}})},1));}});});});}}).catch(function(error){console.error('api error: ',error);});}React.useEffect(function(){// Read Api Service data\nsettipoPropuestaRequerido(dataValidation.tipoPropuestaRequerido);setsubPropuestaRequerido(dataValidation.subPropuestaRequerido);settipoFacilidadRequerido(dataValidation.tipoFacilidadRequerido);},[dataValidation]);function cargarDataSelect(data){var defaultVal=null;setapplyEscrow(data===null||data===void 0?void 0:data.applyEscrow);try{if(tipoPropuesta.length>0&&data.proposalTypeId!==null){defaultVal=tipoPropuesta.find(function(x){return x.value===data.proposalTypeId;});if(defaultVal!==undefined){settipoPropuestaSelect(defaultVal);}}if(subPropuesta.length>0&&data.proposalTypeName!==null){defaultVal=subPropuesta.find(function(x){return x.value===data.proposalTypeName;});if(defaultVal!==undefined){setsubPropuestaSelect(defaultVal);}}if(tipoFacilidad.length>0&&data.facilityTypeId!==null){defaultVal=tipoFacilidad.find(function(x){return x.value===data.facilityTypeId;});if(defaultVal!==undefined){settipoFacilidadSelect(defaultVal);}}if(typeTerms.length>0&&data.termType!==null){defaultVal=typeTerms.find(function(x){return x.value===data.termType;});if(defaultVal!==undefined){setterminosSelect(defaultVal);}}if(deudoresList.length>0&&data.debtor!==null){defaultVal=deudoresList.find(function(x){return x.value===data.debtor;});if(defaultVal!==undefined){setdeudoresListSelect(defaultVal);}}}catch(err){}}React.useEffect(function(){cargarDataSelect(dataSet);// Read Api Service data\nsetMontoFacilidad(dataSet.amount);},[dataSet,ViewSeccion,subPropuesta]);function initializeData(dataLocation){// consultarDeudores\napi.consultarDeudores(dataLocation.transactionId).then(function(data){console.log(data);if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:data[i][\"name\"]+\" \"+data[i][\"name2\"]+\" \"+data[i][\"lastName\"]+\" \"+data[i][\"lastName2\"],value:data[i][\"personId\"]});}setdeudoresListSelect(json[0]);setdeudoresList(json);}}).catch(function(error){console.error('api error: ',error);});api.retrieveProposalType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}settipoPropuesta(json);}).catch(function(error){console.error('api error: ',error);});api.retrieveFacilityType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}settipoFacilidad(json);}).catch(function(error){console.error('api error: ',error);});api.retrieveSubproposalType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}setsubPropuesta(json);}).catch(function(error){console.error('api error: ',error);});}function soloNumeros(e,dato){var teclaPulsada=window.event?window.event.keyCode:e.which;var valor=document.getElementById(dato).value;if(teclaPulsada===45&&valor.indexOf(\"-\")===-1){document.getElementById(dato).value=\"-\"+valor;}if(teclaPulsada===13||teclaPulsada===46&&valor.indexOf(\".\")===-1){return true;}console.log(valor);return /\\d/.test(String.fromCharCode(teclaPulsada));}//   function handleChangeInputfrmSearch(e) {\n//     values[e.target.name] = e.target.value;\n// }\nreturn/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(AvForm,{id:\"formFacilidades\",className:\"needs-validation\",onSubmit:handleSubmitFacilidad,children:[!ViewSeccion?/*#__PURE__*/_jsxs(React.Fragment,{children:[datosUsuario?/*#__PURE__*/_jsx(FacilityHistory,{partyId:datosUsuario.customerNumberT24}):null,/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-sub-title\",children:t(\"ActualFacilityList\")}),/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(\"div\",{className:\"responsive-table scroll\",children:/*#__PURE__*/_jsxs(Table,{className:\"responsive-table\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Debtor\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Approved Risk\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Amount\")+\" \"+t(\"Rate\")}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Link,{className:\"float-end\",onClick:function onClick(){newFacility();},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-box-multiple-outline mdi-24px\"})})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataRows})]})})})]})]}):null,ViewSeccion?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Facility\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"General Data\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Label,{htmlFor:\"facilityNumber\",children:[t(\"Facility\"),\" \",t(\" \"),\" \",t(\"Number\")]}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"facilityNumber\",type:\"text\",validate:{number:{value:true,errorMessage:t(\"InvalidField\")}},value:dataSet.facilityIdVisible,id:\"facilityNumber\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"cr\",children:t(\"CR\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"cr\",value:dataSet.cr,type:\"text\",id:\"cr\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"amount\",children:t(\"Amount\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"amount\",type:\"text\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},onChange:function onChange(e){setMontoFacilidad(e.target.value);},value:currencyData.format((_dataSet$amount=dataSet===null||dataSet===void 0?void 0:dataSet.amount)!==null&&_dataSet$amount!==void 0?_dataSet$amount:0),id:\"amount\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"8\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"amount\",children:t(\"Debtors\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){setdeudoresListSelect(deudoresList.find(function(x){return x.value===e.value;}));},options:deudoresList,classNamePrefix:\"select2-selection\",placeholder:t(\"Select\"),value:deudoresListSelect}),campoRequeridoDeudores?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required Field\")}):null]}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"balance\",children:t(\"Balance\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"balance\",value:currencyData.format((_dataSet$balance=dataSet===null||dataSet===void 0?void 0:dataSet.balance)!==null&&_dataSet$balance!==void 0?_dataSet$balance:0),pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},type:\"text\",id:\"balance\"})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"proposalType\",children:t(\"Proposal Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){settipoPropuestaSelect(tipoPropuesta.find(function(x){return x.value===e.value;}));setpropuestaSet(e.value);dataReturn.proposalTypeId=e.value;setdataReturn(dataReturn);},options:tipoPropuesta,placeholder:t(\"Select\"),value:tipoPropuestaSelect}),dataValidation.tipoPropuestaRequerido?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"subproposalType\",children:t(\"SubProposal Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){setsubPropuestaSelect(subPropuesta.find(function(x){return x.value===e.value;}));setsubPropuestaSet(e.value);dataReturn.proposalTypeName=e.value;setdataReturn(dataReturn);},options:subPropuesta,placeholder:t(\"Select\"),value:subPropuestaSelect}),dataValidation.subPropuestaRequerido?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"facilityType\",children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){settipoFacilidadSelect(tipoFacilidad.find(function(x){return x.value===e.value;}));settipoFacilidadSet(e.value);dataReturn.facilityTypeId=e.value;setdataReturn(dataReturn);},options:tipoFacilidad,placeholder:t(\"Select\"),value:tipoFacilidadSelect}),dataValidation.tipoFacilidadRequerido?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"purpose\",children:t(\"Purpose\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"purpose\",id:\"purpose\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required\") }\n// }}\n,type:\"textarea\",value:dataSet.purpose,rows:\"4\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sublimits\",children:t(\"Sub Limits\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"sublimits\",id:\"sublimits\",value:dataSet.sublimits,type:\"textarea\",rows:\"4\"})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Proposed Interest Rate\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"proposalRate\",children:t(\"Amount\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"proposalRate\",type:\"text\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},id:\"proposalRate\",value:currencyData.format((_dataSet$proposalRate=dataSet===null||dataSet===void 0?void 0:dataSet.proposalRate)!==null&&_dataSet$proposalRate!==void 0?_dataSet$proposalRate:0)})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"noSubsidyRate\",children:t(\"Rate without Subsidy\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"noSubsidyRate\",type:\"text\",id:\"noSubsidyRate\",value:currencyData.format((_dataSet$noSubsidyRat=dataSet===null||dataSet===void 0?void 0:dataSet.noSubsidyRate)!==null&&_dataSet$noSubsidyRat!==void 0?_dataSet$noSubsidyRat:0),pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"effectiveRate\",children:t(\"Effective Interest Rate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"effectiveRate\",value:currencyData.format((_dataSet$effectiveRat=dataSet===null||dataSet===void 0?void 0:dataSet.effectiveRate)!==null&&_dataSet$effectiveRat!==void 0?_dataSet$effectiveRat:0),type:\"text\",id:\"effectiveRate\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"feci\",children:t(\"FECI\")}),/*#__PURE__*/_jsxs(AvField,{id:\"feci\",className:\"form-control\",name:\"feci\",type:\"select\",value:dataSet.feci?\"true\":\"false\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Si\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"No\"})]})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(ComisionSeccion,{MontoFacilidad:MontoFacilidad,validation:dataValidation,dataSet:dataSet,items:commissions,onSaveItem:handleNewCommission,onDeleteItem:handleDeleteCommission})})}),/*#__PURE__*/_jsx(\"h5\",{children:t(\"Terms\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"termDays\",children:t(\"Quantity\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"termDays\",value:dataSet.termDays,type:\"text\",validate:{number:{value:true,errorMessage:t(\"InvalidField\")}},id:\"termDays\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"DaysMonthsYears\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){setterminosSelect(typeTerms.find(function(x){return x.value===e.value;}));dataReturn.termType=e.value;setdataReturn(dataReturn);},options:typeTerms,placeholder:t(\"Select\"),value:terminosSelect})]})}),/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"termsDescription\",children:t(\"Terms Description\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"termDescription\",type:\"textarea\",id:\"termDescription\",value:dataSet.termDescription,rows:\"4\"})]})})]}),/*#__PURE__*/_jsx(DisbursementSection,{validation:dataValidation,dataSet:dataSet,disbursementTerms:disbursementTerms,onSaveDisbursementTerm:handleNewDisbursementTerm,onDeleteDisbursementTerm:handleDeleteDisbursementTerm,paymentPrograms:paymentPrograms,onSavePaymentProgram:handleNewPaymentProgram,onDeletePaymentProgram:handleDeletePaymentProgram,disbursementMethods:disbursementMethods,onSaveDisbursementMethod:handleNewDisbursementMethod,onDeleteDisbursementMethod:handleDeleteDisbursementMethod}),/*#__PURE__*/_jsx(WarrantsSection,{ViewSeccion:ViewSeccion,validation:dataValidation,dataSet:dataSet,warrants:warrants,onSaveItem:handleNewWarrant,onDeleteItem:handleDeleteWarrant}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsxs(Label,{htmlFor:\"relatedPart\",children:[t(\"LTV\"),\"(%)\"]}),/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"ltv\",value:dataSet.ltv,validate:{number:{value:true,errorMessage:t(\"InvalidField\")}},max:\"100\",type:\"number\",id:\"ltv\"})})]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"relatedPart\",children:t(\"Escrow\")}),/*#__PURE__*/_jsx(AvGroup,{check:true,className:\"mb-3\",children:/*#__PURE__*/_jsx(Switch,{name:\"fd\",uncheckedIcon:/*#__PURE__*/_jsx(Offsymbol,{}),checkedIcon:/*#__PURE__*/_jsx(OnSymbol,{}),onColor:\"#007943\",id:\"check1\",className:\"form-label\",onChange:function onChange(){setapplyEscrow(!applyEscrow);},checked:applyEscrow})})]})]})})}),/*#__PURE__*/_jsx(SuretiesSection,{validation:dataValidation,dataSet:dataSet,sureties:sureties,onSaveItem:handleNewSurety,onDeleteItem:handleDeleteSurety}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"FinancialConditions\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"finantialConditions\",type:\"textarea\",value:dataSet.finantialConditions,id:\"finantialConditions\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"AmbientalRisk\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"category\",children:t(\"Category\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"environmentRiskCategory\",type:\"text\",disabled:true,value:garantiaET,id:\"environmentRiskCategory\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"covenant\",children:t(\"Covenant\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"covenant\",type:\"text\",value:dataSet.covenant,id:\"covenant\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"opinion\",children:t(\"Opinion\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"environmentRiskOpinion\",type:\"textarea\",value:dataSet===null||dataSet===void 0?void 0:dataSet.environmentRiskOpinion,id:\"environmentRiskOpinion\",rows:\"4\"})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"FinantialCovenant\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"finantialCovenant\",value:dataSet.finantialCovenant,type:\"textarea\",id:\"finantialCovenant\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"LegalDocumentation\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"legalDocumentation\",value:dataSet.legalDocumentation,type:\"textarea\",id:\"legalDocumentation\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"OtherConditions\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"otherConditions\",value:dataSet.otherConditions,type:\"textarea\",id:\"otherConditions\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"CreditRisk\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"creditrisk\",children:t(\"Opinion\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"creditRiskOpinion\",type:\"textarea\",value:(_dataSet$creditRiskOp=dataSet===null||dataSet===void 0?void 0:dataSet.creditRiskOpinion)!==null&&_dataSet$creditRiskOp!==void 0?_dataSet$creditRiskOp:\"\",id:\"creditRiskOpinion\",rows:\"4\"})]})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Provision\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"provision\",value:dataSet.provision,type:\"textarea\",id:\"provision\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{className:\"my-2\",children:/*#__PURE__*/_jsxs(Col,{xl:\"12 text-end\",children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",onClick:function onClick(e){setViewSeccion(!ViewSeccion);cargarFacilidades(locationData);},style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary\",type:\"submit\",color:\"success\",style:{margin:'5px'},children:t(\"Save\")})]})})]})})}):null]}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);cargarFacilidades(locationData);},children:t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){seterror_dlg(false);},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:t(\"Yesdeleteit\"),cancelButtonText:t(\"Cancel\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){setViewSeccion(!ViewSeccion);},onCancel:function onCancel(){return setconfirm_alert(false);},children:t(\"Youwontbeabletorevertthis\")}):null]});});ListaFacilidad.defaultProps={items:[],editMode:false};export default ListaFacilidad;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/FacilidadesSeccion.js"],"names":["React","useState","useContext","useRef","useEffect","Link","SweetAlert","Table","Card","CardBody","Button","Row","Col","Label","AvForm","AvGroup","AvField","AvFeedback","listaFacilidades","Facilidad","BackendServices","CoreServices","Select","ComisionSeccion","DisbursementSection","WarrantsSection","SuretiesSection","Switch","useLocation","useHistory","url","Currency","useTranslation","FacilityHistory","LoadingOverlay","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","ListaFacilidad","forwardRef","props","ref","location","t","i18n","dataSet","setdataSet","datosUsuario","setdatosUsuario","tipoPropuestaRequerido","subPropuestaRequerido","tipoFacilidadRequerido","dataValidation","setdataValidation","data","context","setcontext","propostalSectionRef","formValid","setFormValid","dataLocation","setData","commissions","setCommissions","disbursementTerms","setDisbursementTerms","paymentPrograms","setPaymentPrograms","disbursementMethods","setDisbursementMethods","warrants","setWarrants","sureties","setSureties","garantiaET","setgarantiaET","ViewSeccion","setViewSeccion","backendServices","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","info_dlg","setinfo_dlg","info_msg","setinfo_msg","dynamic_title","setdynamic_title","confirm_alert","setconfirm_alert","success_dlg","setsuccess_dlg","applyEscrow","setapplyEscrow","isActiveLoading","setIsActiveLoading","history","currencyData","locationData","setLocationData","useImperativeHandle","submit","validate","form","document","getElementById","requestSubmit","getFormValidation","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","consultPrincipalDebtor","then","resp","numero","clientDocId","consultEnvironmentalAspectsIGR","dataAsp","environmentalAspectsDTO","riskClassificationConfirmation","handleSubmitFacilidad","event","errors","values","preventDefault","console","log","amount","Number","getRealValue","clientTypeId","balance","proposalRate","noSubsidyRate","effectiveRate","feci","termDays","ltv","environmentRiskCategory","proposalTypeId","tipoPropuestaSelect","value","proposalTypeName","subPropuestaSelect","facilityTypeId","tipoFacilidadSelect","termType","terminosSelect","facilityId","requestId","dataGlobal","saveNewFacility","onDismiss","newFacility","settipoPropuestaSelect","setsubPropuestaSelect","settipoFacilidadSelect","newFacilityPropCred","Promise","allSettled","consultarFacilidades","consultarDetalleOpinionRiesgoCredito","getEnvironmentalRiskInfo","response","Facilidades","DetalleOpinionRiesgoCredito","EnvironmentalRiskInfo","covenant","detail","environmentRiskOpinion","recommendations","opinionRiskCredit","opinion","facilityIdVisible","filter","$$","debtor","catch","err","datos","cr","deudoresListSelect","purpose","sublimits","termDescription","finantialConditions","finantialCovenant","legalDocumentation","creditRiskOpinion","otherConditions","provision","updateFacilityPropCred","cargarFacilidades","handleNewCommission","newItem","newCommissions","handleDeleteCommission","item","itemIndex","indexOf","splice","handleNewDisbursementTerm","newDisbursementTerms","handleDeleteDisbursementTerm","handleNewPaymentProgram","newPaymentPrograms","handleDeletePaymentProgram","handleNewDisbursementMethod","newDisbursementMethods","handleDeleteDisbursementMethod","handleNewWarrant","newWarrants","handleDeleteWarrant","handleNewSurety","newSureties","handleDeleteSurety","api","apiCoreServices","dataReturn","setdataReturn","tipoPropuesta","settipoPropuesta","propuestaSet","setpropuestaSet","settipoPropuestaRequerido","subPropuesta","setsubPropuesta","subPropuestaSet","setsubPropuestaSet","setsubPropuestaRequerido","tipoFacilidad","settipoFacilidad","setdeudoresListSelect","setterminosSelect","tipoFacilidadSet","settipoFacilidadSet","deudoresList","setdeudoresList","tipo","settipo","dataRows","setdataRows","dataEdit","setdataEdit","campoRequeridoDeudores","setcampoRequeridoDeudores","MontoFacilidad","setMontoFacilidad","listaIdentificacion","identificationList","settipoFacilidadRequerido","facilityNumber","setfacilityNumber","typeTerms","label","initializeData","consultarDeudores","data2","jsonDeudores","i","retrieveProposalType","propuesta","retrieveFacilityType","facilidad","acu","map","index","find","x","id","description","format","textAlign","cargarDataSelect","error","defaultVal","json","retrieveSubproposalType","soloNumeros","e","dato","teclaPulsada","window","keyCode","which","valor","test","String","fromCharCode","customerNumberT24","number","errorMessage","target","margin","defaultProps","items","editMode"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useRef, useEffect } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from \"react-router-dom\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Label\r\n} from \"reactstrap\"\r\nimport { AvForm, AvGroup, AvField, AvFeedback } from \"availity-reactstrap-validation\"\r\nimport listaFacilidades from \"../../../../api/bpm/propuestacredito/facilidades\";\r\nimport { Facilidad } from \"../../../../models/PropuestaCredito\";\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\nimport Select from \"react-select\";\r\nimport ComisionSeccion from \"./Comision\";\r\nimport DisbursementSection from \"./DisturbementSeccion\";\r\nimport WarrantsSection from \"./WarrantsSection\";\r\nimport SuretiesSection from \"./SuretiesSection\";\r\nimport Switch from \"react-switch\";\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport * as url from \"../../../../helpers/url_helper\"\r\nimport Currency from \"../../../../helpers/currency\"\r\nimport { useTranslation } from \"react-i18next/\";\r\nimport FacilityHistory from \"../../../../components/Common/FacilityHistory\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nconst Offsymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      No\r\n    </div>\r\n  );\r\n};\r\nconst OnSymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      Si\r\n    </div>\r\n  );\r\n};\r\nconst ListaFacilidad = React.forwardRef((props, ref) => {\r\n  const location = useLocation()\r\n  const { t, i18n } = useTranslation();\r\n  const [dataSet, setdataSet] = useState({\r\n    \"requestId\": \"\",\r\n    \"cr\": \"\",\r\n    \"amount\": 0,\r\n    \"debtor\": \"\",\r\n    \"clientTypeId\": 0,\r\n    \"balance\": 0,\r\n    \"proposalTypeId\": \"\",\r\n    \"proposalTypeName\": \"\",\r\n    \"facilityTypeId\": \"\",\r\n    \"purpose\": \"\",\r\n    \"sublimits\": \"\",\r\n    \"proposalRate\": 0,\r\n    \"noSubsidyRate\": 0,\r\n    \"effectiveRate\": 0,\r\n    \"feci\": true,\r\n    \"termDays\": 0,\r\n    \"termDescription\": \"\",\r\n    \"ltv\": 0,\r\n    \"finantialConditions\": \"\",\r\n    \"environmentRiskCategory\": 0,\r\n    \"covenant\": \"\",\r\n    \"environmentRiskOpinion\": \"\",\r\n    \"finantialCovenant\": \"\",\r\n    \"legalDocumentation\": \"\",\r\n    \"creditRiskOpinion\": \"\",\r\n    \"provision\": \"\",\r\n    \"numero\": \"\",\r\n    \"otherConditions\": \"\",\r\n    \"facilityId\": 0,\r\n  });\r\n  const [datosUsuario, setdatosUsuario] = useState(null)\r\n  const [dataValidation, setdataValidation] = useState({\r\n    tipoPropuestaRequerido: false,\r\n    subPropuestaRequerido: false,\r\n    tipoFacilidadRequerido: false,\r\n  });\r\n  const [context, setcontext] = useState(location.data)\r\n  const propostalSectionRef = useRef();\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [commissions, setCommissions] = useState([]);\r\n  const [disbursementTerms, setDisbursementTerms] = useState([]);\r\n  const [paymentPrograms, setPaymentPrograms] = useState([]);\r\n  const [disbursementMethods, setDisbursementMethods] = useState([]);\r\n  const [warrants, setWarrants] = useState([]);\r\n  const [sureties, setSureties] = useState([]);\r\n  const [garantiaET, setgarantiaET] = useState([]);\r\n  const [ViewSeccion, setViewSeccion] = useState(false);\r\n  const backendServices = new BackendServices();\r\n  // Variables para alertas\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [info_dlg, setinfo_dlg] = useState(false)\r\n  const [info_msg, setinfo_msg] = useState(\"\")\r\n  const [dynamic_title, setdynamic_title] = useState(\"\")\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [success_dlg, setsuccess_dlg] = useState(false)\r\n  const [applyEscrow, setapplyEscrow] = useState(false)\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n  const history = useHistory();\r\n  const currencyData = new Currency();\r\n  const [locationData, setLocationData] = useState(null);\r\n  React.useImperativeHandle(ref, () => ({\r\n    submit: (validate = true) => {\r\n      const form = document.getElementById('formNewFacility');\r\n      if (validate) {\r\n        if (formValid) {\r\n          form.requestSubmit();\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      else {\r\n        form.requestSubmit();\r\n        return true;\r\n      }\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n  // services\r\n  useEffect(() => {\r\n\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n\r\n    // Read Api Service  ata\r\n    // consultarDeudorPrincipal\r\n    backendServices.consultPrincipalDebtor(dataSession.transactionId).then(resp => {\r\n      dataSet.numero = resp.clientDocId\r\n      setdataSet(dataSet);\r\n      setdatosUsuario(resp)\r\n    })\r\n    backendServices.consultEnvironmentalAspectsIGR(dataSession.transactionId).then(dataAsp => {\r\n      setgarantiaET(dataAsp?.environmentalAspectsDTO?.riskClassificationConfirmation ?? \"\");\r\n    })\r\n  }, []);\r\n  function handleSubmitFacilidad(event, errors, values) {\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    console.log(values);\r\n    // console.log(document.getElementById(\"amount\").value.replace(\",\", \"\"));\r\n    setIsActiveLoading(true);\r\n    values.amount = Number(currencyData.getRealValue(values.amount));\r\n    values.clientTypeId = Number(1);\r\n    values.balance = Number(currencyData.getRealValue(values.balance));\r\n    values.proposalRate = Number(currencyData.getRealValue(values.proposalRate));\r\n    values.noSubsidyRate = Number(currencyData.getRealValue(values.noSubsidyRate));\r\n    values.effectiveRate = Number(currencyData.getRealValue(values.effectiveRate));\r\n    values.feci = values.feci == \"true\" ? true : false;\r\n    values.termDays = (values.termDays);\r\n    values.ltv = Number(values.ltv);\r\n    values.environmentRiskCategory = values.environmentRiskCategory;\r\n    values.proposalTypeId = tipoPropuestaSelect == undefined ? \" \" : tipoPropuestaSelect.value;\r\n    values.proposalTypeName = subPropuestaSelect == undefined ? \" \" : subPropuestaSelect.value;\r\n    values.facilityTypeId = tipoFacilidadSelect == undefined ? \" \" : tipoFacilidadSelect.value;\r\n    values.termType = terminosSelect == undefined ? \" \" : terminosSelect.value;\r\n    values.facilityId = dataSet.facilityId;\r\n    values.requestId = props.dataGlobal.requestId;\r\n    values.applyEscrow = applyEscrow ?? false;\r\n    saveNewFacility(values)\r\n      .then((result) => {\r\n        // props.onSave(values);\r\n        props.onDismiss();\r\n      });\r\n  }\r\n  function newFacility() {\r\n    settipoPropuestaSelect(undefined);\r\n    setsubPropuestaSelect(undefined);\r\n    settipoFacilidadSelect(undefined);\r\n    const data = {\r\n      \"facilityNumber\": \"0\",\r\n      \"cr\": \"0\",\r\n      \"amount\": 0,\r\n      \"debtor\": \"  \",\r\n      \"clientTypeId\": 1,\r\n      \"customer\": {\r\n        \"id\": \"469303-1-434018\"\r\n      },\r\n      \"balance\": 0,\r\n      \"purpose\": \".\",\r\n      \"sublimits\": \".\",\r\n      \"proposalRate\": 0,\r\n      \"noSubsidyRate\": 0,\r\n      \"effectiveRate\": 0,\r\n      \"feci\": false,\r\n      \"termDays\": 0,\r\n      \"termDescription\": \"\",\r\n      \"ltv\": 0,\r\n      \"finantialConditions\": \" \",\r\n      \"environmentRiskCategory\": 0,\r\n      \"covenant\": \" \",\r\n      \"environmentRiskOpinion\": \" \",\r\n      \"finantialCovenant\": \" \",\r\n      \"legalDocumentation\": \"  \",\r\n      \"otherConditions\": \" \",\r\n      \"creditRiskOpinion\": \" \",\r\n      \"provision\": \" \",\r\n      \"proposalTypeId\": \"RE\",\r\n      \"proposalTypeName\": \"LRCC\",\r\n      \"facilityTypeId\": \"LCN\",\r\n      \"termType\": \"\",\r\n      \"applyEscrow\": false,\r\n      facilityId: 0,\r\n      \"requestId\": props.dataGlobal.requestId\r\n    }\r\n    // nuevoFacilidadPropCred\r\n    backendServices.newFacilityPropCred(data).then(resp => {\r\n      console.log(resp);\r\n      data.facilityId = resp;\r\n      setdataSet(data);\r\n      setViewSeccion(!ViewSeccion)\r\n      settipoPropuestaSelect(undefined);\r\n      setsubPropuestaSelect(undefined);\r\n      settipoFacilidadSelect(undefined);\r\n      // setapplyEscrow(locationData)\r\n\r\n      setIsActiveLoading(true);\r\n      Promise.allSettled([\r\n        backendServices.consultarFacilidades(props.dataGlobal.requestId),\r\n        backendServices.consultarDetalleOpinionRiesgoCredito(locationData.transactionId),\r\n        backendServices.getEnvironmentalRiskInfo(locationData.transactionId)\r\n      ]).then(response => {\r\n        const [{ value: Facilidades }, { value: DetalleOpinionRiesgoCredito }, { value: EnvironmentalRiskInfo }] = response;\r\n\r\n        dataSet.covenant = EnvironmentalRiskInfo?.detail ?? \"\";\r\n        dataSet.environmentRiskOpinion = EnvironmentalRiskInfo?.recommendations ?? \"\";\r\n\r\n        dataSet.opinionRiskCredit = DetalleOpinionRiesgoCredito.length > 0 ? DetalleOpinionRiesgoCredito[0].opinion : \"\";\r\n\r\n        dataSet.facilityIdVisible = Facilidades?.filter($$ => $$.debtor != \"  \").length + 1;\r\n\r\n        dataSet.facilityId = resp;\r\n\r\n        setdataSet(dataSet)\r\n\r\n        console.log(dataSet);\r\n\r\n        setIsActiveLoading(false);\r\n\r\n      }).catch(err => {\r\n        console.log(err);\r\n        dataSet.facilityId = resp;\r\n        setdataSet(dataSet)\r\n        setIsActiveLoading(false);\r\n      });\r\n\r\n\r\n\r\n    });\r\n  }\r\n  function saveNewFacility(values) {\r\n    const datos = {\r\n      \"requestId\": values.requestId,\r\n      \"facilityId\": dataSet.facilityId,\r\n      \"cr\": values.cr,\r\n      \"amount\": values.amount,\r\n      \"debtor\": deudoresListSelect.value,\r\n      \"clientTypeId\": deudoresListSelect.value,\r\n      \"balance\": values.balance,\r\n      \"proposalTypeId\": values.proposalTypeId,\r\n      \"proposalTypeName\": values.proposalTypeName,\r\n      \"facilityTypeId\": values.facilityTypeId,\r\n      \"purpose\": values.purpose,\r\n      \"sublimits\": values.sublimits,\r\n      \"proposalRate\": values.proposalRate,\r\n      \"noSubsidyRate\": values.noSubsidyRate,\r\n      \"effectiveRate\": values.effectiveRate,\r\n      \"feci\": values.feci,\r\n      \"termDays\": values.termDays,\r\n      \"termDescription\": values.termDescription,\r\n      \"ltv\": values.ltv,\r\n      \"finantialConditions\": values.finantialConditions,\r\n      \"environmentRiskCategory\": 0,\r\n      \"covenant\": values.covenant,\r\n      \"environmentRiskOpinion\": values.environmentRiskOpinion,\r\n      \"finantialCovenant\": values.finantialCovenant,\r\n      \"legalDocumentation\": values.legalDocumentation,\r\n      \"creditRiskOpinion\": values.creditRiskOpinion,\r\n      \"otherConditions\": values.otherConditions,\r\n      \"provision\": values.provision,\r\n      \"applyEscrow\": values.applyEscrow,\r\n      \"termType\": values.termType,\r\n    }\r\n    // actualizarFacilidadPropCred\r\n    backendServices.updateFacilityPropCred(datos).then(resp => {\r\n      if (resp !== null && resp !== undefined) {\r\n        setViewSeccion(!ViewSeccion);\r\n        setsuccessSave_dlg(true);\r\n      } else {\r\n        seterror_dlg(true);\r\n      }\r\n      cargarFacilidades(locationData)\r\n      setIsActiveLoading(false)\r\n    }).catch(err => {\r\n      seterror_dlg(true);\r\n      setIsActiveLoading(false)\r\n    })\r\n  }\r\n  function handleNewCommission(newItem) {\r\n    const newCommissions = [...commissions, newItem];\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleDeleteCommission(item) {\r\n    const itemIndex = commissions.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newCommissions = [...commissions];\r\n    newCommissions.splice(itemIndex, 1);\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleNewDisbursementTerm(newItem) {\r\n    const newDisbursementTerms = [...disbursementTerms, newItem];\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleDeleteDisbursementTerm(item) {\r\n    const itemIndex = disbursementTerms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementTerms = [...disbursementTerms];\r\n    newDisbursementTerms.splice(itemIndex, 1);\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleNewPaymentProgram(newItem) {\r\n    const newPaymentPrograms = [...paymentPrograms, newItem];\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleDeletePaymentProgram(item) {\r\n    const itemIndex = paymentPrograms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newPaymentPrograms = [...paymentPrograms];\r\n    newPaymentPrograms.splice(itemIndex, 1);\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleNewDisbursementMethod(newItem) {\r\n    const newDisbursementMethods = [...disbursementMethods, newItem];\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n  function handleDeleteDisbursementMethod(item) {\r\n    const itemIndex = disbursementMethods.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementMethods = [...disbursementMethods];\r\n    newDisbursementMethods.splice(itemIndex, 1);\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n  function handleNewWarrant(newItem) {\r\n    const newWarrants = [...warrants, newItem];\r\n    setWarrants(newWarrants);\r\n  }\r\n  function handleDeleteWarrant(item) {\r\n    const itemIndex = warrants.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newWarrants = [...warrants];\r\n    newWarrants.splice(itemIndex, 1);\r\n    setWarrants(newWarrants);\r\n  }\r\n  function handleNewSurety(newItem) {\r\n    const newSureties = [...sureties, newItem];\r\n    setSureties(newSureties);\r\n  }\r\n  function handleDeleteSurety(item) {\r\n    const itemIndex = sureties.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newSureties = [...sureties];\r\n    newSureties.splice(itemIndex, 1);\r\n    setSureties(newSureties);\r\n  }\r\n  // FUNCIONES PARA PROPOSTALSECTION\r\n  const api = new BackendServices();\r\n  const apiCoreServices = new CoreServices();\r\n  const [dataReturn, setdataReturn] = useState({\r\n    proposalTypeId: null,\r\n    proposalTypeName: null,\r\n    facilityTypeId: null,\r\n  });\r\n  const [tipoPropuesta, settipoPropuesta] = useState(null);\r\n  const [tipoPropuestaSelect, settipoPropuestaSelect] = useState(undefined);\r\n  const [propuestaSet, setpropuestaSet] = useState(null);\r\n  const [tipoPropuestaRequerido, settipoPropuestaRequerido] = useState(false);\r\n  const [subPropuesta, setsubPropuesta] = useState(null);\r\n  const [subPropuestaSelect, setsubPropuestaSelect] = useState(undefined);\r\n  const [subPropuestaSet, setsubPropuestaSet] = useState(null);\r\n  const [subPropuestaRequerido, setsubPropuestaRequerido] = useState(false);\r\n  const [tipoFacilidad, settipoFacilidad] = useState(null);\r\n  const [tipoFacilidadSelect, settipoFacilidadSelect] = useState(undefined);\r\n  const [deudoresListSelect, setdeudoresListSelect] = useState(undefined);\r\n  const [terminosSelect, setterminosSelect] = useState(undefined);\r\n  const [tipoFacilidadSet, settipoFacilidadSet] = useState(null);\r\n  const [deudoresList, setdeudoresList] = useState(null);\r\n  const [tipo, settipo] = useState(\"guardar\");\r\n  const [dataRows, setdataRows] = useState(null);\r\n  const [dataEdit, setdataEdit] = useState(null);\r\n  const [campoRequeridoDeudores, setcampoRequeridoDeudores] = useState(false);\r\n  const [MontoFacilidad, setMontoFacilidad] = useState(0);\r\n  let listaIdentificacion = props.identificationList;\r\n  const [tipoFacilidadRequerido, settipoFacilidadRequerido] = useState(false);\r\n  const [facilityNumber, setfacilityNumber] = useState(1);\r\n  const typeTerms = [{ label: t(\"Days\"), value: t(\"Days\") }, { label: t(\"Month\"), value: t(\"Month\") }, { label: t(\"Year\"), value: t(\"Year\") }]\r\n  React.useEffect(() => {\r\n    setterminosSelect(typeTerms[0])\r\n    // Read Api Service data\r\n    // initializeData();\r\n  }, []);\r\n  React.useEffect(() => {\r\n\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n\r\n    // Read Api Service data\r\n    cargarFacilidades(dataSession)\r\n    initializeData(dataSession);\r\n  }, []);\r\n  function cargarFacilidades(dataSession) {\r\n    api.consultarDeudores(dataSession.transactionId)\r\n      .then((data2) => {\r\n        if (data2 !== null && data2 !== undefined) {\r\n          let jsonDeudores = [];\r\n          for (let i = 0; i < data2.length; i++) {\r\n            jsonDeudores.push({ label: data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"], value: data2[i][\"personId\"] })\r\n          }\r\n          api.retrieveProposalType()\r\n            .then((propuesta) => {\r\n              api.retrieveFacilityType()\r\n                .then((facilidad) => {\r\n                  api.consultarFacilidades(props.dataGlobal.requestId).then(resp => {\r\n                    let acu = 0;\r\n                    if (resp?.filter(data => data.debtor != \"  \").length > 0) {\r\n                      // initializeData(dataSession);\r\n                      setdataRows(resp.map((data, index) => {\r\n                        acu++;\r\n                        return (\r\n                          <tr key={acu}>\r\n                            <td data-label={t(\"Facility\")}>{acu}</td>\r\n                            {/* <td>{data.debtor}</td> */}\r\n                            <td data-label={t(\"Debtor\")}>{jsonDeudores.find(x => x.value === Number(data.debtor))?.label}</td>\r\n                            <td data-label={t(\"Facility Type\")}>{facilidad.find(x => x.id === data.facilityTypeId)?.description}</td>\r\n                            <td data-label={t(\"Proposal\")}>{propuesta.find(x => x.id === data.proposalTypeId)?.description}</td>\r\n                            <td data-label={t(\"Approved Risk\")}>{currencyData.format(data.amount)}</td>\r\n                            <td data-label={t(\"Amount\") + \" \" + t(\"Rate\")}>{currencyData.format(data.proposalRate)}</td>\r\n                            {/* <td>{data.observations}%</td> */}\r\n                            <td data-label={t(\"Actions\")} style={{ textAlign: \"right\" }}>\r\n                              <Button type=\"button\" color=\"link\" onClick={(resp) => {\r\n                                console.log(acu);\r\n                                data.facilityIdVisible = index + 1;\r\n                                setdataSet(data); cargarDataSelect(data); settipo(\"editar\"); setViewSeccion(true);\r\n                              }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n                            </td>\r\n                          </tr>)\r\n                      }\r\n                      ));\r\n                    } else {\r\n                      setdataRows(\r\n                        <tr key={1}>\r\n                          <td colSpan=\"7\" style={{ textAlign: 'center' }}></td>\r\n                        </tr>);\r\n                    }\r\n                  });\r\n                })\r\n            })\r\n        }\r\n\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    settipoPropuestaRequerido(dataValidation.tipoPropuestaRequerido);\r\n    setsubPropuestaRequerido(dataValidation.subPropuestaRequerido);\r\n    settipoFacilidadRequerido(dataValidation.tipoFacilidadRequerido);\r\n  }, [dataValidation]);\r\n  function cargarDataSelect(data) {\r\n    var defaultVal = null;\r\n    setapplyEscrow(data?.applyEscrow);\r\n    try {\r\n      if (tipoPropuesta.length > 0 && data.proposalTypeId !== null) {\r\n        defaultVal = tipoPropuesta.find(x => x.value === data.proposalTypeId);\r\n        if (defaultVal !== undefined) {\r\n          settipoPropuestaSelect(defaultVal);\r\n        }\r\n      }\r\n      if (subPropuesta.length > 0 && data.proposalTypeName !== null) {\r\n        defaultVal = subPropuesta.find(x => x.value === data.proposalTypeName);\r\n        if (defaultVal !== undefined) {\r\n          setsubPropuestaSelect(defaultVal);\r\n        }\r\n      }\r\n      if (tipoFacilidad.length > 0 && data.facilityTypeId !== null) {\r\n        defaultVal = tipoFacilidad.find(x => x.value === data.facilityTypeId);\r\n        if (defaultVal !== undefined) {\r\n          settipoFacilidadSelect(defaultVal);\r\n        }\r\n      }\r\n      if (typeTerms.length > 0 && data.termType !== null) {\r\n        defaultVal = typeTerms.find(x => x.value === data.termType);\r\n        if (defaultVal !== undefined) {\r\n          setterminosSelect(defaultVal);\r\n        }\r\n      }\r\n      if (deudoresList.length > 0 && data.debtor !== null) {\r\n        defaultVal = deudoresList.find(x => x.value === data.debtor);\r\n        if (defaultVal !== undefined) {\r\n          setdeudoresListSelect(defaultVal);\r\n        }\r\n      }\r\n    }\r\n\r\n    catch (err) { }\r\n  }\r\n  React.useEffect(() => {\r\n    cargarDataSelect(dataSet)\r\n    // Read Api Service data\r\n    setMontoFacilidad(dataSet.amount)\r\n\r\n  }, [dataSet, ViewSeccion, subPropuesta]);\r\n  function initializeData(dataLocation) {\r\n    // consultarDeudores\r\n    api.consultarDeudores(dataLocation.transactionId)\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: data[i][\"name\"] + \" \" + data[i][\"name2\"] + \" \" + data[i][\"lastName\"] + \" \" + data[i][\"lastName2\"], value: data[i][\"personId\"] })\r\n          }\r\n          setdeudoresListSelect(json[0])\r\n          setdeudoresList(json)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveProposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        settipoPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveFacilityType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        settipoFacilidad(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveSubproposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        setsubPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  function soloNumeros(e, dato) {\r\n    var teclaPulsada = window.event ? window.event.keyCode : e.which;\r\n    var valor = document.getElementById(dato).value;\r\n    if (teclaPulsada === 45 && valor.indexOf(\"-\") === -1) {\r\n      document.getElementById(dato).value = \"-\" + valor;\r\n    }\r\n    if (teclaPulsada === 13 || (teclaPulsada === 46 && valor.indexOf(\".\") === -1)) {\r\n      return true;\r\n    }\r\n    console.log(valor);\r\n    return /\\d/.test(String.fromCharCode(teclaPulsada));\r\n\r\n  }\r\n  //   function handleChangeInputfrmSearch(e) {\r\n  //     values[e.target.name] = e.target.value;\r\n  // }\r\n  return (\r\n    <React.Fragment>\r\n      <AvForm id=\"formFacilidades\" className=\"needs-validation\" onSubmit={handleSubmitFacilidad}>\r\n        {!ViewSeccion ?\r\n          <React.Fragment>\r\n\r\n            {datosUsuario ?\r\n              <FacilityHistory partyId={datosUsuario.customerNumberT24} />\r\n              : null}\r\n            <Card>\r\n              <h5 className=\"card-sub-title\">{t(\"ActualFacilityList\")}</h5>\r\n              <CardBody>\r\n                <div className=\"responsive-table scroll\">\r\n                  <Table className=\"responsive-table\" responsive>\r\n                    <thead className=\"table-light\">\r\n                      <tr>\r\n                        <th>{t(\"Facility\")}</th>\r\n                        <th>{t(\"Debtor\")}</th>\r\n                        <th>{t(\"Facility Type\")}</th>\r\n                        <th>{t(\"Proposal\")}</th>\r\n                        <th>{t(\"Approved Risk\")}</th>\r\n                        <th>{t(\"Amount\") + \" \" + t(\"Rate\")}</th>\r\n                        <th><Link className=\"float-end\" onClick={() => { newFacility(); }}><i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i></Link></th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {dataRows}\r\n                    </tbody>\r\n                  </Table>\r\n                </div>\r\n              </CardBody>\r\n            </Card>\r\n          </React.Fragment>\r\n          : null}\r\n        {ViewSeccion ?\r\n          <Card>\r\n            <CardBody>\r\n              <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n                <h5>{t(\"Facility\")}</h5>\r\n                <p className=\"card-title-desc\"></p>\r\n                {/* CustomerSeccion */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"General Data\")}</h5>\r\n                    <Row>\r\n                      <Col lg=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"facilityNumber\">{t(\"Facility\")} {t(\" \")} {t(\"Number\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"facilityNumber\"\r\n                            type=\"text\"\r\n                            validate={{\r\n                              number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                            }}\r\n                            value={dataSet.facilityIdVisible}\r\n                            id=\"facilityNumber\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col lg=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"cr\">{t(\"CR\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"cr\"\r\n                            value={dataSet.cr}\r\n                            type=\"text\"\r\n                            id=\"cr\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col lg=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"amount\">{t(\"Amount\")}</Label>\r\n                          {/* <CurrencyInput\r\n                            className=\"form-control\"\r\n                            name=\"amount\"\r\n                            id=\"amount\"\r\n                            onChange={(event) => { setMontoFacilidad(event.value) }}\r\n                            value={dataSet.amount} /> */}\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"amount\"\r\n                            type=\"text\"\r\n                            pattern=\"^[0-9,.]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                            onChange={(e) => { setMontoFacilidad(e.target.value); }}\r\n                            value={currencyData.format(dataSet?.amount ?? 0)}\r\n                            id=\"amount\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md=\"8\">\r\n                        <Label htmlFor=\"amount\">{t(\"Debtors\")}</Label>\r\n                        <Select\r\n                          onChange={(e) => {\r\n                            setdeudoresListSelect(deudoresList.find(x => x.value === e.value))\r\n                          }}\r\n                          options={deudoresList}\r\n                          classNamePrefix=\"select2-selection\"\r\n                          placeholder={t(\"Select\")}\r\n                          value={deudoresListSelect}\r\n                        />\r\n                        {campoRequeridoDeudores ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                          : null}\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"balance\">{t(\"Balance\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"balance\"\r\n                            value={currencyData.format(dataSet?.balance ?? 0)}\r\n                            pattern=\"^[0-9,.]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n\r\n                            type=\"text\"\r\n                            id=\"balance\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* ProposalSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"Proposal\")}</h5>\r\n                    {/* <AvForm id=\"frmFacilidades\" className=\"needs-validation\" onSubmit={handleSubmitFacilidad}> */}\r\n                    <Row>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"proposalType\">{t(\"Proposal Type\")}</Label>\r\n                        <Select\r\n                          onChange={(e) => {\r\n                            settipoPropuestaSelect(tipoPropuesta.find(x => x.value === e.value))\r\n                            setpropuestaSet(e.value);\r\n                            dataReturn.proposalTypeId = e.value;\r\n                            setdataReturn(dataReturn);\r\n                          }}\r\n                          options={tipoPropuesta}\r\n                          placeholder={t(\"Select\")}\r\n                          value={tipoPropuestaSelect}\r\n                        />\r\n                        {dataValidation.tipoPropuestaRequerido ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                          : null}\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"subproposalType\">{t(\"SubProposal Type\")}</Label>\r\n                        <Select\r\n                          onChange={(e) => {\r\n                            setsubPropuestaSelect(subPropuesta.find(x => x.value === e.value))\r\n                            setsubPropuestaSet(e.value);\r\n                            dataReturn.proposalTypeName = e.value;\r\n                            setdataReturn(dataReturn);\r\n                          }}\r\n                          options={subPropuesta}\r\n                          placeholder={t(\"Select\")}\r\n                          value={subPropuestaSelect}\r\n                        />\r\n                        {dataValidation.subPropuestaRequerido ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                          : null}\r\n\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"facilityType\">{t(\"Facility Type\")}</Label>\r\n                        <Select\r\n                          onChange={(e) => {\r\n                            settipoFacilidadSelect(tipoFacilidad.find(x => x.value === e.value))\r\n                            settipoFacilidadSet(e.value);\r\n                            dataReturn.facilityTypeId = e.value;\r\n                            setdataReturn(dataReturn);\r\n                          }}\r\n                          options={tipoFacilidad}\r\n                          placeholder={t(\"Select\")}\r\n                          value={tipoFacilidadSelect}\r\n                        />\r\n                        {dataValidation.tipoFacilidadRequerido ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                          : null}\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"purpose\">{t(\"Purpose\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"purpose\"\r\n                            id=\"purpose\"\r\n                            // validate={{\r\n                            //   required: { value: true, errorMessage: t(\"Required\") }\r\n                            // }}\r\n                            type=\"textarea\"\r\n                            value={dataSet.purpose}\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"sublimits\">{t(\"Sub Limits\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"sublimits\"\r\n                            id=\"sublimits\"\r\n                            value={dataSet.sublimits}\r\n                            type=\"textarea\"\r\n                            rows=\"4\" />\r\n                        </AvGroup></Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* InterestRateSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"Proposed Interest Rate\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"proposalRate\">{t(\"Amount\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"proposalRate\"\r\n                            type=\"text\"\r\n                            pattern=\"^[0-9,.]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                            id=\"proposalRate\"\r\n                            value={currencyData.format(dataSet?.proposalRate ?? 0)} />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"noSubsidyRate\">{t(\"Rate without Subsidy\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"noSubsidyRate\"\r\n                            type=\"text\"\r\n                            id=\"noSubsidyRate\"\r\n                            value={currencyData.format(dataSet?.noSubsidyRate ?? 0)}\r\n                            pattern=\"^[0-9,.]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n\r\n                          />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"effectiveRate\">{t(\"Effective Interest Rate\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"effectiveRate\"\r\n                            value={currencyData.format(dataSet?.effectiveRate ?? 0)}\r\n                            type=\"text\"\r\n                            id=\"effectiveRate\"\r\n                            pattern=\"^[0-9,.]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                          />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"feci\">{t(\"FECI\")}</Label>\r\n                          <AvField id=\"feci\"\r\n                            className=\"form-control\"\r\n                            name=\"feci\"\r\n                            type=\"select\"\r\n                            value={dataSet.feci ? \"true\" : \"false\"}\r\n                            required>\r\n                            <option value=\"true\">Si</option>\r\n                            <option value=\"false\">No</option>\r\n                          </AvField>\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* CommissionSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <ComisionSeccion MontoFacilidad={MontoFacilidad} validation={dataValidation} dataSet={dataSet} items={commissions}\r\n                      onSaveItem={handleNewCommission}\r\n                      onDeleteItem={handleDeleteCommission} />\r\n                  </Col>\r\n                </Row>\r\n                {/* TermsSection */}\r\n                <h5>{t(\"Terms\")}</h5>\r\n                <Row>\r\n                  <Col md=\"4\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label htmlFor=\"termDays\">{t(\"Quantity\")}</Label>\r\n                      <AvField\r\n                        className=\"form-control\"\r\n                        name=\"termDays\"\r\n                        value={dataSet.termDays}\r\n                        type=\"text\"\r\n                        validate={{\r\n                          number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                        }}\r\n                        id=\"termDays\" />\r\n                    </AvGroup>\r\n                  </Col>\r\n                  <Col md=\"4\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label>{t(\"DaysMonthsYears\")}</Label>\r\n                      <Select\r\n                        onChange={(e) => {\r\n                          setterminosSelect(typeTerms.find(x => x.value === e.value))\r\n                          dataReturn.termType = e.value;\r\n                          setdataReturn(dataReturn);\r\n                        }}\r\n                        options={typeTerms}\r\n                        placeholder={t(\"Select\")}\r\n                        value={terminosSelect}\r\n                      />\r\n                    </AvGroup>\r\n                  </Col>\r\n\r\n                  {/* <Col md=\"4\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label htmlFor=\"termDays\">{t(\"Terms in Days/Month/Year\")}</Label>\r\n                      <AvField\r\n                        className=\"form-control\"\r\n                        name=\"termDays\"\r\n                        value={dataSet.deadlinesDays}\r\n                        type=\"text\"\r\n                        validate={{\r\n                          number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                        }}\r\n                        id=\"termDays\" />\r\n                    </AvGroup>\r\n                  </Col> */}\r\n                  <Col md=\"12\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label htmlFor=\"termsDescription\">{t(\"Terms Description\")}</Label>\r\n                      <AvField\r\n                        className=\"form-control\"\r\n                        name=\"termDescription\"\r\n                        type=\"textarea\"\r\n                        id=\"termDescription\"\r\n                        value={dataSet.termDescription}\r\n                        rows=\"4\" />\r\n                    </AvGroup>\r\n                  </Col>\r\n                </Row>\r\n                {/* DisbursementSection */}\r\n                <DisbursementSection validation={dataValidation} dataSet={dataSet} disbursementTerms={disbursementTerms}\r\n                  onSaveDisbursementTerm={handleNewDisbursementTerm}\r\n                  onDeleteDisbursementTerm={handleDeleteDisbursementTerm}\r\n                  paymentPrograms={paymentPrograms}\r\n                  onSavePaymentProgram={handleNewPaymentProgram}\r\n                  onDeletePaymentProgram={handleDeletePaymentProgram}\r\n                  disbursementMethods={disbursementMethods}\r\n                  onSaveDisbursementMethod={handleNewDisbursementMethod}\r\n                  onDeleteDisbursementMethod={handleDeleteDisbursementMethod} />\r\n                {/* WarrantsSection */}\r\n                <WarrantsSection ViewSeccion={ViewSeccion} validation={dataValidation} dataSet={dataSet} warrants={warrants}\r\n                  onSaveItem={handleNewWarrant}\r\n                  onDeleteItem={handleDeleteWarrant} />\r\n                {/* LTV */}\r\n                <Row>\r\n                  <Col md=\"12\">\r\n                    <Row>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"relatedPart\">{t(\"LTV\")}(%)</Label>\r\n                        <AvGroup className=\"mb-3\">\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"ltv\"\r\n                            value={dataSet.ltv}\r\n                            validate={{\r\n                              number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                            }}\r\n                            max=\"100\"\r\n                            type=\"number\"\r\n                            id=\"ltv\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"relatedPart\">{t(\"Escrow\")}</Label>\r\n                        <AvGroup check className=\"mb-3\">\r\n                          <Switch name=\"fd\"\r\n                            uncheckedIcon={<Offsymbol />}\r\n                            checkedIcon={<OnSymbol />}\r\n                            onColor=\"#007943\"\r\n                            id=\"check1\"\r\n                            className=\"form-label\"\r\n                            onChange={() => {\r\n                              setapplyEscrow(!applyEscrow);\r\n                            }}\r\n                            checked={applyEscrow}\r\n                          />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* SuretiesSection */}\r\n                <SuretiesSection validation={dataValidation} dataSet={dataSet} sureties={sureties}\r\n                  onSaveItem={handleNewSurety}\r\n                  onDeleteItem={handleDeleteSurety} />\r\n                {/* FinancialConditionsSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"FinancialConditions\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"finantialConditions\"\r\n                            type=\"textarea\"\r\n                            value={dataSet.finantialConditions}\r\n                            id=\"finantialConditions\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* AmbientalRiskSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"AmbientalRisk\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"category\">{t(\"Category\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"environmentRiskCategory\"\r\n                            type=\"text\"\r\n                            disabled={true}\r\n                            value={garantiaET}\r\n                            id=\"environmentRiskCategory\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"covenant\">{t(\"Covenant\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"covenant\"\r\n                            type=\"text\"\r\n                            value={dataSet.covenant}\r\n                            id=\"covenant\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"opinion\">{t(\"Opinion\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"environmentRiskOpinion\"\r\n                            type=\"textarea\"\r\n                            value={dataSet?.environmentRiskOpinion}\r\n                            id=\"environmentRiskOpinion\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* FinantialCovenantSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"FinantialCovenant\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"finantialCovenant\"\r\n                            value={dataSet.finantialCovenant}\r\n                            type=\"textarea\"\r\n                            id=\"finantialCovenant\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* LegalDocumentationSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"LegalDocumentation\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"legalDocumentation\"\r\n                            value={dataSet.legalDocumentation}\r\n                            type=\"textarea\"\r\n                            id=\"legalDocumentation\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* OtherConditionsSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"OtherConditions\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"otherConditions\"\r\n                            value={dataSet.otherConditions}\r\n                            type=\"textarea\"\r\n                            id=\"otherConditions\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* CreditRiskSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"CreditRisk\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"creditrisk\">{t(\"Opinion\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"creditRiskOpinion\"\r\n                            type=\"textarea\"\r\n                            value={dataSet?.creditRiskOpinion ?? \"\"}\r\n                            id=\"creditRiskOpinion\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* ProvisionSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"Provision\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"provision\"\r\n                            value={dataSet.provision}\r\n                            type=\"textarea\"\r\n                            id=\"provision\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                <Row className=\"my-2\">\r\n                  <Col xl=\"12 text-end\">\r\n                    <Button color=\"danger\"\r\n                      onClick={(e) => {\r\n                        setViewSeccion(!ViewSeccion);\r\n                        cargarFacilidades(locationData)\r\n                      }} style={{ margin: '5px' }}>\r\n                      <i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"Cancel\")}\r\n                    </Button>\r\n                    <Button className=\"btn btn-primary\" type=\"submit\" color=\"success\" style={{ margin: '5px' }}>\r\n                      {t(\"Save\")}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </LoadingOverlay>\r\n            </CardBody>\r\n          </Card>\r\n          : null}\r\n      </AvForm>\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={t(\"SuccessDialog\")}\r\n          confirmButtonText={t(\"Confirm\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false);\r\n            cargarFacilidades(locationData)\r\n          }}\r\n        >\r\n          {t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={t(\"ErrorDialog\")}\r\n          confirmButtonText={t(\"Confirm\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={t(\"Yesdeleteit\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            setViewSeccion(!ViewSeccion);\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n\r\n  );\r\n});\r\nListaFacilidad.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  editMode: PropTypes.bool,\r\n  onSaveFacility: PropTypes.func\r\n};\r\nListaFacilidad.defaultProps = {\r\n  items: [],\r\n  editMode: false\r\n};\r\nexport default ListaFacilidad;\r\n"]},"metadata":{},"sourceType":"module"}