{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useImperativeHandle,forwardRef,useContext}from'react';import{translationHelpers}from'../../../../helpers';import RiesgoAmbientalContext from'../RiesgoAmbientalContext';import{Card,CardBody,Row,Col,Button,Label}from\"reactstrap\";import{AvForm,AvField,AvGroup,AvInput}from\"availity-reactstrap-validation\";import ServicioRiesgoAmbiental from'../../../../services/RiesgoAmbiental/RiesgoAmbiental';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FormDetalles=/*#__PURE__*/forwardRef(function(props,ref){var _translationHelpers=translationHelpers('environmental_risk','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var _useState=useState(true),_useState2=_slicedToArray(_useState,2),displayCovenantDetails=_useState2[0],setDisplayCovenantDetails=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formValid=_useState4[0],setFormValid=_useState4[1];// services\nvar context=useContext(RiesgoAmbientalContext);var servicioRiesgoAmbiental=new ServicioRiesgoAmbiental();useImperativeHandle(ref,function(){return{submit:function submit(){var validate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var form=document.getElementById('formDetallesRiesgoAmbiental');form.requestSubmit();return formValid;},getFormValidation:function getFormValidation(){return formValid;}};});function handleCovenantChange(event){var value=event.target.value==='Si';setDisplayCovenantDetails(value);}function handleSubmit(event,errors,values){event.preventDefault();var isValid=errors.length===0;setFormValid(isValid);if(isValid){console.log('submit',values,errors);var transactionId=context.transactionId;servicioRiesgoAmbiental.guardarInformacionRiesgoAmbiental(transactionId,values).then(function(result){console.log('result',result);}).catch(function(error){console.error('Error guardando',error);});}}return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"Other Details\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(AvForm,{id:\"formDetallesRiesgoAmbiental\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"covenants\",children:t(\"Covenants Ambientales\")}),/*#__PURE__*/_jsxs(AvField,{className:\"form-control\",name:\"covenants\",type:\"select\",id:\"covenants\",value:\"Yes\",onChange:handleCovenantChange,children:[/*#__PURE__*/_jsx(\"option\",{children:c(\"Yes\")}),/*#__PURE__*/_jsx(\"option\",{children:c(\"No\")})]})]})})}),displayCovenantDetails&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"my-3\",children:[/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"detalle\",children:t(\"Detalle\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"detalle\",type:\"text\",id:\"detalle\",validate:{required:{value:true,errorMessage:c(\"Required\")}}})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"cumplimiento\",children:t(\"Cumplimiento\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"cumplimiento\",type:\"text\",id:\"cumplimiento\",validate:{required:{value:true,errorMessage:c(\"Required\")}}})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"plazo\",children:t(\"Plazo\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"plazo\",type:\"text\",id:\"plazo\",validate:{required:{value:true,errorMessage:c(\"Required\")}}})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"situacion\",children:t(\"Situacion Detectada\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"situacion\",type:\"textarea\",id:\"situacion\",rows:\"7\"})]})})})]}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"recomendaciones\",children:t(\"Recomendaciones\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"recomendaciones\",type:\"textarea\",id:\"recomendaciones\",rows:\"7\"})]})})}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"conclusiones\",children:t(\"Conclusiones\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"conclusiones\",type:\"textarea\",id:\"conclusiones\",rows:\"7\"})]})})})]})]})});});export default FormDetalles;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/16_RiesgoAmbiental/riesgoAmbiental/FormDetalles.js"],"names":["useState","useImperativeHandle","forwardRef","useContext","translationHelpers","RiesgoAmbientalContext","Card","CardBody","Row","Col","Button","Label","AvForm","AvField","AvGroup","AvInput","ServicioRiesgoAmbiental","FormDetalles","props","ref","t","c","displayCovenantDetails","setDisplayCovenantDetails","formValid","setFormValid","context","servicioRiesgoAmbiental","submit","validate","form","document","getElementById","requestSubmit","getFormValidation","handleCovenantChange","event","value","target","handleSubmit","errors","values","preventDefault","isValid","length","console","log","transactionId","guardarInformacionRiesgoAmbiental","then","result","catch","error","required","errorMessage"],"mappings":"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","sourcesContent":["import { useState, useImperativeHandle, forwardRef, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../../helpers';\r\nimport RiesgoAmbientalContext from '../RiesgoAmbientalContext';\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup, AvInput } from \"availity-reactstrap-validation\"\r\nimport ServicioRiesgoAmbiental from '../../../../services/RiesgoAmbiental/RiesgoAmbiental';\r\n\r\n\r\nconst FormDetalles = forwardRef((props, ref) => {\r\n\r\n  const [t, c] = translationHelpers('environmental_risk', 'common');\r\n\r\n  const [displayCovenantDetails, setDisplayCovenantDetails] = useState(true);\r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  // services\r\n  const context = useContext(RiesgoAmbientalContext);\r\n  const servicioRiesgoAmbiental = new ServicioRiesgoAmbiental();\r\n\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    submit: (validate = true) => {\r\n      const form = document.getElementById('formDetallesRiesgoAmbiental');\r\n      form.requestSubmit();\r\n      return formValid;\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n\r\n  function handleCovenantChange(event) {\r\n    const value = event.target.value === 'Si';\r\n    setDisplayCovenantDetails(value);\r\n  }\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n    if( isValid ) {\r\n      console.log('submit', values, errors);\r\n      const { transactionId } = context;\r\n      servicioRiesgoAmbiental.guardarInformacionRiesgoAmbiental(transactionId, values)\r\n        .then((result) => {\r\n          console.log('result', result);\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error guardando', error);\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n\r\n      <CardBody>\r\n        <h4 className=\"card-title\">{ t(\"Other Details\") }</h4>\r\n        <p className=\"card-title-desc\"></p>\r\n\r\n        <AvForm id=\"formDetallesRiesgoAmbiental\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"covenants\">{ t(\"Covenants Ambientales\") }</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"covenants\"\r\n                type=\"select\"\r\n                id=\"covenants\"\r\n                value=\"Yes\"\r\n                onChange={ handleCovenantChange }>\r\n                  <option>{ c(\"Yes\") }</option>\r\n                  <option>{ c(\"No\") }</option>\r\n              </AvField>\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        { displayCovenantDetails && (\r\n        <>\r\n        <Row className=\"my-3\">\r\n          <Col md=\"4\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"detalle\">{ t(\"Detalle\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"detalle\"\r\n                type=\"text\"\r\n                id=\"detalle\"\r\n                validate={{\r\n                  required: { value: true, errorMessage: c(\"Required\") }\r\n                }} />\r\n            </AvGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"cumplimiento\">{ t(\"Cumplimiento\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"cumplimiento\"\r\n                type=\"text\"\r\n                id=\"cumplimiento\"\r\n                validate={{\r\n                  required: { value: true, errorMessage: c(\"Required\") }\r\n                }} />\r\n            </AvGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"plazo\">{ t(\"Plazo\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"plazo\"\r\n                type=\"text\"\r\n                id=\"plazo\"\r\n                validate={{\r\n                  required: { value: true, errorMessage: c(\"Required\") }\r\n                }} />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"situacion\">{ t(\"Situacion Detectada\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"situacion\"\r\n                type=\"textarea\"\r\n                id=\"situacion\"\r\n                rows=\"7\" />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n        </>\r\n        )}\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"recomendaciones\">{ t(\"Recomendaciones\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"recomendaciones\"\r\n                type=\"textarea\"\r\n                id=\"recomendaciones\"\r\n                rows=\"7\" />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"conclusiones\">{ t(\"Conclusiones\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"conclusiones\"\r\n                type=\"textarea\"\r\n                id=\"conclusiones\"\r\n                rows=\"7\" />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        </AvForm>\r\n\r\n      </CardBody>\r\n\r\n    </Card>\r\n  );\r\n});\r\n\r\n\r\nFormDetalles.propTypes = {\r\n  onSearch: PropTypes.func\r\n};\r\n\r\nexport default FormDetalles;\r\n"]},"metadata":{},"sourceType":"module"}