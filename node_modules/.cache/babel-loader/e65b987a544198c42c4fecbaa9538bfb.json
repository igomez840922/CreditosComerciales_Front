{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useTranslation,withTranslation}from\"react-i18next\";import{Row,Col,Button,Label,Input,Modal,Card,CardBody,CardFooter}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import{CoreServices}from\"../../../../../services\";import ApiServiceBackend from\"../../../../../services/BackendServices/Services\";import Select from\"react-select\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalInfoAccionistas=/*#__PURE__*/React.forwardRef(function(props,ref){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),paises=_useState2[0],setPaises=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),codigoPais=_useState4[0],setCodigoPais=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),sumaParticipacion=_useState6[0],setsumaParticipacion=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),sumaParticipacionMessage=_useState8[0],setsumaParticipacionMessage=_useState8[1];var _useState9=useState(\"1\"),_useState10=_slicedToArray(_useState9,2),identificationType=_useState10[0],setidentificationType=_useState10[1];//1-Juridico, 2-Persona\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),campoRequeridoTipo=_useState12[0],setcampoRequeridoTipo=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),campoRequeridoNacionalidad=_useState14[0],setcampoRequeridoNacionalidad=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),tipo=_useState16[0],setTipo=_useState16[1];var _useState17=useState(undefined),_useState18=_slicedToArray(_useState17,2),nacionalidadSelect=_useState18[0],setnacionalidadSelect=_useState18[1];var _useState19=useState(undefined),_useState20=_slicedToArray(_useState19,2),tipoPersona=_useState20[0],settipoPersona=_useState20[1];var _useState21=useState(props.jsonAccionistas),_useState22=_slicedToArray(_useState21,2),dataReturn=_useState22[0],setDataReturn=_useState22[1];var _useState23=useState(1),_useState24=_slicedToArray(_useState23,2),cambio=_useState24[0],setcambio=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),identificationTypeList=_useState26[0],setIdentificationTypeList=_useState26[1];var _useState27=useState(undefined),_useState28=_slicedToArray(_useState27,2),identificationTypeSelected=_useState28[0],setIdentificationTypeSelected=_useState28[1];var _useState29=useState(undefined),_useState30=_slicedToArray(_useState29,2),personTypeSelect=_useState30[0],setpersonTypeSelect=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),tipoIdentificacion=_useState32[0],settipoIdentificacion=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),campoRequeridoIdentificacion=_useState34[0],setcampoRequeridoIdentificacion=_useState34[1];// Submitimos formulario para busqueda de clientes\nvar personTypeData=[{label:t(\"Legal\"),value:\"1\"},{label:t(\"Natural\"),value:\"2\"}];function handleSubmit(event,errors,values){if(sumaParticipacionMessage){return;}event.preventDefault();if(errors.length>0){return;}if(props.tipo==\"guardar\"){props.agregarAccionista(values,props.tipo);}else{values.shareholderId=props.dataAcciones.shareholderId;props.agregarAccionista(values,props.tipo);}}React.useEffect(function(){// Read Api Service data\ncargarPaises();if(props.tipo!=\"guardar\"){setidentificationType(props.dataAcciones.personType);}if(props.dataGeneralIA!=null){setsumaParticipacion(0);if(props.tipo==\"guardar\"){var sumaTotal=0;for(var i=0;i<props.dataGeneralIA.length;i++){sumaTotal=sumaTotal+props.dataGeneralIA[i].participation;}setsumaParticipacion(sumaTotal);}else{var _sumaTotal=0;for(var _i=0;_i<props.dataGeneralIA.length;_i++){if(props.dataGeneralIA[_i].shareholderId!=props.dataAcciones.shareholderId){_sumaTotal=_sumaTotal+props.dataGeneralIA[_i].participation;}}setsumaParticipacion(_sumaTotal);}}},[props]);function changePais(event){setCodigoPais(event);}function changeTipo(event){setTipo(event);setidentificationType(event.value);}function cargarPaises(){var api=new CoreServices();api.getPaisesCatalogo().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}var optionGroup1=[{label:t(\"Selectacountry\"),options:json}];setPaises(json);setcambio(null);setcambio(2);});var apiServiceBackend=new ApiServiceBackend();apiServiceBackend.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"description\"]),value:data[i][\"id\"]});}/*const optionGroup1 = [\r\n            {\r\n              label: t(\"ID Type\"),\r\n              options: json,\r\n            },\r\n          ];*/setIdentificationTypeList(json);}}).catch(function(error){console.error('api error: ',error);});}//On change Inputs\nfunction handleChangeInputfrmSearch(e){switch(e.target.name){case\"identificationType\":{setidentificationType(e.target.value);break;}}}// validamos que el porcentaje de la participacion no sea mayor a 100\nfunction validationParticipation(value){var sumaFinal=parseFloat(value)+parseFloat(sumaParticipacion);if(parseFloat(sumaFinal)>100){setsumaParticipacionMessage(true);}else{setsumaParticipacionMessage(false);}}return/*#__PURE__*/_jsxs(Modal,{size:\"xl\",isOpen:props.isOpen,toggle:props.toggle,centered:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.dataAcciones.name+\" \"+props.dataAcciones.secondName+\" \"+props.dataAcciones.lastName+\" \"+props.dataAcciones.secondSurname}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title float-right\",style:{marginRight:'15px'},children:props.dataAcciones.clientDocumentId}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:props.toggle,\"data-dismiss\":\"modal\",className:\"close\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(AvForm,{id:\"frmSearch\",className:\"needs-validation\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",style:{backgroundColor:\"#f3f5f7\"},children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Label,{htmlFor:\"name\",children:[t(\"Participation\"),\" \",t(\"available\"),\" \",100-sumaParticipacion,\"%\"]}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"participation\",id:\"participation\",onChange:function onChange(e){validationParticipation(e.target.value);},value:props.dataAcciones.participation,validate:{required:{value:true,errorMessage:t(\"Required Field\")},number:{value:true,errorMessage:t(\"InvalidField\")}}}),sumaParticipacionMessage?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Thepercentageexceeds100%\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"name\",children:t(\"YearsExprience\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"yearsExprience\",value:props.dataAcciones.yearsExperience,id:\"yearsExprience\",validate:{required:{value:true,errorMessage:t(\"Required Field\")},number:{value:true,errorMessage:t(\"InvalidField\")}}})]})})]})}),/*#__PURE__*/_jsxs(CardFooter,{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{id:\"btnNew\",color:\"dark\",type:\"button\",style:{margin:'5px'},onClick:props.toggle,\"data-dismiss\":\"modal\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),props.botones?/*#__PURE__*/_jsxs(Button,{id:\"btnSearch\",color:\"success\",type:\"submit\",style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",\" \",props.tipo==\"guardar\"?t(\"Save\"):t(\"Edit\")]}):null]})]})})})})})]});});export default withTranslation()(ModalInfoAccionistas);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalInfoAccionistas.js"],"names":["React","useState","useTranslation","withTranslation","Row","Col","Button","Label","Input","Modal","Card","CardBody","CardFooter","AvForm","AvField","AvGroup","CoreServices","ApiServiceBackend","Select","ModalInfoAccionistas","forwardRef","props","ref","t","i18n","paises","setPaises","codigoPais","setCodigoPais","sumaParticipacion","setsumaParticipacion","sumaParticipacionMessage","setsumaParticipacionMessage","identificationType","setidentificationType","campoRequeridoTipo","setcampoRequeridoTipo","campoRequeridoNacionalidad","setcampoRequeridoNacionalidad","tipo","setTipo","undefined","nacionalidadSelect","setnacionalidadSelect","tipoPersona","settipoPersona","jsonAccionistas","dataReturn","setDataReturn","cambio","setcambio","identificationTypeList","setIdentificationTypeList","identificationTypeSelected","setIdentificationTypeSelected","personTypeSelect","setpersonTypeSelect","tipoIdentificacion","settipoIdentificacion","campoRequeridoIdentificacion","setcampoRequeridoIdentificacion","personTypeData","label","value","handleSubmit","event","errors","values","preventDefault","length","agregarAccionista","shareholderId","dataAcciones","useEffect","cargarPaises","personType","dataGeneralIA","sumaTotal","i","participation","changePais","changeTipo","api","getPaisesCatalogo","then","response","json","Records","push","optionGroup1","options","apiServiceBackend","consultarCatalogoTipoIdentificacion","data","catch","error","console","handleChangeInputfrmSearch","e","target","name","validationParticipation","sumaFinal","parseFloat","isOpen","toggle","secondName","lastName","secondSurname","marginRight","clientDocumentId","backgroundColor","required","errorMessage","number","yearsExperience","textAlign","margin","botones"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  Modal,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport { CoreServices } from \"../../../../../services\";\r\nimport ApiServiceBackend from \"../../../../../services/BackendServices/Services\";\r\nimport Select from \"react-select\";\r\n\r\nconst ModalInfoAccionistas = React.forwardRef((props, ref) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [paises, setPaises] = useState([]);\r\n  const [codigoPais, setCodigoPais] = useState(null);\r\n  const [sumaParticipacion, setsumaParticipacion] = useState(0);\r\n  const [sumaParticipacionMessage, setsumaParticipacionMessage] = useState(false);\r\n  const [identificationType, setidentificationType] = useState(\"1\");//1-Juridico, 2-Persona\r\n  const [campoRequeridoTipo, setcampoRequeridoTipo] = useState(false);\r\n  const [campoRequeridoNacionalidad, setcampoRequeridoNacionalidad] = useState(false);\r\n  const [tipo, setTipo] = useState(null);\r\n  const [nacionalidadSelect, setnacionalidadSelect] = useState(undefined);\r\n  const [tipoPersona, settipoPersona] = useState(undefined);\r\n  const [dataReturn, setDataReturn] = useState(props.jsonAccionistas);\r\n  const [cambio, setcambio] = useState(1);\r\n  const [identificationTypeList, setIdentificationTypeList] = useState([]);\r\n  const [identificationTypeSelected, setIdentificationTypeSelected] = useState(undefined);\r\n  const [personTypeSelect, setpersonTypeSelect] = useState(undefined);\r\n  const [tipoIdentificacion, settipoIdentificacion] = useState(null);\r\n  const [campoRequeridoIdentificacion, setcampoRequeridoIdentificacion] = useState(false);\r\n  // Submitimos formulario para busqueda de clientes\r\n  const personTypeData = [{ label: t(\"Legal\"), value: \"1\" }, { label: t(\"Natural\"), value: \"2\" }]\r\n  function handleSubmit(event, errors, values) {\r\n    if (sumaParticipacionMessage) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    if (props.tipo == \"guardar\") {\r\n      props.agregarAccionista(values, props.tipo);\r\n    } else {\r\n      values.shareholderId = props.dataAcciones.shareholderId;\r\n      props.agregarAccionista(values, props.tipo);\r\n    }\r\n  }\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    cargarPaises()\r\n    if (props.tipo != \"guardar\") {\r\n      setidentificationType(props.dataAcciones.personType)\r\n    }\r\n    if (props.dataGeneralIA != null) {\r\n      setsumaParticipacion(0);\r\n      if (props.tipo == \"guardar\") {\r\n        let sumaTotal = 0;\r\n        for (let i = 0; i < props.dataGeneralIA.length; i++) {\r\n          sumaTotal = sumaTotal + props.dataGeneralIA[i].participation;\r\n        }\r\n        setsumaParticipacion(sumaTotal);\r\n      } else {\r\n        let sumaTotal = 0;\r\n        for (let i = 0; i < props.dataGeneralIA.length; i++) {\r\n          if (props.dataGeneralIA[i].shareholderId != props.dataAcciones.shareholderId) {\r\n            sumaTotal = sumaTotal + props.dataGeneralIA[i].participation;\r\n          }\r\n        }\r\n        setsumaParticipacion(sumaTotal);\r\n      }\r\n    }\r\n  }, [props]);\r\n  function changePais(event) {\r\n    setCodigoPais(event);\r\n  }\r\n  function changeTipo(event) {\r\n    setTipo(event);\r\n    setidentificationType(event.value);\r\n  }\r\n  function cargarPaises() {\r\n    const api = new CoreServices();\r\n    api.getPaisesCatalogo()\r\n      .then(response => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.Records.length; i++) {\r\n          json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n        }\r\n        const optionGroup1 = [\r\n          {\r\n            label: t(\"Selectacountry\"),\r\n            options: json,\r\n          },\r\n\r\n        ];\r\n        setPaises(json);\r\n        setcambio(null)\r\n        setcambio(2)\r\n      });\r\n    const apiServiceBackend = new ApiServiceBackend();\r\n    apiServiceBackend.consultarCatalogoTipoIdentificacion()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"description\"]), value: data[i][\"id\"] })\r\n          }\r\n          /*const optionGroup1 = [\r\n            {\r\n              label: t(\"ID Type\"),\r\n              options: json,\r\n            },\r\n          ];*/\r\n          setIdentificationTypeList(json)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  //On change Inputs\r\n  function handleChangeInputfrmSearch(e) {\r\n    switch (e.target.name) {\r\n      case \"identificationType\": {\r\n        setidentificationType(e.target.value);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  // validamos que el porcentaje de la participacion no sea mayor a 100\r\n  function validationParticipation(value) {\r\n    let sumaFinal = parseFloat(value) + parseFloat(sumaParticipacion);\r\n    if (parseFloat(sumaFinal) > 100) {\r\n      setsumaParticipacionMessage(true);\r\n    } else {\r\n      setsumaParticipacionMessage(false)\r\n    }\r\n  }\r\n  return (\r\n    <Modal\r\n      size=\"xl\"\r\n      isOpen={props.isOpen}\r\n      toggle={props.toggle}\r\n      centered={true}>\r\n      <div className=\"modal-header\">\r\n        <h5 className=\"card-title\">\r\n          {props.dataAcciones.name + \" \" + props.dataAcciones.secondName + \" \" + props.dataAcciones.lastName + \" \" + props.dataAcciones.secondSurname}\r\n        </h5>\r\n        <h5 className=\"card-title float-right\" style={{ marginRight: '15px' }}>\r\n                        {props.dataAcciones.clientDocumentId}\r\n                      </h5>\r\n        <button\r\n          type=\"button\"\r\n          onClick={props.toggle}\r\n          data-dismiss=\"modal\"\r\n          className=\"close\"\r\n          aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <AvForm id=\"frmSearch\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n        <div className=\"modal-body\" style={{ backgroundColor: \"#f3f5f7\" }}>\r\n          <Row>\r\n            <Col xl=\"12\">\r\n              <Card>\r\n                <CardBody>\r\n                  <Row>\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"name\">{t(\"Participation\")} {t(\"available\")} {100 - sumaParticipacion}%</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"participation\"\r\n                          id=\"participation\"\r\n                          onChange={(e) => { validationParticipation(e.target.value) }}\r\n                          value={props.dataAcciones.participation}\r\n                          validate={{\r\n                            required: { value: true, errorMessage: t(\"Required Field\") },\r\n                            number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                          }}\r\n                        />\r\n                        {sumaParticipacionMessage ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Thepercentageexceeds100%\")}</p>\r\n                          : null}\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"name\">{t(\"YearsExprience\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"yearsExprience\"\r\n                          value={props.dataAcciones.yearsExperience}\r\n                          id=\"yearsExprience\"\r\n                          validate={{\r\n                            required: { value: true, errorMessage: t(\"Required Field\") },\r\n                            number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n                </CardBody>\r\n                <CardFooter style={{ textAlign: \"right\" }}>\r\n                  <Button id=\"btnNew\" color=\"dark\" type=\"button\" style={{ margin: '5px' }} onClick={props.toggle} data-dismiss=\"modal\">\r\n                    <i className=\"mdi mdi mdi-cancel mid-12px\"></i>{\" \"}{t(\"Cancel\")}\r\n                  </Button>\r\n                  {props.botones ?\r\n                    <Button id=\"btnSearch\" color=\"success\" type=\"submit\" style={{ margin: '5px' }}><i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n                      {\" \"} {props.tipo == \"guardar\" ? t(\"Save\") : t(\"Edit\")}\r\n                    </Button> : null}\r\n                </CardFooter>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </AvForm>\r\n    </Modal>\r\n  );\r\n});\r\n\r\nModalInfoAccionistas.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  toggle: PropTypes.func,\r\n  onSelectClient: PropTypes.func.isRequired\r\n};\r\n\r\nexport default (withTranslation()(ModalInfoAccionistas));\r\n"]},"metadata":{},"sourceType":"module"}