{"ast":null,"code":"import _createForOfIteratorHelper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{WatchListModel,DocumentModel,ClientInfoModel,PartiesStaffModel}from\"../../models/Core\";import ApiServiceCore from\"../ApiServiceCore\";import*as url from\"../../helpers/url_helper\";import qs from\"qs\";import{ACT_FACILIDADACTIVOSFIJOS}from\"../../helpers/options_helper\";import*as OPTs from\"../../helpers/options_helper\";import{ResponseModel}from'../../models/Common/ResponseModel';import moment from\"moment\";import{part}from\"core-js/core/function\";import{GetMontNumberByName,GetMontNameByNumber}from'../../helpers/commons';import{ResourceStore}from\"i18next\";import Currency from\"../../helpers/currency\";import{convertToUpperCasesData}from'../../helpers/commons';import{BackendServices}from\"../../services\";import errorDispacherHelper from\"../../helpers/errorDispacherHelper\";var Services=/*#__PURE__*/function(_ApiServiceCore){_inherits(Services,_ApiServiceCore);var _super=_createSuper(Services);function Services(){var _this;_classCallCheck(this,Services);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.backendServices=new BackendServices();return _this;}_createClass(Services,[{key:\"postWhatchList\",value://analysis/customers -> retorna la info de lista de vigilancia\n//ConsultarListaCriterioCORE    \nfunction(){var _postWhatchList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(params){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.post(url.URL_CORE_WATCHLIST,params);case 3:result=_context.sent;return _context.abrupt(\"return\",{status:200,result:WatchListModel.fromJson(result).results});case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",{status:_context.t0.response.status,error:_context.t0.response.data});case 10:case\"end\":return _context.stop();}}},_callee,this,[[0,7]]);}));function postWhatchList(_x){return _postWhatchList.apply(this,arguments);}return postWhatchList;}()//documents -> salva documento en gestor documental ONBASE\n//GuardarDocumentoECM\n},{key:\"postDocument\",value:function(){var _postDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var config,result,dataresult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{//\"Accept\":\"*/*\",\n//\"Accept-Encoding\":\"gzip, deflate, sdch, br\",\n//\"Accept-Language\":\"fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4\",\n//\"Access-Control-Request-Headers\":\"accept, content-type\",\n//\"Content-Type\":\"text/plain\",\n//\"Content-Length\":JSON.stringify(data).length.toString(),\n//\"Host\":\"https://qa.api.ob.banesco.com.pa/\",\n//Connection: \"keep-alive\",\n//\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\",\n\"userId\":\"mq3898\",//Usuario\n\"clientDt\":\"clientDt\",//\"Fecha de ejecuciÃ³n del cliente.\"\n\"appName\":\"ReactJs\",//\"Aplicacion que consume el servicio\"\n\"requestId\":\"202112202\",//\"Identificador de la solicitud.\"\n\"channelId\":\"channelID\"//\"Canal consumidor\",                \n}};_context2.next=3;return this.post(url.URL_CORE_DOCUMENTS,data,config);case 3:result=_context2.sent;console.log(\"Result Document: \",result);/*\r\n        var result = {\r\n            \"Status\": {\r\n                \"StatusCode\": \"M0000\",\r\n                \"StatusDesc\": \"OK\"\r\n            },\r\n            \"Token\": \"e793-ddb2-ab0e-6626-5d3e-5f19-b79b-1f5d\",\r\n            \"Result\": {\r\n                \"DocName\": \"TDC - Contrato de TDC  (98765432)\",\r\n                \"DocumentID\": \"34589873\",\r\n                \"FormType\": \"HTML\"\r\n            }\r\n        }\r\n        */ //console.log(result);\nif(!(result.Status.StatusCode===\"M0000\")){_context2.next=8;break;}dataresult={docName:result.Result['DocName'],documentId:result.Result['DocumentID'],formType:result.Result['FormType']};return _context2.abrupt(\"return\",dataresult);case 8:return _context2.abrupt(\"return\",undefined);case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function postDocument(_x2){return _postDocument.apply(this,arguments);}return postDocument;}()//documents -> Ver documento en gestor documental ONBASE\n//VerDocumentoECM\n},{key:\"postViewDocument\",value:function(){var _postViewDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(docId){var data,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(docId);data={DocumentHandle:docId,ReturnBase64:false};_context3.next=5;return this.post(url.URL_CORE_DOCUMENTSVIEW,data);case 5:result=_context3.sent;console.log(\"Result Document: \",result);return _context3.abrupt(\"return\",result.Documents[0].DocPop);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);case 12:return _context3.abrupt(\"return\",null);case 13:case\"end\":return _context3.stop();}}},_callee3,this,[[0,10]]);}));function postViewDocument(_x3){return _postViewDocument.apply(this,arguments);}return postViewDocument;}()//v1/parties/information -> retorna la info del cliente\n//BuscarClienteCORE\n},{key:\"getPartiesInformation\",value:function(){var _getPartiesInformation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(params){var data,result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:/*var item =[ {id:800120843,clientnumber:800120843,clientname:\"Israel Michel Gomez Alfonso\",firstname:\"Israel\",secondname:\"Michel\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"CED\",idnumber:\"456123\"},\r\n        {id:800120845,clientnumber:800120845,clientname:\"Pancho Pedro Gomez Alfonso\",firstname:\"Pancho\",secondname:\"Pedro\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"RUC\",idnumber:\"456456\"}];\r\n        return item;*/ //params = {PartyType:Juridico,PartyId:600088018}\ndata=qs.stringify(params);console.log(data);//url.URL_CORSBYPASS +\n_context4.next=4;return this.get(url.URL_CORE_PARTIEINFO+\"?\"+data);case 4:result=_context4.sent;console.log(result);if(!(result.Status.StatusCode===\"M0000\")){_context4.next=10;break;}return _context4.abrupt(\"return\",ClientInfoModel.fromJson(result));case 10:result[\"error\"]=\"Error de Servicio del Core\";//result.Status.StatusDesc;\nresult[\"errorCode\"]=result.Status.StatusCode;return _context4.abrupt(\"return\",result);case 13:case\"end\":return _context4.stop();}}},_callee4,this);}));function getPartiesInformation(_x4){return _getPartiesInformation.apply(this,arguments);}return getPartiesInformation;}()},{key:\"getPartiesInformationExtra\",value:function(){var _getPartiesInformationExtra=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(typePerson,customerNumberT24){var params,result,_data$address$Country,_data$address,_data$address$Country2,_data$address$Provinc,_data$address2,_data$address2$Provin,_data$address$CountyD,_data$address3,_data$address3$County,_data$address$Jurisdi,_data$address4,_data$address4$Jurisd,_data$address$City$De,_data$address5,_data$address5$City,_data$address$AddrDes,_data$address6,_data$address$Buildin,_data$address7,_data$address7$Buildi,_data$address$HouseNu,_data$address8,_data$address$Street,_data$address9,data,extraInfo;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;params={PartyType:Number(typePerson)===1?\"Natural\":\"Juridico\",PartyId:customerNumberT24};_context5.next=4;return this.getPartiesInformation(params);case 4:result=_context5.sent;if(!(result!==undefined&&result.length>0)){_context5.next=10;break;}data=result[0];console.log(\"getPartiesInformationExtra\",data);extraInfo={activity:{\"EconomicActivity\":data[\"economicActivity\"]},address:{\"Country\":(_data$address$Country=(_data$address=data[\"address\"])===null||_data$address===void 0?void 0:(_data$address$Country2=_data$address.Country)===null||_data$address$Country2===void 0?void 0:_data$address$Country2.CountryCode)!==null&&_data$address$Country!==void 0?_data$address$Country:\"\",\"Province\":(_data$address$Provinc=(_data$address2=data[\"address\"])===null||_data$address2===void 0?void 0:(_data$address2$Provin=_data$address2.Province)===null||_data$address2$Provin===void 0?void 0:_data$address2$Provin.Cod)!==null&&_data$address$Provinc!==void 0?_data$address$Provinc:\"\",\"CountyDistrict\":(_data$address$CountyD=(_data$address3=data[\"address\"])===null||_data$address3===void 0?void 0:(_data$address3$County=_data$address3.CountyDistrict)===null||_data$address3$County===void 0?void 0:_data$address3$County.Cod)!==null&&_data$address$CountyD!==void 0?_data$address$CountyD:\"\",\"Jurisdiction\":(_data$address$Jurisdi=(_data$address4=data[\"address\"])===null||_data$address4===void 0?void 0:(_data$address4$Jurisd=_data$address4.Jurisdiction)===null||_data$address4$Jurisd===void 0?void 0:_data$address4$Jurisd.Cod)!==null&&_data$address$Jurisdi!==void 0?_data$address$Jurisdi:\"\",\"City\":(_data$address$City$De=(_data$address5=data[\"address\"])===null||_data$address5===void 0?void 0:(_data$address5$City=_data$address5.City)===null||_data$address5$City===void 0?void 0:_data$address5$City.Desc)!==null&&_data$address$City$De!==void 0?_data$address$City$De:\"\",\"AddrDesc\":(_data$address$AddrDes=(_data$address6=data[\"address\"])===null||_data$address6===void 0?void 0:_data$address6.AddrDesc)!==null&&_data$address$AddrDes!==void 0?_data$address$AddrDes:\"\",\"Building\":(_data$address$Buildin=(_data$address7=data[\"address\"])===null||_data$address7===void 0?void 0:(_data$address7$Buildi=_data$address7.Building)===null||_data$address7$Buildi===void 0?void 0:_data$address7$Buildi.Desc)!==null&&_data$address$Buildin!==void 0?_data$address$Buildin:\"\",\"HouseNumber\":(_data$address$HouseNu=(_data$address8=data[\"address\"])===null||_data$address8===void 0?void 0:_data$address8.HouseNumber)!==null&&_data$address$HouseNu!==void 0?_data$address$HouseNu:\"\",\"Street\":(_data$address$Street=(_data$address9=data[\"address\"])===null||_data$address9===void 0?void 0:_data$address9.Street)!==null&&_data$address$Street!==void 0?_data$address$Street:\"\"},\"PhoneNumber\":data[\"phoneNumber\"],\"Email\":data[\"email\"]};return _context5.abrupt(\"return\",extraInfo);case 10:_context5.next=14;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](0);case 14:return _context5.abrupt(\"return\",undefined);case 15:case\"end\":return _context5.stop();}}},_callee5,this,[[0,12]]);}));function getPartiesInformationExtra(_x5,_x6){return _getPartiesInformationExtra.apply(this,arguments);}return getPartiesInformationExtra;}()//Accionistas\n},{key:\"getPartiesStaff\",value:function(){var _getPartiesStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(PartyId){var params,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(PartyId.length<=0)){_context6.next=2;break;}return _context6.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};//{PartyId:600235373}\nparams=qs.stringify(params);_context6.next=6;return this.get(url.URL_CORE_PARTIESTAFF+\"?\"+params);case 6:result=_context6.sent;return _context6.abrupt(\"return\",PartiesStaffModel.fromJson(result));case 8:case\"end\":return _context6.stop();}}},_callee6,this);}));function getPartiesStaff(_x7){return _getPartiesStaff.apply(this,arguments);}return getPartiesStaff;}()///v1/parties/staff\n},{key:\"putPartiesStaff\",value:function(){var _putPartiesStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data){var result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.put(url.URL_CORE_PARTIESTAFF,data);case 2:result=_context7.sent;return _context7.abrupt(\"return\",PartiesStaffModel.fromJson(result));case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function putPartiesStaff(_x8){return _putPartiesStaff.apply(this,arguments);}return putPartiesStaff;}()//ConsultarListaEmpresasRelacionadas\n},{key:\"getCompaniesRelations\",value:function(){var _getCompaniesRelations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(params){var data,result;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0://params = {PartyId:600012387}\ndata=qs.stringify(params);_context8.next=3;return this.get(url.URL_CORE_COMPANIESRELATIONS+\"?\"+data);case 3:result=_context8.sent;return _context8.abrupt(\"return\",PartiesStaffModel.fromJson(result));case 5:case\"end\":return _context8.stop();}}},_callee8,this);}));function getCompaniesRelations(_x9){return _getCompaniesRelations.apply(this,arguments);}return getCompaniesRelations;}()/* ---------------------------------------------------------------------------------------------- */ /*                       Api para obtener todos los paises desde el catalogo                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPaisesCatalogo\",value:function(){var _getPaisesCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var params,data,result;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;// var result = sessionStorage.getItem('catPaises');\n// if (result !== undefined && result !== null) {\n//     result = JSON.parse(result)\n//     await convertToUpperCasesData(result)\n//     return result;\n// }\n//sessionStorage.setItem('catPaises', JSON.stringify(result.roles));\nparams={catalog_name:'PAIS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context9.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context9.sent;_context9.next=8;return convertToUpperCasesData(result.catalog);case 8:sessionStorage.setItem('catPaises',JSON.stringify(result.catalog));return _context9.abrupt(\"return\",result.catalog);case 12:_context9.prev=12;_context9.t0=_context9[\"catch\"](0);case 14:return _context9.abrupt(\"return\",null);case 15:case\"end\":return _context9.stop();}}},_callee9,this,[[0,12]]);}));function getPaisesCatalogo(){return _getPaisesCatalogo.apply(this,arguments);}return getPaisesCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*       Api para obtener las provincias de un pais, pasandole como parametro el id del pais      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getProvinciasCatalogo\",value:function(){var _getProvinciasCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(pais){var params,data,result;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;params={catalog_name:'PROVINCIA',parent_catalog_name:pais,keyword:\"\"};data=qs.stringify(params);_context10.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context10.sent;_context10.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context10.abrupt(\"return\",result.catalog);case 11:_context10.prev=11;_context10.t0=_context10[\"catch\"](0);case 13:return _context10.abrupt(\"return\",null);case 14:case\"end\":return _context10.stop();}}},_callee10,this,[[0,11]]);}));function getProvinciasCatalogo(_x10){return _getProvinciasCatalogo.apply(this,arguments);}return getProvinciasCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*    API para obtener los distrito de cada provincia pasandole como parametro el id provincia    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getDistritoCatalogo\",value:function(){var _getDistritoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(provincia){var params,data,result;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;params={catalog_name:'DISTRITO',parent_catalog_name:provincia,keyword:\"\"};data=qs.stringify(params);_context11.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context11.sent;_context11.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context11.abrupt(\"return\",result.catalog);case 11:_context11.prev=11;_context11.t0=_context11[\"catch\"](0);case 13:return _context11.abrupt(\"return\",null);case 14:case\"end\":return _context11.stop();}}},_callee11,this,[[0,11]]);}));function getDistritoCatalogo(_x11){return _getDistritoCatalogo.apply(this,arguments);}return getDistritoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                      Api para obtener los corregimientos de cada distrito                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCorregimientoCatalogo\",value:function(){var _getCorregimientoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(distrito){var params,data,result;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;params={catalog_name:'CORREGIMIENTO',parent_catalog_name:distrito,keyword:\"\"};data=qs.stringify(params);_context12.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context12.sent;_context12.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context12.abrupt(\"return\",result.catalog);case 11:_context12.prev=11;_context12.t0=_context12[\"catch\"](0);case 13:return _context12.abrupt(\"return\",null);case 14:case\"end\":return _context12.stop();}}},_callee12,this,[[0,11]]);}));function getCorregimientoCatalogo(_x12){return _getCorregimientoCatalogo.apply(this,arguments);}return getCorregimientoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                         Api para obtener las ciudades de cada provincia                        */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCiudadCatalogo\",value:function(){var _getCiudadCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(provincia){var params,data,result;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.prev=0;params={catalog_name:'CIUDAD',parent_catalog_name:provincia,keyword:\"\"};data=qs.stringify(params);_context13.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context13.sent;_context13.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context13.abrupt(\"return\",result.catalog);case 11:_context13.prev=11;_context13.t0=_context13[\"catch\"](0);case 13:return _context13.abrupt(\"return\",null);case 14:case\"end\":return _context13.stop();}}},_callee13,this,[[0,11]]);}));function getCiudadCatalogo(_x13){return _getCiudadCatalogo.apply(this,arguments);}return getCiudadCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                      Api para obtener el grupo economico de los catalogos                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getGrupoEconomicoCatalogo\",value:function(){var _getGrupoEconomicoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var params,data,result;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;params={catalog_name:'GRUPO ECONOMICO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context14.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context14.sent;result.catalog.Records.unshift({Description:\"N/A\",Code:\"N/A\"});_context14.next=9;return convertToUpperCasesData(result.catalog);case 9:return _context14.abrupt(\"return\",result.catalog);case 12:_context14.prev=12;_context14.t0=_context14[\"catch\"](0);case 14:return _context14.abrupt(\"return\",null);case 15:case\"end\":return _context14.stop();}}},_callee14,this,[[0,12]]);}));function getGrupoEconomicoCatalogo(){return _getGrupoEconomicoCatalogo.apply(this,arguments);}return getGrupoEconomicoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                   Api para obtener las bancas esta api proviene de catalogos                   */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getBancaCatalogo\",value:function(){var _getBancaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var params,data,result;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.prev=0;params={catalog_name:'BANCA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context15.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context15.sent;_context15.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context15.abrupt(\"return\",result.catalog);case 11:_context15.prev=11;_context15.t0=_context15[\"catch\"](0);case 13:return _context15.abrupt(\"return\",null);case 14:case\"end\":return _context15.stop();}}},_callee15,this,[[0,11]]);}));function getBancaCatalogo(){return _getBancaCatalogo.apply(this,arguments);}return getBancaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                   Api muestra todos los cargos que retorna desde el catalogo                   */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCargosCatalogo\",value:function(){var _getCargosCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var params,data,result;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;params={catalog_name:'CARGO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context16.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context16.sent;_context16.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context16.abrupt(\"return\",result.catalog);case 11:_context16.prev=11;_context16.t0=_context16[\"catch\"](0);case 13:return _context16.abrupt(\"return\",null);case 14:case\"end\":return _context16.stop();}}},_callee16,this,[[0,11]]);}));function getCargosCatalogo(){return _getCargosCatalogo.apply(this,arguments);}return getCargosCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     Api retorna todos los bancos exitentes para el catalogo                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getBancosCatalogo\",value:function(){var _getBancosCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){var params,data,result;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.prev=0;params={catalog_name:'BANCOS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context17.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context17.sent;_context17.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context17.abrupt(\"return\",result.catalog);case 11:_context17.prev=11;_context17.t0=_context17[\"catch\"](0);case 13:return _context17.abrupt(\"return\",null);case 14:case\"end\":return _context17.stop();}}},_callee17,this,[[0,11]]);}));function getBancosCatalogo(){return _getBancosCatalogo.apply(this,arguments);}return getBancosCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getActividadEconomicaCatalogo\",value:function(){var _getActividadEconomicaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var params,data,result;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.prev=0;params={catalog_name:'ACTIVIDAD ECONOMICA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context18.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context18.sent;_context18.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context18.abrupt(\"return\",result.catalog);case 11:_context18.prev=11;_context18.t0=_context18[\"catch\"](0);case 13:return _context18.abrupt(\"return\",null);case 14:case\"end\":return _context18.stop();}}},_callee18,this,[[0,11]]);}));function getActividadEconomicaCatalogo(){return _getActividadEconomicaCatalogo.apply(this,arguments);}return getActividadEconomicaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSubActividadEconomicaCatalogo\",value:function(){var _getSubActividadEconomicaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(codeActividad){var params,data,result;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.prev=0;params={catalog_name:'SUB ACTIVIDAD ECONOMICA',parent_catalog_name:codeActividad,keyword:\"\"};data=qs.stringify(params);_context19.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context19.sent;_context19.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context19.abrupt(\"return\",result.catalog);case 11:_context19.prev=11;_context19.t0=_context19[\"catch\"](0);case 13:return _context19.abrupt(\"return\",null);case 14:case\"end\":return _context19.stop();}}},_callee19,this,[[0,11]]);}));function getSubActividadEconomicaCatalogo(_x14){return _getSubActividadEconomicaCatalogo.apply(this,arguments);}return getSubActividadEconomicaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO DE SECTOR ECONOMICO                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSectorEconomicoCatalogo\",value:function(){var _getSectorEconomicoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var params,data,result;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.prev=0;params={catalog_name:'SECTOR ECONOMICO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context20.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context20.sent;_context20.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context20.abrupt(\"return\",result.catalog);case 11:_context20.prev=11;_context20.t0=_context20[\"catch\"](0);case 13:return _context20.abrupt(\"return\",null);case 14:case\"end\":return _context20.stop();}}},_callee20,this,[[0,11]]);}));function getSectorEconomicoCatalogo(){return _getSectorEconomicoCatalogo.apply(this,arguments);}return getSectorEconomicoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO RELACION                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getRelacionCatalogo\",value:function(){var _getRelacionCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var params,data,result;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.prev=0;params={catalog_name:'RELACION',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context21.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context21.sent;_context21.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context21.abrupt(\"return\",result.catalog);case 11:_context21.prev=11;_context21.t0=_context21[\"catch\"](0);case 13:return _context21.abrupt(\"return\",null);case 14:case\"end\":return _context21.stop();}}},_callee21,this,[[0,11]]);}));function getRelacionCatalogo(){return _getRelacionCatalogo.apply(this,arguments);}return getRelacionCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO TIPO DE GARANTIA                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getTipoGarantiaCatalogo\",value:function(){var _getTipoGarantiaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){var params,data,result;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.prev=0;params={catalog_name:'TIPO DE GARANTIA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context22.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context22.sent;_context22.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context22.abrupt(\"return\",result.catalog);case 11:_context22.prev=11;_context22.t0=_context22[\"catch\"](0);case 13:return _context22.abrupt(\"return\",null);case 14:case\"end\":return _context22.stop();}}},_callee22,this,[[0,11]]);}));function getTipoGarantiaCatalogo(){return _getTipoGarantiaCatalogo.apply(this,arguments);}return getTipoGarantiaCatalogo;}()},{key:\"getSubTipoGarantiaCatalogo\",value:function(){var _getSubTipoGarantiaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(codGarantia){var params,data,result;return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.prev=0;params={catalog_name:'SUB TIPO GARANTIA',parent_catalog_name:codGarantia,keyword:\"\"};data=qs.stringify(params);_context23.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context23.sent;_context23.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context23.abrupt(\"return\",result.catalog);case 11:_context23.prev=11;_context23.t0=_context23[\"catch\"](0);case 13:return _context23.abrupt(\"return\",null);case 14:case\"end\":return _context23.stop();}}},_callee23,this,[[0,11]]);}));function getSubTipoGarantiaCatalogo(_x15){return _getSubTipoGarantiaCatalogo.apply(this,arguments);}return getSubTipoGarantiaCatalogo;}()/*\r\n    \"catalog\": {\r\n        \"type\": \"TIPO DE GARANTIA\",\r\n        \"records\": [\r\n            {\r\n                \"CODIGO\": \"100\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Mueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"200\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Inmueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"300\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en el Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"400\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en Otros Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"500\",\r\n                \"DESCRIPCION\": \"Garantia Prendaria\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"600\",\r\n                \"DESCRIPCION\": \"Otras Garantias\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"700\",\r\n                \"DESCRIPCION\": \"SIN GARANTIAS\"\r\n            }\r\n        ]\r\n    }\r\n    */ /* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO MONEDAS                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getMonedaCatalogo\",value:function(){var _getMonedaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){var params,data,result;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.prev=0;params={catalog_name:'MONEDA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context24.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context24.sent;_context24.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context24.abrupt(\"return\",result.catalog);case 11:_context24.prev=11;_context24.t0=_context24[\"catch\"](0);case 13:return _context24.abrupt(\"return\",null);case 14:case\"end\":return _context24.stop();}}},_callee24,this,[[0,11]]);}));function getMonedaCatalogo(){return _getMonedaCatalogo.apply(this,arguments);}return getMonedaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                       Api para obtener todos las sucursales o agencias catalogo                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSucursalesCatalogo\",value:function(){var _getSucursalesCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(){var params,data,result;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.prev=0;// return json;\nparams={catalog_name:'SUCURSAL',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context25.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context25.sent;_context25.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context25.abrupt(\"return\",result.catalog);case 11:_context25.prev=11;_context25.t0=_context25[\"catch\"](0);case 13:return _context25.abrupt(\"return\",null);case 14:case\"end\":return _context25.stop();}}},_callee25,this,[[0,11]]);}));function getSucursalesCatalogo(){return _getSucursalesCatalogo.apply(this,arguments);}return getSucursalesCatalogo;}()//CATALOGO - Tipo de Limites de Credito\n},{key:\"getTypeOfCreditLimitsCatalog\",value:function(){var _getTypeOfCreditLimitsCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){var params,data,result;return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.prev=0;// return json;\nparams={catalog_name:'LIMIT REFERENCE',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context26.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context26.sent;_context26.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context26.abrupt(\"return\",result.catalog);case 11:_context26.prev=11;_context26.t0=_context26[\"catch\"](0);case 13:return _context26.abrupt(\"return\",null);case 14:case\"end\":return _context26.stop();}}},_callee26,this,[[0,11]]);}));function getTypeOfCreditLimitsCatalog(){return _getTypeOfCreditLimitsCatalog.apply(this,arguments);}return getTypeOfCreditLimitsCatalog;}()//CATALOGO - Aseguradoras\n},{key:\"getInsurersCatalog\",value:function(){var _getInsurersCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(){var params,data,result;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.prev=0;// return json;\nparams={catalog_name:'ASEGURADORAS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context27.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context27.sent;_context27.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context27.abrupt(\"return\",result.catalog);case 11:_context27.prev=11;_context27.t0=_context27[\"catch\"](0);case 13:return _context27.abrupt(\"return\",null);case 14:case\"end\":return _context27.stop();}}},_callee27,this,[[0,11]]);}));function getInsurersCatalog(){return _getInsurersCatalog.apply(this,arguments);}return getInsurersCatalog;}()//CATALOGO - Marcas de Auto\n},{key:\"getCarBrandCatalog\",value:function(){var _getCarBrandCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(){var params,data,result;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_context28.prev=0;// return json;\nparams={catalog_name:'MARCA DE AUTOS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context28.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context28.sent;_context28.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context28.abrupt(\"return\",result.catalog);case 11:_context28.prev=11;_context28.t0=_context28[\"catch\"](0);case 13:return _context28.abrupt(\"return\",null);case 14:case\"end\":return _context28.stop();}}},_callee28,this,[[0,11]]);}));function getCarBrandCatalog(){return _getCarBrandCatalog.apply(this,arguments);}return getCarBrandCatalog;}()//CATALOGO - Modelos de Auto\n},{key:\"getCarModelCatalog\",value:function(){var _getCarModelCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(){var params,data,result;return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.prev=0;// return json;\nparams={catalog_name:'MODELO DE AUTO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context29.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context29.sent;_context29.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context29.abrupt(\"return\",result.catalog);case 11:_context29.prev=11;_context29.t0=_context29[\"catch\"](0);case 13:return _context29.abrupt(\"return\",null);case 14:case\"end\":return _context29.stop();}}},_callee29,this,[[0,11]]);}));function getCarModelCatalog(){return _getCarModelCatalog.apply(this,arguments);}return getCarModelCatalog;}()//CATALOGO - Corredoras\n},{key:\"getBrokersCatalog\",value:function(){var _getBrokersCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee30(){var params,data,result;return _regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.prev=0;// return json;\nparams={catalog_name:'BROKER',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context30.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context30.sent;_context30.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context30.abrupt(\"return\",result.catalog);case 11:_context30.prev=11;_context30.t0=_context30[\"catch\"](0);case 13:return _context30.abrupt(\"return\",null);case 14:case\"end\":return _context30.stop();}}},_callee30,this,[[0,11]]);}));function getBrokersCatalog(){return _getBrokersCatalog.apply(this,arguments);}return getBrokersCatalog;}()//CATALOGO - Fiduciaria\n},{key:\"getTrusteeCatalog\",value:function(){var _getTrusteeCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee31(){var params,data,result;return _regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.prev=0;// return json;\nparams={catalog_name:'FIDUCIARIAS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context31.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context31.sent;_context31.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context31.abrupt(\"return\",result.catalog);case 11:_context31.prev=11;_context31.t0=_context31[\"catch\"](0);case 13:return _context31.abrupt(\"return\",null);case 14:case\"end\":return _context31.stop();}}},_callee31,this,[[0,11]]);}));function getTrusteeCatalog(){return _getTrusteeCatalog.apply(this,arguments);}return getTrusteeCatalog;}()//CATALOGO - Producto\n},{key:\"getProductCatalog\",value:function(){var _getProductCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee32(){var result;return _regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_context32.prev=0;// return json;\n/*let params = {\r\n                catalog_name: 'SUBPRODUCTO',\r\n                parent_catalog_name: \"3200\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            */result={\"catalog\":{\"type\":\"TIPO DE PRODUCTO\",\"records\":[{\"CODIGO\":\"3200\",\"DESCRIPCION\":\"Comercial\"}]}};return _context32.abrupt(\"return\",result.catalog);case 5:_context32.prev=5;_context32.t0=_context32[\"catch\"](0);case 7:return _context32.abrupt(\"return\",null);case 8:case\"end\":return _context32.stop();}}},_callee32,null,[[0,5]]);}));function getProductCatalog(){return _getProductCatalog.apply(this,arguments);}return getProductCatalog;}()//CATALOGO - SubProducto\n},{key:\"getSubProductCatalog\",value:function(){var _getSubProductCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee33(){var params,data,result;return _regeneratorRuntime.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_context33.prev=0;// return json;\nparams={catalog_name:'SUBPRODUCTO',parent_catalog_name:\"3200\",keyword:\"\"};data=qs.stringify(params);_context33.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context33.sent;_context33.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context33.abrupt(\"return\",result.catalog);case 11:_context33.prev=11;_context33.t0=_context33[\"catch\"](0);case 13:return _context33.abrupt(\"return\",null);case 14:case\"end\":return _context33.stop();}}},_callee33,this,[[0,11]]);}));function getSubProductCatalog(){return _getSubProductCatalog.apply(this,arguments);}return getSubProductCatalog;}()//CATALOGO - Categorias\n},{key:\"getCategoriesCatalog\",value:function(){var _getCategoriesCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee34(){var params,data,result;return _regeneratorRuntime.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_context34.prev=0;// return json;\nparams={catalog_name:'CATEGORIA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context34.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context34.sent;_context34.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context34.abrupt(\"return\",result.catalog);case 11:_context34.prev=11;_context34.t0=_context34[\"catch\"](0);case 13:return _context34.abrupt(\"return\",null);case 14:case\"end\":return _context34.stop();}}},_callee34,this,[[0,11]]);}));function getCategoriesCatalog(){return _getCategoriesCatalog.apply(this,arguments);}return getCategoriesCatalog;}()//CATALOGO - Tipo de poliza\n},{key:\"getPolicyTypeCatalog\",value:function(){var _getPolicyTypeCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee35(){var params,data,result;return _regeneratorRuntime.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.prev=0;// return json;\nparams={catalog_name:'TIPO POLIZA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context35.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context35.sent;_context35.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context35.abrupt(\"return\",result.catalog);case 11:_context35.prev=11;_context35.t0=_context35[\"catch\"](0);case 13:return _context35.abrupt(\"return\",null);case 14:case\"end\":return _context35.stop();}}},_callee35,this,[[0,11]]);}));function getPolicyTypeCatalog(){return _getPolicyTypeCatalog.apply(this,arguments);}return getPolicyTypeCatalog;}()//CATALOGO - Sub tipo de Garantia\n},{key:\"getSubTypeWarrantyCatalog\",value:function(){var _getSubTypeWarrantyCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee36(){var params,data,result;return _regeneratorRuntime.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:_context36.prev=0;// return json;\nparams={catalog_name:'SUB TIPO GARANTIA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context36.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context36.sent;_context36.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context36.abrupt(\"return\",result.catalog);case 11:_context36.prev=11;_context36.t0=_context36[\"catch\"](0);case 13:return _context36.abrupt(\"return\",null);case 14:case\"end\":return _context36.stop();}}},_callee36,this,[[0,11]]);}));function getSubTypeWarrantyCatalog(){return _getSubTypeWarrantyCatalog.apply(this,arguments);}return getSubTypeWarrantyCatalog;}()//CATALOGO - Clases de Auto\n},{key:\"getAutoClassCatalog\",value:function(){var _getAutoClassCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee37(){var params,data,result;return _regeneratorRuntime.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_context37.prev=0;// return json;\nparams={catalog_name:'CLASE AUTO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context37.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context37.sent;_context37.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context37.abrupt(\"return\",result.catalog);case 11:_context37.prev=11;_context37.t0=_context37[\"catch\"](0);case 13:return _context37.abrupt(\"return\",null);case 14:case\"end\":return _context37.stop();}}},_callee37,this,[[0,11]]);}));function getAutoClassCatalog(){return _getAutoClassCatalog.apply(this,arguments);}return getAutoClassCatalog;}()//CATALOGO - Avaluadora\n},{key:\"getAppraiserCatalog\",value:function(){var _getAppraiserCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee38(){var params,data,result;return _regeneratorRuntime.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:_context38.prev=0;// return json;\nparams={catalog_name:'AVALUADORA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context38.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context38.sent;_context38.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context38.abrupt(\"return\",result.catalog);case 11:_context38.prev=11;_context38.t0=_context38[\"catch\"](0);case 13:return _context38.abrupt(\"return\",null);case 14:case\"end\":return _context38.stop();}}},_callee38,this,[[0,11]]);}));function getAppraiserCatalog(){return _getAppraiserCatalog.apply(this,arguments);}return getAppraiserCatalog;}()//CATALOGO - Tipo de Desembolso\n},{key:\"getTipoDesembolsoCatalogo\",value:function(){var _getTipoDesembolsoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee39(){var result;return _regeneratorRuntime.wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:_context39.prev=0;/*let params = {\r\n                catalog_name: 'CIUDAD',\r\n                parent_catalog_name: provincia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)*/result={\"catalog\":{\"type\":\"Tipo Desembolso\",\"records\":[{\"CODIGO\":\"100\",\"DESCRIPCION\":\"Bajo Linea\"},{\"CODIGO\":\"200\",\"DESCRIPCION\":\"Comercial\"}]}};return _context39.abrupt(\"return\",result.catalog);case 5:_context39.prev=5;_context39.t0=_context39[\"catch\"](0);case 7:return _context39.abrupt(\"return\",null);case 8:case\"end\":return _context39.stop();}}},_callee39,null,[[0,5]]);}));function getTipoDesembolsoCatalogo(){return _getTipoDesembolsoCatalogo.apply(this,arguments);}return getTipoDesembolsoCatalogo;}()//CATALOGO - Fuentes de Ventas\n},{key:\"getSourceSalesCatalogo\",value:function(){var _getSourceSalesCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee40(){var params,data,result;return _regeneratorRuntime.wrap(function _callee40$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:_context40.prev=0;// return json;\nparams={catalog_name:'SALE INFORMATION',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context40.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context40.sent;_context40.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context40.abrupt(\"return\",result.catalog);case 11:_context40.prev=11;_context40.t0=_context40[\"catch\"](0);case 13:return _context40.abrupt(\"return\",null);case 14:case\"end\":return _context40.stop();}}},_callee40,this,[[0,11]]);}));function getSourceSalesCatalogo(){return _getSourceSalesCatalogo.apply(this,arguments);}return getSourceSalesCatalogo;}()//CATALOGO - Autonomias\n},{key:\"getAutonomiaCatalogo\",value:function(){var _getAutonomiaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee41(){var params,data,result;return _regeneratorRuntime.wrap(function _callee41$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:_context41.prev=0;// return json;\nparams={catalog_name:'AUTONOMIAS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context41.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context41.sent;_context41.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context41.abrupt(\"return\",result.catalog);case 11:_context41.prev=11;_context41.t0=_context41[\"catch\"](0);case 13:return _context41.abrupt(\"return\",null);case 14:case\"end\":return _context41.stop();}}},_callee41,this,[[0,11]]);}));function getAutonomiaCatalogo(){return _getAutonomiaCatalogo.apply(this,arguments);}return getAutonomiaCatalogo;}()//CATALOGO - Authority\n},{key:\"getAuthorityTypeCatalogo\",value:function(){var _getAuthorityTypeCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee42(){var params,data,result;return _regeneratorRuntime.wrap(function _callee42$(_context42){while(1){switch(_context42.prev=_context42.next){case 0:_context42.prev=0;// return json;\nparams={catalog_name:'AUTH TYPE',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context42.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context42.sent;_context42.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context42.abrupt(\"return\",result.catalog);case 11:_context42.prev=11;_context42.t0=_context42[\"catch\"](0);case 13:return _context42.abrupt(\"return\",null);case 14:case\"end\":return _context42.stop();}}},_callee42,this,[[0,11]]);}));function getAuthorityTypeCatalogo(){return _getAuthorityTypeCatalogo.apply(this,arguments);}return getAuthorityTypeCatalogo;}()/*------------------------------------------------------------------------------------*/ ///v1/loans/details/informations\n//Retorna las facilidades de un cliente ... partyId -> numero del cliente en T24\n//getFacilidades\n},{key:\"getFacilitiesByTransaction\",value:function(){var _getFacilitiesByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee43(transactId){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee43$(_context43){while(1){switch(_context43.prev=_context43.next){case 0:_context43.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context43.sent;if(!(debtors!==null&&debtors!==undefined)){_context43.next=30;break;}result=[];i=0;case 6:if(!(i<debtors.length)){_context43.next=28;break;}_context43.prev=7;_context43.next=10;return this.getFacilities(debtors[i].customerNumberT24);case 10:dataResult=_context43.sent;if(dataResult!==null&&dataResult!==undefined){dataResult.forEach(function(item){item[\"debtorName\"]=debtors[i].typePerson===\"2\"?debtors[i].name:debtors[i].name+\" \"+debtors[i].name2+\" \"+debtors[i].lastName+\" \"+debtors[i].lastName2;item[\"debtorId\"]=debtors[i].personId;result.push(item);});}_context43.next=16;break;case 14:_context43.prev=14;_context43.t0=_context43[\"catch\"](7);case 16:_context43.prev=16;_context43.next=19;return this.getCreditCard(debtors[i].customerNumberT24);case 19:dataResult=_context43.sent;if(dataResult!==null&&dataResult!==undefined){dataResult.forEach(function(item){item[\"debtorName\"]=debtors[i].typePerson===\"2\"?debtors[i].name:debtors[i].name+\" \"+debtors[i].name2+\" \"+debtors[i].lastName+\" \"+debtors[i].lastName2;item[\"debtorId\"]=debtors[i].personId;result.push(item);});}_context43.next=25;break;case 23:_context43.prev=23;_context43.t1=_context43[\"catch\"](16);case 25:i++;_context43.next=6;break;case 28:console.log(\"getAllTermDebtsByTransaction\",result);return _context43.abrupt(\"return\",result);case 30:return _context43.abrupt(\"return\",undefined);case 31:case\"end\":return _context43.stop();}}},_callee43,this,[[7,14],[16,23]]);}));function getFacilitiesByTransaction(_x16){return _getFacilitiesByTransaction.apply(this,arguments);}return getFacilitiesByTransaction;}()},{key:\"getFacilities\",value:function(){var _getFacilities=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee44(partyId){var currencyData,dataResult,params,data,result,item,deudas,_params,_data;return _regeneratorRuntime.wrap(function _callee44$(_context44){while(1){switch(_context44.prev=_context44.next){case 0:_context44.prev=0;currencyData=new Currency();if(!(partyId.length<=0)){_context44.next=4;break;}return _context44.abrupt(\"return\",undefined);case 4:dataResult=[];////// Credit - Cortos Plazos\n_context44.prev=5;params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \n//servicio retorna las cuentas del cliente\n_context44.next=10;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 10:result=_context44.sent;//var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\nif(Array.isArray(result.Party.PartyInfo.CreditLine)){result.Party.PartyInfo.CreditLine.forEach(function(item){try{/*\r\n                            {\r\n                        \"AvailableAmt\": {\r\n                            \"Amt\": \"75,000.00\"\r\n                        },\r\n                        \"CreditLineId\": \"800048231.0010000.01\",\r\n                        \"CreditLineNum\": \"01\",\r\n                        \"CreditType\": {\r\n                            \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                        },\r\n                        \"CurCode\": \"USD\",\r\n                        \"IntRateType\": {\r\n                            \"Desc\": \"Fixed\"\r\n                        },\r\n                        \"OnlineAmt\": {\r\n                            \"Amt\": \"125000.00\"\r\n                        },\r\n                        \"PendingAmt\": {\r\n                            \"Amt\": \"50,000.00\"\r\n                        },\r\n                        \"Rating\": \"01\",\r\n                        \"SecuredAmt\": {\r\n                            \"Amt\": \"0.00\"\r\n                        }\r\n                    }\r\n                            */if(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){//item.AvailableAmt.Amt\nvar deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\ndataResult.push({\"facilityType\":deudas.facilityType,\"approvedAmount\":deudas.approved,\"approvedDate\":deudas.startDate,\"actualBalance\":deudas.variation,\"debtorName\":\"\",\"AcctId\":\"\"});}}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{if(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\ndataResult.push({\"facilityType\":deudas.facilityType,\"approvedAmount\":deudas.approved,\"approvedDate\":deudas.startDate,\"actualBalance\":deudas.balance,\"debtorName\":\"\",\"AcctId\":\"\"});}}catch(err){}}_context44.next=16;break;case 14:_context44.prev=14;_context44.t0=_context44[\"catch\"](5);case 16:_context44.prev=16;_params={PartyId:partyId};_data=qs.stringify(_params);_context44.next=21;return this.get(url.URL_CORE_FACILIDADES+\"?\"+_data);case 21:result=_context44.sent;if(Array.isArray(result.AcctLoans.AcctLoan)){result.AcctLoans.AcctLoan.forEach(function(item){if(item.AcctKey!==null){try{/*\r\n                                {\r\n                        \"Category\": \"01\",\r\n                        \"Desc\": \"340000071156\",\r\n                        \"ProductDesc\": \"Prestamo Comercia\",\r\n                        \"AcctOpeningInfo\": {\r\n                            \"InitialAmt\": {\r\n                                \"Amt\": \"120000.00\",\r\n                                \"CurCode\": \"USD\"\r\n                            },\r\n                            \"OpenDt\": \"2019-08-02\"\r\n                        },\r\n                        \"CreditAcctData\": {\r\n                            \"DueDt\": \"2028-07-05\",\r\n                            \"CreditAcctPmtInfo\": null\r\n                        },\r\n                        \"AcctKey\": {\r\n                            \"AcctId\": \"1020243542\"\r\n                        },\r\n                        \"AcctBal\": [\r\n                            {\r\n                                \"BalType\": \"Balance\",\r\n                                \"CurAmt\": {\r\n                                    \"Amt\": \"87245.92\"\r\n                                }\r\n                            }\r\n                        ],\r\n                        \"AcctMember\": [\r\n                            {\r\n                                \"PartyRole\": {\r\n                                    \"Cod\": \"TITULAR/DEUDOR\"\r\n                                },\r\n                                \"PartyName\": {\r\n                                    \"ShortName\": \"ASI DEVELOPMENT\"\r\n                                },\r\n                                \"PartyKey\": null\r\n                            }\r\n                        ]\r\n                    }\r\n                                */var deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;dataResult.push({\"facilityType\":deudas.facilityType,\"approvedAmount\":deudas.approved,\"approvedDate\":deudas.startDate,\"actualBalance\":deudas.balance,\"debtorName\":\"\",\"AcctId\":item.AcctKey.AcctId});}catch(err){}}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;if(item.AcctKey!==null){try{deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;dataResult.push({\"facilityType\":deudas.facilityType,\"approvedAmount\":deudas.approved,\"approvedDate\":deudas.startDate,\"actualBalance\":deudas.balance,\"debtorName\":\"\",\"AcctId\":item.AcctKey.AcctId});}catch(err){}}}_context44.next=27;break;case 25:_context44.prev=25;_context44.t1=_context44[\"catch\"](16);case 27:console.log(\"getFacilities\",dataResult);return _context44.abrupt(\"return\",dataResult);case 31:_context44.prev=31;_context44.t2=_context44[\"catch\"](0);console.error(_context44.t2);case 34:return _context44.abrupt(\"return\",undefined);case 35:case\"end\":return _context44.stop();}}},_callee44,this,[[0,31],[5,14],[16,25]]);}));function getFacilities(_x17){return _getFacilities.apply(this,arguments);}return getFacilities;}()//retorna los Clientes Relacionados se le pasa el Numero de Cliente de T24\n},{key:\"getRelatedClients\",value:function(){var _getRelatedClients=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee45(partyId){var params,data,dataResult,result;return _regeneratorRuntime.wrap(function _callee45$(_context45){while(1){switch(_context45.prev=_context45.next){case 0:if(!(partyId.length<=0)){_context45.next=2;break;}return _context45.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);dataResult=[];_context45.prev=5;_context45.next=8;return this.get(url.URL_CORE_COMPANIESRELATIONS+\"?\"+data);case 8:result=_context45.sent;if(!(result.error!==undefined)){_context45.next=11;break;}return _context45.abrupt(\"return\",result);case 11://Armamos la data a mostrar en pantalla\nresult.PartyPartyRels.PartyPartyRel.forEach(function(client){try{var partyNumber=client.PartyPartyRelInfo.PartyRef[0].RelPartyRef[0].PartyKey[0].PartyId;if(partyNumber!==undefined&&partyNumber!==null&&partyNumber.length>0){dataResult.push(partyNumber);}}catch(err){}});_context45.next=16;break;case 14:_context45.prev=14;_context45.t0=_context45[\"catch\"](5);case 16:return _context45.abrupt(\"return\",dataResult);case 17:case\"end\":return _context45.stop();}}},_callee45,this,[[5,14]]);}));function getRelatedClients(_x18){return _getRelatedClients.apply(this,arguments);}return getRelatedClients;}()//ExposicionCorporativa se le pasa el Numero de Cliente de T24\n},{key:\"getCorporateExhibition\",value:function(){var _getCorporateExhibition=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee46(transactId){var currencyData,debtors,dataResult,longTerm,shortTerm,totalTerm,pledged,netExposition,i,partyId,params,data,result,item,deudas,_params2,_data2,_params3,_data3;return _regeneratorRuntime.wrap(function _callee46$(_context46){while(1){switch(_context46.prev=_context46.next){case 0:currencyData=new Currency();_context46.next=3;return this.backendServices.consultarDeudores(transactId);case 3:debtors=_context46.sent;if(!(debtors===null||debtors===undefined)){_context46.next=6;break;}return _context46.abrupt(\"return\",undefined);case 6:dataResult=[];longTerm={name:\"Facilidades Largo Plazo\",approved:0,balance:0,proposal:0,variation:0};shortTerm={name:\"Facilidades Corto Plazo\",approved:0,balance:0,proposal:0,variation:0};totalTerm={name:\"Total de Facilidades\",approved:0,balance:0,proposal:0,variation:0};pledged={name:\"Monto Pignorado\",approved:0,balance:0,proposal:0,variation:0};netExposition={name:\"Exposicion Neta\",approved:0,balance:0,proposal:0,variation:0};////// Credit - Cortos Plazos\ni=0;case 13:if(!(i<debtors.length)){_context46.next=32;break;}partyId=debtors[i].customerNumberT24;if(!(partyId.length>0)){_context46.next=29;break;}_context46.prev=16;params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \n//servicio retorna las cuentas del cliente\n_context46.next=21;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 21:result=_context46.sent;if(!(result.error!==undefined)){_context46.next=24;break;}return _context46.abrupt(\"return\",result);case 24://var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\nif(Array.isArray(result.Party.PartyInfo.CreditLine)){result.Party.PartyInfo.CreditLine.forEach(function(item){try{/*\r\n                                {\r\n                            \"AvailableAmt\": {\r\n                                \"Amt\": \"75,000.00\"\r\n                            },\r\n                            \"CreditLineId\": \"800048231.0010000.01\",\r\n                            \"CreditLineNum\": \"01\",\r\n                            \"CreditType\": {\r\n                                \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                            },\r\n                            \"CurCode\": \"USD\",\r\n                            \"IntRateType\": {\r\n                                \"Desc\": \"Fixed\"\r\n                            },\r\n                            \"OnlineAmt\": {\r\n                                \"Amt\": \"125000.00\"\r\n                            },\r\n                            \"PendingAmt\": {\r\n                                \"Amt\": \"50,000.00\"\r\n                            },\r\n                            \"Rating\": \"01\",\r\n                            \"SecuredAmt\": {\r\n                                \"Amt\": \"0.00\"\r\n                            }\r\n                        }\r\n                                */if(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){var deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.variation);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.variation);}}}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{if(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.variation);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.variation);}}}catch(err){}}_context46.next=29;break;case 27:_context46.prev=27;_context46.t0=_context46[\"catch\"](16);case 29:i++;_context46.next=13;break;case 32:i=0;case 33:if(!(i<debtors.length)){_context46.next=48;break;}_context46.prev=34;_context46.next=37;return this.getCreditCard(debtors[i].customerNumberT24);case 37:result=_context46.sent;if(!(result.error!==undefined)){_context46.next=40;break;}return _context46.abrupt(\"return\",result);case 40:/*{\r\n                    \"facilityType\": item.CardInfo.Desc, \r\n                    \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                    \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \r\n                    \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                    \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                    \"AcctId\": \"\",\r\n                } */result.forEach(function(item){shortTerm.approved+=Number(item.approvedAmount);shortTerm.balance+=Number(item.actualBalance);});_context46.next=45;break;case 43:_context46.prev=43;_context46.t1=_context46[\"catch\"](34);case 45:i++;_context46.next=33;break;case 48:i=0;case 49:if(!(i<debtors.length)){_context46.next=68;break;}partyId=debtors[i].customerNumberT24;if(!(partyId.length>0)){_context46.next=65;break;}_context46.prev=52;_params2={PartyId:partyId};_data2=qs.stringify(_params2);_context46.next=57;return this.get(url.URL_CORE_FACILIDADES+\"?\"+_data2);case 57:result=_context46.sent;if(!(result.error!==undefined)){_context46.next=60;break;}return _context46.abrupt(\"return\",result);case 60:if(Array.isArray(result.AcctLoans.AcctLoan)){result.AcctLoans.AcctLoan.forEach(function(item){if(item.AcctKey!==null){try{/*\r\n                                    {\r\n                            \"Category\": \"01\",\r\n                            \"Desc\": \"340000071156\",\r\n                            \"ProductDesc\": \"Prestamo Comercia\",\r\n                            \"AcctOpeningInfo\": {\r\n                                \"InitialAmt\": {\r\n                                    \"Amt\": \"120000.00\",\r\n                                    \"CurCode\": \"USD\"\r\n                                },\r\n                                \"OpenDt\": \"2019-08-02\"\r\n                            },\r\n                            \"CreditAcctData\": {\r\n                                \"DueDt\": \"2028-07-05\",\r\n                                \"CreditAcctPmtInfo\": null\r\n                            },\r\n                            \"AcctKey\": {\r\n                                \"AcctId\": \"1020243542\"\r\n                            },\r\n                            \"AcctBal\": [\r\n                                {\r\n                                    \"BalType\": \"Balance\",\r\n                                    \"CurAmt\": {\r\n                                        \"Amt\": \"87245.92\"\r\n                                    }\r\n                                }\r\n                            ],\r\n                            \"AcctMember\": [\r\n                                {\r\n                                    \"PartyRole\": {\r\n                                        \"Cod\": \"TITULAR/DEUDOR\"\r\n                                    },\r\n                                    \"PartyName\": {\r\n                                        \"ShortName\": \"ASI DEVELOPMENT\"\r\n                                    },\r\n                                    \"PartyKey\": null\r\n                                }\r\n                            ]\r\n                        }\r\n                                    */var deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.balance);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.balance);}}catch(err){}}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;if(item.AcctKey!==null){try{deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.balance);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.balance);}}catch(err){}}}_context46.next=65;break;case 63:_context46.prev=63;_context46.t2=_context46[\"catch\"](52);case 65:i++;_context46.next=49;break;case 68:longTerm.variation=Number(longTerm.approved)-Number(longTerm.balance);shortTerm.variation=Number(shortTerm.approved)-Number(shortTerm.balance);dataResult.push(longTerm);dataResult.push(shortTerm);totalTerm.approved=Number(shortTerm.approved)+Number(longTerm.approved);totalTerm.balance=Number(shortTerm.balance)+Number(longTerm.balance);totalTerm.variation=Number(totalTerm.approved)-Number(totalTerm.balance);dataResult.push(totalTerm);//servicio retorna Pignorados\ni=0;case 77:if(!(i<debtors.length)){_context46.next=98;break;}partyId=debtors[i].customerNumberT24;if(!(partyId.length>0)){_context46.next=95;break;}_params3={PartyId:partyId};_data3=qs.stringify(_params3);_context46.prev=82;_context46.next=85;return this.get(url.URL_CORE_PIGNORADO+\"?\"+_data3);case 85:result=_context46.sent;if(!(result.error!==undefined)){_context46.next=88;break;}return _context46.abrupt(\"return\",result);case 88://Armamos la data a mostrar en pantalla\nresult.Collaterals.CollateralInfo.map(function(item,i){if(item.AcctKey.AcctReference!==null&&item.Collateral.InsuranceInfo.Status===\"CUR\"){pledged.approved+=Number(item.Collateral.CollateralAmt.Amt);pledged.balance=pledged.approved;}});pledged.variation=Number(pledged.approved)-Number(pledged.balance);_context46.next=95;break;case 92:_context46.prev=92;_context46.t3=_context46[\"catch\"](82);console.error(\"URL_CORE_PIGNORADO\",_context46.t3);case 95:i++;_context46.next=77;break;case 98:dataResult.push(pledged);if(dataResult.length>0){netExposition.approved=Number(totalTerm.approved)-Number(pledged.approved);netExposition.proposal=Number(totalTerm.proposal)-Number(pledged.proposal);netExposition.variation=Number(totalTerm.variation)-Number(pledged.variation);dataResult.push(netExposition);}return _context46.abrupt(\"return\",dataResult);case 101:case\"end\":return _context46.stop();}}},_callee46,this,[[16,27],[34,43],[52,63],[82,92]]);}));function getCorporateExhibition(_x19){return _getCorporateExhibition.apply(this,arguments);}return getCorporateExhibition;}()//ExposicionCorporativa se le pasa el Numero de Cliente de T24\n},{key:\"getCorporateExhibitionByClients\",value:function(){var _getCorporateExhibitionByClients=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee47(partyId){var currencyData,dataResult,longTerm,shortTerm,totalTerm,pledged,netExposition,params,data,result,item,deudas,_params4,_data4,_params5,_data5;return _regeneratorRuntime.wrap(function _callee47$(_context47){while(1){switch(_context47.prev=_context47.next){case 0:currencyData=new Currency();dataResult=[];longTerm={name:\"Facilidades Largo Plazo\",approved:0,balance:0,proposal:0,variation:0};shortTerm={name:\"Facilidades Corto Plazo\",approved:0,balance:0,proposal:0,variation:0};totalTerm={name:\"Total de Facilidades\",approved:0,balance:0,proposal:0,variation:0};pledged={name:\"Monto Pignorado\",approved:0,balance:0,proposal:0,variation:0};netExposition={name:\"Exposicion Neta\",approved:0,balance:0,proposal:0,variation:0};////// Credit - Cortos Plazos       \nif(!(partyId.length>0)){_context47.next=21;break;}_context47.prev=8;params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \n//servicio retorna las cuentas del cliente\n_context47.next=13;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 13:result=_context47.sent;if(!(result.error!==undefined)){_context47.next=16;break;}return _context47.abrupt(\"return\",result);case 16://var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\nif(Array.isArray(result.Party.PartyInfo.CreditLine)){result.Party.PartyInfo.CreditLine.forEach(function(item){try{/*\r\n                            {\r\n                        \"AvailableAmt\": {\r\n                            \"Amt\": \"75,000.00\"\r\n                        },\r\n                        \"CreditLineId\": \"800048231.0010000.01\",\r\n                        \"CreditLineNum\": \"01\",\r\n                        \"CreditType\": {\r\n                            \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                        },\r\n                        \"CurCode\": \"USD\",\r\n                        \"IntRateType\": {\r\n                            \"Desc\": \"Fixed\"\r\n                        },\r\n                        \"OnlineAmt\": {\r\n                            \"Amt\": \"125000.00\"\r\n                        },\r\n                        \"PendingAmt\": {\r\n                            \"Amt\": \"50,000.00\"\r\n                        },\r\n                        \"Rating\": \"01\",\r\n                        \"SecuredAmt\": {\r\n                            \"Amt\": \"0.00\"\r\n                        }\r\n                    }\r\n                            */if(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){var deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.variation);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.variation);}}}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{if(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.variation);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.variation);}}}catch(err){}}_context47.next=21;break;case 19:_context47.prev=19;_context47.t0=_context47[\"catch\"](8);case 21:if(!(partyId.length>0)){_context47.next=33;break;}_context47.prev=22;_context47.next=25;return this.getCreditCard(partyId);case 25:result=_context47.sent;if(!(result.error!==undefined)){_context47.next=28;break;}return _context47.abrupt(\"return\",result);case 28:/*{\r\n                    \"facilityType\": item.CardInfo.Desc, \r\n                    \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                    \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \r\n                    \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                    \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                    \"AcctId\": \"\",\r\n                } */result.forEach(function(item){shortTerm.approved+=Number(item.approvedAmount);shortTerm.balance+=Number(item.actualBalance);});_context47.next=33;break;case 31:_context47.prev=31;_context47.t1=_context47[\"catch\"](22);case 33:if(!(partyId.length>0)){_context47.next=47;break;}_context47.prev=34;_params4={PartyId:partyId};_data4=qs.stringify(_params4);_context47.next=39;return this.get(url.URL_CORE_FACILIDADES+\"?\"+_data4);case 39:result=_context47.sent;if(!(result.error!==undefined)){_context47.next=42;break;}return _context47.abrupt(\"return\",result);case 42:if(Array.isArray(result.AcctLoans.AcctLoan)){result.AcctLoans.AcctLoan.forEach(function(item){if(item.AcctKey!==null){try{/*\r\n                                {\r\n                        \"Category\": \"01\",\r\n                        \"Desc\": \"340000071156\",\r\n                        \"ProductDesc\": \"Prestamo Comercia\",\r\n                        \"AcctOpeningInfo\": {\r\n                            \"InitialAmt\": {\r\n                                \"Amt\": \"120000.00\",\r\n                                \"CurCode\": \"USD\"\r\n                            },\r\n                            \"OpenDt\": \"2019-08-02\"\r\n                        },\r\n                        \"CreditAcctData\": {\r\n                            \"DueDt\": \"2028-07-05\",\r\n                            \"CreditAcctPmtInfo\": null\r\n                        },\r\n                        \"AcctKey\": {\r\n                            \"AcctId\": \"1020243542\"\r\n                        },\r\n                        \"AcctBal\": [\r\n                            {\r\n                                \"BalType\": \"Balance\",\r\n                                \"CurAmt\": {\r\n                                    \"Amt\": \"87245.92\"\r\n                                }\r\n                            }\r\n                        ],\r\n                        \"AcctMember\": [\r\n                            {\r\n                                \"PartyRole\": {\r\n                                    \"Cod\": \"TITULAR/DEUDOR\"\r\n                                },\r\n                                \"PartyName\": {\r\n                                    \"ShortName\": \"ASI DEVELOPMENT\"\r\n                                },\r\n                                \"PartyKey\": null\r\n                            }\r\n                        ]\r\n                    }\r\n                                */var deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.balance);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.balance);}}catch(err){}}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;if(item.AcctKey!==null){try{deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=Number(deudas.approved);longTerm.balance+=Number(deudas.balance);}else{shortTerm.approved+=Number(deudas.approved);shortTerm.balance+=Number(deudas.balance);}}catch(err){}}}_context47.next=47;break;case 45:_context47.prev=45;_context47.t2=_context47[\"catch\"](34);case 47:if(!(partyId.length>0)){_context47.next=63;break;}_params5={PartyId:partyId};_data5=qs.stringify(_params5);_context47.prev=50;_context47.next=53;return this.get(url.URL_CORE_PIGNORADO+\"?\"+_data5);case 53:result=_context47.sent;if(!(result.error!==undefined)){_context47.next=56;break;}return _context47.abrupt(\"return\",result);case 56://Armamos la data a mostrar en pantalla\nresult.Collaterals.CollateralInfo.map(function(item,i){if(item.AcctKey.AcctReference!==null&&item.Collateral.InsuranceInfo.Status===\"CUR\"){pledged.approved+=Number(item.Collateral.CollateralAmt.Amt);pledged.balance=pledged.approved;}});pledged.variation=Number(pledged.approved)-Number(pledged.balance);_context47.next=63;break;case 60:_context47.prev=60;_context47.t3=_context47[\"catch\"](50);console.error(\"URL_CORE_PIGNORADO\",_context47.t3);case 63:longTerm.variation=Number(longTerm.approved)-Number(longTerm.balance);shortTerm.variation=Number(shortTerm.approved)-Number(shortTerm.balance);dataResult.push(longTerm);dataResult.push(shortTerm);totalTerm.approved=Number(shortTerm.approved)+Number(longTerm.approved);totalTerm.balance=Number(shortTerm.balance)+Number(longTerm.balance);totalTerm.variation=Number(totalTerm.approved)-Number(totalTerm.balance);netExposition.approved=Number(totalTerm.approved)-Number(pledged.approved);netExposition.proposal=Number(totalTerm.proposal)-Number(pledged.proposal);netExposition.variation=Number(totalTerm.variation)-Number(pledged.variation);dataResult.push(totalTerm);dataResult.push(pledged);dataResult.push(netExposition);return _context47.abrupt(\"return\",dataResult);case 77:case\"end\":return _context47.stop();}}},_callee47,this,[[8,19],[22,31],[34,45],[50,60]]);}));function getCorporateExhibitionByClients(_x20){return _getCorporateExhibitionByClients.apply(this,arguments);}return getCorporateExhibitionByClients;}()//ExposicionCorporativa se le pasa el Numero de Cliente de T24\n/*async getCorporateExhibitionByClients(partyId) {\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let clients = await this.getRelatedClients(partyId);\r\n        if (clients.error !== undefined) {\r\n            return clients;\r\n        }\r\n\r\n        var dataResult = [];\r\n        for (var i = 0; i < clients.length; i++) {\r\n            let result = await this.getCorporateExhibition(clients[i]);\r\n            if (result.error !== undefined) {\r\n                return result;\r\n            }\r\n\r\n            if (result !== null && result.length > 0) {\r\n                dataResult.push({ clientId: \"Cliente: \" + clients[i], data: result });\r\n            }\r\n        }\r\n        return dataResult;\r\n    }\r\n    */ //Deudas a Corto y Largo Plazo --- APC, Credit, Loand del Tramite Completo    \n},{key:\"getAllTermDebtsByTransaction\",value:function(){var _getAllTermDebtsByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee48(transactId){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee48$(_context48){while(1){switch(_context48.prev=_context48.next){case 0:_context48.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context48.sent;if(!(debtors!==null&&debtors!==undefined)){_context48.next=20;break;}result={longTermresult:[],shortTermresult:[]};i=0;case 6:if(!(i<debtors.length)){_context48.next=19;break;}_context48.prev=7;_context48.next=10;return this.getAllTermDebts(debtors[i].customerNumberT24,debtors[i].clientDocId,debtors[i].idType);case 10:dataResult=_context48.sent;if(dataResult!==null&&dataResult!==undefined){dataResult.longTermresult.forEach(function(item){result.longTermresult.push(item);});dataResult.shortTermresult.forEach(function(item){result.shortTermresult.push(item);});}_context48.next=16;break;case 14:_context48.prev=14;_context48.t0=_context48[\"catch\"](7);case 16:i++;_context48.next=6;break;case 19:return _context48.abrupt(\"return\",result);case 20:return _context48.abrupt(\"return\",undefined);case 21:case\"end\":return _context48.stop();}}},_callee48,this,[[7,14]]);}));function getAllTermDebtsByTransaction(_x21){return _getAllTermDebtsByTransaction.apply(this,arguments);}return getAllTermDebtsByTransaction;}()//Deudas a Corto y Largo Plazo --- APC, Credit, Loand\n},{key:\"getAllTermDebts\",value:function(){var _getAllTermDebts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee49(partyId,identification,idType){var currencyData,dataResult,typeofId,tmpidentification,params,_result,item,deudas,data,result,_params6,_data6;return _regeneratorRuntime.wrap(function _callee49$(_context49){while(1){switch(_context49.prev=_context49.next){case 0:currencyData=new Currency();if(!(partyId.length<=0)){_context49.next=3;break;}return _context49.abrupt(\"return\",undefined);case 3:if(!(identification.length<=0)){_context49.next=5;break;}return _context49.abrupt(\"return\",undefined);case 5:dataResult={longTermresult:[],shortTermresult:[]};////// APC\n_context49.prev=6;typeofId=\"Cedula\";_context49.t0=idType;_context49.next=_context49.t0===\"CED\"?11:_context49.t0===\"RUC\"?13:_context49.t0===\"PAS\"?15:17;break;case 11:typeofId=\"Cedula\";return _context49.abrupt(\"break\",17);case 13:typeofId=\"RUC\";return _context49.abrupt(\"break\",17);case 15:typeofId=\"Pasaporte\";return _context49.abrupt(\"break\",17);case 17:tmpidentification=\"\";identification.split('-').map(function(str){if(str.startsWith(\"0\")){tmpidentification+=str.replace(/^0+/,'')+\"-\";}else{tmpidentification+=str+\"-\";}});if(tmpidentification.startsWith(\"-\")){tmpidentification=tmpidentification.substring(1);}identification=tmpidentification.substring(0,tmpidentification.length-1);params={\"ConsultarAPC\":{\"Model\":{\"EsPrueba\":0,\"ForzarBusqueda\":0,\"IdentificacionConsulta\":identification,//\"8-773-1899\",\n\"PasswordAPC\":\"Banesco19.\",\"TipoCliente\":typeofId,\"UltimusProcess\":7,\"UsuarioAPC\":\"WTIBANESCO001\"}}};//servicio retorna la info de APC del cliente\n_context49.next=24;return this.post(url.URL_CORE_APCINFO,params);case 24:_result=_context49.sent;if(Array.isArray(_result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)){// myVatToTest is an array\n//Armamos la data a mostrar en pantalla\n_result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function(item,i){try{if(item.dc_nom_asoc.toUpperCase().indexOf('BANESCO')<0&&item.dc_descr_corta_rela.toUpperCase().indexOf('SERVICIOS')<0){console.log(\"ServicioAPC\",item.dc_nom_asoc);var deudas={paymentHistory:item.dc_historia,debtype:\"short\",facilityType:item.dc_descr_corta_rela,bank:item.dc_nom_asoc,balance:Number(currencyData.getRealValue(item.dc_saldo_actual)),approvedAmount:Number(currencyData.getRealValue(item.dc_monto_original)),variation:0,startDate:item.dc_fec_inicio_rel,endDate:item.dc_fec_fin_rel};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1&&item.dc_descr_corta_rela.toUpperCase().indexOf('TARJ')<0){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=_result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{if(item.dc_nom_asoc.toUpperCase().indexOf('BANESCO')<0&&item.dc_descr_corta_rela.toUpperCase().indexOf('SERVICIOS')<0){deudas={paymentHistory:item.dc_historia,debtype:\"short\",facilityType:item.dc_descr_corta_rela,bank:item.dc_nom_asoc,balance:Number(currencyData.getRealValue(item.dc_saldo_actual)),approvedAmount:Number(currencyData.getRealValue(item.dc_monto_original)),variation:0,startDate:item.dc_fec_inicio_rel,endDate:item.dc_fec_fin_rel};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1&&item.dc_descr_corta_rela.toUpperCase().indexOf('TARJ')<0){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}}catch(err){}}_context49.next=30;break;case 28:_context49.prev=28;_context49.t1=_context49[\"catch\"](6);case 30:_context49.prev=30;params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \n//servicio retorna las cuentas del cliente\n_context49.next=35;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 35:result=_context49.sent;if(Array.isArray(result.Party.PartyInfo.CreditLine)){result.Party.PartyInfo.CreditLine.forEach(function(item){try{/*\r\n                        {\r\n                    \"AvailableAmt\": {\r\n                        \"Amt\": \"75,000.00\"\r\n                    },\r\n                    \"CreditLineId\": \"800048231.0010000.01\",\r\n                    \"CreditLineNum\": \"01\",\r\n                    \"CreditType\": {\r\n                        \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                    },\r\n                    \"CurCode\": \"USD\",\r\n                    \"IntRateType\": {\r\n                        \"Desc\": \"Fixed\"\r\n                    },\r\n                    \"OnlineAmt\": {\r\n                        \"Amt\": \"125000.00\"\r\n                    },\r\n                    \"PendingAmt\": {\r\n                        \"Amt\": \"50,000.00\"\r\n                    },\r\n                    \"Rating\": \"01\",\r\n                    \"SecuredAmt\": {\r\n                        \"Amt\": \"0.00\"\r\n                    }\r\n                }\r\n                        */var deudas={paymentHistory:\"\",debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{deudas={paymentHistory:\"\",debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.PendingAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(item.CreditLineId.split(\".\")[1].replace(/0/g,'').length<2){if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}}catch(err){}}_context49.next=41;break;case 39:_context49.prev=39;_context49.t2=_context49[\"catch\"](30);case 41:_context49.prev=41;_context49.next=44;return this.getCreditCard(partyId);case 44:result=_context49.sent;if(Array.isArray(result)){/*{\r\n                                        \"facilityType\": item.CardInfo.Desc, \r\n                                        \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                                        \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \r\n                                        \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                                        \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                                        \"AcctId\": \"\",\r\n                                    } */result.forEach(function(item){try{var deudas={paymentHistory:\"\",debtype:\"short\",facilityType:item.facilityType,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.actualBalance)),approvedAmount:Number(currencyData.getRealValue(item.approvedAmount)),variation:Number(currencyData.getRealValue(0)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\ndataResult.shortTermresult.push(deudas);deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(item.approvedDate).format(\"YYYY-MM-DD\");}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result;try{deudas={paymentHistory:\"\",debtype:\"short\",facilityType:item.facilityType,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.actualBalance)),approvedAmount:Number(currencyData.getRealValue(item.approvedAmount)),variation:Number(currencyData.getRealValue(0)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\ndataResult.shortTermresult.push(deudas);deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(item.approvedDate).format(\"YYYY-MM-DD\");}catch(err){}}_context49.next=50;break;case 48:_context49.prev=48;_context49.t3=_context49[\"catch\"](41);case 50:_context49.prev=50;_params6={PartyId:partyId};_data6=qs.stringify(_params6);_context49.next=55;return this.get(url.URL_CORE_FACILIDADES+\"?\"+_data6);case 55:result=_context49.sent;console.log(\"shortTermresultLoands\",result);if(Array.isArray(result.AcctLoans.AcctLoan)){result.AcctLoans.AcctLoan.forEach(function(item){if(item.AcctKey!==null){try{/*\r\n                            {\r\n                    \"Category\": \"01\",\r\n                    \"Desc\": \"340000071156\",\r\n                    \"ProductDesc\": \"Prestamo Comercia\",\r\n                    \"AcctOpeningInfo\": {\r\n                        \"InitialAmt\": {\r\n                            \"Amt\": \"120000.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        },\r\n                        \"OpenDt\": \"2019-08-02\"\r\n                    },\r\n                    \"CreditAcctData\": {\r\n                        \"DueDt\": \"2028-07-05\",\r\n                        \"CreditAcctPmtInfo\": null\r\n                    },\r\n                    \"AcctKey\": {\r\n                        \"AcctId\": \"1020243542\"\r\n                    },\r\n                    \"AcctBal\": [\r\n                        {\r\n                            \"BalType\": \"Balance\",\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"87245.92\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"AcctMember\": [\r\n                        {\r\n                            \"PartyRole\": {\r\n                                \"Cod\": \"TITULAR/DEUDOR\"\r\n                            },\r\n                            \"PartyName\": {\r\n                                \"ShortName\": \"ASI DEVELOPMENT\"\r\n                            },\r\n                            \"PartyKey\": null\r\n                        }\r\n                    ]\r\n                }\r\n                            */var deudas={paymentHistory:\"\",debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{// dataResult.shortTermresult.push(deudas)                    \n}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}catch(err){}}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;if(item.AcctKey!==null){try{deudas={paymentHistory:\"\",debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{//dataResult.shortTermresult.push(deudas)                    \n}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}catch(err){}}}_context49.next=62;break;case 60:_context49.prev=60;_context49.t4=_context49[\"catch\"](50);case 62:return _context49.abrupt(\"return\",dataResult);case 63:case\"end\":return _context49.stop();}}},_callee49,this,[[6,28],[30,39],[41,48],[50,60]]);}));function getAllTermDebts(_x22,_x23,_x24){return _getAllTermDebts.apply(this,arguments);}return getAllTermDebts;}()//Tarjetas de Credito\n},{key:\"getCreditCardByTransaction\",value:function(){var _getCreditCardByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee50(transactId){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee50$(_context50){while(1){switch(_context50.prev=_context50.next){case 0:_context50.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context50.sent;if(!(debtors!==null&&debtors!==undefined)){_context50.next=21;break;}result=[];i=0;case 6:if(!(i<debtors.length)){_context50.next=19;break;}_context50.prev=7;_context50.next=10;return this.getCreditCard(debtors[i].customerNumberT24);case 10:dataResult=_context50.sent;if(dataResult!==null&&dataResult!==undefined){dataResult.forEach(function(item){result.push(item);});}_context50.next=16;break;case 14:_context50.prev=14;_context50.t0=_context50[\"catch\"](7);case 16:i++;_context50.next=6;break;case 19:console.log(\"getCreditCardByTransaction\",result);return _context50.abrupt(\"return\",result);case 21:return _context50.abrupt(\"return\",undefined);case 22:case\"end\":return _context50.stop();}}},_callee50,this,[[7,14]]);}));function getCreditCardByTransaction(_x25){return _getCreditCardByTransaction.apply(this,arguments);}return getCreditCardByTransaction;}()},{key:\"getCreditCard\",value:function(){var _getCreditCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee51(partyId){var currencyData,data,dataResult,result,item,approvedAmt,balanceAmt,_approvedAmt$CurAmt2,_balanceAmt$CurAmt2;return _regeneratorRuntime.wrap(function _callee51$(_context51){while(1){switch(_context51.prev=_context51.next){case 0:currencyData=new Currency();if(!(partyId.length<=0)){_context51.next=3;break;}return _context51.abrupt(\"return\",undefined);case 3:data={\"readCardTDC_Rq\":{\"MsgHdr\":{\"TransactionInfo\":{\"MsgUID\":\"F01F1A70-30E0-4478-B95F-987D78A10037\",\"ChannelId\":\"CC\",\"AgencyCode\":5808,\"OrderDprt\":\"5808-001\",\"TransactionDate\":moment().format(\"YYYY-MM-DD\"),//\"2021-12-12\",\n\"TransactionTime\":\"12:12:12\"},\"ApplicationInfo\":{\"SourceApp\":\"ESB\",\"Channel\":\"WAY4\"}},\"Customer\":{\"Type\":\"Personal\",\"PersonInfo\":{\"Type\":\"Personal\",\"CustId\":partyId}}}};dataResult=[];////// Tarjeta de Creditos\n_context51.prev=5;_context51.next=8;return this.post(url.URL_CORE_CreditCard,data);case 8:result=_context51.sent;console.log(\"shortTermresultCredit\",result);if(Array.isArray(result.readCardTDC_Rs.Customer.Product)){result.readCardTDC_Rs.Customer.Product.forEach(function(item){try{if(item.CardInfo.Type===\"E\"&&item.CardInfo.RelationType===\"Y\"||item.CardInfo.Type===\"I\"&&item.CardInfo.RelationType===\"Y\"||item.CardInfo.Type===\"Y\"&&item.CardInfo.RelationType===\"Y\"){var _approvedAmt$CurAmt,_balanceAmt$CurAmt;var approvedAmt=item.Statement.StatementInfo.find(function(x){return x.Type===\"CR_LIMIT\";});var balanceAmt=item.Statement.StatementInfo.find(function(x){return x.Type===\"TOTAL_BALANCE\";});dataResult.push({\"facilityType\":item.CardInfo.Desc,\"approvedAmount\":(_approvedAmt$CurAmt=approvedAmt===null||approvedAmt===void 0?void 0:approvedAmt.CurAmt)!==null&&_approvedAmt$CurAmt!==void 0?_approvedAmt$CurAmt:0,\"approvedDate\":item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"),\"actualBalance\":(_balanceAmt$CurAmt=balanceAmt===null||balanceAmt===void 0?void 0:balanceAmt.CurAmt)!==null&&_balanceAmt$CurAmt!==void 0?_balanceAmt$CurAmt:0,\"debtorName\":item.CardInfo.EmbossInfo.FirstName+\" \"+item.CardInfo.EmbossInfo.LastName,\"AcctId\":\"\"});}/* if(item.CardInfo.Desc.toUpperCase().indexOf('CREDITO') > 0){\r\n                             dataResult.push({\r\n                                 \"facilityType\": item.CardInfo.Desc, \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                                 \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                                 \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                                 \"AcctId\": \"\",\r\n                             });   \r\n                         } */}catch(err){console.log(\"getCreditCard\",err);}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.readCardTDC_Rs.Customer.Product;try{approvedAmt=item.Statement.StatementInfo.find(function(x){return x.Type===\"AVAILABLE\";});balanceAmt=item.Statement.StatementInfo.find(function(x){return x.Type===\"TOTAL_BALANCE\";});if(item.CardInfo.Desc.toUpperCase().indexOf('CREDITO')>0){dataResult.push({\"facilityType\":item.CardInfo.Desc,\"approvedAmount\":(_approvedAmt$CurAmt2=approvedAmt===null||approvedAmt===void 0?void 0:approvedAmt.CurAmt)!==null&&_approvedAmt$CurAmt2!==void 0?_approvedAmt$CurAmt2:0,\"approvedDate\":item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"),\"actualBalance\":(_balanceAmt$CurAmt2=balanceAmt===null||balanceAmt===void 0?void 0:balanceAmt.CurAmt)!==null&&_balanceAmt$CurAmt2!==void 0?_balanceAmt$CurAmt2:0,\"debtorName\":item.CardInfo.EmbossInfo.FirstName+\" \"+item.CardInfo.EmbossInfo.LastName,\"AcctId\":\"\"});}}catch(err){}}_context51.next=15;break;case 13:_context51.prev=13;_context51.t0=_context51[\"catch\"](5);case 15:return _context51.abrupt(\"return\",dataResult);case 16:case\"end\":return _context51.stop();}}},_callee51,this,[[5,13]]);}));function getCreditCard(_x26){return _getCreditCard.apply(this,arguments);}return getCreditCard;}()/* ---------------------------------------------------------------------------------------------- */ /*                                 Retorna los balances por meses                                 */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getAverages\",value:function(){var _getAverages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee52(AcctReference){var params,data,result;return _regeneratorRuntime.wrap(function _callee52$(_context52){while(1){switch(_context52.prev=_context52.next){case 0:if(!(AcctReference.length<=0)){_context52.next=2;break;}return _context52.abrupt(\"return\",undefined);case 2:params={AcctReference:AcctReference};data=qs.stringify(params);_context52.next=6;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 6:result=_context52.sent;return _context52.abrupt(\"return\",result);case 8:case\"end\":return _context52.stop();}}},_callee52,this);}));function getAverages(_x27){return _getAverages.apply(this,arguments);}return getAverages;}()/* ---------------------------------------------------------------------------------------------- */ /*                     Obtenemos una lista de las importaciones que se generen                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getListaImportaciones\",value:function(){var _getListaImportaciones=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee53(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee53$(_context53){while(1){switch(_context53.prev=_context53.next){case 0:if(!(PartyId.length<=0)){_context53.next=2;break;}return _context53.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context53.next=6;return this.get(url.URL_CORE_IMPORTACIONES+\"?\"+data);case 6:result=_context53.sent;return _context53.abrupt(\"return\",result);case 8:case\"end\":return _context53.stop();}}},_callee53,this);}));function getListaImportaciones(_x28){return _getListaImportaciones.apply(this,arguments);}return getListaImportaciones;}()/* ---------------------------------------------------------------------------------------------- */ /*                 Obtenemos una lista de las exportaciones que se hayan generado                 */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getListaExportaciones\",value:function(){var _getListaExportaciones=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee54(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee54$(_context54){while(1){switch(_context54.prev=_context54.next){case 0:if(!(PartyId.length<=0)){_context54.next=2;break;}return _context54.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context54.next=6;return this.get(url.URL_CORE_EXPORTACIONES+\"?\"+data);case 6:result=_context54.sent;return _context54.abrupt(\"return\",result);case 8:case\"end\":return _context54.stop();}}},_callee54,this);}));function getListaExportaciones(_x29){return _getListaExportaciones.apply(this,arguments);}return getListaExportaciones;}()/* ---------------------------------------------------------------------------------------------- */ /*                          Obtenemos los prestamos entrantes existentes                          */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamosEntrantes\",value:function(){var _getPrestamosEntrantes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee55(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee55$(_context55){while(1){switch(_context55.prev=_context55.next){case 0:if(!(PartyId.length<=0)){_context55.next=2;break;}return _context55.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context55.next=6;return this.get(url.URL_CORE_INGOING+\"?\"+data);case 6:result=_context55.sent;return _context55.abrupt(\"return\",result);case 8:case\"end\":return _context55.stop();}}},_callee55,this);}));function getPrestamosEntrantes(_x30){return _getPrestamosEntrantes.apply(this,arguments);}return getPrestamosEntrantes;}()/* ---------------------------------------------------------------------------------------------- */ /*                    Obtenemos una lista de todos los presstamos que ya salen                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamosSalientes\",value:function(){var _getPrestamosSalientes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee56(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee56$(_context56){while(1){switch(_context56.prev=_context56.next){case 0:if(!(PartyId.length<=0)){_context56.next=2;break;}return _context56.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context56.next=6;return this.get(url.URL_CORE_OUTOGOING+\"?\"+data);case 6:result=_context56.sent;return _context56.abrupt(\"return\",result);case 8:case\"end\":return _context56.stop();}}},_callee56,this);}));function getPrestamosSalientes(_x31){return _getPrestamosSalientes.apply(this,arguments);}return getPrestamosSalientes;}()/* ---------------------------------------------------------------------------------------------- */ /*               Obtenemos la lista de creditos que existen en la actualidad activos              */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCreditosExistentes\",value:function(){var _getCreditosExistentes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee57(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee57$(_context57){while(1){switch(_context57.prev=_context57.next){case 0:if(!(PartyId.length<=0)){_context57.next=2;break;}return _context57.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context57.next=6;return this.get(url.URL_CORE_CREDITOS+\"?\"+data);case 6:result=_context57.sent;return _context57.abrupt(\"return\",result);case 8:case\"end\":return _context57.stop();}}},_callee57,this);}));function getCreditosExistentes(_x32){return _getCreditosExistentes.apply(this,arguments);}return getCreditosExistentes;}()/* ---------------------------------------------------------------------------------------------- */ /*                                        Creditos en linea                                       */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCreditosLine\",value:function(){var _getCreditosLine=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee58(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee58$(_context58){while(1){switch(_context58.prev=_context58.next){case 0:if(!(PartyId.length<=0)){_context58.next=2;break;}return _context58.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context58.next=6;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 6:result=_context58.sent;return _context58.abrupt(\"return\",result);case 8:case\"end\":return _context58.stop();}}},_callee58,this);}));function getCreditosLine(_x33){return _getCreditosLine.apply(this,arguments);}return getCreditosLine;}()/* ---------------------------------------------------------------------------------------------- */ /*     Nos devuelve todas las transacciones que ha realizado el usuario por un rango de fechas    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getTransactions\",value:function(){var _getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee59(AcctId,EndDt,StartDt){var params,data,result;return _regeneratorRuntime.wrap(function _callee59$(_context59){while(1){switch(_context59.prev=_context59.next){case 0:if(!(AcctId.length<=0||EndDt.length<=0||StartDt.length<=0)){_context59.next=2;break;}return _context59.abrupt(\"return\",undefined);case 2:// ejemplo del dataField\n// AcctId=1001553287&EndDt=2021-10-16T09:32:51&StartDt=2021-09-16T00:00:00\nparams={AcctId:AcctId,EndDt:EndDt,StartDt:StartDt};data=qs.stringify(params);_context59.next=6;return this.get(url.URL_CORE_TRANSACCTIONS+\"?\"+data);case 6:result=_context59.sent;return _context59.abrupt(\"return\",result);case 8:case\"end\":return _context59.stop();}}},_callee59,this);}));function getTransactions(_x34,_x35,_x36){return _getTransactions.apply(this,arguments);}return getTransactions;}()/* ---------------------------------------------------------------------------------------------- */ /*                                  Obtenemos todos los prestamos                                 */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamos\",value:function(){var _getPrestamos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee60(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee60$(_context60){while(1){switch(_context60.prev=_context60.next){case 0:if(!(PartyId.length<=0)){_context60.next=2;break;}return _context60.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context60.next=6;return this.get(url.URL_CORE_PRESTAMOS+\"?\"+data);case 6:result=_context60.sent;return _context60.abrupt(\"return\",result);case 8:case\"end\":return _context60.stop();}}},_callee60,this);}));function getPrestamos(_x37){return _getPrestamos.apply(this,arguments);}return getPrestamos;}()/* ---------------------------------------------------------------------------------------------- */ /*               Obtenemos toda la informacion del prestamos dentro de una actividad              */ /* ---------------------------------------------------------------------------------------------- */ //Detalle Facilidad\n},{key:\"getFacilityInfo\",value:function(){var _getFacilityInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee61(AcctId){var params,data,result;return _regeneratorRuntime.wrap(function _callee61$(_context61){while(1){switch(_context61.prev=_context61.next){case 0:_context61.prev=0;if(!(AcctId.length<=0)){_context61.next=3;break;}return _context61.abrupt(\"return\",null);case 3:params={AcctId:AcctId};data=qs.stringify(params);_context61.next=7;return this.get(url.URL_CORE_PRESTAMOS_INFORMATION+\"?\"+data);case 7:result=_context61.sent;return _context61.abrupt(\"return\",result===null||result===void 0?void 0:result.AcctLoan);case 11:_context61.prev=11;_context61.t0=_context61[\"catch\"](0);case 13:return _context61.abrupt(\"return\",null);case 14:case\"end\":return _context61.stop();}}},_callee61,this,[[0,11]]);}));function getFacilityInfo(_x38){return _getFacilityInfo.apply(this,arguments);}return getFacilityInfo;}()/* ---------------------------------------------------------------------------------------------- */ /*               Obtenemos toda la informacion del Reporting Services                            */ /* ---------------------------------------------------------------------------------------------- */ //https://qa.api.ob.banesco.com.pa/APIUtil/v1/reports/atoms?FECHA=20210930&CLIENTE=600167424\n},{key:\"getReportingServices\",value:function(){var _getReportingServices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee62(partyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee62$(_context62){while(1){switch(_context62.prev=_context62.next){case 0:if(!(partyId===undefined||partyId===null||partyId.length<=0)){_context62.next=2;break;}return _context62.abrupt(\"return\",undefined);case 2:params={FECHA:moment().add(-1,'months').format(\"YYYYMM\")+\"01\",//preguntar pq la fecha no se puede cambiar\nCLIENTE:partyId};data=qs.stringify(params);_context62.next=6;return this.get(url.URL_CORE_REPORTINGSERVICES+\"?\"+data);case 6:result=_context62.sent;return _context62.abrupt(\"return\",result);case 8:case\"end\":return _context62.stop();}}},_callee62,this);}));function getReportingServices(_x39){return _getReportingServices.apply(this,arguments);}return getReportingServices;}()//Retorna todos los colateralsId por numero de cliente\n},{key:\"getColaterals\",value:function(){var _getColaterals=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee63(partyId){var params,data,dataResult,result;return _regeneratorRuntime.wrap(function _callee63$(_context63){while(1){switch(_context63.prev=_context63.next){case 0:if(!(partyId.length<=0)){_context63.next=2;break;}return _context63.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);dataResult=[];_context63.prev=5;console.log(\"plage\");//servicio retorna Pignorados\n_context63.next=9;return this.get(url.URL_CORE_PIGNORADO+\"?\"+data);case 9:result=_context63.sent;//Armamos la data a mostrar en pantalla\nresult.Collaterals.CollateralInfo.map(function(item,i){if(item.Collateral.CollateralKey.CollateralId!==null){dataResult.push({collateralId:item.Collateral.CollateralKey.CollateralId,facilityAmt:item.Collateral.CollateralAmt.Amt});}});_context63.next=16;break;case 13:_context63.prev=13;_context63.t0=_context63[\"catch\"](5);console.error(\"URL_CORE_PIGNORADO\",_context63.t0);case 16:console.log(\"dataResult\",dataResult);return _context63.abrupt(\"return\",dataResult);case 18:case\"end\":return _context63.stop();}}},_callee63,this,[[5,13]]);}));function getColaterals(_x40){return _getColaterals.apply(this,arguments);}return getColaterals;}()// retorna Detalle de Garantias\n},{key:\"getWarrantyDetails\",value:function(){var _getWarrantyDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee64(collateralId,warrantyType){var params,data,result;return _regeneratorRuntime.wrap(function _callee64$(_context64){while(1){switch(_context64.prev=_context64.next){case 0:if(!(collateralId.length<=0||warrantyType.length<=0)){_context64.next=2;break;}return _context64.abrupt(\"return\",undefined);case 2:params={CollateralId:collateralId,InqType:warrantyType};data=qs.stringify(params);_context64.prev=4;_context64.next=7;return this.get(url.URL_CORE_COLLATERALS+\"?\"+data);case 7:result=_context64.sent;return _context64.abrupt(\"return\",result);case 11:_context64.prev=11;_context64.t0=_context64[\"catch\"](4);console.error(\"URL_CORE_PIGNORADO\",_context64.t0);return _context64.abrupt(\"return\",undefined);case 15:case\"end\":return _context64.stop();}}},_callee64,this,[[4,11]]);}));function getWarrantyDetails(_x41,_x42){return _getWarrantyDetails.apply(this,arguments);}return getWarrantyDetails;}()},{key:\"getAccountMovementsByTransaction\",value:function(){var _getAccountMovementsByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee65(transactId){var debtors,result,flagAcctId,i,dataResult,_iterator,_step,item;return _regeneratorRuntime.wrap(function _callee65$(_context65){while(1){switch(_context65.prev=_context65.next){case 0:_context65.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context65.sent;if(!(debtors!==null&&debtors!==undefined)){_context65.next=42;break;}result=[];flagAcctId=[];i=0;case 7:if(!(i<debtors.length)){_context65.next=40;break;}_context65.prev=8;_context65.next=11;return this.getAccountMovements(debtors[i].customerNumberT24);case 11:dataResult=_context65.sent;if(!(dataResult!==null&&dataResult!==undefined)){_context65.next=33;break;}// dataResult.forEach(function (item) {\n//     result.push(item);\n// });\n_iterator=_createForOfIteratorHelper(dataResult);_context65.prev=14;_iterator.s();case 16:if((_step=_iterator.n()).done){_context65.next=24;break;}item=_step.value;if(!flagAcctId.includes(item.AcctId)){_context65.next=20;break;}return _context65.abrupt(\"continue\",22);case 20:flagAcctId.push(item.AcctId);result.push(item);case 22:_context65.next=16;break;case 24:_context65.next=29;break;case 26:_context65.prev=26;_context65.t0=_context65[\"catch\"](14);_iterator.e(_context65.t0);case 29:_context65.prev=29;_iterator.f();return _context65.finish(29);case 32:;case 33:_context65.next=37;break;case 35:_context65.prev=35;_context65.t1=_context65[\"catch\"](8);case 37:i++;_context65.next=7;break;case 40:console.log(\"getAccountMovementsByTransaction\",result);return _context65.abrupt(\"return\",result);case 42:return _context65.abrupt(\"return\",undefined);case 43:case\"end\":return _context65.stop();}}},_callee65,this,[[8,35],[14,26,29,32]]);}));function getAccountMovementsByTransaction(_x43){return _getAccountMovementsByTransaction.apply(this,arguments);}return getAccountMovementsByTransaction;}()//retorna movimientos de cuentas\n},{key:\"getAccountMovements\",value:function(){var _getAccountMovements=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee66(partyId){var params,data,result,dataResult,i,item,year,dtResult,dt,_iterator2,_step2,accItem,dtr,p,dtYear,currentYear,deposits,_iterator3,_step3,record,monthName,dataByMonth;return _regeneratorRuntime.wrap(function _callee66$(_context66){while(1){switch(_context66.prev=_context66.next){case 0:if(!(partyId.length<=0)){_context66.next=2;break;}return _context66.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context66.next=6;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 6:result=_context66.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context66.next=10;break;}throw new Error(result.Status.StatusCode+\" - \"+result.Status.StatusDesc);case 10:dataResult=[];i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context66.next=33;break;}item=result.Accounts.Acct[i];if(!(item.AcctPartyType!==result.PartyKey.PartyType&&item.AcctPartyType===\"2\")){_context66.next=17;break;}_context66.next=30;break;case 17:params={AcctReference:item.AcctKey.AcctReference};data=qs.stringify(params);_context66.prev=19;year=0;_context66.next=23;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 23:dtResult=_context66.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \ndt={AcctId:item.AcctKey.AcctId,dataByYear:[]};_iterator2=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){accItem=_step2.value;if(year!==Number(accItem.AverageBalanceDt.split(' ')[1])){year=Number(accItem.AverageBalanceDt.split(' ')[1]);dt.dataByYear.push({year:year,dataresult:[]});}dtr={\"year\":Number(accItem.AverageBalanceDt.split(' ')[1]),\"month\":accItem.AverageBalanceDt.split(' ')[0],\"amount\":accItem.CurAmt.Amt,\"deposits\":0};dt.dataByYear[dt.dataByYear.length-1].dataresult.push(dtr);}/*dtResult.Acct.AcctBal.map(function (accItem, i) {  \r\n                            if(year !== Number(accItem.AverageBalanceDt.split(' ')[1])){\r\n                                year = Number(accItem.AverageBalanceDt.split(' ')[1]);\r\n                                dt.dataByYear.push({year,dataresult:[]})\r\n                            }                                                \r\n                            dt.dataByYear[dt.dataByYear.length-1].dataresult.push({\r\n                                \"year\": Number(accItem.AverageBalanceDt.split(' ')[1]), \r\n                                \"month\": accItem.AverageBalanceDt.split(' ')[0],\r\n                                \"amount\": accItem.CurAmt.Amt\r\n                            }); \r\n                        }) */}catch(err){_iterator2.e(err);}finally{_iterator2.f();}dataResult.push(dt);}_context66.next=30;break;case 27:_context66.prev=27;_context66.t0=_context66[\"catch\"](19);console.error(\"getAccountMovementsByTransaction\",_context66.t0);case 30:i++;_context66.next=12;break;case 33:_context66.prev=33;i=0;case 35:if(!(i<dataResult.length)){_context66.next=60;break;}dtResult=dataResult[i];p=0;case 38:if(!(p<dtResult.dataByYear.length)){_context66.next=57;break;}dtYear=dtResult.dataByYear[p];currentYear=dtYear.year;params=null;//dtResult.AcctId\nif(currentYear===Number(moment().format(\"YYYY\"))){params={CUENTA:dtResult.AcctId,FECHA_INI:currentYear+\"0101\",FECHA_FIN:moment().format(\"YYYYMMDD\"),PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\n}else{params={CUENTA:dtResult.AcctId,FECHA_INI:currentYear+\"0101\",FECHA_FIN:currentYear+\"1231\",PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\n}data=qs.stringify(params);_context66.prev=44;_context66.next=47;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 47:deposits=_context66.sent;//console.log(\"getAccountMovementsByTransactionDeposits\",deposits);\n_iterator3=_createForOfIteratorHelper(deposits.records);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){record=_step3.value;//console.log(\"depositsMonth\", record.FECHA.toString().substring(4, 6));\nmonthName=GetMontNameByNumber(record.FECHA.toString().substring(4,6));dataByMonth=dtYear.dataresult.find(function(x){return x.month.indexOf(monthName)>=0;});if(dataByMonth!==undefined){dataByMonth.deposits=Number(record.MONTO).toFixed(2);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_context66.next=54;break;case 52:_context66.prev=52;_context66.t1=_context66[\"catch\"](44);case 54:++p;_context66.next=38;break;case 57:++i;_context66.next=35;break;case 60:_context66.next=64;break;case 62:_context66.prev=62;_context66.t2=_context66[\"catch\"](33);case 64:return _context66.abrupt(\"return\",dataResult);case 65:case\"end\":return _context66.stop();}}},_callee66,this,[[19,27],[33,62],[44,52]]);}));function getAccountMovements(_x44){return _getAccountMovements.apply(this,arguments);}return getAccountMovements;}()},{key:\"getAccountDepositsByTransaction\",value:function(){var _getAccountDepositsByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee67(transactId,year,month){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee67$(_context67){while(1){switch(_context67.prev=_context67.next){case 0:_context67.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context67.sent;if(!(debtors!==null&&debtors!==undefined)){_context67.next=21;break;}result=[];i=0;case 6:if(!(i<debtors.length)){_context67.next=19;break;}_context67.prev=7;_context67.next=10;return this.getAccountDeposits(debtors[i].customerNumberT24,year,month);case 10:dataResult=_context67.sent;if(dataResult!==null&&dataResult!==undefined){dataResult.forEach(function(item){result.push(item);});}_context67.next=16;break;case 14:_context67.prev=14;_context67.t0=_context67[\"catch\"](7);case 16:i++;_context67.next=6;break;case 19:console.log(\"getAccountMovementsByTransaction\",result);return _context67.abrupt(\"return\",result);case 21:return _context67.abrupt(\"return\",undefined);case 22:case\"end\":return _context67.stop();}}},_callee67,this,[[7,14]]);}));function getAccountDepositsByTransaction(_x45,_x46,_x47){return _getAccountDepositsByTransaction.apply(this,arguments);}return getAccountDepositsByTransaction;}()},{key:\"getAccountDeposits\",value:function(){var _getAccountDeposits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee68(partyId,year,month){var params,data,result,dataResult,i,item,endDate,deposits,_iterator4,_step4,depo;return _regeneratorRuntime.wrap(function _callee68$(_context68){while(1){switch(_context68.prev=_context68.next){case 0:if(!(partyId.length<=0)){_context68.next=2;break;}return _context68.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context68.next=6;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 6:result=_context68.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context68.next=10;break;}throw new Error(result.Status.StatusCode+\" - \"+result.Status.StatusDesc);case 10:dataResult=[];i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context68.next=37;break;}item=result.Accounts.Acct[i];_context68.prev=14;year=Number(year).toString(\"00\");month=Number(month).toString(\"00\");endDate=moment(year+\"-\"+month+\"-01\").endOf('month').format('DD');params={AcctId:item.AcctKey.AcctId,EndDt:year+\"-\"+month+\"-\"+endDate+\"T23:59:59\",StartDt:year+\"-\"+month+\"-01T00:00:00\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context68.prev=20;_context68.next=23;return this.get(url.URL_CORE_TRANSACCTIONS+\"?\"+data);case 23:deposits=_context68.sent;_iterator4=_createForOfIteratorHelper(deposits.Trn);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){depo=_step4.value;if(depo.Desc.indexOf(\"CREDITO A CONTRATO\")<0&&depo.Desc.indexOf(\"Intereses - Capitalizables\")<0){dataResult.push({deposits:Number(depo.TotalCurAmt.Amt)});}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_context68.next=30;break;case 28:_context68.prev=28;_context68.t0=_context68[\"catch\"](20);case 30:_context68.next=34;break;case 32:_context68.prev=32;_context68.t1=_context68[\"catch\"](14);case 34:i++;_context68.next=12;break;case 37:return _context68.abrupt(\"return\",dataResult);case 38:case\"end\":return _context68.stop();}}},_callee68,this,[[14,32],[20,28]]);}));function getAccountDeposits(_x48,_x49,_x50){return _getAccountDeposits.apply(this,arguments);}return getAccountDeposits;}()//retorna movimientos de cuentas\n},{key:\"getApcInfo\",value:function(){var _getApcInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee69(identification,idType){var typeofId,tmpidentification,params,result,dataResult,item;return _regeneratorRuntime.wrap(function _callee69$(_context69){while(1){switch(_context69.prev=_context69.next){case 0:if(!(identification.length<=0)){_context69.next=2;break;}return _context69.abrupt(\"return\",undefined);case 2:typeofId=\"Cedula\";_context69.t0=idType;_context69.next=_context69.t0===\"CED\"?6:_context69.t0===\"RUC\"?8:_context69.t0===\"PAS\"?10:12;break;case 6:typeofId=\"Cedula\";return _context69.abrupt(\"break\",12);case 8:typeofId=\"RUC\";return _context69.abrupt(\"break\",12);case 10:typeofId=\"Pasaporte\";return _context69.abrupt(\"break\",12);case 12:tmpidentification=\"\";identification.split('-').map(function(str){if(str.startsWith(\"0\")){tmpidentification+=str.replace(/^0+/,'')+\"-\";}else{tmpidentification+=str+\"-\";}});if(tmpidentification.startsWith(\"-\")){tmpidentification=tmpidentification.substring(1);}identification=tmpidentification.substring(0,tmpidentification.length-1);params={\"ConsultarAPC\":{\"Model\":{\"EsPrueba\":0,\"ForzarBusqueda\":0,\"IdentificacionConsulta\":identification,//\"8-773-1899\",\n\"PasswordAPC\":\"Banesco19.\",\"TipoCliente\":typeofId,\"UltimusProcess\":7,\"UsuarioAPC\":\"WTIBANESCO001\"}}};//servicio retorna la info de APC del cliente\n_context69.next=19;return this.post(url.URL_CORE_APCINFO,params);case 19:result=_context69.sent;dataResult=[];try{if(Array.isArray(result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)){//Armamos la data a mostrar en pantalla\nresult.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function(item,i){try{dataResult.push({\"year\":moment(item.dc_fec_inicio_rel).format(\"YYYY\"),\"month\":moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\"initialAmount\":item.dc_monto_original,\"actualAmount\":item.dc_saldo_actual,\"asociation\":item.dc_nom_asoc,\"source\":item.dc_descr_corta_rela});}catch(err){}});}else{item=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{dataResult.push({\"year\":moment(item.dc_fec_inicio_rel).format(\"YYYY\"),\"month\":moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\"initialAmount\":item.dc_monto_original,\"actualAmount\":item.dc_saldo_actual,\"asociation\":item.dc_nom_asoc,\"source\":item.dc_descr_corta_rela});}catch(err){}}}catch(err){console.error(err);}return _context69.abrupt(\"return\",dataResult);case 23:case\"end\":return _context69.stop();}}},_callee69,this);}));function getApcInfo(_x51,_x52){return _getApcInfo.apply(this,arguments);}return getApcInfo;}()},{key:\"getEconomicGroup\",value:function(){var _getEconomicGroup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee70(partyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee70$(_context70){while(1){switch(_context70.prev=_context70.next){case 0:_context70.prev=0;params={PartyId:partyId};data=qs.stringify(params);_context70.next=5;return this.get(url.URL_CORE_COMPANIESRELATIONS+\"?\"+data);case 5:result=_context70.sent;console.log(\"getEconomicGroup\",result);return _context70.abrupt(\"return\",result.PartyPartyRels.PartyPartyRel[0].PartyPartyRelInfo.PartyRelName[0]);case 10:_context70.prev=10;_context70.t0=_context70[\"catch\"](0);case 12:if(!(partyId.length<=0)){_context70.next=14;break;}return _context70.abrupt(\"return\",undefined);case 14:return _context70.abrupt(\"return\",null);case 15:case\"end\":return _context70.stop();}}},_callee70,this,[[0,10]]);}));function getEconomicGroup(_x53){return _getEconomicGroup.apply(this,arguments);}return getEconomicGroup;}()},{key:\"getReciprocityByTransaction\",value:function(){var _getReciprocityByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee71(transactId,year,month){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee71$(_context71){while(1){switch(_context71.prev=_context71.next){case 0:_context71.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context71.sent;if(!(debtors!==null&&debtors!==undefined)){_context71.next=21;break;}result={averageAmt:0,deposits:0};i=0;case 6:if(!(i<debtors.length)){_context71.next=19;break;}_context71.prev=7;_context71.next=10;return this.getReciprocity(debtors[i].customerNumberT24,year,month);case 10:dataResult=_context71.sent;if(dataResult!==null&&dataResult!==undefined){result.averageAmt+=dataResult.averageAmt;result.deposits+=dataResult.deposits;}_context71.next=16;break;case 14:_context71.prev=14;_context71.t0=_context71[\"catch\"](7);case 16:i++;_context71.next=6;break;case 19:console.log(\"getAccountMovementsByTransaction\",result);return _context71.abrupt(\"return\",result);case 21:return _context71.abrupt(\"return\",undefined);case 22:case\"end\":return _context71.stop();}}},_callee71,this,[[7,14]]);}));function getReciprocityByTransaction(_x54,_x55,_x56){return _getReciprocityByTransaction.apply(this,arguments);}return getReciprocityByTransaction;}()},{key:\"getReciprocity\",value:function(){var _getReciprocity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee72(partyId,year,month){var params,data,result,resultToReturn,i,item,dtResult,_iterator5,_step5,accItem,dMonth,currentYear,monthNum,endDate,deposits,_iterator6,_step6,record;return _regeneratorRuntime.wrap(function _callee72$(_context72){while(1){switch(_context72.prev=_context72.next){case 0:if(!(partyId.length<=0)){_context72.next=2;break;}return _context72.abrupt(\"return\",undefined);case 2:year=Number(year);params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context72.next=7;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 7:result=_context72.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context72.next=10;break;}return _context72.abrupt(\"return\",undefined);case 10:resultToReturn={averageAmt:0,deposits:0};i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context72.next=49;break;}item=result.Accounts.Acct[i];params={AcctReference:item.AcctKey.AcctReference};data=qs.stringify(params);_context72.prev=16;_context72.next=19;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 19:dtResult=_context72.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \n_iterator5=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){accItem=_step5.value;dMonth=accItem.AverageBalanceDt.split(' ')[0];if(Number(accItem.AverageBalanceDt.split(' ')[1])===year&&dMonth.indexOf(month)>=0){resultToReturn.averageAmt=(Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}_context72.next=25;break;case 23:_context72.prev=23;_context72.t0=_context72[\"catch\"](16);case 25:_context72.prev=25;currentYear=year;monthNum=GetMontNumberByName(month);endDate=moment(year+\"-\"+monthNum+\"-01\").endOf('month').format('DD');params=null;//dtResult.AcctId\nparams={CUENTA:item.AcctKey.AcctId,FECHA_INI:currentYear+monthNum+\"01\",FECHA_FIN:currentYear+monthNum+endDate,PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context72.prev=32;_context72.next=35;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 35:deposits=_context72.sent;_iterator6=_createForOfIteratorHelper(deposits.records);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){record=_step6.value;//console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\n//var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\n//var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\n//if(dataByMonth!==undefined){                        \nresultToReturn.deposits=(Number(resultToReturn.deposits)+Number(record.monto)).toFixed(2);//  }                    \n}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_context72.next=42;break;case 40:_context72.prev=40;_context72.t1=_context72[\"catch\"](32);case 42:_context72.next=46;break;case 44:_context72.prev=44;_context72.t2=_context72[\"catch\"](25);case 46:i++;_context72.next=12;break;case 49:return _context72.abrupt(\"return\",resultToReturn);case 50:case\"end\":return _context72.stop();}}},_callee72,this,[[16,23],[25,44],[32,40]]);}));function getReciprocity(_x57,_x58,_x59){return _getReciprocity.apply(this,arguments);}return getReciprocity;}()},{key:\"getReciprocityByYearByTransaction\",value:function(){var _getReciprocityByYearByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee73(transactId,year){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee73$(_context73){while(1){switch(_context73.prev=_context73.next){case 0:_context73.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context73.sent;if(!(debtors!==null&&debtors!==undefined)){_context73.next=21;break;}result={averageAmt:0,deposits:0};i=0;case 6:if(!(i<debtors.length)){_context73.next=19;break;}_context73.prev=7;_context73.next=10;return this.getReciprocityByYear(debtors[i].customerNumberT24,year);case 10:dataResult=_context73.sent;if(dataResult!==null&&dataResult!==undefined){result.averageAmt+=dataResult.averageAmt;result.deposits+=dataResult.deposits;}_context73.next=16;break;case 14:_context73.prev=14;_context73.t0=_context73[\"catch\"](7);case 16:i++;_context73.next=6;break;case 19:console.log(\"getAccountMovementsByTransaction\",result);return _context73.abrupt(\"return\",result);case 21:return _context73.abrupt(\"return\",undefined);case 22:case\"end\":return _context73.stop();}}},_callee73,this,[[7,14]]);}));function getReciprocityByYearByTransaction(_x60,_x61){return _getReciprocityByYearByTransaction.apply(this,arguments);}return getReciprocityByYearByTransaction;}()},{key:\"getReciprocityByYear\",value:function(){var _getReciprocityByYear=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee74(partyId,year){var params,data,result,resultToReturn,i,item,dtResult,_iterator7,_step7,accItem,currentYear,monthNum,endDate,deposits,_iterator8,_step8,record;return _regeneratorRuntime.wrap(function _callee74$(_context74){while(1){switch(_context74.prev=_context74.next){case 0:if(!(partyId.length<=0)){_context74.next=2;break;}return _context74.abrupt(\"return\",undefined);case 2:year=Number(year);params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context74.next=7;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 7:result=_context74.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context74.next=10;break;}return _context74.abrupt(\"return\",undefined);case 10:resultToReturn={averageAmt:0,deposits:0};i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context74.next=49;break;}item=result.Accounts.Acct[i];params={AcctReference:item.AcctKey.AcctReference};data=qs.stringify(params);_context74.prev=16;_context74.next=19;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 19:dtResult=_context74.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \n_iterator7=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){accItem=_step7.value;//var dMonth = accItem.AverageBalanceDt.split(' ')[0]\nif(Number(accItem.AverageBalanceDt.split(' ')[1])===year){resultToReturn.averageAmt=(Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}_context74.next=25;break;case 23:_context74.prev=23;_context74.t0=_context74[\"catch\"](16);case 25:_context74.prev=25;currentYear=year;monthNum=year===Number(moment().format(\"YYYY\"))?moment().format(\"MM\"):\"12\";endDate=moment(year+\"-\"+monthNum+\"-01\").endOf('month').format('DD');params=null;//dtResult.AcctId\nparams={CUENTA:item.AcctKey.AcctId,FECHA_INI:currentYear+\"0101\",FECHA_FIN:currentYear+monthNum+endDate,PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context74.prev=32;_context74.next=35;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 35:deposits=_context74.sent;_iterator8=_createForOfIteratorHelper(deposits.records);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){record=_step8.value;//console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\n//var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\n//var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\n//if(dataByMonth!==undefined){                        \nresultToReturn.deposits=(Number(resultToReturn.deposits)+Number(record.monto)).toFixed(2);//  }                    \n}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}_context74.next=42;break;case 40:_context74.prev=40;_context74.t1=_context74[\"catch\"](32);case 42:_context74.next=46;break;case 44:_context74.prev=44;_context74.t2=_context74[\"catch\"](25);case 46:i++;_context74.next=12;break;case 49:return _context74.abrupt(\"return\",resultToReturn);case 50:case\"end\":return _context74.stop();}}},_callee74,this,[[16,23],[25,44],[32,40]]);}));function getReciprocityByYear(_x62,_x63){return _getReciprocityByYear.apply(this,arguments);}return getReciprocityByYear;}()},{key:\"getDepositsByTransaction\",value:function(){var _getDepositsByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee75(transactId,year,month){var debtors,result,i,dataResult;return _regeneratorRuntime.wrap(function _callee75$(_context75){while(1){switch(_context75.prev=_context75.next){case 0:_context75.next=2;return this.backendServices.consultarDeudores(transactId);case 2:debtors=_context75.sent;if(!(debtors!==null&&debtors!==undefined)){_context75.next=21;break;}result={averageAmt:0,deposits:0};i=0;case 6:if(!(i<debtors.length)){_context75.next=19;break;}_context75.prev=7;_context75.next=10;return this.getDeposits(debtors[i].customerNumberT24,year,month);case 10:dataResult=_context75.sent;if(dataResult!==null&&dataResult!==undefined){result.averageAmt+=dataResult.averageAmt;result.deposits+=dataResult.deposits;}_context75.next=16;break;case 14:_context75.prev=14;_context75.t0=_context75[\"catch\"](7);case 16:i++;_context75.next=6;break;case 19:console.log(\"getAccountMovementsByTransaction\",result);return _context75.abrupt(\"return\",result);case 21:return _context75.abrupt(\"return\",undefined);case 22:case\"end\":return _context75.stop();}}},_callee75,this,[[7,14]]);}));function getDepositsByTransaction(_x64,_x65,_x66){return _getDepositsByTransaction.apply(this,arguments);}return getDepositsByTransaction;}()},{key:\"getDeposits\",value:function(){var _getDeposits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee76(partyId,year,month){var params,data,result,resultToReturn,i,item,endDate,dtResult,_iterator9,_step9,accItem,deposits,_iterator10,_step10,depo;return _regeneratorRuntime.wrap(function _callee76$(_context76){while(1){switch(_context76.prev=_context76.next){case 0:if(!(partyId.length<=0)){_context76.next=2;break;}return _context76.abrupt(\"return\",undefined);case 2:year=Number(year);params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context76.next=7;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 7:result=_context76.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context76.next=10;break;}return _context76.abrupt(\"return\",undefined);case 10:resultToReturn={averageAmt:0,deposits:0};i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context76.next=43;break;}item=result.Accounts.Acct[i];//CUENTA=120000086315&FECHA_INI=20220101&FECHA_FIN=20220330&PROMEDIO=S\nendDate=moment(year+\"-12-01\").endOf('month').format('DD');params={CUENTA:item.AcctKey.AcctId,FECHA_INI:year+\"0101\",FECHA_FIN:year+\"12\"+endDate};data=qs.stringify(params);_context76.prev=17;_context76.next=20;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 20:dtResult=_context76.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \n_iterator9=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){accItem=_step9.value;if(Number(accItem.AverageBalanceDt.split(' ')[1])===year){resultToReturn.averageAmt=(Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}_context76.next=26;break;case 24:_context76.prev=24;_context76.t0=_context76[\"catch\"](17);case 26:_context76.prev=26;//var monthN=GetMontNumberByName(month);\nendDate=moment(year+\"-12-01\").endOf('month').format('DD');params={AcctId:item.AcctKey.AcctId,EndDt:year+\"-12-\"+endDate+\"T23:59:59\",StartDt:year+\"-01-01T00:00:00\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context76.next=32;return this.get(url.URL_CORE_TRANSACCTIONS+\"?\"+data);case 32:deposits=_context76.sent;console.log(\"getReciprocityByYear\",deposits);_iterator10=_createForOfIteratorHelper(deposits.Trn);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){depo=_step10.value;if(depo.Desc.indexOf(\"CREDITO A CONTRATO\")<0&&depo.Desc.indexOf(\"Intereses - Capitalizables\")<0){resultToReturn.deposits=(Number(resultToReturn.deposits)+Number(depo.TotalCurAmt.Amt)).toFixed(2);}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}_context76.next=40;break;case 38:_context76.prev=38;_context76.t1=_context76[\"catch\"](26);case 40:i++;_context76.next=12;break;case 43:return _context76.abrupt(\"return\",resultToReturn);case 44:case\"end\":return _context76.stop();}}},_callee76,this,[[17,24],[26,38]]);}));function getDeposits(_x67,_x68,_x69){return _getDeposits.apply(this,arguments);}return getDeposits;}()/// Obtener el serial de la linea -- Parametros: NumeroT24 y Codigo Facilidad\n},{key:\"getLineSerial\",value:function(){var _getLineSerial=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee77(partyId,lineTypeCode){var maxLineNum,params,data,result,dataResults,lineNumber,lineserial,_args77=arguments;return _regeneratorRuntime.wrap(function _callee77$(_context77){while(1){switch(_context77.prev=_context77.next){case 0:maxLineNum=_args77.length>2&&_args77[2]!==undefined?_args77[2]:0;_context77.prev=1;//var errorDispacher = new errorDispacherHelper(); \nconsole.log(\"getLineSerial\",partyId,lineTypeCode);//partyId=\"800048231\"; facilityTypeCode=\"10000\"\nif(!(partyId.length<=0)){_context77.next=5;break;}return _context77.abrupt(\"return\",undefined);case 5:params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018\n//servicio retorna las cuentas del cliente\n_context77.next=9;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 9:result=_context77.sent;// if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK && result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK1) {\n//     errorDispacherHelper.dispatch({ status: result.Status.StatusCode, error: result.Status.StatusDesc });\n//     return;\n// }            \ndataResults=result.Party.PartyInfo.CreditLine.filter(function(x){return x.CreditLineId.split(\".\")[1].indexOf(lineTypeCode)>=0;});lineNumber=1+maxLineNum;dataResults.forEach(function(dt){lineNumber=Number(dt.CreditLineId.split(\".\")[2])>lineNumber?Number(dt.CreditLineId.split(\".\")[2]):lineNumber;});while(lineTypeCode.length<7){lineTypeCode=\"0\"+lineTypeCode;}if(lineNumber.toString().length<2){lineNumber=(\"0\"+(lineNumber+1).toString()).slice(-2);}else{lineNumber=lineNumber.toString();}lineserial=partyId+\".\"+lineTypeCode+\".\"+lineNumber;console.log(\"lineas\",lineserial);return _context77.abrupt(\"return\",lineserial);case 20:_context77.prev=20;_context77.t0=_context77[\"catch\"](1);case 22:return _context77.abrupt(\"return\",null);case 23:case\"end\":return _context77.stop();}}},_callee77,this,[[1,20]]);}));function getLineSerial(_x70,_x71){return _getLineSerial.apply(this,arguments);}return getLineSerial;}()///Creacion de Linea para desembolso\n//numero de linea = numero de cliente + tipo de linea + serial === EJ: 600197109.0011000.01\n//https://qa.api.ob.banesco.com.pa/APIUtil/v1/catalogs?catalog_name=LIMIT REFERENCE&parent_catalog_name=&keyword=  \n//===> Catalogo de Tipo de Lineas\n//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018  \n//===> Obtenemos todas las lineas y tomamos el total + 1 => Mas serial\n},{key:\"newline\",value:function(){var _newline=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee78(data){var result;return _regeneratorRuntime.wrap(function _callee78$(_context78){while(1){switch(_context78.prev=_context78.next){case 0:_context78.prev=0;_context78.next=3;return this.post(url.URL_CORE_LINES,data);case 3:result=_context78.sent;console.log(\"NewLine\",data,result);if(!(result.StatusCode===OPTs.ResponseT24_STATUSOK)){_context78.next=11;break;}_context78.next=8;return this.newlineChild(data);case 8:return _context78.abrupt(\"return\",result);case 11:errorDispacherHelper.dispatch({status:result.StatusCode,data:result,error:result.StatusDesc});case 12:_context78.next=17;break;case 14:_context78.prev=14;_context78.t0=_context78[\"catch\"](0);errorDispacherHelper.dispatch({status:\"500\",data:result,error:_context78.t0.message});case 17:return _context78.abrupt(\"return\",undefined);case 18:case\"end\":return _context78.stop();}}},_callee78,this,[[0,14]]);}));function newline(_x72){return _newline.apply(this,arguments);}return newline;}()},{key:\"newlineChild\",value:function(){var _newlineChild=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee79(data){var i,dataProd,CreditLimitId,CreditLimitIdNum,ToReplaceIdNum,tmpdata,result;return _regeneratorRuntime.wrap(function _callee79$(_context79){while(1){switch(_context79.prev=_context79.next){case 0:_context79.prev=0;i=0;case 2:if(!(i<data.CreditLine.CreditLimit.Allow.ProductData.length)){_context79.next=25;break;}_context79.prev=3;dataProd=data.CreditLine.CreditLimit.Allow.ProductData[i];CreditLimitId=data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId;CreditLimitIdNum=CreditLimitId.split(\".\")[1].replace(/0/g,'');CreditLimitIdNum=CreditLimitIdNum+\"0\";ToReplaceIdNum=(Number(CreditLimitIdNum)+i+1).toString();data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId=data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId.split(\".\")[0]+\".\"+data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId.split(\".\")[1].replace(CreditLimitIdNum,ToReplaceIdNum)+\".\"+data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId.split(\".\")[2];tmpdata=JSON.parse(JSON.stringify(data));delete tmpdata.CreditLine.CreditLimit.Allow.ProductData;_context79.next=14;return this.post(url.URL_CORE_LINES,tmpdata);case 14:result=_context79.sent;console.log(\"NewLineChild\",tmpdata,result);if(result.Status.StatusCode===OPTs.ResponseT24_STATUSOK){//return result;\n}_context79.next=22;break;case 19:_context79.prev=19;_context79.t0=_context79[\"catch\"](3);errorDispacherHelper.dispatch({status:\"500\",data:result,error:_context79.t0.message});case 22:i++;_context79.next=2;break;case 25:_context79.next=29;break;case 27:_context79.prev=27;_context79.t1=_context79[\"catch\"](0);case 29:return _context79.abrupt(\"return\",undefined);case 30:case\"end\":return _context79.stop();}}},_callee79,this,[[0,27],[3,19]]);}));function newlineChild(_x73){return _newlineChild.apply(this,arguments);}return newlineChild;}()// Garantia loans/Colateral\n//https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/collaterals\n// Desembolso\n//https://qa.api.ob.banesco.com.pa/acctloan/v1/loans\n//lineas\n//https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/credits/lines/limits\n},{key:\"DesembolsoBajoLinea\",value:function(){var _DesembolsoBajoLinea=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee80(data){var result;return _regeneratorRuntime.wrap(function _callee80$(_context80){while(1){switch(_context80.prev=_context80.next){case 0:_context80.next=2;return this.put(url.URL_CORE_PRESTAMOS,data);case 2:result=_context80.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context80.next=5;break;}return _context80.abrupt(\"return\",result);case 5:return _context80.abrupt(\"return\",result);case 6:case\"end\":return _context80.stop();}}},_callee80,this);}));function DesembolsoBajoLinea(_x74){return _DesembolsoBajoLinea.apply(this,arguments);}return DesembolsoBajoLinea;}()},{key:\"test\",value:function(){var _test=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee81(){var data,result;return _regeneratorRuntime.wrap(function _callee81$(_context81){while(1){switch(_context81.prev=_context81.next){case 0:_context81.prev=0;data={\"Acct\":{\"Activity\":3201,\"Category\":28212,\"CurCode\":\"USD\",\"CreditAcctData\":{\"CountryDestination\":\"PA\",\"PromiseLetter\":{\"AdvExpiryDt\":\"2022-12-31\",\"AutoExpiry\":true,\"BeneficiaryCust\":{\"PartyId\":\"\",\"PartyType\":\"\"},\"BeneficiaryName\":\"AUTO TUNNIG CA\",\"ContractType\":\"CA\",\"CustomerReferenceId\":\"MP2022154001\",\"DealSubType\":\"CMTA\",\"EffDt\":\"2022-06-03\",\"EventsProcessing\":\"ONLINE\",\"LimitRef\":\"\",\"LiquidationMode\":\"Automatic\",\"MaturityDt\":\"2022-12-31\",\"OpenDt\":\"2022-06-03\",\"PrincipalAmt\":{\"Amt\":15000,\"CurCode\":\"USD\"}}},\"AcctMember\":{\"PartyKey\":{\"PartyId\":600072721,\"PartyType\":2}}}};_context81.next=4;return this.get(url.URL_CORE_TEST);case 4:result=_context81.sent;console.log(\"getLineSerial\",result);return _context81.abrupt(\"return\",result);case 9:_context81.prev=9;_context81.t0=_context81[\"catch\"](0);case 11:return _context81.abrupt(\"return\",null);case 12:case\"end\":return _context81.stop();}}},_callee81,this,[[0,9]]);}));function test(){return _test.apply(this,arguments);}return test;}()},{key:\"getTreasuryCurveCatalogo1\",value:function(){var _getTreasuryCurveCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee82(){var params,data,result;return _regeneratorRuntime.wrap(function _callee82$(_context82){while(1){switch(_context82.prev=_context82.next){case 0:_context82.prev=0;params={catalog_name:'CURVA GRUPO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context82.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context82.sent;_context82.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context82.abrupt(\"return\",result.catalog);case 11:_context82.prev=11;_context82.t0=_context82[\"catch\"](0);case 13:return _context82.abrupt(\"return\",null);case 14:case\"end\":return _context82.stop();}}},_callee82,this,[[0,11]]);}));function getTreasuryCurveCatalogo1(){return _getTreasuryCurveCatalogo.apply(this,arguments);}return getTreasuryCurveCatalogo1;}()},{key:\"getTreasuryCurveCatalogoChild\",value:function(){var _getTreasuryCurveCatalogoChild=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee83(code){var params,data,result;return _regeneratorRuntime.wrap(function _callee83$(_context83){while(1){switch(_context83.prev=_context83.next){case 0:_context83.prev=0;params={catalog_name:'CURVA TESORERIA',parent_catalog_name:code,keyword:\"\"};data=qs.stringify(params);_context83.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context83.sent;_context83.next=8;return convertToUpperCasesData(result.catalog);case 8:return _context83.abrupt(\"return\",result.catalog);case 11:_context83.prev=11;_context83.t0=_context83[\"catch\"](0);case 13:return _context83.abrupt(\"return\",null);case 14:case\"end\":return _context83.stop();}}},_callee83,this,[[0,11]]);}));function getTreasuryCurveCatalogoChild(_x75){return _getTreasuryCurveCatalogoChild.apply(this,arguments);}return getTreasuryCurveCatalogoChild;}()}]);return Services;}(ApiServiceCore);export{Services as default};","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/services/CoreServices/Services.js"],"names":["WatchListModel","DocumentModel","ClientInfoModel","PartiesStaffModel","ApiServiceCore","url","qs","ACT_FACILIDADACTIVOSFIJOS","OPTs","ResponseModel","moment","part","GetMontNumberByName","GetMontNameByNumber","ResourceStore","Currency","convertToUpperCasesData","BackendServices","errorDispacherHelper","Services","backendServices","params","post","URL_CORE_WATCHLIST","result","status","fromJson","results","response","error","data","config","headers","URL_CORE_DOCUMENTS","console","log","Status","StatusCode","dataresult","docName","Result","documentId","formType","undefined","docId","DocumentHandle","ReturnBase64","URL_CORE_DOCUMENTSVIEW","Documents","DocPop","stringify","get","URL_CORE_PARTIEINFO","typePerson","customerNumberT24","PartyType","Number","PartyId","getPartiesInformation","length","extraInfo","activity","address","Country","CountryCode","Province","Cod","CountyDistrict","Jurisdiction","City","Desc","AddrDesc","Building","HouseNumber","Street","URL_CORE_PARTIESTAFF","put","URL_CORE_COMPANIESRELATIONS","catalog_name","parent_catalog_name","keyword","URL_CORE_CATALOGO","catalog","sessionStorage","setItem","JSON","pais","provincia","distrito","Records","unshift","Description","Code","codeActividad","codGarantia","transactId","consultarDeudores","debtors","i","getFacilities","dataResult","forEach","item","name","name2","lastName","lastName2","personId","push","getCreditCard","partyId","currencyData","URL_CORE_CREDITOS_LINE","Array","isArray","Party","PartyInfo","CreditLine","CreditLineId","split","replace","deudas","debtype","facilityType","CreditType","bank","balance","getRealValue","PendingAmt","Amt","approved","OnlineAmt","variation","startDate","format","endDate","err","ConsultarAPCResponse","ConsultarAPCResult","DetCompromisoAPC","URL_CORE_FACILIDADES","AcctLoans","AcctLoan","AcctKey","ProductDesc","AcctBal","CurAmt","AcctOpeningInfo","InitialAmt","OpenDt","CreditAcctData","DueDt","AcctId","PartyPartyRels","PartyPartyRel","client","partyNumber","PartyPartyRelInfo","PartyRef","RelPartyRef","PartyKey","longTerm","proposal","shortTerm","totalTerm","pledged","netExposition","diff","approvedAmount","actualBalance","URL_CORE_PIGNORADO","Collaterals","CollateralInfo","map","AcctReference","Collateral","InsuranceInfo","CollateralAmt","longTermresult","shortTermresult","getAllTermDebts","clientDocId","idType","identification","typeofId","tmpidentification","str","startsWith","substring","URL_CORE_APCINFO","dc_nom_asoc","toUpperCase","indexOf","dc_descr_corta_rela","paymentHistory","dc_historia","dc_saldo_actual","dc_monto_original","dc_fec_inicio_rel","dc_fec_fin_rel","approvedDate","URL_CORE_CreditCard","readCardTDC_Rs","Customer","Product","CardInfo","Type","RelationType","approvedAmt","Statement","StatementInfo","find","x","balanceAmt","EndDt","EmbossInfo","FirstName","LastName","URL_CORE_AVERAGES","URL_CORE_IMPORTACIONES","URL_CORE_EXPORTACIONES","URL_CORE_INGOING","URL_CORE_OUTOGOING","URL_CORE_CREDITOS","StartDt","URL_CORE_TRANSACCTIONS","URL_CORE_PRESTAMOS","URL_CORE_PRESTAMOS_INFORMATION","FECHA","add","CLIENTE","URL_CORE_REPORTINGSERVICES","CollateralKey","CollateralId","collateralId","facilityAmt","warrantyType","InqType","URL_CORE_COLLATERALS","flagAcctId","getAccountMovements","includes","URL_CORE_ACCOUNTSPARTIES","ResponseT24_STATUSOK","Error","StatusDesc","Accounts","Acct","AcctPartyType","year","dtResult","dt","dataByYear","accItem","AverageBalanceDt","dtr","p","dtYear","currentYear","CUENTA","FECHA_INI","FECHA_FIN","PROMEDIO","URL_CORE_BALANCETOTALS","deposits","records","record","monthName","toString","dataByMonth","month","MONTO","toFixed","getAccountDeposits","endOf","Trn","depo","TotalCurAmt","PartyRelName","averageAmt","getReciprocity","resultToReturn","dMonth","monthNum","monto","getReciprocityByYear","getDeposits","lineTypeCode","maxLineNum","dataResults","filter","lineNumber","slice","lineserial","URL_CORE_LINES","newlineChild","dispatch","message","CreditLimit","Allow","ProductData","dataProd","CreditLimitId","CreditLimitKey","CreditLimitIdNum","ToReplaceIdNum","tmpdata","parse","URL_CORE_TEST","code"],"mappings":"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","sourcesContent":["\r\nimport { WatchListModel, DocumentModel, ClientInfoModel, PartiesStaffModel } from \"../../models/Core\";\r\nimport ApiServiceCore from \"../ApiServiceCore\";\r\nimport * as url from \"../../helpers/url_helper\"\r\nimport qs from \"qs\";\r\nimport { ACT_FACILIDADACTIVOSFIJOS } from \"../../helpers/options_helper\";\r\nimport * as OPTs from \"../../helpers/options_helper\"\r\nimport { ResponseModel } from '../../models/Common/ResponseModel';\r\nimport moment from \"moment\";\r\nimport { part } from \"core-js/core/function\";\r\n\r\nimport { GetMontNumberByName, GetMontNameByNumber } from '../../helpers/commons'\r\nimport { ResourceStore } from \"i18next\";\r\n\r\nimport Currency from \"../../helpers/currency\"\r\n\r\nimport { convertToUpperCasesData } from '../../helpers/commons'\r\n\r\nimport { BackendServices } from \"../../services\";\r\n\r\nimport errorDispacherHelper from \"../../helpers/errorDispacherHelper\";\r\n\r\nexport default class Services extends ApiServiceCore {\r\n\r\n    backendServices = new BackendServices();\r\n\r\n    //analysis/customers -> retorna la info de lista de vigilancia\r\n    //ConsultarListaCriterioCORE    \r\n    async postWhatchList(params) {\r\n        try {\r\n            /*\r\n        {\r\n      \"pCustomerId\": \"06--00711-002304\",\r\n      \"pTypeId\": \"CEDULA_IDENTIDAD\",\r\n      \"pModelId\": \"LISTA_VIGILANCIA\",\r\n      \"pCustomerListParams\": {\r\n          \"KeyValueParam\": [\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"NOMBRE\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Librada\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"SEGUNDO_NOMBRE\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Emilio\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"PRIMER_APELLIDO\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Rivera\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"SEGUNDO_APELLIDO\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Gaviria\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"TIPO_ID\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"CEDULA_IDENTIDAD\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"CEDULA\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"06--00711-002304\"\r\n              }\r\n          ]\r\n      },\r\n      \"pUser\": \"wallytech_ws_user\",\r\n      \"pWaitingInterval\": 180000000,\r\n      \"pPriority\": 1\r\n  }\r\n        */\r\n            var result = await this.post(url.URL_CORE_WATCHLIST, params);\r\n\r\n            return { status: 200, result: WatchListModel.fromJson(result).results };\r\n\r\n        }\r\n        catch (err) {\r\n            return { status: err.response.status, error: err.response.data }; //errorMessage, //errorCode\r\n        }\r\n    }\r\n\r\n    //documents -> salva documento en gestor documental ONBASE\r\n    //GuardarDocumentoECM\r\n    async postDocument(data) {\r\n\r\n        var config = {\r\n            headers: {\r\n                //\"Accept\":\"*/*\",\r\n                //\"Accept-Encoding\":\"gzip, deflate, sdch, br\",\r\n                //\"Accept-Language\":\"fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4\",\r\n                //\"Access-Control-Request-Headers\":\"accept, content-type\",\r\n                //\"Content-Type\":\"text/plain\",\r\n                //\"Content-Length\":JSON.stringify(data).length.toString(),\r\n                //\"Host\":\"https://qa.api.ob.banesco.com.pa/\",\r\n                //Connection: \"keep-alive\",\r\n                //\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\",\r\n                \"userId\": \"mq3898\", //Usuario\r\n                \"clientDt\": \"clientDt\", //\"Fecha de ejecuciÃ³n del cliente.\"\r\n                \"appName\": \"ReactJs\",//\"Aplicacion que consume el servicio\"\r\n                \"requestId\": \"202112202\",//\"Identificador de la solicitud.\"\r\n                \"channelId\": \"channelID\", //\"Canal consumidor\",                \r\n            }\r\n        }\r\n\r\n        var result = await this.post(url.URL_CORE_DOCUMENTS, data, config);\r\n\r\n        console.log(\"Result Document: \", result);\r\n\r\n        /*\r\n        var result = {\r\n            \"Status\": {\r\n                \"StatusCode\": \"M0000\",\r\n                \"StatusDesc\": \"OK\"\r\n            },\r\n            \"Token\": \"e793-ddb2-ab0e-6626-5d3e-5f19-b79b-1f5d\",\r\n            \"Result\": {\r\n                \"DocName\": \"TDC - Contrato de TDC  (98765432)\",\r\n                \"DocumentID\": \"34589873\",\r\n                \"FormType\": \"HTML\"\r\n            }\r\n        }\r\n        */\r\n        //console.log(result);\r\n        if (result.Status.StatusCode === \"M0000\") {\r\n            var dataresult = { docName: result.Result['DocName'], documentId: result.Result['DocumentID'], formType: result.Result['FormType'] }\r\n            return dataresult;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    //documents -> Ver documento en gestor documental ONBASE\r\n    //VerDocumentoECM\r\n    async postViewDocument(docId) {\r\n\r\n        try {\r\n            console.log(docId);\r\n            var data = {\r\n                DocumentHandle: docId,\r\n                ReturnBase64: false\r\n            }\r\n\r\n            var result = await this.post(url.URL_CORE_DOCUMENTSVIEW, data);\r\n\r\n            console.log(\"Result Document: \", result);\r\n\r\n            return result.Documents[0].DocPop;\r\n        }\r\n        catch (e) { }\r\n        return null;\r\n\r\n\r\n\r\n    }\r\n\r\n    //v1/parties/information -> retorna la info del cliente\r\n    //BuscarClienteCORE\r\n    async getPartiesInformation(params) {\r\n\r\n        /*var item =[ {id:800120843,clientnumber:800120843,clientname:\"Israel Michel Gomez Alfonso\",firstname:\"Israel\",secondname:\"Michel\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"CED\",idnumber:\"456123\"},\r\n        {id:800120845,clientnumber:800120845,clientname:\"Pancho Pedro Gomez Alfonso\",firstname:\"Pancho\",secondname:\"Pedro\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"RUC\",idnumber:\"456456\"}];\r\n        return item;*/\r\n        //params = {PartyType:Juridico,PartyId:600088018}\r\n        var data = qs.stringify(params);\r\n        console.log(data);\r\n        //url.URL_CORSBYPASS +\r\n        var result = await this.get(url.URL_CORE_PARTIEINFO + \"?\" + data);\r\n        console.log(result);\r\n        if (result.Status.StatusCode === \"M0000\") {\r\n            return ClientInfoModel.fromJson(result);\r\n        }\r\n        else {\r\n            result[\"error\"] = \"Error de Servicio del Core\";//result.Status.StatusDesc;\r\n            result[\"errorCode\"] = result.Status.StatusCode;\r\n            return result;\r\n        }\r\n    }\r\n\r\n    async getPartiesInformationExtra(typePerson, customerNumberT24) {\r\n        try {\r\n            var params = { PartyType: (Number(typePerson) === 1 ? \"Natural\" : \"Juridico\"), PartyId: customerNumberT24 }\r\n            var result = await this.getPartiesInformation(params);\r\n            if (result !== undefined && result.length > 0) {\r\n                var data = result[0];\r\n                console.log(\"getPartiesInformationExtra\", data);\r\n                var extraInfo = {\r\n                    activity: {\r\n                        \"EconomicActivity\": data[\"economicActivity\"]\r\n                    },\r\n                    address: {\r\n                        \"Country\": data[\"address\"]?.Country?.CountryCode ?? \"\",\r\n                        \"Province\": data[\"address\"]?.Province?.Cod ?? \"\",\r\n                        \"CountyDistrict\": data[\"address\"]?.CountyDistrict?.Cod ?? \"\",\r\n                        \"Jurisdiction\": data[\"address\"]?.Jurisdiction?.Cod ?? \"\",\r\n                        \"City\": data[\"address\"]?.City?.Desc ?? \"\",\r\n                        \"AddrDesc\": data[\"address\"]?.AddrDesc ?? \"\",\r\n                        \"Building\": data[\"address\"]?.Building?.Desc ?? \"\",\r\n                        \"HouseNumber\": data[\"address\"]?.HouseNumber ?? \"\",\r\n                        \"Street\": data[\"address\"]?.Street ?? \"\"\r\n                    },\r\n                    \"PhoneNumber\": data[\"phoneNumber\"],\r\n                    \"Email\": data[\"email\"]\r\n                }\r\n\r\n                return extraInfo;\r\n            }\r\n        }\r\n        catch (err) { }\r\n        return undefined\r\n    }\r\n\r\n    //Accionistas\r\n    async getPartiesStaff(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        var params = { PartyId: PartyId }//{PartyId:600235373}\r\n        params = qs.stringify(params);\r\n\r\n        var result = await this.get(url.URL_CORE_PARTIESTAFF + \"?\" + params);\r\n        return PartiesStaffModel.fromJson(result);\r\n\r\n    }\r\n\r\n    ///v1/parties/staff\r\n    async putPartiesStaff(data) {\r\n\r\n        var result = await this.put(url.URL_CORE_PARTIESTAFF, data);\r\n\r\n        return PartiesStaffModel.fromJson(result);\r\n    }\r\n\r\n    //ConsultarListaEmpresasRelacionadas\r\n    async getCompaniesRelations(params) {\r\n\r\n        //params = {PartyId:600012387}\r\n        var data = qs.stringify(params);\r\n\r\n        var result = await this.get(url.URL_CORE_COMPANIESRELATIONS + \"?\" + data);\r\n\r\n        return PartiesStaffModel.fromJson(result);\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                       Api para obtener todos los paises desde el catalogo                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPaisesCatalogo() {\r\n        try {\r\n            // var result = sessionStorage.getItem('catPaises');\r\n            // if (result !== undefined && result !== null) {\r\n            //     result = JSON.parse(result)\r\n            //     await convertToUpperCasesData(result)\r\n            //     return result;\r\n            // }\r\n            //sessionStorage.setItem('catPaises', JSON.stringify(result.roles));\r\n\r\n            let params = {\r\n                catalog_name: 'PAIS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n\r\n            await convertToUpperCasesData(result.catalog)\r\n\r\n            sessionStorage.setItem('catPaises', JSON.stringify(result.catalog));\r\n\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*       Api para obtener las provincias de un pais, pasandole como parametro el id del pais      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getProvinciasCatalogo(pais) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'PROVINCIA',\r\n                parent_catalog_name: pais,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*    API para obtener los distrito de cada provincia pasandole como parametro el id provincia    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getDistritoCatalogo(provincia) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'DISTRITO',\r\n                parent_catalog_name: provincia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                      Api para obtener los corregimientos de cada distrito                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCorregimientoCatalogo(distrito) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'CORREGIMIENTO',\r\n                parent_catalog_name: distrito,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                         Api para obtener las ciudades de cada provincia                        */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCiudadCatalogo(provincia) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'CIUDAD',\r\n                parent_catalog_name: provincia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                      Api para obtener el grupo economico de los catalogos                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getGrupoEconomicoCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'GRUPO ECONOMICO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            result.catalog.Records.unshift({ Description: \"N/A\", Code: \"N/A\" })\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                   Api para obtener las bancas esta api proviene de catalogos                   */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getBancaCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'BANCA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                   Api muestra todos los cargos que retorna desde el catalogo                   */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCargosCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'CARGO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     Api retorna todos los bancos exitentes para el catalogo                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getBancosCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'BANCOS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getActividadEconomicaCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'ACTIVIDAD ECONOMICA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSubActividadEconomicaCatalogo(codeActividad) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'SUB ACTIVIDAD ECONOMICA',\r\n                parent_catalog_name: codeActividad,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO DE SECTOR ECONOMICO                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSectorEconomicoCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'SECTOR ECONOMICO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO RELACION                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getRelacionCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'RELACION',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO TIPO DE GARANTIA                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getTipoGarantiaCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'TIPO DE GARANTIA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    async getSubTipoGarantiaCatalogo(codGarantia) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'SUB TIPO GARANTIA',\r\n                parent_catalog_name: codGarantia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n    /*\r\n    \"catalog\": {\r\n        \"type\": \"TIPO DE GARANTIA\",\r\n        \"records\": [\r\n            {\r\n                \"CODIGO\": \"100\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Mueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"200\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Inmueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"300\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en el Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"400\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en Otros Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"500\",\r\n                \"DESCRIPCION\": \"Garantia Prendaria\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"600\",\r\n                \"DESCRIPCION\": \"Otras Garantias\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"700\",\r\n                \"DESCRIPCION\": \"SIN GARANTIAS\"\r\n            }\r\n        ]\r\n    }\r\n    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO MONEDAS                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getMonedaCatalogo() {\r\n\r\n        try {\r\n            let params = {\r\n                catalog_name: 'MONEDA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                       Api para obtener todos las sucursales o agencias catalogo                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSucursalesCatalogo() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUCURSAL',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Tipo de Limites de Credito\r\n    async getTypeOfCreditLimitsCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'LIMIT REFERENCE',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Aseguradoras\r\n    async getInsurersCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'ASEGURADORAS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Marcas de Auto\r\n    async getCarBrandCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'MARCA DE AUTOS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Modelos de Auto\r\n    async getCarModelCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'MODELO DE AUTO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Corredoras\r\n    async getBrokersCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'BROKER',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Fiduciaria\r\n    async getTrusteeCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'FIDUCIARIAS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Producto\r\n    async getProductCatalog() {\r\n        try {\r\n            // return json;\r\n            /*let params = {\r\n                catalog_name: 'SUBPRODUCTO',\r\n                parent_catalog_name: \"3200\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            */\r\n\r\n            var result = {\r\n                \"catalog\": {\r\n                    \"type\": \"TIPO DE PRODUCTO\",\r\n                    \"records\": [\r\n                        {\r\n                            \"CODIGO\": \"3200\",\r\n                            \"DESCRIPCION\": \"Comercial\"\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - SubProducto\r\n    async getSubProductCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUBPRODUCTO',\r\n                parent_catalog_name: \"3200\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Categorias\r\n    async getCategoriesCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'CATEGORIA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Tipo de poliza\r\n    async getPolicyTypeCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'TIPO POLIZA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Sub tipo de Garantia\r\n    async getSubTypeWarrantyCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUB TIPO GARANTIA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Clases de Auto\r\n    async getAutoClassCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'CLASE AUTO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Avaluadora\r\n    async getAppraiserCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'AVALUADORA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Tipo de Desembolso\r\n    async getTipoDesembolsoCatalogo() {\r\n        try {\r\n            /*let params = {\r\n                catalog_name: 'CIUDAD',\r\n                parent_catalog_name: provincia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)*/\r\n\r\n            var result = {\r\n                \"catalog\": {\r\n                    \"type\": \"Tipo Desembolso\",\r\n                    \"records\": [\r\n                        {\r\n                            \"CODIGO\": \"100\",\r\n                            \"DESCRIPCION\": \"Bajo Linea\"\r\n                        },\r\n                        {\r\n                            \"CODIGO\": \"200\",\r\n                            \"DESCRIPCION\": \"Comercial\"\r\n                        },\r\n                    ]\r\n                }\r\n            }\r\n\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    //CATALOGO - Fuentes de Ventas\r\n    async getSourceSalesCatalogo() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SALE INFORMATION',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    //CATALOGO - Autonomias\r\n    async getAutonomiaCatalogo() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'AUTONOMIAS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    //CATALOGO - Authority\r\n    async getAuthorityTypeCatalogo() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'AUTH TYPE',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            await convertToUpperCasesData(result.catalog)\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /*------------------------------------------------------------------------------------*/\r\n    ///v1/loans/details/informations\r\n    //Retorna las facilidades de un cliente ... partyId -> numero del cliente en T24\r\n    //getFacilidades\r\n\r\n    async getFacilitiesByTransaction(transactId) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = [];\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getFacilities(debtors[i].customerNumberT24);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        dataResult.forEach(function (item) {\r\n                            item[\"debtorName\"] = debtors[i].typePerson === \"2\" ? debtors[i].name : (debtors[i].name + \" \" + debtors[i].name2 + \" \" + debtors[i].lastName + \" \" + debtors[i].lastName2)\r\n                            item[\"debtorId\"] = debtors[i].personId;\r\n                            result.push(item);\r\n                        });\r\n                    }\r\n                }\r\n                catch (err) { }\r\n                try {\r\n                    var dataResult = await this.getCreditCard(debtors[i].customerNumberT24);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        dataResult.forEach(function (item) {\r\n                            item[\"debtorName\"] = debtors[i].typePerson === \"2\" ? debtors[i].name : (debtors[i].name + \" \" + debtors[i].name2 + \" \" + debtors[i].lastName + \" \" + debtors[i].lastName2)\r\n                            item[\"debtorId\"] = debtors[i].personId;\r\n                            result.push(item);\r\n                        });\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getAllTermDebtsByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n    async getFacilities(partyId) {\r\n        try {\r\n\r\n            const currencyData = new Currency();\r\n\r\n            if (partyId.length <= 0) {\r\n                return undefined;\r\n            }\r\n\r\n            var dataResult = [];\r\n\r\n            ////// Credit - Cortos Plazos\r\n            try {\r\n                var params = { PartyId: partyId }\r\n                var data = qs.stringify(params);\r\n\r\n                //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \r\n                //servicio retorna las cuentas del cliente\r\n                var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n\r\n                //var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\r\n\r\n                if (Array.isArray(result.Party.PartyInfo.CreditLine)) {\r\n\r\n                    result.Party.PartyInfo.CreditLine.forEach((item) => {\r\n                        try {\r\n                            /*\r\n                            {\r\n                        \"AvailableAmt\": {\r\n                            \"Amt\": \"75,000.00\"\r\n                        },\r\n                        \"CreditLineId\": \"800048231.0010000.01\",\r\n                        \"CreditLineNum\": \"01\",\r\n                        \"CreditType\": {\r\n                            \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                        },\r\n                        \"CurCode\": \"USD\",\r\n                        \"IntRateType\": {\r\n                            \"Desc\": \"Fixed\"\r\n                        },\r\n                        \"OnlineAmt\": {\r\n                            \"Amt\": \"125000.00\"\r\n                        },\r\n                        \"PendingAmt\": {\r\n                            \"Amt\": \"50,000.00\"\r\n                        },\r\n                        \"Rating\": \"01\",\r\n                        \"SecuredAmt\": {\r\n                            \"Amt\": \"0.00\"\r\n                        }\r\n                    }\r\n                            */\r\n\r\n                            if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                                //item.AvailableAmt.Amt\r\n                                var deudas = { debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approved: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                                //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                                dataResult.push({\r\n                                    \"facilityType\": deudas.facilityType,\r\n                                    \"approvedAmount\": deudas.approved,\r\n                                    \"approvedDate\": deudas.startDate,\r\n                                    \"actualBalance\": deudas.variation,\r\n                                    \"debtorName\": \"\",\r\n                                    \"AcctId\": \"\",\r\n                                });\r\n                            }\r\n                        }\r\n                        catch (err) { }\r\n                    })\r\n                }\r\n                else {\r\n                    // myVarToTest is not an array\r\n                    //Armamos la data a mostrar en pantalla\r\n                    var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                    try {\r\n                        if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                            var deudas = { debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approved: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                            //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                            dataResult.push({\r\n                                \"facilityType\": deudas.facilityType, \"approvedAmount\": deudas.approved,\r\n                                \"approvedDate\": deudas.startDate, \"actualBalance\": deudas.balance,\r\n                                \"debtorName\": \"\",\r\n                                \"AcctId\": \"\",\r\n                            });\r\n                        }\r\n                    }\r\n                    catch (err) { }\r\n                }\r\n            }\r\n            catch (err) { }\r\n\r\n            ////// loands - Cortos y Largos Plazos\r\n            try {\r\n                let params = {\r\n                    PartyId: partyId\r\n                }\r\n                let data = qs.stringify(params);\r\n                var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n\r\n                if (Array.isArray(result.AcctLoans.AcctLoan)) {\r\n\r\n                    result.AcctLoans.AcctLoan.forEach((item) => {\r\n                        if (item.AcctKey !== null) {\r\n                            try {\r\n                                /*\r\n                                {\r\n                        \"Category\": \"01\",\r\n                        \"Desc\": \"340000071156\",\r\n                        \"ProductDesc\": \"Prestamo Comercia\",\r\n                        \"AcctOpeningInfo\": {\r\n                            \"InitialAmt\": {\r\n                                \"Amt\": \"120000.00\",\r\n                                \"CurCode\": \"USD\"\r\n                            },\r\n                            \"OpenDt\": \"2019-08-02\"\r\n                        },\r\n                        \"CreditAcctData\": {\r\n                            \"DueDt\": \"2028-07-05\",\r\n                            \"CreditAcctPmtInfo\": null\r\n                        },\r\n                        \"AcctKey\": {\r\n                            \"AcctId\": \"1020243542\"\r\n                        },\r\n                        \"AcctBal\": [\r\n                            {\r\n                                \"BalType\": \"Balance\",\r\n                                \"CurAmt\": {\r\n                                    \"Amt\": \"87245.92\"\r\n                                }\r\n                            }\r\n                        ],\r\n                        \"AcctMember\": [\r\n                            {\r\n                                \"PartyRole\": {\r\n                                    \"Cod\": \"TITULAR/DEUDOR\"\r\n                                },\r\n                                \"PartyName\": {\r\n                                    \"ShortName\": \"ASI DEVELOPMENT\"\r\n                                },\r\n                                \"PartyKey\": null\r\n                            }\r\n                        ]\r\n                    }\r\n                                */\r\n\r\n                                var deudas = { debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approved: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                                deudas.variation = deudas.approved - deudas.balance;\r\n                                dataResult.push({\r\n                                    \"facilityType\": deudas.facilityType, \"approvedAmount\": deudas.approved,\r\n                                    \"approvedDate\": deudas.startDate, \"actualBalance\": deudas.balance,\r\n                                    \"debtorName\": \"\",\r\n                                    \"AcctId\": item.AcctKey.AcctId,\r\n                                });\r\n                            }\r\n                            catch (err) { }\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    // myVarToTest is not an array\r\n                    //Armamos la data a mostrar en pantalla\r\n                    var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                    if (item.AcctKey !== null) {\r\n                        try {\r\n                            var deudas = { debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approved: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                            deudas.variation = deudas.approved - deudas.balance;\r\n                            dataResult.push({\r\n                                \"facilityType\": deudas.facilityType, \"approvedAmount\": deudas.approved,\r\n                                \"approvedDate\": deudas.startDate, \"actualBalance\": deudas.balance,\r\n                                \"debtorName\": \"\",\r\n                                \"AcctId\": item.AcctKey.AcctId,\r\n                            });\r\n                        }\r\n                        catch (err) { }\r\n                    }\r\n\r\n                }\r\n            }\r\n            catch (err) { }\r\n\r\n\r\n            console.log(\"getFacilities\", dataResult)\r\n            return dataResult;\r\n        }\r\n        catch (err) { console.error(err) }\r\n        return undefined;\r\n    }\r\n\r\n    //retorna los Clientes Relacionados se le pasa el Numero de Cliente de T24\r\n    async getRelatedClients(partyId) {\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: partyId\r\n        }\r\n\r\n        let data = qs.stringify(params);\r\n\r\n        var dataResult = [];\r\n\r\n        try {\r\n\r\n            //servicio retorna clientes relacionados\r\n            var result = await this.get(url.URL_CORE_COMPANIESRELATIONS + \"?\" + data);\r\n            if (result.error !== undefined) {\r\n                return result;\r\n            }\r\n\r\n            //Armamos la data a mostrar en pantalla\r\n            result.PartyPartyRels.PartyPartyRel.forEach((client) => {\r\n                try {\r\n                    var partyNumber = client.PartyPartyRelInfo.PartyRef[0].RelPartyRef[0].PartyKey[0].PartyId;\r\n                    if (partyNumber !== undefined && partyNumber !== null && partyNumber.length > 0) {\r\n                        dataResult.push(partyNumber);\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            });\r\n        }\r\n        catch (err) { }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    //ExposicionCorporativa se le pasa el Numero de Cliente de T24\r\n    async getCorporateExhibition(transactId) {\r\n\r\n        const currencyData = new Currency();\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors === null || debtors === undefined) {\r\n            return undefined;\r\n        }\r\n\r\n        var dataResult = [];\r\n        var longTerm = { name: \"Facilidades Largo Plazo\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var shortTerm = { name: \"Facilidades Corto Plazo\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var totalTerm = { name: \"Total de Facilidades\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var pledged = { name: \"Monto Pignorado\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var netExposition = { name: \"Exposicion Neta\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n\r\n        ////// Credit - Cortos Plazos\r\n        for (var i = 0; i < debtors.length; i++) {\r\n            var partyId = debtors[i].customerNumberT24;\r\n            if (partyId.length > 0) {\r\n                try {\r\n                    var params = { PartyId: partyId }\r\n                    var data = qs.stringify(params);\r\n\r\n                    //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \r\n                    //servicio retorna las cuentas del cliente\r\n                    var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n                    if (result.error !== undefined) {\r\n                        return result;\r\n                    }\r\n                    //var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\r\n\r\n                    if (Array.isArray(result.Party.PartyInfo.CreditLine)) {\r\n\r\n                        result.Party.PartyInfo.CreditLine.forEach((item) => {\r\n                            try {\r\n                                /*\r\n                                {\r\n                            \"AvailableAmt\": {\r\n                                \"Amt\": \"75,000.00\"\r\n                            },\r\n                            \"CreditLineId\": \"800048231.0010000.01\",\r\n                            \"CreditLineNum\": \"01\",\r\n                            \"CreditType\": {\r\n                                \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                            },\r\n                            \"CurCode\": \"USD\",\r\n                            \"IntRateType\": {\r\n                                \"Desc\": \"Fixed\"\r\n                            },\r\n                            \"OnlineAmt\": {\r\n                                \"Amt\": \"125000.00\"\r\n                            },\r\n                            \"PendingAmt\": {\r\n                                \"Amt\": \"50,000.00\"\r\n                            },\r\n                            \"Rating\": \"01\",\r\n                            \"SecuredAmt\": {\r\n                                \"Amt\": \"0.00\"\r\n                            }\r\n                        }\r\n                                */\r\n\r\n                                if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                                    var deudas = { debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approved: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                                    //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                                    if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                        //deudas.debtype=\"long\";     \r\n                                        longTerm.approved += Number(deudas.approved);\r\n                                        longTerm.balance += Number(deudas.variation);\r\n                                    }\r\n                                    else {\r\n                                        shortTerm.approved += Number(deudas.approved);\r\n                                        shortTerm.balance += Number(deudas.variation);\r\n                                    }\r\n                                }\r\n                            }\r\n                            catch (err) { }\r\n                        })\r\n                    }\r\n                    else {\r\n                        // myVarToTest is not an array\r\n                        //Armamos la data a mostrar en pantalla\r\n                        var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                        try {\r\n                            if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                                var deudas = { debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approved: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                                //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                                if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                    //deudas.debtype=\"long\";     \r\n                                    longTerm.approved += Number(deudas.approved);\r\n                                    longTerm.balance += Number(deudas.variation);\r\n                                }\r\n                                else {\r\n                                    shortTerm.approved += Number(deudas.approved);\r\n                                    shortTerm.balance += Number(deudas.variation);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) { }\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n\r\n        ////// Tarjeta de Creditos - Cortos Plazos\r\n        for (var i = 0; i < debtors.length; i++) {\r\n            try {\r\n                var result = await this.getCreditCard(debtors[i].customerNumberT24);\r\n                if (result.error !== undefined) {\r\n                    return result;\r\n                }\r\n                /*{\r\n                    \"facilityType\": item.CardInfo.Desc, \r\n                    \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                    \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \r\n                    \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                    \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                    \"AcctId\": \"\",\r\n                } */\r\n\r\n                result.forEach(item => {\r\n                    shortTerm.approved += Number(item.approvedAmount);\r\n                    shortTerm.balance += Number(item.actualBalance);\r\n                })\r\n            }\r\n            catch (err) { }\r\n        }\r\n\r\n        ////// loands - Cortos y Largos Plazos\r\n        for (var i = 0; i < debtors.length; i++) {\r\n            var partyId = debtors[i].customerNumberT24;\r\n            if (partyId.length > 0) {\r\n                try {\r\n                    let params = {\r\n                        PartyId: partyId\r\n                    }\r\n                    let data = qs.stringify(params);\r\n                    var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n                    if (result.error !== undefined) {\r\n                        return result;\r\n                    }\r\n\r\n                    if (Array.isArray(result.AcctLoans.AcctLoan)) {\r\n\r\n                        result.AcctLoans.AcctLoan.forEach((item) => {\r\n                            if (item.AcctKey !== null) {\r\n                                try {\r\n                                    /*\r\n                                    {\r\n                            \"Category\": \"01\",\r\n                            \"Desc\": \"340000071156\",\r\n                            \"ProductDesc\": \"Prestamo Comercia\",\r\n                            \"AcctOpeningInfo\": {\r\n                                \"InitialAmt\": {\r\n                                    \"Amt\": \"120000.00\",\r\n                                    \"CurCode\": \"USD\"\r\n                                },\r\n                                \"OpenDt\": \"2019-08-02\"\r\n                            },\r\n                            \"CreditAcctData\": {\r\n                                \"DueDt\": \"2028-07-05\",\r\n                                \"CreditAcctPmtInfo\": null\r\n                            },\r\n                            \"AcctKey\": {\r\n                                \"AcctId\": \"1020243542\"\r\n                            },\r\n                            \"AcctBal\": [\r\n                                {\r\n                                    \"BalType\": \"Balance\",\r\n                                    \"CurAmt\": {\r\n                                        \"Amt\": \"87245.92\"\r\n                                    }\r\n                                }\r\n                            ],\r\n                            \"AcctMember\": [\r\n                                {\r\n                                    \"PartyRole\": {\r\n                                        \"Cod\": \"TITULAR/DEUDOR\"\r\n                                    },\r\n                                    \"PartyName\": {\r\n                                        \"ShortName\": \"ASI DEVELOPMENT\"\r\n                                    },\r\n                                    \"PartyKey\": null\r\n                                }\r\n                            ]\r\n                        }\r\n                                    */\r\n\r\n                                    var deudas = { debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approved: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                                    deudas.variation = deudas.approved - deudas.balance;\r\n                                    if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                        //deudas.debtype=\"long\";     \r\n                                        longTerm.approved += Number(deudas.approved);\r\n                                        longTerm.balance += Number(deudas.balance);\r\n                                    }\r\n                                    else {\r\n                                        shortTerm.approved += Number(deudas.approved);\r\n                                        shortTerm.balance += Number(deudas.balance);\r\n                                    }\r\n                                }\r\n                                catch (err) { }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        // myVarToTest is not an array\r\n                        //Armamos la data a mostrar en pantalla\r\n                        var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                        if (item.AcctKey !== null) {\r\n                            try {\r\n                                var deudas = { debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approved: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                                deudas.variation = deudas.approved - deudas.balance;\r\n                                if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                    //deudas.debtype=\"long\";     \r\n                                    longTerm.approved += Number(deudas.approved);\r\n                                    longTerm.balance += Number(deudas.balance);\r\n                                }\r\n                                else {\r\n                                    shortTerm.approved += Number(deudas.approved);\r\n                                    shortTerm.balance += Number(deudas.balance);\r\n                                }\r\n                            }\r\n                            catch (err) { }\r\n                        }\r\n\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n\r\n        longTerm.variation = Number(longTerm.approved) - Number(longTerm.balance);\r\n        shortTerm.variation = Number(shortTerm.approved) - Number(shortTerm.balance);\r\n\r\n        dataResult.push(longTerm);\r\n        dataResult.push(shortTerm);\r\n\r\n        totalTerm.approved = Number(shortTerm.approved) + Number(longTerm.approved);\r\n        totalTerm.balance = Number(shortTerm.balance) + Number(longTerm.balance);\r\n        totalTerm.variation = Number(totalTerm.approved) - Number(totalTerm.balance);\r\n\r\n        dataResult.push(totalTerm);\r\n\r\n        //servicio retorna Pignorados\r\n        for (var i = 0; i < debtors.length; i++) {\r\n            var partyId = debtors[i].customerNumberT24;\r\n            if (partyId.length > 0) {\r\n                let params = {\r\n                    PartyId: partyId\r\n                }\r\n                let data = qs.stringify(params);\r\n                try {\r\n                    var result = await this.get(url.URL_CORE_PIGNORADO + \"?\" + data);\r\n                    if (result.error !== undefined) {\r\n                        return result;\r\n                    }\r\n                    //Armamos la data a mostrar en pantalla\r\n                    result.Collaterals.CollateralInfo.map(function (item, i) {\r\n                        if (item.AcctKey.AcctReference !== null && item.Collateral.InsuranceInfo.Status === \"CUR\") {\r\n                            pledged.approved += Number(item.Collateral.CollateralAmt.Amt);\r\n                            pledged.balance = pledged.approved;\r\n                        }\r\n                    })\r\n                    pledged.variation = Number(pledged.approved) - Number(pledged.balance);\r\n\r\n                }\r\n                catch (err) {\r\n                    console.error(\"URL_CORE_PIGNORADO\", err);\r\n                }\r\n            }\r\n        }\r\n        dataResult.push(pledged);\r\n\r\n        if (dataResult.length > 0) {\r\n            netExposition.approved = Number(totalTerm.approved) - Number(pledged.approved);\r\n            netExposition.proposal = Number(totalTerm.proposal) - Number(pledged.proposal);\r\n            netExposition.variation = Number(totalTerm.variation) - Number(pledged.variation);\r\n\r\n            dataResult.push(netExposition);\r\n        }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    //ExposicionCorporativa se le pasa el Numero de Cliente de T24\r\n    async getCorporateExhibitionByClients(partyId) {\r\n\r\n        const currencyData = new Currency();\r\n        var dataResult = [];\r\n\r\n        var longTerm = { name: \"Facilidades Largo Plazo\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var shortTerm = { name: \"Facilidades Corto Plazo\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var totalTerm = { name: \"Total de Facilidades\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var pledged = { name: \"Monto Pignorado\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n        var netExposition = { name: \"Exposicion Neta\", approved: 0, balance: 0, proposal: 0, variation: 0 };\r\n\r\n        ////// Credit - Cortos Plazos       \r\n        if (partyId.length > 0) {\r\n            try {\r\n                var params = { PartyId: partyId }\r\n                var data = qs.stringify(params);\r\n\r\n                //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \r\n                //servicio retorna las cuentas del cliente\r\n                var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n                if (result.error !== undefined) {\r\n                    return result;\r\n                }\r\n                //var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\r\n\r\n                if (Array.isArray(result.Party.PartyInfo.CreditLine)) {\r\n\r\n                    result.Party.PartyInfo.CreditLine.forEach((item) => {\r\n                        try {\r\n                            /*\r\n                            {\r\n                        \"AvailableAmt\": {\r\n                            \"Amt\": \"75,000.00\"\r\n                        },\r\n                        \"CreditLineId\": \"800048231.0010000.01\",\r\n                        \"CreditLineNum\": \"01\",\r\n                        \"CreditType\": {\r\n                            \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                        },\r\n                        \"CurCode\": \"USD\",\r\n                        \"IntRateType\": {\r\n                            \"Desc\": \"Fixed\"\r\n                        },\r\n                        \"OnlineAmt\": {\r\n                            \"Amt\": \"125000.00\"\r\n                        },\r\n                        \"PendingAmt\": {\r\n                            \"Amt\": \"50,000.00\"\r\n                        },\r\n                        \"Rating\": \"01\",\r\n                        \"SecuredAmt\": {\r\n                            \"Amt\": \"0.00\"\r\n                        }\r\n                    }\r\n                            */\r\n\r\n                            if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                                var deudas = { debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approved: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                                //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                                if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                    //deudas.debtype=\"long\";     \r\n                                    longTerm.approved += Number(deudas.approved);\r\n                                    longTerm.balance += Number(deudas.variation);\r\n                                }\r\n                                else {\r\n                                    shortTerm.approved += Number(deudas.approved);\r\n                                    shortTerm.balance += Number(deudas.variation);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) { }\r\n                    })\r\n                }\r\n                else {\r\n                    // myVarToTest is not an array\r\n                    //Armamos la data a mostrar en pantalla\r\n                    var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                    try {\r\n                        if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                            var deudas = { debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approved: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                            //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                            if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                //deudas.debtype=\"long\";     \r\n                                longTerm.approved += Number(deudas.approved);\r\n                                longTerm.balance += Number(deudas.variation);\r\n                            }\r\n                            else {\r\n                                shortTerm.approved += Number(deudas.approved);\r\n                                shortTerm.balance += Number(deudas.variation);\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (err) { }\r\n                }\r\n            }\r\n            catch (err) { }\r\n        }\r\n\r\n        ////// Tarjeta de Creditos - Cortos Plazos\r\n        if (partyId.length > 0) {\r\n            try {\r\n                var result = await this.getCreditCard(partyId);\r\n                if (result.error !== undefined) {\r\n                    return result;\r\n                }\r\n                /*{\r\n                    \"facilityType\": item.CardInfo.Desc, \r\n                    \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                    \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \r\n                    \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                    \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                    \"AcctId\": \"\",\r\n                } */\r\n\r\n                result.forEach(item => {\r\n                    shortTerm.approved += Number(item.approvedAmount);\r\n                    shortTerm.balance += Number(item.actualBalance);\r\n                })\r\n            }\r\n            catch (err) { }\r\n        }\r\n\r\n        ////// loands - Cortos y Largos Plazos\r\n        if (partyId.length > 0) {\r\n            try {\r\n                let params = {\r\n                    PartyId: partyId\r\n                }\r\n                let data = qs.stringify(params);\r\n                var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n                if (result.error !== undefined) {\r\n                    return result;\r\n                }\r\n\r\n                if (Array.isArray(result.AcctLoans.AcctLoan)) {\r\n\r\n                    result.AcctLoans.AcctLoan.forEach((item) => {\r\n                        if (item.AcctKey !== null) {\r\n                            try {\r\n                                /*\r\n                                {\r\n                        \"Category\": \"01\",\r\n                        \"Desc\": \"340000071156\",\r\n                        \"ProductDesc\": \"Prestamo Comercia\",\r\n                        \"AcctOpeningInfo\": {\r\n                            \"InitialAmt\": {\r\n                                \"Amt\": \"120000.00\",\r\n                                \"CurCode\": \"USD\"\r\n                            },\r\n                            \"OpenDt\": \"2019-08-02\"\r\n                        },\r\n                        \"CreditAcctData\": {\r\n                            \"DueDt\": \"2028-07-05\",\r\n                            \"CreditAcctPmtInfo\": null\r\n                        },\r\n                        \"AcctKey\": {\r\n                            \"AcctId\": \"1020243542\"\r\n                        },\r\n                        \"AcctBal\": [\r\n                            {\r\n                                \"BalType\": \"Balance\",\r\n                                \"CurAmt\": {\r\n                                    \"Amt\": \"87245.92\"\r\n                                }\r\n                            }\r\n                        ],\r\n                        \"AcctMember\": [\r\n                            {\r\n                                \"PartyRole\": {\r\n                                    \"Cod\": \"TITULAR/DEUDOR\"\r\n                                },\r\n                                \"PartyName\": {\r\n                                    \"ShortName\": \"ASI DEVELOPMENT\"\r\n                                },\r\n                                \"PartyKey\": null\r\n                            }\r\n                        ]\r\n                    }\r\n                                */\r\n\r\n                                var deudas = { debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approved: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                                deudas.variation = deudas.approved - deudas.balance;\r\n                                if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                    //deudas.debtype=\"long\";     \r\n                                    longTerm.approved += Number(deudas.approved);\r\n                                    longTerm.balance += Number(deudas.balance);\r\n                                }\r\n                                else {\r\n                                    shortTerm.approved += Number(deudas.approved);\r\n                                    shortTerm.balance += Number(deudas.balance);\r\n                                }\r\n                            }\r\n                            catch (err) { }\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    // myVarToTest is not an array\r\n                    //Armamos la data a mostrar en pantalla\r\n                    var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                    if (item.AcctKey !== null) {\r\n                        try {\r\n                            var deudas = { debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approved: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                            deudas.variation = deudas.approved - deudas.balance;\r\n                            if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                //deudas.debtype=\"long\";     \r\n                                longTerm.approved += Number(deudas.approved);\r\n                                longTerm.balance += Number(deudas.balance);\r\n                            }\r\n                            else {\r\n                                shortTerm.approved += Number(deudas.approved);\r\n                                shortTerm.balance += Number(deudas.balance);\r\n                            }\r\n                        }\r\n                        catch (err) { }\r\n                    }\r\n\r\n                }\r\n            }\r\n            catch (err) { }\r\n        }\r\n\r\n        //servicio retorna Pignorados\r\n        if (partyId.length > 0) {\r\n            let params = {\r\n                PartyId: partyId\r\n            }\r\n            let data = qs.stringify(params);\r\n            try {\r\n                var result = await this.get(url.URL_CORE_PIGNORADO + \"?\" + data);\r\n                if (result.error !== undefined) {\r\n                    return result;\r\n                }\r\n                //Armamos la data a mostrar en pantalla\r\n                result.Collaterals.CollateralInfo.map(function (item, i) {\r\n                    if (item.AcctKey.AcctReference !== null && item.Collateral.InsuranceInfo.Status === \"CUR\") {\r\n                        pledged.approved += Number(item.Collateral.CollateralAmt.Amt);\r\n                        pledged.balance = pledged.approved;\r\n                    }\r\n                })\r\n                pledged.variation = Number(pledged.approved) - Number(pledged.balance);\r\n            }\r\n            catch (err) {\r\n                console.error(\"URL_CORE_PIGNORADO\", err);\r\n            }\r\n        }\r\n\r\n        longTerm.variation = Number(longTerm.approved) - Number(longTerm.balance);\r\n        shortTerm.variation = Number(shortTerm.approved) - Number(shortTerm.balance);\r\n\r\n        dataResult.push(longTerm);\r\n        dataResult.push(shortTerm);\r\n\r\n        totalTerm.approved = Number(shortTerm.approved) + Number(longTerm.approved);\r\n        totalTerm.balance = Number(shortTerm.balance) + Number(longTerm.balance);\r\n        totalTerm.variation = Number(totalTerm.approved) - Number(totalTerm.balance);\r\n\r\n        netExposition.approved = Number(totalTerm.approved) - Number(pledged.approved);\r\n        netExposition.proposal = Number(totalTerm.proposal) - Number(pledged.proposal);\r\n        netExposition.variation = Number(totalTerm.variation) - Number(pledged.variation);\r\n\r\n        dataResult.push(totalTerm);\r\n        dataResult.push(pledged);\r\n        dataResult.push(netExposition);\r\n\r\n        return dataResult;\r\n    }\r\n\r\n\r\n    //ExposicionCorporativa se le pasa el Numero de Cliente de T24\r\n    /*async getCorporateExhibitionByClients(partyId) {\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let clients = await this.getRelatedClients(partyId);\r\n        if (clients.error !== undefined) {\r\n            return clients;\r\n        }\r\n\r\n        var dataResult = [];\r\n        for (var i = 0; i < clients.length; i++) {\r\n            let result = await this.getCorporateExhibition(clients[i]);\r\n            if (result.error !== undefined) {\r\n                return result;\r\n            }\r\n\r\n            if (result !== null && result.length > 0) {\r\n                dataResult.push({ clientId: \"Cliente: \" + clients[i], data: result });\r\n            }\r\n        }\r\n        return dataResult;\r\n    }\r\n    */\r\n\r\n    //Deudas a Corto y Largo Plazo --- APC, Credit, Loand del Tramite Completo    \r\n    async getAllTermDebtsByTransaction(transactId) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = { longTermresult: [], shortTermresult: [] };\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getAllTermDebts(debtors[i].customerNumberT24, debtors[i].clientDocId, debtors[i].idType);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        dataResult.longTermresult.forEach(function (item) {\r\n                            result.longTermresult.push(item);\r\n                        });\r\n                        dataResult.shortTermresult.forEach(function (item) {\r\n                            result.shortTermresult.push(item);\r\n                        });\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    //Deudas a Corto y Largo Plazo --- APC, Credit, Loand\r\n    async getAllTermDebts(partyId, identification, idType) {\r\n\r\n        const currencyData = new Currency();\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        if (identification.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        var dataResult = { longTermresult: [], shortTermresult: [] };\r\n\r\n        ////// APC\r\n        try {\r\n            let typeofId = \"Cedula\";\r\n            switch (idType) {\r\n                case \"CED\": {\r\n                    typeofId = \"Cedula\";\r\n                    break;\r\n                }\r\n                case \"RUC\": {\r\n                    typeofId = \"RUC\";\r\n                    break;\r\n                }\r\n                case \"PAS\": {\r\n                    typeofId = \"Pasaporte\";\r\n                    break;\r\n                }\r\n            }\r\n            var tmpidentification = \"\";\r\n            identification.split('-').map((str) => {\r\n                if (str.startsWith(\"0\")) {\r\n                    tmpidentification += str.replace(/^0+/, '') + \"-\";\r\n                }\r\n                else {\r\n                    tmpidentification += str + \"-\";\r\n                }\r\n            })\r\n            if (tmpidentification.startsWith(\"-\")) {\r\n                tmpidentification = tmpidentification.substring(1);\r\n            }\r\n\r\n            identification = tmpidentification.substring(0, tmpidentification.length - 1);\r\n            var params = {\r\n                \"ConsultarAPC\": {\r\n                    \"Model\": {\r\n                        \"EsPrueba\": 0,\r\n                        \"ForzarBusqueda\": 0,\r\n                        \"IdentificacionConsulta\": identification,//\"8-773-1899\",\r\n                        \"PasswordAPC\": \"Banesco19.\",\r\n                        \"TipoCliente\": typeofId,\r\n                        \"UltimusProcess\": 7,\r\n                        \"UsuarioAPC\": \"WTIBANESCO001\"\r\n                    }\r\n                }\r\n            }\r\n\r\n            //servicio retorna la info de APC del cliente\r\n            const result = await this.post(url.URL_CORE_APCINFO, params);\r\n\r\n            if (Array.isArray(result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)) {\r\n                // myVatToTest is an array\r\n                //Armamos la data a mostrar en pantalla\r\n                result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function (item, i) {\r\n                    try {\r\n                        if (item.dc_nom_asoc.toUpperCase().indexOf('BANESCO') < 0 && item.dc_descr_corta_rela.toUpperCase().indexOf('SERVICIOS') < 0) {\r\n                            console.log(\"ServicioAPC\", item.dc_nom_asoc)\r\n                            var deudas = { paymentHistory: item.dc_historia, debtype: \"short\", facilityType: item.dc_descr_corta_rela, bank: item.dc_nom_asoc, balance: Number(currencyData.getRealValue(item.dc_saldo_actual)), approvedAmount: Number(currencyData.getRealValue(item.dc_monto_original)), variation: 0, startDate: item.dc_fec_inicio_rel, endDate: item.dc_fec_fin_rel }\r\n                            deudas.variation = deudas.approvedAmount - deudas.balance;\r\n                            if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1 && item.dc_descr_corta_rela.toUpperCase().indexOf('TARJ') < 0) {\r\n                                deudas.debtype = \"long\";\r\n                                dataResult.longTermresult.push(deudas)\r\n                            }\r\n                            else {\r\n                                dataResult.shortTermresult.push(deudas)\r\n                            }\r\n                            deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                            deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                        }\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n                    if (item.dc_nom_asoc.toUpperCase().indexOf('BANESCO') < 0 && item.dc_descr_corta_rela.toUpperCase().indexOf('SERVICIOS') < 0) {\r\n                        var deudas = { paymentHistory: item.dc_historia, debtype: \"short\", facilityType: item.dc_descr_corta_rela, bank: item.dc_nom_asoc, balance: Number(currencyData.getRealValue(item.dc_saldo_actual)), approvedAmount: Number(currencyData.getRealValue(item.dc_monto_original)), variation: 0, startDate: item.dc_fec_inicio_rel, endDate: item.dc_fec_fin_rel }\r\n                        deudas.variation = deudas.approvedAmount - deudas.balance;\r\n                        if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1 && item.dc_descr_corta_rela.toUpperCase().indexOf('TARJ') < 0) {\r\n                            deudas.debtype = \"long\";\r\n                            dataResult.longTermresult.push(deudas)\r\n                        }\r\n                        else {\r\n                            dataResult.shortTermresult.push(deudas)\r\n                        }\r\n                        deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                        deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        ////// Credit - Cortos Plazos\r\n        try {\r\n            var params = { PartyId: partyId }\r\n            var data = qs.stringify(params);\r\n\r\n            //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \r\n            //servicio retorna las cuentas del cliente\r\n            var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n\r\n            if (Array.isArray(result.Party.PartyInfo.CreditLine)) {\r\n\r\n                result.Party.PartyInfo.CreditLine.forEach((item) => {\r\n                    try {\r\n                        /*\r\n                        {\r\n                    \"AvailableAmt\": {\r\n                        \"Amt\": \"75,000.00\"\r\n                    },\r\n                    \"CreditLineId\": \"800048231.0010000.01\",\r\n                    \"CreditLineNum\": \"01\",\r\n                    \"CreditType\": {\r\n                        \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                    },\r\n                    \"CurCode\": \"USD\",\r\n                    \"IntRateType\": {\r\n                        \"Desc\": \"Fixed\"\r\n                    },\r\n                    \"OnlineAmt\": {\r\n                        \"Amt\": \"125000.00\"\r\n                    },\r\n                    \"PendingAmt\": {\r\n                        \"Amt\": \"50,000.00\"\r\n                    },\r\n                    \"Rating\": \"01\",\r\n                    \"SecuredAmt\": {\r\n                        \"Amt\": \"0.00\"\r\n                    }\r\n                }\r\n                        */\r\n                        var deudas = { paymentHistory: \"\", debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approvedAmount: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                        //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n\r\n                        if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                            if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                deudas.debtype = \"long\";\r\n                                dataResult.longTermresult.push(deudas)\r\n                            }\r\n                            else {\r\n                                dataResult.shortTermresult.push(deudas)\r\n                            }\r\n\r\n                            deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                            deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                        }\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n\r\n                    var deudas = { paymentHistory: \"\", debtype: \"short\", facilityType: item.CreditType.Desc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.PendingAmt.Amt)), approvedAmount: Number(currencyData.getRealValue(item.OnlineAmt.Amt)), variation: Number(currencyData.getRealValue(item.PendingAmt.Amt)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                    //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                    if ((item.CreditLineId.split(\".\")[1]).replace(/0/g, '').length < 2) {\r\n                        if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                            deudas.debtype = \"long\";\r\n                            dataResult.longTermresult.push(deudas)\r\n                        }\r\n                        else {\r\n                            dataResult.shortTermresult.push(deudas)\r\n                        }\r\n\r\n                        deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                        deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        /// Tarjetas de Creditos\r\n        try {\r\n            var result = await this.getCreditCard(partyId);\r\n            if (Array.isArray(result)) {\r\n\r\n                /*{\r\n                                        \"facilityType\": item.CardInfo.Desc, \r\n                                        \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                                        \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \r\n                                        \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                                        \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                                        \"AcctId\": \"\",\r\n                                    } */\r\n                result.forEach((item) => {\r\n                    try {\r\n                        var deudas = { paymentHistory: \"\", debtype: \"short\", facilityType: item.facilityType, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.actualBalance)), approvedAmount: Number(currencyData.getRealValue(item.approvedAmount)), variation: Number(currencyData.getRealValue(0)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                        //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n\r\n                        dataResult.shortTermresult.push(deudas)\r\n                        deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                        deudas.startDate = moment(item.approvedDate).format(\"YYYY-MM-DD\")\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result;\r\n                try {\r\n\r\n                    var deudas = { paymentHistory: \"\", debtype: \"short\", facilityType: item.facilityType, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.actualBalance)), approvedAmount: Number(currencyData.getRealValue(item.approvedAmount)), variation: Number(currencyData.getRealValue(0)), startDate: moment().format(\"YYYY-MM-DD\"), endDate: moment().format(\"YYYY-MM-DD\") }\r\n                    //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n\r\n                    dataResult.shortTermresult.push(deudas)\r\n                    deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                    deudas.startDate = moment(item.approvedDate).format(\"YYYY-MM-DD\")\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        ////// loands - Cortos y Largos Plazos\r\n        try {\r\n            let params = {\r\n                PartyId: partyId\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n            console.log(\"shortTermresultLoands\", result);\r\n\r\n            if (Array.isArray(result.AcctLoans.AcctLoan)) {\r\n\r\n                result.AcctLoans.AcctLoan.forEach((item) => {\r\n                    if (item.AcctKey !== null) {\r\n                        try {\r\n                            /*\r\n                            {\r\n                    \"Category\": \"01\",\r\n                    \"Desc\": \"340000071156\",\r\n                    \"ProductDesc\": \"Prestamo Comercia\",\r\n                    \"AcctOpeningInfo\": {\r\n                        \"InitialAmt\": {\r\n                            \"Amt\": \"120000.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        },\r\n                        \"OpenDt\": \"2019-08-02\"\r\n                    },\r\n                    \"CreditAcctData\": {\r\n                        \"DueDt\": \"2028-07-05\",\r\n                        \"CreditAcctPmtInfo\": null\r\n                    },\r\n                    \"AcctKey\": {\r\n                        \"AcctId\": \"1020243542\"\r\n                    },\r\n                    \"AcctBal\": [\r\n                        {\r\n                            \"BalType\": \"Balance\",\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"87245.92\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"AcctMember\": [\r\n                        {\r\n                            \"PartyRole\": {\r\n                                \"Cod\": \"TITULAR/DEUDOR\"\r\n                            },\r\n                            \"PartyName\": {\r\n                                \"ShortName\": \"ASI DEVELOPMENT\"\r\n                            },\r\n                            \"PartyKey\": null\r\n                        }\r\n                    ]\r\n                }\r\n                            */\r\n\r\n                            var deudas = { paymentHistory: \"\", debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approvedAmount: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                            deudas.variation = deudas.approvedAmount - deudas.balance;\r\n                            if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                                deudas.debtype = \"long\";\r\n                                dataResult.longTermresult.push(deudas)\r\n                            }\r\n                            else {\r\n                                // dataResult.shortTermresult.push(deudas)                    \r\n                            }\r\n\r\n                            deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                            deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                        }\r\n                        catch (err) { }\r\n                    }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                if (item.AcctKey !== null) {\r\n                    try {\r\n\r\n                        var deudas = { paymentHistory: \"\", debtype: \"short\", facilityType: item.ProductDesc, bank: \"Banesco\", balance: Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)), approvedAmount: Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)), variation: 0, startDate: moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"), endDate: moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\") }\r\n                        deudas.variation = deudas.approvedAmount - deudas.balance;\r\n                        if (moment(deudas.endDate).diff(deudas.startDate, 'years') > 1) {\r\n                            deudas.debtype = \"long\";\r\n                            dataResult.longTermresult.push(deudas)\r\n                        }\r\n                        else {\r\n                            //dataResult.shortTermresult.push(deudas)                    \r\n                        }\r\n\r\n                        deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                        deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                    }\r\n                    catch (err) { }\r\n                }\r\n\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    //Tarjetas de Credito\r\n    async getCreditCardByTransaction(transactId) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = [];\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getCreditCard(debtors[i].customerNumberT24);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        dataResult.forEach(function (item) {\r\n                            result.push(item);\r\n                        });\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getCreditCardByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n    async getCreditCard(partyId) {\r\n\r\n        const currencyData = new Currency();\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        var data = {\r\n            \"readCardTDC_Rq\": {\r\n                \"MsgHdr\": {\r\n                    \"TransactionInfo\": {\r\n                        \"MsgUID\": \"F01F1A70-30E0-4478-B95F-987D78A10037\",\r\n                        \"ChannelId\": \"CC\",\r\n                        \"AgencyCode\": 5808,\r\n                        \"OrderDprt\": \"5808-001\",\r\n                        \"TransactionDate\": moment().format(\"YYYY-MM-DD\"),//\"2021-12-12\",\r\n                        \"TransactionTime\": \"12:12:12\"\r\n                    },\r\n                    \"ApplicationInfo\": {\r\n                        \"SourceApp\": \"ESB\",\r\n                        \"Channel\": \"WAY4\"\r\n                    }\r\n                },\r\n                \"Customer\": {\r\n                    \"Type\": \"Personal\",\r\n                    \"PersonInfo\": {\r\n                        \"Type\": \"Personal\",\r\n                        \"CustId\": partyId\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        var dataResult = [];\r\n\r\n        ////// Tarjeta de Creditos\r\n        try {\r\n\r\n            var result = await this.post(url.URL_CORE_CreditCard, data);\r\n            console.log(\"shortTermresultCredit\", result);\r\n\r\n            if (Array.isArray(result.readCardTDC_Rs.Customer.Product)) {\r\n\r\n                result.readCardTDC_Rs.Customer.Product.forEach((item) => {\r\n                    try {\r\n\r\n                        if ((item.CardInfo.Type === \"E\" && item.CardInfo.RelationType === \"Y\") || (item.CardInfo.Type === \"I\" && item.CardInfo.RelationType === \"Y\") || (item.CardInfo.Type === \"Y\" && item.CardInfo.RelationType === \"Y\")) {\r\n                            var approvedAmt = item.Statement.StatementInfo.find(x => x.Type === \"CR_LIMIT\");\r\n                            var balanceAmt = item.Statement.StatementInfo.find(x => x.Type === \"TOTAL_BALANCE\");\r\n\r\n                            dataResult.push({\r\n                                \"facilityType\": item.CardInfo.Desc,\r\n                                \"approvedAmount\": approvedAmt?.CurAmt ?? 0,\r\n                                \"approvedDate\": item.CardInfo.EndDt !== undefined ? item.CardInfo.EndDt : moment().format(\"YYYY-MM-DD\"),\r\n                                \"actualBalance\": balanceAmt?.CurAmt ?? 0,\r\n                                \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                                \"AcctId\": \"\",\r\n                            });\r\n                        }\r\n\r\n                        /* if(item.CardInfo.Desc.toUpperCase().indexOf('CREDITO') > 0){\r\n                             dataResult.push({\r\n                                 \"facilityType\": item.CardInfo.Desc, \"approvedAmount\": approvedAmt?.CurAmt??0,\r\n                                 \"approvedDate\": item.CardInfo.EndDt!==undefined?item.CardInfo.EndDt:moment().format(\"YYYY-MM-DD\"), \"actualBalance\":  balanceAmt?.CurAmt??0,\r\n                                 \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                                 \"AcctId\": \"\",\r\n                             });   \r\n                         } */\r\n\r\n                    }\r\n                    catch (err) { console.log(\"getCreditCard\", err); }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.readCardTDC_Rs.Customer.Product;\r\n                try {\r\n\r\n                    var approvedAmt = item.Statement.StatementInfo.find(x => x.Type === \"AVAILABLE\");\r\n                    var balanceAmt = item.Statement.StatementInfo.find(x => x.Type === \"TOTAL_BALANCE\");\r\n\r\n                    if (item.CardInfo.Desc.toUpperCase().indexOf('CREDITO') > 0) {\r\n                        dataResult.push({\r\n                            \"facilityType\": item.CardInfo.Desc,\r\n                            \"approvedAmount\": approvedAmt?.CurAmt ?? 0,\r\n                            \"approvedDate\": item.CardInfo.EndDt !== undefined ? item.CardInfo.EndDt : moment().format(\"YYYY-MM-DD\"),\r\n                            \"actualBalance\": balanceAmt?.CurAmt ?? 0,\r\n                            \"debtorName\": item.CardInfo.EmbossInfo.FirstName + \" \" + item.CardInfo.EmbossInfo.LastName,\r\n                            \"AcctId\": \"\",\r\n                        });\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                                 Retorna los balances por meses                                 */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getAverages(AcctReference) {\r\n        if (AcctReference.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            AcctReference: AcctReference\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     Obtenemos una lista de las importaciones que se generen                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getListaImportaciones(PartyId) {\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_IMPORTACIONES + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                 Obtenemos una lista de las exportaciones que se hayan generado                 */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getListaExportaciones(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_EXPORTACIONES + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                          Obtenemos los prestamos entrantes existentes                          */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamosEntrantes(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_INGOING + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                    Obtenemos una lista de todos los presstamos que ya salen                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamosSalientes(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_OUTOGOING + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*               Obtenemos la lista de creditos que existen en la actualidad activos              */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCreditosExistentes(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_CREDITOS + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                                        Creditos en linea                                       */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCreditosLine(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*     Nos devuelve todas las transacciones que ha realizado el usuario por un rango de fechas    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getTransactions(AcctId, EndDt, StartDt) {\r\n\r\n        if (AcctId.length <= 0 || EndDt.length <= 0 || StartDt.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        // ejemplo del dataField\r\n        // AcctId=1001553287&EndDt=2021-10-16T09:32:51&StartDt=2021-09-16T00:00:00\r\n        let params = {\r\n            AcctId: AcctId,\r\n            EndDt: EndDt,\r\n            StartDt: StartDt,\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                                  Obtenemos todos los prestamos                                 */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamos(PartyId) {\r\n\r\n        if (PartyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_PRESTAMOS + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*               Obtenemos toda la informacion del prestamos dentro de una actividad              */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    //Detalle Facilidad\r\n    async getFacilityInfo(AcctId) {\r\n        try {\r\n\r\n            if (AcctId.length <= 0) {\r\n                return null;\r\n            }\r\n\r\n            let params = {\r\n                AcctId: AcctId\r\n            }\r\n            let data = qs.stringify(params);\r\n\r\n            var result = await this.get(url.URL_CORE_PRESTAMOS_INFORMATION + \"?\" + data);\r\n\r\n            /*\r\n            {\r\n        \"AcctLoan\": {\r\n            \"AcctSubtype\": {\r\n                \"Cod\": \"3200\"\r\n            },\r\n            \"AutonomyCode\": \"0201\",\r\n            \"AutonomyUser\": \"38\",\r\n            \"Category\": \"COMMERCIAL.CHILD\",\r\n            \"ClosedDt\": \"2022-05-30\",\r\n            \"CurCode\": \"USD\",\r\n            \"FIData\": {\r\n                \"Agency\": {\r\n                    \"AgencyIdent\": \"PA0010062\"\r\n                }\r\n            },\r\n            \"PrinProperty\": \"PRINCIPALINT\",\r\n            \"SubCategory\": \"1614\",\r\n            \"AcctKey\": {\r\n                \"AcctId\": \"AA19214M07G3\"\r\n            },\r\n            \"IntRateData\": {\r\n                \"IntDayBasis\": \"B\",\r\n                \"IntRate\": 6.75\r\n            },\r\n            \"AcctBal\": [\r\n                {\r\n                    \"BalType\": \"FECIBalance\",\r\n                    \"CurAmt\": {\r\n                        \"Amt\": \"1009.71\"\r\n                    }\r\n                },\r\n                {\r\n                    \"BalType\": \"PrincipalBalance\",\r\n                    \"CurAmt\": {\r\n                        \"Amt\": \"44113.66\"\r\n                    }\r\n                },\r\n                {\r\n                    \"BalType\": \"InterestBalance\",\r\n                    \"CurAmt\": {\r\n                        \"Amt\": \"6807.90\"\r\n                    }\r\n                }\r\n            ],\r\n            \"CreditAcctData\": {\r\n                \"AuthType\": \"13\",\r\n                \"CodeDestination\": \"PA08\",\r\n                \"CountryDestination\": \"PA\",\r\n                \"CreditDestination\": \"LOCAL\",\r\n                \"FeciProperty\": true,\r\n                \"FundsPurpose\": \"3228\",\r\n                \"IntFeci\": 1,\r\n                \"LatePenalty\": true,\r\n                \"OriginationDt\": \"2019-08-02\",\r\n                \"RefinanceDate\": \"2021-04-29\",\r\n                \"RefinanceNum\": \"1020096515\",\r\n                \"SourceSales\": {\r\n                    \"Cod\": \"16\"\r\n                },\r\n                \"Charge\": [\r\n                    {\r\n                        \"ChargeType\": \"FIXED\",\r\n                        \"CurAmt\": {\r\n                            \"Amt\": \"0.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        }\r\n                    }\r\n                ],\r\n                \"Term\": {\r\n                    \"ProposedTerm\": \"1031D\"\r\n                },\r\n                \"CreditAcctPmtInfo\": {\r\n                    \"NextPmtDt\": \"2022-05-30\",\r\n                    \"PmtMethod\": \"DC\"\r\n                },\r\n                \"CreditRegularPmt\": [\r\n                    {\r\n                        \"PmtClass\": \"DUE DUE DUE\",\r\n                        \"PmtType\": \"INTEREST INTEREST LINEAR\"\r\n                    }\r\n                ],\r\n                \"SettleInstruction\": {\r\n                    \"PayIn\": {\r\n                        \"PayInAcctRef\": [\r\n                            {\r\n                                \"PayInAcct\": {\r\n                                    \"AcctId\": \"1000141368\"\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            },\r\n            \"AcctOpeningInfo\": {\r\n                \"EffDt\": \"2019-08-02\",\r\n                \"InitialAmt\": {\r\n                    \"Amt\": \"44113.66\"\r\n                },\r\n                \"SaleOfficer\": \"0630\"\r\n            }\r\n        },\r\n        \"Party\": {\r\n            \"PartyKey\": [\r\n                {\r\n                    \"PartyId\": \"600088018\"\r\n                }\r\n            ]\r\n        },\r\n        \"Status\": {\r\n            \"StatusCode\": \"M0000\",\r\n            \"StatusDesc\": \"OK\"\r\n        }\r\n    }\r\n            */\r\n\r\n            return result?.AcctLoan;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*               Obtenemos toda la informacion del Reporting Services                            */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n\r\n    //https://qa.api.ob.banesco.com.pa/APIUtil/v1/reports/atoms?FECHA=20210930&CLIENTE=600167424\r\n\r\n    async getReportingServices(partyId) { //partyId -> numero del cliente en T24\r\n\r\n        if (partyId === undefined || partyId === null || partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            FECHA: moment().add(-1, 'months').format(\"YYYYMM\") + \"01\", //preguntar pq la fecha no se puede cambiar\r\n            CLIENTE: partyId\r\n        }\r\n        let data = qs.stringify(params);\r\n\r\n        var result = await this.get(url.URL_CORE_REPORTINGSERVICES + \"?\" + data);\r\n\r\n\r\n        return result;\r\n\r\n        /*{\r\n    \"records\": [\r\n        {\r\n            \"FECHA\": \"20210930\",\r\n            \"T_CREDITO\": \"002\",\r\n            \"T_FACILIDAD\": \"05\",\r\n            \"CLASIFICACION\": \"02\",\r\n            \"LOC_EXT\": \"L\",\r\n            \"REGION\": \"014\",\r\n            \"CLIENTE_RUC\": \"8-805-442\",\r\n            \"TNO_EMPRESA\": \"06\",\r\n            \"NOMBRE_CLIENTE\": \"ROBERTO ANTONIO SANCHEZ CONCEPCION\",\r\n            \"GRUPO_ECON\": \"ROBERTO ANTONIO SANCHEZ CONCEPCION\",\r\n            \"GRUPO_RUC\": \"8-805-442\",\r\n            \"T_RELACION\": \"P999\",\r\n            \"ACT_ECON\": \"2103\",\r\n            \"TASA_INT\": \"10.5\",\r\n            \"MONTO_IN\": 5400,\r\n            \"INT_PC\": 0,\r\n            \"FECHA_INI\": \"20150616\",\r\n            \"FECHA_FIN\": \"20230116\",\r\n            \"FECHA_REFIN\": \"NA\",\r\n            \"FECHA_RENEG\": \"20200817\",\r\n            \"G1\": \"0701\",\r\n            \"MONTO_G1\": 0,\r\n            \"G2\": \"NA\",\r\n            \"MONTO_G2\": 0,\r\n            \"G3\": \"NA\",\r\n            \"MONTO_G3\": 0,\r\n            \"G4\": \"NA\",\r\n            \"MONTO_G4\": 0,\r\n            \"G5\": \"NA\",\r\n            \"MONTO_G5\": 0,\r\n            \"PROV_REG\": 0,\r\n            \"PROV_NIIF\": 119.05,\r\n            \"PROV_PAIS\": 0,\r\n            \"SALDO\": 6401.61,\r\n            \"N_CUOTAS_VENCER\": \"7\",\r\n            \"X_VENCER30\": \"100.86\",\r\n            \"X_VENCER60\": \"100.86\",\r\n            \"X_VENCER90\": \"100.86\",\r\n            \"X_VENCER120\": \"100.86\",\r\n            \"X_VENCER180\": \"100.86\",\r\n            \"X_VENCER1A\": \"100.86\",\r\n            \"X_VENCER5A\": \"5796.45\",\r\n            \"X_VENCER10A\": \"0.00\",\r\n            \"X_VENCERM10A\": \"0.00\",\r\n            \"N_CUOTA_VENCIDAS\": \"0\",\r\n            \"VENCIDOS30\": \"0.00\",\r\n            \"VENCIDOS60\": \"0.00\",\r\n            \"VENCIDOS90\": \"0.00\",\r\n            \"VENCIDOS120\": \"0.00\",\r\n            \"VENCIDOS180\": \"0.00\",\r\n            \"VENCIDOS1A\": \"0.00\",\r\n            \"VENCIDOSM1A\": \"0.00\",\r\n            \"RANGO_MORA\": \"1. Al dÃ­a\",\r\n            \"DIAS_MORA\": 0,\r\n            \"PROX_CAP\": \"20211016\",\r\n            \"PER_CAP\": \"01\",\r\n            \"PROX_INT\": \"20211016\",\r\n            \"PER_INT\": \"01\",\r\n            \"CUOTA_XPAGAR\": \"100.86\",\r\n            \"SUCURSAL\": \"201\",\r\n            \"MONEDA\": \"USD\",\r\n            \"CUENTA_CONTABLE\": \"\",\r\n            \"PRODUCTO\": \"TDC\",\r\n            \"BANCA\": \"\",\r\n            \"SECTOR1\": \"PRESTACARD\",\r\n            \"SECTOR2\": \"\",\r\n            \"SECTOR3\": \"\",\r\n            \"SECTOR4\": \"PRESTACARD\",\r\n            \"PRODUCTO1\": \"TARJETA DE CREDITO CONSUMO\",\r\n            \"PRODUCTO2\": \"TDC\",\r\n            \"PRODUCTO3\": \"Prestacard Visa\",\r\n            \"NUM_OPS\": \"4466840182907004\",\r\n            \"NUM_CLIENTE\": \"600167424\",\r\n            \"CENTRO_COSTO\": \"\",\r\n            \"NUM_LINEA\": \"\",\r\n            \"COD_OFIC\": \"\",\r\n            \"COD_OFIC2\": \"\",\r\n            \"INGRESO\": 0,\r\n            \"SEGMENTO\": \"\",\r\n            \"TIPO_PAGO\": \"\",\r\n            \"PUNTAJE\": 0,\r\n            \"FECHA_ULT_PAGO_CAPITAL\": \"20200304\",\r\n            \"CATEGORIA_CAMBIO\": \"03\",\r\n            \"MONTO_ULT_PAGO_CAPITAL\": 69.2,\r\n            \"FECHA_ULT_PAGO_INTERES\": \"20200304\",\r\n            \"MONTO_ULT_PAGO_INTERES\": 82.8,\r\n            \"STAGE\": 2,\r\n            \"PROXIMO_CAP_HIST\": \"20211016\",\r\n            \"PROXIMO_INT_HIS\": \"20211016\"\r\n        }\r\n    ],\r\n    \"Status\": {\r\n        \"StatusCode\": \"M0000\",\r\n        \"StatusDesc\": \"SUCCESS\"\r\n    }\r\n}*/\r\n    }\r\n\r\n\r\n    //Retorna todos los colateralsId por numero de cliente\r\n    async getColaterals(partyId) { //Numero del cliente en T24\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: partyId\r\n        }\r\n\r\n        let data = qs.stringify(params);\r\n\r\n        var dataResult = [];\r\n        try {\r\n\r\n            console.log(\"plage\");\r\n\r\n            //servicio retorna Pignorados\r\n            var result = await this.get(url.URL_CORE_PIGNORADO + \"?\" + data);\r\n\r\n            //Armamos la data a mostrar en pantalla\r\n            result.Collaterals.CollateralInfo.map(function (item, i) {\r\n                if (item.Collateral.CollateralKey.CollateralId !== null) {\r\n                    dataResult.push({ collateralId: item.Collateral.CollateralKey.CollateralId, facilityAmt: item.Collateral.CollateralAmt.Amt });\r\n                }\r\n\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.error(\"URL_CORE_PIGNORADO\", err);\r\n        }\r\n\r\n        console.log(\"dataResult\", dataResult);\r\n        return dataResult;\r\n    }\r\n\r\n    // retorna Detalle de Garantias\r\n    async getWarrantyDetails(collateralId, warrantyType) { //Numero del id colateral ... warrytype = Muebles, Inmuebles, Otros, Depositos\r\n\r\n        if (collateralId.length <= 0 || warrantyType.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            CollateralId: collateralId,\r\n            InqType: warrantyType\r\n        }\r\n\r\n        let data = qs.stringify(params);\r\n\r\n        try {\r\n            //servicio retorna Pignorados\r\n            const result = await this.get(url.URL_CORE_COLLATERALS + \"?\" + data);\r\n            return result\r\n            //Armamos la data a mostrar en pantalla\r\n            /*result.Collaterals.CollateralInfo.map(function(item, i){\r\n                if(item.Collateral.CollateralKey.CollateralId!==null){\r\n                    dataResult.push({collateralId: item.Collateral.CollateralKey.CollateralId,facilityAmt: item.Collateral.CollateralAmt.Amt});\r\n                }                                \r\n            })*/\r\n        }\r\n        catch (err) {\r\n            console.error(\"URL_CORE_PIGNORADO\", err);\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    async getAccountMovementsByTransaction(transactId) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n            var result = [];\r\n            let flagAcctId = [];\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getAccountMovements(debtors[i].customerNumberT24);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        // dataResult.forEach(function (item) {\r\n                        //     result.push(item);\r\n                        // });\r\n                        for (let item of dataResult) {\r\n                            if (flagAcctId.includes(item.AcctId))\r\n                                continue;\r\n                            flagAcctId.push(item.AcctId)\r\n                            result.push(item);\r\n                        };\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getAccountMovementsByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    //retorna movimientos de cuentas\r\n    async getAccountMovements(partyId) { //Numero de Cliente de T24\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n\r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            throw new Error(result.Status.StatusCode + \" - \" + result.Status.StatusDesc);\r\n            return;\r\n        }\r\n\r\n        var dataResult = [];\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n\r\n            if (item.AcctPartyType !== result.PartyKey.PartyType && item.AcctPartyType === \"2\") { }\r\n            else {\r\n                params = { AcctReference: item.AcctKey.AcctReference }\r\n                data = qs.stringify(params);\r\n                try {\r\n                    var year = 0;\r\n                    var dtResult = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n                    if (dtResult.Acct.AcctBal.length > 0) {\r\n                        // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                        var dt = { AcctId: item.AcctKey.AcctId, dataByYear: [] }\r\n                        for (var accItem of dtResult.Acct.AcctBal) {\r\n                            if (year !== Number(accItem.AverageBalanceDt.split(' ')[1])) {\r\n                                year = Number(accItem.AverageBalanceDt.split(' ')[1]);\r\n                                dt.dataByYear.push({ year, dataresult: [] })\r\n                            }\r\n\r\n                            var dtr = {\r\n                                \"year\": Number(accItem.AverageBalanceDt.split(' ')[1]),\r\n                                \"month\": accItem.AverageBalanceDt.split(' ')[0],\r\n                                \"amount\": accItem.CurAmt.Amt,\r\n                                \"deposits\": 0\r\n                            }\r\n                            dt.dataByYear[dt.dataByYear.length - 1].dataresult.push(dtr);\r\n                        }\r\n                        /*dtResult.Acct.AcctBal.map(function (accItem, i) {  \r\n                            if(year !== Number(accItem.AverageBalanceDt.split(' ')[1])){\r\n                                year = Number(accItem.AverageBalanceDt.split(' ')[1]);\r\n                                dt.dataByYear.push({year,dataresult:[]})\r\n                            }                                                \r\n                            dt.dataByYear[dt.dataByYear.length-1].dataresult.push({\r\n                                \"year\": Number(accItem.AverageBalanceDt.split(' ')[1]), \r\n                                \"month\": accItem.AverageBalanceDt.split(' ')[0],\r\n                                \"amount\": accItem.CurAmt.Amt\r\n                            }); \r\n                        }) */\r\n                        dataResult.push(dt);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error(\"getAccountMovementsByTransaction\", err);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        //Para sacar los depositos\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n        //servicio retorna los movimientos de cuentas del cliente                        \r\n        /*try{\r\n            for (var i = 0; i < dataResult.length; ++i) {\r\n                var dtResult = dataResult[i];\r\n                for (var p = 0; p < dtResult.dataByYear.length; ++p) {\r\n                    var dtYear = dtResult.dataByYear[p];\r\n                    var currentYear =dtYear.year;\r\n                    params = null; //dtResult.AcctId\r\n                    if(currentYear === Number(moment().format(\"YYYY\"))){\r\n                        params = { AcctId: dtResult.AcctId, EndDt:moment().format(\"YYYY-MM-DD[T]HH:mm:ss\"), StartDt:currentYear+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    else{\r\n                        params = { AcctId: dtResult.AcctId, EndDt:currentYear+\"-12-31T23:59:59\", StartDt:currentYear+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    data = qs.stringify(params);\r\n                    try{\r\n                        var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data); \r\n                        for (var depo of deposits.Trn) {\r\n                            if(depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0){\r\n                                var monthName = GetMontNameByNumber(moment(depo.EffDt).format('M'));\r\n                                var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\r\n                                    if(dataByMonth!==undefined){\r\n                        \r\n                                        dataByMonth.deposits= (Number(dataByMonth.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);\r\n                                    }\r\n                            }                    \r\n                        }        \r\n                    }\r\n                    catch(err){}\r\n                }\r\n            }\r\n        }\r\n        catch(err){}\r\n        */\r\n        //Para sacar los depositos\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/balances/totals?CUENTA=120000086315&FECHA_INI=20220101&FECHA_FIN=20220330&PROMEDIO=S\r\n\r\n        try {\r\n            for (var i = 0; i < dataResult.length; ++i) {\r\n                var dtResult = dataResult[i];\r\n                for (var p = 0; p < dtResult.dataByYear.length; ++p) {\r\n                    var dtYear = dtResult.dataByYear[p];\r\n                    var currentYear = dtYear.year;\r\n                    params = null; //dtResult.AcctId\r\n                    if (currentYear === Number(moment().format(\"YYYY\"))) {\r\n                        params = { CUENTA: dtResult.AcctId, FECHA_INI: currentYear + \"0101\", FECHA_FIN: moment().format(\"YYYYMMDD\"), PROMEDIO: \"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    else {\r\n                        params = { CUENTA: dtResult.AcctId, FECHA_INI: currentYear + \"0101\", FECHA_FIN: currentYear + \"1231\", PROMEDIO: \"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    data = qs.stringify(params);\r\n                    try {\r\n                        var deposits = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data);\r\n                        //console.log(\"getAccountMovementsByTransactionDeposits\",deposits);\r\n\r\n                        for (var record of deposits.records) {\r\n                            //console.log(\"depositsMonth\", record.FECHA.toString().substring(4, 6));\r\n                            var monthName = GetMontNameByNumber(record.FECHA.toString().substring(4, 6));\r\n                            var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName) >= 0);\r\n                            if (dataByMonth !== undefined) {\r\n                                dataByMonth.deposits = (Number(record.MONTO)).toFixed(2);\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (err) { }\r\n                }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    async getAccountDepositsByTransaction(transactId, year, month) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = [];\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getAccountDeposits(debtors[i].customerNumberT24, year, month);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        dataResult.forEach(function (item) {\r\n                            result.push(item);\r\n                        });\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getAccountMovementsByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    async getAccountDeposits(partyId, year, month) { //Numero de Cliente de T24\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n\r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            throw new Error(result.Status.StatusCode + \" - \" + result.Status.StatusDesc);\r\n            return;\r\n        }\r\n\r\n        var dataResult = [];\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n            try {\r\n                year = Number(year).toString(\"00\");\r\n                month = Number(month).toString(\"00\");\r\n                var endDate = moment(year + \"-\" + month + \"-01\").endOf('month').format('DD');\r\n\r\n                params = { AcctId: item.AcctKey.AcctId, EndDt: year + \"-\" + month + \"-\" + endDate + \"T23:59:59\", StartDt: year + \"-\" + month + \"-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n\r\n                data = qs.stringify(params);\r\n                try {\r\n                    var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data);\r\n                    for (var depo of deposits.Trn) {\r\n                        if (depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0) {\r\n                            dataResult.push({ deposits: Number(depo.TotalCurAmt.Amt) })\r\n                        }\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            catch (err) { }\r\n        }\r\n        //Para sacar los depositos\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    //retorna movimientos de cuentas\r\n    async getApcInfo(identification, idType) { //Numero de identificacion del cliente\r\n\r\n        if (identification.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let typeofId = \"Cedula\";\r\n        switch (idType) {\r\n            case \"CED\": {\r\n                typeofId = \"Cedula\";\r\n                break;\r\n            }\r\n            case \"RUC\": {\r\n                typeofId = \"RUC\";\r\n                break;\r\n            }\r\n            case \"PAS\": {\r\n                typeofId = \"Pasaporte\";\r\n                break;\r\n            }\r\n        }\r\n\r\n\r\n        var tmpidentification = \"\";\r\n        identification.split('-').map((str) => {\r\n            if (str.startsWith(\"0\")) {\r\n                tmpidentification += str.replace(/^0+/, '') + \"-\";\r\n            }\r\n            else {\r\n                tmpidentification += str + \"-\";\r\n            }\r\n        })\r\n        if (tmpidentification.startsWith(\"-\")) {\r\n            tmpidentification = tmpidentification.substring(1);\r\n        }\r\n        identification = tmpidentification.substring(0, tmpidentification.length - 1);\r\n        var params = {\r\n            \"ConsultarAPC\": {\r\n                \"Model\": {\r\n                    \"EsPrueba\": 0,\r\n                    \"ForzarBusqueda\": 0,\r\n                    \"IdentificacionConsulta\": identification,//\"8-773-1899\",\r\n                    \"PasswordAPC\": \"Banesco19.\",\r\n                    \"TipoCliente\": typeofId,\r\n                    \"UltimusProcess\": 7,\r\n                    \"UsuarioAPC\": \"WTIBANESCO001\"\r\n                }\r\n            }\r\n        }\r\n\r\n        //servicio retorna la info de APC del cliente\r\n        const result = await this.post(url.URL_CORE_APCINFO, params);\r\n\r\n        var dataResult = [];\r\n        try {\r\n            if (Array.isArray(result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)) {\r\n                //Armamos la data a mostrar en pantalla\r\n                result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function (item, i) {\r\n                    try {\r\n                        dataResult.push({\r\n                            \"year\": moment(item.dc_fec_inicio_rel).format(\"YYYY\"), \"month\": moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\r\n                            \"initialAmount\": item.dc_monto_original, \"actualAmount\": item.dc_saldo_actual, \"asociation\": item.dc_nom_asoc, \"source\": item.dc_descr_corta_rela\r\n                        });\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else {\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n                    dataResult.push({\r\n                        \"year\": moment(item.dc_fec_inicio_rel).format(\"YYYY\"), \"month\": moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\r\n                        \"initialAmount\": item.dc_monto_original, \"actualAmount\": item.dc_saldo_actual, \"asociation\": item.dc_nom_asoc, \"source\": item.dc_descr_corta_rela\r\n                    });\r\n                }\r\n                catch (err) { }\r\n            }\r\n\r\n        }\r\n        catch (err) { console.error(err); }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    async getEconomicGroup(partyId) { //partyId -> numero del cliente en T24\r\n        try {\r\n            let params = { PartyId: partyId }\r\n            let data = qs.stringify(params);\r\n\r\n            var result = await this.get(url.URL_CORE_COMPANIESRELATIONS + \"?\" + data);\r\n\r\n            console.log(\"getEconomicGroup\", result);\r\n\r\n            return result.PartyPartyRels.PartyPartyRel[0].PartyPartyRelInfo.PartyRelName[0];\r\n        }\r\n        catch (err) { }\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    async getReciprocityByTransaction(transactId, year, month) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = { averageAmt: 0, deposits: 0 }\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getReciprocity(debtors[i].customerNumberT24, year, month);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        result.averageAmt += dataResult.averageAmt;\r\n                        result.deposits += dataResult.deposits;\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getAccountMovementsByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    async getReciprocity(partyId, year, month) {\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        year = Number(year);\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n\r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            return undefined;\r\n        }\r\n\r\n        var resultToReturn = { averageAmt: 0, deposits: 0 }\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n            params = { AcctReference: item.AcctKey.AcctReference }\r\n            data = qs.stringify(params);\r\n            try {\r\n                var dtResult = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n                if (dtResult.Acct.AcctBal.length > 0) {\r\n                    // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                    for (var accItem of dtResult.Acct.AcctBal) {\r\n                        var dMonth = accItem.AverageBalanceDt.split(' ')[0]\r\n                        if (Number(accItem.AverageBalanceDt.split(' ')[1]) === year && dMonth.indexOf(month) >= 0) {\r\n                            resultToReturn.averageAmt = (Number(resultToReturn.averageAmt) + Number(accItem.CurAmt.Amt)).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (err) { }\r\n\r\n            //Para sacar los depositos\r\n            try {\r\n                var currentYear = year;\r\n                var monthNum = GetMontNumberByName(month);\r\n                var endDate = moment(year + \"-\" + monthNum + \"-01\").endOf('month').format('DD'); params = null; //dtResult.AcctId\r\n                params = { CUENTA: item.AcctKey.AcctId, FECHA_INI: currentYear + monthNum + \"01\", FECHA_FIN: currentYear + monthNum + endDate, PROMEDIO: \"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n\r\n                data = qs.stringify(params);\r\n                try {\r\n                    var deposits = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data);\r\n                    for (var record of deposits.records) {\r\n                        //console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\r\n\r\n                        //var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\r\n                        //var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\r\n                        //if(dataByMonth!==undefined){                        \r\n                        resultToReturn.deposits = (Number(resultToReturn.deposits) + Number(record.monto)).toFixed(2);\r\n                        //  }                    \r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            catch (err) { }\r\n\r\n        }\r\n        return resultToReturn;\r\n    }\r\n\r\n    async getReciprocityByYearByTransaction(transactId, year) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = { averageAmt: 0, deposits: 0 }\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getReciprocityByYear(debtors[i].customerNumberT24, year);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        result.averageAmt += dataResult.averageAmt;\r\n                        result.deposits += dataResult.deposits;\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getAccountMovementsByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    async getReciprocityByYear(partyId, year) {\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        year = Number(year);\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n\r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            return undefined;\r\n        }\r\n\r\n        var resultToReturn = { averageAmt: 0, deposits: 0 }\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n            params = { AcctReference: item.AcctKey.AcctReference }\r\n            data = qs.stringify(params);\r\n            try {\r\n                var dtResult = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n                if (dtResult.Acct.AcctBal.length > 0) {\r\n                    // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                    for (var accItem of dtResult.Acct.AcctBal) {\r\n                        //var dMonth = accItem.AverageBalanceDt.split(' ')[0]\r\n                        if (Number(accItem.AverageBalanceDt.split(' ')[1]) === year) {\r\n                            resultToReturn.averageAmt = (Number(resultToReturn.averageAmt) + Number(accItem.CurAmt.Amt)).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (err) { }\r\n\r\n            //Para sacar los depositos\r\n            try {\r\n                var currentYear = year;\r\n                var monthNum = year === Number(moment().format(\"YYYY\")) ? moment().format(\"MM\") : \"12\";\r\n                var endDate = moment(year + \"-\" + monthNum + \"-01\").endOf('month').format('DD'); params = null; //dtResult.AcctId\r\n                params = { CUENTA: item.AcctKey.AcctId, FECHA_INI: currentYear + \"0101\", FECHA_FIN: currentYear + monthNum + endDate, PROMEDIO: \"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n\r\n                data = qs.stringify(params);\r\n                try {\r\n                    var deposits = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data);\r\n                    for (var record of deposits.records) {\r\n                        //console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\r\n\r\n                        //var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\r\n                        //var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\r\n                        //if(dataByMonth!==undefined){                        \r\n                        resultToReturn.deposits = (Number(resultToReturn.deposits) + Number(record.monto)).toFixed(2);\r\n                        //  }                    \r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            catch (err) { }\r\n\r\n        }\r\n        return resultToReturn;\r\n    }\r\n\r\n    async getDepositsByTransaction(transactId, year, month) {\r\n\r\n        var debtors = await this.backendServices.consultarDeudores(transactId);\r\n        if (debtors !== null && debtors !== undefined) {\r\n\r\n            var result = { averageAmt: 0, deposits: 0 }\r\n            for (var i = 0; i < debtors.length; i++) {\r\n                try {\r\n                    var dataResult = await this.getDeposits(debtors[i].customerNumberT24, year, month);\r\n                    if (dataResult !== null && dataResult !== undefined) {\r\n                        result.averageAmt += dataResult.averageAmt;\r\n                        result.deposits += dataResult.deposits;\r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n            console.log(\"getAccountMovementsByTransaction\", result);\r\n\r\n            return result;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    async getDeposits(partyId, year, month) {\r\n\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/balances/totals\r\n\r\n        if (partyId.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        year = Number(year);\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n\r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            return undefined;\r\n        }\r\n\r\n        var resultToReturn = { averageAmt: 0, deposits: 0 }\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n\r\n            //CUENTA=120000086315&FECHA_INI=20220101&FECHA_FIN=20220330&PROMEDIO=S\r\n            var endDate = moment(year + \"-12-01\").endOf('month').format('DD');\r\n            params = { CUENTA: item.AcctKey.AcctId, FECHA_INI: year + \"0101\", FECHA_FIN: year + \"12\" + endDate }\r\n            data = qs.stringify(params);\r\n            try {\r\n                var dtResult = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data);\r\n                if (dtResult.Acct.AcctBal.length > 0) {\r\n                    // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                    for (var accItem of dtResult.Acct.AcctBal) {\r\n                        if (Number(accItem.AverageBalanceDt.split(' ')[1]) === year) {\r\n                            resultToReturn.averageAmt = (Number(resultToReturn.averageAmt) + Number(accItem.CurAmt.Amt)).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (err) { }\r\n\r\n            //Para sacar los depositos\r\n            //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n            //servicio retorna los movimientos de cuentas del cliente                        \r\n            try {\r\n                //var monthN=GetMontNumberByName(month);\r\n                var endDate = moment(year + \"-12-01\").endOf('month').format('DD');\r\n                params = { AcctId: item.AcctKey.AcctId, EndDt: year + \"-12-\" + endDate + \"T23:59:59\", StartDt: year + \"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                data = qs.stringify(params);\r\n                var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data);\r\n                console.log(\"getReciprocityByYear\", deposits);\r\n                for (var depo of deposits.Trn) {\r\n                    if (depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0) {\r\n                        resultToReturn.deposits = (Number(resultToReturn.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);\r\n                    }\r\n                }\r\n            }\r\n            catch (err) { }\r\n        }\r\n        return resultToReturn;\r\n\r\n    }\r\n\r\n    /// Obtener el serial de la linea -- Parametros: NumeroT24 y Codigo Facilidad\r\n    async getLineSerial(partyId, lineTypeCode, maxLineNum = 0) {\r\n        try {\r\n\r\n            //var errorDispacher = new errorDispacherHelper(); \r\n            console.log(\"getLineSerial\", partyId, lineTypeCode)\r\n            //partyId=\"800048231\"; facilityTypeCode=\"10000\"\r\n\r\n            if (partyId.length <= 0) {\r\n                return undefined;\r\n            }\r\n\r\n            let params = { PartyId: partyId }\r\n            let data = qs.stringify(params);\r\n\r\n            //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018\r\n\r\n            //servicio retorna las cuentas del cliente\r\n            var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n\r\n            // if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK && result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK1) {\r\n            //     errorDispacherHelper.dispatch({ status: result.Status.StatusCode, error: result.Status.StatusDesc });\r\n            //     return;\r\n            // }            \r\n\r\n            var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(lineTypeCode) >= 0)\r\n\r\n            var lineNumber = 1 + maxLineNum;\r\n            dataResults.forEach((dt) => {\r\n                lineNumber = Number(dt.CreditLineId.split(\".\")[2]) > lineNumber ? Number(dt.CreditLineId.split(\".\")[2]) : lineNumber;\r\n            })\r\n\r\n            while (lineTypeCode.length < 7) {\r\n                lineTypeCode = \"0\" + lineTypeCode;\r\n            }\r\n\r\n            if (lineNumber.toString().length < 2) {\r\n                lineNumber = (\"0\" + (lineNumber + 1).toString()).slice(-2);\r\n            }\r\n            else {\r\n                lineNumber = lineNumber.toString();\r\n            }\r\n\r\n            var lineserial = partyId + \".\" + lineTypeCode + \".\" + lineNumber;\r\n            console.log(\"lineas\", lineserial);\r\n\r\n            return lineserial;\r\n        }\r\n        catch (err) {\r\n            // errorDispacherHelper.dispatch({status: \"500\",data: result, error: err.message});\r\n        }\r\n\r\n        return null;\r\n    }\r\n    ///Creacion de Linea para desembolso\r\n    //numero de linea = numero de cliente + tipo de linea + serial === EJ: 600197109.0011000.01\r\n\r\n    //https://qa.api.ob.banesco.com.pa/APIUtil/v1/catalogs?catalog_name=LIMIT REFERENCE&parent_catalog_name=&keyword=  \r\n    //===> Catalogo de Tipo de Lineas\r\n\r\n    //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018  \r\n    //===> Obtenemos todas las lineas y tomamos el total + 1 => Mas serial\r\n    async newline(data) {\r\n\r\n        try {\r\n\r\n            /*\r\n            {\r\n  \"CreditLine\": {\r\n    \"Activity\": {\r\n      \"Cod\": 2103\r\n    },\r\n    \"AuthType\": 1,\r\n    \"AutonomyCode\": {\r\n      \"Cod\": 100,\r\n      \"Desc\": \"JUNTA DIRECTIVA\"\r\n    },\r\n    \"AutonomyUser\": 2,\r\n    \"CreditLimit\": {\r\n      \"AdviseAmt\": {\r\n        \"Amt\": 50000,\r\n        \"CurCode\": \"USD\"\r\n      },\r\n      \"AllowNetting\": \"Y\",\r\n      \"ApprovalDt\": \"2022-06-24\",\r\n      \"AvailDt\": \"2022-06-24\",\r\n      \"AvailMarker\": \"Y\",\r\n      \"CountryRisk\": {\r\n        \"Country\": {\r\n          \"CountryCode\": \"PA\",\r\n          \"CountryName\": \"\"\r\n        },\r\n        \"Percent\": 100\r\n      },\r\n      \"CreditLimitKey\": {\r\n        \"CreditLimitId\": \"600197109.0000100.02\"\r\n      },\r\n      \"CurCode\": \"USD\",\r\n      \"DeadLineDt\": \"2022-06-24\",\r\n      \"DueDt\": \"2023-06-30\",\r\n      \"LimitAmt\": {\r\n        \"Amt\": 50000,\r\n        \"CurCode\": \"USD\"\r\n      },\r\n      \"LimitAmtType\": \"FIXED\",\r\n      \"LimitReject\": \"Y\",\r\n      \"MaxCurAmt\": {\r\n        \"Amt\": 50000,\r\n        \"CurCode\": \"USD\"\r\n      },\r\n      \"ProposalDt\": \"2022-06-24\",\r\n      \"ReviewFreq\": {\r\n        \"FreqValue\": \"20230630M1230\"\r\n      },\r\n      \"Signatories\": {\r\n        \"Signatory\": {\r\n          \"PartyKey\": {\r\n            \"PartyId\": 990057781\r\n          }\r\n        }\r\n      },\r\n      \"StateProvDest\": {\r\n        \"Cod\": \"\",\r\n        \"Desc\": \"\"\r\n      }\r\n    }\r\n  }\r\n}\r\n            */\r\n\r\n\r\n            /*\r\n        {\r\n   \"CreditLine\":{\r\n      \"Activity\":{\r\n         \"Cod\":\"2103\"\r\n      },\r\n      \"AuthType\":\"01\",\r\n      \"AutonomyCode\":{\r\n         \"Cod\":\"0100\",\r\n         \"Desc\":\"JUNTA DIRECTIVA\"\r\n      },\r\n      \"AutonomyUser\":\"02\",\r\n      \"CreditLimit\":{\r\n         \"AdviseAmt\":{\r\n            \"Amt\":\"2000\",\r\n            \"CurCode\":\"USD\"\r\n         },\r\n         \"Allow\":{\r\n            \"CurrencyData\":{\r\n               \"CurAmt\":{\r\n                  \"Amt\":{\r\n                     \"-self-closing\":\"true\"\r\n                  },\r\n                  \"CurCode\":{\r\n                     \"-self-closing\":\"true\"\r\n                  }\r\n               }\r\n            },\r\n            \"Party\":{\r\n               \"PartyId\":{\r\n                  \"-self-closing\":\"true\"\r\n               }\r\n            },\r\n            \"ProductData\":[\r\n               {\r\n                  \"Product\":{\r\n                     \"Cod\":\"1000\"\r\n                  }\r\n               }\r\n            ]\r\n         },\r\n         \"AllowNetting\":\"N\",\r\n         \"ApprovalDt\":\"2022-05-11\",\r\n         \"AvailDt\":\"2022-05-11\",\r\n         \"AvailMarker\":\"Y\",\r\n         \"CountryRisk\":{\r\n            \"Country\":{\r\n               \"CountryCode\":\"PA\",\r\n               \"CountryName\":{\r\n                  \"-self-closing\":\"true\"\r\n               }\r\n            },\r\n            \"Percent\":\"100\"\r\n         },\r\n         \"CreditLimitKey\":{\r\n            \"CreditLimitId\":\"990001176.0010000.09\"\r\n         },\r\n         \"CurCode\":\"USD\",\r\n         \"DeadLineDt\":\"2022-05-11\",\r\n         \"DueDt\":\"2023-05-11\",\r\n         \"LimitAmt\":{\r\n            \"Amt\":\"2000\",\r\n            \"CurCode\":\"USD\"\r\n         },\r\n         \"LimitAmtType\":\"FIXED\",\r\n         \"LimitReject\":\"Y\",\r\n         \"MaxCurAmt\":{\r\n            \"Amt\":\"2000\",\r\n            \"CurCode\":\"USD\"\r\n         },\r\n         \"ProposalDt\":\"2022-05-11\",\r\n         \"ReviewFreq\":{\r\n            \"FreqValue\":\"20230430M1230\"\r\n         },\r\n         \"Signatories\":{\r\n            \"Signatory\":{\r\n               \"PartyKey\":{\r\n                  \"PartyId\":\"990001176\"\r\n               }\r\n            }\r\n         }\r\n      }\r\n   }\r\n}        */\r\n\r\n            //console.log(\"NewLine\",data);\r\n            // return;\r\n\r\n            var result = await this.post(url.URL_CORE_LINES, data);\r\n            console.log(\"NewLine\", data, result);\r\n            if (result.StatusCode === OPTs.ResponseT24_STATUSOK) {\r\n                await this.newlineChild(data);\r\n                return result;\r\n            }\r\n            else {\r\n                errorDispacherHelper.dispatch({ status: result.StatusCode, data: result, error: result.StatusDesc });\r\n            }\r\n        }\r\n        catch (err) {\r\n            errorDispacherHelper.dispatch({ status: \"500\", data: result, error: err.message });\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n    async newlineChild(data) {\r\n        try {\r\n\r\n            //data.CreditLine.Allow.ProductData            \r\n            for (var i = 0; i < data.CreditLine.CreditLimit.Allow.ProductData.length; i++) {\r\n                try {\r\n                    var dataProd = data.CreditLine.CreditLimit.Allow.ProductData[i];\r\n\r\n                    var CreditLimitId = data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId;\r\n                    var CreditLimitIdNum = CreditLimitId.split(\".\")[1].replace(/0/g, '');\r\n                    CreditLimitIdNum = CreditLimitIdNum + \"0\";\r\n\r\n                    var ToReplaceIdNum = (Number(CreditLimitIdNum) + i + 1).toString();\r\n\r\n                    data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId =\r\n                        data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId.split(\".\")[0] + \".\" +\r\n                        data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId.split(\".\")[1].replace(CreditLimitIdNum, ToReplaceIdNum) + \".\" +\r\n                        data.CreditLine.CreditLimit.CreditLimitKey.CreditLimitId.split(\".\")[2];\r\n\r\n                    var tmpdata = JSON.parse(JSON.stringify(data))\r\n                    delete tmpdata.CreditLine.CreditLimit.Allow.ProductData\r\n\r\n                    var result = await this.post(url.URL_CORE_LINES, tmpdata);\r\n                    console.log(\"NewLineChild\", tmpdata, result);\r\n                    if (result.Status.StatusCode === OPTs.ResponseT24_STATUSOK) {\r\n                        //return result;\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    errorDispacherHelper.dispatch({ status: \"500\", data: result, error: err.message });\r\n                }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    // Garantia loans/Colateral\r\n    //https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/collaterals\r\n\r\n    // Desembolso\r\n    //https://qa.api.ob.banesco.com.pa/acctloan/v1/loans\r\n\r\n    //lineas\r\n    //https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/credits/lines/limits\r\n\r\n\r\n    async DesembolsoBajoLinea(data) {\r\n\r\n        /*\r\n        data =\r\n        {\r\n            AcctLoan: {\r\n                AcctSubtype: {\r\n                    Cod: \"AL.COMPANY.PRIVATE\"  // Subproducto\r\n                },\r\n                AutonomyCode: \"0523\", // ******** Codigo de la autonomia\r\n                AutonomyUser: \"134\", //La autonomia o usuario que esta logueado\r\n                //ClosedDt:\"2029-10-03\", //\r\n                //ClubBanesco:\"false\",\r\n                CurCode: \"USD\", //codigo de Moneda\r\n                SubCategory: \"1623\", //Codigo de Subcategoria??\r\n                Variation: { //variacion -> Puede ir vacÃ­a\r\n                    \"Cod\": \"CLIENTE\"\r\n                },\r\n                \"AcctOpeningInfo\": {\r\n                    BusinessUnit: \"SUCURSAL\", // Banca viene de IGR\r\n                    \"InitialAmt\": {\r\n                        \"Amt\": \"5950\" //monto\r\n                    },\r\n                    OpenDt: \"2022-02-07\",// Fecha de Inicio del desembolso\r\n                    SaleOfficer: \"3766\" //Canal de venta .... ****** no estÃ¡ en pantalla\r\n                },\r\n                CreditAcctData: {\r\n                    AuthType: \"06\", //-> ?? ************ no esta en pantalla\r\n                    BillsCombined: \"true\", // Capital de Interes ... ********** no esta en pantalla\r\n                    CodeDestination: \"PA10\", // codigo de Destino ... Provincia de Destino\r\n                    CollOfficer: \"9999\", /// campo fijo siempre\r\n                    CountryDestination: \"PA\", // codigo Pais de Destino\r\n                    CreditDestination: \"LOCAL\", // ********* Destino del Credito : LOCAL 1 /EXTRANJERO 2\r\n                    FundsDestination: \"1\", // ********* Destino de los Fondos: LOCAL 1 / EXTRANJERO 2\r\n                    FundsPurpose: \"2103\", // ********** Proposito de los Fondos viene de un catalogo\r\n                    OriginationRef: \"99986\",// ********** referencia de Orientacion , viene de un catalodo\r\n                    RefinanceNum: { // QUEDA FIJO\r\n                        \"self-closing\": \"true\"\r\n                    },\r\n                    SourceSales: { // ********* Viene de Catalogo\r\n                        \"Cod\": \"14\",\r\n                        \"Desc\": \"REFERIDO POR EMPLEADO\"\r\n                    },\r\n                    WritingType: \"PAG\", // *********** Tipo de Escritura .. PAG/WRT .. PagarÃ© o Escritura\r\n                    Charge: [ //cargos \r\n                        {\r\n                            ChargeType: \"LENDCOMMISSION\", //Instrucciones Operativas -> Monto por Comision\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"392.7\"\r\n                            }\r\n                        },\r\n                        {\r\n                            \"ChargeType\": \"TAX\", //Instrucciones Operativas -> ITBMs\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"2.18\"\r\n                            }\r\n                        },\r\n                        {\r\n                            \"ChargeType\": \"ALLEGALFEE\", //Instrucciones Operativas -> NotarÃ­a\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"4.36\"\r\n                            }\r\n                        },\r\n                        {\r\n                            \"ChargeType\": \"TFISCAL\", //Instrucciones Operativas -> Timbre Fisical\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"3\"\r\n                            }\r\n                        },\r\n                    ],\r\n                    \"CreditRegularPmt\": { // La podemos Omitir no es obligatorio\r\n                        \"BillType\": \"INSTALLMENT\",\r\n                        \"Freq\": {\r\n                            \"NoPaymentMonth\": \"1\",\r\n                            \"OnDayNumber\": \"3\"\r\n                        },\r\n                        \"PmtClass\": \"DUE\",\r\n                        \"PmtType\": \"CONSTANT\",\r\n                        \"PmtTargetDetail\": {\r\n                            \"ActualAmt\": {\r\n                                \"Amt\": \"114.9\"\r\n                            },\r\n                            \"StartDate\": \"2022-04-03\"\r\n                        }\r\n                    },\r\n                    Term: {    //*********** Termino o Plazo de desembolso ... + Tipo de Termino D/M/A\r\n                        ProposedTerm: \"91M\"\r\n                    },\r\n                    SettleInstruction: {\r\n                        PayIn: [\r\n                            {\r\n                                ACDBRule: \"PARTIAL\", //Constante\r\n                                PmtType: \"CONSTANT\",//Constante\r\n                                SettleActivity: { //Constante\r\n                                    Cod: \"LENDING-APPLYPAYMENT-PR.REPAYMENT\"\r\n                                },\r\n                                Settlement: \"false\", //************* desembolso en cuenta TRUE/FALSE\r\n                                PayInAcctRef: {\r\n                                    Activity: {  //Constante\r\n                                        Cod: \"ACCOUNTS-DEBIT-ARRANGEMENT\"\r\n                                    },\r\n                                    PayInAcct: { // NÃºmero de LÃ­nea de CrÃ©dito\r\n                                        \"AcctReference\": \"USD1273300020014\"\r\n                                    }\r\n                                }\r\n                            },\r\n                        ],\r\n                        PayOut: {\r\n                            PayOutAcct: { // NÃºmero de LÃ­nea de CrÃ©dito, el numero de la cuenta\r\n                                \"AcctReference\": \"USD1273300020014\"\r\n                            },\r\n                            Property: \"ACCOUNT\", // Si es una cuenta \"ACCOUNT\"\r\n                            SettleActivity: { //Constante\r\n                                Cod: \"LENDING-APPLYPAYMENT-PR.REPAYMENT\"\r\n                            },\r\n                            Settlement: \"true\" //Constante\r\n                        }\r\n                    },\r\n                    CreditAcctPmtInfo: {\r\n                        PmtMethod: \"DD\" // ******** Metodo de Pago ... DC/PV  Descuento Directo - Pago Voluntario\r\n                    }\r\n                },\r\n                IntRateData: [\r\n                    {\r\n                        IntRate: \"11.50\", // Tasa de Interes\r\n                        IntRateType: \"PRINCIPALINT\"\r\n                    },\r\n                    {\r\n                        \"IntRate\": \"12.50\",\r\n                        \"IntRateType\": \"LT.DPF.BASE\"\r\n                    },\r\n                    {\r\n                        \"IntRate\": \"13.50\",\r\n                        \"IntRateType\": \"LT.SPREAD.POINT\"\r\n                    }\r\n                ],\r\n                AcctMember: {\r\n                    \"PartyKey\": {\r\n                        \"PartyId\": \"990091561\" //Numero de Cliente T24\r\n                    },\r\n                    \"PartyRole\": {\r\n                        \"Cod\": \"OWNER\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        */\r\n        var result = await this.put(url.URL_CORE_PRESTAMOS, data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            return result;\r\n        }\r\n\r\n\r\n        return result;\r\n    }\r\n\r\n\r\n    async test() {\r\n\r\n        try {\r\n\r\n            let data = {\r\n                \"Acct\": {\r\n                    \"Activity\": 3201,\r\n                    \"Category\": 28212,\r\n                    \"CurCode\": \"USD\",\r\n                    \"CreditAcctData\": {\r\n                        \"CountryDestination\": \"PA\",\r\n                        \"PromiseLetter\": {\r\n                            \"AdvExpiryDt\": \"2022-12-31\",\r\n                            \"AutoExpiry\": true,\r\n                            \"BeneficiaryCust\": {\r\n                                \"PartyId\": \"\",\r\n                                \"PartyType\": \"\"\r\n                            },\r\n                            \"BeneficiaryName\": \"AUTO TUNNIG CA\",\r\n                            \"ContractType\": \"CA\",\r\n                            \"CustomerReferenceId\": \"MP2022154001\",\r\n                            \"DealSubType\": \"CMTA\",\r\n                            \"EffDt\": \"2022-06-03\",\r\n                            \"EventsProcessing\": \"ONLINE\",\r\n                            \"LimitRef\": \"\",\r\n                            \"LiquidationMode\": \"Automatic\",\r\n                            \"MaturityDt\": \"2022-12-31\",\r\n                            \"OpenDt\": \"2022-06-03\",\r\n                            \"PrincipalAmt\": {\r\n                                \"Amt\": 15000,\r\n                                \"CurCode\": \"USD\"\r\n                            }\r\n                        }\r\n                    },\r\n                    \"AcctMember\": {\r\n                        \"PartyKey\": {\r\n                            \"PartyId\": 600072721,\r\n                            \"PartyType\": 2\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            var result = await this.get(url.URL_CORE_TEST);\r\n            console.log(\"getLineSerial\", result)\r\n\r\n\r\n            return result;\r\n        }\r\n        catch (err) { }\r\n\r\n        return null;\r\n    }\r\n\r\n    async getTreasuryCurveCatalogo1() {\r\n        try {\r\n\r\n            let params = {\r\n                catalog_name: 'CURVA GRUPO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n\r\n            await convertToUpperCasesData(result.catalog)\r\n\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    async getTreasuryCurveCatalogoChild(code) {\r\n        try {\r\n\r\n            let params = {\r\n                catalog_name: 'CURVA TESORERIA',\r\n                parent_catalog_name: code,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n\r\n            await convertToUpperCasesData(result.catalog)\r\n\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}