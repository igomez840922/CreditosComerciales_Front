{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{isEmpty}from\"lodash\";import{Button,Card,CardBody,Col,Modal,ModalBody,ModalHeader,Row}from\"reactstrap\";import{AvField,AvForm}from\"availity-reactstrap-validation\";import FullCalendar from\"@fullcalendar/react\";import dayGridPlugin from\"@fullcalendar/daygrid\";import interactionPlugin,{Draggable}from\"@fullcalendar/interaction\";import BootstrapTheme from\"@fullcalendar/bootstrap\";//Import Breadcrumb\nimport Breadcrumbs from\"../../components/Common/Breadcrumb\";import{addNewEvent,deleteEvent,getCategories,getEvents,updateEvent}from\"../../store/actions\";import DeleteModal from\"./DeleteModal\";//css\nimport\"@fullcalendar/bootstrap/main.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Calender=function Calender(props){var events=props.events,categories=props.categories,onGetCategories=props.onGetCategories,onGetEvents=props.onGetEvents;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteModal=_useState4[0],setDeleteModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalcategory=_useState6[0],setModalcategory=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),event=_useState8[0],setEvent=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),selectedDay=_useState10[0],setSelectedDay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isEdit=_useState12[0],setIsEdit=_useState12[1];useEffect(function(){onGetCategories();onGetEvents();new Draggable(document.getElementById(\"external-events\"),{itemSelector:\".external-event\"});},[onGetCategories,onGetEvents]);/**\r\n   * Handling the modal state\r\n   */var toggle=function toggle(){setModal(!modal);if(!modal&&!isEmpty(event)&&!!isEdit){setTimeout(function(){setEvent({});setIsEdit(false);},500);}};var toggleCategory=function toggleCategory(){setModalcategory(!modalcategory);};/**\r\n   * Handling date click on calendar\r\n   */var handleDateClick=function handleDateClick(arg){setSelectedDay(arg);toggle();};/**\r\n   * Handling click on event on calendar\r\n   */var handleEventClick=function handleEventClick(arg){var event=arg.event;setEvent({id:event.id,title:event.title,title_category:event.title_category,start:event.start,className:event.classNames,category:event.classNames[0],event_category:event.classNames[0]});setIsEdit(true);toggle();};/**\r\n   * Handling submit event on event form\r\n   */var handleValidEventSubmit=function handleValidEventSubmit(e,values){var onAddNewEvent=props.onAddNewEvent,onUpdateEvent=props.onUpdateEvent;if(isEdit){var _updateEvent={id:event.id,title:values.title,classNames:values.category+\" text-white\",start:event.start};// update event\nonUpdateEvent(_updateEvent);}else{var newEvent={id:Math.floor(Math.random()*100),title:values[\"title\"],start:selectedDay?selectedDay.date:new Date(),className:values.category+\" text-white\"};// save new event\nonAddNewEvent(newEvent);}setSelectedDay(null);toggle();};var handleValidEventSubmitcategory=function handleValidEventSubmitcategory(event,values){var onAddNewEvent=props.onAddNewEvent;var newEvent={id:Math.floor(Math.random()*100),title:values[\"title_category\"],start:selectedDay?selectedDay.date:new Date(),className:values.event_category+\" text-white\"};// save new event\nonAddNewEvent(newEvent);toggleCategory();};/**\r\n   * On delete event\r\n   */var handleDeleteEvent=function handleDeleteEvent(){var onDeleteEvent=props.onDeleteEvent;onDeleteEvent(event);setDeleteModal(false);toggle();};/**\r\n   * On category darg event\r\n   */var _onDrag=function onDrag(event){event.preventDefault();};/**\r\n   * On calendar drop event\r\n   */var onDrop=function onDrop(event){var onAddNewEvent=props.onAddNewEvent;var draggedEl=event.draggedEl;var newEvent={id:Math.floor(Math.random()*100),title:draggedEl.innerText,start:event.date,className:draggedEl.className};onAddNewEvent(newEvent);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DeleteModal,{show:deleteModal,onDeleteClick:handleDeleteEvent,onCloseClick:function onCloseClick(){return setDeleteModal(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:\"Apps\",breadcrumbItem:\"Calendar\"}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{lg:3,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 mb-lg-0\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",className:\"btn font-16 btn-primary w-100\",onClick:toggleCategory,children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-circle-outline me-1\"}),\"Create New Event\"]}),/*#__PURE__*/_jsxs(\"div\",{id:\"external-events\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Drag and drop your event or click in the calendar\"}),categories&&categories.map(function(category,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(category.type,\" external-event fc-event text-white\"),draggable:true,onDrag:function onDrag(event){return _onDrag(event,category);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-checkbox-blank-circle font-size-11 me-2\"}),category.title]},\"cat-\"+category.id);})]})]})})}),/*#__PURE__*/_jsx(Col,{className:\"col-lg-9 app-calendar\",children:/*#__PURE__*/_jsx(Card,{className:\"mb-lg-0\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(FullCalendar,{plugins:[BootstrapTheme,dayGridPlugin,interactionPlugin],slotDuration:\"00:15:00\",handleWindowResize:true,themeSystem:\"bootstrap\",headerToolbar:{left:\"prev,next today\",center:\"title\",right:\"dayGridMonth,dayGridWeek,dayGridDay\"},events:events,editable:true,droppable:true,selectable:true,dateClick:handleDateClick,eventClick:handleEventClick,drop:onDrop})})})})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:modal,className:props.className,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggle,tag:\"h4\",children:!!isEdit?\"Edit Event\":\"Add Event\"}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(AvForm,{onValidSubmit:handleValidEventSubmit,children:[/*#__PURE__*/_jsxs(Row,{form:true,children:[/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsx(AvField,{name:\"title\",label:\"Event Name\",type:\"text\",errorMessage:\"Invalid name\",validate:{required:{value:true}},value:event&&event.title?event.title:\"\"})}),/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"category\",label:\"Select Category\",validate:{required:{value:true}},value:event?event.category:\"bg-primary\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"bg-danger\",children:\"Danger\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-success\",children:\"Success\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-primary\",children:\"Primary\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-info\",children:\"Info\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-dark\",children:\"Dark\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-warning\",children:\"Warning\"})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light me-2\",onClick:toggle,children:\"Close\"}),!!isEdit&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger me-2\",onClick:function onClick(){return setDeleteModal(true);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success save-event\",children:\"Save\"})]})})})]})})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalcategory,toggle:toggleCategory,className:props.className,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleCategory,tag:\"h4\",children:\"Add a category\"}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(AvForm,{onValidSubmit:handleValidEventSubmitcategory,children:[/*#__PURE__*/_jsxs(Row,{form:true,children:[/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsx(AvField,{name:\"title_category\",label:\"Category Name\",type:\"text\",errorMessage:\"Invalid name\",validate:{required:{value:true}},value:event.title_category?event.title_category:\"\"})}),/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"event_category\",label:\"Choose Category Color\",value:event?event.event_category:\"bg-primary\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"bg-danger\",children:\"Danger\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-success\",children:\"Success\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-primary\",children:\"Primary\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-info\",children:\"Info\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-dark\",children:\"Dark\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-warning\",children:\"Warning\"})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light me-2\",onClick:toggleCategory,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success save-event\",children:\"Save\"})]})})})]})})]})]})})]})]});};var mapStateToProps=function mapStateToProps(_ref){var calendar=_ref.calendar;return{events:calendar.events,categories:calendar.categories,isEventUpdated:calendar.isEventUpdated};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onGetEvents:function onGetEvents(){return dispatch(getEvents());},onGetCategories:function onGetCategories(){return dispatch(getCategories());},onAddNewEvent:function onAddNewEvent(event){return dispatch(addNewEvent(event));},onUpdateEvent:function onUpdateEvent(event){return dispatch(updateEvent(event));},onDeleteEvent:function onDeleteEvent(event){return dispatch(deleteEvent(event));}};};export default connect(mapStateToProps,mapDispatchToProps)(Calender);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/Calendar/index.js"],"names":["React","useEffect","useState","connect","isEmpty","Button","Card","CardBody","Col","Modal","ModalBody","ModalHeader","Row","AvField","AvForm","FullCalendar","dayGridPlugin","interactionPlugin","Draggable","BootstrapTheme","Breadcrumbs","addNewEvent","deleteEvent","getCategories","getEvents","updateEvent","DeleteModal","Calender","props","events","categories","onGetCategories","onGetEvents","modal","setModal","deleteModal","setDeleteModal","modalcategory","setModalcategory","event","setEvent","selectedDay","setSelectedDay","isEdit","setIsEdit","document","getElementById","itemSelector","toggle","setTimeout","toggleCategory","handleDateClick","arg","handleEventClick","id","title","title_category","start","className","classNames","category","event_category","handleValidEventSubmit","e","values","onAddNewEvent","onUpdateEvent","newEvent","Math","floor","random","date","Date","handleValidEventSubmitcategory","handleDeleteEvent","onDeleteEvent","onDrag","preventDefault","onDrop","draggedEl","innerText","map","i","type","left","center","right","required","value","mapStateToProps","calendar","isEventUpdated","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { connect } from \"react-redux\"\r\nimport { isEmpty } from \"lodash\"\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  Col,\r\n  Modal,\r\n  ModalBody,\r\n  ModalHeader,\r\n  Row,\r\n} from \"reactstrap\"\r\nimport { AvField, AvForm } from \"availity-reactstrap-validation\"\r\nimport FullCalendar from \"@fullcalendar/react\"\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\"\r\nimport interactionPlugin, { Draggable } from \"@fullcalendar/interaction\"\r\nimport BootstrapTheme from \"@fullcalendar/bootstrap\"\r\n//Import Breadcrumb\r\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\"\r\nimport {\r\n  addNewEvent,\r\n  deleteEvent,\r\n  getCategories,\r\n  getEvents,\r\n  updateEvent,\r\n} from \"../../store/actions\"\r\nimport DeleteModal from \"./DeleteModal\"\r\n//css\r\nimport \"@fullcalendar/bootstrap/main.css\"\r\nconst Calender = props => {\r\n  const { events, categories, onGetCategories, onGetEvents } = props\r\n  const [modal, setModal] = useState(false)\r\n  const [deleteModal, setDeleteModal] = useState(false)\r\n  const [modalcategory, setModalcategory] = useState(false)\r\n  const [event, setEvent] = useState({})\r\n  const [selectedDay, setSelectedDay] = useState(0)\r\n  const [isEdit, setIsEdit] = useState(false)\r\n  useEffect(() => {\r\n    onGetCategories()\r\n    onGetEvents()\r\n    new Draggable(document.getElementById(\"external-events\"), {\r\n      itemSelector: \".external-event\",\r\n    })\r\n  }, [onGetCategories, onGetEvents]);\r\n  /**\r\n   * Handling the modal state\r\n   */\r\n  const toggle = () => {\r\n    setModal(!modal)\r\n    if (!modal && !isEmpty(event) && !!isEdit) {\r\n      setTimeout(() => {\r\n        setEvent({})\r\n        setIsEdit(false)\r\n      }, 500)\r\n    }\r\n  }\r\n  const toggleCategory = () => {\r\n    setModalcategory(!modalcategory)\r\n  }\r\n  /**\r\n   * Handling date click on calendar\r\n   */\r\n  const handleDateClick = arg => {\r\n    setSelectedDay(arg)\r\n    toggle()\r\n  }\r\n  /**\r\n   * Handling click on event on calendar\r\n   */\r\n  const handleEventClick = arg => {\r\n    const event = arg.event\r\n    setEvent({\r\n      id: event.id,\r\n      title: event.title,\r\n      title_category: event.title_category,\r\n      start: event.start,\r\n      className: event.classNames,\r\n      category: event.classNames[0],\r\n      event_category: event.classNames[0],\r\n    })\r\n    setIsEdit(true)\r\n    toggle()\r\n  }\r\n  /**\r\n   * Handling submit event on event form\r\n   */\r\n  const handleValidEventSubmit = (e, values) => {\r\n    const { onAddNewEvent, onUpdateEvent } = props\r\n    if (isEdit) {\r\n      const updateEvent = {\r\n        id: event.id,\r\n        title: values.title,\r\n        classNames: values.category + \" text-white\",\r\n        start: event.start,\r\n      }\r\n      // update event\r\n      onUpdateEvent(updateEvent)\r\n    } else {\r\n      const newEvent = {\r\n        id: Math.floor(Math.random() * 100),\r\n        title: values[\"title\"],\r\n        start: selectedDay ? selectedDay.date : new Date(),\r\n        className: values.category + \" text-white\",\r\n      }\r\n      // save new event\r\n      onAddNewEvent(newEvent)\r\n    }\r\n    setSelectedDay(null)\r\n    toggle()\r\n  }\r\n  const handleValidEventSubmitcategory = (event, values) => {\r\n    const { onAddNewEvent } = props\r\n    const newEvent = {\r\n      id: Math.floor(Math.random() * 100),\r\n      title: values[\"title_category\"],\r\n      start: selectedDay ? selectedDay.date : new Date(),\r\n      className: values.event_category + \" text-white\",\r\n    }\r\n    // save new event\r\n    onAddNewEvent(newEvent)\r\n    toggleCategory()\r\n  }\r\n  /**\r\n   * On delete event\r\n   */\r\n  const handleDeleteEvent = () => {\r\n    const { onDeleteEvent } = props\r\n    onDeleteEvent(event)\r\n    setDeleteModal(false)\r\n    toggle()\r\n  }\r\n  /**\r\n   * On category darg event\r\n   */\r\n  const onDrag = (event) => {\r\n    event.preventDefault()\r\n  }\r\n  /**\r\n   * On calendar drop event\r\n   */\r\n  const onDrop = event => {\r\n    const { onAddNewEvent } = props\r\n    const draggedEl = event.draggedEl\r\n    const newEvent = {\r\n      id: Math.floor(Math.random() * 100),\r\n      title: draggedEl.innerText,\r\n      start: event.date,\r\n      className: draggedEl.className,\r\n    }\r\n    onAddNewEvent(newEvent)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <DeleteModal\r\n        show={deleteModal}\r\n        onDeleteClick={handleDeleteEvent}\r\n        onCloseClick={() => setDeleteModal(false)}\r\n      />\r\n      <div className=\"page-content\">\r\n\r\n          {/* Render Breadcrumb */}\r\n          <Breadcrumbs title=\"Apps\" breadcrumbItem=\"Calendar\" />\r\n          <Row>\r\n            <Col xs={12}>\r\n              <Row className=\"mb-4\">\r\n                <Col lg={3}>\r\n                  <Card className=\"h-100 mb-lg-0\">\r\n                    <CardBody>\r\n                      <Button\r\n                        color=\"primary\"\r\n                        className=\"btn font-16 btn-primary w-100\"\r\n                        onClick={toggleCategory}\r\n                      >\r\n                        <i className=\"mdi mdi-plus-circle-outline me-1\" />\r\n                        Create New Event\r\n                      </Button>\r\n                      <div id=\"external-events\">\r\n                        <br />\r\n                        <p className=\"text-muted\">\r\n                          Drag and drop your event or click in the calendar\r\n                        </p>\r\n                        {categories &&\r\n                          categories.map((category, i) => (\r\n                            <div\r\n                              className={`${category.type} external-event fc-event text-white`}\r\n                              key={\"cat-\" + category.id}\r\n                              draggable\r\n                              onDrag={event => onDrag(event, category)}\r\n                            >\r\n                              <i className=\"mdi mdi-checkbox-blank-circle font-size-11 me-2\" />\r\n                              {category.title}\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </CardBody>\r\n                  </Card>\r\n                </Col>\r\n                <Col className=\"col-lg-9 app-calendar\">\r\n                  <Card className=\"mb-lg-0\">\r\n                    <CardBody>\r\n                      <FullCalendar\r\n                        plugins={[\r\n                          BootstrapTheme,\r\n                          dayGridPlugin,\r\n                          interactionPlugin,\r\n                        ]}\r\n                        slotDuration={\"00:15:00\"}\r\n                        handleWindowResize={true}\r\n                        themeSystem=\"bootstrap\"\r\n                        headerToolbar={{\r\n                          left: \"prev,next today\",\r\n                          center: \"title\",\r\n                          right: \"dayGridMonth,dayGridWeek,dayGridDay\",\r\n                        }}\r\n                        events={events}\r\n                        editable={true}\r\n                        droppable={true}\r\n                        selectable={true}\r\n                        dateClick={handleDateClick}\r\n                        eventClick={handleEventClick}\r\n                        drop={onDrop}\r\n                      />\r\n                    </CardBody>\r\n                  </Card>\r\n                </Col>\r\n              </Row>\r\n              {/* New/Edit event modal */}\r\n              <Modal isOpen={modal} className={props.className}>\r\n                <ModalHeader toggle={toggle} tag=\"h4\">\r\n                  {!!isEdit ? \"Edit Event\" : \"Add Event\"}\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                  <AvForm onValidSubmit={handleValidEventSubmit}>\r\n                    <Row form>\r\n                      <Col className=\"col-12 mb-3\">\r\n                        <AvField\r\n                          name=\"title\"\r\n                          label=\"Event Name\"\r\n                          type=\"text\"\r\n                          errorMessage=\"Invalid name\"\r\n                          validate={{\r\n                            required: { value: true },\r\n                          }}\r\n                          value={(event && event.title) ? event.title : \"\"}\r\n                        />\r\n                      </Col>\r\n                      <Col className=\"col-12 mb-3\">\r\n                        <AvField\r\n                          type=\"select\"\r\n                          name=\"category\"\r\n                          label=\"Select Category\"\r\n                          validate={{\r\n                            required: { value: true },\r\n                          }}\r\n                          value={event ? event.category : \"bg-primary\"}\r\n                        >\r\n                          <option value=\"bg-danger\">Danger</option>\r\n                          <option value=\"bg-success\">Success</option>\r\n                          <option value=\"bg-primary\">Primary</option>\r\n                          <option value=\"bg-info\">Info</option>\r\n                          <option value=\"bg-dark\">Dark</option>\r\n                          <option value=\"bg-warning\">Warning</option>\r\n                        </AvField>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col>\r\n                        <div className=\"text-end\">\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-light me-2\"\r\n                            onClick={toggle}\r\n                          >\r\n                            Close\r\n                                  </button>\r\n                          {!!isEdit && (\r\n                            <button\r\n                              type=\"button\"\r\n                              className=\"btn btn-danger me-2\"\r\n                              onClick={() => setDeleteModal(true)}\r\n                            >\r\n                              Delete\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-success save-event\"\r\n                          >\r\n                            Save\r\n                            </button>\r\n                        </div>\r\n                      </Col>\r\n                    </Row>\r\n                  </AvForm>\r\n                </ModalBody>\r\n              </Modal>\r\n              <Modal\r\n                isOpen={modalcategory}\r\n                toggle={toggleCategory}\r\n                className={props.className}\r\n              >\r\n                <ModalHeader toggle={toggleCategory} tag=\"h4\">\r\n                  Add a category\r\n                        </ModalHeader>\r\n                <ModalBody>\r\n                  <AvForm\r\n                    onValidSubmit={handleValidEventSubmitcategory}\r\n                  >\r\n                    <Row form>\r\n                      <Col className=\"col-12 mb-3\">\r\n                        <AvField\r\n                          name=\"title_category\"\r\n                          label=\"Category Name\"\r\n                          type=\"text\"\r\n                          errorMessage=\"Invalid name\"\r\n                          validate={{\r\n                            required: { value: true },\r\n                          }}\r\n                          value={\r\n                            event.title_category\r\n                              ? event.title_category\r\n                              : \"\"\r\n                          }\r\n                        />\r\n                      </Col>\r\n                      <Col className=\"col-12 mb-3\">\r\n                        <AvField\r\n                          type=\"select\"\r\n                          name=\"event_category\"\r\n                          label=\"Choose Category Color\"\r\n                          value={\r\n                            event ? event.event_category : \"bg-primary\"\r\n                          }\r\n                        >\r\n                          <option value=\"bg-danger\">Danger</option>\r\n                          <option value=\"bg-success\">Success</option>\r\n                          <option value=\"bg-primary\">Primary</option>\r\n                          <option value=\"bg-info\">Info</option>\r\n                          <option value=\"bg-dark\">Dark</option>\r\n                          <option value=\"bg-warning\">Warning</option>\r\n                        </AvField>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col>\r\n                        <div className=\"text-right\">\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-light me-2\"\r\n                            onClick={toggleCategory}\r\n                          >\r\n                            Close\r\n                                  </button>\r\n                          <button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-success save-event\"\r\n                          >\r\n                            Save\r\n                                  </button>\r\n                        </div>\r\n                      </Col>\r\n                    </Row>\r\n                  </AvForm>\r\n                </ModalBody>\r\n              </Modal>\r\n            </Col>\r\n          </Row>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\nCalender.propTypes = {\r\n  events: PropTypes.array,\r\n  categories: PropTypes.array,\r\n  className: PropTypes.string,\r\n  onGetEvents: PropTypes.func,\r\n  onAddNewEvent: PropTypes.func,\r\n  onUpdateEvent: PropTypes.func,\r\n  onDeleteEvent: PropTypes.func,\r\n  onGetCategories: PropTypes.func,\r\n}\r\nconst mapStateToProps = ({ calendar }) => ({\r\n  events: calendar.events,\r\n  categories: calendar.categories,\r\n  isEventUpdated: calendar.isEventUpdated\r\n})\r\nconst mapDispatchToProps = dispatch => ({\r\n  onGetEvents: () => dispatch(getEvents()),\r\n  onGetCategories: () => dispatch(getCategories()),\r\n  onAddNewEvent: event => dispatch(addNewEvent(event)),\r\n  onUpdateEvent: event => dispatch(updateEvent(event)),\r\n  onDeleteEvent: event => dispatch(deleteEvent(event)),\r\n})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Calender)"]},"metadata":{},"sourceType":"module"}