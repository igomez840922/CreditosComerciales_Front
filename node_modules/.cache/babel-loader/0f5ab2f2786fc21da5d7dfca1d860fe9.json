{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//Gestionar Log de los Procesos\nimport React,{useEffect,useState}from\"react\";import{Link,useLocation}from\"react-router-dom\";import functionshelper from\"../../helpers/functions_helper\";import moment from\"moment\";import{Table,Card,CardHeader,CardBody,UncontrolledAlert,Pagination,PaginationItem,PaginationLink,CardFooter,Button,Row,Col}from\"reactstrap\";import Alert from'react-bootstrap/Alert';//i18n\nimport{withTranslation}from\"react-i18next\";//Import SweetAlert\nimport SweetAlert from\"react-bootstrap-sweetalert\";import ModalNewLog from\"./ModalNewLog\";import{BackendServices}from\"../../services/index\";import LocalStorageHelper from\"../../helpers/LocalStorageHelper\";import*as opt from\"../../helpers/options_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogProcess=function LogProcess(props){var _useState=useState(props.logProcessModel),_useState2=_slicedToArray(_useState,2),logProcessModel=_useState2[0],setlogProcessModel=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dataList=_useState4[0],setDataList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),displayNewLogModal=_useState6[0],setDisplayNewLogModal=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),mainDebtor=_useState8[0],setmainDebtor=_useState8[1];var _useState9=useState(new BackendServices()),_useState10=_slicedToArray(_useState9,2),backendServices=_useState10[0],setbackendServices=_useState10[1];var _useState11=useState({show:false,msg:\"\",isError:false}),_useState12=_slicedToArray(_useState11,2),msgData=_useState12[0],setmsgData=_useState12[1];var _useState13=useState(new LocalStorageHelper()),_useState14=_slicedToArray(_useState13,2),localStorageHelper=_useState14[0],setlocalStorageHelper=_useState14[1];useEffect(function(){if(logProcessModel!==undefined&&logProcessModel!==null){loadMainDebtor(logProcessModel.transactId);searchData(logProcessModel.transactId);}},[]);//nuevo log\nfunction toggleDisplayNewLogModal(){setDisplayNewLogModal(!displayNewLogModal);removeBodyCss();}function removeBodyCss(){document.body.classList.add(\"no_padding\");}function loadMainDebtor(transactionId){// consultarDeudorPrincipal\nbackendServices.consultPrincipalDebtor(transactionId).then(function(data){if(data!==undefined){setmainDebtor(data);}});}//buscamos las Propuestas de Credito\nfunction searchData(transactId){backendServices.getHistorical(transactId).then(function(resp){var dataRows=resp.map(function(dt,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{scope:\"row\",children:moment(dt.date).format(\"YYYY-MM-DD HH:mm:ss\")}),/*#__PURE__*/_jsx(\"td\",{children:dt.observations}),/*#__PURE__*/_jsx(\"td\",{children:dt.processBpmName/*functionshelper.getProcessName(dt.processId)*/}),/*#__PURE__*/_jsx(\"td\",{children:dt.activityBpmName/*functionshelper.getProcessName(dt.processId)*/}),/*#__PURE__*/_jsx(\"td\",{children:dt.statusDescription/*functionshelper.getProcessName(dt.processId)*/}),/*#__PURE__*/_jsx(\"td\",{children:dt.responsible})]},idx);});setDataList(dataRows);}).catch(function(err){console.log(err);});}function _onSaveLogProcess(observations){var _credentials$usr,_mainDebtor$personId;var credentials=localStorageHelper.get(opt.VARNAME_USRCREDENTIAL);logProcessModel.responsible=(_credentials$usr=credentials===null||credentials===void 0?void 0:credentials.usr)!==null&&_credentials$usr!==void 0?_credentials$usr:\"admin\";logProcessModel.clientId=(_mainDebtor$personId=mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.personId)!==null&&_mainDebtor$personId!==void 0?_mainDebtor$personId:logProcessModel.clientId;logProcessModel.observations=observations;console.log(\"onSaveLogProcess\",logProcessModel);backendServices.saveHistorical(logProcessModel).then(function(resp){if(resp!==undefined){searchData(logProcessModel.transactId);}else{//Mensaje ERROR\nshowMessage(props.t(\"ErrorSaveMessage\"),true);}}).catch(function(err){console.log(err);});}//mostrar mensaje \nfunction showMessage(message){var isError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setmsgData({show:true,msg:message,isError:isError});}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:props.t(\"Binnacle\")})}),/*#__PURE__*/_jsx(Col,{md:6,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Button,{className:\"btn\",color:\"success\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){toggleDisplayNewLogModal();},title:props.t(\"Add\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lg fa-plus-circle\"}),\" \",\" \"]})})]})}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(Alert,{show:msgData.show,variant:msgData.isError?\"danger\":\"success\",dismissible:true,onClose:function onClose(){setmsgData({show:false,msg:\"\",isError:false});},children:msgData.msg})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Date\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Comment\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Process\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Activity\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Status\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"User\")})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataList!==undefined&&dataList.length>0?dataList:/*#__PURE__*/_jsx(\"td\",{colspan:\"7\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{textAlign:\"center\"},children:props.t(\"NoData\")})})})]})})})})]})]}),/*#__PURE__*/_jsx(ModalNewLog,{onSaveLogProcess:function onSaveLogProcess(observations){_onSaveLogProcess(observations);},isOpen:displayNewLogModal,toggle:function toggle(){toggleDisplayNewLogModal();}})]});};export default withTranslation()(LogProcess);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/LogProcess/index.js"],"names":["React","useEffect","useState","Link","useLocation","functionshelper","moment","Table","Card","CardHeader","CardBody","UncontrolledAlert","Pagination","PaginationItem","PaginationLink","CardFooter","Button","Row","Col","Alert","withTranslation","SweetAlert","ModalNewLog","BackendServices","LocalStorageHelper","opt","LogProcess","props","logProcessModel","setlogProcessModel","dataList","setDataList","displayNewLogModal","setDisplayNewLogModal","mainDebtor","setmainDebtor","backendServices","setbackendServices","show","msg","isError","msgData","setmsgData","localStorageHelper","setlocalStorageHelper","undefined","loadMainDebtor","transactId","searchData","toggleDisplayNewLogModal","removeBodyCss","document","body","classList","add","transactionId","consultPrincipalDebtor","then","data","getHistorical","resp","dataRows","map","dt","idx","date","format","observations","processBpmName","activityBpmName","statusDescription","responsible","catch","err","console","log","onSaveLogProcess","credentials","get","VARNAME_USRCREDENTIAL","usr","clientId","personId","saveHistorical","showMessage","t","message","textAlign","margin","length"],"mappings":"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","sourcesContent":["//Gestionar Log de los Procesos\r\nimport React, { useEffect, useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport functionshelper from \"../../helpers/functions_helper\"\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n  Table,\r\n  Card,CardHeader,\r\n  CardBody,\r\n  UncontrolledAlert,\r\n  Pagination,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  CardFooter,\r\n  Button,\r\n  Row,\r\n  Col,\r\n} from \"reactstrap\"\r\n\r\nimport Alert from 'react-bootstrap/Alert'\r\n//i18n\r\nimport { withTranslation } from \"react-i18next\"\r\n//Import SweetAlert\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\n\r\nimport ModalNewLog from \"./ModalNewLog\"\r\nimport { BackendServices } from \"../../services/index\";\r\n\r\nimport LocalStorageHelper from \"../../helpers/LocalStorageHelper\";\r\nimport * as opt from \"../../helpers/options_helper\"\r\n\r\nconst LogProcess = props => {\r\n  \r\n  const [logProcessModel, setlogProcessModel] = useState(props.logProcessModel);\r\n  \r\n  const [dataList, setDataList] = useState([]);\r\n  const [displayNewLogModal, setDisplayNewLogModal] = useState(false);\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n    \r\n  const [msgData, setmsgData] = useState({ show: false, msg: \"\", isError: false });\r\n    \r\n  const [localStorageHelper, setlocalStorageHelper] = useState(new LocalStorageHelper());\r\n\r\n  useEffect(() => {\r\n    if (logProcessModel !== undefined && logProcessModel !== null) {\r\n      loadMainDebtor(logProcessModel.transactId);\r\n      searchData(logProcessModel.transactId)\r\n    } \r\n  }, []);\r\n\r\n  //nuevo log\r\n  function toggleDisplayNewLogModal() {\r\n    setDisplayNewLogModal(!displayNewLogModal);\r\n    removeBodyCss()\r\n  }\r\n  function removeBodyCss() {\r\n    document.body.classList.add(\"no_padding\")\r\n  }\r\n\r\n  function loadMainDebtor(transactionId) {\r\n    // consultarDeudorPrincipal\r\n    backendServices.consultPrincipalDebtor(transactionId)\r\n      .then((data) => {\r\n        if (data !== undefined) {\r\n          setmainDebtor(data);\r\n        }\r\n      });\r\n  }\r\n  \r\n  //buscamos las Propuestas de Credito\r\n  function searchData(transactId) {\r\n      backendServices.getHistorical(transactId)\r\n        .then(resp => {\r\n          const dataRows = resp.map((dt, idx) => (\r\n            <tr key={idx}>\r\n              <td scope=\"row\">{moment(dt.date).format(\"YYYY-MM-DD HH:mm:ss\")}</td>\r\n              <td>{dt.observations}</td>\r\n              <td>{dt.processBpmName /*functionshelper.getProcessName(dt.processId)*/}</td>\r\n              <td>{dt.activityBpmName /*functionshelper.getProcessName(dt.processId)*/}</td>\r\n              <td>{dt.statusDescription /*functionshelper.getProcessName(dt.processId)*/}</td>\r\n              <td>{dt.responsible}</td>\r\n            </tr>)\r\n          );\r\n          setDataList(dataRows);\r\n        }).catch(err => {console.log(err);});\r\n  }\r\n\r\n  function onSaveLogProcess(observations) {\r\n    \r\n    var credentials = localStorageHelper.get(opt.VARNAME_USRCREDENTIAL);\r\n    \r\n    logProcessModel.responsible = credentials?.usr??\"admin\"\r\n    logProcessModel.clientId = mainDebtor?.personId??logProcessModel.clientId;\r\n    logProcessModel.observations= observations;    \r\n    console.log(\"onSaveLogProcess\",logProcessModel)\r\n    backendServices.saveHistorical(logProcessModel)\r\n        .then(resp => {\r\n          if (resp !== undefined) {\r\n            searchData(logProcessModel.transactId);\r\n          }\r\n          else {\r\n            //Mensaje ERROR\r\n            showMessage(props.t(\"ErrorSaveMessage\"), true);\r\n          }\r\n        }).catch(err => {\r\n          console.log(err);\r\n        });\r\n  }\r\n\r\n  //mostrar mensaje \r\n  function showMessage(message, isError = false) {\r\n    setmsgData({ show: true, msg: message, isError: isError })\r\n  }\r\n  \r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card>\r\n\r\n      <CardHeader>\r\n              <Row>\r\n                <Col md={6}>\r\n                  <h4 className=\"card-title\">{props.t(\"Binnacle\")}</h4>\r\n                </Col>\r\n                <Col md={6} style={{ textAlign: \"right\"}}>\r\n                <Button className=\"btn\" color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { toggleDisplayNewLogModal() }} title={props.t(\"Add\")}><i className=\"fas fa-lg fa-plus-circle\"></i> {(\" \")}</Button>\r\n         \r\n                </Col>\r\n               </Row>                     \r\n            </CardHeader>\r\n          <CardBody>\r\n              <Row>\r\n                  <Col md=\"12\">\r\n                    <Alert show={msgData.show} variant={msgData.isError ? \"danger\" : \"success\"} dismissible onClose={() => { setmsgData({ show: false, msg: \"\", isError: false }) }}>\r\n                      {msgData.msg}\r\n                    </Alert>\r\n                  </Col>\r\n                </Row>\r\n        <Row>\r\n          <Col md={12}>\r\n            <div className=\"table-responsive styled-table-div\">\r\n              <Table className=\"table table-striped table-hover styled-table\">\r\n                <thead className=\"\">\r\n                  <tr>\r\n                    <th>{props.t(\"Date\")}</th>\r\n                    <th>{props.t(\"Comment\")}</th>\r\n                    <th>{props.t(\"Process\")}</th>\r\n                    <th>{props.t(\"Activity\")}</th>\r\n                    <th>{props.t(\"Status\")}</th>\r\n                    <th>{props.t(\"User\")}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {dataList!==undefined && dataList.length>0?\r\n                    dataList:\r\n                  <td colspan=\"7\"><div className=\"alert alert-info\" style={{ textAlign: \"center\" }}>{props.t(\"NoData\")}</div></td> }\r\n                </tbody>\r\n              </Table>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        \r\n      </CardBody>\r\n      </Card>\r\n      <ModalNewLog onSaveLogProcess={(observations) => { onSaveLogProcess(observations) }} isOpen={displayNewLogModal} toggle={() => { toggleDisplayNewLogModal() }} />\r\n      \r\n\r\n    </React.Fragment>\r\n  );\r\n}\r\nLogProcess.propTypes = {\r\n  logProcessModel: PropTypes.any, //LogProcessModel\r\n};\r\nexport default (withTranslation()(LogProcess))\r\n"]},"metadata":{},"sourceType":"module"}