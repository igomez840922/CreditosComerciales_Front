{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{BackendServices}from\"../../../services\";import{Row,Col,Label,Card,CardBody,CardHeader,Table}from\"reactstrap\";import{translationHelpers}from\"../../../helpers\";import{Link,useHistory,useLocation}from\"react-router-dom\";import*as url from\"../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GeneralesEmpresaIGRPreview=function GeneralesEmpresaIGRPreview(props){var _data$economicGroup,_data$economicGroup2,_data$economicGroup3,_data$economicActivit,_data$economicActivit2,_data$economicActivit3,_data$bank,_data$bank2,_data$bank3,_data$subeconomicActi,_data$subeconomicActi2,_data$subeconomicActi3;var MODEL={transactId:0,economicGroup:{code:\"\",name:\"\"},economicActivity:{code:\"\",name:\"\"},subeconomicActivity:{code:\"\",name:\"\"},bank:{code:\"\",name:\"\"},status:false,identificationType:null,customerDocumentId:null,customerNumberT24:null,firstName:null,secondName:null,firstLastName:null,secondLastName:null};var _useState=useState(MODEL),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),datosDeudores=_useState4[0],setDatosDeudores=_useState4[1];var api=new BackendServices();var _translationHelpers=translationHelpers('translation'),_translationHelpers2=_slicedToArray(_translationHelpers,1),t=_translationHelpers2[0];var location=useLocation();var history=useHistory();var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),locationData=_useState6[0],setLocationData=_useState6[1];useEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);}}initializeData();},[]);function initializeData(){console.log(props);api.consultGeneralDataIGR(props.transactId).then(function(resp){if(resp!==undefined){data.transactId=props.transactId;data.economicGroup.code=resp.economicGroup.code;data.economicGroup.name=resp.economicGroup.name;data.economicActivity.code=resp.economicActivity.code;data.economicActivity.name=resp.economicActivity.name;data.subeconomicActivity.code=resp.subeconomicActivity.code;data.subeconomicActivity.name=resp.subeconomicActivity.name;data.bank.code=resp.bank.code;data.bank.name=resp.bank.name;setData(data);}}).catch(function(err){console.log(err);});api.consultarCatalogoTipoPersonaDescripcion(\"\").then(function(resp2){if(resp2!==undefined){// consultarDeudores\napi.consultarDeudores(props.transactId).then(function(resp){if(resp===undefined)return;if(resp.length>0){setDatosDeudores(resp.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:resp2.find(function(x){return x.code===Number(data.typePerson);}).label}),/*#__PURE__*/_jsx(\"td\",{children:Number(data.typePerson)===2?data.name:data.name+\" \"+data.name2+\" \"+data.lastName+\" \"+data.lastName2}),/*#__PURE__*/_jsx(\"td\",{children:data.idType}),/*#__PURE__*/_jsx(\"td\",{children:data.clientDocId})]},data.personId);}));}else{setDatosDeudores(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{textAlign:'center'}})},1));}}).catch(function(err){console.log(err);});}});}return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:t(\"General Data\")}),(props===null||props===void 0?void 0:props.previewProposal)&&/*#__PURE__*/_jsxs(Link,{style:{margin:'5px',border:\"1px\",backgroundColor:\"#1C8464\",color:\"#fff\"},className:\"btn\",color:\"success\",type:\"button\",to:{pathname:'/creditocomercial/previsualizarPropCred/'+btoa(locationData===null||locationData===void 0?void 0:locationData.transactionId)},target:\"_blank\",children:[\" \",\" \",t(\"ConsultCreditProposal\"),\" \",/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-eye mdi-12px\"})]})]}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"PersonType\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"FullName\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"IdentificationType\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"IdentificationNumber\")})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:datosDeudores})]})}),/*#__PURE__*/_jsxs(Row,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsx(\"strong\",{htmlFor:\"clientNumber\",children:t(\"Economic Group\")})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$economicGroup=data.economicGroup)===null||_data$economicGroup===void 0?void 0:_data$economicGroup.name)===\"\"||((_data$economicGroup2=data.economicGroup)===null||_data$economicGroup2===void 0?void 0:_data$economicGroup2.name)==null?t(\"NoData\"):(_data$economicGroup3=data.economicGroup)===null||_data$economicGroup3===void 0?void 0:_data$economicGroup3.name})}),/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsx(\"strong\",{htmlFor:\"clientNumber\",children:t(\"Economic Activity\")})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$economicActivit=data.economicActivity)===null||_data$economicActivit===void 0?void 0:_data$economicActivit.name)===\"\"||((_data$economicActivit2=data.economicActivity)===null||_data$economicActivit2===void 0?void 0:_data$economicActivit2.name)==null?t(\"NoData\"):(_data$economicActivit3=data.economicActivity)===null||_data$economicActivit3===void 0?void 0:_data$economicActivit3.name})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsx(\"strong\",{htmlFor:\"clientNumber\",children:t(\"Banking\")})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$bank=data.bank)===null||_data$bank===void 0?void 0:_data$bank.name)===\"\"||((_data$bank2=data.bank)===null||_data$bank2===void 0?void 0:_data$bank2.name)==null?t(\"NoData\"):(_data$bank3=data.bank)===null||_data$bank3===void 0?void 0:_data$bank3.name})}),/*#__PURE__*/_jsx(Col,{xl:\"2\",children:/*#__PURE__*/_jsxs(\"strong\",{htmlFor:\"clientNumber\",children:[\"Sub\",t(\"Economic Activity\")]})}),/*#__PURE__*/_jsx(Col,{xl:\"4\",children:/*#__PURE__*/_jsx(Label,{htmlFor:\"clientNumber\",children:((_data$subeconomicActi=data.subeconomicActivity)===null||_data$subeconomicActi===void 0?void 0:_data$subeconomicActi.name)===\"\"||((_data$subeconomicActi2=data.subeconomicActivity)===null||_data$subeconomicActi2===void 0?void 0:_data$subeconomicActi2.name)==null?t(\"NoData\"):(_data$subeconomicActi3=data.subeconomicActivity)===null||_data$subeconomicActi3===void 0?void 0:_data$subeconomicActi3.name})})]})]})]});};export default GeneralesEmpresaIGRPreview;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/Dashboard/modal/GeneralesEmpresaIGRPreview.js"],"names":["React","useEffect","useState","BackendServices","Row","Col","Label","Card","CardBody","CardHeader","Table","translationHelpers","Link","useHistory","useLocation","url","GeneralesEmpresaIGRPreview","props","MODEL","transactId","economicGroup","code","name","economicActivity","subeconomicActivity","bank","status","identificationType","customerDocumentId","customerNumberT24","firstName","secondName","firstLastName","secondLastName","data","setData","datosDeudores","setDatosDeudores","api","t","location","history","locationData","setLocationData","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","initializeData","console","log","consultGeneralDataIGR","then","resp","catch","err","consultarCatalogoTipoPersonaDescripcion","resp2","consultarDeudores","map","find","x","Number","typePerson","label","name2","lastName","lastName2","idType","clientDocId","personId","textAlign","previewProposal","margin","border","backgroundColor","color","pathname","btoa"],"mappings":"+KAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,eAAT,KAAgC,mBAAhC,CAEA,OACIC,GADJ,CAEIC,GAFJ,CAGIC,KAHJ,CAIIC,IAJJ,CAKIC,QALJ,CAMIC,UANJ,CAOIC,KAPJ,KAQO,YARP,CASA,OAASC,kBAAT,KAAmC,kBAAnC,CACA,OAASC,IAAT,CAAeC,UAAf,CAA2BC,WAA3B,KAA8C,kBAA9C,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,6BAArB,C,wFAEA,GAAMC,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,CAACC,KAAD,CAAW,8OAE1C,GAAMC,CAAAA,KAAK,CAAG,CACVC,UAAU,CAAE,CADF,CAEVC,aAAa,CAAE,CACXC,IAAI,CAAE,EADK,CAEXC,IAAI,CAAE,EAFK,CAFL,CAMVC,gBAAgB,CAAE,CACdF,IAAI,CAAE,EADQ,CAEdC,IAAI,CAAE,EAFQ,CANR,CAUVE,mBAAmB,CAAE,CACjBH,IAAI,CAAE,EADW,CAEjBC,IAAI,CAAE,EAFW,CAVX,CAcVG,IAAI,CAAE,CACFJ,IAAI,CAAE,EADJ,CAEFC,IAAI,CAAE,EAFJ,CAdI,CAkBVI,MAAM,CAAE,KAlBE,CAmBVC,kBAAkB,CAAE,IAnBV,CAoBVC,kBAAkB,CAAE,IApBV,CAqBVC,iBAAiB,CAAE,IArBT,CAsBVC,SAAS,CAAE,IAtBD,CAuBVC,UAAU,CAAE,IAvBF,CAwBVC,aAAa,CAAE,IAxBL,CAyBVC,cAAc,CAAE,IAzBN,CAAd,CA4BA,cAAwB/B,QAAQ,CAACgB,KAAD,CAAhC,wCAAOgB,IAAP,eAAaC,OAAb,eACA,eAA0CjC,QAAQ,CAAC,IAAD,CAAlD,yCAAOkC,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,CAAAA,GAAG,CAAG,GAAInC,CAAAA,eAAJ,EAAZ,CACA,wBAAYQ,kBAAkB,CAAC,aAAD,CAA9B,4DAAO4B,CAAP,yBAEA,GAAMC,CAAAA,QAAQ,CAAG1B,WAAW,EAA5B,CACA,GAAM2B,CAAAA,OAAO,CAAG5B,UAAU,EAA1B,CAEA,eAAwCX,QAAQ,CAAC,IAAD,CAAhD,yCAAOwC,YAAP,eAAqBC,eAArB,eAEA1C,SAAS,CAAC,UAAM,CAEZ,GAAIuC,QAAQ,CAACN,IAAT,GAAkB,IAAlB,EAA0BM,QAAQ,CAACN,IAAT,GAAkBU,SAAhD,CAA2D,CACvD,GAAIJ,QAAQ,CAACN,IAAT,CAAcW,aAAd,GAAgCD,SAAhC,EAA6CJ,QAAQ,CAACN,IAAT,CAAcW,aAAd,CAA4BC,MAA5B,EAAsC,CAAvF,CAA0F,CACtF;AACA;AACAL,OAAO,CAACM,IAAR,CAAahC,GAAG,CAACiC,aAAjB,EACH,CAJD,IAKK,CACDC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAuCC,IAAI,CAACC,SAAL,CAAeZ,QAAQ,CAACN,IAAxB,CAAvC,EACAS,eAAe,CAACH,QAAQ,CAACN,IAAV,CAAf,CACH,CACJ,CAVD,IAWK,CACD;AACA,GAAImB,CAAAA,MAAM,CAAGJ,cAAc,CAACK,OAAf,CAAuB,cAAvB,CAAb,CACA,GAAID,MAAM,GAAKT,SAAX,EAAwBS,MAAM,GAAK,IAAvC,CAA6C,CACzCA,MAAM,CAAGF,IAAI,CAACI,KAAL,CAAWF,MAAX,CAAT,CACAV,eAAe,CAACU,MAAD,CAAf,CACH,CACJ,CAGDG,cAAc,GACjB,CAxBQ,CAwBN,EAxBM,CAAT,CA2BA,QAASA,CAAAA,cAAT,EAA0B,CACtBC,OAAO,CAACC,GAAR,CAAYzC,KAAZ,EACAqB,GAAG,CAACqB,qBAAJ,CAA0B1C,KAAK,CAACE,UAAhC,EAA4CyC,IAA5C,CAAiD,SAAAC,IAAI,CAAI,CACrD,GAAIA,IAAI,GAAKjB,SAAb,CAAwB,CACpBV,IAAI,CAACf,UAAL,CAAkBF,KAAK,CAACE,UAAxB,CACAe,IAAI,CAACd,aAAL,CAAmBC,IAAnB,CAA0BwC,IAAI,CAACzC,aAAL,CAAmBC,IAA7C,CACAa,IAAI,CAACd,aAAL,CAAmBE,IAAnB,CAA0BuC,IAAI,CAACzC,aAAL,CAAmBE,IAA7C,CACAY,IAAI,CAACX,gBAAL,CAAsBF,IAAtB,CAA6BwC,IAAI,CAACtC,gBAAL,CAAsBF,IAAnD,CACAa,IAAI,CAACX,gBAAL,CAAsBD,IAAtB,CAA6BuC,IAAI,CAACtC,gBAAL,CAAsBD,IAAnD,CACAY,IAAI,CAACV,mBAAL,CAAyBH,IAAzB,CAAgCwC,IAAI,CAACrC,mBAAL,CAAyBH,IAAzD,CACAa,IAAI,CAACV,mBAAL,CAAyBF,IAAzB,CAAgCuC,IAAI,CAACrC,mBAAL,CAAyBF,IAAzD,CACAY,IAAI,CAACT,IAAL,CAAUJ,IAAV,CAAiBwC,IAAI,CAACpC,IAAL,CAAUJ,IAA3B,CACAa,IAAI,CAACT,IAAL,CAAUH,IAAV,CAAiBuC,IAAI,CAACpC,IAAL,CAAUH,IAA3B,CACAa,OAAO,CAACD,IAAD,CAAP,CACH,CACJ,CAbD,EAaG4B,KAbH,CAaS,SAACC,GAAD,CAAS,CACdN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACH,CAfD,EAiBAzB,GAAG,CAAC0B,uCAAJ,CAA4C,EAA5C,EAAgDJ,IAAhD,CAAqD,SAAAK,KAAK,CAAI,CAC1D,GAAIA,KAAK,GAAKrB,SAAd,CAAyB,CACrB;AACAN,GAAG,CAAC4B,iBAAJ,CAAsBjD,KAAK,CAACE,UAA5B,EAAwCyC,IAAxC,CAA6C,SAAAC,IAAI,CAAI,CACjD,GAAIA,IAAI,GAAKjB,SAAb,CAAwB,OACxB,GAAIiB,IAAI,CAACf,MAAL,CAAc,CAAlB,CAAqB,CACjBT,gBAAgB,CAACwB,IAAI,CAACM,GAAL,CAAS,SAACjC,IAAD,qBACtB,mCACI,oBAAK+B,KAAK,CAACG,IAAN,CAAW,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAAChD,IAAF,GAAWiD,MAAM,CAACpC,IAAI,CAACqC,UAAN,CAArB,EAAZ,EAAoDC,KAAzD,EADJ,cAEI,oBAAKF,MAAM,CAACpC,IAAI,CAACqC,UAAN,CAAN,GAA4B,CAA5B,CAAgCrC,IAAI,CAACZ,IAArC,CAA4CY,IAAI,CAACZ,IAAL,CAAY,GAAZ,CAAkBY,IAAI,CAACuC,KAAvB,CAA+B,GAA/B,CAAqCvC,IAAI,CAACwC,QAA1C,CAAqD,GAArD,CAA2DxC,IAAI,CAACyC,SAAjH,EAFJ,cAGI,oBAAKzC,IAAI,CAAC0C,MAAV,EAHJ,cAII,oBAAK1C,IAAI,CAAC2C,WAAV,EAJJ,GAAS3C,IAAI,CAAC4C,QAAd,CADsB,EAAT,CAAD,CAAhB,CAOH,CARD,IAQO,CACHzC,gBAAgB,cACZ,iCACI,WAAI,OAAO,CAAC,GAAZ,CAAgB,KAAK,CAAE,CAAE0C,SAAS,CAAE,QAAb,CAAvB,EADJ,EAAS,CAAT,CADY,CAAhB,CAKH,CAEJ,CAlBD,EAkBGjB,KAlBH,CAkBS,SAACC,GAAD,CAAS,CACdN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACH,CApBD,EAqBH,CACJ,CAzBD,EA0BH,CAED,mBACI,MAAC,IAAD,yBACI,MAAC,UAAD,EAAY,SAAS,CAAC,gCAAtB,wBACI,WAAI,SAAS,CAAC,YAAd,UAA4BxB,CAAC,CAAC,cAAD,CAA7B,EADJ,CAEK,CAAAtB,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAE+D,eAAP,gBAA0B,MAAC,IAAD,EACvB,KAAK,CAAE,CAAEC,MAAM,CAAE,KAAV,CAAiBC,MAAM,CAAE,KAAzB,CAAgCC,eAAe,CAAE,SAAjD,CAA4DC,KAAK,CAAE,MAAnE,CADgB,CAEvB,SAAS,CAAC,KAFa,CAGvB,KAAK,CAAC,SAHiB,CAIvB,IAAI,CAAC,QAJkB,CAKvB,EAAE,CAAE,CACAC,QAAQ,CAAE,2CAA6CC,IAAI,CAAC5C,YAAD,SAACA,YAAD,iBAACA,YAAY,CAAEG,aAAf,CAD3D,CALmB,CAQvB,MAAM,CAAC,QARgB,WASzB,GATyB,KASnBN,CAAC,CAAC,uBAAD,CATkB,kBASS,UAAG,SAAS,CAAC,sBAAb,EATT,GAF/B,GADJ,cAcI,MAAC,QAAD,yBAEI,YAAK,SAAS,CAAC,mCAAf,uBACI,MAAC,KAAD,EAAO,SAAS,CAAC,oDAAjB,wBACI,oCACI,mCACI,iCAAI,wBAASA,CAAC,CAAC,YAAD,CAAV,EAAJ,EADJ,cAEI,iCAAI,wBAASA,CAAC,CAAC,UAAD,CAAV,EAAJ,EAFJ,cAGI,iCAAI,wBAASA,CAAC,CAAC,oBAAD,CAAV,EAAJ,EAHJ,cAII,iCAAI,wBAASA,CAAC,CAAC,sBAAD,CAAV,EAAJ,EAJJ,GADJ,EADJ,cASI,uBACKH,aADL,EATJ,GADJ,EAFJ,cAkBI,MAAC,GAAD,EAAK,SAAS,CAAC,MAAf,wBACI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,eAAQ,OAAO,CAAC,cAAhB,UAAgCG,CAAC,CAAC,gBAAD,CAAjC,EADJ,EADJ,cAII,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,KAAD,EAAO,OAAO,CAAC,cAAf,UAA+B,sBAAAL,IAAI,CAACd,aAAL,kEAAoBE,IAApB,IAA6B,EAA7B,EAAmC,uBAAAY,IAAI,CAACd,aAAL,oEAAoBE,IAApB,GAA4B,IAA/D,CAAsEiB,CAAC,CAAC,QAAD,CAAvE,uBAAoFL,IAAI,CAACd,aAAzF,+CAAoF,qBAAoBE,IAAvI,EADJ,EAJJ,cAOI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,eAAQ,OAAO,CAAC,cAAhB,UAAgCiB,CAAC,CAAC,mBAAD,CAAjC,EADJ,EAPJ,cAUI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,KAAD,EAAO,OAAO,CAAC,cAAf,UAA+B,wBAAAL,IAAI,CAACX,gBAAL,sEAAuBD,IAAvB,IAAgC,EAAhC,EAAsC,yBAAAY,IAAI,CAACX,gBAAL,wEAAuBD,IAAvB,GAA+B,IAArE,CAA4EiB,CAAC,CAAC,QAAD,CAA7E,yBAA0FL,IAAI,CAACX,gBAA/F,iDAA0F,uBAAuBD,IAAhJ,EADJ,EAVJ,GAlBJ,cAgCI,MAAC,GAAD,yBACI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,eAAQ,OAAO,CAAC,cAAhB,UAAgCiB,CAAC,CAAC,SAAD,CAAjC,EADJ,EADJ,cAII,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,KAAD,EAAO,OAAO,CAAC,cAAf,UAA+B,aAAAL,IAAI,CAACT,IAAL,gDAAWH,IAAX,IAAoB,EAApB,EAA0B,cAAAY,IAAI,CAACT,IAAL,kDAAWH,IAAX,GAAmB,IAA7C,CAAoDiB,CAAC,CAAC,QAAD,CAArD,cAAkEL,IAAI,CAACT,IAAvE,sCAAkE,YAAWH,IAA5G,EADJ,EAJJ,cAOI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,gBAAQ,OAAO,CAAC,cAAhB,iBAAmCiB,CAAC,CAAC,mBAAD,CAApC,GADJ,EAPJ,cAUI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACI,KAAC,KAAD,EAAO,OAAO,CAAC,cAAf,UAA+B,wBAAAL,IAAI,CAACV,mBAAL,sEAA0BF,IAA1B,IAAmC,EAAnC,EAAyC,yBAAAY,IAAI,CAACV,mBAAL,wEAA0BF,IAA1B,GAAkC,IAA3E,CAAkFiB,CAAC,CAAC,QAAD,CAAnF,yBAAgGL,IAAI,CAACV,mBAArG,iDAAgG,uBAA0BF,IAAzJ,EADJ,EAVJ,GAhCJ,GAdJ,GADJ,CAgEH,CAnLD,CAqLA,cAAeN,CAAAA,0BAAf","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { BackendServices } from \"../../../services\";\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Label,\r\n    Card,\r\n    CardBody,\r\n    CardHeader,\r\n    Table,\r\n} from \"reactstrap\"\r\nimport { translationHelpers } from \"../../../helpers\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport * as url from \"../../../helpers/url_helper\"\r\n\r\nconst GeneralesEmpresaIGRPreview = (props) => {\r\n\r\n    const MODEL = {\r\n        transactId: 0,\r\n        economicGroup: {\r\n            code: \"\",\r\n            name: \"\"\r\n        },\r\n        economicActivity: {\r\n            code: \"\",\r\n            name: \"\"\r\n        },\r\n        subeconomicActivity: {\r\n            code: \"\",\r\n            name: \"\"\r\n        },\r\n        bank: {\r\n            code: \"\",\r\n            name: \"\"\r\n        },\r\n        status: false,\r\n        identificationType: null,\r\n        customerDocumentId: null,\r\n        customerNumberT24: null,\r\n        firstName: null,\r\n        secondName: null,\r\n        firstLastName: null,\r\n        secondLastName: null\r\n    }\r\n\r\n    const [data, setData] = useState(MODEL)\r\n    const [datosDeudores, setDatosDeudores] = useState(null)\r\n\r\n    const api = new BackendServices();\r\n    const [t] = translationHelpers('translation');\r\n\r\n    const location = useLocation()\r\n    const history = useHistory();\r\n\r\n    const [locationData, setLocationData] = useState(null);\r\n\r\n    useEffect(() => {\r\n\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n            }\r\n        }\r\n\r\n\r\n        initializeData()\r\n    }, [])\r\n\r\n\r\n    function initializeData() {\r\n        console.log(props);\r\n        api.consultGeneralDataIGR(props.transactId).then(resp => {\r\n            if (resp !== undefined) {\r\n                data.transactId = props.transactId;\r\n                data.economicGroup.code = resp.economicGroup.code;\r\n                data.economicGroup.name = resp.economicGroup.name;\r\n                data.economicActivity.code = resp.economicActivity.code;\r\n                data.economicActivity.name = resp.economicActivity.name;\r\n                data.subeconomicActivity.code = resp.subeconomicActivity.code;\r\n                data.subeconomicActivity.name = resp.subeconomicActivity.name;\r\n                data.bank.code = resp.bank.code;\r\n                data.bank.name = resp.bank.name;\r\n                setData(data);\r\n            }\r\n        }).catch((err) => {\r\n            console.log(err);\r\n        });\r\n\r\n        api.consultarCatalogoTipoPersonaDescripcion(\"\").then(resp2 => {\r\n            if (resp2 !== undefined) {\r\n                // consultarDeudores\r\n                api.consultarDeudores(props.transactId).then(resp => {\r\n                    if (resp === undefined) return;\r\n                    if (resp.length > 0) {\r\n                        setDatosDeudores(resp.map((data) => (\r\n                            <tr key={data.personId}>\r\n                                <td>{resp2.find(x => x.code === Number(data.typePerson)).label}</td>\r\n                                <td>{Number(data.typePerson) === 2 ? data.name : data.name + \" \" + data.name2 + \" \" + data.lastName + \" \" + data.lastName2}</td>\r\n                                <td>{data.idType}</td>\r\n                                <td>{data.clientDocId}</td>\r\n                            </tr>)))\r\n                    } else {\r\n                        setDatosDeudores(\r\n                            <tr key={1}>\r\n                                <td colSpan=\"4\" style={{ textAlign: 'center' }}></td>\r\n                            </tr>);\r\n\r\n                    }\r\n\r\n                }).catch((err) => {\r\n                    console.log(err);\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader className=\"d-flex justify-content-between\">\r\n                <h5 className=\"card-title\">{t(\"General Data\")}</h5>\r\n                {props?.previewProposal && <Link\r\n                    style={{ margin: '5px', border: \"1px\", backgroundColor: \"#1C8464\", color: \"#fff\" }}\r\n                    className=\"btn\"\r\n                    color=\"success\"\r\n                    type=\"button\"\r\n                    to={{\r\n                        pathname: '/creditocomercial/previsualizarPropCred/' + btoa(locationData?.transactionId),\r\n                    }}\r\n                    target=\"_blank\"\r\n                >{\" \"} {t(\"ConsultCreditProposal\")} <i className=\"mdi mdi-eye mdi-12px\"></i></Link>}\r\n            </CardHeader>\r\n            <CardBody>\r\n\r\n                <div className=\"table-responsive styled-table-div\">\r\n                    <Table className=\"table table-striped table-hover styled-table table\">\r\n                        <thead >\r\n                            <tr>\r\n                                <th><strong>{t(\"PersonType\")}</strong></th>\r\n                                <th><strong>{t(\"FullName\")}</strong></th>\r\n                                <th><strong>{t(\"IdentificationType\")}</strong></th>\r\n                                <th><strong>{t(\"IdentificationNumber\")}</strong></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {datosDeudores}\r\n                        </tbody>\r\n                    </Table>\r\n                </div>\r\n\r\n                <Row className=\"mt-4\">\r\n                    <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">{t(\"Economic Group\")}</strong>\r\n                    </Col>\r\n                    <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.economicGroup?.name === \"\" || data.economicGroup?.name == null ? t(\"NoData\") : data.economicGroup?.name}</Label>\r\n                    </Col>\r\n                    <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">{t(\"Economic Activity\")}</strong>\r\n                    </Col>\r\n                    <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.economicActivity?.name === \"\" || data.economicActivity?.name == null ? t(\"NoData\") : data.economicActivity?.name}</Label>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">{t(\"Banking\")}</strong>\r\n                    </Col>\r\n                    <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.bank?.name === \"\" || data.bank?.name == null ? t(\"NoData\") : data.bank?.name}</Label>\r\n                    </Col>\r\n                    <Col xl=\"2\">\r\n                        <strong htmlFor=\"clientNumber\">Sub{t(\"Economic Activity\")}</strong>\r\n                    </Col>\r\n                    <Col xl=\"4\">\r\n                        <Label htmlFor=\"clientNumber\">{data.subeconomicActivity?.name === \"\" || data.subeconomicActivity?.name == null ? t(\"NoData\") : data.subeconomicActivity?.name}</Label>\r\n                    </Col>\r\n                </Row>\r\n            </CardBody>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default GeneralesEmpresaIGRPreview;"]},"metadata":{},"sourceType":"module"}