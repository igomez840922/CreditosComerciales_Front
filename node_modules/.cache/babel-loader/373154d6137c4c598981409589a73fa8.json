{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{translationHelpers}from'../../../helpers/translation-helper';import{Row,Col,Card,CardBody,Button,Label,Input,CardHeader,CardTitle,InputGroup,Table,CardFooter}from\"reactstrap\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Link,useHistory,useLocation}from\"react-router-dom\";import ModalNewDebt from'./ModalNewDebt';import ModalDeudasCortoPlazo from'../../../pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalDeudasCortoPlazo';import ModalDeudasLargoPlazo from'../../../pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalDeudasLargoPlazo';import{BackendServices,CoreServices}from'../../../services';import{AvForm,AvField}from\"availity-reactstrap-validation\";import\"flatpickr/dist/themes/material_blue.css\";import LoadingOverlay from\"react-loading-overlay\";import HeaderSections from\"../../Common/HeaderSections\";import moment from\"moment\";import Currency from\"../../../helpers/currency\";import*as url from\"../../../helpers/url_helper\";import{useTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var estiloTotales={backgroundColor:\"lightgrey\",color:\"black\"};var DebtSL=function DebtSL(props){var location=useLocation();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var history=useHistory();var api=new BackendServices();/**\r\n     * All use state\r\n     */var currencyData=new Currency();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isActiveLoading=_useState4[0],setIsActiveLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),termsDebts=_useState6[0],setTermsDebts=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),termsDebtsTotal=_useState8[0],setTermsDebtsTotal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),toggleModalNewDebt=_useState10[0],setToggleModalNewDebt=_useState10[1];/**\r\n     * End All use state\r\n     */var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}getTermsDebt(dataSession);},[]);function getTermsDebt(dataSession){setIsActiveLoading(true);(props===null||props===void 0?void 0:props.typeDebt)==='Short'&&api.consultBankingRelationsDebtsCP(dataSession===null||dataSession===void 0?void 0:dataSession.transactionId).then(function(resp){// setTermsDebtsTotal(setDebtTotal(resp.shortTermresult[resp.shortTermresult.length - 1]));\n// resp.shortTermresult.length = resp.shortTermresult.length - 1;\nsetTermsDebts(setDebt(resp.getBankingRelationCPDTOList));setIsActiveLoading(false);}).catch(function(err){setIsActiveLoading(false);});(props===null||props===void 0?void 0:props.typeDebt)==='Long'&&api.consultBankRelationsDebtsLP(dataSession===null||dataSession===void 0?void 0:dataSession.transactionId).then(function(resp){// console.log(resp);\n// setTermsDebtsTotal(setDebtTotal(resp.longTermresult[resp.longTermresult.length - 1]));\n// resp.longTermresult.length = resp.longTermresult.length - 1;\nsetTermsDebts(setDebt(resp.bankingRelationLPDTOList));setIsActiveLoading(false);}).catch(function(err){setIsActiveLoading(false);});}function setDebt(debt){return debt===null||debt===void 0?void 0:debt.map(function(data,key){var _data$facilityType,_data$amount,_data$debitBalance;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.bank}),/*#__PURE__*/_jsx(\"td\",{children:(_data$facilityType=data===null||data===void 0?void 0:data.facilityType)!==null&&_data$facilityType!==void 0?_data$facilityType:data===null||data===void 0?void 0:data.facilityTypeId}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",currencyData.formatTable(((_data$amount=data.amount)!==null&&_data$amount!==void 0?_data$amount:0).toFixed(2))]}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(data.date)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",currencyData.formatTable(((_data$debitBalance=data.debitBalance1)!==null&&_data$debitBalance!==void 0?_data$debitBalance:0).toFixed(2))]})]},key);});}function setDebtTotal(debt){return/*#__PURE__*/_jsxs(\"tr\",{className:\"table-info\",children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Total\").toLocaleUpperCase()}),/*#__PURE__*/_jsx(\"th\",{children:debt.balance}),/*#__PURE__*/_jsx(\"th\",{children:debt.approvedAmount}),/*#__PURE__*/_jsx(\"th\",{children:debt.variation}),/*#__PURE__*/_jsx(\"th\",{children:formatDate(debt.date,'dd-mmm-yyyy')})]});}function editDebt(debt){}function deleteDebt(debt){}function formatDate(date){return moment(date).format(\"DD/MM/YYYY\");}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HeaderSections,{title:props.title,t:t}),/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Bank\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"FacilityType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"ApprovedAmount\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"GrantDate\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Debit\")+\" \"+t(\"CurrentYear\")}),props.editable&&/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"#\",className:\"float-end\",onClick:function onClick(){toggleModalNewDebt();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-box-multiple-outline mdi-24px\"}),t(\"\")]}),\" \"]})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[termsDebts,(termsDebts===null||termsDebts===void 0?void 0:termsDebts.length)>0&&termsDebtsTotal]})]})})})})]});};DebtSL.defaultProps={editable:false};export default DebtSL;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/financialSummary/DebtSL.js"],"names":["React","useState","translationHelpers","Row","Col","Card","CardBody","Button","Label","Input","CardHeader","CardTitle","InputGroup","Table","CardFooter","SweetAlert","Link","useHistory","useLocation","ModalNewDebt","ModalDeudasCortoPlazo","ModalDeudasLargoPlazo","BackendServices","CoreServices","AvForm","AvField","LoadingOverlay","HeaderSections","moment","Currency","url","useTranslation","estiloTotales","backgroundColor","color","DebtSL","props","location","locationData","setLocationData","history","api","currencyData","isActiveLoading","setIsActiveLoading","termsDebts","setTermsDebts","termsDebtsTotal","setTermsDebtsTotal","toggleModalNewDebt","setToggleModalNewDebt","t","i18n","useEffect","dataSession","data","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","getTermsDebt","typeDebt","consultBankingRelationsDebtsCP","then","resp","setDebt","getBankingRelationCPDTOList","catch","err","consultBankRelationsDebtsLP","bankingRelationLPDTOList","debt","map","key","bank","facilityType","facilityTypeId","formatTable","amount","toFixed","formatDate","date","debitBalance1","setDebtTotal","toLocaleUpperCase","balance","approvedAmount","variation","editDebt","deleteDebt","format","title","editable","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../helpers/translation-helper';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Card,\r\n    CardBody,\r\n    Button,\r\n    Label,\r\n    Input,\r\n    CardHeader,\r\n    CardTitle,\r\n    InputGroup,\r\n    Table,\r\n    CardFooter\r\n} from \"reactstrap\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\"\r\nimport ModalNewDebt from './ModalNewDebt';\r\nimport ModalDeudasCortoPlazo from '../../../pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalDeudasCortoPlazo';\r\nimport ModalDeudasLargoPlazo from '../../../pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalDeudasLargoPlazo';\r\nimport { BackendServices, CoreServices } from '../../../services';\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport \"flatpickr/dist/themes/material_blue.css\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport HeaderSections from \"../../Common/HeaderSections\";\r\nimport moment from \"moment\";\r\nimport Currency from \"../../../helpers/currency\";\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport { useTranslation } from \"react-i18next\";\r\nconst estiloTotales = { backgroundColor: \"lightgrey\", color: \"black\" };\r\n\r\nconst DebtSL = (props) => {\r\n    const location = useLocation()\r\n    const [locationData, setLocationData] = useState(null);\r\n    const history = useHistory();\r\n    const api = new BackendServices()\r\n\r\n    /**\r\n     * All use state\r\n     */\r\n    const currencyData = new Currency();\r\n    const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n    const [termsDebts, setTermsDebts] = useState(null);\r\n    const [termsDebtsTotal, setTermsDebtsTotal] = useState(null);\r\n    const [toggleModalNewDebt, setToggleModalNewDebt] = useState(false);\r\n    /**\r\n     * End All use state\r\n     */\r\n\r\n    const { t, i18n } = useTranslation();\r\n\r\n    React.useEffect(() => {\r\n        let dataSession;\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                dataSession = location.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n        getTermsDebt(dataSession);\r\n    }, []);\r\n\r\n    function getTermsDebt(dataSession) {\r\n        setIsActiveLoading(true);\r\n\r\n        props?.typeDebt === 'Short' && api.consultBankingRelationsDebtsCP(dataSession?.transactionId).then(resp => {\r\n            // setTermsDebtsTotal(setDebtTotal(resp.shortTermresult[resp.shortTermresult.length - 1]));\r\n            // resp.shortTermresult.length = resp.shortTermresult.length - 1;\r\n            setTermsDebts(setDebt(resp.getBankingRelationCPDTOList))\r\n            setIsActiveLoading(false);\r\n        }).catch(err => {\r\n            setIsActiveLoading(false);\r\n        });\r\n\r\n        props?.typeDebt === 'Long' && api.consultBankRelationsDebtsLP(dataSession?.transactionId).then(resp => {\r\n            // console.log(resp);\r\n            // setTermsDebtsTotal(setDebtTotal(resp.longTermresult[resp.longTermresult.length - 1]));\r\n            // resp.longTermresult.length = resp.longTermresult.length - 1;\r\n            setTermsDebts(setDebt(resp.bankingRelationLPDTOList))\r\n            setIsActiveLoading(false);\r\n        }).catch(err => {\r\n            setIsActiveLoading(false);\r\n        });\r\n    }\r\n\r\n    function setDebt(debt) {\r\n        return debt?.map((data, key) => (\r\n            <tr key={key}>\r\n                <td>{data.bank}</td>\r\n                <td>{data?.facilityType ?? data?.facilityTypeId}</td>\r\n                <td>${currencyData.formatTable((data.amount ?? 0).toFixed(2))}</td>\r\n                <td>{formatDate(data.date)}</td>\r\n                <td>${currencyData.formatTable((data.debitBalance1 ?? 0).toFixed(2))}</td>\r\n            </tr>\r\n        ))\r\n    }\r\n\r\n    function setDebtTotal(debt) {\r\n        return (\r\n            <tr className=\"table-info\">\r\n                <th>{t(\"Total\").toLocaleUpperCase()}</th>\r\n                <th>{debt.balance}</th>\r\n                <th>{debt.approvedAmount}</th>\r\n                <th>{debt.variation}</th>\r\n                <th>{formatDate(debt.date, 'dd-mmm-yyyy')}</th>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    function editDebt(debt) {\r\n\r\n    }\r\n\r\n    function deleteDebt(debt) {\r\n\r\n    }\r\n\r\n    function formatDate(date) {\r\n        return moment(date).format(\"DD/MM/YYYY\");\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <HeaderSections title={props.title} t={t}></HeaderSections>\r\n            {/* <p className=\"card-title-desc\"></p> */}\r\n\r\n            <Col md=\"12\">\r\n                <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n                    <div className=\"table-responsive styled-table-div\">\r\n                        <Table className=\"table table-striped table-hover styled-table table\" responsive>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>{t(\"Bank\")}</th>\r\n                                    <th>{t(\"FacilityType\")}</th>\r\n                                    <th>{t(\"ApprovedAmount\")}</th>\r\n                                    <th>{t(\"GrantDate\")}</th>\r\n                                    <th>{t(\"Debit\") + \" \" + t(\"CurrentYear\")}</th>\r\n                                    {/* <th style={{ textAlign: \"right\" }}></th> */}\r\n\r\n                                    {props.editable && (<th><Link to=\"#\" className=\"float-end\" onClick={() => { toggleModalNewDebt() }}>\r\n                                        <i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i>{t(\"\")}\r\n                                    </Link> </th>)}\r\n\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {termsDebts}\r\n                                {termsDebts?.length > 0 && termsDebtsTotal}\r\n                            </tbody>\r\n                        </Table>\r\n                    </div>\r\n                </LoadingOverlay >\r\n\r\n            </Col>\r\n        </>\r\n    );\r\n};\r\n\r\nDebtSL.propTypes = {\r\n    title: PropTypes.string,\r\n    // items: PropTypes.array.isRequired,\r\n    editable: PropTypes.bool,\r\n    addDebt: PropTypes.func\r\n};\r\n\r\nDebtSL.defaultProps = {\r\n    editable: false\r\n};\r\n\r\n\r\nexport default DebtSL;\r\n"]},"metadata":{},"sourceType":"module"}