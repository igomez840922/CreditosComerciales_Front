{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext,useImperativeHandle,forwardRef}from'react';import{translationHelper}from'../../../../helpers';import{Card,CardBody,Row,Col,Button,Label}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import RiesgoCreditoContext from'../RiesgoCreditoContext';import ServicioRiesgoCredito from'../../../../services/RiesgoCredito/RiesgoCredito';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormConclusiones=/*#__PURE__*/forwardRef(function(props,ref){var t=translationHelper('environmental_risk');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),conclusions=_useState4[0],setConclusions=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUpdatingRecord=_useState6[0],setIsUpdatingRecord=_useState6[1];// services\nvar context=useContext(RiesgoCreditoContext);var servicioRiesgoCredito=new ServicioRiesgoCredito();useImperativeHandle(ref,function(){return{submit:function submit(){var form=document.getElementById('formRiesgoCreditoConclusiones');form.requestSubmit();return formValid;},getFormValidation:function getFormValidation(){return formValid;}};});useEffect(function(){// load data\nif(!context.transactionId){return;}var transactionId=context.transactionId;servicioRiesgoCredito.consultarRiesgoCreditoComercial(transactionId).then(function(info){if(info.transactId){setIsUpdatingRecord(true);}setConclusions(info.conclusions);}).catch(function(error){console.error('error fetch riesgo credito',error);});},[context]);function handleSubmit(event,errors,values){event.preventDefault();var isValid=errors.length===0;setFormValid(isValid);if(isValid){console.log('submit',values);var transactionId=context.transactionId;servicioRiesgoCredito.guardarInformacionRiesgoCredito(transactionId,values,isUpdatingRecord).then(function(result){console.log('save success',result);props.onSaveSuccess();}).catch(function(error){console.error('save error',error);});}}return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"Conclusiones y Recomendaciones\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(AvForm,{id:\"formRiesgoCreditoConclusiones\",className:\"needs-validation\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"conclusions\"}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"conclusions\",type:\"textarea\",id:\"conclusions\",value:conclusions,rows:\"4\"})]})})})})]})});});export default FormConclusiones;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/17_RiesgoCredito/riesgoCredito/Conclusiones.js"],"names":["useState","useEffect","useContext","useImperativeHandle","forwardRef","translationHelper","Card","CardBody","Row","Col","Button","Label","AvForm","AvField","AvGroup","RiesgoCreditoContext","ServicioRiesgoCredito","FormConclusiones","props","ref","t","formValid","setFormValid","conclusions","setConclusions","isUpdatingRecord","setIsUpdatingRecord","context","servicioRiesgoCredito","submit","form","document","getElementById","requestSubmit","getFormValidation","transactionId","consultarRiesgoCreditoComercial","then","info","transactId","catch","error","console","handleSubmit","event","errors","values","preventDefault","isValid","length","log","guardarInformacionRiesgoCredito","result","onSaveSuccess"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext, useImperativeHandle, forwardRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelper } from '../../../../helpers';\r\n\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport RiesgoCreditoContext from '../RiesgoCreditoContext';\r\nimport ServicioRiesgoCredito from '../../../../services/RiesgoCredito/RiesgoCredito';\r\n\r\nconst FormConclusiones = forwardRef((props, ref) => {\r\n\r\n  const t = translationHelper('environmental_risk');\r\n\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [conclusions, setConclusions] = useState('');\r\n  const [isUpdatingRecord, setIsUpdatingRecord] = useState(false);\r\n\r\n  // services\r\n  const context = useContext(RiesgoCreditoContext);\r\n  const servicioRiesgoCredito = new ServicioRiesgoCredito();\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    submit: () => {\r\n      const form = document.getElementById('formRiesgoCreditoConclusiones');\r\n      form.requestSubmit();\r\n      return formValid;\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n\r\n  useEffect(() => {\r\n    // load data\r\n    if (!context.transactionId) {\r\n      return;\r\n    }\r\n    const { transactionId } = context;\r\n    servicioRiesgoCredito.consultarRiesgoCreditoComercial(transactionId)\r\n      .then((info) => {\r\n        if( info.transactId ) {\r\n          setIsUpdatingRecord(true);\r\n        }\r\n        setConclusions(info.conclusions);\r\n      })\r\n      .catch((error) => {\r\n        console.error('error fetch riesgo credito', error);\r\n      });\r\n  }, [context]);\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n    if (isValid) {\r\n      console.log('submit', values);\r\n      const { transactionId } = context;\r\n      servicioRiesgoCredito.guardarInformacionRiesgoCredito(transactionId, values, isUpdatingRecord)\r\n        .then((result) => {\r\n          console.log('save success', result);\r\n          props.onSaveSuccess();\r\n        })\r\n        .catch((error) => {\r\n          console.error('save error', error);\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Card>\r\n      <CardBody>\r\n        <h4 className=\"card-title\">{ t(\"Conclusiones y Recomendaciones\") }</h4>\r\n        <p className=\"card-title-desc\"></p>\r\n        <AvForm id=\"formRiesgoCreditoConclusiones\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n          <Row className=\"my-3\">\r\n            <Col md=\"12\">\r\n              <AvGroup>\r\n                <Label htmlFor=\"conclusions\"></Label>\r\n                <AvField className=\"form-control\"\r\n                  name=\"conclusions\"\r\n                  type=\"textarea\"\r\n                  id=\"conclusions\"\r\n                  value={conclusions}\r\n                  rows=\"4\" />\r\n              </AvGroup>\r\n            </Col>\r\n          </Row>\r\n        </AvForm>\r\n      </CardBody>\r\n    </Card>\r\n  );\r\n});\r\n\r\n\r\nFormConclusiones.propTypes = {\r\n  onSaveSuccess: PropTypes.func\r\n};\r\n\r\nexport default FormConclusiones;\r\n"]},"metadata":{},"sourceType":"module"}