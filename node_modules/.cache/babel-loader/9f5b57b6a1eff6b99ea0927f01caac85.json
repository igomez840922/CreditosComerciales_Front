{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\components\\\\InformeFinanciero\\\\CreditPolicyReview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { translationHelpers } from '../../helpers/translation-helper';\nimport { Row, Col, Card, CardBody, Button, Label, Input, CardHeader, CardTitle, InputGroup, Table, CardFooter } from \"reactstrap\";\nimport AvField from 'availity-reactstrap-validation/lib/AvField';\nimport AvForm from 'availity-reactstrap-validation/lib/AvForm';\nimport { Link } from \"react-router-dom\";\nimport ModalPolicy from \"../Attachments/ModalPolicy\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\nimport { BackendServices, CoreServices, BpmServices } from \"../../services\";\nimport { useLocation, useHistory } from 'react-router-dom';\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CreditPolicyReview = props => {\n  _s();\n\n  React.useEffect(() => {\n    // Read Api Service data\n    LoadData();\n  }, []);\n  const [displayModal, setDisplayModal] = useState(false);\n  const [actions, setActions] = useState('');\n  const [SusscessDialog, setSusscessDialog] = useState(false);\n  const [dataRows, setdataRows] = useState(null);\n  const [DataSend, setDataSend] = useState(null);\n  const [confirm_alert, setconfirm_alert] = useState(false);\n  const [dataLocation, setData] = useState(props.data);\n  const [dataDelete, setDataDelete] = useState([]);\n  const [error_dlg, seterror_dlg] = useState(false);\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\n  const [t, c] = translationHelpers('commercial_credit', 'common');\n  const location = useLocation();\n\n  if (!props.policies) {\n    return null;\n  }\n\n  function LoadData() {\n    const backendServices = new BackendServices();\n    backendServices.consultarPoliticaCredito(dataLocation.transactionId).then(resp => {\n      setdataRows(resp.map((policy, index) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: policy.parameter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: policy.condition\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: policy.comply ? 'Si' : 'No'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: policy.observations\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              textAlign: \"right\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              color: \"link\",\n              onClick: resp => {\n                editarSowActual(policy);\n              },\n              className: \"btn btn-link\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"mdi mdi-border-color mdi-24px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 124\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              color: \"link\",\n              onClick: resp => {\n                eliminarSowActual(policy);\n              },\n              className: \"btn btn-link\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"mdi mdi-trash-can-outline mdi-24px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 126\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)]\n        }, 'row-' + policy.id + '-' + index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this);\n      }));\n    });\n  } // setdataRows(props.policies.map((policy) => {\n  //   return policy.conditions.map((condition, index) => (\n  //     <tr key={'row-' + policy.id + '-' + index}>\n  //       <th>{index === 0 ? policy.parameter : ''}</th>\n  //       <td>{condition.title}</td>\n  //       <td>\n  //         <AvField\n  //           className=\"form-control\"\n  //           name={\"comply[\" + index + \"]\"}\n  //           type=\"select\"\n  //           id={\"comply-\" + index}\n  //           value=\"N/A\">\n  //           <option>{c(\"Yes\")}</option>\n  //           <option>{c(\"No\")}</option>\n  //           <option>{c(\"N/A\")}</option>\n  //         </AvField>\n  //       </td>\n  //       <td>{condition.observations[0]}</td>\n  //     </tr>\n  //   )\n  //   )\n  // }\n  // ));\n\n\n  function toggleModal() {\n    setDisplayModal(!displayModal);\n  }\n\n  function handleSubmit(event, errors, values) {\n    event.preventDefault();\n\n    if (errors.length > 0) {\n      return;\n    } // props.onSubmit(values);\n\n  }\n\n  function DataUpdate(values) {\n    let datos = { ...values,\n      transactId: dataLocation.transactionId\n    };\n    const backendServices = new BackendServices();\n    backendServices.actualizarPoliticaCredito(datos).then(resp => {\n      if (resp.statusCode == \"200\") {\n        setSusscessDialog(true);\n      }\n    });\n  }\n\n  function DataInsert(values) {\n    setIsActiveLoading(true);\n    let datos = { ...values,\n      transactId: +dataLocation.transactionId,\n      debtorId: props.debtorId\n    };\n    const backendServices = new BackendServices();\n    backendServices.nuevoPoliticaCredito(datos).then(resp => {\n      if (resp.statusCode == \"200\") {\n        setSusscessDialog(true);\n      }\n\n      setIsActiveLoading(false);\n    });\n  }\n\n  function editarSowActual(data) {\n    toggleModal();\n    setActions('edit');\n    setDataSend(data);\n  }\n\n  function eliminarSowActual(data) {\n    setDataDelete(data);\n    setconfirm_alert(true);\n  }\n\n  function InsertShowCurrent() {\n    setActions('new');\n    setDataSend(null);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(CardBody, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"card-title\",\n          children: t(\"Credit Policy Review\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"#\",\n          className: \"float-end\",\n          onClick: () => {\n            toggleModal();\n            InsertShowCurrent();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"mdi mdi-plus-box-multiple-outline mdi-24px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), t(\"\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-title-desc\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AvForm, {\n        id: \"frmSearch\",\n        className: \"needs-validation\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n          active: isActiveLoading,\n          spinner: true,\n          text: t(\"WaitingPlease\"),\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-responsive\",\n                children: /*#__PURE__*/_jsxDEV(Table, {\n                  className: \"table mb-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    className: \"table-light\",\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: t(\"Parameters\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 176,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: t(\"Conditions\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: t(\"Comply\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: t(\"Observations\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 175,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: dataRows\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), displayModal && /*#__PURE__*/_jsxDEV(ModalPolicy, {\n      isOpen: displayModal,\n      toggle: toggleModal,\n      DataUpdate: DataUpdate,\n      DataInsert: DataInsert,\n      actions: actions,\n      DataSend: DataSend\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }, this), SusscessDialog ? /*#__PURE__*/_jsxDEV(SweetAlert, {\n      success: true,\n      title: t(\"SuccessDialog\"),\n      onConfirm: () => {\n        setSusscessDialog(false);\n        LoadData();\n      },\n      children: t(\"SuccessSaveMessage\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }, this) : null, confirm_alert ? /*#__PURE__*/_jsxDEV(SweetAlert, {\n      title: t(\"Areyousure\"),\n      warning: true,\n      showCancel: true,\n      confirmButtonText: t(\"Yesdeleteit\"),\n      confirmBtnBsStyle: \"success\",\n      cancelBtnBsStyle: \"danger\",\n      onConfirm: () => {\n        setIsActiveLoading(true);\n        const backendServices = new BackendServices();\n        backendServices.eliminarPoliticaCredit(dataLocation.transactionId, dataDelete.debtorId, dataDelete.itemId).then(resp => {\n          setIsActiveLoading(false);\n\n          if (resp.statusCode == \"500\") {\n            setconfirm_alert(false);\n            seterror_dlg(true);\n          } else {\n            setconfirm_alert(false);\n            setSusscessDialog(true);\n          }\n        }).catch(error => {\n          setconfirm_alert(false);\n          seterror_dlg(true);\n        });\n      },\n      onCancel: () => setconfirm_alert(false),\n      children: t(\"Youwontbeabletorevertthis\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CreditPolicyReview, \"g/Ot8d6fTGQRlYCQUmmePqytog4=\", false, function () {\n  return [useLocation];\n});\n\n_c = CreditPolicyReview;\nCreditPolicyReview.propTypes = {\n  policies: PropTypes.array\n};\nexport default CreditPolicyReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreditPolicyReview\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/InformeFinanciero/CreditPolicyReview.js"],"names":["React","useEffect","useState","PropTypes","translationHelpers","Row","Col","Card","CardBody","Button","Label","Input","CardHeader","CardTitle","InputGroup","Table","CardFooter","AvField","AvForm","Link","ModalPolicy","SweetAlert","BackendServices","CoreServices","BpmServices","useLocation","useHistory","LoadingOverlay","CreditPolicyReview","props","LoadData","displayModal","setDisplayModal","actions","setActions","SusscessDialog","setSusscessDialog","dataRows","setdataRows","DataSend","setDataSend","confirm_alert","setconfirm_alert","dataLocation","setData","data","dataDelete","setDataDelete","error_dlg","seterror_dlg","isActiveLoading","setIsActiveLoading","t","c","location","policies","backendServices","consultarPoliticaCredito","transactionId","then","resp","map","policy","index","parameter","condition","comply","observations","textAlign","editarSowActual","eliminarSowActual","id","toggleModal","handleSubmit","event","errors","values","preventDefault","length","DataUpdate","datos","transactId","actualizarPoliticaCredito","statusCode","DataInsert","debtorId","nuevoPoliticaCredito","InsertShowCurrent","eliminarPoliticaCredit","itemId","catch","error","propTypes","array"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\n\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../helpers/translation-helper';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  CardHeader,\r\n  CardTitle,\r\n  InputGroup,\r\n  Table,\r\n  CardFooter\r\n} from \"reactstrap\"\r\n\r\nimport AvField from 'availity-reactstrap-validation/lib/AvField';\r\nimport AvForm from 'availity-reactstrap-validation/lib/AvForm';\r\nimport { Link } from \"react-router-dom\";\r\nimport ModalPolicy from \"../Attachments/ModalPolicy\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../services\";\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\n\r\nconst CreditPolicyReview = (props) => {\r\n\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    LoadData();\r\n  }, []);\r\n\r\n\r\n  const [displayModal, setDisplayModal] = useState(false);\r\n  const [actions, setActions] = useState('');\r\n  const [SusscessDialog, setSusscessDialog] = useState(false);\r\n  const [dataRows, setdataRows] = useState(null);\r\n  const [DataSend, setDataSend] = useState(null);\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [dataLocation, setData] = useState(props.data);\r\n  const [dataDelete, setDataDelete] = useState([]);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n  const location = useLocation()\r\n\r\n  if (!props.policies) {\r\n    return null;\r\n  }\r\n\r\n  function LoadData() {\r\n    const backendServices = new BackendServices();\r\n    backendServices.consultarPoliticaCredito(dataLocation.transactionId).then(resp => {\r\n      setdataRows(resp.map((policy, index) => {\r\n        return (\r\n          <tr key={'row-' + policy.id + '-' + index}>\r\n            <th>{policy.parameter}</th>\r\n            <td>{policy.condition}</td>\r\n            <td>\r\n              {policy.comply ? 'Si' : 'No'}\r\n            </td>\r\n            <td>{policy.observations}</td>\r\n            <td style={{ textAlign: \"right\" }}>\r\n              <Button type=\"button\" color=\"link\" onClick={(resp) => { editarSowActual(policy) }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n              <Button type=\"button\" color=\"link\" onClick={(resp) => { eliminarSowActual(policy) }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n            </td>\r\n          </tr>\r\n\r\n        )\r\n      }\r\n      ));\r\n    });\r\n\r\n  }\r\n\r\n  // setdataRows(props.policies.map((policy) => {\r\n  //   return policy.conditions.map((condition, index) => (\r\n  //     <tr key={'row-' + policy.id + '-' + index}>\r\n  //       <th>{index === 0 ? policy.parameter : ''}</th>\r\n  //       <td>{condition.title}</td>\r\n  //       <td>\r\n  //         <AvField\r\n  //           className=\"form-control\"\r\n  //           name={\"comply[\" + index + \"]\"}\r\n  //           type=\"select\"\r\n  //           id={\"comply-\" + index}\r\n  //           value=\"N/A\">\r\n  //           <option>{c(\"Yes\")}</option>\r\n  //           <option>{c(\"No\")}</option>\r\n  //           <option>{c(\"N/A\")}</option>\r\n  //         </AvField>\r\n  //       </td>\r\n  //       <td>{condition.observations[0]}</td>\r\n  //     </tr>\r\n  //   )\r\n  //   )\r\n  // }\r\n  // ));\r\n\r\n  function toggleModal() {\r\n    setDisplayModal(!displayModal);\r\n  }\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    // props.onSubmit(values);\r\n  }\r\n\r\n  function DataUpdate(values) {\r\n    let datos = { ...values, transactId: dataLocation.transactionId };\r\n    const backendServices = new BackendServices();\r\n\r\n    backendServices.actualizarPoliticaCredito(datos).then(resp => {\r\n      if (resp.statusCode == \"200\") {\r\n        setSusscessDialog(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  function DataInsert(values) {\r\n    setIsActiveLoading(true);\r\n    let datos = { ...values, transactId: +dataLocation.transactionId, debtorId: props.debtorId };\r\n    const backendServices = new BackendServices();\r\n\r\n    backendServices.nuevoPoliticaCredito(datos).then(resp => {\r\n      if (resp.statusCode == \"200\") {\r\n        setSusscessDialog(true);\r\n      }\r\n      setIsActiveLoading(false);\r\n    });\r\n  }\r\n\r\n  function editarSowActual(data) {\r\n    toggleModal();\r\n    setActions('edit');\r\n    setDataSend(data);\r\n  }\r\n\r\n  function eliminarSowActual(data) {\r\n    setDataDelete(data)\r\n    setconfirm_alert(true);\r\n  }\r\n\r\n  function InsertShowCurrent() {\r\n    setActions('new');\r\n    setDataSend(null);\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardBody>\r\n        <div className=\"d-flex flex-row justify-content-between\">\r\n          <h4 className=\"card-title\">{t(\"Credit Policy Review\")}</h4>\r\n          <Link to=\"#\" className=\"float-end\" onClick={() => { toggleModal(); InsertShowCurrent() }}>\r\n            <i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i>{t(\"\")}\r\n          </Link>\r\n        </div>\r\n        <p className=\"card-title-desc\"></p>\r\n        <AvForm id=\"frmSearch\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n          <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n            <Row>\r\n              <Col lg=\"12\">\r\n                <div className=\"table-responsive\">\r\n                  <Table className=\"table mb-0\">\r\n                    <thead className=\"table-light\">\r\n                      <tr>\r\n                        <th>{t(\"Parameters\")}</th>\r\n                        <th>{t(\"Conditions\")}</th>\r\n                        <th>{t(\"Comply\")}</th>\r\n                        <th>{t(\"Observations\")}</th>\r\n                        <th></th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {dataRows}\r\n                    </tbody>\r\n                  </Table>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </LoadingOverlay>\r\n        </AvForm>\r\n      </CardBody>\r\n      {displayModal &&\r\n        <ModalPolicy\r\n          isOpen={displayModal}\r\n          toggle={toggleModal}\r\n          DataUpdate={DataUpdate}\r\n          DataInsert={DataInsert}\r\n          actions={actions}\r\n          DataSend={DataSend}\r\n        />}\r\n\r\n      {\r\n        SusscessDialog ? (\r\n          <SweetAlert\r\n            success\r\n            title={t(\"SuccessDialog\")}\r\n            onConfirm={() => {\r\n              setSusscessDialog(false)\r\n              LoadData();\r\n            }}\r\n          >\r\n            {t(\"SuccessSaveMessage\")}\r\n          </SweetAlert>\r\n        ) : null\r\n      }\r\n\r\n      {\r\n        confirm_alert ? (\r\n          <SweetAlert\r\n            title={t(\"Areyousure\")}\r\n            warning\r\n            showCancel\r\n            confirmButtonText={t(\"Yesdeleteit\")}\r\n            confirmBtnBsStyle=\"success\"\r\n            cancelBtnBsStyle=\"danger\"\r\n            onConfirm={() => {\r\n              setIsActiveLoading(true);\r\n              const backendServices = new BackendServices();\r\n              backendServices.eliminarPoliticaCredit(dataLocation.transactionId, dataDelete.debtorId, dataDelete.itemId).then(resp => {\r\n                setIsActiveLoading(false);\r\n                if (resp.statusCode == \"500\") {\r\n                  setconfirm_alert(false)\r\n                  seterror_dlg(true)\r\n                } else {\r\n                  setconfirm_alert(false)\r\n                  setSusscessDialog(true)\r\n                }\r\n              }).catch(error => {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(true)\r\n              })\r\n            }}\r\n            onCancel={() => setconfirm_alert(false)}\r\n          >\r\n            {t(\"Youwontbeabletorevertthis\")}\r\n          </SweetAlert>\r\n        ) : null\r\n      }\r\n    </Card>\r\n  );\r\n};\r\n\r\nCreditPolicyReview.propTypes = {\r\n  policies: PropTypes.array\r\n};\r\n\r\nexport default CreditPolicyReview;\r\n"]},"metadata":{},"sourceType":"module"}