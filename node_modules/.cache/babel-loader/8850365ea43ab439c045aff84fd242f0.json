{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\5_PropuestaCredito\\\\Secciones\\\\PreviewFacility.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { translationHelpers } from '../../../../helpers';\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\nimport { Row, Col, Table, Button } from \"reactstrap\";\nimport ModalNuevaComision from \"./ModalNuevaComision\";\nimport { BackendServices, CoreServices } from \"../../../../services\";\nimport { useTranslation } from \"react-i18next\";\nimport Currency from \"../../../../helpers/currency\";\nimport { uniq_key } from \"../../../../helpers/unq_key\";\nimport * as url from \"../../../../helpers/url_helper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PreviewFacility = props => {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const api = new BackendServices();\n  const coreServices = new CoreServices();\n  const currencyData = new Currency();\n  const [Facilidades, setFacilidades] = useState(null);\n  const location = useLocation();\n  const history = useHistory();\n  useEffect(() => {\n    var _location$pathname;\n\n    let dataSession = {};\n\n    if (location === null || location === void 0 ? void 0 : (_location$pathname = location.pathname) === null || _location$pathname === void 0 ? void 0 : _location$pathname.split(\"previsualizarPropCred/\")[1]) {\n      var _location$pathname2;\n\n      dataSession = {\n        transactionId: atob(location === null || location === void 0 ? void 0 : (_location$pathname2 = location.pathname) === null || _location$pathname2 === void 0 ? void 0 : _location$pathname2.split(\"previsualizarPropCred/\")[1])\n      };\n    }\n\n    sessionStorage.setItem('locationData', JSON.stringify(dataSession));\n\n    if (location.data !== null && location.data !== undefined) {\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\n        //location.data.transactionId = 0;\n        //checkAndCreateProcedure(location.data);\n        history.push(url.URL_DASHBOARD);\n      } else {\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\n        dataSession = location.data;\n      }\n    } else {\n      //chequeamos si tenemos guardado en session\n      var result = sessionStorage.getItem('locationData');\n\n      if (result !== undefined && result !== null) {\n        result = JSON.parse(result);\n        dataSession = result;\n      }\n    }\n\n    loadFacilities(dataSession);\n  }, []);\n\n  function loadFacilities(dataSession) {\n    api.consultarDeudores(dataSession.transactionId).then(data2 => {\n      if (data2 !== null && data2 !== undefined) {\n        let jsonDeudores = [];\n\n        for (let i = 0; i < data2.length; i++) {\n          jsonDeudores.push({\n            label: data2[i][\"typePerson\"] == \"2\" ? data2[i][\"name\"] : data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"],\n            value: data2[i][\"personId\"]\n          });\n        } // retrieveProposalType\n\n\n        api.retrieveProposalType().then(propuesta => {\n          // retrieveFacilityType\n          api.retrieveFacilityType().then(facilidad => {\n            // consultarFacilidades\n            api.retrieveSubproposalType().then(async proposalType => {\n              let debtors = await api.consultarDeudores(dataSession.transactionId);\n              let typeIdent = await api.consultarCatalogoTipoIdentificacion();\n              let environmentalRisk = await api.consultEnvironmentalAspectsIGR(dataSession.transactionId);\n              let guarantees = await coreServices.getTipoGarantiaCatalogo();\n              let sureties = await api.retrieveBailType();\n              let requestId = await api.consultGeneralDataPropCred(dataSession === null || dataSession === void 0 ? void 0 : dataSession.transactionId);\n              requestId = requestId[0].requestId;\n              console.log(requestId);\n              api.consultarFacilidades(requestId).then(async resp => {\n                var _resp;\n\n                if (((_resp = resp) === null || _resp === void 0 ? void 0 : _resp.filter(data => data.debtor != \"  \").length) > 0) {\n                  resp = currencyData.orderByJSON(resp, 'facilityId', 'asc');\n                  console.log(resp);\n                  let rows = [];\n                  let index = 1;\n\n                  for (const data of resp) {\n                    var _jsonDeudores$find, _typeIdent$find$descr, _typeIdent$find, _paymentProgramRows, _disbursementFormRows, _suretiesRows, _commissionRows, _data$amount, _debtor$name, _debtor$name2, _debtor$lastName, _debtor$lastName2, _data$balance, _propuesta$find, _facilidad$find, _proposalType$find, _data$purpose, _data$sublimits, _data$proposalRate, _data$noSubsidyRate, _data$effectiveRate, _data$term, _guaranteesFacility$r, _data$finantialCondit, _environmentalRisk$en, _environmentalRisk$en2, _data$legalDocumentat, _data$otherConditions;\n\n                    let debtor0 = (_jsonDeudores$find = jsonDeudores.find(x => x.value === Number(data.debtor))) === null || _jsonDeudores$find === void 0 ? void 0 : _jsonDeudores$find.label;\n                    let debtor = debtors.find(debtr => {\n                      var _debtr$name, _debtr$lastName, _debtr$lastName2;\n\n                      return debtr.name + (((_debtr$name = debtr.name2) === null || _debtr$name === void 0 ? void 0 : _debtr$name.length) > 0 ? ' ' + debtr.name2 : '') + (((_debtr$lastName = debtr.lastName) === null || _debtr$lastName === void 0 ? void 0 : _debtr$lastName.length) > 0 ? ' ' + debtr.lastName : '') + (((_debtr$lastName2 = debtr.lastName2) === null || _debtr$lastName2 === void 0 ? void 0 : _debtr$lastName2.length) > 0 ? ' ' + debtr.lastName2 : '') === debtor0;\n                    });\n                    let identification = (_typeIdent$find$descr = (_typeIdent$find = typeIdent.find(identification => identification.id === (debtor === null || debtor === void 0 ? void 0 : debtor.idType))) === null || _typeIdent$find === void 0 ? void 0 : _typeIdent$find.description) !== null && _typeIdent$find$descr !== void 0 ? _typeIdent$find$descr : '';\n                    let guaranteesFacility = await api.consultarGarantiaPropCred(data.facilityId);\n                    let guaranteesRows = [];\n\n                    for (const guarantee of guaranteesFacility) {\n                      var _guarantees$Records$f, _guarantee$commercial, _guarantee$fastValue;\n\n                      guaranteesRows.push( /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Warrant Type\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 106,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: guarantees === null || guarantees === void 0 ? void 0 : (_guarantees$Records$f = guarantees.Records.find(x => x.Code === guarantee.guaranteeTypeName)) === null || _guarantees$Records$f === void 0 ? void 0 : _guarantees$Records$f.Description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 107,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: guarantee.guaranteeSubtypeDesc\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 110,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"12\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 113,\n                            columnNumber: 73\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 105,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"CommercialValue\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 117,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: currencyData.formatTable((_guarantee$commercial = guarantee.commercialValue) !== null && _guarantee$commercial !== void 0 ? _guarantee$commercial : 0)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 118,\n                            columnNumber: 73\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 116,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"QuickSaleValue\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 123,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: currencyData.formatTable((_guarantee$fastValue = guarantee.fastValue) !== null && _guarantee$fastValue !== void 0 ? _guarantee$fastValue : 0)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 124,\n                            columnNumber: 73\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 122,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: \"LTV %\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 129,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: [currencyData.formatTable(guarantee.ltv), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 130,\n                            columnNumber: 73\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 128,\n                          columnNumber: 69\n                        }, this)]\n                      }, void 0, true));\n                    }\n\n                    let paymentProgramRows = await api.consultListProgramPagoPropCred(data.facilityId);\n                    paymentProgramRows = ((_paymentProgramRows = paymentProgramRows) === null || _paymentProgramRows === void 0 ? void 0 : _paymentProgramRows.length) > 0 ? paymentProgramRows.map(payments => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"PaymentProgram\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 140,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: payments.paymentProgram\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 141,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: payments.observations\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 142,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"12\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 147\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"PaymentProgram\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 146,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"14\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 147,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 67\n                    }, this);\n                    let disbursementFormRows = await api.consultDisbursementListPropCred(data.facilityId);\n                    disbursementFormRows = ((_disbursementFormRows = disbursementFormRows) === null || _disbursementFormRows === void 0 ? void 0 : _disbursementFormRows.length) > 0 ? disbursementFormRows.map(disbursement => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"DisbursementForm\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: disbursement.disbursementTypeId\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: disbursement.observations\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"12\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 155,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 157\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"DisbursementForm\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 158,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"14\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 159,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 157,\n                      columnNumber: 67\n                    }, this);\n                    let suretiesRows = await api.consultarFianzaPropCred(data.facilityId);\n                    suretiesRows = ((_suretiesRows = suretiesRows) === null || _suretiesRows === void 0 ? void 0 : _suretiesRows.length) > 0 ? suretiesRows.map(suretie => {\n                      var _sureties$find;\n\n                      return /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: t(\"Sureties\")\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 165,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: (_sureties$find = sureties.find(x => x.id === suretie.typeBail)) === null || _sureties$find === void 0 ? void 0 : _sureties$find.description\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 166,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          colSpan: \"13\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 167,\n                          columnNumber: 61\n                        }, this)]\n                      }, uniq_key(), true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 164,\n                        columnNumber: 128\n                      }, this);\n                    }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"Sureties\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"14\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 171,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 67\n                    }, this);\n                    let commissionRows = await api.consultCommissionPropCred(data.facilityId);\n                    commissionRows = commissionRows.commissions;\n                    console.log(commissionRows);\n                    commissionRows = ((_commissionRows = commissionRows) === null || _commissionRows === void 0 ? void 0 : _commissionRows.length) > 0 ? commissionRows.map(commission => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"Commission\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: commission.comisionType.code\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"13\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 137\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: t(\"Commission\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 184,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"14\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 61\n                      }, this)]\n                    }, uniq_key(), true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 67\n                    }, this);\n                    rows.push(data.debtor != \"  \" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                            children: t(\"Escrownumber\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 195,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: t(\"C.R\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 196,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: t(\"Amount\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 197,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: t(\"Debtor\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 198,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: t(\"Balance\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 199,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 194,\n                          columnNumber: 73\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 193,\n                        columnNumber: 69\n                      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: index++\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 204,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: data.cr\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 205,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [\"$\", currencyData.formatTable((_data$amount = data === null || data === void 0 ? void 0 : data.amount) !== null && _data$amount !== void 0 ? _data$amount : 0)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 206,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: `${(_debtor$name = debtor === null || debtor === void 0 ? void 0 : debtor.name) !== null && _debtor$name !== void 0 ? _debtor$name : ''} ${(_debtor$name2 = debtor === null || debtor === void 0 ? void 0 : debtor.name2) !== null && _debtor$name2 !== void 0 ? _debtor$name2 : ''} ${(_debtor$lastName = debtor === null || debtor === void 0 ? void 0 : debtor.lastName) !== null && _debtor$lastName !== void 0 ? _debtor$lastName : ''} ${(_debtor$lastName2 = debtor === null || debtor === void 0 ? void 0 : debtor.lastName2) !== null && _debtor$lastName2 !== void 0 ? _debtor$lastName2 : ''}`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 207,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [\"$\", currencyData.formatTable((_data$balance = data === null || data === void 0 ? void 0 : data.balance) !== null && _data$balance !== void 0 ? _data$balance : 0)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 208,\n                            columnNumber: 77\n                          }, this)]\n                        }, uniq_key(), true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 203,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Proposal\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 211,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_propuesta$find = propuesta.find(x => {\n                              var _data$proposedType;\n\n                              return x.id === ((_data$proposedType = data === null || data === void 0 ? void 0 : data.proposedType) !== null && _data$proposedType !== void 0 ? _data$proposedType : data === null || data === void 0 ? void 0 : data.proposalTypeId);\n                            })) === null || _propuesta$find === void 0 ? void 0 : _propuesta$find.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 212,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 210,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"FacilityType\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 215,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_facilidad$find = facilidad.find(x => {\n                              var _data$facilityType;\n\n                              return x.id === ((_data$facilityType = data === null || data === void 0 ? void 0 : data.facilityType) !== null && _data$facilityType !== void 0 ? _data$facilityType : data === null || data === void 0 ? void 0 : data.facilityTypeId);\n                            })) === null || _facilidad$find === void 0 ? void 0 : _facilidad$find.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 216,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 214,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"ProposalSubType\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 219,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_proposalType$find = proposalType.find(x => x.id === (data === null || data === void 0 ? void 0 : data.proposalTypeName))) === null || _proposalType$find === void 0 ? void 0 : _proposalType$find.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 220,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 218,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Purpose\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 223,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_data$purpose = data.purpose) !== null && _data$purpose !== void 0 ? _data$purpose : ''\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 224,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 222,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Sublimit\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 227,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_data$sublimits = data.sublimits) !== null && _data$sublimits !== void 0 ? _data$sublimits : ''\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 228,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 226,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Rate\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 231,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: [currencyData.formatTable((_data$proposalRate = data === null || data === void 0 ? void 0 : data.proposalRate) !== null && _data$proposalRate !== void 0 ? _data$proposalRate : 0), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 232,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 230,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"RateWithoutSubsidy\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 235,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: [currencyData.formatTable((_data$noSubsidyRate = data === null || data === void 0 ? void 0 : data.noSubsidyRate) !== null && _data$noSubsidyRate !== void 0 ? _data$noSubsidyRate : 0), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 236,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 234,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"EffectiveRate\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 239,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: [currencyData.formatTable((_data$effectiveRate = data === null || data === void 0 ? void 0 : data.effectiveRate) !== null && _data$effectiveRate !== void 0 ? _data$effectiveRate : 0), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 240,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: \"FECI\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 243,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: data.feci ? t(\"Yes\") : t(\"No\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 244,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 242,\n                          columnNumber: 73\n                        }, this), commissionRows, /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Term\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 252,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_data$term = data.term) !== null && _data$term !== void 0 ? _data$term : ''\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 253,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 251,\n                          columnNumber: 73\n                        }, this), paymentProgramRows, disbursementFormRows, /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: /*#__PURE__*/_jsxDEV(\"b\", {\n                              children: t(\"Guarantee\")\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 261,\n                              columnNumber: 81\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 261,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 262,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 260,\n                          columnNumber: 73\n                        }, this), guaranteesRows, /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: \"LTV % TOTAL\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 270,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: [currencyData.formatTable((_guaranteesFacility$r = guaranteesFacility.reduce((acu, crr) => acu + crr.ltv, 0)) !== null && _guaranteesFacility$r !== void 0 ? _guaranteesFacility$r : 0), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 271,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 269,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Escrow\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 276,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: data.applyEscrow ? t(\"Yes\") : t(\"No\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 277,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 275,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"FinancialConditions\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 282,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_data$finantialCondit = data === null || data === void 0 ? void 0 : data.finantialConditions) !== null && _data$finantialCondit !== void 0 ? _data$finantialCondit : \"\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 283,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 281,\n                          columnNumber: 73\n                        }, this), suretiesRows, /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Environmental and social risk category\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 291,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_environmentalRisk$en = environmentalRisk === null || environmentalRisk === void 0 ? void 0 : (_environmentalRisk$en2 = environmentalRisk.environmentalAspectsDTO) === null || _environmentalRisk$en2 === void 0 ? void 0 : _environmentalRisk$en2.riskClassificationConfirmation) !== null && _environmentalRisk$en !== void 0 ? _environmentalRisk$en : \"\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 292,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 290,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"Status of Legal Documentation\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 297,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_data$legalDocumentat = data === null || data === void 0 ? void 0 : data.legalDocumentation) !== null && _data$legalDocumentat !== void 0 ? _data$legalDocumentat : \"\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 298,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 296,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: t(\"OtherConditions\")\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 303,\n                            columnNumber: 77\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            colSpan: \"14\",\n                            children: (_data$otherConditions = data === null || data === void 0 ? void 0 : data.otherConditions) !== null && _data$otherConditions !== void 0 ? _data$otherConditions : ''\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 304,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 302,\n                          columnNumber: 73\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 202,\n                        columnNumber: 69\n                      }, this)]\n                    }, void 0, true) : null);\n                  }\n\n                  setFacilidades(rows);\n                } else {\n                  setFacilidades( /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: \"7\",\n                      style: {\n                        textAlign: 'center'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 317,\n                      columnNumber: 61\n                    }, this)\n                  }, 1, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 57\n                  }, this));\n                }\n              });\n            });\n          });\n        });\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      className: \"table table-striped table-hover styled-table table\",\n      children: Facilidades\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 328,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PreviewFacility, \"zyMApc8KX8PyR9p9B0r1eM9EwS4=\", false, function () {\n  return [useTranslation, useLocation, useHistory];\n});\n\n_c = PreviewFacility;\nexport default PreviewFacility;\n\nvar _c;\n\n$RefreshReg$(_c, \"PreviewFacility\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/PreviewFacility.js"],"names":["React","useEffect","useState","PropTypes","translationHelpers","Link","useHistory","useLocation","SweetAlert","Row","Col","Table","Button","ModalNuevaComision","BackendServices","CoreServices","useTranslation","Currency","uniq_key","url","PreviewFacility","props","t","i18n","api","coreServices","currencyData","Facilidades","setFacilidades","location","history","dataSession","pathname","split","transactionId","atob","sessionStorage","setItem","JSON","stringify","data","undefined","length","push","URL_DASHBOARD","result","getItem","parse","loadFacilities","consultarDeudores","then","data2","jsonDeudores","i","label","value","retrieveProposalType","propuesta","retrieveFacilityType","facilidad","retrieveSubproposalType","proposalType","debtors","typeIdent","consultarCatalogoTipoIdentificacion","environmentalRisk","consultEnvironmentalAspectsIGR","guarantees","getTipoGarantiaCatalogo","sureties","retrieveBailType","requestId","consultGeneralDataPropCred","console","log","consultarFacilidades","resp","filter","debtor","orderByJSON","rows","index","debtor0","find","x","Number","debtr","name","name2","lastName","lastName2","identification","id","idType","description","guaranteesFacility","consultarGarantiaPropCred","facilityId","guaranteesRows","guarantee","Records","Code","guaranteeTypeName","Description","guaranteeSubtypeDesc","formatTable","commercialValue","fastValue","ltv","paymentProgramRows","consultListProgramPagoPropCred","map","payments","paymentProgram","observations","disbursementFormRows","consultDisbursementListPropCred","disbursement","disbursementTypeId","suretiesRows","consultarFianzaPropCred","suretie","typeBail","commissionRows","consultCommissionPropCred","commissions","commission","comisionType","code","cr","amount","balance","proposedType","proposalTypeId","facilityType","facilityTypeId","proposalTypeName","purpose","sublimits","proposalRate","noSubsidyRate","effectiveRate","feci","term","reduce","acu","crr","applyEscrow","finantialConditions","environmentalAspectsDTO","riskClassificationConfirmation","legalDocumentation","otherConditions","textAlign"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../../helpers';\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport {\r\n    Row,\r\n    Col,\r\n    Table,\r\n    Button,\r\n} from \"reactstrap\"\r\nimport ModalNuevaComision from \"./ModalNuevaComision\";\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Currency from \"../../../../helpers/currency\"\r\nimport { uniq_key } from \"../../../../helpers/unq_key\";\r\nimport * as url from \"../../../../helpers/url_helper\"\r\n\r\n\r\nconst PreviewFacility = (props) => {\r\n    const { t, i18n } = useTranslation();\r\n\r\n    const api = new BackendServices();\r\n    const coreServices = new CoreServices();\r\n    const currencyData = new Currency();\r\n\r\n    const [Facilidades, setFacilidades] = useState(null);\r\n\r\n    const location = useLocation()\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        let dataSession = {};\r\n        if (location?.pathname?.split(\"previsualizarPropCred/\")[1]) {\r\n            dataSession = { transactionId: atob(location?.pathname?.split(\"previsualizarPropCred/\")[1]) };\r\n        }\r\n        sessionStorage.setItem('locationData', JSON.stringify(dataSession));\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                dataSession = location.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n        loadFacilities(dataSession)\r\n    }, [])\r\n    function loadFacilities(dataSession) {\r\n        api.consultarDeudores(dataSession.transactionId)\r\n            .then((data2) => {\r\n                if (data2 !== null && data2 !== undefined) {\r\n                    let jsonDeudores = [];\r\n                    for (let i = 0; i < data2.length; i++) {\r\n                        jsonDeudores.push({ label: data2[i][\"typePerson\"] == \"2\" ? data2[i][\"name\"] : data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"], value: data2[i][\"personId\"] })\r\n                    }\r\n                    // retrieveProposalType\r\n                    api.retrieveProposalType()\r\n                        .then((propuesta) => {\r\n                            // retrieveFacilityType\r\n                            api.retrieveFacilityType()\r\n                                .then((facilidad) => {\r\n                                    // consultarFacilidades\r\n                                    api.retrieveSubproposalType()\r\n                                        .then(async (proposalType) => {\r\n                                            let debtors = await api.consultarDeudores(dataSession.transactionId);\r\n                                            let typeIdent = await api.consultarCatalogoTipoIdentificacion();\r\n                                            let environmentalRisk = await api.consultEnvironmentalAspectsIGR(dataSession.transactionId)\r\n                                            let guarantees = await coreServices.getTipoGarantiaCatalogo();\r\n                                            let sureties = await api.retrieveBailType();\r\n                                            let requestId = await api.consultGeneralDataPropCred(dataSession?.transactionId)\r\n                                            requestId = requestId[0].requestId;\r\n                                            console.log(requestId)\r\n                                            api.consultarFacilidades(requestId).then(async resp => {\r\n                                                if (resp?.filter(data => data.debtor != \"  \").length > 0) {\r\n                                                    resp = currencyData.orderByJSON(resp, 'facilityId', 'asc')\r\n                                                    console.log(resp)\r\n\r\n                                                    let rows = [];\r\n                                                    let index = 1;\r\n\r\n                                                    for (const data of resp) {\r\n                                                        let debtor0 = jsonDeudores.find(x => x.value === Number(data.debtor))?.label;\r\n                                                        let debtor = debtors.find(debtr => debtr.name + (debtr.name2?.length > 0 ? ' ' + debtr.name2 : '') + (debtr.lastName?.length > 0 ? ' ' + debtr.lastName : '') + (debtr.lastName2?.length > 0 ? ' ' + debtr.lastName2 : '') === debtor0);\r\n                                                        let identification = typeIdent.find(identification => identification.id === debtor?.idType)?.description ?? '';\r\n\r\n                                                        let guaranteesFacility = await api.consultarGarantiaPropCred(data.facilityId);\r\n\r\n                                                        let guaranteesRows = [];\r\n\r\n                                                        for (const guarantee of guaranteesFacility) {\r\n\r\n                                                            guaranteesRows.push(\r\n                                                                <>\r\n                                                                    <tr>\r\n                                                                        <td>{t(\"Warrant Type\")}</td>\r\n                                                                        <td>\r\n                                                                            {guarantees?.Records.find(x => x.Code === guarantee.guaranteeTypeName)?.Description}\r\n                                                                        </td>\r\n                                                                        <td>\r\n                                                                            {guarantee.guaranteeSubtypeDesc}\r\n                                                                        </td>\r\n                                                                        <td colSpan=\"12\">\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                    <tr>\r\n                                                                        <td>{t(\"CommercialValue\")}</td>\r\n                                                                        <td colSpan=\"14\">\r\n                                                                            {currencyData.formatTable(guarantee.commercialValue ?? 0)}\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                    <tr>\r\n                                                                        <td>{t(\"QuickSaleValue\")}</td>\r\n                                                                        <td colSpan=\"14\">\r\n                                                                            {currencyData.formatTable(guarantee.fastValue ?? 0)}\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                    <tr>\r\n                                                                        <td>LTV %</td>\r\n                                                                        <td colSpan=\"14\">\r\n                                                                            {currencyData.formatTable(guarantee.ltv)}%\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </>\r\n                                                            )\r\n                                                        }\r\n\r\n                                                        let paymentProgramRows = await api.consultListProgramPagoPropCred(data.facilityId);\r\n                                                        paymentProgramRows = paymentProgramRows?.length > 0 ? paymentProgramRows.map(payments => (<tr key={uniq_key()}>\r\n                                                            <td>{t(\"PaymentProgram\")}</td>\r\n                                                            <td>{payments.paymentProgram}</td>\r\n                                                            <td>{payments.observations}</td>\r\n                                                            <td colSpan=\"12\">\r\n                                                            </td>\r\n                                                        </tr>)) : <tr key={uniq_key()}>\r\n                                                            <td>{t(\"PaymentProgram\")}</td>\r\n                                                            <td colSpan=\"14\">\r\n                                                            </td>\r\n                                                        </tr>;\r\n                                                        let disbursementFormRows = await api.consultDisbursementListPropCred(data.facilityId);\r\n                                                        disbursementFormRows = disbursementFormRows?.length > 0 ? disbursementFormRows.map(disbursement => (<tr key={uniq_key()}>\r\n                                                            <td>{t(\"DisbursementForm\")}</td>\r\n                                                            <td>{disbursement.disbursementTypeId}</td>\r\n                                                            <td>{disbursement.observations}</td>\r\n                                                            <td colSpan=\"12\">\r\n                                                            </td>\r\n                                                        </tr>)) : <tr key={uniq_key()}>\r\n                                                            <td>{t(\"DisbursementForm\")}</td>\r\n                                                            <td colSpan=\"14\">\r\n                                                            </td>\r\n                                                        </tr>;\r\n\r\n                                                        let suretiesRows = await api.consultarFianzaPropCred(data.facilityId);\r\n                                                        suretiesRows = suretiesRows?.length > 0 ? suretiesRows.map(suretie => (<tr key={uniq_key()}>\r\n                                                            <td>{t(\"Sureties\")}</td>\r\n                                                            <td>{sureties.find(x => x.id === suretie.typeBail)?.description}</td>\r\n                                                            <td colSpan=\"13\">\r\n                                                            </td>\r\n                                                        </tr>)) : <tr key={uniq_key()}>\r\n                                                            <td>{t(\"Sureties\")}</td>\r\n                                                            <td colSpan=\"14\">\r\n                                                            </td>\r\n                                                        </tr>;\r\n\r\n                                                        let commissionRows = await api.consultCommissionPropCred(data.facilityId);\r\n                                                        commissionRows = commissionRows.commissions;\r\n                                                        console.log(commissionRows)\r\n                                                        commissionRows = commissionRows?.length > 0 ? commissionRows.map(commission => (<tr key={uniq_key()}>\r\n                                                            <td>{t(\"Commission\")}</td>\r\n                                                            <td>{commission.comisionType.code}</td>\r\n                                                            <td colSpan=\"13\">\r\n                                                            </td>\r\n                                                        </tr>)) : <tr key={uniq_key()}>\r\n                                                            <td>{t(\"Commission\")}</td>\r\n                                                            <td colSpan=\"14\">\r\n                                                            </td>\r\n                                                        </tr>;\r\n\r\n\r\n                                                        rows.push((\r\n                                                            data.debtor != \"  \" ?\r\n                                                                <>\r\n                                                                    <thead >\r\n                                                                        <tr>\r\n                                                                            <th>{t(\"Escrownumber\")}</th>\r\n                                                                            <th>{t(\"C.R\")}</th>\r\n                                                                            <th>{t(\"Amount\")}</th>\r\n                                                                            <th>{t(\"Debtor\")}</th>\r\n                                                                            <th>{t(\"Balance\")}</th>\r\n                                                                        </tr>\r\n                                                                    </thead>\r\n                                                                    <tbody>\r\n                                                                        <tr key={uniq_key()}>\r\n                                                                            <td>{index++}</td>\r\n                                                                            <td>{data.cr}</td>\r\n                                                                            <td>${currencyData.formatTable(data?.amount ?? 0)}</td>\r\n                                                                            <td>{`${debtor?.name ?? ''} ${debtor?.name2 ?? ''} ${debtor?.lastName ?? ''} ${debtor?.lastName2 ?? ''}`}</td>\r\n                                                                            <td>${currencyData.formatTable(data?.balance ?? 0)}</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Proposal\")}</td>\r\n                                                                            <td colSpan=\"14\">{propuesta.find(x => x.id === (data?.proposedType ?? data?.proposalTypeId))?.description}</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"FacilityType\")}</td>\r\n                                                                            <td colSpan=\"14\">{facilidad.find(x => x.id === (data?.facilityType ?? data?.facilityTypeId))?.description}</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"ProposalSubType\")}</td>\r\n                                                                            <td colSpan=\"14\">{proposalType.find(x => x.id === data?.proposalTypeName)?.description}</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Purpose\")}</td>\r\n                                                                            <td colSpan=\"14\">{data.purpose ?? ''}</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Sublimit\")}</td>\r\n                                                                            <td colSpan=\"14\">{data.sublimits ?? ''}</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Rate\")}</td>\r\n                                                                            <td colSpan=\"14\">{currencyData.formatTable(data?.proposalRate ?? 0)}%</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"RateWithoutSubsidy\")}</td>\r\n                                                                            <td colSpan=\"14\">{currencyData.formatTable(data?.noSubsidyRate ?? 0)}%</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"EffectiveRate\")}</td>\r\n                                                                            <td colSpan=\"14\">{currencyData.formatTable(data?.effectiveRate ?? 0)}%</td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>FECI</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {data.feci ? t(\"Yes\") : t(\"No\")}\r\n                                                                            </td>\r\n                                                                        </tr>\r\n\r\n                                                                        {commissionRows}\r\n\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Term\")}</td>\r\n                                                                            <td colSpan=\"14\">{data.term ?? ''}</td>\r\n                                                                        </tr>\r\n\r\n                                                                        {paymentProgramRows}\r\n\r\n                                                                        {disbursementFormRows}\r\n\r\n                                                                        <tr>\r\n                                                                            <td><b>{t(\"Guarantee\")}</b></td>\r\n                                                                            <td colSpan=\"14\">\r\n\r\n                                                                            </td>\r\n                                                                        </tr>\r\n\r\n                                                                        {guaranteesRows}\r\n\r\n                                                                        <tr>\r\n                                                                            <td>LTV % TOTAL</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {currencyData.formatTable(guaranteesFacility.reduce((acu, crr) => acu + crr.ltv, 0) ?? 0)}%\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Escrow\")}</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {data.applyEscrow ? t(\"Yes\") : t(\"No\")}\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"FinancialConditions\")}</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {data?.finantialConditions ?? \"\"}\r\n                                                                            </td>\r\n                                                                        </tr>\r\n\r\n                                                                        {suretiesRows}\r\n\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Environmental and social risk category\")}</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {environmentalRisk?.environmentalAspectsDTO?.riskClassificationConfirmation ?? \"\"}\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"Status of Legal Documentation\")}</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {data?.legalDocumentation ?? \"\"}\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <td>{t(\"OtherConditions\")}</td>\r\n                                                                            <td colSpan=\"14\">\r\n                                                                                {data?.otherConditions ?? ''}\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </>\r\n                                                                : null))\r\n                                                    }\r\n                                                    setFacilidades(rows);\r\n\r\n                                                } else {\r\n                                                    setFacilidades(\r\n                                                        <tr key={1}>\r\n                                                            <td colSpan=\"7\" style={{ textAlign: 'center' }}></td>\r\n                                                        </tr>);\r\n                                                }\r\n                                            });\r\n                                        });\r\n                                })\r\n                        })\r\n                }\r\n            })\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Table className=\"table table-striped table-hover styled-table table\" >\r\n                {Facilidades}\r\n            </Table>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default PreviewFacility;\r\n"]},"metadata":{},"sourceType":"module"}