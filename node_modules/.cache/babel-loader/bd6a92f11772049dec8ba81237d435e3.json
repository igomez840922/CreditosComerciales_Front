{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import{Card,Row,Col,Form,Container,Button}from\"react-bootstrap\";import Select from'react-select';import{AvForm}from'availity-reactstrap-validation';import LoadingOverlay from\"react-loading-overlay\";import FormContainerQuoter from'./FormContainerQuoter';import FormQuoterTypeNatural from'./FormQuoterTypeNatural';import FormDataQuoter from'./FormDataQuoter';import FormCommonFields from'./FormCommonFields';import TableResultQuoter from'./TableResultQuoter';import quoterCompuesto from\"./dummy/quoterCompuesto\";import axios from'axios';import{BackendServices,CoreServices}from\"../../../services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var usePaymentPlan=function usePaymentPlan(){var _useState=useState(quoterCompuesto.payments),_useState2=_slicedToArray(_useState,2),paymentPlan=_useState2[0],setPaymentPlan=_useState2[1];// setPaymentPlan(rowsData)\nconsole.log(\"paymentPlan:\",paymentPlan);};var FormQuoterScreen=function FormQuoterScreen(){var services=new BackendServices();var initialForm={// feciPercentage: \"\",\nfeciRate:0// amountDebt: \"\",\n// anualRate: \"\",\n// term: \"\",\n};// hooks\nvar _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;// custom hooks\nvar _useState3=useState(initialForm),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),disableSelect=_useState6[0],setDisableSelect=_useState6[1];var _useState7=useState(\"Natural\"),_useState8=_slicedToArray(_useState7,2),typePerson=_useState8[0],setTypePerson=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),paymentPlan=_useState10[0],setPaymentPlan=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loader=_useState12[0],setLoader=_useState12[1];// handlers\nvar handleChange=function handleChange(evt,propertyName){var name=(evt===null||evt===void 0?void 0:evt.target)?evt.target.name:propertyName.name;var value=(evt===null||evt===void 0?void 0:evt.target)?evt.target.value:evt.value;if(propertyName===null||propertyName===void 0?void 0:propertyName.name){handleSelect(propertyName.name,value);}setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},name,value)));};var handleSelect=function handleSelect(propertyName,value){switch(propertyName){case'feciPercentage':var disableFeci=value==\"Si\"?false:true;setDisableSelect(disableFeci);return;case'personType':var type=value==\"Natural\"?\"Natural\":\"Juridica\";setTypePerson(type);return;default:break;}};var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var loanType;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.group(\"Handle form submit!\");console.log(\"data submitted\",form);console.groupEnd();loanType=form.loanType==\"compuesto\"?\"compuesto\":\"abono\";setLoader(true);_context.next=7;return services.getQuoterPaymentPlan(form.loanType,form.amountDebt,form.anualRate,form.feciRate,form.term).then(function(resp){setLoader(false);console.info(\"response service\",resp);// setPaymentPlan(dataPaymentPlan.payments)\n// setPaymentPlan(dataPaymentPlan.payments)\nsetPaymentPlan(resp.payments);// setForm(initialForm)\n// console.info(\"data payment plan\", dataPaymentPlan.payments)    \n});case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleFormSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormContainerQuoter,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:t(\"ClientData\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(FormCommonFields,{onChange:handleChange,form:form,typePerson:typePerson})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(FormDataQuoter,{onChange:handleChange,form:form,disableSelect:disableSelect})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"d-grid mt-5\",children:/*#__PURE__*/_jsx(Button,{size:\"lg\",className:\"float-end\",type:\"submit\",onClick:handleFormSubmit,children:t(\"Calculate\")})})}),/*#__PURE__*/_jsx(LoadingOverlay,{active:loader// spinner={<BounceLoader />}\n,spinner:true,text:t(\"Calculating payment plan\")})]})})}),/*#__PURE__*/_jsx(TableResultQuoter,{paymentPlan:paymentPlan})]});};export default FormQuoterScreen;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/20_Cotizador/FormQuoterScreen.js"],"names":["useEffect","useState","useTranslation","Card","Row","Col","Form","Container","Button","Select","AvForm","LoadingOverlay","FormContainerQuoter","FormQuoterTypeNatural","FormDataQuoter","FormCommonFields","TableResultQuoter","quoterCompuesto","axios","BackendServices","CoreServices","usePaymentPlan","payments","paymentPlan","setPaymentPlan","console","log","FormQuoterScreen","services","initialForm","feciRate","t","i18n","form","setForm","disableSelect","setDisableSelect","typePerson","setTypePerson","loader","setLoader","handleChange","evt","propertyName","name","target","value","handleSelect","disableFeci","type","handleFormSubmit","group","groupEnd","loanType","getQuoterPaymentPlan","amountDebt","anualRate","term","then","resp","info"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport {\r\n    Card,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    Container,\r\n    Button\r\n} from \"react-bootstrap\";\r\nimport Select from 'react-select'\r\nimport { AvForm } from 'availity-reactstrap-validation';\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport FormContainerQuoter from './FormContainerQuoter'\r\nimport FormQuoterTypeNatural from './FormQuoterTypeNatural';\r\nimport FormDataQuoter from './FormDataQuoter';\r\nimport FormCommonFields from './FormCommonFields';\r\nimport TableResultQuoter from './TableResultQuoter';\r\nimport quoterCompuesto from \"./dummy/quoterCompuesto\";\r\nimport axios from 'axios';\r\nimport { BackendServices, CoreServices } from \"../../../services\";\r\n\r\nconst usePaymentPlan = () => {\r\n    const [paymentPlan, setPaymentPlan] = useState(quoterCompuesto.payments)\r\n\r\n    // setPaymentPlan(rowsData)\r\n    console.log(\"paymentPlan:\", paymentPlan)\r\n\r\n}\r\n\r\nconst FormQuoterScreen = () => {\r\n    const services = new BackendServices()\r\n    const initialForm = {\r\n        // feciPercentage: \"\",\r\n        feciRate: 0,\r\n        // amountDebt: \"\",\r\n        // anualRate: \"\",\r\n        // term: \"\",\r\n    }\r\n    // hooks\r\n    const { t, i18n } = useTranslation();\r\n    // custom hooks\r\n    const [form, setForm] = useState(initialForm)\r\n    const [disableSelect, setDisableSelect] = useState(true)\r\n    const [typePerson, setTypePerson] = useState(\"Natural\")\r\n    const [paymentPlan, setPaymentPlan] = useState([])\r\n    const [loader, setLoader] = useState(false)\r\n\r\n    // handlers\r\n    const handleChange = (evt, propertyName) => {\r\n\r\n        const name = evt?.target\r\n            ? evt.target.name\r\n            : propertyName.name\r\n\r\n        const value = evt?.target\r\n            ? evt.target.value\r\n            : evt.value\r\n\r\n        if (propertyName?.name) {\r\n            handleSelect(propertyName.name, value)\r\n        }\r\n\r\n        setForm({\r\n            ...form,\r\n            [name]: value\r\n        })\r\n\r\n    }\r\n\r\n    const handleSelect = (propertyName, value) => {\r\n        switch (propertyName) {\r\n            case 'feciPercentage':\r\n                const disableFeci = value == \"Si\"\r\n                    ? false\r\n                    : true\r\n                setDisableSelect(disableFeci)\r\n                \r\n                return\r\n            case 'personType':\r\n                const type = value == \"Natural\"\r\n                    ? \"Natural\"\r\n                    : \"Juridica\"\r\n                setTypePerson(type)\r\n                return\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    const handleFormSubmit = async () => {\r\n        console.group(\"Handle form submit!\")\r\n        console.log(\"data submitted\", form)\r\n        console.groupEnd()\r\n\r\n        const loanType = form.loanType == \"compuesto\"\r\n            ? \"compuesto\"\r\n            : \"abono\"\r\n\r\n        setLoader(true)\r\n        await services.getQuoterPaymentPlan(\r\n            form.loanType,\r\n            form.amountDebt,\r\n            form.anualRate,\r\n            form.feciRate,\r\n            form.term\r\n        )\r\n        .then(resp => {\r\n            setLoader(false)\r\n            console.info(\"response service\", resp)\r\n            // setPaymentPlan(dataPaymentPlan.payments)\r\n            setPaymentPlan(resp.payments)\r\n            // setForm(initialForm)\r\n            // console.info(\"data payment plan\", dataPaymentPlan.payments)    \r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <FormContainerQuoter>\r\n                <Card>\r\n                    <Card.Body>\r\n                        <Card.Title>\r\n                            {t(\"ClientData\")}\r\n                        </Card.Title>\r\n                        {/* <AvForm onSubmit={testHandleSubmit}> */}\r\n                        <Row>\r\n                            <FormCommonFields\r\n                                onChange={handleChange}\r\n                                form={form}\r\n                                typePerson={typePerson}\r\n                            />\r\n                        </Row>\r\n                        {/* <Row>\r\n                            <FormQuoterTypeNatural\r\n                                onChange={handleChange}\r\n                                form={form}\r\n                            />\r\n                        </Row> */}\r\n                        <Row>\r\n                            <FormDataQuoter\r\n                                onChange={handleChange}\r\n                                form={form}\r\n                                disableSelect={disableSelect}\r\n                            />\r\n                        </Row>\r\n                        <Row >\r\n                            <Col className='d-grid mt-5'>\r\n                                <Button\r\n                                    size='lg'\r\n                                    className='float-end'\r\n                                    type='submit'\r\n                                    onClick={handleFormSubmit}\r\n                                >\r\n                                    {t(\"Calculate\")}\r\n                                </Button>\r\n                            </Col>\r\n                        </Row>\r\n                        {/* </AvForm> */}\r\n                        <LoadingOverlay\r\n                            active={loader}\r\n                            // spinner={<BounceLoader />}\r\n                            spinner={true}\r\n                            text={t(\"Calculating payment plan\")}\r\n                        >\r\n                            {/* <p>Some content or children or something.</p> */}\r\n                        </LoadingOverlay>\r\n\r\n                    </Card.Body>\r\n                </Card>\r\n            </FormContainerQuoter>\r\n            <TableResultQuoter\r\n                paymentPlan={paymentPlan}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default FormQuoterScreen"]},"metadata":{},"sourceType":"module"}