{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\16_RiesgoAmbiental\\\\riesgoAmbiental\\\\FormDetalles.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useImperativeHandle, forwardRef, useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { translationHelpers } from '../../../../helpers';\nimport RiesgoAmbientalContext from '../RiesgoAmbientalContext';\nimport { Card, CardBody, Row, Col, Button, Label } from \"reactstrap\";\nimport { AvForm, AvField, AvGroup, AvInput } from \"availity-reactstrap-validation\";\nimport ServicioRiesgoAmbiental from '../../../../services/RiesgoAmbiental/RiesgoAmbiental';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FormDetalles = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [displayCovenantDetails, setDisplayCovenantDetails] = useState(true);\n  const [formValid, setFormValid] = useState(false);\n  const [isUpdatingRecord, setUpdatingRecord] = useState(false);\n  const [environmentCovenant, setEnvironemntCovenant] = useState(false);\n  const [detail, setDetail] = useState('');\n  const [compliance, setCompliance] = useState('');\n  const [detected, setDetected] = useState('');\n  const [term, setTerm] = useState('');\n  const [recommendations, setRecommendations] = useState('');\n  const [conclusions, setConclusions] = useState(''); // services\n\n  const context = useContext(RiesgoAmbientalContext);\n  const servicioRiesgoAmbiental = new ServicioRiesgoAmbiental();\n  useEffect(() => {\n    // load data\n    if (!context.transactionId) {\n      return;\n    }\n\n    console.log('fetch info riesgo ambiental', context);\n    const {\n      transactionId\n    } = context;\n    servicioRiesgoAmbiental.consultarInformacionRiesgoAmbiental(transactionId).then(info => {\n      console.log('info riesgo ambiental', info);\n\n      if (info.transactId) {\n        setUpdatingRecord(true);\n        setEnvironemntCovenant(info.environmentCovenant);\n        setDetail(info.detail);\n        setCompliance(info.compliance);\n        setDetected(info.detected);\n        setTerm(info.term);\n        setRecommendations(info.recommendations);\n        setConclusions(info.conclusions);\n      }\n    }).catch(error => {\n      console.log('error fetch detalles', error);\n    });\n  }, [context]);\n  useImperativeHandle(ref, () => ({\n    submit: (validate = true) => {\n      const form = document.getElementById('formDetallesRiesgoAmbiental');\n      form.requestSubmit();\n      return formValid;\n    },\n    getFormValidation: () => {\n      return formValid;\n    }\n  }));\n\n  function handleCovenantChange(event) {\n    const value = event.target.value === 'Si';\n    setDisplayCovenantDetails(value);\n  }\n\n  function handleSubmit(event, errors, values) {\n    event.preventDefault();\n    const isValid = errors.length === 0;\n    setFormValid(isValid);\n\n    if (isValid) {\n      console.log('submit', values, errors);\n      const {\n        transactionId\n      } = context;\n      servicioRiesgoAmbiental.guardarInformacionRiesgoAmbiental(transactionId, values, isUpdatingRecord).then(result => {\n        console.log('result', result);\n      }).catch(error => {\n        console.error('Error guardando', error);\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: /*#__PURE__*/_jsxDEV(CardBody, {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"card-title\",\n        children: t(\"OtherDetails\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-title-desc\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AvForm, {\n        id: \"formDetallesRiesgoAmbiental\",\n        className: \"needs-validation\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          className: \"my-3\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(AvGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"environmentCovenant\",\n                children: t(\"Covenants Ambientales\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                className: \"form-control\",\n                name: \"environmentCovenant\",\n                type: \"select\",\n                id: \"environmentCovenant\",\n                value: environmentCovenant,\n                onChange: handleCovenantChange,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: true,\n                  children: t(\"Yes\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: false,\n                  children: c(\"No\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this), displayCovenantDetails && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"my-3\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: \"4\",\n              children: /*#__PURE__*/_jsxDEV(AvGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"detail\",\n                  children: t(\"Detalle\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                  className: \"form-control\",\n                  name: \"detail\",\n                  type: \"text\",\n                  id: \"detail\",\n                  value: detail\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"4\",\n              children: /*#__PURE__*/_jsxDEV(AvGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"compliance\",\n                  children: t(\"Cumplimiento\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                  className: \"form-control\",\n                  name: \"compliance\",\n                  type: \"text\",\n                  id: \"compliance\",\n                  value: compliance\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"4\",\n              children: /*#__PURE__*/_jsxDEV(AvGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"term\",\n                  children: t(\"Plazo\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                  className: \"form-control\",\n                  name: \"term\",\n                  type: \"text\",\n                  id: \"term\",\n                  value: term\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"my-3\",\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              md: \"12\",\n              children: /*#__PURE__*/_jsxDEV(AvGroup, {\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"detected\",\n                  children: t(\"Situacion Detectada\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                  className: \"form-control\",\n                  name: \"detected\",\n                  type: \"textarea\",\n                  id: \"detected\",\n                  value: detected,\n                  rows: \"7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"my-3\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(AvGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"recommendations\",\n                children: t(\"Recomendaciones\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                className: \"form-control\",\n                name: \"recommendations\",\n                type: \"textarea\",\n                id: \"recommendations\",\n                value: recommendations,\n                rows: \"7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"my-3\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(AvGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"conclusions\",\n                children: t(\"Conclusiones\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                className: \"form-control\",\n                name: \"conclusions\",\n                type: \"textarea\",\n                id: \"conclusions\",\n                value: conclusions,\n                rows: \"7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}, \"RTjDkqm7/GTLmlTO/Hw2dvgu6xs=\", false, function () {\n  return [useTranslation, useImperativeHandle];\n}));\n_c2 = FormDetalles;\nFormDetalles.propTypes = {\n  onSearch: PropTypes.func\n};\nexport default FormDetalles;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormDetalles$forwardRef\");\n$RefreshReg$(_c2, \"FormDetalles\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/16_RiesgoAmbiental/riesgoAmbiental/FormDetalles.js"],"names":["useState","useImperativeHandle","forwardRef","useContext","useEffect","PropTypes","translationHelpers","RiesgoAmbientalContext","Card","CardBody","Row","Col","Button","Label","AvForm","AvField","AvGroup","AvInput","ServicioRiesgoAmbiental","useTranslation","FormDetalles","props","ref","t","i18n","displayCovenantDetails","setDisplayCovenantDetails","formValid","setFormValid","isUpdatingRecord","setUpdatingRecord","environmentCovenant","setEnvironemntCovenant","detail","setDetail","compliance","setCompliance","detected","setDetected","term","setTerm","recommendations","setRecommendations","conclusions","setConclusions","context","servicioRiesgoAmbiental","transactionId","console","log","consultarInformacionRiesgoAmbiental","then","info","transactId","catch","error","submit","validate","form","document","getElementById","requestSubmit","getFormValidation","handleCovenantChange","event","value","target","handleSubmit","errors","values","preventDefault","isValid","length","guardarInformacionRiesgoAmbiental","result","c","propTypes","onSearch","func"],"mappings":"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","sourcesContent":["import { useState, useImperativeHandle, forwardRef, useContext, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../../helpers';\r\nimport RiesgoAmbientalContext from '../RiesgoAmbientalContext';\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup, AvInput } from \"availity-reactstrap-validation\"\r\nimport ServicioRiesgoAmbiental from '../../../../services/RiesgoAmbiental/RiesgoAmbiental';\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst FormDetalles = forwardRef((props, ref) => {\r\n\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const [displayCovenantDetails, setDisplayCovenantDetails] = useState(true);\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [isUpdatingRecord, setUpdatingRecord] = useState(false);\r\n  const [environmentCovenant, setEnvironemntCovenant] = useState(false);\r\n  const [detail, setDetail] = useState('');\r\n  const [compliance, setCompliance] = useState('');\r\n  const [detected, setDetected] = useState('');\r\n  const [term, setTerm] = useState('');\r\n  const [recommendations, setRecommendations] = useState('');\r\n  const [conclusions, setConclusions] = useState('');\r\n\r\n  // services\r\n  const context = useContext(RiesgoAmbientalContext);\r\n  const servicioRiesgoAmbiental = new ServicioRiesgoAmbiental();\r\n\r\n  useEffect(() => {\r\n    // load data\r\n    if( !context.transactionId ) {\r\n      return;\r\n    }\r\n    console.log('fetch info riesgo ambiental', context);\r\n    const { transactionId } = context;\r\n    servicioRiesgoAmbiental.consultarInformacionRiesgoAmbiental(transactionId)\r\n      .then((info) => {\r\n        console.log('info riesgo ambiental', info);\r\n        if( info.transactId ) {\r\n          setUpdatingRecord(true);\r\n          setEnvironemntCovenant(info.environmentCovenant);\r\n          setDetail(info.detail);\r\n          setCompliance(info.compliance);\r\n          setDetected(info.detected);\r\n          setTerm(info.term);\r\n          setRecommendations(info.recommendations);\r\n          setConclusions(info.conclusions);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log('error fetch detalles', error);\r\n      })\r\n  }, [context]);\r\n\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    submit: (validate = true) => {\r\n      const form = document.getElementById('formDetallesRiesgoAmbiental');\r\n      form.requestSubmit();\r\n      return formValid;\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n\r\n  function handleCovenantChange(event) {\r\n    const value = event.target.value === 'Si';\r\n    setDisplayCovenantDetails(value);\r\n  }\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n    if( isValid ) {\r\n      console.log('submit', values, errors);\r\n      const { transactionId } = context;\r\n      servicioRiesgoAmbiental.guardarInformacionRiesgoAmbiental(transactionId, values, isUpdatingRecord)\r\n        .then((result) => {\r\n          console.log('result', result);\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error guardando', error);\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n\r\n      <CardBody>\r\n        <h4 className=\"card-title\">{ t(\"OtherDetails\") }</h4>\r\n        <p className=\"card-title-desc\"></p>\r\n\r\n        <AvForm id=\"formDetallesRiesgoAmbiental\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"environmentCovenant\">{ t(\"Covenants Ambientales\") }</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"environmentCovenant\"\r\n                type=\"select\"\r\n                id=\"environmentCovenant\"\r\n                value={environmentCovenant}\r\n                onChange={ handleCovenantChange }>\r\n                  <option value={true}>{ t(\"Yes\") }</option>\r\n                  <option value={false}>{ c(\"No\") }</option>\r\n              </AvField>\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        { displayCovenantDetails && (\r\n        <>\r\n        <Row className=\"my-3\">\r\n          <Col md=\"4\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"detail\">{ t(\"Detalle\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"detail\"\r\n                type=\"text\"\r\n                id=\"detail\"\r\n                value={detail} />\r\n            </AvGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"compliance\">{ t(\"Cumplimiento\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"compliance\"\r\n                type=\"text\"\r\n                id=\"compliance\"\r\n                value={compliance} />\r\n            </AvGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"term\">{ t(\"Plazo\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"term\"\r\n                type=\"text\"\r\n                id=\"term\"\r\n                value={term} />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"detected\">{ t(\"Situacion Detectada\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"detected\"\r\n                type=\"textarea\"\r\n                id=\"detected\"\r\n                value={detected}\r\n                rows=\"7\" />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n        </>\r\n        )}\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"recommendations\">{ t(\"Recomendaciones\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"recommendations\"\r\n                type=\"textarea\"\r\n                id=\"recommendations\"\r\n                value={recommendations}\r\n                rows=\"7\" />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"my-3\">\r\n          <Col md=\"12\">\r\n            <AvGroup>\r\n              <Label htmlFor=\"conclusions\">{ t(\"Conclusiones\") }</Label>\r\n              <AvField className=\"form-control\"\r\n                name=\"conclusions\"\r\n                type=\"textarea\"\r\n                id=\"conclusions\"\r\n                value={conclusions}\r\n                rows=\"7\" />\r\n            </AvGroup>\r\n          </Col>\r\n        </Row>\r\n\r\n        </AvForm>\r\n\r\n      </CardBody>\r\n\r\n    </Card>\r\n  );\r\n});\r\n\r\n\r\nFormDetalles.propTypes = {\r\n  onSearch: PropTypes.func\r\n};\r\n\r\nexport default FormDetalles;\r\n"]},"metadata":{},"sourceType":"module"}