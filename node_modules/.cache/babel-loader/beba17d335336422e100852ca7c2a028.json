{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{translationHelpers,formatCurrency}from'../../helpers';import CreditProposalContext from'./CreditProposalContext';import{Link,useLocation}from\"react-router-dom\";import{Table,Card,CardBody,Button}from\"reactstrap\";import FormNewFacility from\"./FormNewFacility\";import ModalFacilityDetails from\"./ModalFacilityDetails\";import{AvForm,AvGroup,AvField,AvFeedback}from\"availity-reactstrap-validation\";// static data\nimport listaFacilidades from\"../../api/bpm/propuestacredito/facilidades\";import{Facilidad}from\"../../models/PropuestaCredito\";import{BackendServices,CoreServices}from\"../../services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FacilityList=/*#__PURE__*/React.forwardRef(function(props,ref){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1];var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var context=useContext(CreditProposalContext);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),displayModalFacilityDetails=_useState4[0],setDisplayModalFacilityDetails=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedFacility=_useState6[0],setSelectedFacility=_useState6[1];function displayFacilityDetails(facility){// setSelectedFacility(facility);\nvar dummyFacility=Facilidad.fromJson(listaFacilidades[0]);setSelectedFacility(dummyFacility);setDisplayModalFacilityDetails(true);}function toggleFacilityDetailsModal(){setDisplayModalFacilityDetails(!displayModalFacilityDetails);}function handleSaveNewFacility(newFacility){props.onSaveFacility(newFacility);}var editMode=props.editMode,items=props.items;var dataRows=items.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.AcctMember[0].PartyName.ShortName}),/*#__PURE__*/_jsx(\"td\",{children:item.ProductDesc}),/*#__PURE__*/_jsx(\"td\",{children:item.AcctBal[0].BalType}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency('$',item.AcctOpeningInfo.InitialAmt.Amt,2)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency('$',item.AcctBal[0].CurAmt.Amt,2)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency('$',item.AcctBal[0].CurAmt.Amt,2)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency('$',item.AcctBal[0].CurAmt.Amt,2)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",className:\"btn btn-link\",onClick:function onClick(){displayFacilityDetails(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-eye mdi-24px\"})})})]},'row-'+index);});function handleSubmit(event,errors,values){event.preventDefault();if(event.target.id!=='formCreditProposal'){return;}setFormValid(true);}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h5\",{children:props.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(Table,{className:\"table mt-1\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Debtor\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"Approved Risk\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"Balance / Usage\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"Proposed Risk\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"Variation\")}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataRows})]})]})}),selectedFacility&&/*#__PURE__*/_jsx(ModalFacilityDetails,{isOpen:displayModalFacilityDetails,toggle:toggleFacilityDetailsModal,facility:selectedFacility})]});});FacilityList.defaultProps={items:[],editMode:false};export default FacilityList;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/FacilityList.js"],"names":["React","useState","useContext","translationHelpers","formatCurrency","CreditProposalContext","Link","useLocation","Table","Card","CardBody","Button","FormNewFacility","ModalFacilityDetails","AvForm","AvGroup","AvField","AvFeedback","listaFacilidades","Facilidad","BackendServices","CoreServices","FacilityList","forwardRef","props","ref","formValid","setFormValid","t","c","context","displayModalFacilityDetails","setDisplayModalFacilityDetails","selectedFacility","setSelectedFacility","displayFacilityDetails","facility","dummyFacility","fromJson","toggleFacilityDetailsModal","handleSaveNewFacility","newFacility","onSaveFacility","editMode","items","dataRows","map","item","index","AcctMember","PartyName","ShortName","ProductDesc","AcctBal","BalType","AcctOpeningInfo","InitialAmt","Amt","CurAmt","handleSubmit","event","errors","values","preventDefault","target","id","title","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers, formatCurrency } from '../../helpers';\r\nimport CreditProposalContext from './CreditProposalContext';\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Button\r\n} from \"reactstrap\"\r\n\r\nimport FormNewFacility from \"./FormNewFacility\";\r\nimport ModalFacilityDetails from \"./ModalFacilityDetails\";\r\nimport { AvForm, AvGroup, AvField, AvFeedback } from \"availity-reactstrap-validation\"\r\n\r\n// static data\r\nimport listaFacilidades from \"../../api/bpm/propuestacredito/facilidades\";\r\nimport { Facilidad } from \"../../models/PropuestaCredito\";\r\nimport { BackendServices, CoreServices } from \"../../services\";\r\n\r\n\r\nconst FacilityList = React.forwardRef((props, ref) => {\r\n  \r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n  const context = useContext(CreditProposalContext);\r\n  const [displayModalFacilityDetails, setDisplayModalFacilityDetails] = useState(false);\r\n  const [selectedFacility, setSelectedFacility] = useState(null);\r\n\r\n  function displayFacilityDetails(facility) {\r\n    // setSelectedFacility(facility);\r\n    const dummyFacility = Facilidad.fromJson(listaFacilidades[0]);\r\n    setSelectedFacility(dummyFacility);\r\n    setDisplayModalFacilityDetails(true);\r\n  }\r\n\r\n  function toggleFacilityDetailsModal() {\r\n    setDisplayModalFacilityDetails(!displayModalFacilityDetails);\r\n  }\r\n\r\n  function handleSaveNewFacility(newFacility) {\r\n    props.onSaveFacility(newFacility);\r\n  }\r\n\r\n  const { editMode, items } = props;\r\n  const dataRows = items.map((item, index) => (\r\n    <tr key={'row-' + index}>\r\n      <td>{item.AcctMember[0].PartyName.ShortName}</td>\r\n      <td>{item.ProductDesc}</td>\r\n      <td>{item.AcctBal[0].BalType}</td>\r\n      <td className=\"text-end\">{formatCurrency('$', item.AcctOpeningInfo.InitialAmt.Amt, 2)}</td>\r\n      <td className=\"text-end\">{formatCurrency('$', item.AcctBal[0].CurAmt.Amt, 2)}</td>\r\n      <td className=\"text-end\">{formatCurrency('$', item.AcctBal[0].CurAmt.Amt, 2)}</td>\r\n      <td className=\"text-end\">{formatCurrency('$', item.AcctBal[0].CurAmt.Amt, 2)}</td>\r\n      <td className=\"text-end\">\r\n        <Button type=\"button\" color=\"link\" className=\"btn btn-link\" onClick={() => { displayFacilityDetails(item) }}><i className=\"mdi mdi-eye mdi-24px\"></i></Button>\r\n      </td>\r\n    </tr>)\r\n  );\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    if (event.target.id !== 'formCreditProposal') {\r\n      return;\r\n    }\r\n    setFormValid(true);\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      {/* <AvForm id=\"formFacilidades\" className=\"needs-validation\" onSubmit={handleSubmit}> */}\r\n\r\n        <Card>\r\n          <CardBody>\r\n            <h5>{props.title}</h5>\r\n            <p className=\"card-title-desc\"></p>\r\n            <Table className=\"table mt-1\" responsive>\r\n              <thead className=\"table-light\">\r\n                <tr>\r\n                  <th>{t(\"Debtor\")}</th>\r\n                  <th>{t(\"Facility Type\")}</th>\r\n                  <th>{t(\"Proposal\")}</th>\r\n                  <th className=\"text-end\">{t(\"Approved Risk\")}</th>\r\n                  <th className=\"text-end\">{t(\"Balance / Usage\")}</th>\r\n                  <th className=\"text-end\">{t(\"Proposed Risk\")}</th>\r\n                  <th className=\"text-end\">{t(\"Variation\")}</th>\r\n                  {/* <th><Link className=\"float-end\"><i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i></Link></th> */}\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {dataRows}\r\n              </tbody>\r\n            </Table>\r\n          </CardBody>\r\n         \r\n        </Card>\r\n      {/* </AvForm> */}\r\n\r\n\r\n      {selectedFacility && (\r\n        <ModalFacilityDetails isOpen={displayModalFacilityDetails} toggle={toggleFacilityDetailsModal} facility={selectedFacility} />\r\n      )}\r\n\r\n    </React.Fragment>\r\n\r\n  );\r\n});\r\n\r\nFacilityList.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  editMode: PropTypes.bool,\r\n  onSaveFacility: PropTypes.func\r\n};\r\n\r\nFacilityList.defaultProps = {\r\n  items: [],\r\n  editMode: false\r\n};\r\n\r\nexport default FacilityList;\r\n"]},"metadata":{},"sourceType":"module"}