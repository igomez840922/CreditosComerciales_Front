{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(loginUser),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(logoutUser),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(socialLogin),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(authSaga);import{call,put,takeEvery,takeLatest}from\"redux-saga/effects\";// Login Redux States\nimport{LOGIN_USER,LOGOUT_USER,SOCIAL_LOGIN}from\"./actionTypes\";import{apiError,loginSuccess,logoutUserSuccess}from\"./actions\";//Include Both Helper File with needed methods\nimport{getFirebaseBackend}from\"../../../helpers/firebase_helper\";import{postFakeLogin,postJwtLogin,postSocialLogin}from\"../../../helpers/fakebackend_helper\";var fireBaseBackend=getFirebaseBackend();function loginUser(_ref){var _ref$payload,user,history,response,_response,_response2;return _regeneratorRuntime.wrap(function loginUser$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$payload=_ref.payload,user=_ref$payload.user,history=_ref$payload.history;_context.prev=1;if(!(process.env.REACT_APP_DEFAULTAUTH===\"firebase\")){_context.next=10;break;}_context.next=5;return call(fireBaseBackend.loginUser,user.email,user.password);case 5:response=_context.sent;_context.next=8;return put(loginSuccess(response));case 8:_context.next=26;break;case 10:if(!(process.env.REACT_APP_DEFAULTAUTH===\"jwt\")){_context.next=19;break;}_context.next=13;return call(postJwtLogin,{email:user.email,password:user.password}).then(function(resp){});case 13:_response=_context.sent;localStorage.setItem(\"authUser\",JSON.stringify(_response));_context.next=17;return put(loginSuccess(_response));case 17:_context.next=26;break;case 19:if(!(process.env.REACT_APP_DEFAULTAUTH===\"fake\")){_context.next=26;break;}_context.next=22;return call(postFakeLogin,{email:user.email,password:user.password});case 22:_response2=_context.sent;localStorage.setItem(\"authUser\",JSON.stringify(_response2));_context.next=26;return put(loginSuccess(_response2));case 26:history.push(\"/dashboard\");_context.next=33;break;case 29:_context.prev=29;_context.t0=_context[\"catch\"](1);_context.next=33;return put(apiError(_context.t0));case 33:case\"end\":return _context.stop();}}},_marked,null,[[1,29]]);}function logoutUser(_ref2){var history,response;return _regeneratorRuntime.wrap(function logoutUser$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:history=_ref2.payload.history;_context2.prev=1;localStorage.removeItem(\"authUser\");if(!(process.env.REACT_APP_DEFAULTAUTH===\"firebase\")){_context2.next=9;break;}_context2.next=6;return call(fireBaseBackend.logout);case 6:response=_context2.sent;_context2.next=9;return put(logoutUserSuccess(response));case 9:history.push(\"/login\");_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](1);_context2.next=16;return put(apiError(_context2.t0));case 16:case\"end\":return _context2.stop();}}},_marked2,null,[[1,12]]);}function socialLogin(_ref3){var _ref3$payload,data,history,type,_fireBaseBackend,response,_response3;return _regeneratorRuntime.wrap(function socialLogin$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$payload=_ref3.payload,data=_ref3$payload.data,history=_ref3$payload.history,type=_ref3$payload.type;_context3.prev=1;if(!(process.env.REACT_APP_DEFAULTAUTH===\"firebase\")){_context3.next=12;break;}_fireBaseBackend=getFirebaseBackend();_context3.next=6;return call(_fireBaseBackend.socialLoginUser,data,type);case 6:response=_context3.sent;localStorage.setItem(\"authUser\",JSON.stringify(response));_context3.next=10;return put(loginSuccess(response));case 10:_context3.next=18;break;case 12:_context3.next=14;return call(postSocialLogin,data);case 14:_response3=_context3.sent;localStorage.setItem(\"authUser\",JSON.stringify(_response3));_context3.next=18;return put(loginSuccess(_response3));case 18:history.push(\"/dashboard\");_context3.next=25;break;case 21:_context3.prev=21;_context3.t0=_context3[\"catch\"](1);_context3.next=25;return put(apiError(_context3.t0));case 25:case\"end\":return _context3.stop();}}},_marked3,null,[[1,21]]);}function authSaga(){return _regeneratorRuntime.wrap(function authSaga$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return takeEvery(LOGIN_USER,loginUser);case 2:_context4.next=4;return takeLatest(SOCIAL_LOGIN,socialLogin);case 4:_context4.next=6;return takeEvery(LOGOUT_USER,logoutUser);case 6:case\"end\":return _context4.stop();}}},_marked4);}export default authSaga;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/store/auth/login/saga.js"],"names":["loginUser","logoutUser","socialLogin","authSaga","call","put","takeEvery","takeLatest","LOGIN_USER","LOGOUT_USER","SOCIAL_LOGIN","apiError","loginSuccess","logoutUserSuccess","getFirebaseBackend","postFakeLogin","postJwtLogin","postSocialLogin","fireBaseBackend","payload","user","history","process","env","REACT_APP_DEFAULTAUTH","email","password","response","then","resp","localStorage","setItem","JSON","stringify","push","removeItem","logout","data","type","socialLoginUser"],"mappings":"wNAgBUA,S,iDAkCAC,U,iDAcAC,W,iDAsBAC,Q,EAtFV,OAASC,IAAT,CAAeC,GAAf,CAAoBC,SAApB,CAA+BC,UAA/B,KAAiD,oBAAjD,CAEA;AACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,YAAlC,KAAsD,eAAtD,CACA,OAASC,QAAT,CAAmBC,YAAnB,CAAiCC,iBAAjC,KAA0D,WAA1D,CAEA;AACA,OAASC,kBAAT,KAAmC,kCAAnC,CACA,OACEC,aADF,CAEEC,YAFF,CAGEC,eAHF,KAIO,qCAJP,CAMA,GAAMC,CAAAA,eAAe,CAAGJ,kBAAkB,EAA1C,CAEA,QAAUd,CAAAA,SAAV,uMAAsBmB,OAAtB,CAAiCC,IAAjC,cAAiCA,IAAjC,CAAuCC,OAAvC,cAAuCA,OAAvC,sBAGQC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GAAsC,UAH9C,2CAKuB,MAAMpB,CAAAA,IAAI,CACzBc,eAAe,CAAClB,SADS,CAEzBoB,IAAI,CAACK,KAFoB,CAGzBL,IAAI,CAACM,QAHoB,CAAV,CALvB,OAKYC,QALZ,+BAUM,MAAMtB,CAAAA,GAAG,CAACO,YAAY,CAACe,QAAD,CAAb,CAAT,CAVN,2CAWeL,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GAAsC,KAXrD,4CAYuB,MAAMpB,CAAAA,IAAI,CAACY,YAAD,CAAe,CACxCS,KAAK,CAAEL,IAAI,CAACK,KAD4B,CAExCC,QAAQ,CAAEN,IAAI,CAACM,QAFyB,CAAf,CAAJ,CAGpBE,IAHoB,CAGf,SAAAC,IAAI,CAAE,CAEb,CALsB,CAAN,CAZvB,QAYYF,SAZZ,eAkBMG,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeN,SAAf,CAAjC,EAlBN,iBAmBM,MAAMtB,CAAAA,GAAG,CAACO,YAAY,CAACe,SAAD,CAAb,CAAT,CAnBN,4CAoBeL,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GAAsC,MApBrD,4CAqBuB,MAAMpB,CAAAA,IAAI,CAACW,aAAD,CAAgB,CACzCU,KAAK,CAAEL,IAAI,CAACK,KAD6B,CAEzCC,QAAQ,CAAEN,IAAI,CAACM,QAF0B,CAAhB,CAAV,CArBvB,QAqBYC,UArBZ,eAyBMG,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeN,UAAf,CAAjC,EAzBN,iBA0BM,MAAMtB,CAAAA,GAAG,CAACO,YAAY,CAACe,UAAD,CAAb,CAAT,CA1BN,QA4BIN,OAAO,CAACa,IAAR,CAAa,YAAb,EA5BJ,kGA8BI,MAAM7B,CAAAA,GAAG,CAACM,QAAQ,aAAT,CAAT,CA9BJ,qEAkCA,QAAUV,CAAAA,UAAV,mJAAkCoB,OAAlC,OAAuBF,OAAvB,CAAkCE,OAAlC,kBAEIS,YAAY,CAACK,UAAb,CAAwB,UAAxB,EAFJ,KAIQb,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GAAsC,UAJ9C,4CAKuB,MAAMpB,CAAAA,IAAI,CAACc,eAAe,CAACkB,MAAjB,CAAV,CALvB,OAKYT,QALZ,iCAMM,MAAMtB,CAAAA,GAAG,CAACQ,iBAAiB,CAACc,QAAD,CAAlB,CAAT,CANN,OAQIN,OAAO,CAACa,IAAR,CAAa,QAAb,EARJ,uGAUI,MAAM7B,CAAAA,GAAG,CAACM,QAAQ,cAAT,CAAT,CAVJ,uEAcA,QAAUT,CAAAA,WAAV,4NAAwBiB,OAAxB,CAAmCkB,IAAnC,eAAmCA,IAAnC,CAAyChB,OAAzC,eAAyCA,OAAzC,CAAkDiB,IAAlD,eAAkDA,IAAlD,uBAEQhB,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GAAsC,UAF9C,4BAGYN,gBAHZ,CAG8BJ,kBAAkB,EAHhD,kBAIuB,MAAMV,CAAAA,IAAI,CACzBc,gBAAe,CAACqB,eADS,CAEzBF,IAFyB,CAGzBC,IAHyB,CAAV,CAJvB,OAIYX,QAJZ,gBASMG,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAAjC,EATN,kBAUM,MAAMtB,CAAAA,GAAG,CAACO,YAAY,CAACe,QAAD,CAAb,CAAT,CAVN,0DAYuB,MAAMvB,CAAAA,IAAI,CAACa,eAAD,CAAkBoB,IAAlB,CAAV,CAZvB,QAYYV,UAZZ,gBAaMG,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeN,UAAf,CAAjC,EAbN,kBAcM,MAAMtB,CAAAA,GAAG,CAACO,YAAY,CAACe,UAAD,CAAb,CAAT,CAdN,QAgBIN,OAAO,CAACa,IAAR,CAAa,YAAb,EAhBJ,uGAkBI,MAAM7B,CAAAA,GAAG,CAACM,QAAQ,cAAT,CAAT,CAlBJ,uEAsBA,QAAUR,CAAAA,QAAV,wIACE,MAAMG,CAAAA,SAAS,CAACE,UAAD,CAAaR,SAAb,CAAf,CADF,wBAEE,MAAMO,CAAAA,UAAU,CAACG,YAAD,CAAeR,WAAf,CAAhB,CAFF,wBAGE,MAAMI,CAAAA,SAAS,CAACG,WAAD,CAAcR,UAAd,CAAf,CAHF,wDAMA,cAAeE,CAAAA,QAAf","sourcesContent":["import { call, put, takeEvery, takeLatest } from \"redux-saga/effects\"\r\n\r\n// Login Redux States\r\nimport { LOGIN_USER, LOGOUT_USER, SOCIAL_LOGIN } from \"./actionTypes\"\r\nimport { apiError, loginSuccess, logoutUserSuccess } from \"./actions\"\r\n\r\n//Include Both Helper File with needed methods\r\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\"\r\nimport {\r\n  postFakeLogin,\r\n  postJwtLogin,\r\n  postSocialLogin,\r\n} from \"../../../helpers/fakebackend_helper\"\r\n\r\nconst fireBaseBackend = getFirebaseBackend()\r\n\r\nfunction* loginUser({ payload: { user, history } }) {\r\n  \r\n  try {\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n\r\n      const response = yield call(\r\n        fireBaseBackend.loginUser,\r\n        user.email,\r\n        user.password\r\n      )\r\n      yield put(loginSuccess(response))\r\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"jwt\") {\r\n      const response = yield call(postJwtLogin, {\r\n        email: user.email,\r\n        password: user.password,\r\n      }).then(resp=>{\r\n          \r\n      })\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"fake\") {\r\n      const response = yield call(postFakeLogin, {\r\n        email: user.email,\r\n        password: user.password,\r\n      })\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    }\r\n    history.push(\"/dashboard\")\r\n  } catch (error) {\r\n    yield put(apiError(error))\r\n  }\r\n}\r\n\r\nfunction* logoutUser({ payload: { history } }) {\r\n  try {\r\n    localStorage.removeItem(\"authUser\")\r\n\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n      const response = yield call(fireBaseBackend.logout)\r\n      yield put(logoutUserSuccess(response))\r\n    }\r\n    history.push(\"/login\")\r\n  } catch (error) {\r\n    yield put(apiError(error))\r\n  }\r\n}\r\n\r\nfunction* socialLogin({ payload: { data, history, type } }) {\r\n  try {\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n      const fireBaseBackend = getFirebaseBackend()\r\n      const response = yield call(\r\n        fireBaseBackend.socialLoginUser,\r\n        data,\r\n        type,\r\n      )\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    } else {\r\n      const response = yield call(postSocialLogin, data)\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    }\r\n    history.push(\"/dashboard\")\r\n  } catch (error) {\r\n    yield put(apiError(error))\r\n  }\r\n}\r\n\r\nfunction* authSaga() {\r\n  yield takeEvery(LOGIN_USER, loginUser)\r\n  yield takeLatest(SOCIAL_LOGIN, socialLogin)\r\n  yield takeEvery(LOGOUT_USER, logoutUser)\r\n}\r\n\r\nexport default authSaga\r\n"]},"metadata":{},"sourceType":"module"}