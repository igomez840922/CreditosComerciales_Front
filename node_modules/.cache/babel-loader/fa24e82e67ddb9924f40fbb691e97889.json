{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import Breadcrumbs from'../../../components/Common/Breadcrumb';import{useTranslation}from'react-i18next';import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import*as OPTs from\"../../../helpers/options_helper\";import{Tabs,Tab}from'react-bootstrap';import{CardTitle,Button,Card,CardBody,Label,Col,Table}from\"reactstrap\";import BootstrapTable from'react-bootstrap-table-next';import ToolkitProvider,{Search}from'react-bootstrap-table2-toolkit';import paginationFactory from'react-bootstrap-table2-paginator';import PantallaInstructivo from\"../../CommercialCredit/14_AdminDesembolso/Desembolso/Instructivo/index.js\";import ModalWatchProces from\"../ModalWacthProcess\";import{translationHelpers}from'../../../helpers';import LoadingOverlay from\"react-loading-overlay\";import{BackendServices}from\"../../../services\";//import ActiveDirectoryService from \"../../services/ActiveDirectory\";\nimport moment from\"moment\";import Select from\"react-select\";import{Row}from\"react-bootstrap\";import ModalPreviewHistorical from\"../modal/ModalPreviewHistorical\";import\"flatpickr/dist/themes/material_blue.css\";import Flatpickr from\"react-flatpickr\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InstructivoDesembolsoNew=function InstructivoDesembolsoNew(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _translationHelpers=translationHelpers('commercial_credit','translation'),_translationHelpers2=_slicedToArray(_translationHelpers,1),tr=_translationHelpers2[0];var history=useHistory();var COLUMNS_HEADERS=[{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Procedure\")}),dataField:'transactId',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Creation Date\")}),dataField:'creationDate',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Process\")}),dataField:'bpmProcessDescription',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Activity\")}),dataField:'bpmActivityDescription',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Fecha de Actividad\")}),dataField:'activityDate',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"IdType\")}),dataField:'idType',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"IdNumber\")}),dataField:'clientDocId',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Responsible\")}),dataField:'responsible',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Names\")}),dataField:'names',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Surnames\")}),dataField:'surnames',sort:true},{text:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Status\")}),dataField:'stateDescription',sort:true},{text:\"\",dataField:'action'}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dataBody=_useState2[0],setDataBody=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ShowDisplayModal=_useState4[0],setShowDisplayModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),ShowDisplayModalPreview=_useState6[0],setShowDisplayModalPreview=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),processInstanceId=_useState8[0],setProcessInstanceId=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isActiveLoading=_useState10[0],setIsActiveLoading=_useState10[1];var backendServices=new BackendServices();var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),IdentificationTypeList=_useState12[0],setIdentificationTypeList=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),IdentificationTypeSelected=_useState14[0],setIdentificationTypeSelected=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),idTypeValidate=_useState16[0],setIdTypeValidate=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),formRef=_useState18[0],setFormRef=_useState18[1];var _useState19=useState(undefined),_useState20=_slicedToArray(_useState19,2),transactId=_useState20[0],setTransactId=_useState20[1];var _useState21=useState(undefined),_useState22=_slicedToArray(_useState21,2),instanceId=_useState22[0],setInstanceId=_useState22[1];useEffect(function(){loadIdentificationTypes();return function(){};},[]);/**\r\n     * *Busca las coincidencias para históricos\r\n     * @param {object} event\r\n     * @param {object} errors\r\n     * @param {object} values\r\n     * @return {void}\r\n     */function searchHistorical(event,errors,values){var _IdentificationTypeSe;event.preventDefault();if(errors.length>0){return;}setIsActiveLoading(true);values.idType=(_IdentificationTypeSe=IdentificationTypeSelected===null||IdentificationTypeSelected===void 0?void 0:IdentificationTypeSelected.value)!==null&&_IdentificationTypeSe!==void 0?_IdentificationTypeSe:'';backendServices.getHistoricalSearches(values.transactId,values.idType,values.clientDocId).then(function(response){console.log(\"getHistoricalSearches\",response);if(response.status==200){setDataBody(response.result.summaryProcess.map(function($$,index){$$.creationDate=formatDate($$.creationDate);$$.activityDate=formatDate($$.activityDate);$$.names=\"\".concat($$.name,\" \").concat($$.secondName);$$.surnames=\"\".concat($$.lastName,\" \").concat($$.secondLastName);$$.action=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{onClick:function onClick(e){setInstanceId($$.instanceId);setTransactId($$.transactId);toggleModalWatchPreview();},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-file-eye-outline mdi-24px\"})},index),/*#__PURE__*/_jsx(Link,{onClick:function onClick(e){setProcessInstanceId($$.instanceId);toggleModalWatchProcess();},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-eye mdi-24px\"})},index)]});return $$;}));}else{}setIsActiveLoading(false);}).catch(function(err){setIsActiveLoading(false);console.log(err);});}/**\r\n     * *Obtiene catálogo de tipo de identificación\r\n     * @param {}\r\n     * @return {void}\r\n     */function loadIdentificationTypes(){backendServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){var json=[{label:t(\"None\"),value:\"\"}];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"description\"]),value:data[i][\"id\"]});}setIdentificationTypeList(json);}}).catch(function(error){console.log(error);});}function formatDate(date){return moment(date).format(\"DD/MM/YYYY HH:mm:ss\");}function toggleModalWatchProcess(){setShowDisplayModal(!ShowDisplayModal);}function toggleModalWatchPreview(){setShowDisplayModalPreview(!ShowDisplayModalPreview);}function clearForm(){setIdentificationTypeSelected(\"\");setIdTypeValidate(false);setIsActiveLoading(false);setDataBody([]);formRef.reset();}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Dashboard\"),breadcrumbItem:t(\"DisbursementInstructions\")}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(AvForm,{autoComplete:\"off\",className:\"needs-validation\",onSubmit:searchHistorical,ref:function ref(_ref){return setFormRef(_ref);},children:[/*#__PURE__*/_jsx(CardTitle,{className:\"h4 d-flex flex-row justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[t(\"CommercialCredit\"),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"DisbursementInstructions\")})]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\"}),/*#__PURE__*/_jsx(Col,{md:\"6\",style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Button,{className:\"btn\",color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){history.push({pathname:'/DashboardInstructivo',data:{}});},title:t(\"Return\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",\" Retornar a la bandeja\"]})})]}),/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"Processinginformation\"),children:/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"0\",id:\"uncontrolled-tab-example\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{className:\"m-4\",eventKey:0,title:\"L\\xEDnea de cr\\xE9ditos\",children:/*#__PURE__*/_jsx(ToolkitProvider,{keyField:\"id\",data:dataBody,columns:COLUMNS_HEADERS,search:true,children:function children(props){return/*#__PURE__*/_jsx(\"div\",{className:\"m-3\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"# De Línea\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Tipo de línea\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Monto de línea\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Frecuencia de revisión\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Líneas hijas\")})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Actions\")})})]})}),/*#__PURE__*/_jsx(\"tr\",{style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Sin Datos\"})})}),/*#__PURE__*/_jsx(\"tbody\",{})]})});}})},0),/*#__PURE__*/_jsx(Tab,{className:\"m-4\",eventKey:1,title:\"Instructivo de desembolso\",children:/*#__PURE__*/_jsx(PantallaInstructivo,{firmarcontrato:false,adminDesembolso:true,ejecutarDesembolso:false})},1)]})})]})})})]}),processInstanceId&&/*#__PURE__*/_jsx(ModalWatchProces,{isOpen:ShowDisplayModal,toggle:function toggle(){toggleModalWatchProcess();},processInstanceId:processInstanceId,t:tr}),/*#__PURE__*/_jsx(ModalPreviewHistorical,{isOpen:ShowDisplayModalPreview,toggle:function toggle(){toggleModalWatchPreview();},transactId:transactId,instanceId:instanceId})]});};export default InstructivoDesembolsoNew;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/Dashboard/bandejaInstructivo/InstructivoDesembolso.js"],"names":["React","useEffect","useState","Link","useHistory","Breadcrumbs","useTranslation","AvForm","AvField","AvGroup","OPTs","Tabs","Tab","CardTitle","Button","Card","CardBody","Label","Col","Table","BootstrapTable","ToolkitProvider","Search","paginationFactory","PantallaInstructivo","ModalWatchProces","translationHelpers","LoadingOverlay","BackendServices","moment","Select","Row","ModalPreviewHistorical","Flatpickr","InstructivoDesembolsoNew","t","tr","history","COLUMNS_HEADERS","text","dataField","sort","dataBody","setDataBody","ShowDisplayModal","setShowDisplayModal","ShowDisplayModalPreview","setShowDisplayModalPreview","processInstanceId","setProcessInstanceId","isActiveLoading","setIsActiveLoading","backendServices","IdentificationTypeList","setIdentificationTypeList","IdentificationTypeSelected","setIdentificationTypeSelected","idTypeValidate","setIdTypeValidate","formRef","setFormRef","undefined","transactId","setTransactId","instanceId","setInstanceId","loadIdentificationTypes","searchHistorical","event","errors","values","preventDefault","length","idType","value","getHistoricalSearches","clientDocId","then","response","console","log","status","result","summaryProcess","map","$$","index","creationDate","formatDate","activityDate","names","name","secondName","surnames","lastName","secondLastName","action","e","toggleModalWatchPreview","toggleModalWatchProcess","catch","err","consultarCatalogoTipoIdentificacion","data","json","label","i","push","error","date","format","clearForm","reset","ref","textAlign","margin","pathname","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport Breadcrumbs from '../../../components/Common/Breadcrumb';\r\nimport { useTranslation } from 'react-i18next'\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport * as OPTs from \"../../../helpers/options_helper\"\r\nimport { Tabs, Tab } from 'react-bootstrap';\r\nimport {\r\n    CardTitle, Button,\r\n    Card, CardBody, Label, Col, Table\r\n} from \"reactstrap\"\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport ToolkitProvider, { Search } from 'react-bootstrap-table2-toolkit';\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\nimport PantallaInstructivo from \"../../CommercialCredit/14_AdminDesembolso/Desembolso/Instructivo/index.js\"\r\nimport ModalWatchProces from \"../ModalWacthProcess\";\r\nimport { translationHelpers } from '../../../helpers';\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { BackendServices } from \"../../../services\";\r\n//import ActiveDirectoryService from \"../../services/ActiveDirectory\";\r\nimport moment from \"moment\";\r\nimport Select from \"react-select\";\r\nimport { Row } from \"react-bootstrap\";\r\nimport ModalPreviewHistorical from \"../modal/ModalPreviewHistorical\";\r\nimport \"flatpickr/dist/themes/material_blue.css\";\r\nimport Flatpickr from \"react-flatpickr\";\r\n\r\nconst InstructivoDesembolsoNew = () => {\r\n    const { t } = useTranslation();\r\n    const [tr] = translationHelpers('commercial_credit', 'translation');\r\n    const history = useHistory();\r\n    let COLUMNS_HEADERS = [\r\n        { text: <strong>{t(\"Procedure\")}</strong>, dataField: 'transactId', sort: true },\r\n        { text: <strong>{t(\"Creation Date\")}</strong>, dataField: 'creationDate', sort: true },\r\n        { text: <strong>{t(\"Process\")}</strong>, dataField: 'bpmProcessDescription', sort: true },\r\n        { text: <strong>{t(\"Activity\")}</strong>, dataField: 'bpmActivityDescription', sort: true },\r\n        { text: <strong>{t(\"Fecha de Actividad\")}</strong>, dataField: 'activityDate', sort: true },\r\n        { text: <strong>{t(\"IdType\")}</strong>, dataField: 'idType', sort: true },\r\n        { text: <strong>{t(\"IdNumber\")}</strong>, dataField: 'clientDocId', sort: true },\r\n        { text: <strong>{t(\"Responsible\")}</strong>, dataField: 'responsible', sort: true },\r\n        { text: <strong>{t(\"Names\")}</strong>, dataField: 'names', sort: true },\r\n        { text: <strong>{t(\"Surnames\")}</strong>, dataField: 'surnames', sort: true },\r\n        { text: <strong>{t(\"Status\")}</strong>, dataField: 'stateDescription', sort: true },\r\n        { text: \"\", dataField: 'action' },\r\n    ];\r\n\r\n\r\n    const [dataBody, setDataBody] = useState([]);\r\n    const [ShowDisplayModal, setShowDisplayModal] = useState(false);\r\n    const [ShowDisplayModalPreview, setShowDisplayModalPreview] = useState(false);\r\n    const [processInstanceId, setProcessInstanceId] = useState(null);\r\n    const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n\r\n    const backendServices = new BackendServices();\r\n\r\n    const [IdentificationTypeList, setIdentificationTypeList] = useState([]);\r\n    const [IdentificationTypeSelected, setIdentificationTypeSelected] = useState(\"\");\r\n    const [idTypeValidate, setIdTypeValidate] = useState(false);\r\n    const [formRef, setFormRef] = useState(false);\r\n    const [transactId, setTransactId] = useState(undefined);\r\n    const [instanceId, setInstanceId] = useState(undefined);\r\n\r\n    useEffect(() => {\r\n        loadIdentificationTypes();\r\n        return () => {\r\n        };\r\n    }, []);\r\n\r\n    /**\r\n     * *Busca las coincidencias para históricos\r\n     * @param {object} event\r\n     * @param {object} errors\r\n     * @param {object} values\r\n     * @return {void}\r\n     */\r\n    function searchHistorical(event, errors, values) {\r\n\r\n        event.preventDefault();\r\n        if (errors.length > 0) {\r\n            return;\r\n        }\r\n\r\n        setIsActiveLoading(true);\r\n        values.idType = IdentificationTypeSelected?.value ?? '';\r\n\r\n        backendServices.getHistoricalSearches(values.transactId, values.idType, values.clientDocId).then(response => {\r\n            console.log(\"getHistoricalSearches\", response);\r\n\r\n            if (response.status == 200) {\r\n                setDataBody(\r\n                    response.result.summaryProcess.map(($$, index) => {\r\n                        $$.creationDate = formatDate($$.creationDate);\r\n                        $$.activityDate = formatDate($$.activityDate);\r\n                        $$.names = `${$$.name} ${$$.secondName}`;\r\n                        $$.surnames = `${$$.lastName} ${$$.secondLastName}`;\r\n                        $$.action = (\r\n                            <>\r\n                                <Link key={index} onClick={(e) => { setInstanceId($$.instanceId); setTransactId($$.transactId); toggleModalWatchPreview(); }}>\r\n                                    <i className=\"mdi mdi-file-eye-outline mdi-24px\"></i>\r\n                                </Link>\r\n                                <Link key={index} onClick={(e) => { setProcessInstanceId($$.instanceId); toggleModalWatchProcess(); }}>\r\n                                    <i className=\"mdi mdi-eye mdi-24px\"></i>\r\n                                </Link>\r\n                            </>\r\n                        )\r\n                        return $$;\r\n                    }));\r\n            } else {\r\n\r\n            }\r\n\r\n            setIsActiveLoading(false);\r\n        }).catch(err => {\r\n            setIsActiveLoading(false);\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * *Obtiene catálogo de tipo de identificación\r\n     * @param {}\r\n     * @return {void}\r\n     */\r\n    function loadIdentificationTypes() {\r\n        backendServices.consultarCatalogoTipoIdentificacion().then((data) => {\r\n            if (data !== null && data !== undefined) {\r\n                let json = [{ label: t(\"None\"), value: \"\" }];\r\n                for (let i = 0; i < data.length; i++) {\r\n                    json.push({ label: t(data[i][\"description\"]), value: data[i][\"id\"] })\r\n                }\r\n                setIdentificationTypeList(json)\r\n            }\r\n        }).catch((error) => {\r\n            console.log(error)\r\n        });\r\n    }\r\n\r\n\r\n    function formatDate(date) {\r\n        return moment(date).format(\"DD/MM/YYYY HH:mm:ss\");\r\n    }\r\n\r\n    function toggleModalWatchProcess() {\r\n        setShowDisplayModal(!ShowDisplayModal)\r\n    }\r\n\r\n    function toggleModalWatchPreview() {\r\n        setShowDisplayModalPreview(!ShowDisplayModalPreview)\r\n    }\r\n\r\n    function clearForm() {\r\n        setIdentificationTypeSelected(\"\");\r\n        setIdTypeValidate(false);\r\n        setIsActiveLoading(false);\r\n        setDataBody([]);\r\n        formRef.reset();\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"page-content\">\r\n                <Breadcrumbs title={t(\"Dashboard\")} breadcrumbItem={t(\"DisbursementInstructions\")} />\r\n\r\n                <Card>\r\n                    <CardBody>\r\n                        <AvForm autoComplete=\"off\" className=\"needs-validation\" onSubmit={searchHistorical} ref={ref => (setFormRef(ref))}>\r\n\r\n                            <CardTitle className=\"h4 d-flex flex-row justify-content-between align-items-center\">\r\n                                <div>\r\n                                    {t(\"CommercialCredit\")}\r\n                                    <p className=\"card-title-desc\">\r\n                                        {t(\"DisbursementInstructions\")}\r\n                                    </p>\r\n                                </div>\r\n                            </CardTitle>\r\n                            <Row>\r\n                                <Col md=\"6\">\r\n                                </Col>\r\n                                <Col md=\"6\" style={{ textAlign: \"right\" }}>\r\n                                    <Button className=\"btn\" color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={() => {\r\n                                        history.push({\r\n                                            pathname: '/DashboardInstructivo',\r\n                                            data: {},\r\n                                        });\r\n                                    }} title={t(\"Return\")}><i className=\"mdi mdi-cancel mid-12px\"></i> {(\" Retornar a la bandeja\")}</Button>\r\n                                </Col>\r\n                            </Row>\r\n                            <LoadingOverlay active={isActiveLoading} spinner text={t(\"Processinginformation\")}>\r\n\r\n                                {/* <SearchBar className=\"custome-search-field float-end\" delay={1000} placeholder={t(\"Search\")} {...props.searchProps} /> */}\r\n                                <Tabs defaultActiveKey=\"0\" id=\"uncontrolled-tab-example\" className=\"mb-3\">\r\n                                    <Tab className=\"m-4\" key={0} eventKey={0} title=\"Línea de créditos\">\r\n                                        <ToolkitProvider\r\n                                            keyField=\"id\"\r\n                                            data={dataBody}\r\n                                            columns={COLUMNS_HEADERS}\r\n                                            search\r\n                                        >\r\n                                            {\r\n                                                props => (\r\n                                                    <div className=\"m-3\">\r\n                                                        <Table className=\"table table-striped table-hover styled-table table\" >\r\n                                                            <thead>\r\n                                                                <tr>\r\n                                                                    <th><strong>{t(\"# De Línea\")}</strong></th>\r\n                                                                    <th><strong>{t(\"Tipo de línea\")}</strong></th>\r\n                                                                    <th><strong>{t(\"Monto de línea\")}</strong></th>\r\n                                                                    <th><strong>{t(\"Frecuencia de revisión\")}</strong></th>\r\n                                                                    <th><strong>{t(\"Líneas hijas\")}</strong></th>\r\n                                                                    <th><strong>{t(\"Actions\")}</strong></th>\r\n                                                                </tr>\r\n                                                            </thead>\r\n                                                            <tr style={{ textAlign: \"center\" }}><td colSpan=\"6\"><h2>Sin Datos</h2></td></tr>\r\n                                                            <tbody>\r\n                                                            </tbody>\r\n                                                        </Table>\r\n                                                    </div>\r\n                                                )\r\n                                            }\r\n                                        </ToolkitProvider>\r\n                                    </Tab>\r\n                                    <Tab className=\"m-4\" key={1} eventKey={1} title=\"Instructivo de desembolso\">\r\n                                        <PantallaInstructivo firmarcontrato={false} adminDesembolso={true} ejecutarDesembolso={false} />\r\n                                    </Tab>\r\n                                </Tabs>\r\n                            </LoadingOverlay>\r\n                        </AvForm>\r\n                    </CardBody>\r\n                </Card>\r\n\r\n            </div>\r\n            {processInstanceId && (<ModalWatchProces isOpen={ShowDisplayModal} toggle={() => { toggleModalWatchProcess() }} processInstanceId={processInstanceId} t={tr} />)}\r\n            <ModalPreviewHistorical isOpen={ShowDisplayModalPreview} toggle={() => { toggleModalWatchPreview() }} transactId={transactId} instanceId={instanceId} />\r\n        </React.Fragment >\r\n    );\r\n}\r\n\r\nexport default InstructivoDesembolsoNew\r\n"]},"metadata":{},"sourceType":"module"}