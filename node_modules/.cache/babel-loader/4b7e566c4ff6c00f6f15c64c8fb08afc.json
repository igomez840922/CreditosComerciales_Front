{"ast":null,"code":"import { call, put, takeEvery, takeLatest } from \"redux-saga/effects\"; // Login Redux States\n\nimport { LOGIN_USER, LOGOUT_USER, SOCIAL_LOGIN } from \"./actionTypes\";\nimport { apiError, loginSuccess, logoutUserSuccess } from \"./actions\"; //Include Both Helper File with needed methods\n\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\";\nimport { postFakeLogin, postJwtLogin, postSocialLogin } from \"../../../helpers/fakebackend_helper\";\nconst fireBaseBackend = getFirebaseBackend();\n\nfunction* loginUser({\n  payload: {\n    user,\n    history\n  }\n}) {\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(fireBaseBackend.loginUser, user.email, user.password);\n      yield put(loginSuccess(response));\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"jwt\") {\n      const response = yield call(postJwtLogin, {\n        email: user.email,\n        password: user.password\n      }).then(resp => {});\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"fake\") {\n      const response = yield call(postFakeLogin, {\n        email: user.email,\n        password: user.password\n      });\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    }\n\n    history.push(\"/dashboard\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* logoutUser({\n  payload: {\n    history\n  }\n}) {\n  try {\n    localStorage.removeItem(\"authUser\");\n\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(fireBaseBackend.logout);\n      yield put(logoutUserSuccess(response));\n    }\n\n    history.push(\"/login\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* socialLogin({\n  payload: {\n    data,\n    history,\n    type\n  }\n}) {\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const fireBaseBackend = getFirebaseBackend();\n      const response = yield call(fireBaseBackend.socialLoginUser, data, type);\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    } else {\n      const response = yield call(postSocialLogin, data);\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    }\n\n    history.push(\"/dashboard\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* authSaga() {\n  yield takeEvery(LOGIN_USER, loginUser);\n  yield takeLatest(SOCIAL_LOGIN, socialLogin);\n  yield takeEvery(LOGOUT_USER, logoutUser);\n}\n\nexport default authSaga;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/store/auth/login/saga.js"],"names":["call","put","takeEvery","takeLatest","LOGIN_USER","LOGOUT_USER","SOCIAL_LOGIN","apiError","loginSuccess","logoutUserSuccess","getFirebaseBackend","postFakeLogin","postJwtLogin","postSocialLogin","fireBaseBackend","loginUser","payload","user","history","process","env","REACT_APP_DEFAULTAUTH","response","email","password","then","resp","localStorage","setItem","JSON","stringify","push","error","logoutUser","removeItem","logout","socialLogin","data","type","socialLoginUser","authSaga"],"mappings":"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","sourcesContent":["import { call, put, takeEvery, takeLatest } from \"redux-saga/effects\"\r\n\r\n// Login Redux States\r\nimport { LOGIN_USER, LOGOUT_USER, SOCIAL_LOGIN } from \"./actionTypes\"\r\nimport { apiError, loginSuccess, logoutUserSuccess } from \"./actions\"\r\n\r\n//Include Both Helper File with needed methods\r\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\"\r\nimport {\r\n  postFakeLogin,\r\n  postJwtLogin,\r\n  postSocialLogin,\r\n} from \"../../../helpers/fakebackend_helper\"\r\n\r\nconst fireBaseBackend = getFirebaseBackend()\r\n\r\nfunction* loginUser({ payload: { user, history } }) {\r\n  \r\n  try {\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n\r\n      const response = yield call(\r\n        fireBaseBackend.loginUser,\r\n        user.email,\r\n        user.password\r\n      )\r\n      yield put(loginSuccess(response))\r\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"jwt\") {\r\n      const response = yield call(postJwtLogin, {\r\n        email: user.email,\r\n        password: user.password,\r\n      }).then(resp=>{\r\n          \r\n      })\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"fake\") {\r\n      const response = yield call(postFakeLogin, {\r\n        email: user.email,\r\n        password: user.password,\r\n      })\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    }\r\n    history.push(\"/dashboard\")\r\n  } catch (error) {\r\n    yield put(apiError(error))\r\n  }\r\n}\r\n\r\nfunction* logoutUser({ payload: { history } }) {\r\n  try {\r\n    localStorage.removeItem(\"authUser\")\r\n\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n      const response = yield call(fireBaseBackend.logout)\r\n      yield put(logoutUserSuccess(response))\r\n    }\r\n    history.push(\"/login\")\r\n  } catch (error) {\r\n    yield put(apiError(error))\r\n  }\r\n}\r\n\r\nfunction* socialLogin({ payload: { data, history, type } }) {\r\n  try {\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n      const fireBaseBackend = getFirebaseBackend()\r\n      const response = yield call(\r\n        fireBaseBackend.socialLoginUser,\r\n        data,\r\n        type,\r\n      )\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    } else {\r\n      const response = yield call(postSocialLogin, data)\r\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\r\n      yield put(loginSuccess(response))\r\n    }\r\n    history.push(\"/dashboard\")\r\n  } catch (error) {\r\n    yield put(apiError(error))\r\n  }\r\n}\r\n\r\nfunction* authSaga() {\r\n  yield takeEvery(LOGIN_USER, loginUser)\r\n  yield takeLatest(SOCIAL_LOGIN, socialLogin)\r\n  yield takeEvery(LOGOUT_USER, logoutUser)\r\n}\r\n\r\nexport default authSaga\r\n"]},"metadata":{},"sourceType":"module"}