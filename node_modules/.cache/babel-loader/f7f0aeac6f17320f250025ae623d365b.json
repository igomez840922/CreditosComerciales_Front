{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{withTranslation}from\"react-i18next\";import{useTranslation}from'react-i18next';import Select from\"react-select\";import{useLocation,useHistory}from'react-router-dom';import moment from\"moment\";import{Card,CardBody,CardHeader,Row,Col,Label,Table}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";import ApiServiceBackend from\"../../../../../services/BackendServices/Services\";import MaskSoaint from\"../../../../../api/plugins_soaint/maskNumber\";import{BackendServices,CoreServices}from'../../../../../services';import*as url from\"../../../../../helpers/url_helper\";import LoadingOverlay from'react-loading-overlay';import{uniq_key}from'../../../../../helpers/unq_key';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DatosGenerales=/*#__PURE__*/React.forwardRef(function(props,ref){React.useImperativeHandle(ref,function(){return{validateForm:function validateForm(){var form=document.getElementById('frmDatosGenerales');form.requestSubmit();},getFormValidation:function getFormValidation(){return formValid;},dataReturn2:dataReturn2};});var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var location=useLocation();var history=useHistory();var _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),identificationTypeList=_useState4[0],setIdentificationTypeList=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),identificationTypeSelected=_useState6[0],setIdentificationTypeSelected=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),gruposEconomicos=_useState8[0],setGruposEconomicos=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),gruposEconomicosSelected=_useState10[0],setGruposEconomicosSelected=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),banca=_useState12[0],setBanca=_useState12[1];var _useState13=useState(undefined),_useState14=_slicedToArray(_useState13,2),bancaSelected=_useState14[0],setBancaSelected=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),actividadEmpresa=_useState16[0],setActividadEmpresa=_useState16[1];var _useState17=useState(undefined),_useState18=_slicedToArray(_useState17,2),actividadEmpresaSelected=_useState18[0],setActividadEmpresaSelected=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),subactividadEmpresa=_useState20[0],setSubActividadEmpresa=_useState20[1];var _useState21=useState(undefined),_useState22=_slicedToArray(_useState21,2),subactividadEmpresaSelected=_useState22[0],setSubActividadEmpresaSelected=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),bancaDate=_useState24[0],setDataBanca=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),codigoGrupo=_useState26[0],setCodigoGrupo=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),nombreGrupo=_useState28[0],setCNombreGrupo=_useState28[1];var _useState29=useState({codigoTipoPersona:null,codigoTipoIdentificacion:null,numeroCliente:null,primerNombre:null,segundoNombre:null,primerApellido:null,segundoApellido:null,numeroIdentificacion:null,transactId:0,economicGroup:{code:\"\",name:\"\"},economicActivity:{code:\"\",name:\"\"},subeconomicActivity:{code:\"\",name:\"\"},bank:{code:\"\",name:\"\"}}),_useState30=_slicedToArray(_useState29,2),dataReturn=_useState30[0],setDataReturn=_useState30[1];var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),dataReturn2=_useState32[0],setDataReturn2=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),formValid=_useState34[0],setFormValid=_useState34[1];var _useState35=useState(2),_useState36=_slicedToArray(_useState35,2),cambio=_useState36[0],setCambio=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),campoRequeridoGrupo=_useState38[0],setcampoRequeridoGrupo=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),campoRequeridoActividad=_useState40[0],setcampoRequeridoActividad=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),campoRequeridoSubActividad=_useState42[0],setcampoRequeridoSubActividad=_useState42[1];var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),campoRequeridoBanca=_useState44[0],setcampoRequeridoBanca=_useState44[1];var _useState45=useState(null),_useState46=_slicedToArray(_useState45,2),dataDeudores=_useState46[0],setdataDeudores=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),VariableDisabled=_useState48[0],setVariableDisabled=_useState48[1];var _useState49=useState(false),_useState50=_slicedToArray(_useState49,2),VariableDisabled2=_useState50[0],setVariableDisabled2=_useState50[1];var _useState51=useState(0),_useState52=_slicedToArray(_useState51,2),numberExpresion=_useState52[0],setnumberExpresion=_useState52[1];var _useState53=useState(false),_useState54=_slicedToArray(_useState53,2),isActiveLoading=_useState54[0],setIsActiveLoading=_useState54[1];//loading de la pagina\nvar _useState55=useState(null),_useState56=_slicedToArray(_useState55,2),mainDebtor=_useState56[0],setmainDebtor=_useState56[1];//On Mounting (componentDidMount)\nReact.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}setIsActiveLoading(true);// Read Api Service data      \nloadMainDebtor(dataSession.transactionId);loadData(dataSession);loadInitialData(dataSession);loadListGroupEconomic();loadBank();loadActivityEconomic();},[]);React.useEffect(function(){// Read Api Service data \nvar defaultVal=null;try{if(identificationTypeList.length>0&&dataReturn.codigoTipoIdentificacion!==null&&identificationTypeSelected===undefined){defaultVal=identificationTypeList.find(function(x){return x.value===dataReturn.codigoTipoIdentificacion;});if(defaultVal!==undefined){setIdentificationTypeSelected(defaultVal);}}if(gruposEconomicos.length>0&&dataReturn.economicGroup!==null&&gruposEconomicosSelected===undefined){defaultVal=gruposEconomicos.find(function(x){return x.value===dataReturn.economicGroup.code;});if(defaultVal!==undefined){setVariableDisabled(true);setGruposEconomicosSelected(defaultVal);}else{defaultVal=gruposEconomicos.find(function(x){return x.label===dataReturn.economicGroup.name;});if(defaultVal!==undefined){setGruposEconomicosSelected(defaultVal);if(VariableDisabled2){setVariableDisabled(true);}}}}if(banca.length>0&&dataReturn.bank!==null&&bancaSelected===undefined){defaultVal=banca.find(function(x){return x.value===dataReturn.bank.code;});if(defaultVal!==undefined){setBancaSelected(defaultVal);}}if(actividadEmpresa.length>0&&dataReturn.economicActivity!==null&&actividadEmpresaSelected===undefined){defaultVal=actividadEmpresa.find(function(x){return x.value===dataReturn.economicActivity.code;});if(defaultVal!==undefined){setActividadEmpresaSelected(defaultVal);}}if(subactividadEmpresa.length>0&&dataReturn.subeconomicActivity!==null&&subactividadEmpresaSelected===undefined){defaultVal=subactividadEmpresa.find(function(x){return x.value===dataReturn.subeconomicActivity.code;});if(defaultVal!==undefined){setSubActividadEmpresaSelected(defaultVal);}}}catch(err){}},[cambio]);React.useEffect(function(){try{if(props.selectedClient!==null&&props.selectedClient!==undefined){loadClientSelectedData(props.selectedClient);}}catch(err){}},[props.selectedClient]);function loadMainDebtor(transactionId){var backendServices=new BackendServices();backendServices.consultPrincipalDebtor(transactionId).then(function(resp){//console.log(resp);\nsetmainDebtor(resp);});}///////////..... CHEQUEAMOS LA DATA PARA INICIALIZAR VALORES POR DEFECTO EN LOS SELECT2 .... ////////\n// cargar actividad economica\nfunction loadActivityEconomic(){var api=new CoreServices();// getActividadEconomicaCatalogo\napi.getActividadEconomicaCatalogo().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}setActividadEmpresa(json);setCambio(null);setCambio(5);});}// cargarSubActividadEconomica\nfunction loadSubActivityEconomic(codActividad){var api=new CoreServices();// getSubActividadEconomicaCatalogo\napi.getSubActividadEconomicaCatalogo(codActividad).then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}setSubActividadEmpresa(json);if(dataReturn.subeconomicActivity!==null){setSubActividadEmpresaSelected(json.find(function(x){return x.value===dataReturn.subeconomicActivity.code;}));}else{dataReturn.subeconomicActivity={code:json[0].value,name:json[0].label};setSubActividadEmpresaSelected(json[0]);}setCambio(null);setCambio(5);});}// cargarListaGrupoEconomico\nfunction loadListGroupEconomic(){var api=new CoreServices();// getGrupoEconomicoCatalogo\napi.getGrupoEconomicoCatalogo().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){if(response.Records[i][\"Code\"]==\"0003\"){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}else{json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}}setGruposEconomicos(json);setCambio(null);setCambio(5);});}// cargarBancas\nfunction loadBank(){var api=new CoreServices();api.getBancaCatalogo().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.Records.length;i++){json.push({label:response.Records[i][\"Description\"],value:response.Records[i][\"Code\"]});}setBanca(json);setCambio(null);setCambio(5);});}// consultarDatos\nfunction loadData(_x){return _loadData.apply(this,arguments);}// guardarDatosGenerales\nfunction _loadData(){_loadData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(locationData){var api,apiBack;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:api=new CoreServices();apiBack=new BackendServices();//consultarDeudorPrincipal\n_context6.next=4;return apiBack.consultPrincipalDebtor(locationData.transactionId).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(resp){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dataReturn.numeroCliente=resp===null||resp===void 0?void 0:resp.customerNumberT24;dataReturn.primerNombre=resp===null||resp===void 0?void 0:resp.name;dataReturn.segundoNombre=resp===null||resp===void 0?void 0:resp.name2;dataReturn.primerApellido=resp===null||resp===void 0?void 0:resp.lastName;dataReturn.segundoApellido=resp===null||resp===void 0?void 0:resp.lastName2;dataReturn.numeroIdentificacion=resp===null||resp===void 0?void 0:resp.clientDocId;dataReturn.nuevoDato=\"\";setDataReturn(dataReturn);_context5.next=10;return apiBack.consultGeneralDataIGR(locationData.transactionId).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(resp){var _locationData$transac,_resp$economicGroup$c2,_resp$economicGroup2,_resp$economicGroup$n,_resp$economicGroup3,_resp$economicActivit3,_resp$economicActivit4,_resp$economicActivit5,_resp$economicActivit6,_resp$subeconomicActi5,_resp$subeconomicActi6,_resp$subeconomicActi7,_resp$subeconomicActi8,_resp$bank$code2,_resp$bank3,_resp$bank$name2,_resp$bank4,_resp$economicActivit7,_resp$economicActivit8;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(resp.statusService.statusCode==\"204\")){_context4.next=5;break;}_context4.next=3;return apiBack.consultPrincipalDebtor((_locationData$transac=locationData===null||locationData===void 0?void 0:locationData.transactionId)!==null&&_locationData$transac!==void 0?_locationData$transac:0).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(response===null)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:_context3.next=4;return api.getPartiesInformationExtra(response.typePerson,response.customerNumberT24).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response2){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.getEconomicGroup(response.customerNumberT24).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resp2){var _resp$economicGroup$c,_resp$economicGroup,_response2$activity$E,_response2$activity,_resp$economicActivit,_resp$economicActivit2,_resp$subeconomicActi,_resp$subeconomicActi2,_resp$subeconomicActi3,_resp$subeconomicActi4,_resp$bank$code,_resp$bank,_resp$bank$name,_resp$bank2,_response2$activity$E2,_response2$activity2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://console.log(resp2);\n// return\nsetVariableDisabled2(true);dataReturn.codigoTipoIdentificacion=resp.identificationType;dataReturn.transactId=locationData.transactionId;dataReturn.economicGroup.code=(_resp$economicGroup$c=(_resp$economicGroup=resp.economicGroup)===null||_resp$economicGroup===void 0?void 0:_resp$economicGroup.code)!==null&&_resp$economicGroup$c!==void 0?_resp$economicGroup$c:\"\";dataReturn.economicGroup.name=resp2;dataReturn.economicActivity.code=(_response2$activity$E=response2===null||response2===void 0?void 0:(_response2$activity=response2.activity)===null||_response2$activity===void 0?void 0:_response2$activity.EconomicActivity)!==null&&_response2$activity$E!==void 0?_response2$activity$E:\"\";dataReturn.economicActivity.name=(_resp$economicActivit=resp===null||resp===void 0?void 0:(_resp$economicActivit2=resp.economicActivity)===null||_resp$economicActivit2===void 0?void 0:_resp$economicActivit2.name)!==null&&_resp$economicActivit!==void 0?_resp$economicActivit:\"\";dataReturn.subeconomicActivity.code=(_resp$subeconomicActi=(_resp$subeconomicActi2=resp.subeconomicActivity)===null||_resp$subeconomicActi2===void 0?void 0:_resp$subeconomicActi2.code)!==null&&_resp$subeconomicActi!==void 0?_resp$subeconomicActi:\"\";dataReturn.subeconomicActivity.name=(_resp$subeconomicActi3=(_resp$subeconomicActi4=resp.subeconomicActivity)===null||_resp$subeconomicActi4===void 0?void 0:_resp$subeconomicActi4.name)!==null&&_resp$subeconomicActi3!==void 0?_resp$subeconomicActi3:\"\";dataReturn.bank.code=(_resp$bank$code=(_resp$bank=resp.bank)===null||_resp$bank===void 0?void 0:_resp$bank.code)!==null&&_resp$bank$code!==void 0?_resp$bank$code:\"\";dataReturn.bank.name=(_resp$bank$name=(_resp$bank2=resp.bank)===null||_resp$bank2===void 0?void 0:_resp$bank2.name)!==null&&_resp$bank$name!==void 0?_resp$bank$name:\"\";loadSubActivityEconomic((_response2$activity$E2=response2===null||response2===void 0?void 0:(_response2$activity2=response2.activity)===null||_response2$activity2===void 0?void 0:_response2$activity2.EconomicActivity)!==null&&_response2$activity$E2!==void 0?_response2$activity$E2:\"\");setDataReturn(dataReturn);setCambio(null);setCambio(5);setIsActiveLoading(false);return _context.abrupt(\"return\");case 17:case\"end\":return _context.stop();}}},_callee);}));return function(_x6){return _ref5.apply(this,arguments);};}());case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x5){return _ref4.apply(this,arguments);};}());case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref3.apply(this,arguments);};}());case 3:_context4.next=20;break;case 5:setIsActiveLoading(false);dataReturn.codigoTipoIdentificacion=resp.identificationType;dataReturn.transactId=locationData.transactionId;dataReturn.economicGroup.code=(_resp$economicGroup$c2=resp===null||resp===void 0?void 0:(_resp$economicGroup2=resp.economicGroup)===null||_resp$economicGroup2===void 0?void 0:_resp$economicGroup2.code)!==null&&_resp$economicGroup$c2!==void 0?_resp$economicGroup$c2:\"\";dataReturn.economicGroup.name=(_resp$economicGroup$n=resp===null||resp===void 0?void 0:(_resp$economicGroup3=resp.economicGroup)===null||_resp$economicGroup3===void 0?void 0:_resp$economicGroup3.name)!==null&&_resp$economicGroup$n!==void 0?_resp$economicGroup$n:\"\";dataReturn.economicActivity.code=(_resp$economicActivit3=resp===null||resp===void 0?void 0:(_resp$economicActivit4=resp.economicActivity)===null||_resp$economicActivit4===void 0?void 0:_resp$economicActivit4.code)!==null&&_resp$economicActivit3!==void 0?_resp$economicActivit3:\"\";dataReturn.economicActivity.name=(_resp$economicActivit5=resp===null||resp===void 0?void 0:(_resp$economicActivit6=resp.economicActivity)===null||_resp$economicActivit6===void 0?void 0:_resp$economicActivit6.name)!==null&&_resp$economicActivit5!==void 0?_resp$economicActivit5:\"\";dataReturn.subeconomicActivity.code=(_resp$subeconomicActi5=resp===null||resp===void 0?void 0:(_resp$subeconomicActi6=resp.subeconomicActivity)===null||_resp$subeconomicActi6===void 0?void 0:_resp$subeconomicActi6.code)!==null&&_resp$subeconomicActi5!==void 0?_resp$subeconomicActi5:\"\";dataReturn.subeconomicActivity.name=(_resp$subeconomicActi7=resp===null||resp===void 0?void 0:(_resp$subeconomicActi8=resp.subeconomicActivity)===null||_resp$subeconomicActi8===void 0?void 0:_resp$subeconomicActi8.name)!==null&&_resp$subeconomicActi7!==void 0?_resp$subeconomicActi7:\"\";dataReturn.bank.code=(_resp$bank$code2=resp===null||resp===void 0?void 0:(_resp$bank3=resp.bank)===null||_resp$bank3===void 0?void 0:_resp$bank3.code)!==null&&_resp$bank$code2!==void 0?_resp$bank$code2:\"\";dataReturn.bank.name=(_resp$bank$name2=resp===null||resp===void 0?void 0:(_resp$bank4=resp.bank)===null||_resp$bank4===void 0?void 0:_resp$bank4.name)!==null&&_resp$bank$name2!==void 0?_resp$bank$name2:\"\";loadSubActivityEconomic((_resp$economicActivit7=resp===null||resp===void 0?void 0:(_resp$economicActivit8=resp.economicActivity)===null||_resp$economicActivit8===void 0?void 0:_resp$economicActivit8.code)!==null&&_resp$economicActivit7!==void 0?_resp$economicActivit7:\"\");setDataReturn(dataReturn);setCambio(null);setCambio(5);case 20:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref2.apply(this,arguments);};}()).catch(function(error){});case 10:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x2){return _ref.apply(this,arguments);};}());case 4:case\"end\":return _context6.stop();}}},_callee6);}));return _loadData.apply(this,arguments);}function saveDataGeneral(){var apiBack=new BackendServices();/* ---------------------------------------------------------------------------------------------- */ /*                               Actualizamos los datos del cliente                               */ /* ---------------------------------------------------------------------------------------------- */}// Form Submission\nfunction handleSubmit(event,errors,values){event.preventDefault();if(errors.length>0){setFormValid(false);return;}setDataReturn2(dataReturn);setDataReturn(dataReturn);// saveDataGeneral();\nsetFormValid(true);}function loadInitialData(locationData){var apiServiceBackend=new ApiServiceBackend();// consultarCatalogoTipoIdentificacion\napiServiceBackend.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"description\"]),value:data[i][\"id\"]});}setIdentificationTypeList(json);}});// consultarCatalogoTipoPersonaDescripcion\napiServiceBackend.consultarCatalogoTipoPersonaDescripcion(\"\").then(function(resp2){// consultarDeudores\napiServiceBackend.consultarDeudores(locationData.transactionId).then(function(resp){if(resp.length>0){setdataDeudores(resp.map(function(data,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"PersonType\"),children:resp2.find(function(x){return x.code===Number(data.typePerson);}).label}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"FullName\"),children:Number(data.typePerson)===2?data.name:data.name+\" \"+data.name2+\" \"+data.lastName+\" \"+data.lastName2}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"IdentificationType\"),children:data.idType}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"IdentificationNumber\"),children:data.clientDocId}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Customer ID\"),children:data.customerNumberT24})]},uniq_key());}));}else{setdataDeudores(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{textAlign:'center'}})},uniq_key()));}}).catch(function(error){});});}function changeAll(e,tipo){if(tipo==\"tipoPersona\"){dataReturn.codigoTipoPersona=e.value;}if(tipo==\"Tipo\"){dataReturn.codigoTipoIdentificacion=e.value;}if(tipo==\"codigoGrupo\"){dataReturn.economicGroup.code=e.value;dataReturn.economicGroup.name=e.label;setCodigoGrupo(e.value);setCNombreGrupo(e.label);}if(tipo==\"codigoBanca\"){dataReturn.bank.code=e.value;dataReturn.bank.name=e.label;setDataBanca(e);}if(tipo==\"numeroCliente\"){dataReturn.numeroCliente=e.target.value;}if(tipo==\"primerNombre\"){dataReturn.primerNombre=e.target.value;}if(tipo==\"segundoNombre\"){dataReturn.segundoNombre=e.target.value;}if(tipo==\"primerApellido\"){dataReturn.primerApellido=e.target.value;}if(tipo==\"segundoApellido\"){dataReturn.segundoApellido=e.target.value;}if(tipo==\"numeroIdentificacion\"){dataReturn.numeroIdentificacion=e.target.value;}if(tipo==\"actividadEconomica\"){dataReturn.economicActivity.code=e.value;dataReturn.economicActivity.name=e.label;dataReturn.subeconomicActivity=null;loadSubActivityEconomic(e.value);}if(tipo==\"subactividadEconomica\"){dataReturn.subeconomicActivity.code=e.value;dataReturn.subeconomicActivity.name=e.label;}setDataReturn(dataReturn);}/////////////// CARGA LOS DATOS DEL CLIENTE SELECCIONADO DE T24 //////\nfunction loadClientSelectedData(selectedClient){dataReturn.numeroCliente=selectedClient.id;dataReturn.primerNombre=selectedClient.firstname;dataReturn.segundoNombre=selectedClient.secondname;dataReturn.primerApellido=selectedClient.lastname;dataReturn.segundoApellido=selectedClient.secondlastname;dataReturn.codigoTipoIdentificacion=selectedClient.idtype;dataReturn.numeroIdentificacion=selectedClient.idnumber;dataReturn.codigoTipoPersona=selectedClient.partyType;setDataReturn(dataReturn);var defaultVal=identificationTypeList.find(function(x){return x.value===dataReturn.codigoTipoIdentificacion;});if(defaultVal!==undefined){setIdentificationTypeSelected(defaultVal);}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"Processinginformation\"),children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:t(\"General Data\")}),/*#__PURE__*/_jsxs(AvForm,{id:\"frmDatosGenerales\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Economic Group\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setGruposEconomicosSelected(gruposEconomicos.find(function(x){return x.value===e.value;}));changeAll(e,\"codigoGrupo\");},isDisabled:VariableDisabled,options:gruposEconomicos,classNamePrefix:\"select2-selection\",placeholder:t(\"SelectGroup\"),value:gruposEconomicosSelected},uniq_key()),campoRequeridoGrupo?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required Field\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Banking\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setBancaSelected(banca.find(function(x){return x.value===e.value;}));changeAll(e,\"codigoBanca\");},options:banca,value:bancaSelected//defaultValue={props.datosGenerales.bank.code}\n,classNamePrefix:\"select2-selection\",placeholder:t(\"SelectBanking\")},uniq_key()),campoRequeridoBanca?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required Field\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Economic Activity\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setActividadEmpresaSelected(actividadEmpresa.find(function(x){return x.value===e.value;}));changeAll(e,\"actividadEconomica\");},placeholder:t(\"Selectcompanyactivity\"),options:actividadEmpresa,classNamePrefix:\"select2-selection\",value:actividadEmpresaSelected},uniq_key()),campoRequeridoActividad?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required Field\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Label,{children:[\"Sub\",t(\"Economic Activity\")]}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setSubActividadEmpresaSelected(subactividadEmpresa.find(function(x){return x.value===e.value;}));changeAll(e,\"subactividadEconomica\");},placeholder:t(\"Selectcompanysubactivity\"),options:subactividadEmpresa,classNamePrefix:\"select2-selection\",value:subactividadEmpresaSelected},uniq_key()),campoRequeridoSubActividad?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required Field\")}):null]})}),mainDebtor!=null&&mainDebtor.typePerson===\"2\"?/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"email\",children:t(\"ComercialName\")}),/*#__PURE__*/_jsx(\"input\",{readOnly:\"readOnly\",className:\"form-control\",name:\"commercialname\",type:\"text\",value:mainDebtor.name2})]})}):null]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"4\"})})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-sub-title\",children:t(\"Debtors\")}),/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"PersonType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"FullName\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"IdentificationType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"IdentificationNumber\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Customer ID\")})]},uniq_key())}),/*#__PURE__*/_jsx(\"tbody\",{children:dataDeudores})]})]})});});export default DatosGenerales;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/DatosGenerales.js"],"names":["React","useState","withTranslation","useTranslation","Select","useLocation","useHistory","moment","Card","CardBody","CardHeader","Row","Col","Label","Table","AvForm","AvField","ApiServiceBackend","MaskSoaint","BackendServices","CoreServices","url","LoadingOverlay","uniq_key","DatosGenerales","forwardRef","props","ref","useImperativeHandle","validateForm","form","document","getElementById","requestSubmit","getFormValidation","formValid","dataReturn2","t","i18n","location","history","data","locationData","setLocationData","identificationTypeList","setIdentificationTypeList","undefined","identificationTypeSelected","setIdentificationTypeSelected","gruposEconomicos","setGruposEconomicos","gruposEconomicosSelected","setGruposEconomicosSelected","banca","setBanca","bancaSelected","setBancaSelected","actividadEmpresa","setActividadEmpresa","actividadEmpresaSelected","setActividadEmpresaSelected","subactividadEmpresa","setSubActividadEmpresa","subactividadEmpresaSelected","setSubActividadEmpresaSelected","bancaDate","setDataBanca","codigoGrupo","setCodigoGrupo","nombreGrupo","setCNombreGrupo","codigoTipoPersona","codigoTipoIdentificacion","numeroCliente","primerNombre","segundoNombre","primerApellido","segundoApellido","numeroIdentificacion","transactId","economicGroup","code","name","economicActivity","subeconomicActivity","bank","dataReturn","setDataReturn","setDataReturn2","setFormValid","cambio","setCambio","campoRequeridoGrupo","setcampoRequeridoGrupo","campoRequeridoActividad","setcampoRequeridoActividad","campoRequeridoSubActividad","setcampoRequeridoSubActividad","campoRequeridoBanca","setcampoRequeridoBanca","dataDeudores","setdataDeudores","VariableDisabled","setVariableDisabled","VariableDisabled2","setVariableDisabled2","numberExpresion","setnumberExpresion","isActiveLoading","setIsActiveLoading","mainDebtor","setmainDebtor","useEffect","dataSession","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","loadMainDebtor","loadData","loadInitialData","loadListGroupEconomic","loadBank","loadActivityEconomic","defaultVal","find","x","value","label","err","selectedClient","loadClientSelectedData","backendServices","consultPrincipalDebtor","then","resp","api","getActividadEconomicaCatalogo","response","json","i","Records","loadSubActivityEconomic","codActividad","getSubActividadEconomicaCatalogo","getGrupoEconomicoCatalogo","getBancaCatalogo","apiBack","customerNumberT24","name2","lastName","lastName2","clientDocId","nuevoDato","consultGeneralDataIGR","statusService","statusCode","getPartiesInformationExtra","typePerson","response2","getEconomicGroup","resp2","identificationType","activity","EconomicActivity","catch","error","saveDataGeneral","handleSubmit","event","errors","values","preventDefault","apiServiceBackend","consultarCatalogoTipoIdentificacion","consultarCatalogoTipoPersonaDescripcion","consultarDeudores","map","index","Number","idType","textAlign","changeAll","e","tipo","target","id","firstname","secondname","lastname","secondlastname","idtype","idnumber","partyType"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation } from 'react-i18next'\r\nimport Select from \"react-select\";\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n  Card, CardBody, CardHeader,\r\n  Row,\r\n  Col,\r\n  Label,\r\n  Table,\r\n} from \"reactstrap\"\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport ApiServiceBackend from \"../../../../../services/BackendServices/Services\";\r\nimport MaskSoaint from \"../../../../../api/plugins_soaint/maskNumber\";\r\nimport { BackendServices, CoreServices } from '../../../../../services';\r\nimport * as url from \"../../../../../helpers/url_helper\"\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport { uniq_key } from '../../../../../helpers/unq_key';\r\n\r\nconst DatosGenerales = React.forwardRef((props, ref) => {\r\n  React.useImperativeHandle(ref, () => ({\r\n    validateForm: () => {\r\n      const form = document.getElementById('frmDatosGenerales');\r\n      form.requestSubmit();\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }, dataReturn2\r\n  }))\r\n  const { t, i18n } = useTranslation();\r\n  const location = useLocation()\r\n  const history = useHistory();\r\n\r\n  const [locationData, setLocationData] = useState(location.data);\r\n  const [identificationTypeList, setIdentificationTypeList] = useState([]);\r\n  const [identificationTypeSelected, setIdentificationTypeSelected] = useState(undefined);\r\n  const [gruposEconomicos, setGruposEconomicos] = useState([]);\r\n  const [gruposEconomicosSelected, setGruposEconomicosSelected] = useState(undefined);\r\n  const [banca, setBanca] = useState([]);\r\n  const [bancaSelected, setBancaSelected] = useState(undefined);\r\n  const [actividadEmpresa, setActividadEmpresa] = useState([]);\r\n  const [actividadEmpresaSelected, setActividadEmpresaSelected] = useState(undefined);\r\n  const [subactividadEmpresa, setSubActividadEmpresa] = useState([]);\r\n  const [subactividadEmpresaSelected, setSubActividadEmpresaSelected] = useState(undefined);\r\n  const [bancaDate, setDataBanca] = useState([]);\r\n  const [codigoGrupo, setCodigoGrupo] = useState(null);\r\n  const [nombreGrupo, setCNombreGrupo] = useState(null);\r\n  const [dataReturn, setDataReturn] = useState({\r\n    codigoTipoPersona: null,\r\n    codigoTipoIdentificacion: null,\r\n    numeroCliente: null,\r\n    primerNombre: null,\r\n    segundoNombre: null,\r\n    primerApellido: null,\r\n    segundoApellido: null,\r\n    numeroIdentificacion: null,\r\n    transactId: 0,\r\n    economicGroup: {\r\n      code: \"\",\r\n      name: \"\"\r\n    },\r\n    economicActivity: {\r\n      code: \"\",\r\n      name: \"\"\r\n    },\r\n    subeconomicActivity: {\r\n      code: \"\",\r\n      name: \"\"\r\n    },\r\n    bank: {\r\n      code: \"\",\r\n      name: \"\"\r\n    },\r\n  });\r\n  const [dataReturn2, setDataReturn2] = useState();\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [cambio, setCambio] = useState(2);\r\n  const [campoRequeridoGrupo, setcampoRequeridoGrupo] = useState(false);\r\n  const [campoRequeridoActividad, setcampoRequeridoActividad] = useState(false);\r\n  const [campoRequeridoSubActividad, setcampoRequeridoSubActividad] = useState(false);\r\n  const [campoRequeridoBanca, setcampoRequeridoBanca] = useState(false);\r\n  const [dataDeudores, setdataDeudores] = useState(null);\r\n  const [VariableDisabled, setVariableDisabled] = useState(false);\r\n  const [VariableDisabled2, setVariableDisabled2] = useState(false);\r\n  const [numberExpresion, setnumberExpresion] = useState(0);\r\n\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false); //loading de la pagina\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null)\r\n\r\n  //On Mounting (componentDidMount)\r\n  React.useEffect(() => {\r\n\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n    setIsActiveLoading(true)\r\n\r\n    // Read Api Service data      \r\n    loadMainDebtor(dataSession.transactionId);\r\n    loadData(dataSession);\r\n    loadInitialData(dataSession);\r\n    loadListGroupEconomic();\r\n    loadBank();\r\n    loadActivityEconomic()\r\n  }, []);\r\n  React.useEffect(() => {\r\n    // Read Api Service data \r\n    var defaultVal = null;\r\n    try {\r\n      if (identificationTypeList.length > 0 && dataReturn.codigoTipoIdentificacion !== null && identificationTypeSelected === undefined) {\r\n        defaultVal = identificationTypeList.find(x => x.value === dataReturn.codigoTipoIdentificacion);\r\n        if (defaultVal !== undefined) {\r\n          setIdentificationTypeSelected(defaultVal);\r\n        }\r\n      }\r\n      if (gruposEconomicos.length > 0 && dataReturn.economicGroup !== null && gruposEconomicosSelected === undefined) {\r\n        defaultVal = gruposEconomicos.find(x => x.value === dataReturn.economicGroup.code);\r\n        if (defaultVal !== undefined) {\r\n          setVariableDisabled(true)\r\n          setGruposEconomicosSelected(defaultVal);\r\n        } else {\r\n          defaultVal = gruposEconomicos.find(x => x.label === dataReturn.economicGroup.name);\r\n          if (defaultVal !== undefined) {\r\n            setGruposEconomicosSelected(defaultVal);\r\n            if (VariableDisabled2) {\r\n              setVariableDisabled(true)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (banca.length > 0 && dataReturn.bank !== null && bancaSelected === undefined) {\r\n        defaultVal = banca.find(x => x.value === dataReturn.bank.code);\r\n        if (defaultVal !== undefined) {\r\n          setBancaSelected(defaultVal);\r\n        }\r\n      }\r\n      if (actividadEmpresa.length > 0 && dataReturn.economicActivity !== null && actividadEmpresaSelected === undefined) {\r\n        defaultVal = actividadEmpresa.find(x => x.value === dataReturn.economicActivity.code);\r\n        if (defaultVal !== undefined) {\r\n          setActividadEmpresaSelected(defaultVal);\r\n        }\r\n      }\r\n      if (subactividadEmpresa.length > 0 && dataReturn.subeconomicActivity !== null && subactividadEmpresaSelected === undefined) {\r\n        defaultVal = subactividadEmpresa.find(x => x.value === dataReturn.subeconomicActivity.code);\r\n        if (defaultVal !== undefined) {\r\n          setSubActividadEmpresaSelected(defaultVal);\r\n        }\r\n      }\r\n    }\r\n    catch (err) { }\r\n  }, [cambio]);\r\n  React.useEffect(() => {\r\n    try {\r\n      if (props.selectedClient !== null && props.selectedClient !== undefined) {\r\n        loadClientSelectedData(props.selectedClient);\r\n      }\r\n    }\r\n    catch (err) { }\r\n  }, [props.selectedClient]);\r\n\r\n  function loadMainDebtor(transactionId) {\r\n    const backendServices = new BackendServices();\r\n    backendServices.consultPrincipalDebtor(transactionId).then(resp => {\r\n      //console.log(resp);\r\n      setmainDebtor(resp)\r\n    })\r\n\r\n  }\r\n\r\n  ///////////..... CHEQUEAMOS LA DATA PARA INICIALIZAR VALORES POR DEFECTO EN LOS SELECT2 .... ////////\r\n  // cargar actividad economica\r\n  function loadActivityEconomic() {\r\n    const api = new CoreServices();\r\n    // getActividadEconomicaCatalogo\r\n    api.getActividadEconomicaCatalogo().then(response => {\r\n      if (response === null) { return; }\r\n      let json = [];\r\n      for (let i = 0; i < response.Records.length; i++) {\r\n        json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n      }\r\n      setActividadEmpresa(json);\r\n      setCambio(null);\r\n      setCambio(5);\r\n    })\r\n  }\r\n  // cargarSubActividadEconomica\r\n  function loadSubActivityEconomic(codActividad) {\r\n    const api = new CoreServices();\r\n    // getSubActividadEconomicaCatalogo\r\n    api.getSubActividadEconomicaCatalogo(codActividad).then(response => {\r\n      if (response === null) { return; }\r\n      let json = [];\r\n      for (let i = 0; i < response.Records.length; i++) {\r\n        json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n      }\r\n      setSubActividadEmpresa(json);\r\n      if (dataReturn.subeconomicActivity !== null) {\r\n        setSubActividadEmpresaSelected(json.find(x => x.value === dataReturn.subeconomicActivity.code));\r\n      }\r\n      else {\r\n        dataReturn.subeconomicActivity = { code: json[0].value, name: json[0].label }\r\n        setSubActividadEmpresaSelected(json[0]);\r\n      }\r\n      setCambio(null);\r\n      setCambio(5);\r\n    })\r\n  }\r\n  // cargarListaGrupoEconomico\r\n  function loadListGroupEconomic() {\r\n    const api = new CoreServices();\r\n    // getGrupoEconomicoCatalogo\r\n    api.getGrupoEconomicoCatalogo()\r\n      .then(response => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.Records.length; i++) {\r\n          if (response.Records[i][\"Code\"] == \"0003\") {\r\n            json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n          } else {\r\n            json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n          }\r\n        }\r\n        setGruposEconomicos(json);\r\n        setCambio(null);\r\n        setCambio(5);\r\n      });\r\n  }\r\n  // cargarBancas\r\n  function loadBank() {\r\n    const api = new CoreServices();\r\n    api.getBancaCatalogo()\r\n      .then(response => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.Records.length; i++) {\r\n          json.push({ label: response.Records[i][\"Description\"], value: response.Records[i][\"Code\"] })\r\n        }\r\n        setBanca(json);\r\n        setCambio(null);\r\n        setCambio(5);\r\n      });\r\n  }\r\n  // consultarDatos\r\n  async function loadData(locationData) {\r\n    const api = new CoreServices();\r\n    const apiBack = new BackendServices();\r\n    //consultarDeudorPrincipal\r\n    await apiBack.consultPrincipalDebtor(locationData.transactionId).then(async resp => {\r\n      dataReturn.numeroCliente = resp?.customerNumberT24\r\n      dataReturn.primerNombre = resp?.name\r\n      dataReturn.segundoNombre = resp?.name2\r\n      dataReturn.primerApellido = resp?.lastName\r\n      dataReturn.segundoApellido = resp?.lastName2\r\n      dataReturn.numeroIdentificacion = resp?.clientDocId\r\n      dataReturn.nuevoDato = \"\"\r\n      setDataReturn(dataReturn);\r\n      await apiBack.consultGeneralDataIGR(locationData.transactionId).then(async resp => {\r\n        if (resp.statusService.statusCode == \"204\") {\r\n          await apiBack.consultPrincipalDebtor(locationData?.transactionId ?? 0).then(async response => {\r\n            if (response === null) { return; }\r\n            //console.log(response);\r\n            await api.getPartiesInformationExtra(response.typePerson, response.customerNumberT24).then(async response2 => {\r\n              //console.log(response2);\r\n              await api.getEconomicGroup(response.customerNumberT24).then(async resp2 => {\r\n                //console.log(resp2);\r\n                // return\r\n                setVariableDisabled2(true);\r\n                dataReturn.codigoTipoIdentificacion = resp.identificationType\r\n                dataReturn.transactId = locationData.transactionId;\r\n                dataReturn.economicGroup.code = resp.economicGroup?.code ?? \"\";\r\n                dataReturn.economicGroup.name = resp2;\r\n                dataReturn.economicActivity.code = response2?.activity?.EconomicActivity ?? \"\";\r\n                dataReturn.economicActivity.name = resp?.economicActivity?.name ?? \"\";\r\n                dataReturn.subeconomicActivity.code = resp.subeconomicActivity?.code ?? \"\";\r\n                dataReturn.subeconomicActivity.name = resp.subeconomicActivity?.name ?? \"\";\r\n                dataReturn.bank.code = resp.bank?.code ?? \"\";\r\n                dataReturn.bank.name = resp.bank?.name ?? \"\";\r\n                loadSubActivityEconomic(response2?.activity?.EconomicActivity ?? \"\")\r\n                setDataReturn(dataReturn);\r\n                setCambio(null);\r\n                setCambio(5);\r\n                setIsActiveLoading(false)\r\n                return\r\n              });\r\n            });\r\n          })\r\n        } else {\r\n          setIsActiveLoading(false)\r\n          dataReturn.codigoTipoIdentificacion = resp.identificationType\r\n          dataReturn.transactId = locationData.transactionId;\r\n          dataReturn.economicGroup.code = resp?.economicGroup?.code ?? \"\";\r\n          dataReturn.economicGroup.name = resp?.economicGroup?.name ?? \"\";\r\n          dataReturn.economicActivity.code = resp?.economicActivity?.code ?? \"\";\r\n          dataReturn.economicActivity.name = resp?.economicActivity?.name ?? \"\";\r\n          dataReturn.subeconomicActivity.code = resp?.subeconomicActivity?.code ?? \"\";\r\n          dataReturn.subeconomicActivity.name = resp?.subeconomicActivity?.name ?? \"\";\r\n          dataReturn.bank.code = resp?.bank?.code ?? \"\";\r\n          dataReturn.bank.name = resp?.bank?.name ?? \"\";\r\n          loadSubActivityEconomic(resp?.economicActivity?.code ?? \"\")\r\n          setDataReturn(dataReturn);\r\n          setCambio(null);\r\n          setCambio(5);\r\n        }\r\n      }).catch((error) => {\r\n      });\r\n    })\r\n    // consultarDatosGeneralesIGR\r\n  }\r\n  // guardarDatosGenerales\r\n  function saveDataGeneral() {\r\n    const apiBack = new BackendServices();\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                               Actualizamos los datos del cliente                               */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n\r\n  }\r\n  // Form Submission\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      setFormValid(false);\r\n      return;\r\n    }\r\n    setDataReturn2(dataReturn)\r\n    setDataReturn(dataReturn)\r\n    // saveDataGeneral();\r\n    setFormValid(true);\r\n  }\r\n  function loadInitialData(locationData) {\r\n    const apiServiceBackend = new ApiServiceBackend();\r\n    // consultarCatalogoTipoIdentificacion\r\n    apiServiceBackend.consultarCatalogoTipoIdentificacion()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"description\"]), value: data[i][\"id\"] })\r\n          }\r\n          setIdentificationTypeList(json)\r\n        }\r\n      })\r\n    // consultarCatalogoTipoPersonaDescripcion\r\n    apiServiceBackend.consultarCatalogoTipoPersonaDescripcion(\"\").then(resp2 => {\r\n      // consultarDeudores\r\n      apiServiceBackend.consultarDeudores(locationData.transactionId).then(resp => {\r\n        if (resp.length > 0) {\r\n          setdataDeudores(resp.map((data, index) => (\r\n            <tr key={uniq_key()}>\r\n              <td data-label={t(\"PersonType\")}>{resp2.find(x => x.code === Number(data.typePerson)).label}</td>\r\n              <td data-label={t(\"FullName\")}>{Number(data.typePerson) === 2 ? data.name : data.name + \" \" + data.name2 + \" \" + data.lastName + \" \" + data.lastName2}</td>\r\n              <td data-label={t(\"IdentificationType\")}>{data.idType}</td>\r\n              <td data-label={t(\"IdentificationNumber\")}>{data.clientDocId}</td>\r\n              <td data-label={t(\"Customer ID\")}>{data.customerNumberT24}</td>\r\n            </tr>)))\r\n        } else {\r\n          setdataDeudores(\r\n            <tr key={uniq_key()}>\r\n              <td colSpan=\"4\" style={{ textAlign: 'center' }}></td>\r\n            </tr>);\r\n        }\r\n\r\n      }).catch((error) => {\r\n\r\n      });\r\n    });\r\n  }\r\n  function changeAll(e, tipo) {\r\n    if (tipo == \"tipoPersona\") {\r\n      dataReturn.codigoTipoPersona = e.value\r\n    }\r\n    if (tipo == \"Tipo\") {\r\n      dataReturn.codigoTipoIdentificacion = e.value\r\n    }\r\n    if (tipo == \"codigoGrupo\") {\r\n      dataReturn.economicGroup.code = e.value;\r\n      dataReturn.economicGroup.name = e.label;\r\n      setCodigoGrupo(e.value)\r\n      setCNombreGrupo(e.label)\r\n    }\r\n    if (tipo == \"codigoBanca\") {\r\n      dataReturn.bank.code = e.value;\r\n      dataReturn.bank.name = e.label;\r\n      setDataBanca(e);\r\n    }\r\n    if (tipo == \"numeroCliente\") {\r\n      dataReturn.numeroCliente = e.target.value;\r\n    }\r\n    if (tipo == \"primerNombre\") {\r\n      dataReturn.primerNombre = e.target.value;\r\n    }\r\n    if (tipo == \"segundoNombre\") {\r\n      dataReturn.segundoNombre = e.target.value;\r\n    }\r\n    if (tipo == \"primerApellido\") {\r\n      dataReturn.primerApellido = e.target.value;\r\n    }\r\n    if (tipo == \"segundoApellido\") {\r\n      dataReturn.segundoApellido = e.target.value;\r\n    }\r\n    if (tipo == \"numeroIdentificacion\") {\r\n      dataReturn.numeroIdentificacion = e.target.value;\r\n    }\r\n    if (tipo == \"actividadEconomica\") {\r\n      dataReturn.economicActivity.code = e.value;\r\n      dataReturn.economicActivity.name = e.label;\r\n\r\n      dataReturn.subeconomicActivity = null;\r\n      loadSubActivityEconomic(e.value)\r\n    }\r\n    if (tipo == \"subactividadEconomica\") {\r\n      dataReturn.subeconomicActivity.code = e.value;\r\n      dataReturn.subeconomicActivity.name = e.label;\r\n    }\r\n    setDataReturn(dataReturn)\r\n\r\n  }\r\n\r\n  /////////////// CARGA LOS DATOS DEL CLIENTE SELECCIONADO DE T24 //////\r\n  function loadClientSelectedData(selectedClient) {\r\n    dataReturn.numeroCliente = selectedClient.id;\r\n    dataReturn.primerNombre = selectedClient.firstname;\r\n    dataReturn.segundoNombre = selectedClient.secondname;\r\n    dataReturn.primerApellido = selectedClient.lastname;\r\n    dataReturn.segundoApellido = selectedClient.secondlastname;\r\n    dataReturn.codigoTipoIdentificacion = selectedClient.idtype;\r\n    dataReturn.numeroIdentificacion = selectedClient.idnumber;\r\n    dataReturn.codigoTipoPersona = selectedClient.partyType;\r\n    setDataReturn(dataReturn);\r\n    var defaultVal = identificationTypeList.find(x => x.value === dataReturn.codigoTipoIdentificacion);\r\n    if (defaultVal !== undefined) {\r\n      setIdentificationTypeSelected(defaultVal);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <LoadingOverlay active={isActiveLoading} spinner text={t(\"Processinginformation\")}>\r\n\r\n        <h5 className=\"card-title\">{t(\"General Data\")}</h5>\r\n        <AvForm id=\"frmDatosGenerales\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n          <Row>\r\n            <Col md=\"6\">\r\n              <div className=\"mb-4\">\r\n                <Label>{t(\"Economic Group\")}</Label>\r\n                <Select noOptionsMessage={() => \"\"}\r\n                  key={uniq_key()}\r\n                  onChange={(e) => {\r\n                    setGruposEconomicosSelected(gruposEconomicos.find(x => x.value === e.value))\r\n                    changeAll(e, \"codigoGrupo\");\r\n                  }}\r\n                  isDisabled={VariableDisabled}\r\n                  options={gruposEconomicos}\r\n                  classNamePrefix=\"select2-selection\"\r\n                  placeholder={t(\"SelectGroup\")}\r\n                  value={gruposEconomicosSelected}\r\n                />\r\n                {campoRequeridoGrupo ?\r\n                  <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                  : null}\r\n              </div>\r\n            </Col>\r\n            <Col md=\"6\">\r\n              <div className=\"mb-4\">\r\n                <Label>{t(\"Banking\")}</Label>\r\n                <Select noOptionsMessage={() => \"\"}\r\n                  key={uniq_key()}\r\n                  onChange={(e) => {\r\n                    setBancaSelected(banca.find(x => x.value === e.value))\r\n                    changeAll(e, \"codigoBanca\");\r\n                  }}\r\n                  options={banca}\r\n                  value={bancaSelected}//defaultValue={props.datosGenerales.bank.code}\r\n                  classNamePrefix=\"select2-selection\"\r\n                  placeholder={t(\"SelectBanking\")}\r\n                />\r\n                {campoRequeridoBanca ?\r\n                  <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                  : null}\r\n              </div>\r\n            </Col>\r\n            <Col md=\"6\">\r\n              <div className=\"mb-4\">\r\n                <Label>{t(\"Economic Activity\")}</Label>\r\n                <Select noOptionsMessage={() => \"\"}\r\n                  key={uniq_key()}\r\n                  onChange={(e) => {\r\n                    setActividadEmpresaSelected(actividadEmpresa.find(x => x.value === e.value))\r\n                    changeAll(e, \"actividadEconomica\")\r\n                  }}\r\n                  placeholder={t(\"Selectcompanyactivity\")}\r\n                  options={actividadEmpresa}\r\n                  classNamePrefix=\"select2-selection\"\r\n                  value={actividadEmpresaSelected}\r\n                />\r\n                {campoRequeridoActividad ?\r\n                  <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                  : null}\r\n              </div>\r\n            </Col>\r\n            <Col md=\"6\">\r\n              <div className=\"mb-4\">\r\n                <Label>Sub{t(\"Economic Activity\")}</Label>\r\n                <Select noOptionsMessage={() => \"\"}\r\n                  key={uniq_key()}\r\n                  onChange={(e) => {\r\n                    setSubActividadEmpresaSelected(subactividadEmpresa.find(x => x.value === e.value))\r\n                    changeAll(e, \"subactividadEconomica\")\r\n                  }}\r\n                  placeholder={t(\"Selectcompanysubactivity\")}\r\n                  options={subactividadEmpresa}\r\n                  classNamePrefix=\"select2-selection\"\r\n                  value={subactividadEmpresaSelected}\r\n                />\r\n                {campoRequeridoSubActividad ?\r\n                  <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                  : null}\r\n              </div>\r\n            </Col>\r\n\r\n            {mainDebtor != null && mainDebtor.typePerson === \"2\" ?\r\n              <Col md=\"6\">\r\n                <div className=\"mb-4\">\r\n                  <Label htmlFor=\"email\">{t(\"ComercialName\")}</Label>\r\n                  <input readOnly=\"readOnly\"\r\n                    className=\"form-control\"\r\n                    name=\"commercialname\"\r\n                    type=\"text\"\r\n                    value={mainDebtor.name2}\r\n                  />\r\n                </div>\r\n              </Col>\r\n              : null}\r\n\r\n          </Row>\r\n          <Row>\r\n            <Col md=\"4\">\r\n              {/* <MaskSoaint setnumberExpresion={setnumberExpresion} numberExpresion={numberExpresion}/> */}\r\n            </Col>\r\n          </Row>\r\n        </AvForm>\r\n\r\n        <h5 className=\"card-sub-title\">{t(\"Debtors\")}</h5>\r\n        <Table className=\"table table-striped table-hover styled-table table\">\r\n          <thead>\r\n            <tr key={uniq_key()}>\r\n              <th>{t(\"PersonType\")}</th>\r\n              <th>{t(\"FullName\")}</th>\r\n              <th>{t(\"IdentificationType\")}</th>\r\n              <th>{t(\"IdentificationNumber\")}</th>\r\n              <th>{t(\"Customer ID\")}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {dataDeudores}\r\n          </tbody>\r\n        </Table>\r\n      </LoadingOverlay>\r\n\r\n\r\n    </>\r\n  )\r\n})\r\nDatosGenerales.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n  onOpenClientSelection: PropTypes.func,\r\n}\r\nexport default DatosGenerales;\r\n"]},"metadata":{},"sourceType":"module"}