{"ast":null,"code":"import _classCallCheck from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Knob=/*#__PURE__*/function(_React$Component){_inherits(Knob,_React$Component);var _super=_createSuper(Knob);function Knob(props){var _this;_classCallCheck(this,Knob);_this=_super.call(this,props);_this.getArcToValue=function(v){var startAngle;var endAngle;var angle=!_this.props.log?(v-_this.props.min)*_this.angleArc/(_this.props.max-_this.props.min):Math.log(Math.pow(v/_this.props.min,_this.angleArc))/Math.log(_this.props.max/_this.props.min);if(!_this.props.clockwise){startAngle=_this.endAngle+0.00001;endAngle=startAngle-angle-0.00001;}else{startAngle=_this.startAngle-0.00001;endAngle=startAngle+angle+0.00001;}if(_this.props.cursor){startAngle=endAngle-_this.cursorExt;endAngle+=_this.cursorExt;}return{startAngle:startAngle,endAngle:endAngle,acw:!_this.props.clockwise&&!_this.props.cursor};};_this.getCanvasScale=function(ctx){var devicePixelRatio=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||// IE10\n1;var backingStoreRatio=ctx.webkitBackingStorePixelRatio||1;return devicePixelRatio/backingStoreRatio;};_this.coerceToStep=function(v){var val=!_this.props.log?~~((v<0?-0.5:0.5)+v/_this.props.step)*_this.props.step:Math.pow(_this.props.step,~~((Math.abs(v)<1?-0.5:0.5)+Math.log(v)/Math.log(_this.props.step)));val=Math.max(Math.min(val,_this.props.max),_this.props.min);if(isNaN(val)){val=0;}return Math.round(val*1000)/1000;};_this.eventToValue=function(e){var bounds=_this.canvasRef.getBoundingClientRect();var x=e.clientX-bounds.left;var y=e.clientY-bounds.top;var a=Math.atan2(x-_this.w/2,_this.w/2-y)-_this.angleOffset;if(!_this.props.clockwise){a=_this.angleArc-a-2*Math.PI;}if(_this.angleArc!==Math.PI*2&&a<0&&a>-0.5){a=0;}else if(a<0){a+=Math.PI*2;}var val=!_this.props.log?a*(_this.props.max-_this.props.min)/_this.angleArc+_this.props.min:Math.pow(_this.props.max/_this.props.min,a/_this.angleArc)*_this.props.min;return _this.coerceToStep(val);};_this.handleMouseDown=function(e){_this.props.onChange(_this.eventToValue(e));document.addEventListener(\"mousemove\",_this.handleMouseMove);document.addEventListener(\"mouseup\",_this.handleMouseUp);document.addEventListener(\"keyup\",_this.handleEsc);};_this.handleMouseMove=function(e){e.preventDefault();_this.props.onChange(_this.eventToValue(e));};_this.handleMouseUp=function(e){_this.props.onChangeEnd(_this.eventToValue(e));document.removeEventListener(\"mousemove\",_this.handleMouseMove);document.removeEventListener(\"mouseup\",_this.handleMouseUp);document.removeEventListener(\"keyup\",_this.handleEsc);};_this.handleTouchStart=function(e){e.preventDefault();_this.touchIndex=e.targetTouches.length-1;_this.props.onChange(_this.eventToValue(e.targetTouches[_this.touchIndex]));document.addEventListener(\"touchmove\",_this.handleTouchMove,{passive:false});document.addEventListener(\"touchend\",_this.handleTouchEnd);document.addEventListener(\"touchcancel\",_this.handleTouchEnd);};_this.handleTouchMove=function(e){e.preventDefault();_this.props.onChange(_this.eventToValue(e.targetTouches[_this.touchIndex]));};_this.handleTouchEnd=function(e){_this.props.onChangeEnd(_this.eventToValue(e));document.removeEventListener(\"touchmove\",_this.handleTouchMove);document.removeEventListener(\"touchend\",_this.handleTouchEnd);document.removeEventListener(\"touchcancel\",_this.handleTouchEnd);};_this.handleEsc=function(e){if(e.keyCode===27){e.preventDefault();_this.handleMouseUp();}};_this.handleTextInput=function(e){var val=Math.max(Math.min(+e.target.value,_this.props.max),_this.props.min)||_this.props.min;_this.props.onChange(val);};_this.handleWheel=function(e){if(e.deltaX>0||e.deltaY>0){_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value+_this.props.step:_this.props.value*_this.props.step));}else if(e.deltaX<0||e.deltaY<0){_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value-_this.props.step:_this.props.value/_this.props.step));}};_this.handleArrowKey=function(e){if(e.keyCode===37||e.keyCode===40){e.preventDefault();_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value-_this.props.step:_this.props.value/_this.props.step));}else if(e.keyCode===38||e.keyCode===39){e.preventDefault();_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value+_this.props.step:_this.props.value*_this.props.step));}};_this.inputStyle=function(){return{width:\"\".concat(_this.w/2+4>>0,\"px\"),height:\"\".concat(_this.w/3>>0,\"px\"),position:\"absolute\",verticalAlign:\"middle\",marginTop:\"\".concat(_this.w/3>>0,\"px\"),marginLeft:\"-\".concat(_this.w*3/4+2>>0,\"px\"),border:0,background:\"none\",font:\"\".concat(_this.props.fontWeight,\" \").concat(_this.w/_this.digits>>0,\"px \").concat(_this.props.font),textAlign:\"center\",color:_this.props.inputColor||_this.props.fgColor,padding:\"0px\",WebkitAppearance:\"none\"};};_this.renderCenter=function(){var _this$props=_this.props,displayCustom=_this$props.displayCustom,displayInput=_this$props.displayInput,disableTextInput=_this$props.disableTextInput,readOnly=_this$props.readOnly,value=_this$props.value;if(displayInput){return/*#__PURE__*/_jsx(\"input\",{style:_this.inputStyle(),type:\"text\",value:value,onChange:_this.handleTextInput,onKeyDown:_this.handleArrowKey,readOnly:readOnly||disableTextInput});}else if(displayCustom&&typeof displayCustom===\"function\"){return displayCustom();}return null;};_this.w=_this.props.width||200;_this.h=_this.props.height||_this.w;_this.cursorExt=_this.props.cursor===true?0.3:_this.props.cursor/100;_this.angleArc=_this.props.angleArc*Math.PI/180;_this.angleOffset=_this.props.angleOffset*Math.PI/180;_this.startAngle=1.5*Math.PI+_this.angleOffset;_this.endAngle=1.5*Math.PI+_this.angleOffset+_this.angleArc;_this.digits=Math.max(String(Math.abs(_this.props.min)).length,String(Math.abs(_this.props.max)).length,2)+2;return _this;}_createClass(Knob,[{key:\"componentDidMount\",value:function componentDidMount(){this.drawCanvas();if(!this.props.readOnly){this.canvasRef.addEventListener(\"touchstart\",this.handleTouchStart,{passive:false});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.width&&this.w!==nextProps.width){this.w=nextProps.width;}if(nextProps.height&&this.h!==nextProps.height){this.h=nextProps.height;}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.drawCanvas();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.canvasRef.removeEventListener(\"touchstart\",this.handleTouchStart);}},{key:\"drawCanvas\",value:function drawCanvas(){var ctx=this.canvasRef.getContext(\"2d\");var scale=this.getCanvasScale(ctx);this.canvasRef.width=this.w*scale;// clears the canvas\nthis.canvasRef.height=this.h*scale;ctx.scale(scale,scale);this.xy=this.w/2;// coordinates of canvas center\nthis.lineWidth=this.xy*this.props.thickness;this.radius=this.xy-this.lineWidth/2;ctx.lineWidth=this.lineWidth;ctx.lineCap=this.props.lineCap;// background arc\nctx.beginPath();ctx.strokeStyle=this.props.bgColor;ctx.arc(this.xy,this.xy,this.radius,this.endAngle-0.00001,this.startAngle+0.00001,true);ctx.stroke();// foreground arc\nvar a=this.getArcToValue(this.props.value);ctx.beginPath();ctx.strokeStyle=this.props.fgColor;ctx.arc(this.xy,this.xy,this.radius,a.startAngle,a.endAngle,a.acw);ctx.stroke();}},{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,canvasClassName=_this$props2.canvasClassName,className=_this$props2.className,disableMouseWheel=_this$props2.disableMouseWheel,readOnly=_this$props2.readOnly,title=_this$props2.title,value=_this$props2.value;return/*#__PURE__*/_jsxs(\"div\",{className:className,style:{width:this.w,height:this.h,display:\"inline-block\"},onWheel:readOnly||disableMouseWheel?null:this.handleWheel,children:[/*#__PURE__*/_jsx(\"canvas\",{ref:function ref(_ref){_this2.canvasRef=_ref;},className:canvasClassName,style:{width:\"100%\",height:\"100%\"},onMouseDown:readOnly?null:this.handleMouseDown,title:title?\"\".concat(title,\": \").concat(value):value}),this.renderCenter()]});}}]);return Knob;}(React.Component);Knob.defaultProps={onChangeEnd:function onChangeEnd(){},min:0,max:100,step:1,log:false,width:200,height:200,thickness:0.35,lineCap:\"butt\",bgColor:\"#EEE\",fgColor:\"#EA2\",inputColor:\"\",font:\"Arial\",fontWeight:\"bold\",clockwise:true,cursor:false,stopper:true,readOnly:false,disableTextInput:false,displayInput:true,angleArc:360,angleOffset:0,disableMouseWheel:false,className:null,canvasClassName:null};export default Knob;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/AllCharts/knob/knob.js"],"names":["React","Knob","props","getArcToValue","v","startAngle","endAngle","angle","log","min","angleArc","max","Math","pow","clockwise","cursor","cursorExt","acw","getCanvasScale","ctx","devicePixelRatio","window","screen","deviceXDPI","logicalXDPI","backingStoreRatio","webkitBackingStorePixelRatio","coerceToStep","val","step","abs","isNaN","round","eventToValue","e","bounds","canvasRef","getBoundingClientRect","x","clientX","left","y","clientY","top","a","atan2","w","angleOffset","PI","handleMouseDown","onChange","document","addEventListener","handleMouseMove","handleMouseUp","handleEsc","preventDefault","onChangeEnd","removeEventListener","handleTouchStart","touchIndex","targetTouches","length","handleTouchMove","passive","handleTouchEnd","keyCode","handleTextInput","target","value","handleWheel","deltaX","deltaY","handleArrowKey","inputStyle","width","height","position","verticalAlign","marginTop","marginLeft","border","background","font","fontWeight","digits","textAlign","color","inputColor","fgColor","padding","WebkitAppearance","renderCenter","displayCustom","displayInput","disableTextInput","readOnly","h","String","drawCanvas","nextProps","getContext","scale","xy","lineWidth","thickness","radius","lineCap","beginPath","strokeStyle","bgColor","arc","stroke","canvasClassName","className","disableMouseWheel","title","display","ref","Component","defaultProps","stopper"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nclass Knob extends React.Component {\r\n  static propTypes = {\r\n    value: PropTypes.number.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    onChangeEnd: PropTypes.func,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    step: PropTypes.number,\r\n    log: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n    thickness: PropTypes.number,\r\n    lineCap: PropTypes.oneOf([\"butt\", \"round\"]),\r\n    bgColor: PropTypes.string,\r\n    fgColor: PropTypes.string,\r\n    inputColor: PropTypes.string,\r\n    font: PropTypes.string,\r\n    fontWeight: PropTypes.string,\r\n    clockwise: PropTypes.bool,\r\n    cursor: PropTypes.oneOfType([PropTypes.number, PropTypes.bool]),\r\n    stopper: PropTypes.bool,\r\n    readOnly: PropTypes.bool,\r\n    disableTextInput: PropTypes.bool,\r\n    displayInput: PropTypes.bool,\r\n    displayCustom: PropTypes.func,\r\n    angleArc: PropTypes.number,\r\n    angleOffset: PropTypes.number,\r\n    disableMouseWheel: PropTypes.bool,\r\n    title: PropTypes.string,\r\n    className: PropTypes.string,\r\n    canvasClassName: PropTypes.string,\r\n  }\r\n\r\n  static defaultProps = {\r\n    onChangeEnd: () => {},\r\n    min: 0,\r\n    max: 100,\r\n    step: 1,\r\n    log: false,\r\n    width: 200,\r\n    height: 200,\r\n    thickness: 0.35,\r\n    lineCap: \"butt\",\r\n    bgColor: \"#EEE\",\r\n    fgColor: \"#EA2\",\r\n    inputColor: \"\",\r\n    font: \"Arial\",\r\n    fontWeight: \"bold\",\r\n    clockwise: true,\r\n    cursor: false,\r\n    stopper: true,\r\n    readOnly: false,\r\n    disableTextInput: false,\r\n    displayInput: true,\r\n    angleArc: 360,\r\n    angleOffset: 0,\r\n    disableMouseWheel: false,\r\n    className: null,\r\n    canvasClassName: null,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.w = this.props.width || 200\r\n    this.h = this.props.height || this.w\r\n    this.cursorExt = this.props.cursor === true ? 0.3 : this.props.cursor / 100\r\n    this.angleArc = (this.props.angleArc * Math.PI) / 180\r\n    this.angleOffset = (this.props.angleOffset * Math.PI) / 180\r\n    this.startAngle = 1.5 * Math.PI + this.angleOffset\r\n    this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc\r\n    this.digits =\r\n      Math.max(\r\n        String(Math.abs(this.props.min)).length,\r\n        String(Math.abs(this.props.max)).length,\r\n        2\r\n      ) + 2\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.drawCanvas()\r\n    if (!this.props.readOnly) {\r\n      this.canvasRef.addEventListener(\"touchstart\", this.handleTouchStart, {\r\n        passive: false,\r\n      })\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.width && this.w !== nextProps.width) {\r\n      this.w = nextProps.width\r\n    }\r\n    if (nextProps.height && this.h !== nextProps.height) {\r\n      this.h = nextProps.height\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.drawCanvas()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.canvasRef.removeEventListener(\"touchstart\", this.handleTouchStart)\r\n  }\r\n\r\n  getArcToValue = v => {\r\n    let startAngle\r\n    let endAngle\r\n    const angle = !this.props.log\r\n      ? ((v - this.props.min) * this.angleArc) /\r\n        (this.props.max - this.props.min)\r\n      : Math.log(Math.pow(v / this.props.min, this.angleArc)) /\r\n        Math.log(this.props.max / this.props.min)\r\n    if (!this.props.clockwise) {\r\n      startAngle = this.endAngle + 0.00001\r\n      endAngle = startAngle - angle - 0.00001\r\n    } else {\r\n      startAngle = this.startAngle - 0.00001\r\n      endAngle = startAngle + angle + 0.00001\r\n    }\r\n    if (this.props.cursor) {\r\n      startAngle = endAngle - this.cursorExt\r\n      endAngle += this.cursorExt\r\n    }\r\n    return {\r\n      startAngle,\r\n      endAngle,\r\n      acw: !this.props.clockwise && !this.props.cursor,\r\n    }\r\n  }\r\n\r\n  // Calculate ratio to scale canvas to avoid blurriness on HiDPI devices\r\n  getCanvasScale = ctx => {\r\n    const devicePixelRatio =\r\n      window.devicePixelRatio ||\r\n      window.screen.deviceXDPI / window.screen.logicalXDPI || // IE10\r\n      1\r\n    const backingStoreRatio = ctx.webkitBackingStorePixelRatio || 1\r\n    return devicePixelRatio / backingStoreRatio\r\n  }\r\n\r\n  coerceToStep = v => {\r\n    let val = !this.props.log\r\n      ? ~~((v < 0 ? -0.5 : 0.5) + v / this.props.step) * this.props.step\r\n      : Math.pow(\r\n          this.props.step,\r\n          ~~(\r\n            (Math.abs(v) < 1 ? -0.5 : 0.5) +\r\n            Math.log(v) / Math.log(this.props.step)\r\n          )\r\n        )\r\n    val = Math.max(Math.min(val, this.props.max), this.props.min)\r\n    if (isNaN(val)) {\r\n      val = 0\r\n    }\r\n    return Math.round(val * 1000) / 1000\r\n  }\r\n\r\n  eventToValue = e => {\r\n    const bounds = this.canvasRef.getBoundingClientRect()\r\n    const x = e.clientX - bounds.left\r\n    const y = e.clientY - bounds.top\r\n    let a = Math.atan2(x - this.w / 2, this.w / 2 - y) - this.angleOffset\r\n    if (!this.props.clockwise) {\r\n      a = this.angleArc - a - 2 * Math.PI\r\n    }\r\n    if (this.angleArc !== Math.PI * 2 && a < 0 && a > -0.5) {\r\n      a = 0\r\n    } else if (a < 0) {\r\n      a += Math.PI * 2\r\n    }\r\n    const val = !this.props.log\r\n      ? (a * (this.props.max - this.props.min)) / this.angleArc + this.props.min\r\n      : Math.pow(this.props.max / this.props.min, a / this.angleArc) *\r\n        this.props.min\r\n    return this.coerceToStep(val)\r\n  }\r\n\r\n  handleMouseDown = e => {\r\n    this.props.onChange(this.eventToValue(e))\r\n    document.addEventListener(\"mousemove\", this.handleMouseMove)\r\n    document.addEventListener(\"mouseup\", this.handleMouseUp)\r\n    document.addEventListener(\"keyup\", this.handleEsc)\r\n  }\r\n\r\n  handleMouseMove = e => {\r\n    e.preventDefault()\r\n    this.props.onChange(this.eventToValue(e))\r\n  }\r\n\r\n  handleMouseUp = e => {\r\n    this.props.onChangeEnd(this.eventToValue(e))\r\n    document.removeEventListener(\"mousemove\", this.handleMouseMove)\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUp)\r\n    document.removeEventListener(\"keyup\", this.handleEsc)\r\n  }\r\n\r\n  handleTouchStart = e => {\r\n    e.preventDefault()\r\n    this.touchIndex = e.targetTouches.length - 1\r\n    this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]))\r\n    document.addEventListener(\"touchmove\", this.handleTouchMove, {\r\n      passive: false,\r\n    })\r\n    document.addEventListener(\"touchend\", this.handleTouchEnd)\r\n    document.addEventListener(\"touchcancel\", this.handleTouchEnd)\r\n  }\r\n\r\n  handleTouchMove = e => {\r\n    e.preventDefault()\r\n    this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]))\r\n  }\r\n\r\n  handleTouchEnd = e => {\r\n    this.props.onChangeEnd(this.eventToValue(e))\r\n    document.removeEventListener(\"touchmove\", this.handleTouchMove)\r\n    document.removeEventListener(\"touchend\", this.handleTouchEnd)\r\n    document.removeEventListener(\"touchcancel\", this.handleTouchEnd)\r\n  }\r\n\r\n  handleEsc = e => {\r\n    if (e.keyCode === 27) {\r\n      e.preventDefault()\r\n      this.handleMouseUp()\r\n    }\r\n  }\r\n\r\n  handleTextInput = e => {\r\n    const val =\r\n      Math.max(Math.min(+e.target.value, this.props.max), this.props.min) ||\r\n      this.props.min\r\n    this.props.onChange(val)\r\n  }\r\n\r\n  handleWheel = e => {\r\n    if (e.deltaX > 0 || e.deltaY > 0) {\r\n      this.props.onChange(\r\n        this.coerceToStep(\r\n          !this.props.log\r\n            ? this.props.value + this.props.step\r\n            : this.props.value * this.props.step\r\n        )\r\n      )\r\n    } else if (e.deltaX < 0 || e.deltaY < 0) {\r\n      this.props.onChange(\r\n        this.coerceToStep(\r\n          !this.props.log\r\n            ? this.props.value - this.props.step\r\n            : this.props.value / this.props.step\r\n        )\r\n      )\r\n    }\r\n  }\r\n\r\n  handleArrowKey = e => {\r\n    if (e.keyCode === 37 || e.keyCode === 40) {\r\n      e.preventDefault()\r\n      this.props.onChange(\r\n        this.coerceToStep(\r\n          !this.props.log\r\n            ? this.props.value - this.props.step\r\n            : this.props.value / this.props.step\r\n        )\r\n      )\r\n    } else if (e.keyCode === 38 || e.keyCode === 39) {\r\n      e.preventDefault()\r\n      this.props.onChange(\r\n        this.coerceToStep(\r\n          !this.props.log\r\n            ? this.props.value + this.props.step\r\n            : this.props.value * this.props.step\r\n        )\r\n      )\r\n    }\r\n  }\r\n\r\n  inputStyle = () => ({\r\n    width: `${(this.w / 2 + 4) >> 0}px`,\r\n    height: `${(this.w / 3) >> 0}px`,\r\n    position: \"absolute\",\r\n    verticalAlign: \"middle\",\r\n    marginTop: `${(this.w / 3) >> 0}px`,\r\n    marginLeft: `-${((this.w * 3) / 4 + 2) >> 0}px`,\r\n    border: 0,\r\n    background: \"none\",\r\n    font: `${this.props.fontWeight} ${(this.w / this.digits) >> 0}px ${\r\n      this.props.font\r\n    }`,\r\n    textAlign: \"center\",\r\n    color: this.props.inputColor || this.props.fgColor,\r\n    padding: \"0px\",\r\n    WebkitAppearance: \"none\",\r\n  })\r\n\r\n  drawCanvas() {\r\n    const ctx = this.canvasRef.getContext(\"2d\")\r\n    const scale = this.getCanvasScale(ctx)\r\n    this.canvasRef.width = this.w * scale // clears the canvas\r\n    this.canvasRef.height = this.h * scale\r\n    ctx.scale(scale, scale)\r\n    this.xy = this.w / 2 // coordinates of canvas center\r\n    this.lineWidth = this.xy * this.props.thickness\r\n    this.radius = this.xy - this.lineWidth / 2\r\n    ctx.lineWidth = this.lineWidth\r\n    ctx.lineCap = this.props.lineCap\r\n    // background arc\r\n    ctx.beginPath()\r\n    ctx.strokeStyle = this.props.bgColor\r\n    ctx.arc(\r\n      this.xy,\r\n      this.xy,\r\n      this.radius,\r\n      this.endAngle - 0.00001,\r\n      this.startAngle + 0.00001,\r\n      true\r\n    )\r\n    ctx.stroke()\r\n    // foreground arc\r\n    const a = this.getArcToValue(this.props.value)\r\n    ctx.beginPath()\r\n    ctx.strokeStyle = this.props.fgColor\r\n    ctx.arc(this.xy, this.xy, this.radius, a.startAngle, a.endAngle, a.acw)\r\n    ctx.stroke()\r\n  }\r\n\r\n  renderCenter = () => {\r\n    const {\r\n      displayCustom,\r\n      displayInput,\r\n      disableTextInput,\r\n      readOnly,\r\n      value,\r\n    } = this.props\r\n\r\n    if (displayInput) {\r\n      return (\r\n        <input\r\n          style={this.inputStyle()}\r\n          type=\"text\"\r\n          value={value}\r\n          onChange={this.handleTextInput}\r\n          onKeyDown={this.handleArrowKey}\r\n          readOnly={readOnly || disableTextInput}\r\n        />\r\n      )\r\n    } else if (displayCustom && typeof displayCustom === \"function\") {\r\n      return displayCustom()\r\n    }\r\n    return null\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      canvasClassName,\r\n      className,\r\n      disableMouseWheel,\r\n      readOnly,\r\n      title,\r\n      value,\r\n    } = this.props\r\n\r\n    return (\r\n      <div\r\n        className={className}\r\n        style={{ width: this.w, height: this.h, display: \"inline-block\" }}\r\n        onWheel={readOnly || disableMouseWheel ? null : this.handleWheel}\r\n      >\r\n        <canvas\r\n          ref={ref => {\r\n            this.canvasRef = ref\r\n          }}\r\n          className={canvasClassName}\r\n          style={{ width: \"100%\", height: \"100%\" }}\r\n          onMouseDown={readOnly ? null : this.handleMouseDown}\r\n          title={title ? `${title}: ${value}` : value}\r\n        />\r\n        {this.renderCenter()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Knob\r\n"]},"metadata":{},"sourceType":"module"}