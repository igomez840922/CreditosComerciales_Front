{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useTranslation,withTranslation}from\"react-i18next\";import*as opt from\"../../../../../helpers/options_helper\";import{Row,Col,Button,Label,Input,Modal,Card,CardBody,CardFooter,InputGroup}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import Select from\"react-select\";import Currency from\"../../../../../helpers/currency\";import{BackendServices,CoreServices,BpmServices}from\"../../../../../services\";import SessionHelper from\"../../../../../helpers/SessionHelper\";import moment from\"moment\";import{GetMontNumberByName,GetMontNameByNumber,Capitalize}from'../../../../../helpers/commons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalReciprocidad=function ModalReciprocidad(props){var _props$dataRecipro$ye,_props$dataRecipro,_props$dataRecipro$de,_props$dataRecipro2,_props$dataRecipro$av,_props$dataRecipro3,_props$dataRecipro$re,_props$dataRecipro4,_props$dataRecipro$so,_props$dataRecipro5,_props$dataRecipro$sa,_props$dataRecipro6;var currencyData=new Currency();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),campoRequeridoAno=_useState2[0],setcampoRequeridoAno=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),campoRequeridoMes=_useState4[0],setcampoRequeridoMes=_useState4[1];var _useState5=useState((_props$dataRecipro$ye=(_props$dataRecipro=props.dataRecipro)===null||_props$dataRecipro===void 0?void 0:_props$dataRecipro.year)!==null&&_props$dataRecipro$ye!==void 0?_props$dataRecipro$ye:2021),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],setyear=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),month=_useState8[0],setmonth=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),mesSelect=_useState10[0],setmesSelect=_useState10[1];var meses=[{label:t(\"January\"),value:t(\"January\")},{label:t(\"February\"),value:t(\"February\")},{label:t(\"March\"),value:t(\"March\")},{label:t(\"April\"),value:t(\"April\")},{label:t(\"May\"),value:t(\"May\")},{label:t(\"June\"),value:t(\"June\")},{label:t(\"July\"),value:t(\"July\")},{label:t(\"August\"),value:t(\"August\")},{label:t(\"September\"),value:t(\"September\")},{label:t(\"October\"),value:t(\"October\")},{label:t(\"November\"),value:t(\"November\")},{label:t(\"December\"),value:t(\"December\")}];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),mainDebtor=_useState12[0],setmainDebtor=_useState12[1];var _useState13=useState(new CoreServices()),_useState14=_slicedToArray(_useState13,2),coreServices=_useState14[0],setcoreServices=_useState14[1];var _useState15=useState(new BackendServices()),_useState16=_slicedToArray(_useState15,2),backendServices=_useState16[0],setbackendServices=_useState16[1];var _useState17=useState(new SessionHelper()),_useState18=_slicedToArray(_useState17,2),sessionHelper=_useState18[0],setsessionHelper=_useState18[1];var _useState19=useState(currencyData.format((_props$dataRecipro$de=props===null||props===void 0?void 0:(_props$dataRecipro2=props.dataRecipro)===null||_props$dataRecipro2===void 0?void 0:_props$dataRecipro2.deposits)!==null&&_props$dataRecipro$de!==void 0?_props$dataRecipro$de:0)),_useState20=_slicedToArray(_useState19,2),deposits=_useState20[0],setdeposits=_useState20[1];var _useState21=useState(currencyData.format((_props$dataRecipro$av=props===null||props===void 0?void 0:(_props$dataRecipro3=props.dataRecipro)===null||_props$dataRecipro3===void 0?void 0:_props$dataRecipro3.averageBalance)!==null&&_props$dataRecipro$av!==void 0?_props$dataRecipro$av:0)),_useState22=_slicedToArray(_useState21,2),averageBalance=_useState22[0],setaverageBalance=_useState22[1];var _useState23=useState(currencyData.format((_props$dataRecipro$re=props===null||props===void 0?void 0:(_props$dataRecipro4=props.dataRecipro)===null||_props$dataRecipro4===void 0?void 0:_props$dataRecipro4.reciprocity)!==null&&_props$dataRecipro$re!==void 0?_props$dataRecipro$re:0)),_useState24=_slicedToArray(_useState23,2),reciprocity=_useState24[0],setreciprocity=_useState24[1];var _useState25=useState(currencyData.format((_props$dataRecipro$so=props===null||props===void 0?void 0:(_props$dataRecipro5=props.dataRecipro)===null||_props$dataRecipro5===void 0?void 0:_props$dataRecipro5.sow)!==null&&_props$dataRecipro$so!==void 0?_props$dataRecipro$so:0)),_useState26=_slicedToArray(_useState25,2),sow=_useState26[0],setsow=_useState26[1];var _useState27=useState(currencyData.format((_props$dataRecipro$sa=props===null||props===void 0?void 0:(_props$dataRecipro6=props.dataRecipro)===null||_props$dataRecipro6===void 0?void 0:_props$dataRecipro6.sales)!==null&&_props$dataRecipro$sa!==void 0?_props$dataRecipro$sa:0)),_useState28=_slicedToArray(_useState27,2),sales=_useState28[0],setsales=_useState28[1];React.useEffect(function(){var result=sessionHelper.get(opt.VARNAME_LOCATIONDATA);if(result!==undefined&&result!==null){loadMainDebtor(result.transactionId);}// Read Api Service data\nvar defaultVal=null;setmesSelect(undefined);try{if(meses.length>0&&props.dataRecipro.month!==null&&mesSelect===undefined){defaultVal=meses.find(function(x){return x.value===props.dataRecipro.month;});if(defaultVal!==undefined){setmesSelect(defaultVal);setmonth(defaultVal.value.toUpperCase());}}else{defaultVal=meses[0];setmesSelect(defaultVal);setmonth(defaultVal.value.toUpperCase());}}catch(err){}},[props.isOpen]);React.useEffect(function(){getReciprocity();},[year,month,mainDebtor]);React.useEffect(function(){calculateData();},[sales,deposits,averageBalance,reciprocity,sow]);//cargar deudor principal\nfunction loadMainDebtor(_x){return _loadMainDebtor.apply(this,arguments);}// Submitimos formulario para busqueda de clientes\nfunction _loadMainDebtor(){_loadMainDebtor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(transactionId){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultPrincipalDebtor(transactionId);case 2:result=_context.sent;if(result!==undefined&&result!==null){setmainDebtor(result);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _loadMainDebtor.apply(this,arguments);}function handleSubmit(event,errors,values){var _mesSelect$value;event.preventDefault();if(errors.length>0){return;}values.sales=sales!==null?sales:props.dataRecipro.sales;values.averageBalance=averageBalance!==null?averageBalance:props.dataRecipro.averageBalance;values.deposits=deposits!==null?deposits:props.dataRecipro.deposits;values.reciprocity=reciprocity!==null?reciprocity:props.dataRecipro.reciprocity;values.sow=sow!==null?sow:props.dataRecipro.sow;values.year=year!==null?year:props.dataRecipro.year;values.month=(_mesSelect$value=mesSelect===null||mesSelect===void 0?void 0:mesSelect.value)!==null&&_mesSelect$value!==void 0?_mesSelect$value:\"Enero\";if(props.tipo==\"guardar\"){props.dataManagament(values,props.tipo);}else{values.reciprocity_id=props.dataRecipro.reciprocity_id;props.dataManagament(values,props.tipo);}// props.onSubmit(values);\n}function getReciprocity(){return _getReciprocity.apply(this,arguments);}function _getReciprocity(){_getReciprocity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"getReciprocity\");if(!(mainDebtor!==null&&year!==null&&year>1995&&year<=Number(moment().format(\"YYYY\"))&&month!==null)){_context2.next=7;break;}console.log(\"getReciprocity\",year,month);_context2.next=5;return coreServices.getReciprocity(mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.customerNumberT24,year,month.toUpperCase());case 5:data=_context2.sent;if(data!==undefined){setdeposits(currencyData.format(data.deposits));setaverageBalance(currencyData.format(data.averageAmt));}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _getReciprocity.apply(this,arguments);}function calculateData(){if(sales>0){var recipro=Number(deposits)/Number(sales);setreciprocity(currencyData.format(Number(recipro).toFixed(2)));}}function check(e){var tecla=document.all?e.keyCode:e.which;//Tecla de retroceso para borrar, siempre la permite\nif(tecla==45){e.preventDefault();return true;}return false;}return/*#__PURE__*/_jsxs(Modal,{size:\"xl\",isOpen:props.isOpen,toggle:props.toggle,centered:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title mt-0\",children:t(\"Reciprocity\")}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:props.toggle,\"data-dismiss\":\"modal\",className:\"close\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",style:{backgroundColor:\"#f3f5f7\"},children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(AvForm,{id:\"frmSearch\",className:\"needs-validation\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"idYear\",children:t(\"Date\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"requestDate\",type:\"month\",id:\"requestDate\",onChange:function onChange(e){setyear(e.target.value.split(\"-\")[0]);var monthselect=e.target.value.split(\"-\")[1];monthselect=GetMontNameByNumber(Number(monthselect));setmonth(monthselect);monthselect=Capitalize(monthselect);console.log(monthselect);setmesSelect(meses.find(function(x){return x.value===monthselect;}));},value:moment(year+\"-\"+(mesSelect!==undefined?GetMontNumberByName(mesSelect.value.toUpperCase()):\"01\")).format(\"YYYY-MM\")})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sales\",children:t(\"Sales\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"sales\",id:\"sales\",onChange:function onChange(e){setsales(e.target.value);},value:sales,pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"deposits\",children:t(\"Deposits\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"deposits\",onChange:function onChange(e){setdeposits(e.target.value);},value:deposits,id:\"deposits\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"averagebalance\",children:t(\"AverageBalance\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"averageBalance\",onChange:function onChange(e){setaverageBalance(e.target.value);},value:averageBalance,id:\"averageBalance\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"reciprocity\",children:t(\"Reciprocity\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"reciprocity\",onChange:function onChange(e){setreciprocity(e.target.value);},value:reciprocity,id:\"reciprocity\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sow\",children:t(\"Sow\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\"// type=\"text\"\n,type:\"number\",min:0,name:\"sow\",value:sow,onChange:function onChange(e){setsow(e.target.value);},onKeyPress:function onKeyPress(e){return check(e);},id:\"sow\"// pattern=\"^[0-9,.]*$\"\n// onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\n})]})})]})}),/*#__PURE__*/_jsxs(CardFooter,{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{id:\"btnNew\",color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:props.toggle,\"data-dismiss\":\"modal\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),props.botones?/*#__PURE__*/_jsxs(Button,{id:\"btnSearch\",color:\"success\",type:\"submit\",style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",\" \",props.tipo==\"guardar\"?t(\"Save\"):t(\"Save\")]}):null]})]})})})})})]});};export default ModalReciprocidad;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalReciprocidad.js"],"names":["React","useState","useTranslation","withTranslation","opt","Row","Col","Button","Label","Input","Modal","Card","CardBody","CardFooter","InputGroup","AvForm","AvField","AvGroup","Select","Currency","BackendServices","CoreServices","BpmServices","SessionHelper","moment","GetMontNumberByName","GetMontNameByNumber","Capitalize","ModalReciprocidad","props","currencyData","t","i18n","campoRequeridoAno","setcampoRequeridoAno","campoRequeridoMes","setcampoRequeridoMes","dataRecipro","year","setyear","month","setmonth","undefined","mesSelect","setmesSelect","meses","label","value","mainDebtor","setmainDebtor","coreServices","setcoreServices","backendServices","setbackendServices","sessionHelper","setsessionHelper","format","deposits","setdeposits","averageBalance","setaverageBalance","reciprocity","setreciprocity","sow","setsow","sales","setsales","useEffect","result","get","VARNAME_LOCATIONDATA","loadMainDebtor","transactionId","defaultVal","length","find","x","toUpperCase","err","isOpen","getReciprocity","calculateData","consultPrincipalDebtor","handleSubmit","event","errors","values","preventDefault","tipo","dataManagament","reciprocity_id","console","log","Number","customerNumberT24","data","averageAmt","recipro","toFixed","check","e","tecla","document","all","keyCode","which","toggle","backgroundColor","target","split","monthselect","getRealValue","textAlign","margin","botones"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\nimport * as opt from \"../../../../../helpers/options_helper\"\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  Modal,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  InputGroup,\r\n} from \"reactstrap\"\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport Select from \"react-select\";\r\nimport Currency from \"../../../../../helpers/currency\";\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../../../services\";\r\nimport SessionHelper from \"../../../../../helpers/SessionHelper\";\r\nimport moment from \"moment\";\r\n\r\nimport { GetMontNumberByName, GetMontNameByNumber, Capitalize } from '../../../../../helpers/commons'\r\n\r\nconst ModalReciprocidad = (props) => {\r\n  const currencyData = new Currency();\r\n  const { t, i18n } = useTranslation();\r\n  const [campoRequeridoAno, setcampoRequeridoAno] = useState(false);\r\n  const [campoRequeridoMes, setcampoRequeridoMes] = useState(false);\r\n  const [year, setyear] = useState(props.dataRecipro?.year ?? 2021);\r\n  const [month, setmonth] = useState(null);\r\n  const [mesSelect, setmesSelect] = useState(undefined);\r\n  const meses = [{ label: t(\"January\"), value: t(\"January\") }\r\n    , { label: t(\"February\"), value: t(\"February\") },\r\n  { label: t(\"March\"), value: t(\"March\") },\r\n  { label: t(\"April\"), value: t(\"April\") },\r\n  { label: t(\"May\"), value: t(\"May\") },\r\n  { label: t(\"June\"), value: t(\"June\") },\r\n  { label: t(\"July\"), value: t(\"July\") },\r\n  { label: t(\"August\"), value: t(\"August\") },\r\n  { label: t(\"September\"), value: t(\"September\") },\r\n  { label: t(\"October\"), value: t(\"October\") },\r\n  { label: t(\"November\"), value: t(\"November\") },\r\n  { label: t(\"December\"), value: t(\"December\") }];\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n\r\n  const [coreServices, setcoreServices] = useState(new CoreServices());\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [sessionHelper, setsessionHelper] = useState(new SessionHelper());\r\n\r\n  const [deposits, setdeposits] = useState(currencyData.format(props?.dataRecipro?.deposits ?? 0))\r\n  const [averageBalance, setaverageBalance] = useState(currencyData.format(props?.dataRecipro?.averageBalance ?? 0))\r\n  const [reciprocity, setreciprocity] = useState(currencyData.format(props?.dataRecipro?.reciprocity ?? 0))\r\n  const [sow, setsow] = useState(currencyData.format(props?.dataRecipro?.sow ?? 0))\r\n  const [sales, setsales] = useState(currencyData.format(props?.dataRecipro?.sales ?? 0))\r\n\r\n  React.useEffect(() => {\r\n    var result = sessionHelper.get(opt.VARNAME_LOCATIONDATA);\r\n    if (result !== undefined && result !== null) {\r\n      loadMainDebtor(result.transactionId)\r\n    }\r\n\r\n    // Read Api Service data\r\n    var defaultVal = null;\r\n    setmesSelect(undefined)\r\n    try {\r\n      if (meses.length > 0 && props.dataRecipro.month !== null && mesSelect === undefined) {\r\n        defaultVal = meses.find(x => x.value === props.dataRecipro.month);\r\n        if (defaultVal !== undefined) {\r\n          setmesSelect(defaultVal);\r\n          setmonth(defaultVal.value.toUpperCase())\r\n        }\r\n      }\r\n      else {\r\n        defaultVal = meses[0];\r\n        setmesSelect(defaultVal);\r\n        setmonth(defaultVal.value.toUpperCase());\r\n      }\r\n    }\r\n    catch (err) { }\r\n  }, [props.isOpen]);\r\n\r\n  React.useEffect(() => {\r\n    getReciprocity()\r\n  }, [year, month, mainDebtor]);\r\n\r\n  React.useEffect(() => {\r\n    calculateData()\r\n  }, [sales, deposits, averageBalance, reciprocity, sow]);\r\n\r\n  //cargar deudor principal\r\n  async function loadMainDebtor(transactionId) {\r\n    var result = await backendServices.consultPrincipalDebtor(transactionId)\r\n    if (result !== undefined && result !== null) {\r\n      setmainDebtor(result);\r\n    }\r\n  }\r\n\r\n  // Submitimos formulario para busqueda de clientes\r\n  function handleSubmit(event, errors, values) {\r\n\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n\r\n    values.sales = sales !== null ? sales : props.dataRecipro.sales;\r\n    values.averageBalance = averageBalance !== null ? averageBalance : props.dataRecipro.averageBalance;\r\n    values.deposits = deposits !== null ? deposits : props.dataRecipro.deposits;\r\n    values.reciprocity = reciprocity !== null ? reciprocity : props.dataRecipro.reciprocity;\r\n    values.sow = sow !== null ? sow : props.dataRecipro.sow;\r\n    values.year = year !== null ? year : props.dataRecipro.year;\r\n    values.month = mesSelect?.value ?? \"Enero\";\r\n    if (props.tipo == \"guardar\") {\r\n      props.dataManagament(values, props.tipo);\r\n    } else {\r\n      values.reciprocity_id = props.dataRecipro.reciprocity_id;\r\n      props.dataManagament(values, props.tipo);\r\n    }\r\n    // props.onSubmit(values);\r\n  }\r\n\r\n  async function getReciprocity() {\r\n\r\n    console.log(\"getReciprocity\");\r\n    if (mainDebtor !== null && year !== null && year > 1995 && year <= Number(moment().format(\"YYYY\")) && month !== null) {\r\n      console.log(\"getReciprocity\", year, month);\r\n      var data = await coreServices.getReciprocity(mainDebtor?.customerNumberT24, year, month.toUpperCase());\r\n      if (data !== undefined) {\r\n        setdeposits(currencyData.format(data.deposits))\r\n        setaverageBalance(currencyData.format(data.averageAmt))\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  function calculateData() {\r\n    if (sales > 0) {\r\n      var recipro = Number(deposits) / Number(sales);\r\n      setreciprocity(currencyData.format(Number(recipro).toFixed(2)))\r\n    }\r\n\r\n  }\r\n\r\n  function check(e) {\r\n    let tecla = (document.all) ? e.keyCode : e.which;\r\n    //Tecla de retroceso para borrar, siempre la permite\r\n    if (tecla == 45) {\r\n      e.preventDefault();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      size=\"xl\"\r\n      isOpen={props.isOpen}\r\n      toggle={props.toggle}\r\n      centered={true}>\r\n      <div className=\"modal-header\">\r\n        <h5 className=\"modal-title mt-0\">{t(\"Reciprocity\")}</h5>\r\n        <button\r\n          type=\"button\"\r\n          onClick={props.toggle}\r\n          data-dismiss=\"modal\"\r\n          className=\"close\"\r\n          aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div className=\"modal-body\" style={{ backgroundColor: \"#f3f5f7\" }}>\r\n        <Row>\r\n          <Col xl=\"12\">\r\n            <AvForm id=\"frmSearch\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n              <Card>\r\n                <CardBody>\r\n                  <Row>\r\n\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"idYear\">{t(\"Date\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          name=\"requestDate\"\r\n                          type=\"month\"\r\n                          id=\"requestDate\"\r\n                          onChange={(e) => { setyear(e.target.value.split(\"-\")[0]); var monthselect = e.target.value.split(\"-\")[1]; monthselect = GetMontNameByNumber(Number(monthselect)); setmonth(monthselect); monthselect = Capitalize(monthselect); console.log(monthselect); setmesSelect(meses.find(x => x.value === monthselect)); }}\r\n                          value={moment(year + \"-\" + (mesSelect !== undefined ? GetMontNumberByName(mesSelect.value.toUpperCase()) : \"01\")).format(\"YYYY-MM\")}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n\r\n                    {/*\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"idYear\">{t(\"Year\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"year\"\r\n                          id=\"year\"\r\n                          onChange={(e) => { setyear(e.target.value);}}\r\n                          value={props.dataRecipro.year}\r\n                          validate={{\r\n                            required: { value: true, errorMessage: t(\"Required Field\") },\r\n                            number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"idMonth\">{t(\"Month\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"} \r\n                          onChange={(e) => { setmesSelect(meses.find(x => x.value === e.value)); setmonth(e.value);}}\r\n                          options={meses}\r\n                          id=\"sustainableCustomer\"\r\n                          classNamePrefix=\"select2-selection\"\r\n                          placeholder={t(\"toselect\")}\r\n                          value={mesSelect}\r\n                        // value={props.dataRecipro.mes}\r\n                        />\r\n                        {campoRequeridoMes ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                          : null}\r\n                      </div>\r\n                    </Col>\r\n                        */}\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"sales\">{t(\"Sales\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"sales\"\r\n                          id=\"sales\"\r\n                          onChange={(e) => { setsales(e.target.value); }}\r\n                          value={sales}\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"deposits\">{t(\"Deposits\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"deposits\"\r\n                          onChange={(e) => { setdeposits(e.target.value); }}\r\n                          value={deposits}\r\n                          id=\"deposits\"\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"averagebalance\">{t(\"AverageBalance\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"averageBalance\"\r\n                          onChange={(e) => { setaverageBalance(e.target.value); }}\r\n                          value={averageBalance}\r\n                          id=\"averageBalance\"\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"reciprocity\">{t(\"Reciprocity\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"reciprocity\"\r\n                          onChange={(e) => { setreciprocity(e.target.value); }}\r\n                          value={reciprocity}\r\n                          id=\"reciprocity\"\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"sow\">{t(\"Sow\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          // type=\"text\"\r\n                          type=\"number\"\r\n                          min={0}\r\n                          name=\"sow\"\r\n                          value={sow}\r\n                          onChange={(e) => { setsow(e.target.value); }}\r\n                          onKeyPress={(e) => { return check(e) }}\r\n                          id=\"sow\"\r\n                        // pattern=\"^[0-9,.]*$\"\r\n                        // onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n                </CardBody>\r\n                <CardFooter style={{ textAlign: \"right\" }}>\r\n                  <Button id=\"btnNew\" color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={props.toggle} data-dismiss=\"modal\">\r\n                    <i className=\"mdi mdi mdi-cancel mid-12px\"></i>{\" \"}{t(\"Cancel\")}\r\n                  </Button>\r\n                  {props.botones ?\r\n                    <Button id=\"btnSearch\" color=\"success\" type=\"submit\" style={{ margin: '5px' }}><i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n                      {\" \"} {props.tipo == \"guardar\" ? t(\"Save\") : t(\"Save\")}\r\n                    </Button> : null}\r\n                </CardFooter>\r\n              </Card>\r\n            </AvForm>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\nModalReciprocidad.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  toggle: PropTypes.func,\r\n  partyId: PropTypes.string\r\n};\r\n\r\nexport default ModalReciprocidad;\r\n"]},"metadata":{},"sourceType":"module"}