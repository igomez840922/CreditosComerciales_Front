{"ast":null,"code":"import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*ReinforcedManagementReport = Lista de Informe Reforzado*/import React,{useState}from\"react\";import{BackendServices,CoreServices}from\"../../../../services\";import{useLocation,useHistory}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Row,Col,Card,CardBody,CardHeader,Button,Label,Table}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";//i18n\nimport{withTranslation}from\"react-i18next\";import ModalBeneficiosFideicomiso from\"./ModalBeneficiosFideicomiso\";import*as url from\"../../../../helpers/url_helper\";import{uniq_key}from\"../../../../helpers/unq_key\";import{PersonModel}from\"../../../../models/Common/PersonModel\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Guarantors=function Guarantors(props){var apiBack=new BackendServices();var location=useLocation();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),botonValidation=_useState2[0],setbotonValidation=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModalFideicomitente=_useState4[0],setShowModalFideicomitente=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],settype=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),dataGuarantorRow=_useState8[0],setdataGuarantorRow=_useState8[1];var _useState9=useState({\"transactId\":0,\"firstName\":\"\",\"secondName\":\"\",\"firstLastName\":\"\",\"secondLastName\":\"\",\"nationality\":\"\",\"personType\":\"\",\"documentType\":\"\",\"documentNumber\":\"\",\"address\":\"\",\"telephone\":\"\",\"relationship\":\"\",\"percentage\":0}),_useState10=_slicedToArray(_useState9,2),dataSet=_useState10[0],setdataSet=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),locationData=_useState12[0],setLocationData=_useState12[1];var history=useHistory();React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}// Read Api Service data\ninitializeData(dataSession);},[]);function initializeData(dataSession){apiBack.consultGuarantors(dataSession.transactionId).then(function(response){console.log(response);(response===null||response===void 0?void 0:response.length)>0&&setdataGuarantorRow(response.map(function(data){/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(data.name,\" \").concat(data.lastName)}),/*#__PURE__*/_jsx(\"td\",{children:data.guarantorRelationship}),/*#__PURE__*/_jsx(\"td\",{children:data.warrantyReason}),/*#__PURE__*/_jsx(\"td\",{children:data.documentType}),/*#__PURE__*/_jsx(\"td\",{children:data.guarantorDocument}),/*#__PURE__*/_jsx(\"td\",{children:data.guarantorDocument}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){surveillanceList(data);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-shield-account mdi-24px\"})})})]},uniq_key());}));(response===null||response===void 0?void 0:response.length)===0&&setdataGuarantorRow(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"9\",style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"h5\",{children:props.t(\"NoData\")})})},1));}).catch(function(err){console.log(err);});}function surveillanceList(data){var model=new PersonModel();data=_objectSpread(_objectSpread({},model),data);props.showBlackListFormModal(data);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{lg:\"12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-row justify-content-between my-3\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:props.t(\"Guarantors\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Name\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Guarantor Relation Ship\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Warranty Reason\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Document Type\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Guarantor Document\")}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"right\"},children:props.t(\"Actions\")})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataGuarantorRow})]})})]})})});};export default withTranslation()(Guarantors);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/10_Fideicomiso/AsignarNumeroFideicomiso/guarantors.js"],"names":["React","useState","BackendServices","CoreServices","useLocation","useHistory","SweetAlert","Row","Col","Card","CardBody","CardHeader","Button","Label","Table","AvForm","AvField","withTranslation","ModalBeneficiosFideicomiso","url","uniq_key","PersonModel","Guarantors","props","apiBack","location","botonValidation","setbotonValidation","showModalFideicomitente","setShowModalFideicomitente","type","settype","dataGuarantorRow","setdataGuarantorRow","dataSet","setdataSet","locationData","setLocationData","history","useEffect","dataSession","data","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","initializeData","consultGuarantors","then","response","console","log","map","name","lastName","guarantorRelationship","warrantyReason","documentType","guarantorDocument","resp","surveillanceList","textAlign","t","catch","err","model","showBlackListFormModal"],"mappings":"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","sourcesContent":["/*ReinforcedManagementReport = Lista de Informe Reforzado*/\r\nimport React, { useState } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport {\r\n    Row,\r\n    Col,\r\n    Card,\r\n    CardBody,\r\n    CardHeader,\r\n    Button,\r\n    Label,\r\n    Table\r\n} from \"reactstrap\";\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\";\r\n//i18n\r\nimport { withTranslation } from \"react-i18next\";\r\nimport ModalBeneficiosFideicomiso from \"./ModalBeneficiosFideicomiso\";\r\nimport * as url from \"../../../../helpers/url_helper\"\r\nimport { uniq_key } from \"../../../../helpers/unq_key\";\r\nimport { PersonModel } from \"../../../../models/Common/PersonModel\";\r\n\r\nconst Guarantors = (props) => {\r\n    const apiBack = new BackendServices();\r\n    const location = useLocation()\r\n    const [botonValidation, setbotonValidation] = useState(true);\r\n    const [showModalFideicomitente, setShowModalFideicomitente] = useState(false);\r\n    const [type, settype] = useState(\"\");\r\n\r\n    const [dataGuarantorRow, setdataGuarantorRow] = useState(null)\r\n    const [dataSet, setdataSet] = useState({\r\n        \"transactId\": 0,\r\n        \"firstName\": \"\",\r\n        \"secondName\": \"\",\r\n        \"firstLastName\": \"\",\r\n        \"secondLastName\": \"\",\r\n        \"nationality\": \"\",\r\n        \"personType\": \"\",\r\n        \"documentType\": \"\",\r\n        \"documentNumber\": \"\",\r\n        \"address\": \"\",\r\n        \"telephone\": \"\",\r\n        \"relationship\": \"\",\r\n        \"percentage\": 0\r\n    });\r\n\r\n    const [locationData, setLocationData] = useState(null);\r\n    const history = useHistory();\r\n\r\n    React.useEffect(() => {\r\n\r\n        let dataSession;\r\n\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                dataSession = location.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n\r\n\r\n        // Read Api Service data\r\n        initializeData(dataSession);\r\n    }, []);\r\n\r\n    function initializeData(dataSession) {\r\n        apiBack.consultGuarantors(dataSession.transactionId).then(response => {\r\n            console.log(response)\r\n            response?.length > 0 && setdataGuarantorRow(response.map(data => {\r\n                <tr key={uniq_key()}>\r\n                    <td>\r\n                        {`${data.name} ${data.lastName}`}\r\n                    </td>\r\n                    <td>\r\n                        {data.guarantorRelationship}\r\n                    </td>\r\n                    <td>\r\n                        {data.warrantyReason}\r\n                    </td>\r\n                    <td>\r\n                        {data.documentType}\r\n                    </td>\r\n                    <td>\r\n                        {data.guarantorDocument}\r\n                    </td>\r\n                    <td>\r\n                        {data.guarantorDocument}\r\n                    </td>\r\n                    <td>\r\n                        <Button type=\"button\" color=\"link\" onClick={(resp) => { surveillanceList(data) }} className=\"btn btn-link\" ><i className=\"mdi mdi-shield-account mdi-24px\"></i></Button>\r\n                    </td>\r\n                </tr>\r\n            }))\r\n            response?.length === 0 && setdataGuarantorRow(\r\n                <tr key={1}>\r\n                    <td colSpan=\"9\" style={{ textAlign: 'center' }}><h5>{props.t(\"NoData\")}</h5></td>\r\n                </tr>)\r\n        }).catch(err => { console.log(err) })\r\n    }\r\n    function surveillanceList(data) {\r\n        let model = new PersonModel();\r\n        data = { ...model, ...data }\r\n        props.showBlackListFormModal(data)\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Row>\r\n                <Col lg=\"12\">\r\n                    <p className=\"card-title-desc\"></p>\r\n                    <p className=\"card-title-desc\"></p>\r\n                    <div className=\"d-flex flex-row justify-content-between my-3\">\r\n                        <h4 className=\"card-title\">{props.t(\"Guarantors\")}</h4>\r\n                    </div>\r\n                    <div className=\"table-responsive styled-table-div\">\r\n                        <Table className=\"table table-striped table-hover styled-table table mb-0\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>{props.t(\"Name\")}</th>\r\n                                    <th>{props.t(\"Guarantor Relation Ship\")}</th>\r\n                                    <th>{props.t(\"Warranty Reason\")}</th>\r\n                                    <th>{props.t(\"Document Type\")}</th>\r\n                                    <th>{props.t(\"Guarantor Document\")}</th>\r\n                                    <th style={{ textAlign: \"right\" }}>\r\n                                        {props.t(\"Actions\")}\r\n                                    </th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {dataGuarantorRow}\r\n                            </tbody>\r\n                        </Table>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>\r\n    );\r\n}\r\nexport default (withTranslation()(Guarantors))\r\n"]},"metadata":{},"sourceType":"module"}