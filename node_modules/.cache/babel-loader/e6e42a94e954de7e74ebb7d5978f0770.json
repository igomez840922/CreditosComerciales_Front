{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\10_Fideicomiso\\\\GarantiasFideicomiso\\\\DataGeneral.js\",\n    _s = $RefreshSig$();\n\n/*ReinforcedManagementReport = Lista de Informe Reforzado*/\nimport PropTypes from 'prop-types';\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport * as url from \"../../../../helpers/url_helper\";\nimport * as OPTs from \"../../../../helpers/options_helper\";\nimport { Card, CardHeader, CardBody, Row, Col, Button, CardFooter, Alert, Label } from \"reactstrap\"; //Import Breadcrumb\n\nimport Breadcrumbs from \"../../../../components/Common/Breadcrumb\"; //i18n\n\nimport { useTranslation, withTranslation } from \"react-i18next\";\nimport { BpmServices } from \"../../../../services\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\nimport { BackendServices, CoreServices } from \"../../../../services\";\nimport React, { useEffect, useState } from \"react\";\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\";\nimport ModalEndProcess from \"../../../../components/EndProcess/ModalEndProcess\";\nimport { InfoBpmModel } from '../../../../models/Common/InfoBpmModel';\nimport { LogProcessModel } from '../../../../models/Common/LogProcessModel';\nimport LogProcess from \"../../../../components/LogProcess/index\";\nimport AttachmentFileCore from \"../../../../components/Common/AttachmentFileCore\";\nimport Currency from '../../../../helpers/currency';\nimport HorizontalSteeper from \"../../../../components/Common/HorizontalSteeper\";\nimport { saveLogProcess } from \"../../../../helpers/logs_helper\";\nimport { AttachmentFileInputModel } from \"../../../../models/Common/AttachmentFileInputModel\";\nimport ModalBitacora from '../../../../components/Common/ModalBitacora';\nimport { Tab, Tabs } from 'react-bootstrap';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { uniqueId } from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst DataGeneral = props => {\n  _s();\n\n  var _dataGuarantees$commi, _dataGuarantees$commi2;\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const history = useHistory();\n  const location = useLocation();\n  const [displayModalCloseOptions, setDisplayModalCloseOptions] = useState(false);\n  const [displayModalAdvanceOptions, setDisplayModalAdvanceOptions] = useState(false);\n  const [locationData, setLocationData] = useState(null); //Servicios\n\n  const backendServices = new BackendServices();\n  const bpmServices = new BpmServices();\n  const coreServices = new CoreServices();\n  const [mainDebtor, setMainDebtor] = useState(null);\n  const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\n  const [messageDlg, setmessageDlg] = useState({\n    msg: \"\",\n    show: false,\n    error: false\n  });\n  const [optionSelected, setoptionSelected] = useState(null);\n  const [displayModalBinnacle, setdisplayModalBinnacle] = useState(false);\n  const [isActiveLoading, setIsActiveLoading] = useState(true);\n  const [facility, setFacility] = useState(null);\n  const [facilities, setFacilities] = useState(null);\n  const [facilityId, setFacilityId] = useState(null);\n  const [proposalType, setProposalType] = useState(null);\n  const [tabsFacility, setTabsFacility] = useState(null);\n  const [guaranteesType, setGuaranteesType] = useState(null);\n  const [msgDataND, setmsgDataND] = useState({\n    show: false,\n    msg: \"\",\n    isError: false\n  });\n  const [dataGuarantees, setDataGuarantees] = useState(null);\n  const currencyData = new Currency(); //On Mounting (componentDidMount)\n\n  React.useEffect(() => {\n    let dataSession;\n\n    if (location.data !== null && location.data !== undefined) {\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\n        //location.data.transactionId = 0;\n        //checkAndCreateProcedure(location.data);\n        history.push(url.URL_DASHBOARD);\n      } else {\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\n        setLocationData(location.data);\n        dataSession = location.data;\n      }\n    } else {\n      //chequeamos si tenemos guardado en session\n      var result = sessionStorage.getItem('locationData');\n\n      if (result !== undefined && result !== null) {\n        result = JSON.parse(result);\n        setLocationData(result);\n        dataSession = result;\n      }\n    }\n\n    locationData && fetchData(dataSession);\n    loadData(dataSession);\n  }, [!locationData]);\n  React.useEffect(() => {// facilityId &&();\n  }, [facilityId]);\n\n  function loadData(data) {\n    console.log(data);\n    setIsActiveLoading(true);\n    Promise.allSettled([backendServices.consultGeneralDataPropCred(data.transactionId), backendServices.retrieveFacilityType(), coreServices.getTipoGarantiaCatalogo(), backendServices.retrieveProposalType()]).then(data => {\n      const [{\n        value: GeneralDataPropCred\n      }, {\n        value: FacilityType\n      }, {\n        value: guaranteesType\n      }, {\n        value: proposalType\n      }] = data;\n      setProposalType(proposalType);\n      setGuaranteesType(guaranteesType === null || guaranteesType === void 0 ? void 0 : guaranteesType.Records);\n      backendServices.consultarFacilidades(GeneralDataPropCred[0].requestId).then(async resp => {\n        for (const index in resp) {\n          let guarantees = await backendServices.consultarGarantiaPropCred(resp[index].facilityId);\n          resp[index].guaranteeFacility = guarantees === null || guarantees === void 0 ? void 0 : guarantees.some(guarantee => guarantee.guaranteeTypeName === '200'); //200->garantía Tipo inmueble\n        }\n\n        resp = resp.filter($$ => $$.debtor !== '  ' && $$.facilityTypeId !== \" \").filter(facility => facility.guaranteeFacility);\n\n        if (resp.length > 0) {\n          setFacilities(resp);\n          setFacility(resp[0]);\n          setFacilityId(resp[0].facilityId);\n          let commission = await backendServices.consultCommissionPropCred(resp[0].facilityId).then(commission => {\n            var _commission$commissio;\n\n            return (commission === null || commission === void 0 ? void 0 : (_commission$commissio = commission.commissions) === null || _commission$commissio === void 0 ? void 0 : _commission$commissio.length) > 0 ? commission === null || commission === void 0 ? void 0 : commission.commissions[0] : {\n              amount: 0\n            };\n          });\n          setDataGuarantees(guarantees => ({ ...guarantees,\n            commission\n          }));\n          setTabsFacility(resp.map((items, index) => /*#__PURE__*/_jsxDEV(Tab, {\n            className: \"m-0\",\n            eventKey: index,\n            title: FacilityType.find($$ => $$.id === items.facilityTypeId).description\n          }, uniqueId() + index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)));\n        }\n\n        setIsActiveLoading(false);\n      }).catch(err => {\n        console.log(err);\n        setIsActiveLoading(false);\n      });\n    }).catch(err => {\n      console.log(err);\n      setIsActiveLoading(false);\n    });\n  } //Caraga Inicial de datos\n\n\n  function fetchData(locationData) {\n    //chequear si la tarea no ha sido iniciada\n    bpmServices.checkAndStartTask(locationData).then(iniresult => {\n      if (iniresult === false) {\n        history.push(url.URL_DASHBOARD);\n      }\n    });\n    loadUserProspect(locationData.transactionId); // Read Api Service data\n  }\n\n  function loadUserProspect(transactionId) {\n    // consultarDeudorPrincipal\n    backendServices.consultPrincipalDebtor(transactionId).then(data => {\n      if (data !== undefined) {\n        setMainDebtor(data);\n      }\n    });\n  }\n\n  async function guardarDatos() {\n    let form = document.getElementById('frmDataFiduciary');\n    form.requestSubmit();\n  } ////////// PARTE ES LA FINAL DEL PROCESO ///////\n  //Modal Para mostrar Comentario de Fin de Proceso\n\n\n  function showModalEndProcess(show = true) {\n    setdisplayModalEndProcess(show);\n  } //salvar comentario de end process\n\n\n  function onSaveEndProcess(values) {\n    onSaveProcess(OPTs.PROCESS_CANCELPROCESS);\n  }\n\n  function onSaveProcess(option) {\n    switch (option) {\n      case OPTs.PROCESS_CANCELPROCESS:\n        {\n          break;\n        }\n\n      default:\n        break;\n    }\n\n    saveJBPMProcess(option);\n  }\n\n  async function saveJBPMProcess(option) {\n    var _locationData$infoBpm, _locationData$infoBpm2, _locationData$infoBpm3, _locationData$infoBpm4;\n\n    var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId);\n    var infoBpmModel = new InfoBpmModel((_locationData$infoBpm = (_locationData$infoBpm2 = locationData.infoBpmModel) === null || _locationData$infoBpm2 === void 0 ? void 0 : _locationData$infoBpm2.instanceId) !== null && _locationData$infoBpm !== void 0 ? _locationData$infoBpm : locationData.instanceId, (_locationData$infoBpm3 = (_locationData$infoBpm4 = locationData.infoBpmModel) === null || _locationData$infoBpm4 === void 0 ? void 0 : _locationData$infoBpm4.transactId) !== null && _locationData$infoBpm3 !== void 0 ? _locationData$infoBpm3 : locationData.transactionId, 0, 0, mainDebtor === null || mainDebtor === void 0 ? void 0 : mainDebtor.personId);\n    infoBpmModel.personName = mainDebtor !== undefined ? mainDebtor.typePerson === \"2\" ? mainDebtor.name : mainDebtor.name + \" \" + mainDebtor.name2 + \" \" + mainDebtor.lastName + \" \" + mainDebtor.lastName2 : \"\";\n    var values = {};\n\n    switch (option) {\n      case OPTs.PROCESS_CANCELPROCESS:\n        {\n          bpmServices.abortProcess(infoBpmModel.instanceId).then(data => {\n            if (data !== undefined) {\n              saveAutoLog(OPTs.APPLICATION_STATUS_CANC, \"\");\n              history.push(url.URL_DASHBOARD);\n            } else {\n              showMessage({\n                msg: t(\"TheProcessCouldNotFinish\"),\n                error: true,\n                show: true\n              });\n            }\n          });\n          break;\n        }\n\n      case OPTs.PROCESS_DATOSFIDEICOMISO:\n        {\n          infoBpmModel.processId = OPTs.PROCESS_DATOSFIDEICOMISO;\n          infoBpmModel.activityId = OPTs.ACT_NONE;\n          values = {\n            \"info\": JSON.stringify(infoBpmModel),\n            \"processId\": OPTs.PROCESS_DATOSFIDEICOMISO.toString(),\n            \"activityId\": OPTs.ACT_NONE.toString(),\n            \"transactionId\": locationData.transactionId.toString()\n          };\n          bpmServices.updatevariables(locationData.instanceId, values).then(data => {\n            if (data !== undefined) {\n              showMessage({\n                msg: t(\"Datahasbeensavedsuccessfully\"),\n                error: false,\n                show: true\n              });\n              history.push(url.URL_DASHBOARD);\n            } else {\n              showMessage({\n                msg: t(\"ErrorSaveMessage\"),\n                error: true,\n                show: true\n              });\n            }\n          });\n          break;\n        }\n\n      case OPTs.PROCESS_INFORMEGESTION:\n        {\n          infoBpmModel.processId = OPTs.PROCESS_INFORMEGESTION;\n          infoBpmModel.activityId = OPTs.ACT_NONE;\n          values = {\n            \"info\": JSON.stringify(infoBpmModel),\n            \"processId\": OPTs.PROCESS_INFORMEGESTION.toString(),\n            \"activityId\": OPTs.ACT_NONE.toString(),\n            \"transactionId\": locationData.transactionId,\n            \"requestId\": locationData.requestId,\n            \"decision\": \"si\"\n          };\n          bpmServices.completedStatusTask(locationData.taskId, values).then(data => {\n            if (data !== undefined) {\n              saveAutoLog(OPTs.APPLICATION_STATUS_DEVB, \"\");\n              history.push(url.URL_DASHBOARD);\n            } else {\n              //Mensaje ERROR              \n              showMessage({\n                msg: t(\"ErrorSaveMessage\"),\n                error: true,\n                show: true\n              });\n            }\n          });\n          break;\n        }\n\n      case OPTs.PROCESS_DOCUMENTACIONLEGAL:\n        {\n          infoBpmModel.processId = OPTs.PROCESS_DOCUMENTACIONLEGAL;\n          infoBpmModel.activityId = OPTs.ACT_NONE;\n          values = {\n            \"info\": JSON.stringify(infoBpmModel),\n            \"processId\": OPTs.PROCESS_DOCUMENTACIONLEGAL.toString(),\n            \"activityId\": OPTs.ACT_NONE.toString(),\n            \"transactionId\": locationData.transactionId,\n            \"requestId\": locationData.requestId,\n            \"decision\": \"no\"\n          };\n          bpmServices.completedStatusTask(locationData.taskId, values).then(data => {\n            if (data !== undefined) {\n              saveAutoLog();\n              history.push(url.URL_DASHBOARD);\n            } else {\n              //Mensaje ERROR              \n              showMessage({\n                msg: t(\"ErrorSaveMessage\"),\n                error: true,\n                show: true\n              });\n            }\n          });\n          break;\n        }\n\n      default:\n        break;\n    }\n  }\n\n  function showMessage(data = null) {\n    if (data !== null) {\n      setmessageDlg(data);\n    } else {\n      setmessageDlg({\n        msg: \"\",\n        show: false,\n        error: false\n      });\n    }\n  }\n\n  async function saveAutoLog(APPLICATION_STATUS = null, observations = null) {\n    var _mainDebtor$personId, _APPLICATION_STATUS$i, _APPLICATION_STATUS$n;\n\n    var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId);\n    var log = new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ASIGNARNUMFIDEICOMISO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_10);\n    log.clientId = (_mainDebtor$personId = mainDebtor === null || mainDebtor === void 0 ? void 0 : mainDebtor.personId) !== null && _mainDebtor$personId !== void 0 ? _mainDebtor$personId : log.clientId;\n    log.observations = observations !== null ? t(\"ActivityHasBeenFinishedSuccessfully\") : observations;\n    log.requestId = (_APPLICATION_STATUS$i = APPLICATION_STATUS === null || APPLICATION_STATUS === void 0 ? void 0 : APPLICATION_STATUS.id) !== null && _APPLICATION_STATUS$i !== void 0 ? _APPLICATION_STATUS$i : 0;\n    log.statusDescription = (_APPLICATION_STATUS$n = APPLICATION_STATUS === null || APPLICATION_STATUS === void 0 ? void 0 : APPLICATION_STATUS.name) !== null && _APPLICATION_STATUS$n !== void 0 ? _APPLICATION_STATUS$n : \"\";\n    saveLogProcess(log);\n  }\n\n  function showModalBinnacle(show = true) {\n    setdisplayModalBinnacle(show);\n  }\n\n  async function handleSelect(e) {\n    let data = facilities.at(e);\n    setFacility(data);\n    setFacilityId(data.facilityId);\n    let commission = await backendServices.consultCommissionPropCred(data.facilityId).then(commission => {\n      var _commission$commissio2;\n\n      return (commission === null || commission === void 0 ? void 0 : (_commission$commissio2 = commission.commissions) === null || _commission$commissio2 === void 0 ? void 0 : _commission$commissio2.length) > 0 ? commission === null || commission === void 0 ? void 0 : commission.commissions[0] : {\n        amount: 0\n      };\n    });\n    setDataGuarantees(guarantees => ({ ...guarantees,\n      commission\n    }));\n  }\n\n  function handleSubmitGuarantee(event, errors, value) {\n    event.preventDefault();\n\n    if (errors.length > 0) {\n      return;\n    }\n\n    console.log(dataGuarantees);\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n      active: isActiveLoading,\n      spinner: true,\n      text: t(\"WaitingPlease\"),\n      children: /*#__PURE__*/_jsxDEV(AvForm, {\n        id: \"frmDataFiduciary\",\n        className: \"needs-validation mx-3 \",\n        onSubmit: handleSubmitGuarantee,\n        children: [tabsFacility != null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Tabs, {\n            defaultActiveKey: \"0\",\n            id: \"uncontrolled-tab-example\",\n            className: \"mb-4\",\n            onSelect: e => {\n              handleSelect(e);\n            },\n            children: tabsFacility\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 29\n          }, this), facilityId && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              align: \"right\",\n              className: \"my-3\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"card-title\",\n                href: \"https://registro-publico.gob.pa/\",\n                target: \"_blank\",\n                children: t(\"Public Record\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              className: \"d-flex justify-content-end\",\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                lg: \"6\",\n                children: /*#__PURE__*/_jsxDEV(AvGroup, {\n                  className: \"mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    htmlFor: \"Amount\",\n                    children: t(\"Amount\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                    className: \"form-control\",\n                    name: \"Amount\",\n                    type: \"text\",\n                    pattern: \"^[0-9,.$]*$\",\n                    onKeyUp: e => {\n                      let x = currencyData.getRealValue(e.target.value).replace('$', '');\n                      e.target.value = `$${currencyData.format(x)}`;\n                      dataGuarantees.commission.amount = x;\n                      setDataGuarantees(dataGuarantees);\n                    },\n                    value: `$${currencyData.format((_dataGuarantees$commi = dataGuarantees === null || dataGuarantees === void 0 ? void 0 : (_dataGuarantees$commi2 = dataGuarantees.commission) === null || _dataGuarantees$commi2 === void 0 ? void 0 : _dataGuarantees$commi2.amount) !== null && _dataGuarantees$commi !== void 0 ? _dataGuarantees$commi : 0)}`,\n                    onChange: e => {\n                      /*code here...*/\n                    },\n                    id: \"Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Alert, {\n          show: \"true\",\n          variant: \"warning\",\n          dismissible: \"true\",\n          onClose: () => {\n            setmsgDataND({\n              show: false,\n              msg: \"\",\n              isError: false\n            });\n          },\n          children: t(\"No facilities\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 12,\n          className: \"d-flex justify-content-end px-4\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            type: \"button\",\n            onClick: () => {\n              guardarDatos();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"mdi mdi-content-save-outline mid-12px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 99\n            }, this), \" \", t(\"Save\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          className: \"my-5\",\n          children: locationData && /*#__PURE__*/_jsxDEV(AttachmentFileCore, {\n            attachmentFileInputModel: new AttachmentFileInputModel(locationData.transactionId, OPTs.PROCESS_ASIGNARNUMFIDEICOMISO, OPTs.ACT_FIDEICOMISOGARANTIAS)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataGeneral, \"8txQ8ftAnAFprmBFcRygSqWb2s0=\", false, function () {\n  return [useTranslation, useHistory, useLocation];\n});\n\n_c = DataGeneral;\nDataGeneral.propTypes = {\n  selectedId: PropTypes.any\n};\nexport default withTranslation()(DataGeneral);\n\nvar _c;\n\n$RefreshReg$(_c, \"DataGeneral\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/10_Fideicomiso/GarantiasFideicomiso/DataGeneral.js"],"names":["PropTypes","useLocation","useHistory","Link","url","OPTs","Card","CardHeader","CardBody","Row","Col","Button","CardFooter","Alert","Label","Breadcrumbs","useTranslation","withTranslation","BpmServices","SweetAlert","BackendServices","CoreServices","React","useEffect","useState","AvForm","AvField","AvGroup","ModalEndProcess","InfoBpmModel","LogProcessModel","LogProcess","AttachmentFileCore","Currency","HorizontalSteeper","saveLogProcess","AttachmentFileInputModel","ModalBitacora","Tab","Tabs","LoadingOverlay","uniqueId","DataGeneral","props","t","i18n","history","location","displayModalCloseOptions","setDisplayModalCloseOptions","displayModalAdvanceOptions","setDisplayModalAdvanceOptions","locationData","setLocationData","backendServices","bpmServices","coreServices","mainDebtor","setMainDebtor","displayModalEndProcess","setdisplayModalEndProcess","messageDlg","setmessageDlg","msg","show","error","optionSelected","setoptionSelected","displayModalBinnacle","setdisplayModalBinnacle","isActiveLoading","setIsActiveLoading","facility","setFacility","facilities","setFacilities","facilityId","setFacilityId","proposalType","setProposalType","tabsFacility","setTabsFacility","guaranteesType","setGuaranteesType","msgDataND","setmsgDataND","isError","dataGuarantees","setDataGuarantees","currencyData","dataSession","data","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","fetchData","loadData","console","log","Promise","allSettled","consultGeneralDataPropCred","retrieveFacilityType","getTipoGarantiaCatalogo","retrieveProposalType","then","value","GeneralDataPropCred","FacilityType","Records","consultarFacilidades","requestId","resp","index","guarantees","consultarGarantiaPropCred","guaranteeFacility","some","guarantee","guaranteeTypeName","filter","$$","debtor","facilityTypeId","commission","consultCommissionPropCred","commissions","amount","map","items","find","id","description","catch","err","checkAndStartTask","iniresult","loadUserProspect","consultPrincipalDebtor","guardarDatos","form","document","getElementById","requestSubmit","showModalEndProcess","onSaveEndProcess","values","onSaveProcess","PROCESS_CANCELPROCESS","option","saveJBPMProcess","infoBpmModel","instanceId","transactId","personId","personName","typePerson","name","name2","lastName","lastName2","abortProcess","saveAutoLog","APPLICATION_STATUS_CANC","showMessage","PROCESS_DATOSFIDEICOMISO","processId","activityId","ACT_NONE","toString","updatevariables","PROCESS_INFORMEGESTION","completedStatusTask","taskId","APPLICATION_STATUS_DEVB","PROCESS_DOCUMENTACIONLEGAL","APPLICATION_STATUS","observations","PROCESS_ASIGNARNUMFIDEICOMISO","BPM_ACTIVITY_10","clientId","statusDescription","showModalBinnacle","handleSelect","e","at","handleSubmitGuarantee","event","errors","preventDefault","x","getRealValue","target","replace","format","ACT_FIDEICOMISOGARANTIAS","propTypes","selectedId","any"],"mappings":"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","sourcesContent":["/*ReinforcedManagementReport = Lista de Informe Reforzado*/\r\nimport PropTypes from 'prop-types'\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\"\r\nimport * as url from \"../../../../helpers/url_helper\"\r\nimport * as OPTs from \"../../../../helpers/options_helper\";\r\n\r\nimport {\r\n    Card, CardHeader,\r\n    CardBody,\r\n    Row,\r\n    Col,\r\n    Button,\r\n    CardFooter,\r\n    Alert,\r\n    Label,\r\n} from \"reactstrap\"\r\n\r\n//Import Breadcrumb\r\nimport Breadcrumbs from \"../../../../components/Common/Breadcrumb\"\r\n\r\n//i18n\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\n\r\nimport { BpmServices } from \"../../../../services\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\n\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\nimport React, { useEffect, useState } from \"react\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\n\r\nimport ModalEndProcess from \"../../../../components/EndProcess/ModalEndProcess\"\r\nimport { InfoBpmModel } from '../../../../models/Common/InfoBpmModel';\r\nimport { LogProcessModel } from '../../../../models/Common/LogProcessModel';\r\nimport LogProcess from \"../../../../components/LogProcess/index\";\r\n\r\nimport AttachmentFileCore from \"../../../../components/Common/AttachmentFileCore\";\r\nimport Currency from '../../../../helpers/currency';\r\n\r\nimport HorizontalSteeper from \"../../../../components/Common/HorizontalSteeper\";\r\nimport { saveLogProcess } from \"../../../../helpers/logs_helper\";\r\n\r\n\r\nimport { AttachmentFileInputModel } from \"../../../../models/Common/AttachmentFileInputModel\"\r\nimport ModalBitacora from '../../../../components/Common/ModalBitacora';\r\nimport { Tab, Tabs } from 'react-bootstrap';\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport { uniqueId } from 'lodash';\r\n\r\nconst DataGeneral = props => {\r\n\r\n    const { t, i18n } = useTranslation();\r\n    const history = useHistory();\r\n    const location = useLocation()\r\n    const [displayModalCloseOptions, setDisplayModalCloseOptions] = useState(false);\r\n    const [displayModalAdvanceOptions, setDisplayModalAdvanceOptions] = useState(false);\r\n\r\n    const [locationData, setLocationData] = useState(null);\r\n    //Servicios\r\n    const backendServices = new BackendServices();\r\n    const bpmServices = new BpmServices();\r\n    const coreServices = new CoreServices();\r\n\r\n    const [mainDebtor, setMainDebtor] = useState(null);\r\n\r\n    const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\r\n    const [messageDlg, setmessageDlg] = useState({ msg: \"\", show: false, error: false });\r\n\r\n    const [optionSelected, setoptionSelected] = useState(null);\r\n    const [displayModalBinnacle, setdisplayModalBinnacle] = useState(false);\r\n\r\n    const [isActiveLoading, setIsActiveLoading] = useState(true);\r\n    const [facility, setFacility] = useState(null);\r\n    const [facilities, setFacilities] = useState(null);\r\n    const [facilityId, setFacilityId] = useState(null);\r\n    const [proposalType, setProposalType] = useState(null);\r\n    const [tabsFacility, setTabsFacility] = useState(null);\r\n    const [guaranteesType, setGuaranteesType] = useState(null);\r\n    const [msgDataND, setmsgDataND] = useState({ show: false, msg: \"\", isError: false });\r\n\r\n    const [dataGuarantees, setDataGuarantees] = useState(null);\r\n    const currencyData = new Currency()\r\n    //On Mounting (componentDidMount)\r\n    React.useEffect(() => {\r\n        let dataSession;\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                dataSession = location.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n        locationData && fetchData(dataSession);\r\n        loadData(dataSession);\r\n    }, [!locationData]);\r\n\r\n\r\n    React.useEffect(() => {\r\n        // facilityId &&();\r\n    }, [facilityId]);\r\n\r\n    function loadData(data) {\r\n        console.log(data)\r\n        setIsActiveLoading(true);\r\n        Promise.allSettled([\r\n            backendServices.consultGeneralDataPropCred(data.transactionId),\r\n            backendServices.retrieveFacilityType(),\r\n            coreServices.getTipoGarantiaCatalogo(),\r\n            backendServices.retrieveProposalType(),\r\n        ]).then(data => {\r\n            const [{ value: GeneralDataPropCred }, { value: FacilityType }, { value: guaranteesType }, { value: proposalType }] = data;\r\n            setProposalType(proposalType)\r\n            setGuaranteesType(guaranteesType?.Records)\r\n            backendServices.consultarFacilidades(GeneralDataPropCred[0].requestId).then(async resp => {\r\n                for (const index in resp) {\r\n                    let guarantees = await backendServices.consultarGarantiaPropCred(resp[index].facilityId);\r\n                    resp[index].guaranteeFacility = guarantees?.some(guarantee => guarantee.guaranteeTypeName === '200')//200->garantía Tipo inmueble\r\n                }\r\n                resp = resp.filter($$ => $$.debtor !== '  ' && $$.facilityTypeId !== \" \").filter(facility => facility.guaranteeFacility);\r\n\r\n                if (resp.length > 0) {\r\n                    setFacilities(resp);\r\n                    setFacility(resp[0]);\r\n                    setFacilityId(resp[0].facilityId)\r\n                    let commission = await backendServices.consultCommissionPropCred(resp[0].facilityId).then(commission => commission?.commissions?.length > 0 ? commission?.commissions[0] : { amount: 0 });\r\n\r\n                    setDataGuarantees(guarantees => ({ ...guarantees, commission }))\r\n                    setTabsFacility(resp.map((items, index) => (\r\n                        <Tab key={uniqueId() + index} className=\"m-0\" eventKey={index} title={FacilityType.find($$ => $$.id === items.facilityTypeId).description}></Tab>\r\n                    )));\r\n                }\r\n                setIsActiveLoading(false)\r\n            }).catch(err => {\r\n                console.log(err);\r\n                setIsActiveLoading(false)\r\n            });\r\n\r\n        }).catch(err => {\r\n            console.log(err)\r\n            setIsActiveLoading(false)\r\n        })\r\n    }\r\n\r\n    //Caraga Inicial de datos\r\n    function fetchData(locationData) {\r\n\r\n        //chequear si la tarea no ha sido iniciada\r\n        bpmServices.checkAndStartTask(locationData)\r\n            .then((iniresult) => {\r\n                if (iniresult === false) {\r\n                    history.push(url.URL_DASHBOARD);\r\n                }\r\n            })\r\n\r\n        loadUserProspect(locationData.transactionId)\r\n        // Read Api Service data\r\n    }\r\n\r\n    function loadUserProspect(transactionId) {\r\n        // consultarDeudorPrincipal\r\n        backendServices.consultPrincipalDebtor(transactionId)\r\n            .then((data) => {\r\n                if (data !== undefined) {\r\n                    setMainDebtor(data);\r\n                }\r\n            });\r\n    }\r\n\r\n    async function guardarDatos() {\r\n        let form = document.getElementById('frmDataFiduciary');\r\n        form.requestSubmit();\r\n    }\r\n\r\n    ////////// PARTE ES LA FINAL DEL PROCESO ///////\r\n    //Modal Para mostrar Comentario de Fin de Proceso\r\n    function showModalEndProcess(show = true) {\r\n        setdisplayModalEndProcess(show);\r\n    }\r\n    //salvar comentario de end process\r\n    function onSaveEndProcess(values) {\r\n        onSaveProcess(OPTs.PROCESS_CANCELPROCESS);\r\n    }\r\n    function onSaveProcess(option) {\r\n\r\n        switch (option) {\r\n            case OPTs.PROCESS_CANCELPROCESS: {\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n        saveJBPMProcess(option);\r\n    }\r\n    async function saveJBPMProcess(option) {\r\n\r\n        var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n        var infoBpmModel = new InfoBpmModel(\r\n            locationData.infoBpmModel?.instanceId ?? locationData.instanceId,\r\n            locationData.infoBpmModel?.transactId ?? locationData.transactionId,\r\n            0, 0,\r\n            mainDebtor?.personId\r\n        );\r\n        infoBpmModel.personName = mainDebtor !== undefined ? (mainDebtor.typePerson === \"2\" ? mainDebtor.name : (mainDebtor.name + \" \" + mainDebtor.name2 + \" \" + mainDebtor.lastName + \" \" + mainDebtor.lastName2)) : \"\";\r\n        var values = {};\r\n        switch (option) {\r\n            case OPTs.PROCESS_CANCELPROCESS: {\r\n                bpmServices.abortProcess(infoBpmModel.instanceId)\r\n                    .then((data) => {\r\n                        if (data !== undefined) {\r\n                            saveAutoLog(OPTs.APPLICATION_STATUS_CANC, \"\");\r\n                            history.push(url.URL_DASHBOARD);\r\n                        }\r\n                        else {\r\n                            showMessage({ msg: t(\"TheProcessCouldNotFinish\"), error: true, show: true });\r\n                        }\r\n                    });\r\n                break;\r\n            }\r\n            case OPTs.PROCESS_DATOSFIDEICOMISO: {\r\n                infoBpmModel.processId = OPTs.PROCESS_DATOSFIDEICOMISO;\r\n                infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n                values = {\r\n                    \"info\": JSON.stringify(infoBpmModel),\r\n                    \"processId\": OPTs.PROCESS_DATOSFIDEICOMISO.toString(),\r\n                    \"activityId\": OPTs.ACT_NONE.toString(),\r\n                    \"transactionId\": locationData.transactionId.toString(),\r\n                };\r\n                bpmServices.updatevariables(locationData.instanceId, values)\r\n                    .then((data) => {\r\n                        if (data !== undefined) {\r\n                            showMessage({ msg: t(\"Datahasbeensavedsuccessfully\"), error: false, show: true });\r\n                            history.push(url.URL_DASHBOARD);\r\n                        }\r\n                        else {\r\n                            showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n                        }\r\n                    });\r\n                break;\r\n            }\r\n            case OPTs.PROCESS_INFORMEGESTION: {\r\n                infoBpmModel.processId = OPTs.PROCESS_INFORMEGESTION;\r\n                infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n                values = {\r\n                    \"info\": JSON.stringify(infoBpmModel),\r\n                    \"processId\": OPTs.PROCESS_INFORMEGESTION.toString(),\r\n                    \"activityId\": OPTs.ACT_NONE.toString(),\r\n                    \"transactionId\": locationData.transactionId,\r\n                    \"requestId\": locationData.requestId,\r\n                    \"decision\": \"si\"\r\n                };\r\n                bpmServices.completedStatusTask(locationData.taskId, values)\r\n                    .then((data) => {\r\n                        if (data !== undefined) {\r\n\r\n                            saveAutoLog(OPTs.APPLICATION_STATUS_DEVB, \"\");\r\n                            history.push(url.URL_DASHBOARD);\r\n                        }\r\n                        else {\r\n                            //Mensaje ERROR              \r\n                            showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n                        }\r\n                    });\r\n                break;\r\n            }\r\n            case OPTs.PROCESS_DOCUMENTACIONLEGAL: {\r\n                infoBpmModel.processId = OPTs.PROCESS_DOCUMENTACIONLEGAL;\r\n                infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n                values = {\r\n                    \"info\": JSON.stringify(infoBpmModel),\r\n                    \"processId\": OPTs.PROCESS_DOCUMENTACIONLEGAL.toString(),\r\n                    \"activityId\": OPTs.ACT_NONE.toString(),\r\n                    \"transactionId\": locationData.transactionId,\r\n                    \"requestId\": locationData.requestId,\r\n                    \"decision\": \"no\"\r\n                };\r\n                bpmServices.completedStatusTask(locationData.taskId, values)\r\n                    .then((data) => {\r\n                        if (data !== undefined) {\r\n                            saveAutoLog();\r\n                            history.push(url.URL_DASHBOARD);\r\n                        }\r\n                        else {\r\n                            //Mensaje ERROR              \r\n                            showMessage({ msg: t(\"ErrorSaveMessage\"), error: true, show: true });\r\n                        }\r\n                    });\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    function showMessage(data = null) {\r\n        if (data !== null) {\r\n            setmessageDlg(data)\r\n        }\r\n        else {\r\n            setmessageDlg({ msg: \"\", show: false, error: false })\r\n        }\r\n    }\r\n\r\n    async function saveAutoLog(APPLICATION_STATUS = null, observations = null) {\r\n        var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId);\r\n        var log = new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_ASIGNARNUMFIDEICOMISO, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_10)\r\n        log.clientId = mainDebtor?.personId ?? log.clientId;\r\n        log.observations = observations !== null ? t(\"ActivityHasBeenFinishedSuccessfully\") : observations;\r\n        log.requestId = APPLICATION_STATUS?.id ?? 0;\r\n        log.statusDescription = APPLICATION_STATUS?.name ?? \"\";\r\n        saveLogProcess(log);\r\n    }\r\n\r\n    function showModalBinnacle(show = true) {\r\n        setdisplayModalBinnacle(show);\r\n    }\r\n\r\n    async function handleSelect(e) {\r\n        let data = facilities.at(e);\r\n        setFacility(data);\r\n        setFacilityId(data.facilityId)\r\n        let commission = await backendServices.consultCommissionPropCred(data.facilityId).then(commission => commission?.commissions?.length > 0 ? commission?.commissions[0] : { amount: 0 });\r\n        setDataGuarantees(guarantees => ({ ...guarantees, commission }))\r\n    }\r\n\r\n    function handleSubmitGuarantee(event, errors, value) {\r\n        event.preventDefault();\r\n        if (errors.length > 0) {\r\n            return;\r\n        }\r\n        console.log(dataGuarantees)\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n\r\n                <AvForm id=\"frmDataFiduciary\" className=\"needs-validation mx-3 \" onSubmit={handleSubmitGuarantee}>\r\n\r\n                    {tabsFacility != null ?\r\n                        <>\r\n                            <Tabs defaultActiveKey=\"0\" id=\"uncontrolled-tab-example\" className=\"mb-4\" onSelect={(e) => { handleSelect(e) }}>\r\n                                {tabsFacility}\r\n                            </Tabs>\r\n                            {facilityId && <>\r\n                                <div align=\"right\" className=\"my-3\">\r\n                                    <a className=\"card-title\" href=\"https://registro-publico.gob.pa/\" target=\"_blank\">{t(\"Public Record\")}</a>\r\n                                </div>\r\n\r\n                                <Row className=\"d-flex justify-content-end\">\r\n                                    <Col lg=\"6\">\r\n                                        <AvGroup className=\"mb-3\">\r\n                                            <Label htmlFor=\"Amount\">{t(\"Amount\")}</Label>\r\n                                            <AvField\r\n                                                className=\"form-control\"\r\n                                                name=\"Amount\"\r\n                                                type=\"text\"\r\n                                                pattern=\"^[0-9,.$]*$\"\r\n                                                onKeyUp={(e) => {\r\n                                                    let x = currencyData.getRealValue(e.target.value).replace('$', '');\r\n                                                    e.target.value = `$${currencyData.format(x)}`;\r\n                                                    dataGuarantees.commission.amount = x;\r\n                                                    setDataGuarantees(dataGuarantees)\r\n                                                }}\r\n                                                value={`$${currencyData.format(dataGuarantees?.commission?.amount ?? 0)}`}\r\n                                                onChange={(e) => { /*code here...*/ }}\r\n                                                id=\"Amount\" />\r\n                                        </AvGroup>\r\n\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                            </>}\r\n                        </>\r\n                        : <Alert show=\"true\" variant=\"warning\" dismissible=\"true\" onClose={() => { setmsgDataND({ show: false, msg: \"\", isError: false }) }}>\r\n                            {t(\"No facilities\")}\r\n                        </Alert>}\r\n\r\n                    <Col md={12} className=\"d-flex justify-content-end px-4\">\r\n                        <Button color=\"primary\" type=\"button\" onClick={() => { guardarDatos(); }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Save\")}</Button>\r\n                    </Col>\r\n\r\n                    <Col className=\"my-5\">\r\n                        {locationData && <AttachmentFileCore attachmentFileInputModel={new AttachmentFileInputModel(locationData.transactionId, OPTs.PROCESS_ASIGNARNUMFIDEICOMISO, OPTs.ACT_FIDEICOMISOGARANTIAS)} />}\r\n                    </Col>\r\n\r\n                </AvForm>\r\n\r\n            </LoadingOverlay>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nDataGeneral.propTypes = {\r\n    selectedId: PropTypes.any,\r\n}\r\n\r\nexport default (withTranslation()(DataGeneral))\r\n"]},"metadata":{},"sourceType":"module"}