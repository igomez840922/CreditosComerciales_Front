{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*ReinforcedManagementReport = Lista de Informe Reforzado*/import React,{useState}from\"react\";import{Row,Col,Card,CardBody,Button,Label,Input,CardHeader,Table,CardFooter}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";//i18n\nimport{withTranslation}from\"react-i18next\";import ModalFideicomitente from\"./ModalFideicomitente\";import ModalBeneficiosFideicomiso from\"./ModalBeneficiosFideicomiso\";import{BackendServices}from\"../../../../services\";import{useLocation,useHistory}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import*as url from\"../../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Fideicomitente=function Fideicomitente(props){var apiBack=new BackendServices();var location=useLocation();var _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),dataLocation=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),botonValidation=_useState4[0],setbotonValidation=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModalFideicomitente=_useState6[0],setShowModalFideicomitente=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),type=_useState8[0],settype=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),successSave_dlg=_useState10[0],setsuccessSave_dlg=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),error_dlg=_useState12[0],seterror_dlg=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),error_msg=_useState14[0],seterror_msg=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),info_dlg=_useState16[0],setinfo_dlg=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),info_msg=_useState18[0],setinfo_msg=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),dynamic_title=_useState20[0],setdynamic_title=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),confirm_alert=_useState22[0],setconfirm_alert=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),success_dlg=_useState24[0],setsuccess_dlg=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),dynamic_description=_useState26[0],setdynamic_description=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),dataFideicomitenteRows=_useState28[0],setdataFideicomitenteRows=_useState28[1];var _useState29=useState({\"transactId\":0,\"trustorId\":0,\"name\":\"\",\"address\":\"\",\"email\":\"\",\"telephone\":0,\"personId\":0,\"status\":true}),_useState30=_slicedToArray(_useState29,2),dataSet=_useState30[0],setdataSet=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),locationData=_useState32[0],setLocationData=_useState32[1];var history=useHistory();React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}// Read Api Service data\ninitializeData(dataSession);},[]);function initializeData(dataLocation){apiBack.consultarFideiComitentesBD(dataLocation.transactionId).then(function(resp){if(resp!=undefined||resp.length>0){setdataFideicomitenteRows(resp.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.name+\" \"+data.secondName+\" \"+data.lastName+\" \"+data.secondSurname}),/*#__PURE__*/_jsx(\"td\",{children:data.address}),/*#__PURE__*/_jsx(\"td\",{children:data.email}),/*#__PURE__*/_jsx(\"td\",{children:data.phone})]},data.trustorId);}));}else{setdataFideicomitenteRows(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"h5\",{children:props.t(\"NoData\")})})},1));}});}function editarDatosClientes(data){settype(\"editar\");setdataSet(data);setbotonValidation(true);toggleShowModalFideicomitente();}function EliminarCliente(data){setdataSet(data);setconfirm_alert(true);}function gestionDatos(data,tipo){data.transactId=Number(dataLocation.transactionId);data.telephone=Number(data.telephone);if(tipo==\"guardar\"){apiBack.nuevaListaFideicomitentes(data).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg(true);toggleShowModalFideicomitente();}else{toggleShowModalFideicomitente();seterror_dlg(true);}}).catch(function(error){seterror_dlg(true);});}else{data.trustorId=dataSet.trustorId;data.personId=dataSet.personId;apiBack.actualizarListaFideicomitentes(data).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg(true);toggleShowModalFideicomitente();}else{toggleShowModalFideicomitente();seterror_dlg(true);}}).catch(function(error){seterror_dlg(true);});}}//abrimos modal para adjunar archivos\nfunction toggleShowModalFideicomitente(){setShowModalFideicomitente(!showModalFideicomitente);removeBodyCss();}function removeBodyCss(){document.body.classList.add(\"no_padding\");}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:props.t(\"Settlors\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Name\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Address\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Email\")}),/*#__PURE__*/_jsx(\"th\",{children:props.t(\"Phone\")})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataFideicomitenteRows})]})]})}),/*#__PURE__*/_jsx(ModalFideicomitente,{tipo:type,dataSet:dataSet,botones:botonValidation,gestionDatos:gestionDatos,isOpen:showModalFideicomitente,toggle:function toggle(){toggleShowModalFideicomitente();}}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:props.t(\"SuccessDialog\"),confirmButtonText:props.t(\"Confirm\"),cancelButtonText:props.t(\"Cancel\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);initializeData();},children:props.t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:props.t(\"ErrorDialog\"),confirmButtonText:props.t(\"Confirm\"),cancelButtonText:props.t(\"Cancel\"),onConfirm:function onConfirm(){seterror_dlg(false);initializeData();},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:props.t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:props.t(\"Yesdeleteit\"),cancelButtonText:props.t(\"Cancel\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){apiBack.eliminarListaFideicomitentes(dataLocation.transactionId,dataSet.personId).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(true);}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(true);});},onCancel:function onCancel(){return setconfirm_alert(false);},children:props.t(\"Youwontbeabletorevertthis\")}):null]});};export default withTranslation()(Fideicomitente);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/10_Fideicomiso/AsignarNumeroFideicomiso/Fideicomitente.js"],"names":["React","useState","Row","Col","Card","CardBody","Button","Label","Input","CardHeader","Table","CardFooter","AvForm","AvField","withTranslation","ModalFideicomitente","ModalBeneficiosFideicomiso","BackendServices","useLocation","useHistory","SweetAlert","url","Fideicomitente","props","apiBack","location","data","dataLocation","setData","botonValidation","setbotonValidation","showModalFideicomitente","setShowModalFideicomitente","type","settype","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","info_dlg","setinfo_dlg","info_msg","setinfo_msg","dynamic_title","setdynamic_title","confirm_alert","setconfirm_alert","success_dlg","setsuccess_dlg","dynamic_description","setdynamic_description","dataFideicomitenteRows","setdataFideicomitenteRows","dataSet","setdataSet","locationData","setLocationData","history","useEffect","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","initializeData","consultarFideiComitentesBD","then","resp","map","name","secondName","lastName","secondSurname","address","email","phone","trustorId","textAlign","t","editarDatosClientes","toggleShowModalFideicomitente","EliminarCliente","gestionDatos","tipo","transactId","Number","telephone","nuevaListaFideicomitentes","catch","error","personId","actualizarListaFideicomitentes","removeBodyCss","document","body","classList","add","eliminarListaFideicomitentes","statusCode"],"mappings":"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","sourcesContent":["/*ReinforcedManagementReport = Lista de Informe Reforzado*/\r\nimport React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  CardHeader,\r\n  Table,\r\n  CardFooter\r\n} from \"reactstrap\"\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\n\r\n//i18n\r\nimport { withTranslation } from \"react-i18next\"\r\n\r\nimport ModalFideicomitente from \"./ModalFideicomitente\"\r\nimport ModalBeneficiosFideicomiso from \"./ModalBeneficiosFideicomiso\"\r\nimport { BackendServices } from \"../../../../services\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport * as url from \"../../../../helpers/url_helper\"\r\n\r\nconst Fideicomitente = (props) => {\r\n  const apiBack = new BackendServices();\r\n  const location = useLocation()\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [botonValidation, setbotonValidation] = useState(true);\r\n  const [showModalFideicomitente, setShowModalFideicomitente] = useState(false);\r\n  const [type, settype] = useState(\"\");\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [info_dlg, setinfo_dlg] = useState(false)\r\n  const [info_msg, setinfo_msg] = useState(\"\")\r\n  const [dynamic_title, setdynamic_title] = useState(\"\")\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [success_dlg, setsuccess_dlg] = useState(false)\r\n  const [dynamic_description, setdynamic_description] = useState(\"\")\r\n  const [dataFideicomitenteRows, setdataFideicomitenteRows] = useState(null)\r\n  const [dataSet, setdataSet] = useState({\r\n    \"transactId\": 0,\r\n    \"trustorId\": 0,\r\n    \"name\": \"\",\r\n    \"address\": \"\",\r\n    \"email\": \"\",\r\n    \"telephone\": 0,\r\n    \"personId\": 0,\r\n    \"status\": true\r\n  });\r\n  const [locationData, setLocationData] = useState(null);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n\r\n    let dataSession;\r\n\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n\r\n    // Read Api Service data\r\n    initializeData(dataSession);\r\n  }, []);\r\n\r\n  function initializeData(dataLocation) {\r\n    apiBack.consultarFideiComitentesBD(dataLocation.transactionId).then(resp => {\r\n      if (resp != undefined || resp.length > 0) {\r\n        setdataFideicomitenteRows(resp.map((data) => (\r\n          <tr key={data.trustorId}>\r\n            <td>{data.name + \" \" + data.secondName + \" \" + data.lastName + \" \" + data.secondSurname}</td>\r\n            <td>{data.address}</td>\r\n            <td>{data.email}</td>\r\n            <td>{data.phone}</td>\r\n            {/* <td style={{ textAlign: \"right\" }}>\r\n              <Button type=\"button\" color=\"link\" onClick={(resp) => { editarDatosClientes(data) }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n              <Button type=\"button\" color=\"link\" onClick={(resp) => { EliminarCliente(data) }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n            </td> */}\r\n          </tr>)\r\n        ));\r\n\r\n      } else {\r\n        setdataFideicomitenteRows(\r\n          <tr key={1}>\r\n            <td colSpan=\"4\" style={{ textAlign: 'center' }}><h5>{props.t(\"NoData\")}</h5></td>\r\n          </tr>);\r\n      }\r\n    })\r\n  }\r\n  function editarDatosClientes(data) {\r\n    settype(\"editar\")\r\n    setdataSet(data)\r\n    setbotonValidation(true);\r\n    toggleShowModalFideicomitente()\r\n  }\r\n  function EliminarCliente(data) {\r\n    setdataSet(data)\r\n    setconfirm_alert(true);\r\n  }\r\n  function gestionDatos(data, tipo) {\r\n    data.transactId = Number(dataLocation.transactionId);\r\n    data.telephone = Number(data.telephone);\r\n    if (tipo == \"guardar\") {\r\n      apiBack.nuevaListaFideicomitentes(data).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          setsuccessSave_dlg(true)\r\n          toggleShowModalFideicomitente();\r\n        } else {\r\n          toggleShowModalFideicomitente();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(error => {\r\n        seterror_dlg(true);\r\n      })\r\n    } else {\r\n      data.trustorId = dataSet.trustorId;\r\n      data.personId = dataSet.personId;\r\n      apiBack.actualizarListaFideicomitentes(data).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          setsuccessSave_dlg(true)\r\n          toggleShowModalFideicomitente();\r\n        } else {\r\n          toggleShowModalFideicomitente();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(error => {\r\n        seterror_dlg(true);\r\n      })\r\n    }\r\n  }\r\n  //abrimos modal para adjunar archivos\r\n  function toggleShowModalFideicomitente() {\r\n    setShowModalFideicomitente(!showModalFideicomitente);\r\n    removeBodyCss()\r\n  }\r\n  function removeBodyCss() {\r\n    document.body.classList.add(\"no_padding\")\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <Row>\r\n        <Col md=\"12\">\r\n          <p className=\"card-title-desc\"></p>\r\n          <h4 className=\"card-title\">{props.t(\"Settlors\")}</h4>\r\n          <p className=\"card-title-desc\"></p>\r\n          <Table className=\"table mb-0\">\r\n            <thead className=\"table-light\">\r\n              <tr>\r\n                <th>{props.t(\"Name\")}</th>\r\n                <th>{props.t(\"Address\")}</th>\r\n                <th>{props.t(\"Email\")}</th>\r\n                <th>{props.t(\"Phone\")}</th>\r\n                {/* <th style={{ textAlign: \"right\" }}>\r\n                  <Button type=\"button\" color=\"link\" className=\"btn btn-link\" onClick={() => {\r\n                    toggleShowModalFideicomitente(); settype(\"guardar\"); setdataSet({\r\n                      \"transactId\": 0,\r\n                      \"trustorId\": 0,\r\n                      \"name\": \"\",\r\n                      \"address\": \"\",\r\n                      \"email\": \"\",\r\n                      \"telephone\": 0,\r\n                      \"status\": true\r\n                    })\r\n                  }} title={props.t(\"Add\")}> <i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i>\r\n                  </Button>\r\n                </th> */}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {dataFideicomitenteRows}\r\n            </tbody>\r\n          </Table>\r\n        </Col>\r\n      </Row>\r\n      <ModalFideicomitente tipo={type} dataSet={dataSet} botones={botonValidation} gestionDatos={gestionDatos} isOpen={showModalFideicomitente} toggle={() => { toggleShowModalFideicomitente() }} />\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={props.t(\"SuccessDialog\")}\r\n          confirmButtonText={props.t(\"Confirm\")}\r\n          cancelButtonText={props.t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {props.t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={props.t(\"ErrorDialog\")}\r\n          confirmButtonText={props.t(\"Confirm\")}\r\n          cancelButtonText={props.t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={props.t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={props.t(\"Yesdeleteit\")}\r\n          cancelButtonText={props.t(\"Cancel\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n\r\n            apiBack.eliminarListaFideicomitentes(dataLocation.transactionId, dataSet.personId).then(resp => {\r\n              if (resp.statusCode == \"500\") {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(true)\r\n              } else {\r\n                setconfirm_alert(false)\r\n                setsuccessSave_dlg(true)\r\n              }\r\n            }).catch(error => {\r\n              setconfirm_alert(false)\r\n              seterror_dlg(true)\r\n            })\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {props.t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nFideicomitente.propTypes = {\r\n  results: PropTypes.array.isRequired, //Resultado de la busqueda\r\n}\r\n\r\nexport default (withTranslation()(Fideicomitente))\r\n"]},"metadata":{},"sourceType":"module"}