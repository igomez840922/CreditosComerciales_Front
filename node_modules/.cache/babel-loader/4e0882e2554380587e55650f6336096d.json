{"ast":null,"code":"import _createForOfIteratorHelper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{WatchListModel,DocumentModel,ClientInfoModel,PartiesStaffModel}from\"../../models/Core\";import ApiServiceCore from\"../ApiServiceCore\";import*as url from\"../../helpers/url_helper\";import qs from\"qs\";import{ACT_FACILIDADACTIVOSFIJOS}from\"../../helpers/options_helper\";import*as OPTs from\"../../helpers/options_helper\";import{ResponseModel}from'../../models/Common/ResponseModel';import moment from\"moment\";import{part}from\"core-js/core/function\";import{GetMontNumberByName,GetMontNameByNumber}from'../../helpers/commons';import{ResourceStore}from\"i18next\";import Currency from\"../../helpers/currency\";var Services=/*#__PURE__*/function(_ApiServiceCore){_inherits(Services,_ApiServiceCore);var _super=_createSuper(Services);function Services(){_classCallCheck(this,Services);return _super.apply(this,arguments);}_createClass(Services,[{key:\"postWhatchList\",value://analysis/customers -> retorna la info de lista de vigilancia\n//ConsultarListaCriterioCORE    \nfunction(){var _postWhatchList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(params){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.post(url.URL_CORE_WATCHLIST,params);case 3:result=_context.sent;return _context.abrupt(\"return\",{status:200,result:WatchListModel.fromJson(result).results});case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",{status:_context.t0.response.status,error:_context.t0.response.data});case 10:case\"end\":return _context.stop();}}},_callee,this,[[0,7]]);}));function postWhatchList(_x){return _postWhatchList.apply(this,arguments);}return postWhatchList;}()//documents -> salva documento en gestor documental ONBASE\n//GuardarDocumentoECM\n},{key:\"postDocument\",value:function(){var _postDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var config,result,dataresult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{//\"Accept\":\"*/*\",\n//\"Accept-Encoding\":\"gzip, deflate, sdch, br\",\n//\"Accept-Language\":\"fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4\",\n//\"Access-Control-Request-Headers\":\"accept, content-type\",\n//\"Content-Type\":\"text/plain\",\n//\"Content-Length\":JSON.stringify(data).length.toString(),\n//\"Host\":\"https://qa.api.ob.banesco.com.pa/\",\n//Connection: \"keep-alive\",\n//\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\",\n\"userId\":\"mq3898\",//Usuario\n\"clientDt\":\"clientDt\",//\"Fecha de ejecuciÃ³n del cliente.\"\n\"appName\":\"ReactJs\",//\"Aplicacion que consume el servicio\"\n\"requestId\":\"202112202\",//\"Identificador de la solicitud.\"\n\"channelId\":\"channelID\"//\"Canal consumidor\",                \n}};_context2.next=3;return this.post(url.URL_CORE_DOCUMENTS,data,config);case 3:result=_context2.sent;console.log(\"Result Document: \",result);/*\r\n        var result = {\r\n            \"Status\": {\r\n                \"StatusCode\": \"M0000\",\r\n                \"StatusDesc\": \"OK\"\r\n            },\r\n            \"Token\": \"e793-ddb2-ab0e-6626-5d3e-5f19-b79b-1f5d\",\r\n            \"Result\": {\r\n                \"DocName\": \"TDC - Contrato de TDC  (98765432)\",\r\n                \"DocumentID\": \"34589873\",\r\n                \"FormType\": \"HTML\"\r\n            }\r\n        }\r\n        */ //console.log(result);\nif(!(result.Status.StatusCode===\"M0000\")){_context2.next=8;break;}dataresult={docName:result.Result['DocName'],documentId:result.Result['DocumentID'],formType:result.Result['FormType']};return _context2.abrupt(\"return\",dataresult);case 8:return _context2.abrupt(\"return\",undefined);case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function postDocument(_x2){return _postDocument.apply(this,arguments);}return postDocument;}()//documents -> Ver documento en gestor documental ONBASE\n//VerDocumentoECM\n},{key:\"postViewDocument\",value:function(){var _postViewDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(docId){var data,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(docId);data={DocumentHandle:docId,ReturnBase64:false};_context3.next=5;return this.post(url.URL_CORE_DOCUMENTSVIEW,data);case 5:result=_context3.sent;console.log(\"Result Document: \",result);return _context3.abrupt(\"return\",result.Documents[0].DocPop);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);case 12:return _context3.abrupt(\"return\",null);case 13:case\"end\":return _context3.stop();}}},_callee3,this,[[0,10]]);}));function postViewDocument(_x3){return _postViewDocument.apply(this,arguments);}return postViewDocument;}()//v1/parties/information -> retorna la info del cliente\n//BuscarClienteCORE\n},{key:\"getPartiesInformation\",value:function(){var _getPartiesInformation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(params){var data,result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:/*var item =[ {id:800120843,clientnumber:800120843,clientname:\"Israel Michel Gomez Alfonso\",firstname:\"Israel\",secondname:\"Michel\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"CED\",idnumber:\"456123\"},\r\n        {id:800120845,clientnumber:800120845,clientname:\"Pancho Pedro Gomez Alfonso\",firstname:\"Pancho\",secondname:\"Pedro\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"RUC\",idnumber:\"456456\"}];\r\n        return item;*/ //params = {PartyType:Juridico,PartyId:600088018}\ndata=qs.stringify(params);console.log(data);//url.URL_CORSBYPASS +\n_context4.next=4;return this.get(url.URL_CORE_PARTIEINFO+\"?\"+data);case 4:result=_context4.sent;console.log(result);if(!(result.Status.StatusCode===\"M0000\")){_context4.next=10;break;}return _context4.abrupt(\"return\",ClientInfoModel.fromJson(result));case 10:result[\"error\"]=\"Error de Servicio del Core\";//result.Status.StatusDesc;\nresult[\"errorCode\"]=result.Status.StatusCode;return _context4.abrupt(\"return\",result);case 13:case\"end\":return _context4.stop();}}},_callee4,this);}));function getPartiesInformation(_x4){return _getPartiesInformation.apply(this,arguments);}return getPartiesInformation;}()},{key:\"getPartiesInformationExtra\",value:function(){var _getPartiesInformationExtra=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(typePerson,customerNumberT24){var params,result,_data$address$Country,_data$address,_data$address$Country2,_data$address$Provinc,_data$address2,_data$address2$Provin,_data$address$CountyD,_data$address3,_data$address3$County,_data$address$Jurisdi,_data$address4,_data$address4$Jurisd,_data$address$City$De,_data$address5,_data$address5$City,_data$address$AddrDes,_data$address6,_data$address$Buildin,_data$address7,_data$address7$Buildi,_data$address$HouseNu,_data$address8,_data$address$Street,_data$address9,data,extraInfo;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;params={PartyType:Number(typePerson)===1?\"Natural\":\"Juridico\",PartyId:customerNumberT24};_context5.next=4;return this.getPartiesInformation(params);case 4:result=_context5.sent;if(!(result!==undefined&&result.length>0)){_context5.next=10;break;}data=result[0];console.log(\"getPartiesInformationExtra\",data);extraInfo={activity:{\"EconomicActivity\":data[\"economicActivity\"]},address:{\"Country\":(_data$address$Country=(_data$address=data[\"address\"])===null||_data$address===void 0?void 0:(_data$address$Country2=_data$address.Country)===null||_data$address$Country2===void 0?void 0:_data$address$Country2.CountryCode)!==null&&_data$address$Country!==void 0?_data$address$Country:\"\",\"Province\":(_data$address$Provinc=(_data$address2=data[\"address\"])===null||_data$address2===void 0?void 0:(_data$address2$Provin=_data$address2.Province)===null||_data$address2$Provin===void 0?void 0:_data$address2$Provin.Cod)!==null&&_data$address$Provinc!==void 0?_data$address$Provinc:\"\",\"CountyDistrict\":(_data$address$CountyD=(_data$address3=data[\"address\"])===null||_data$address3===void 0?void 0:(_data$address3$County=_data$address3.CountyDistrict)===null||_data$address3$County===void 0?void 0:_data$address3$County.Cod)!==null&&_data$address$CountyD!==void 0?_data$address$CountyD:\"\",\"Jurisdiction\":(_data$address$Jurisdi=(_data$address4=data[\"address\"])===null||_data$address4===void 0?void 0:(_data$address4$Jurisd=_data$address4.Jurisdiction)===null||_data$address4$Jurisd===void 0?void 0:_data$address4$Jurisd.Cod)!==null&&_data$address$Jurisdi!==void 0?_data$address$Jurisdi:\"\",\"City\":(_data$address$City$De=(_data$address5=data[\"address\"])===null||_data$address5===void 0?void 0:(_data$address5$City=_data$address5.City)===null||_data$address5$City===void 0?void 0:_data$address5$City.Desc)!==null&&_data$address$City$De!==void 0?_data$address$City$De:\"\",\"AddrDesc\":(_data$address$AddrDes=(_data$address6=data[\"address\"])===null||_data$address6===void 0?void 0:_data$address6.AddrDesc)!==null&&_data$address$AddrDes!==void 0?_data$address$AddrDes:\"\",\"Building\":(_data$address$Buildin=(_data$address7=data[\"address\"])===null||_data$address7===void 0?void 0:(_data$address7$Buildi=_data$address7.Building)===null||_data$address7$Buildi===void 0?void 0:_data$address7$Buildi.Desc)!==null&&_data$address$Buildin!==void 0?_data$address$Buildin:\"\",\"HouseNumber\":(_data$address$HouseNu=(_data$address8=data[\"address\"])===null||_data$address8===void 0?void 0:_data$address8.HouseNumber)!==null&&_data$address$HouseNu!==void 0?_data$address$HouseNu:\"\",\"Street\":(_data$address$Street=(_data$address9=data[\"address\"])===null||_data$address9===void 0?void 0:_data$address9.Street)!==null&&_data$address$Street!==void 0?_data$address$Street:\"\"},\"PhoneNumber\":data[\"phoneNumber\"],\"Email\":data[\"email\"]};return _context5.abrupt(\"return\",extraInfo);case 10:_context5.next=14;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](0);case 14:return _context5.abrupt(\"return\",undefined);case 15:case\"end\":return _context5.stop();}}},_callee5,this,[[0,12]]);}));function getPartiesInformationExtra(_x5,_x6){return _getPartiesInformationExtra.apply(this,arguments);}return getPartiesInformationExtra;}()//Accionistas\n},{key:\"getPartiesStaff\",value:function(){var _getPartiesStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(PartyId){var params,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(PartyId.length<=0)){_context6.next=2;break;}return _context6.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};//{PartyId:600235373}\nparams=qs.stringify(params);_context6.next=6;return this.get(url.URL_CORE_PARTIESTAFF+\"?\"+params);case 6:result=_context6.sent;return _context6.abrupt(\"return\",PartiesStaffModel.fromJson(result));case 8:case\"end\":return _context6.stop();}}},_callee6,this);}));function getPartiesStaff(_x7){return _getPartiesStaff.apply(this,arguments);}return getPartiesStaff;}()///v1/parties/staff\n},{key:\"putPartiesStaff\",value:function(){var _putPartiesStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data){var result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.put(url.URL_CORE_PARTIESTAFF,data);case 2:result=_context7.sent;return _context7.abrupt(\"return\",PartiesStaffModel.fromJson(result));case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function putPartiesStaff(_x8){return _putPartiesStaff.apply(this,arguments);}return putPartiesStaff;}()//ConsultarListaEmpresasRelacionadas\n},{key:\"getCompaniesRelations\",value:function(){var _getCompaniesRelations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(params){var data,result;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0://params = {PartyId:600012387}\ndata=qs.stringify(params);_context8.next=3;return this.get(url.URL_CORE_COMPANIESRELATIONS+\"?\"+data);case 3:result=_context8.sent;return _context8.abrupt(\"return\",PartiesStaffModel.fromJson(result));case 5:case\"end\":return _context8.stop();}}},_callee8,this);}));function getCompaniesRelations(_x9){return _getCompaniesRelations.apply(this,arguments);}return getCompaniesRelations;}()/* ---------------------------------------------------------------------------------------------- */ /*                       Api para obtener todos los paises desde el catalogo                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPaisesCatalogo\",value:function(){var _getPaisesCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var result,params,data;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;result=sessionStorage.getItem('catPaises');if(!(result!==undefined&&result!==null)){_context9.next=4;break;}return _context9.abrupt(\"return\",JSON.parse(result));case 4://sessionStorage.setItem('catPaises', JSON.stringify(result.roles));\nparams={catalog_name:'PAIS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context9.next=8;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 8:result=_context9.sent;sessionStorage.setItem('catPaises',JSON.stringify(result.catalog));return _context9.abrupt(\"return\",result.catalog);case 13:_context9.prev=13;_context9.t0=_context9[\"catch\"](0);case 15:return _context9.abrupt(\"return\",null);case 16:case\"end\":return _context9.stop();}}},_callee9,this,[[0,13]]);}));function getPaisesCatalogo(){return _getPaisesCatalogo.apply(this,arguments);}return getPaisesCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*       Api para obtener las provincias de un pais, pasandole como parametro el id del pais      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getProvinciasCatalogo\",value:function(){var _getProvinciasCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(pais){var params,data,result;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;params={catalog_name:'PROVINCIA',parent_catalog_name:pais,keyword:\"\"};data=qs.stringify(params);_context10.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context10.sent;return _context10.abrupt(\"return\",result.catalog);case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](0);case 11:return _context10.abrupt(\"return\",null);case 12:case\"end\":return _context10.stop();}}},_callee10,this,[[0,9]]);}));function getProvinciasCatalogo(_x10){return _getProvinciasCatalogo.apply(this,arguments);}return getProvinciasCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*    API para obtener los distrito de cada provincia pasandole como parametro el id provincia    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getDistritoCatalogo\",value:function(){var _getDistritoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(provincia){var params,data,result;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;params={catalog_name:'DISTRITO',parent_catalog_name:provincia,keyword:\"\"};data=qs.stringify(params);_context11.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context11.sent;return _context11.abrupt(\"return\",result.catalog);case 9:_context11.prev=9;_context11.t0=_context11[\"catch\"](0);case 11:return _context11.abrupt(\"return\",null);case 12:case\"end\":return _context11.stop();}}},_callee11,this,[[0,9]]);}));function getDistritoCatalogo(_x11){return _getDistritoCatalogo.apply(this,arguments);}return getDistritoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                      Api para obtener los corregimientos de cada distrito                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCorregimientoCatalogo\",value:function(){var _getCorregimientoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(distrito){var params,data,result;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;params={catalog_name:'CORREGIMIENTO',parent_catalog_name:distrito,keyword:\"\"};data=qs.stringify(params);_context12.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context12.sent;return _context12.abrupt(\"return\",result.catalog);case 9:_context12.prev=9;_context12.t0=_context12[\"catch\"](0);case 11:return _context12.abrupt(\"return\",null);case 12:case\"end\":return _context12.stop();}}},_callee12,this,[[0,9]]);}));function getCorregimientoCatalogo(_x12){return _getCorregimientoCatalogo.apply(this,arguments);}return getCorregimientoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                         Api para obtener las ciudades de cada provincia                        */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCiudadCatalogo\",value:function(){var _getCiudadCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(provincia){var params,data,result;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.prev=0;params={catalog_name:'CIUDAD',parent_catalog_name:provincia,keyword:\"\"};data=qs.stringify(params);_context13.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context13.sent;return _context13.abrupt(\"return\",result.catalog);case 9:_context13.prev=9;_context13.t0=_context13[\"catch\"](0);case 11:return _context13.abrupt(\"return\",null);case 12:case\"end\":return _context13.stop();}}},_callee13,this,[[0,9]]);}));function getCiudadCatalogo(_x13){return _getCiudadCatalogo.apply(this,arguments);}return getCiudadCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                      Api para obtener el grupo economico de los catalogos                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getGrupoEconomicoCatalogo\",value:function(){var _getGrupoEconomicoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var params,data,result;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;params={catalog_name:'GRUPO ECONOMICO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context14.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context14.sent;result.catalog.Records.unshift({Description:\"N/A\",Code:\"N/A\"});return _context14.abrupt(\"return\",result.catalog);case 10:_context14.prev=10;_context14.t0=_context14[\"catch\"](0);case 12:return _context14.abrupt(\"return\",null);case 13:case\"end\":return _context14.stop();}}},_callee14,this,[[0,10]]);}));function getGrupoEconomicoCatalogo(){return _getGrupoEconomicoCatalogo.apply(this,arguments);}return getGrupoEconomicoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                   Api para obtener las bancas esta api proviene de catalogos                   */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getBancaCatalogo\",value:function(){var _getBancaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var params,data,result;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.prev=0;params={catalog_name:'BANCA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context15.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context15.sent;return _context15.abrupt(\"return\",result.catalog);case 9:_context15.prev=9;_context15.t0=_context15[\"catch\"](0);case 11:return _context15.abrupt(\"return\",null);case 12:case\"end\":return _context15.stop();}}},_callee15,this,[[0,9]]);}));function getBancaCatalogo(){return _getBancaCatalogo.apply(this,arguments);}return getBancaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                   Api muestra todos los cargos que retorna desde el catalogo                   */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCargosCatalogo\",value:function(){var _getCargosCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var params,data,result;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;params={catalog_name:'CARGO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context16.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context16.sent;return _context16.abrupt(\"return\",result.catalog);case 9:_context16.prev=9;_context16.t0=_context16[\"catch\"](0);case 11:return _context16.abrupt(\"return\",null);case 12:case\"end\":return _context16.stop();}}},_callee16,this,[[0,9]]);}));function getCargosCatalogo(){return _getCargosCatalogo.apply(this,arguments);}return getCargosCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     Api retorna todos los bancos exitentes para el catalogo                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getBancosCatalogo\",value:function(){var _getBancosCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(){var params,data,result;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.prev=0;params={catalog_name:'BANCOS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context17.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context17.sent;return _context17.abrupt(\"return\",result.catalog);case 9:_context17.prev=9;_context17.t0=_context17[\"catch\"](0);case 11:return _context17.abrupt(\"return\",null);case 12:case\"end\":return _context17.stop();}}},_callee17,this,[[0,9]]);}));function getBancosCatalogo(){return _getBancosCatalogo.apply(this,arguments);}return getBancosCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getActividadEconomicaCatalogo\",value:function(){var _getActividadEconomicaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var params,data,result;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.prev=0;params={catalog_name:'ACTIVIDAD ECONOMICA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context18.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context18.sent;return _context18.abrupt(\"return\",result.catalog);case 9:_context18.prev=9;_context18.t0=_context18[\"catch\"](0);case 11:return _context18.abrupt(\"return\",null);case 12:case\"end\":return _context18.stop();}}},_callee18,this,[[0,9]]);}));function getActividadEconomicaCatalogo(){return _getActividadEconomicaCatalogo.apply(this,arguments);}return getActividadEconomicaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSubActividadEconomicaCatalogo\",value:function(){var _getSubActividadEconomicaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(codeActividad){var params,data,result;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.prev=0;params={catalog_name:'SUB ACTIVIDAD ECONOMICA',parent_catalog_name:codeActividad,keyword:\"\"};data=qs.stringify(params);_context19.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context19.sent;return _context19.abrupt(\"return\",result.catalog);case 9:_context19.prev=9;_context19.t0=_context19[\"catch\"](0);case 11:return _context19.abrupt(\"return\",null);case 12:case\"end\":return _context19.stop();}}},_callee19,this,[[0,9]]);}));function getSubActividadEconomicaCatalogo(_x14){return _getSubActividadEconomicaCatalogo.apply(this,arguments);}return getSubActividadEconomicaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO DE SECTOR ECONOMICO                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSectorEconomicoCatalogo\",value:function(){var _getSectorEconomicoCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var params,data,result;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.prev=0;params={catalog_name:'SECTOR ECONOMICO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context20.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context20.sent;return _context20.abrupt(\"return\",result.catalog);case 9:_context20.prev=9;_context20.t0=_context20[\"catch\"](0);case 11:return _context20.abrupt(\"return\",null);case 12:case\"end\":return _context20.stop();}}},_callee20,this,[[0,9]]);}));function getSectorEconomicoCatalogo(){return _getSectorEconomicoCatalogo.apply(this,arguments);}return getSectorEconomicoCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO RELACION                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getRelacionCatalogo\",value:function(){var _getRelacionCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var params,data,result;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.prev=0;params={catalog_name:'RELACION',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context21.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context21.sent;return _context21.abrupt(\"return\",result.catalog);case 9:_context21.prev=9;_context21.t0=_context21[\"catch\"](0);case 11:return _context21.abrupt(\"return\",null);case 12:case\"end\":return _context21.stop();}}},_callee21,this,[[0,9]]);}));function getRelacionCatalogo(){return _getRelacionCatalogo.apply(this,arguments);}return getRelacionCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO TIPO DE GARANTIA                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getTipoGarantiaCatalogo\",value:function(){var _getTipoGarantiaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){var params,data,result;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.prev=0;params={catalog_name:'TIPO DE GARANTIA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context22.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context22.sent;return _context22.abrupt(\"return\",result.catalog);case 9:_context22.prev=9;_context22.t0=_context22[\"catch\"](0);case 11:return _context22.abrupt(\"return\",null);case 12:case\"end\":return _context22.stop();}}},_callee22,this,[[0,9]]);}));function getTipoGarantiaCatalogo(){return _getTipoGarantiaCatalogo.apply(this,arguments);}return getTipoGarantiaCatalogo;}()/*\r\n    \"catalog\": {\r\n        \"type\": \"TIPO DE GARANTIA\",\r\n        \"records\": [\r\n            {\r\n                \"CODIGO\": \"100\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Mueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"200\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Inmueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"300\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en el Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"400\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en Otros Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"500\",\r\n                \"DESCRIPCION\": \"Garantia Prendaria\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"600\",\r\n                \"DESCRIPCION\": \"Otras Garantias\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"700\",\r\n                \"DESCRIPCION\": \"SIN GARANTIAS\"\r\n            }\r\n        ]\r\n    }\r\n    */ /* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO MONEDAS                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getMonedaCatalogo\",value:function(){var _getMonedaCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(){var params,data,result;return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.prev=0;params={catalog_name:'MONEDA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context23.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context23.sent;return _context23.abrupt(\"return\",result.catalog);case 9:_context23.prev=9;_context23.t0=_context23[\"catch\"](0);case 11:return _context23.abrupt(\"return\",null);case 12:case\"end\":return _context23.stop();}}},_callee23,this,[[0,9]]);}));function getMonedaCatalogo(){return _getMonedaCatalogo.apply(this,arguments);}return getMonedaCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                     CATALOGO SUCURSAL  o Agencias                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSucursalCatalogo\",value:function(){var _getSucursalCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){var params,data,result;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.prev=0;params={catalog_name:'SUCURSAL',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context24.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context24.sent;return _context24.abrupt(\"return\",result.catalog);case 9:_context24.prev=9;_context24.t0=_context24[\"catch\"](0);case 11:return _context24.abrupt(\"return\",null);case 12:case\"end\":return _context24.stop();}}},_callee24,this,[[0,9]]);}));function getSucursalCatalogo(){return _getSucursalCatalogo.apply(this,arguments);}return getSucursalCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                       Api para obtener todos los subproductos catalogo                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSubProductosCatalogo\",value:function(){var _getSubProductosCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(){var params,data,result;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.prev=0;// return json;\nparams={catalog_name:'SUBPRODUCTO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context25.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context25.sent;return _context25.abrupt(\"return\",result.catalog);case 9:_context25.prev=9;_context25.t0=_context25[\"catch\"](0);case 11:return _context25.abrupt(\"return\",null);case 12:case\"end\":return _context25.stop();}}},_callee25,this,[[0,9]]);}));function getSubProductosCatalogo(){return _getSubProductosCatalogo.apply(this,arguments);}return getSubProductosCatalogo;}()/* ---------------------------------------------------------------------------------------------- */ /*                       Api para obtener todos las sucursales o agencias catalogo                      */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getSucursalesCatalogo\",value:function(){var _getSucursalesCatalogo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){var params,data,result;return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.prev=0;// return json;\nparams={catalog_name:'SUCURSAL',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context26.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context26.sent;return _context26.abrupt(\"return\",result.catalog);case 9:_context26.prev=9;_context26.t0=_context26[\"catch\"](0);case 11:return _context26.abrupt(\"return\",null);case 12:case\"end\":return _context26.stop();}}},_callee26,this,[[0,9]]);}));function getSucursalesCatalogo(){return _getSucursalesCatalogo.apply(this,arguments);}return getSucursalesCatalogo;}()//CATALOGO - Tipo de Limites de Credito\n},{key:\"getTypeOfCreditLimitsCatalog\",value:function(){var _getTypeOfCreditLimitsCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(){var params,data,result;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.prev=0;// return json;\nparams={catalog_name:'LIMIT REFERENCE',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context27.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context27.sent;return _context27.abrupt(\"return\",result.catalog);case 9:_context27.prev=9;_context27.t0=_context27[\"catch\"](0);case 11:return _context27.abrupt(\"return\",null);case 12:case\"end\":return _context27.stop();}}},_callee27,this,[[0,9]]);}));function getTypeOfCreditLimitsCatalog(){return _getTypeOfCreditLimitsCatalog.apply(this,arguments);}return getTypeOfCreditLimitsCatalog;}()//CATALOGO - Aseguradoras\n},{key:\"getInsurersCatalog\",value:function(){var _getInsurersCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(){var params,data,result;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_context28.prev=0;// return json;\nparams={catalog_name:'ASEGURADORAS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context28.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context28.sent;return _context28.abrupt(\"return\",result.catalog);case 9:_context28.prev=9;_context28.t0=_context28[\"catch\"](0);case 11:return _context28.abrupt(\"return\",null);case 12:case\"end\":return _context28.stop();}}},_callee28,this,[[0,9]]);}));function getInsurersCatalog(){return _getInsurersCatalog.apply(this,arguments);}return getInsurersCatalog;}()//CATALOGO - Marcas de Auto\n},{key:\"getCarBrandCatalog\",value:function(){var _getCarBrandCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(){var params,data,result;return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.prev=0;// return json;\nparams={catalog_name:'MARCA DE AUTOS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context29.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context29.sent;return _context29.abrupt(\"return\",result.catalog);case 9:_context29.prev=9;_context29.t0=_context29[\"catch\"](0);case 11:return _context29.abrupt(\"return\",null);case 12:case\"end\":return _context29.stop();}}},_callee29,this,[[0,9]]);}));function getCarBrandCatalog(){return _getCarBrandCatalog.apply(this,arguments);}return getCarBrandCatalog;}()//CATALOGO - Modelos de Auto\n},{key:\"getCarModelCatalog\",value:function(){var _getCarModelCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee30(){var params,data,result;return _regeneratorRuntime.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.prev=0;// return json;\nparams={catalog_name:'MODELO DE AUTO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context30.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context30.sent;return _context30.abrupt(\"return\",result.catalog);case 9:_context30.prev=9;_context30.t0=_context30[\"catch\"](0);case 11:return _context30.abrupt(\"return\",null);case 12:case\"end\":return _context30.stop();}}},_callee30,this,[[0,9]]);}));function getCarModelCatalog(){return _getCarModelCatalog.apply(this,arguments);}return getCarModelCatalog;}()//CATALOGO - Corredoras\n},{key:\"getBrokersCatalog\",value:function(){var _getBrokersCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee31(){var params,data,result;return _regeneratorRuntime.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.prev=0;// return json;\nparams={catalog_name:'BROKER',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context31.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context31.sent;return _context31.abrupt(\"return\",result.catalog);case 9:_context31.prev=9;_context31.t0=_context31[\"catch\"](0);case 11:return _context31.abrupt(\"return\",null);case 12:case\"end\":return _context31.stop();}}},_callee31,this,[[0,9]]);}));function getBrokersCatalog(){return _getBrokersCatalog.apply(this,arguments);}return getBrokersCatalog;}()//CATALOGO - Fiduciaria\n},{key:\"getTrusteeCatalog\",value:function(){var _getTrusteeCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee32(){var params,data,result;return _regeneratorRuntime.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_context32.prev=0;// return json;\nparams={catalog_name:'FIDUCIARIAS',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context32.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context32.sent;return _context32.abrupt(\"return\",result.catalog);case 9:_context32.prev=9;_context32.t0=_context32[\"catch\"](0);case 11:return _context32.abrupt(\"return\",null);case 12:case\"end\":return _context32.stop();}}},_callee32,this,[[0,9]]);}));function getTrusteeCatalog(){return _getTrusteeCatalog.apply(this,arguments);}return getTrusteeCatalog;}()//CATALOGO - SubProducto\n},{key:\"getSubProductCatalog\",value:function(){var _getSubProductCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee33(){var params,data,result;return _regeneratorRuntime.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_context33.prev=0;// return json;\nparams={catalog_name:'SUBPRODUCTO',parent_catalog_name:\"3200\",keyword:\"\"};data=qs.stringify(params);_context33.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context33.sent;return _context33.abrupt(\"return\",result.catalog);case 9:_context33.prev=9;_context33.t0=_context33[\"catch\"](0);case 11:return _context33.abrupt(\"return\",null);case 12:case\"end\":return _context33.stop();}}},_callee33,this,[[0,9]]);}));function getSubProductCatalog(){return _getSubProductCatalog.apply(this,arguments);}return getSubProductCatalog;}()//CATALOGO - Categorias\n},{key:\"getCategoriesCatalog\",value:function(){var _getCategoriesCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee34(){var params,data,result;return _regeneratorRuntime.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_context34.prev=0;// return json;\nparams={catalog_name:'CATEGORIA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context34.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context34.sent;return _context34.abrupt(\"return\",result.catalog);case 9:_context34.prev=9;_context34.t0=_context34[\"catch\"](0);case 11:return _context34.abrupt(\"return\",null);case 12:case\"end\":return _context34.stop();}}},_callee34,this,[[0,9]]);}));function getCategoriesCatalog(){return _getCategoriesCatalog.apply(this,arguments);}return getCategoriesCatalog;}()//CATALOGO - Tipo de poliza\n},{key:\"getPolicyTypeCatalog\",value:function(){var _getPolicyTypeCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee35(){var params,data,result;return _regeneratorRuntime.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.prev=0;// return json;\nparams={catalog_name:'TIPO POLIZA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context35.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context35.sent;return _context35.abrupt(\"return\",result.catalog);case 9:_context35.prev=9;_context35.t0=_context35[\"catch\"](0);case 11:return _context35.abrupt(\"return\",null);case 12:case\"end\":return _context35.stop();}}},_callee35,this,[[0,9]]);}));function getPolicyTypeCatalog(){return _getPolicyTypeCatalog.apply(this,arguments);}return getPolicyTypeCatalog;}()//CATALOGO - Sub tipo de Garantia\n},{key:\"getSubTypeWarrantyCatalog\",value:function(){var _getSubTypeWarrantyCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee36(){var params,data,result;return _regeneratorRuntime.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:_context36.prev=0;// return json;\nparams={catalog_name:'SUB TIPO GARANTIA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context36.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context36.sent;return _context36.abrupt(\"return\",result.catalog);case 9:_context36.prev=9;_context36.t0=_context36[\"catch\"](0);case 11:return _context36.abrupt(\"return\",null);case 12:case\"end\":return _context36.stop();}}},_callee36,this,[[0,9]]);}));function getSubTypeWarrantyCatalog(){return _getSubTypeWarrantyCatalog.apply(this,arguments);}return getSubTypeWarrantyCatalog;}()//CATALOGO - Clases de Auto\n},{key:\"getAutoClassCatalog\",value:function(){var _getAutoClassCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee37(){var params,data,result;return _regeneratorRuntime.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_context37.prev=0;// return json;\nparams={catalog_name:'CLASE AUTO',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context37.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context37.sent;return _context37.abrupt(\"return\",result.catalog);case 9:_context37.prev=9;_context37.t0=_context37[\"catch\"](0);case 11:return _context37.abrupt(\"return\",null);case 12:case\"end\":return _context37.stop();}}},_callee37,this,[[0,9]]);}));function getAutoClassCatalog(){return _getAutoClassCatalog.apply(this,arguments);}return getAutoClassCatalog;}()//CATALOGO - Avaluadora\n},{key:\"getAppraiserCatalog\",value:function(){var _getAppraiserCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee38(){var params,data,result;return _regeneratorRuntime.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:_context38.prev=0;// return json;\nparams={catalog_name:'AVALUADORA',parent_catalog_name:\"\",keyword:\"\"};data=qs.stringify(params);_context38.next=5;return this.get(url.URL_CORE_CATALOGO+\"?\"+data);case 5:result=_context38.sent;return _context38.abrupt(\"return\",result.catalog);case 9:_context38.prev=9;_context38.t0=_context38[\"catch\"](0);case 11:return _context38.abrupt(\"return\",null);case 12:case\"end\":return _context38.stop();}}},_callee38,this,[[0,9]]);}));function getAppraiserCatalog(){return _getAppraiserCatalog.apply(this,arguments);}return getAppraiserCatalog;}()/*------------------------------------------------------------------------------------*/ ///v1/loans/details/informations\n//Retorna las facilidades de un cliente ... partyId -> numero del cliente en T24\n//getFacilidades\n},{key:\"getFacilities\",value:function(){var _getFacilities=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee39(partyId){var params,data,result,dataResult;return _regeneratorRuntime.wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:_context39.prev=0;if(!(partyId.length<=0)){_context39.next=3;break;}return _context39.abrupt(\"return\",undefined);case 3:params={PartyId:partyId};data=qs.stringify(params);_context39.next=7;return this.get(url.URL_CORE_FACILIDADES+\"?\"+data);case 7:result=_context39.sent;//return result.AcctLoans.AcctLoan;\ndataResult=[];try{//Armamos la data a mostrar en pantalla\nresult.AcctLoans.AcctLoan.map(function(item,i){try{dataResult.push({\"facilityType\":item.ProductDesc,\"approvedAmount\":item.AcctOpeningInfo.InitialAmt.Amt,\"approvedDate\":item.AcctOpeningInfo.OpenDt,\"actualBalance\":item.AcctBal[0].CurAmt.Amt,\"debtorName\":item.AcctMember[0].PartyName.ShortName});}catch(err){}});}catch(err){console.error(err);}console.log(\"getFacilities\",dataResult);return _context39.abrupt(\"return\",dataResult);case 14:_context39.prev=14;_context39.t0=_context39[\"catch\"](0);console.error(_context39.t0);case 17:return _context39.abrupt(\"return\",undefined);case 18:case\"end\":return _context39.stop();}}},_callee39,this,[[0,14]]);}));function getFacilities(_x15){return _getFacilities.apply(this,arguments);}return getFacilities;}()//retorna los Clientes Relacionados se le pasa el Numero de Cliente de T24\n},{key:\"getRelatedClients\",value:function(){var _getRelatedClients=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee40(partyId){var params,data,dataResult,resultData;return _regeneratorRuntime.wrap(function _callee40$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:if(!(partyId.length<=0)){_context40.next=2;break;}return _context40.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);dataResult=[];_context40.prev=5;_context40.next=8;return this.get(url.URL_CORE_COMPANIESRELATIONS+\"?\"+data);case 8:resultData=_context40.sent;//Armamos la data a mostrar en pantalla\nresultData.PartyPartyRels.PartyPartyRel.forEach(function(client){try{var partyNumber=client.PartyPartyRelInfo.PartyRef[0].RelPartyRef[0].PartyKey[0].PartyId;if(partyNumber!==undefined&&partyNumber!==null&&partyNumber.length>0){dataResult.push(partyNumber);}}catch(err){}});_context40.next=14;break;case 12:_context40.prev=12;_context40.t0=_context40[\"catch\"](5);case 14:return _context40.abrupt(\"return\",dataResult);case 15:case\"end\":return _context40.stop();}}},_callee40,this,[[5,12]]);}));function getRelatedClients(_x16){return _getRelatedClients.apply(this,arguments);}return getRelatedClients;}()//ExposicionCorporativa se le pasa el Numero de Cliente de T24\n},{key:\"getCorporateExhibition\",value:function(){var _getCorporateExhibition=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee41(partyId){var currencyData,dataResult,longTerm,shortTerm,totalTerm,pledged,netExposition,params,data,result,item,deudas,_params,_data;return _regeneratorRuntime.wrap(function _callee41$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:currencyData=new Currency();if(!(partyId.length<=0)){_context41.next=3;break;}return _context41.abrupt(\"return\",undefined);case 3:dataResult=[];longTerm={name:\"Facilidades Largo Plazo\",approved:0,balance:0,proposal:0,variation:0};shortTerm={name:\"Facilidades Corto Plazo\",approved:0,balance:0,proposal:0,variation:0};totalTerm={name:\"Total de Facilidades\",approved:0,balance:0,proposal:0,variation:0};pledged={name:\"Monto Pignorado\",approved:0,balance:0,proposal:0,variation:0};netExposition={name:\"Exposicion Neta\",approved:0,balance:0,proposal:0,variation:0};////// Credit - Cortos Plazos\n_context41.prev=9;params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \n//servicio retorna las cuentas del cliente\n_context41.next=14;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 14:result=_context41.sent;//var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\nif(Array.isArray(result.Party.PartyInfo.CreditLine)){result.Party.PartyInfo.CreditLine.forEach(function(item){try{/*\r\n                        {\r\n                    \"AvailableAmt\": {\r\n                        \"Amt\": \"75,000.00\"\r\n                    },\r\n                    \"CreditLineId\": \"800048231.0010000.01\",\r\n                    \"CreditLineNum\": \"01\",\r\n                    \"CreditType\": {\r\n                        \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                    },\r\n                    \"CurCode\": \"USD\",\r\n                    \"IntRateType\": {\r\n                        \"Desc\": \"Fixed\"\r\n                    },\r\n                    \"OnlineAmt\": {\r\n                        \"Amt\": \"125000.00\"\r\n                    },\r\n                    \"PendingAmt\": {\r\n                        \"Amt\": \"50,000.00\"\r\n                    },\r\n                    \"Rating\": \"01\",\r\n                    \"SecuredAmt\": {\r\n                        \"Amt\": \"0.00\"\r\n                    }\r\n                }\r\n                        */var deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=deudas.approved;longTerm.balance+=deudas.balance;}else{shortTerm.approved+=deudas.approved;shortTerm.balance+=deudas.balance;}}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=deudas.approved;longTerm.balance+=deudas.balance;}else{shortTerm.approved+=deudas.approved;shortTerm.balance+=deudas.balance;}}catch(err){}}_context41.next=20;break;case 18:_context41.prev=18;_context41.t0=_context41[\"catch\"](9);case 20:_context41.prev=20;_params={PartyId:partyId};_data=qs.stringify(_params);_context41.next=25;return this.get(url.URL_CORE_FACILIDADES+\"?\"+_data);case 25:result=_context41.sent;if(Array.isArray(result.AcctLoans.AcctLoan)){result.AcctLoans.AcctLoan.forEach(function(item){if(item.AcctKey!==null){try{/*\r\n                            {\r\n                    \"Category\": \"01\",\r\n                    \"Desc\": \"340000071156\",\r\n                    \"ProductDesc\": \"Prestamo Comercia\",\r\n                    \"AcctOpeningInfo\": {\r\n                        \"InitialAmt\": {\r\n                            \"Amt\": \"120000.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        },\r\n                        \"OpenDt\": \"2019-08-02\"\r\n                    },\r\n                    \"CreditAcctData\": {\r\n                        \"DueDt\": \"2028-07-05\",\r\n                        \"CreditAcctPmtInfo\": null\r\n                    },\r\n                    \"AcctKey\": {\r\n                        \"AcctId\": \"1020243542\"\r\n                    },\r\n                    \"AcctBal\": [\r\n                        {\r\n                            \"BalType\": \"Balance\",\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"87245.92\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"AcctMember\": [\r\n                        {\r\n                            \"PartyRole\": {\r\n                                \"Cod\": \"TITULAR/DEUDOR\"\r\n                            },\r\n                            \"PartyName\": {\r\n                                \"ShortName\": \"ASI DEVELOPMENT\"\r\n                            },\r\n                            \"PartyKey\": null\r\n                        }\r\n                    ]\r\n                }\r\n                            */var deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=deudas.approved;longTerm.balance+=deudas.balance;}else{shortTerm.approved+=deudas.approved;shortTerm.balance+=deudas.balance;}}catch(err){}}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;if(item.AcctKey!==null){try{deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approved-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){//deudas.debtype=\"long\";     \nlongTerm.approved+=deudas.approved;longTerm.balance+=deudas.balance;}else{shortTerm.approved+=deudas.approved;shortTerm.balance+=deudas.balance;}}catch(err){}}}_context41.next=31;break;case 29:_context41.prev=29;_context41.t1=_context41[\"catch\"](20);case 31:longTerm.variation=longTerm.approved-longTerm.balance;shortTerm.variation=shortTerm.approved-shortTerm.balance;dataResult.push(longTerm);dataResult.push(shortTerm);totalTerm.approved=shortTerm.approved+longTerm.approved;totalTerm.balance=shortTerm.balance+longTerm.balance;totalTerm.variation=totalTerm.approved-totalTerm.balance;dataResult.push(totalTerm);_context41.prev=39;_context41.next=42;return this.get(url.URL_CORE_PIGNORADO+\"?\"+data);case 42:result=_context41.sent;//Armamos la data a mostrar en pantalla\nresult.Collaterals.CollateralInfo.map(function(item,i){if(item.AcctKey.AcctReference!==null){pledged.approved+=Number(item.Collateral.CollateralAmt.Amt);pledged.balance+=0;}});pledged.variation=Number(pledged.approved-pledged.balance);dataResult.push(pledged);_context41.next=51;break;case 48:_context41.prev=48;_context41.t2=_context41[\"catch\"](39);console.error(\"URL_CORE_PIGNORADO\",_context41.t2);case 51:if(dataResult.length>0){netExposition.approved=totalTerm.approved-pledged.approved;netExposition.proposal=totalTerm.proposal-pledged.proposal;netExposition.variation=totalTerm.variation-pledged.variation;dataResult.push(netExposition);}console.error(\"getCoporateExhibition 123\",dataResult);return _context41.abrupt(\"return\",dataResult);case 54:case\"end\":return _context41.stop();}}},_callee41,this,[[9,18],[20,29],[39,48]]);}));function getCorporateExhibition(_x17){return _getCorporateExhibition.apply(this,arguments);}return getCorporateExhibition;}()//ExposicionCorporativa se le pasa el Numero de Cliente de T24\n},{key:\"getCorporateExhibitionByClients\",value:function(){var _getCorporateExhibitionByClients=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee42(partyId){var clients,dataResult,i,result;return _regeneratorRuntime.wrap(function _callee42$(_context42){while(1){switch(_context42.prev=_context42.next){case 0:if(!(partyId.length<=0)){_context42.next=2;break;}return _context42.abrupt(\"return\",undefined);case 2:_context42.next=4;return this.getRelatedClients(partyId);case 4:clients=_context42.sent;dataResult=[];i=0;case 7:if(!(i<clients.length)){_context42.next=15;break;}_context42.next=10;return this.getCorporateExhibition(clients[i]);case 10:result=_context42.sent;if(result!==null&&result.length>0){dataResult.push({clientId:\"Cliente: \"+clients[i],data:result});}case 12:i++;_context42.next=7;break;case 15:console.log(\"getCorporateExhibitionByClients\",dataResult);return _context42.abrupt(\"return\",dataResult);case 17:case\"end\":return _context42.stop();}}},_callee42,this);}));function getCorporateExhibitionByClients(_x18){return _getCorporateExhibitionByClients.apply(this,arguments);}return getCorporateExhibitionByClients;}()//Deudas a Corto y Largo Plazo --- APC, Credit, Loand\n},{key:\"getAllTermDebts\",value:function(){var _getAllTermDebts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee43(partyId,identification){var currencyData,dataResult,tmpidentification,params,_result,item,deudas,data,result,_params2,_data2;return _regeneratorRuntime.wrap(function _callee43$(_context43){while(1){switch(_context43.prev=_context43.next){case 0:currencyData=new Currency();if(!(partyId.length<=0)){_context43.next=3;break;}return _context43.abrupt(\"return\",undefined);case 3:if(!(identification.length<=0)){_context43.next=5;break;}return _context43.abrupt(\"return\",undefined);case 5:dataResult={longTermresult:[],shortTermresult:[]};////// APC\n_context43.prev=6;tmpidentification=\"\";identification.split('-').map(function(str){if(str.startsWith(\"0\")){tmpidentification+=str.replace(/^0+/,'')+\"-\";}else{tmpidentification+=str+\"-\";}});identification=tmpidentification.substring(0,tmpidentification.length-1);params={\"ConsultarAPC\":{\"Model\":{\"EsPrueba\":0,\"ForzarBusqueda\":0,\"IdentificacionConsulta\":identification,//\"8-773-1899\",\n\"PasswordAPC\":\"Banesco19.\",\"UltimusProcess\":7,\"UsuarioAPC\":\"WTIBANESCO001\"}}};//servicio retorna la info de APC del cliente\n_context43.next=13;return this.post(url.URL_CORE_APCINFO,params);case 13:_result=_context43.sent;if(Array.isArray(_result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)){// myVatToTest is an array\n//Armamos la data a mostrar en pantalla\n_result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function(item,i){try{var deudas={debtype:\"short\",facilityType:item.dc_descr_corta_rela,bank:item.dc_nom_asoc,balance:Number(currencyData.getRealValue(item.dc_saldo_actual)),approvedAmount:Number(currencyData.getRealValue(item.dc_monto_original)),variation:0,startDate:item.dc_fec_inicio_rel,endDate:item.dc_fec_fin_rel};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");//dataResult.push(deudas);\n}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=_result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{deudas={debtype:\"short\",facilityType:item.dc_descr_corta_rela,bank:item.dc_nom_asoc,balance:Number(currencyData.getRealValue(item.dc_saldo_actual)),approvedAmount:Number(currencyData.getRealValue(item.dc_monto_original)),variation:0,startDate:item.dc_fec_inicio_rel,endDate:item.dc_fec_fin_rel};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");//dataResult.push(deudas);\n}catch(err){}}_context43.next=19;break;case 17:_context43.prev=17;_context43.t0=_context43[\"catch\"](6);case 19:_context43.prev=19;params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \n//servicio retorna las cuentas del cliente\n_context43.next=24;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 24:result=_context43.sent;//var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\nif(Array.isArray(result.Party.PartyInfo.CreditLine)){result.Party.PartyInfo.CreditLine.forEach(function(item){try{/*\r\n                        {\r\n                    \"AvailableAmt\": {\r\n                        \"Amt\": \"75,000.00\"\r\n                    },\r\n                    \"CreditLineId\": \"800048231.0010000.01\",\r\n                    \"CreditLineNum\": \"01\",\r\n                    \"CreditType\": {\r\n                        \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                    },\r\n                    \"CurCode\": \"USD\",\r\n                    \"IntRateType\": {\r\n                        \"Desc\": \"Fixed\"\r\n                    },\r\n                    \"OnlineAmt\": {\r\n                        \"Amt\": \"125000.00\"\r\n                    },\r\n                    \"PendingAmt\": {\r\n                        \"Amt\": \"50,000.00\"\r\n                    },\r\n                    \"Rating\": \"01\",\r\n                    \"SecuredAmt\": {\r\n                        \"Amt\": \"0.00\"\r\n                    }\r\n                }\r\n                        */var deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}catch(err){}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{deudas={debtype:\"short\",facilityType:item.CreditType.Desc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")};//deudas.variation=deudas.approvedAmount - deudas.balance;\nif(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}catch(err){}}_context43.next=30;break;case 28:_context43.prev=28;_context43.t1=_context43[\"catch\"](19);case 30:_context43.prev=30;_params2={PartyId:partyId};_data2=qs.stringify(_params2);_context43.next=35;return this.get(url.URL_CORE_FACILIDADES+\"?\"+_data2);case 35:result=_context43.sent;if(Array.isArray(result.AcctLoans.AcctLoan)){result.AcctLoans.AcctLoan.forEach(function(item){if(item.AcctKey!==null){try{/*\r\n                            {\r\n                    \"Category\": \"01\",\r\n                    \"Desc\": \"340000071156\",\r\n                    \"ProductDesc\": \"Prestamo Comercia\",\r\n                    \"AcctOpeningInfo\": {\r\n                        \"InitialAmt\": {\r\n                            \"Amt\": \"120000.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        },\r\n                        \"OpenDt\": \"2019-08-02\"\r\n                    },\r\n                    \"CreditAcctData\": {\r\n                        \"DueDt\": \"2028-07-05\",\r\n                        \"CreditAcctPmtInfo\": null\r\n                    },\r\n                    \"AcctKey\": {\r\n                        \"AcctId\": \"1020243542\"\r\n                    },\r\n                    \"AcctBal\": [\r\n                        {\r\n                            \"BalType\": \"Balance\",\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"87245.92\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"AcctMember\": [\r\n                        {\r\n                            \"PartyRole\": {\r\n                                \"Cod\": \"TITULAR/DEUDOR\"\r\n                            },\r\n                            \"PartyName\": {\r\n                                \"ShortName\": \"ASI DEVELOPMENT\"\r\n                            },\r\n                            \"PartyKey\": null\r\n                        }\r\n                    ]\r\n                }\r\n                            */var deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}catch(err){}}});}else{// myVarToTest is not an array\n//Armamos la data a mostrar en pantalla\nitem=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;if(item.AcctKey!==null){try{deudas={debtype:\"short\",facilityType:item.ProductDesc,bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")};deudas.variation=deudas.approvedAmount-deudas.balance;if(moment(deudas.endDate).diff(deudas.startDate,'years')>1){deudas.debtype=\"long\";dataResult.longTermresult.push(deudas);}else{dataResult.shortTermresult.push(deudas);}deudas.endDate=moment(deudas.endDate).format(\"YYYY-MM-DD\");deudas.startDate=moment(deudas.startDate).format(\"YYYY-MM-DD\");}catch(err){}}}_context43.next=41;break;case 39:_context43.prev=39;_context43.t2=_context43[\"catch\"](30);case 41:console.log(\"getShortLongTermDebts2\",dataResult);return _context43.abrupt(\"return\",dataResult);case 43:case\"end\":return _context43.stop();}}},_callee43,this,[[6,17],[19,28],[30,39]]);}));function getAllTermDebts(_x19,_x20){return _getAllTermDebts.apply(this,arguments);}return getAllTermDebts;}()/* ---------------------------------------------------------------------------------------------- */ /*                                 Retorna los balances por meses                                 */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getAverages\",value:function(){var _getAverages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee44(AcctReference){var params,data,result;return _regeneratorRuntime.wrap(function _callee44$(_context44){while(1){switch(_context44.prev=_context44.next){case 0:if(!(AcctReference.length<=0)){_context44.next=2;break;}return _context44.abrupt(\"return\",undefined);case 2:params={AcctReference:AcctReference};data=qs.stringify(params);_context44.next=6;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 6:result=_context44.sent;return _context44.abrupt(\"return\",result);case 8:case\"end\":return _context44.stop();}}},_callee44,this);}));function getAverages(_x21){return _getAverages.apply(this,arguments);}return getAverages;}()/* ---------------------------------------------------------------------------------------------- */ /*                     Obtenemos una lista de las importaciones que se generen                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getListaImportaciones\",value:function(){var _getListaImportaciones=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee45(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee45$(_context45){while(1){switch(_context45.prev=_context45.next){case 0:if(!(PartyId.length<=0)){_context45.next=2;break;}return _context45.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context45.next=6;return this.get(url.URL_CORE_IMPORTACIONES+\"?\"+data);case 6:result=_context45.sent;return _context45.abrupt(\"return\",result);case 8:case\"end\":return _context45.stop();}}},_callee45,this);}));function getListaImportaciones(_x22){return _getListaImportaciones.apply(this,arguments);}return getListaImportaciones;}()/* ---------------------------------------------------------------------------------------------- */ /*                 Obtenemos una lista de las exportaciones que se hayan generado                 */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getListaExportaciones\",value:function(){var _getListaExportaciones=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee46(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee46$(_context46){while(1){switch(_context46.prev=_context46.next){case 0:if(!(PartyId.length<=0)){_context46.next=2;break;}return _context46.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context46.next=6;return this.get(url.URL_CORE_EXPORTACIONES+\"?\"+data);case 6:result=_context46.sent;return _context46.abrupt(\"return\",result);case 8:case\"end\":return _context46.stop();}}},_callee46,this);}));function getListaExportaciones(_x23){return _getListaExportaciones.apply(this,arguments);}return getListaExportaciones;}()/* ---------------------------------------------------------------------------------------------- */ /*                          Obtenemos los prestamos entrantes existentes                          */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamosEntrantes\",value:function(){var _getPrestamosEntrantes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee47(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee47$(_context47){while(1){switch(_context47.prev=_context47.next){case 0:if(!(PartyId.length<=0)){_context47.next=2;break;}return _context47.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context47.next=6;return this.get(url.URL_CORE_INGOING+\"?\"+data);case 6:result=_context47.sent;return _context47.abrupt(\"return\",result);case 8:case\"end\":return _context47.stop();}}},_callee47,this);}));function getPrestamosEntrantes(_x24){return _getPrestamosEntrantes.apply(this,arguments);}return getPrestamosEntrantes;}()/* ---------------------------------------------------------------------------------------------- */ /*                    Obtenemos una lista de todos los presstamos que ya salen                    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamosSalientes\",value:function(){var _getPrestamosSalientes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee48(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee48$(_context48){while(1){switch(_context48.prev=_context48.next){case 0:if(!(PartyId.length<=0)){_context48.next=2;break;}return _context48.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context48.next=6;return this.get(url.URL_CORE_OUTOGOING+\"?\"+data);case 6:result=_context48.sent;return _context48.abrupt(\"return\",result);case 8:case\"end\":return _context48.stop();}}},_callee48,this);}));function getPrestamosSalientes(_x25){return _getPrestamosSalientes.apply(this,arguments);}return getPrestamosSalientes;}()/* ---------------------------------------------------------------------------------------------- */ /*               Obtenemos la lista de creditos que existen en la actualidad activos              */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCreditosExistentes\",value:function(){var _getCreditosExistentes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee49(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee49$(_context49){while(1){switch(_context49.prev=_context49.next){case 0:if(!(PartyId.length<=0)){_context49.next=2;break;}return _context49.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context49.next=6;return this.get(url.URL_CORE_CREDITOS+\"?\"+data);case 6:result=_context49.sent;return _context49.abrupt(\"return\",result);case 8:case\"end\":return _context49.stop();}}},_callee49,this);}));function getCreditosExistentes(_x26){return _getCreditosExistentes.apply(this,arguments);}return getCreditosExistentes;}()/* ---------------------------------------------------------------------------------------------- */ /*                                        Creditos en linea                                       */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getCreditosLine\",value:function(){var _getCreditosLine=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee50(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee50$(_context50){while(1){switch(_context50.prev=_context50.next){case 0:if(!(PartyId.length<=0)){_context50.next=2;break;}return _context50.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context50.next=6;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 6:result=_context50.sent;return _context50.abrupt(\"return\",result);case 8:case\"end\":return _context50.stop();}}},_callee50,this);}));function getCreditosLine(_x27){return _getCreditosLine.apply(this,arguments);}return getCreditosLine;}()/* ---------------------------------------------------------------------------------------------- */ /*     Nos devuelve todas las transacciones que ha realizado el usuario por un rango de fechas    */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getTransactions\",value:function(){var _getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee51(AcctId,EndDt,StartDt){var params,data,result;return _regeneratorRuntime.wrap(function _callee51$(_context51){while(1){switch(_context51.prev=_context51.next){case 0:if(!(AcctId.length<=0||EndDt.length<=0||StartDt.length<=0)){_context51.next=2;break;}return _context51.abrupt(\"return\",undefined);case 2:// ejemplo del dataField\n// AcctId=1001553287&EndDt=2021-10-16T09:32:51&StartDt=2021-09-16T00:00:00\nparams={AcctId:AcctId,EndDt:EndDt,StartDt:StartDt};data=qs.stringify(params);_context51.next=6;return this.get(url.URL_CORE_TRANSACCTIONS+\"?\"+data);case 6:result=_context51.sent;return _context51.abrupt(\"return\",result);case 8:case\"end\":return _context51.stop();}}},_callee51,this);}));function getTransactions(_x28,_x29,_x30){return _getTransactions.apply(this,arguments);}return getTransactions;}()/* ---------------------------------------------------------------------------------------------- */ /*                                  Obtenemos todos los prestamos                                 */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamos\",value:function(){var _getPrestamos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee52(PartyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee52$(_context52){while(1){switch(_context52.prev=_context52.next){case 0:if(!(PartyId.length<=0)){_context52.next=2;break;}return _context52.abrupt(\"return\",undefined);case 2:params={PartyId:PartyId};data=qs.stringify(params);_context52.next=6;return this.get(url.URL_CORE_PRESTAMOS+\"?\"+data);case 6:result=_context52.sent;return _context52.abrupt(\"return\",result);case 8:case\"end\":return _context52.stop();}}},_callee52,this);}));function getPrestamos(_x31){return _getPrestamos.apply(this,arguments);}return getPrestamos;}()/* ---------------------------------------------------------------------------------------------- */ /*               Obtenemos toda la informacion del prestamos dentro de una actividad              */ /* ---------------------------------------------------------------------------------------------- */},{key:\"getPrestamosInfo\",value:function(){var _getPrestamosInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee53(AcctId){var params,data,result;return _regeneratorRuntime.wrap(function _callee53$(_context53){while(1){switch(_context53.prev=_context53.next){case 0:if(!(AcctId.length<=0)){_context53.next=2;break;}return _context53.abrupt(\"return\",undefined);case 2:params={AcctId:AcctId};data=qs.stringify(params);if(!(AcctId.length>0)){_context53.next=9;break;}_context53.next=7;return this.get(url.URL_CORE_PRESTAMOS_INFORMATION+\"?\"+data);case 7:result=_context53.sent;return _context53.abrupt(\"return\",result);case 9:return _context53.abrupt(\"return\",null);case 10:case\"end\":return _context53.stop();}}},_callee53,this);}));function getPrestamosInfo(_x32){return _getPrestamosInfo.apply(this,arguments);}return getPrestamosInfo;}()/* ---------------------------------------------------------------------------------------------- */ /*               Obtenemos toda la informacion del Reporting Services                            */ /* ---------------------------------------------------------------------------------------------- */ //https://qa.api.ob.banesco.com.pa/APIUtil/v1/reports/atoms?FECHA=20210930&CLIENTE=600167424\n},{key:\"getReportingServices\",value:function(){var _getReportingServices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee54(partyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee54$(_context54){while(1){switch(_context54.prev=_context54.next){case 0:if(!(partyId.length<=0)){_context54.next=2;break;}return _context54.abrupt(\"return\",undefined);case 2:params={FECHA:moment().add(-2,'months').format(\"YYYYMMDD\"),//preguntar pq la fecha no se puede cambiar\nCLIENTE:partyId};data=qs.stringify(params);_context54.next=6;return this.get(url.URL_CORE_REPORTINGSERVICES+\"?\"+data);case 6:result=_context54.sent;console.log(\"getReportingServices\",result);return _context54.abrupt(\"return\",result);case 9:case\"end\":return _context54.stop();}}},_callee54,this);}));function getReportingServices(_x33){return _getReportingServices.apply(this,arguments);}return getReportingServices;}()//Retorna todos los colateralsId por numero de cliente\n},{key:\"getColaterals\",value:function(){var _getColaterals=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee55(partyId){var params,data,dataResult,result;return _regeneratorRuntime.wrap(function _callee55$(_context55){while(1){switch(_context55.prev=_context55.next){case 0:if(!(partyId.length<=0)){_context55.next=2;break;}return _context55.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);dataResult=[];_context55.prev=5;console.log(\"plage\");//servicio retorna Pignorados\n_context55.next=9;return this.get(url.URL_CORE_PIGNORADO+\"?\"+data);case 9:result=_context55.sent;//Armamos la data a mostrar en pantalla\nresult.Collaterals.CollateralInfo.map(function(item,i){if(item.Collateral.CollateralKey.CollateralId!==null){dataResult.push({collateralId:item.Collateral.CollateralKey.CollateralId,facilityAmt:item.Collateral.CollateralAmt.Amt});}});_context55.next=16;break;case 13:_context55.prev=13;_context55.t0=_context55[\"catch\"](5);console.error(\"URL_CORE_PIGNORADO\",_context55.t0);case 16:console.log(\"dataResult\",dataResult);return _context55.abrupt(\"return\",dataResult);case 18:case\"end\":return _context55.stop();}}},_callee55,this,[[5,13]]);}));function getColaterals(_x34){return _getColaterals.apply(this,arguments);}return getColaterals;}()// retorna Detalle de Garantias\n},{key:\"getWarrantyDetails\",value:function(){var _getWarrantyDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee56(collateralId,warrantyType){var params,data,result;return _regeneratorRuntime.wrap(function _callee56$(_context56){while(1){switch(_context56.prev=_context56.next){case 0:if(!(collateralId.length<=0||warrantyType.length<=0)){_context56.next=2;break;}return _context56.abrupt(\"return\",undefined);case 2:params={CollateralId:collateralId,InqType:warrantyType};data=qs.stringify(params);_context56.prev=4;_context56.next=7;return this.get(url.URL_CORE_COLLATERALS+\"?\"+data);case 7:result=_context56.sent;return _context56.abrupt(\"return\",result);case 11:_context56.prev=11;_context56.t0=_context56[\"catch\"](4);console.error(\"URL_CORE_PIGNORADO\",_context56.t0);return _context56.abrupt(\"return\",undefined);case 15:case\"end\":return _context56.stop();}}},_callee56,this,[[4,11]]);}));function getWarrantyDetails(_x35,_x36){return _getWarrantyDetails.apply(this,arguments);}return getWarrantyDetails;}()//retorna movimientos de cuentas\n},{key:\"getAccountMovements\",value:function(){var _getAccountMovements=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee57(partyId){var params,data,result,dataResult,i,item,year,dtResult,dt,_iterator,_step,accItem,dtr,p,dtYear,currentYear,deposits,_iterator2,_step2,record,monthName,dataByMonth;return _regeneratorRuntime.wrap(function _callee57$(_context57){while(1){switch(_context57.prev=_context57.next){case 0:if(!(partyId.length<=0)){_context57.next=2;break;}return _context57.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context57.next=6;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 6:result=_context57.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context57.next=10;break;}throw new Error(result.Status.StatusCode+\" - \"+result.Status.StatusDesc);case 10:dataResult=[];i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context57.next=29;break;}item=result.Accounts.Acct[i];params={AcctReference:item.AcctKey.AcctReference};data=qs.stringify(params);_context57.prev=16;year=0;_context57.next=20;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 20:dtResult=_context57.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \ndt={AcctId:item.AcctKey.AcctId,dataByYear:[]};_iterator=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator.s();!(_step=_iterator.n()).done;){accItem=_step.value;if(year!==Number(accItem.AverageBalanceDt.split(' ')[1])){year=Number(accItem.AverageBalanceDt.split(' ')[1]);dt.dataByYear.push({year:year,dataresult:[]});}dtr={\"year\":Number(accItem.AverageBalanceDt.split(' ')[1]),\"month\":accItem.AverageBalanceDt.split(' ')[0],\"amount\":accItem.CurAmt.Amt,\"deposits\":0};dt.dataByYear[dt.dataByYear.length-1].dataresult.push(dtr);}/*dtResult.Acct.AcctBal.map(function (accItem, i) {  \r\n                        if(year !== Number(accItem.AverageBalanceDt.split(' ')[1])){\r\n                            year = Number(accItem.AverageBalanceDt.split(' ')[1]);\r\n                            dt.dataByYear.push({year,dataresult:[]})\r\n                        }                                                \r\n                        dt.dataByYear[dt.dataByYear.length-1].dataresult.push({\r\n                            \"year\": Number(accItem.AverageBalanceDt.split(' ')[1]), \r\n                            \"month\": accItem.AverageBalanceDt.split(' ')[0],\r\n                            \"amount\": accItem.CurAmt.Amt\r\n                        }); \r\n                    }) */}catch(err){_iterator.e(err);}finally{_iterator.f();}dataResult.push(dt);}_context57.next=26;break;case 24:_context57.prev=24;_context57.t0=_context57[\"catch\"](16);case 26:i++;_context57.next=12;break;case 29:_context57.prev=29;i=0;case 31:if(!(i<dataResult.length)){_context57.next=56;break;}dtResult=dataResult[i];p=0;case 34:if(!(p<dtResult.dataByYear.length)){_context57.next=53;break;}dtYear=dtResult.dataByYear[p];currentYear=dtYear.year;params=null;//dtResult.AcctId\nif(currentYear===Number(moment().format(\"YYYY\"))){params={CUENTA:dtResult.AcctId,FECHA_INI:currentYear+\"0101\",FECHA_FIN:moment().format(\"YYYYMMDD\"),PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\n}else{params={CUENTA:dtResult.AcctId,FECHA_INI:currentYear+\"0101\",FECHA_FIN:currentYear+\"1231\",PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\n}data=qs.stringify(params);_context57.prev=40;_context57.next=43;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 43:deposits=_context57.sent;_iterator2=_createForOfIteratorHelper(deposits.records);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){record=_step2.value;console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));monthName=GetMontNameByNumber(record.Fecha.toString().substring(4,6));dataByMonth=dtYear.dataresult.find(function(x){return x.month.indexOf(monthName)>=0;});if(dataByMonth!==undefined){dataByMonth.deposits=Number(record.monto).toFixed(2);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_context57.next=50;break;case 48:_context57.prev=48;_context57.t1=_context57[\"catch\"](40);case 50:++p;_context57.next=34;break;case 53:++i;_context57.next=31;break;case 56:_context57.next=60;break;case 58:_context57.prev=58;_context57.t2=_context57[\"catch\"](29);case 60:return _context57.abrupt(\"return\",dataResult);case 61:case\"end\":return _context57.stop();}}},_callee57,this,[[16,24],[29,58],[40,48]]);}));function getAccountMovements(_x37){return _getAccountMovements.apply(this,arguments);}return getAccountMovements;}()},{key:\"getAccountDeposits\",value:function(){var _getAccountDeposits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee58(partyId,year,month){var params,data,result,dataResult,i,item,endDate,deposits,_iterator3,_step3,depo;return _regeneratorRuntime.wrap(function _callee58$(_context58){while(1){switch(_context58.prev=_context58.next){case 0:if(!(partyId.length<=0)){_context58.next=2;break;}return _context58.abrupt(\"return\",undefined);case 2:params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context58.next=6;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 6:result=_context58.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context58.next=10;break;}throw new Error(result.Status.StatusCode+\" - \"+result.Status.StatusDesc);case 10:dataResult=[];i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context58.next=37;break;}item=result.Accounts.Acct[i];_context58.prev=14;year=Number(year).toString(\"00\");month=Number(month).toString(\"00\");endDate=moment(year+\"-\"+month+\"-01\").endOf('month').format('DD');params={AcctId:item.AcctKey.AcctId,EndDt:year+\"-\"+month+\"-\"+endDate+\"T23:59:59\",StartDt:year+\"-\"+month+\"-01T00:00:00\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context58.prev=20;_context58.next=23;return this.get(url.URL_CORE_TRANSACCTIONS+\"?\"+data);case 23:deposits=_context58.sent;_iterator3=_createForOfIteratorHelper(deposits.Trn);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){depo=_step3.value;if(depo.Desc.indexOf(\"CREDITO A CONTRATO\")<0&&depo.Desc.indexOf(\"Intereses - Capitalizables\")<0){dataResult.push({deposits:Number(depo.TotalCurAmt.Amt)});}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_context58.next=30;break;case 28:_context58.prev=28;_context58.t0=_context58[\"catch\"](20);case 30:_context58.next=34;break;case 32:_context58.prev=32;_context58.t1=_context58[\"catch\"](14);case 34:i++;_context58.next=12;break;case 37:return _context58.abrupt(\"return\",dataResult);case 38:case\"end\":return _context58.stop();}}},_callee58,this,[[14,32],[20,28]]);}));function getAccountDeposits(_x38,_x39,_x40){return _getAccountDeposits.apply(this,arguments);}return getAccountDeposits;}()//retorna movimientos de cuentas\n},{key:\"getApcInfo\",value:function(){var _getApcInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee59(identification){var tmpidentification,params,result,dataResult,item;return _regeneratorRuntime.wrap(function _callee59$(_context59){while(1){switch(_context59.prev=_context59.next){case 0:if(!(identification.length<=0)){_context59.next=2;break;}return _context59.abrupt(\"return\",undefined);case 2:tmpidentification=\"\";identification.split('-').map(function(str){if(str.startsWith(\"0\")){tmpidentification+=str.replace(/^0+/,'')+\"-\";}else{tmpidentification+=str+\"-\";}});identification=tmpidentification.substring(0,tmpidentification.length-1);params={\"ConsultarAPC\":{\"Model\":{\"EsPrueba\":0,\"ForzarBusqueda\":0,\"IdentificacionConsulta\":identification,//\"8-773-1899\",\n\"PasswordAPC\":\"Banesco19.\",\"UltimusProcess\":7,\"UsuarioAPC\":\"WTIBANESCO001\"}}};//servicio retorna la info de APC del cliente\n_context59.next=8;return this.post(url.URL_CORE_APCINFO,params);case 8:result=_context59.sent;dataResult=[];try{if(Array.isArray(result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)){//Armamos la data a mostrar en pantalla\nresult.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function(item,i){try{dataResult.push({\"year\":moment(item.dc_fec_inicio_rel).format(\"YYYY\"),\"month\":moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\"initialAmount\":item.dc_monto_original,\"actualAmount\":item.dc_saldo_actual,\"asociation\":item.dc_nom_asoc,\"source\":item.dc_descr_corta_rela});}catch(err){}});}else{item=result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;try{dataResult.push({\"year\":moment(item.dc_fec_inicio_rel).format(\"YYYY\"),\"month\":moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\"initialAmount\":item.dc_monto_original,\"actualAmount\":item.dc_saldo_actual,\"asociation\":item.dc_nom_asoc,\"source\":item.dc_descr_corta_rela});}catch(err){}}}catch(err){console.error(err);}return _context59.abrupt(\"return\",dataResult);case 12:case\"end\":return _context59.stop();}}},_callee59,this);}));function getApcInfo(_x41){return _getApcInfo.apply(this,arguments);}return getApcInfo;}()},{key:\"getEconomicGroup\",value:function(){var _getEconomicGroup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee60(partyId){var params,data,result;return _regeneratorRuntime.wrap(function _callee60$(_context60){while(1){switch(_context60.prev=_context60.next){case 0:_context60.prev=0;params={PartyId:partyId};data=qs.stringify(params);_context60.next=5;return this.get(url.URL_CORE_COMPANIESRELATIONS+\"?\"+data);case 5:result=_context60.sent;console.log(\"getEconomicGroup\",result);return _context60.abrupt(\"return\",result.PartyPartyRels.PartyPartyRel[0].PartyPartyRelInfo.PartyRelName[0]);case 10:_context60.prev=10;_context60.t0=_context60[\"catch\"](0);case 12:if(!(partyId.length<=0)){_context60.next=14;break;}return _context60.abrupt(\"return\",undefined);case 14:return _context60.abrupt(\"return\",null);case 15:case\"end\":return _context60.stop();}}},_callee60,this,[[0,10]]);}));function getEconomicGroup(_x42){return _getEconomicGroup.apply(this,arguments);}return getEconomicGroup;}()},{key:\"getReciprocity\",value:function(){var _getReciprocity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee61(partyId,year,month){var params,data,result,resultToReturn,i,item,dtResult,_iterator4,_step4,accItem,dMonth,currentYear,monthNum,endDate,deposits,_iterator5,_step5,record;return _regeneratorRuntime.wrap(function _callee61$(_context61){while(1){switch(_context61.prev=_context61.next){case 0:if(!(partyId.length<=0)){_context61.next=2;break;}return _context61.abrupt(\"return\",undefined);case 2:year=Number(year);params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context61.next=7;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 7:result=_context61.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context61.next=10;break;}return _context61.abrupt(\"return\",undefined);case 10:resultToReturn={averageAmt:0,deposits:0};i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context61.next=49;break;}item=result.Accounts.Acct[i];params={AcctReference:item.AcctKey.AcctReference};data=qs.stringify(params);_context61.prev=16;_context61.next=19;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 19:dtResult=_context61.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \n_iterator4=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){accItem=_step4.value;dMonth=accItem.AverageBalanceDt.split(' ')[0];if(Number(accItem.AverageBalanceDt.split(' ')[1])===year&&dMonth.indexOf(month)>=0){resultToReturn.averageAmt=(Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}_context61.next=25;break;case 23:_context61.prev=23;_context61.t0=_context61[\"catch\"](16);case 25:_context61.prev=25;currentYear=year;monthNum=GetMontNumberByName(month);endDate=moment(year+\"-\"+monthNum+\"-01\").endOf('month').format('DD');params=null;//dtResult.AcctId\nparams={CUENTA:item.AcctKey.AcctId,FECHA_INI:currentYear+monthNum+\"01\",FECHA_FIN:currentYear+monthNum+endDate,PROMEDIO:\"S\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context61.prev=32;_context61.next=35;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 35:deposits=_context61.sent;_iterator5=_createForOfIteratorHelper(deposits.records);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){record=_step5.value;//console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\n//var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\n//var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\n//if(dataByMonth!==undefined){                        \nresultToReturn.deposits=(Number(resultToReturn.deposits)+Number(record.monto)).toFixed(2);//  }                    \n}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_context61.next=42;break;case 40:_context61.prev=40;_context61.t1=_context61[\"catch\"](32);case 42:_context61.next=46;break;case 44:_context61.prev=44;_context61.t2=_context61[\"catch\"](25);case 46:i++;_context61.next=12;break;case 49:return _context61.abrupt(\"return\",resultToReturn);case 50:case\"end\":return _context61.stop();}}},_callee61,this,[[16,23],[25,44],[32,40]]);}));function getReciprocity(_x43,_x44,_x45){return _getReciprocity.apply(this,arguments);}return getReciprocity;}()},{key:\"getReciprocityByYear\",value:function(){var _getReciprocityByYear=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee62(partyId,year){var params,data,result,resultToReturn,i,item,dtResult,_iterator6,_step6,accItem,dMonth,monthN,endDate,deposits,_iterator7,_step7,depo;return _regeneratorRuntime.wrap(function _callee62$(_context62){while(1){switch(_context62.prev=_context62.next){case 0:if(!(partyId.length<=0)){_context62.next=2;break;}return _context62.abrupt(\"return\",undefined);case 2:year=Number(year);params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context62.next=7;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 7:result=_context62.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context62.next=10;break;}return _context62.abrupt(\"return\",undefined);case 10:console.log(\"getReciprocityByYear\",result);resultToReturn={averageAmt:0,deposits:0};i=0;case 13:if(!(i<result.Accounts.Acct.length)){_context62.next=46;break;}item=result.Accounts.Acct[i];params={AcctReference:item.AcctKey.AcctReference};data=qs.stringify(params);_context62.prev=17;_context62.next=20;return this.get(url.URL_CORE_AVERAGES+\"?\"+data);case 20:dtResult=_context62.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \n_iterator6=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){accItem=_step6.value;dMonth=accItem.AverageBalanceDt.split(' ')[0];if(Number(accItem.AverageBalanceDt.split(' ')[1])===year){resultToReturn.averageAmt=(Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}_context62.next=26;break;case 24:_context62.prev=24;_context62.t0=_context62[\"catch\"](17);case 26:_context62.prev=26;/*\r\n            //var monthN=GetMontNumberByName(month);\r\n            var endDate = moment(year+\"-12-01\").endOf('month').format('DD');\r\n            params = { AcctId: item.AcctKey.AcctId, EndDt:year+\"-12-\"+endDate+\"T23:59:59\", StartDt:year+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n            data = qs.stringify(params);\r\n            var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data); \r\n            console.log(\"getReciprocityByYear\",deposits);\r\n            for (var depo of deposits.Trn) {\r\n                if(depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0){\r\n                    resultToReturn.deposits= (Number(resultToReturn.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);                                   \r\n                }                    \r\n            }\r\n            */console.log(\"getReciprocityByYear\",\"params\");monthN=moment().forma(\"MM\");endDate=moment(year+monthN+\"01\").endOf('month').format('DD');params={CUENTA:item.AcctKey.AcctId,FECHA_INI:year+\"0101\",FECHA_FIN:year+monthN+endDate};data=qs.stringify(params);console.log(\"getReciprocityByYear\",params);_context62.next=35;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 35:deposits=_context62.sent;console.log(\"getReciprocityByYear\",deposits);_iterator7=_createForOfIteratorHelper(deposits.Trn);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){depo=_step7.value;resultToReturn.deposits=(Number(resultToReturn.deposits)+Number(depo.TotalCurAmt.Amt)).toFixed(2);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}_context62.next=43;break;case 41:_context62.prev=41;_context62.t1=_context62[\"catch\"](26);case 43:i++;_context62.next=13;break;case 46:return _context62.abrupt(\"return\",resultToReturn);case 47:case\"end\":return _context62.stop();}}},_callee62,this,[[17,24],[26,41]]);}));function getReciprocityByYear(_x46,_x47){return _getReciprocityByYear.apply(this,arguments);}return getReciprocityByYear;}()},{key:\"getDeposits\",value:function(){var _getDeposits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee63(partyId,year,month){var params,data,result,resultToReturn,i,item,endDate,dtResult,_iterator8,_step8,accItem,deposits,_iterator9,_step9,depo;return _regeneratorRuntime.wrap(function _callee63$(_context63){while(1){switch(_context63.prev=_context63.next){case 0:if(!(partyId.length<=0)){_context63.next=2;break;}return _context63.abrupt(\"return\",undefined);case 2:year=Number(year);params={PartyId:partyId};data=qs.stringify(params);//servicio retorna las cuentas del cliente\n_context63.next=7;return this.get(url.URL_CORE_ACCOUNTSPARTIES+\"?\"+data);case 7:result=_context63.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context63.next=10;break;}return _context63.abrupt(\"return\",undefined);case 10:resultToReturn={averageAmt:0,deposits:0};i=0;case 12:if(!(i<result.Accounts.Acct.length)){_context63.next=43;break;}item=result.Accounts.Acct[i];//CUENTA=120000086315&FECHA_INI=20220101&FECHA_FIN=20220330&PROMEDIO=S\nendDate=moment(year+\"-12-01\").endOf('month').format('DD');params={CUENTA:item.AcctKey.AcctId,FECHA_INI:year+\"0101\",FECHA_FIN:year+\"12\"+endDate};data=qs.stringify(params);_context63.prev=17;_context63.next=20;return this.get(url.URL_CORE_BALANCETOTALS+\"?\"+data);case 20:dtResult=_context63.sent;if(dtResult.Acct.AcctBal.length>0){// queda pendiente el tema de los depositos con el servicio de banesco  \n_iterator8=_createForOfIteratorHelper(dtResult.Acct.AcctBal);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){accItem=_step8.value;if(Number(accItem.AverageBalanceDt.split(' ')[1])===year){resultToReturn.averageAmt=(Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}_context63.next=26;break;case 24:_context63.prev=24;_context63.t0=_context63[\"catch\"](17);case 26:_context63.prev=26;//var monthN=GetMontNumberByName(month);\nendDate=moment(year+\"-12-01\").endOf('month').format('DD');params={AcctId:item.AcctKey.AcctId,EndDt:year+\"-12-\"+endDate+\"T23:59:59\",StartDt:year+\"-01-01T00:00:00\"};//EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\ndata=qs.stringify(params);_context63.next=32;return this.get(url.URL_CORE_TRANSACCTIONS+\"?\"+data);case 32:deposits=_context63.sent;console.log(\"getReciprocityByYear\",deposits);_iterator9=_createForOfIteratorHelper(deposits.Trn);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){depo=_step9.value;if(depo.Desc.indexOf(\"CREDITO A CONTRATO\")<0&&depo.Desc.indexOf(\"Intereses - Capitalizables\")<0){resultToReturn.deposits=(Number(resultToReturn.deposits)+Number(depo.TotalCurAmt.Amt)).toFixed(2);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}_context63.next=40;break;case 38:_context63.prev=38;_context63.t1=_context63[\"catch\"](26);case 40:i++;_context63.next=12;break;case 43:return _context63.abrupt(\"return\",resultToReturn);case 44:case\"end\":return _context63.stop();}}},_callee63,this,[[17,24],[26,38]]);}));function getDeposits(_x48,_x49,_x50){return _getDeposits.apply(this,arguments);}return getDeposits;}()/// Obtener el serial de la linea -- Parametros: NumeroT24 y Codigo Facilidad\n},{key:\"getLineSerial\",value:function(){var _getLineSerial=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee64(partyId,facilityTypeCode){var params,data,result,dataResults,lineNumber,lineserial;return _regeneratorRuntime.wrap(function _callee64$(_context64){while(1){switch(_context64.prev=_context64.next){case 0:_context64.prev=0;if(!(partyId.length<=0)){_context64.next=3;break;}return _context64.abrupt(\"return\",undefined);case 3:params={PartyId:partyId};data=qs.stringify(params);//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018\n//servicio retorna las cuentas del cliente\n_context64.next=7;return this.get(url.URL_CORE_CREDITOS_LINE+\"?\"+data);case 7:result=_context64.sent;dataResults=result.Party.PartyInfo.CreditLine.filter(function(x){return x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode)>=0;});lineNumber=1;dataResults.forEach(function(dt){lineNumber=Number(dt.CreditLineId.split(\".\")[2])>lineNumber?Number(dt.CreditLineId.split(\".\")[2]):lineNumber;});while(facilityTypeCode.length<7){facilityTypeCode=\"0\"+facilityTypeCode;}if(lineNumber.toString().length<2){lineNumber=(\"0\"+(lineNumber+1).toString()).slice(-2);}else{lineNumber=lineNumber.toString();}lineserial=partyId+\".\"+facilityTypeCode+\".\"+lineNumber;console.log(\"lineas\",lineserial);return _context64.abrupt(\"return\",lineserial);case 18:_context64.prev=18;_context64.t0=_context64[\"catch\"](0);case 20:return _context64.abrupt(\"return\",null);case 21:case\"end\":return _context64.stop();}}},_callee64,this,[[0,18]]);}));function getLineSerial(_x51,_x52){return _getLineSerial.apply(this,arguments);}return getLineSerial;}()///Creacion de Linea para desembolso\n//numero de linea = numero de cliente + tipo de linea + serial === EJ: 600197109.0011000.01\n//https://qa.api.ob.banesco.com.pa/APIUtil/v1/catalogs?catalog_name=LIMIT REFERENCE&parent_catalog_name=&keyword=  \n//===> Catalogo de Tipo de Lineas\n//https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018  \n//===> Obtenemos todas las lineas y tomamos el total + 1 => Mas serial\n},{key:\"newline\",value:function(){var _newline=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee65(partyId,facilityType){var data,result;return _regeneratorRuntime.wrap(function _callee65$(_context65){while(1){switch(_context65.prev=_context65.next){case 0:if(!(partyId.length<=0)){_context65.next=2;break;}return _context65.abrupt(\"return\",undefined);case 2:// Garantia loans/Colateral\n//https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/collaterals\n// Desembolso\n//https://qa.api.ob.banesco.com.pa/acctloan/v1/loans\n//lineas\n//https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/credits/lines/limits\ndata={\"CreditLine\":{\"Activity\":{\"Cod\":\"1413\"//-> Cod. Actividad Economica\n},\"AuthType\":\"99\",//-> ??\n\"AutonomyCode\":{\"Cod\":\"9999\"//-> Codigo de la Autonomia No lo tenemos\n},\"AutonomyUser\":\"1\",//-> Usuario de Autonomia que esta login\n\"CreditLimit\":{\"AdviseAmt\":{\"Amt\":\"25,000.00\",//-> Monto de La Facilidad\n\"CurCode\":\"USD\"//-> Codigo Moneda\n},\"Allow\":{\"ProductData\":{\"Product\":{\"Cod\":\"1000\"// -> Tipo de Facilidad\n}}},\"AllowNetting\":\"N\",// -> ?? FIJO\n\"ApprovalDt\":\"2022-02-02\",// -> Fecha de Aprobacion\n\"AvailDt\":\"2022-02-02\",// -> Fecha de Propuesta\n\"AvailMarker\":\"Y\",// -> ?? FIJO\n\"CountryRisk\":[// -> Pais de riesgo\n{\"Country\":{\"CountryCode\":\"PA\"// -> Codigo Pais de riesgo\n},\"Percent\":\"100\"// -> ??\n}],\"CreditLimitKey\":{\"CreditLimitId\":\"600197109.0011000.01\"// -> numero de cliente + tipo de linea + mas serial\n},\"CurCode\":\"USD\",//-> Tipo de Moneda\n\"DeadLineDt\":\"2022-02-02\",//Fecha del dia\n\"DueDt\":\"2023-02-02\",//Fecha de expiracion\n\"LimitAmt\":{\"Amt\":\"25,000.00\"//-> Monto de La Linea\n},\"LimitAmtType\":\"FIXED\",//-> FIXED/VARIABLE\n\"LimitReject\":\"Y\",// -> YES/NO ??\n\"MaxCurAmt\":{\"Amt\":\"25,000.00\"//-> Monto de La Linea\n},\"ProposalDt\":\"2022-02-02\",//Fecha Propuesta\n\"ReviewDt\":\"2023-02-02\",//Fecha Revision\n\"ReviewFreq\":{\"FreqValue\":\"20230330M1230\"// YYYY MM DD ... codigo A/M/D ... cantidad de meses, el dia especifico\n},\"Signatories\":{\"Signatory\":[{\"PartyKey\":{\"PartyId\":\"45469\"//Numero del Cliente T24\n}}]}}}};_context65.next=5;return this.put(url.URL_CORE_LINES,data);case 5:result=_context65.sent;if(!(result.Status.StatusCode!==OPTs.ResponseT24_STATUSOK)){_context65.next=8;break;}return _context65.abrupt(\"return\",undefined);case 8:return _context65.abrupt(\"return\",result);case 9:case\"end\":return _context65.stop();}}},_callee65,this);}));function newline(_x53,_x54){return _newline.apply(this,arguments);}return newline;}()}]);return Services;}(ApiServiceCore);export{Services as default};","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/services/CoreServices/Services.js"],"names":["WatchListModel","DocumentModel","ClientInfoModel","PartiesStaffModel","ApiServiceCore","url","qs","ACT_FACILIDADACTIVOSFIJOS","OPTs","ResponseModel","moment","part","GetMontNumberByName","GetMontNameByNumber","ResourceStore","Currency","Services","params","post","URL_CORE_WATCHLIST","result","status","fromJson","results","response","error","data","config","headers","URL_CORE_DOCUMENTS","console","log","Status","StatusCode","dataresult","docName","Result","documentId","formType","undefined","docId","DocumentHandle","ReturnBase64","URL_CORE_DOCUMENTSVIEW","Documents","DocPop","stringify","get","URL_CORE_PARTIEINFO","typePerson","customerNumberT24","PartyType","Number","PartyId","getPartiesInformation","length","extraInfo","activity","address","Country","CountryCode","Province","Cod","CountyDistrict","Jurisdiction","City","Desc","AddrDesc","Building","HouseNumber","Street","URL_CORE_PARTIESTAFF","put","URL_CORE_COMPANIESRELATIONS","sessionStorage","getItem","JSON","parse","catalog_name","parent_catalog_name","keyword","URL_CORE_CATALOGO","setItem","catalog","pais","provincia","distrito","Records","unshift","Description","Code","codeActividad","partyId","URL_CORE_FACILIDADES","dataResult","AcctLoans","AcctLoan","map","item","i","push","ProductDesc","AcctOpeningInfo","InitialAmt","Amt","OpenDt","AcctBal","CurAmt","AcctMember","PartyName","ShortName","err","resultData","PartyPartyRels","PartyPartyRel","forEach","client","partyNumber","PartyPartyRelInfo","PartyRef","RelPartyRef","PartyKey","currencyData","longTerm","name","approved","balance","proposal","variation","shortTerm","totalTerm","pledged","netExposition","URL_CORE_CREDITOS_LINE","Array","isArray","Party","PartyInfo","CreditLine","deudas","debtype","facilityType","CreditType","bank","getRealValue","AvailableAmt","OnlineAmt","PendingAmt","startDate","format","endDate","diff","ConsultarAPCResponse","ConsultarAPCResult","DetCompromisoAPC","AcctKey","CreditAcctData","DueDt","URL_CORE_PIGNORADO","Collaterals","CollateralInfo","AcctReference","Collateral","CollateralAmt","getRelatedClients","clients","getCorporateExhibition","clientId","identification","longTermresult","shortTermresult","tmpidentification","split","str","startsWith","replace","substring","URL_CORE_APCINFO","dc_descr_corta_rela","dc_nom_asoc","dc_saldo_actual","approvedAmount","dc_monto_original","dc_fec_inicio_rel","dc_fec_fin_rel","URL_CORE_AVERAGES","URL_CORE_IMPORTACIONES","URL_CORE_EXPORTACIONES","URL_CORE_INGOING","URL_CORE_OUTOGOING","URL_CORE_CREDITOS","AcctId","EndDt","StartDt","URL_CORE_TRANSACCTIONS","URL_CORE_PRESTAMOS","URL_CORE_PRESTAMOS_INFORMATION","FECHA","add","CLIENTE","URL_CORE_REPORTINGSERVICES","CollateralKey","CollateralId","collateralId","facilityAmt","warrantyType","InqType","URL_CORE_COLLATERALS","URL_CORE_ACCOUNTSPARTIES","ResponseT24_STATUSOK","Error","StatusDesc","Accounts","Acct","year","dtResult","dt","dataByYear","accItem","AverageBalanceDt","dtr","p","dtYear","currentYear","CUENTA","FECHA_INI","FECHA_FIN","PROMEDIO","URL_CORE_BALANCETOTALS","deposits","records","record","Fecha","toString","monthName","dataByMonth","find","x","month","indexOf","monto","toFixed","endOf","Trn","depo","TotalCurAmt","PartyRelName","resultToReturn","averageAmt","dMonth","monthNum","monthN","forma","facilityTypeCode","dataResults","filter","CreditLineId","lineNumber","slice","lineserial","URL_CORE_LINES"],"mappings":"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","sourcesContent":["\r\nimport { WatchListModel, DocumentModel, ClientInfoModel, PartiesStaffModel } from \"../../models/Core\";\r\nimport ApiServiceCore from \"../ApiServiceCore\";\r\nimport * as url from \"../../helpers/url_helper\"\r\nimport qs from \"qs\";\r\nimport { ACT_FACILIDADACTIVOSFIJOS } from \"../../helpers/options_helper\";\r\nimport * as OPTs from \"../../helpers/options_helper\"\r\nimport { ResponseModel } from '../../models/Common/ResponseModel';\r\nimport moment from \"moment\";\r\nimport { part } from \"core-js/core/function\";\r\n\r\nimport {GetMontNumberByName,GetMontNameByNumber} from '../../helpers/commons'\r\nimport { ResourceStore } from \"i18next\";\r\n\r\nimport Currency from \"../../helpers/currency\"\r\n\r\nexport default class Services extends ApiServiceCore {\r\n    \r\n    //analysis/customers -> retorna la info de lista de vigilancia\r\n    //ConsultarListaCriterioCORE    \r\n    async postWhatchList(params) {\r\n        try {\r\n            /*\r\n        {\r\n      \"pCustomerId\": \"06--00711-002304\",\r\n      \"pTypeId\": \"CEDULA_IDENTIDAD\",\r\n      \"pModelId\": \"LISTA_VIGILANCIA\",\r\n      \"pCustomerListParams\": {\r\n          \"KeyValueParam\": [\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"NOMBRE\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Librada\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"SEGUNDO_NOMBRE\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Emilio\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"PRIMER_APELLIDO\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Rivera\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"SEGUNDO_APELLIDO\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"Gaviria\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"TIPO_ID\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"CEDULA_IDENTIDAD\"\r\n              },\r\n              {\r\n                  \"_x003C_Key_x003E_k__BackingField\": \"CEDULA\",\r\n                  \"_x003C_Value_x003E_k__BackingField\": \"06--00711-002304\"\r\n              }\r\n          ]\r\n      },\r\n      \"pUser\": \"wallytech_ws_user\",\r\n      \"pWaitingInterval\": 180000000,\r\n      \"pPriority\": 1\r\n  }\r\n        */\r\n            var result = await this.post(url.URL_CORE_WATCHLIST, params);\r\n\r\n            return { status: 200, result: WatchListModel.fromJson(result).results };\r\n\r\n        }\r\n        catch (err) {\r\n            return { status: err.response.status, error: err.response.data }; //errorMessage, //errorCode\r\n        }\r\n    }\r\n\r\n    //documents -> salva documento en gestor documental ONBASE\r\n    //GuardarDocumentoECM\r\n    async postDocument(data) {\r\n\r\n        var config = {\r\n            headers: {\r\n                //\"Accept\":\"*/*\",\r\n                //\"Accept-Encoding\":\"gzip, deflate, sdch, br\",\r\n                //\"Accept-Language\":\"fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4\",\r\n                //\"Access-Control-Request-Headers\":\"accept, content-type\",\r\n                //\"Content-Type\":\"text/plain\",\r\n                //\"Content-Length\":JSON.stringify(data).length.toString(),\r\n                //\"Host\":\"https://qa.api.ob.banesco.com.pa/\",\r\n                //Connection: \"keep-alive\",\r\n                //\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\",\r\n                \"userId\": \"mq3898\", //Usuario\r\n                \"clientDt\": \"clientDt\", //\"Fecha de ejecuciÃ³n del cliente.\"\r\n                \"appName\": \"ReactJs\",//\"Aplicacion que consume el servicio\"\r\n                \"requestId\": \"202112202\",//\"Identificador de la solicitud.\"\r\n                \"channelId\": \"channelID\", //\"Canal consumidor\",                \r\n            }\r\n        }\r\n\r\n        var result = await this.post(url.URL_CORE_DOCUMENTS, data, config);\r\n\r\n        console.log(\"Result Document: \", result);\r\n\r\n        /*\r\n        var result = {\r\n            \"Status\": {\r\n                \"StatusCode\": \"M0000\",\r\n                \"StatusDesc\": \"OK\"\r\n            },\r\n            \"Token\": \"e793-ddb2-ab0e-6626-5d3e-5f19-b79b-1f5d\",\r\n            \"Result\": {\r\n                \"DocName\": \"TDC - Contrato de TDC  (98765432)\",\r\n                \"DocumentID\": \"34589873\",\r\n                \"FormType\": \"HTML\"\r\n            }\r\n        }\r\n        */\r\n        //console.log(result);\r\n        if (result.Status.StatusCode === \"M0000\") {\r\n            var dataresult = { docName: result.Result['DocName'], documentId: result.Result['DocumentID'], formType: result.Result['FormType'] }\r\n            return dataresult;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    //documents -> Ver documento en gestor documental ONBASE\r\n    //VerDocumentoECM\r\n    async postViewDocument(docId) {\r\n\r\n        try {\r\n            console.log(docId);\r\n            var data = {\r\n                DocumentHandle: docId,\r\n                ReturnBase64: false\r\n            }\r\n\r\n            var result = await this.post(url.URL_CORE_DOCUMENTSVIEW, data);\r\n\r\n            console.log(\"Result Document: \", result);\r\n\r\n            return result.Documents[0].DocPop;\r\n        }\r\n        catch (e) { }\r\n        return null;\r\n\r\n\r\n\r\n    }\r\n\r\n    //v1/parties/information -> retorna la info del cliente\r\n    //BuscarClienteCORE\r\n    async getPartiesInformation(params) {\r\n\r\n        /*var item =[ {id:800120843,clientnumber:800120843,clientname:\"Israel Michel Gomez Alfonso\",firstname:\"Israel\",secondname:\"Michel\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"CED\",idnumber:\"456123\"},\r\n        {id:800120845,clientnumber:800120845,clientname:\"Pancho Pedro Gomez Alfonso\",firstname:\"Pancho\",secondname:\"Pedro\",\r\n        lastname:\"Gomez\",secondlastname:\"Alfonso\",idtype:\"RUC\",idnumber:\"456456\"}];\r\n        return item;*/\r\n        //params = {PartyType:Juridico,PartyId:600088018}\r\n        var data = qs.stringify(params);\r\n        console.log(data);\r\n        //url.URL_CORSBYPASS +\r\n        var result = await this.get(url.URL_CORE_PARTIEINFO + \"?\" + data);\r\n        console.log(result);\r\n        if (result.Status.StatusCode === \"M0000\") {\r\n            return ClientInfoModel.fromJson(result);\r\n        }\r\n        else {\r\n            result[\"error\"] = \"Error de Servicio del Core\";//result.Status.StatusDesc;\r\n            result[\"errorCode\"] = result.Status.StatusCode;\r\n            return result;\r\n        }\r\n    }\r\n\r\n    async getPartiesInformationExtra(typePerson,customerNumberT24){\r\n        try {\r\n            var params = { PartyType: (Number(typePerson) === 1 ? \"Natural\" : \"Juridico\"), PartyId: customerNumberT24 }\r\n            var result = await this.getPartiesInformation(params);\r\n            if (result !== undefined && result.length > 0) {\r\n                var data = result[0];\r\n                console.log(\"getPartiesInformationExtra\", data);\r\n                var extraInfo ={\r\n                    activity:{\r\n                        \"EconomicActivity\":data[\"economicActivity\"]\r\n                    },\r\n                    address: {\r\n                        \"Country\":data[\"address\"]?.Country?.CountryCode??\"\",\r\n                        \"Province\":data[\"address\"]?.Province?.Cod??\"\",\r\n                        \"CountyDistrict\":data[\"address\"]?.CountyDistrict?.Cod??\"\",\r\n                        \"Jurisdiction\":data[\"address\"]?.Jurisdiction?.Cod??\"\",\r\n                        \"City\":data[\"address\"]?.City?.Desc??\"\",\r\n                        \"AddrDesc\":data[\"address\"]?.AddrDesc??\"\",\r\n                        \"Building\":data[\"address\"]?.Building?.Desc??\"\",\r\n                        \"HouseNumber\":data[\"address\"]?.HouseNumber??\"\",\r\n                        \"Street\":data[\"address\"]?.Street??\"\"\r\n                    },\r\n                    \"PhoneNumber\":data[\"phoneNumber\"],                    \r\n                    \"Email\":data[\"email\"]\r\n                }\r\n                \r\n                return extraInfo;\r\n            }\r\n        }\r\n        catch (err) { }\r\n        return undefined\r\n    }\r\n    \r\n    //Accionistas\r\n    async getPartiesStaff(PartyId) {\r\n\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        var params = { PartyId: PartyId }//{PartyId:600235373}\r\n        params = qs.stringify(params);\r\n        \r\n        var result = await this.get(url.URL_CORE_PARTIESTAFF + \"?\" + params);\r\n            return PartiesStaffModel.fromJson(result);\r\n            \r\n    }\r\n\r\n    ///v1/parties/staff\r\n    async putPartiesStaff(data) {\r\n\r\n        var result = await this.put(url.URL_CORE_PARTIESTAFF, data);\r\n\r\n        return PartiesStaffModel.fromJson(result);\r\n    }\r\n\r\n    //ConsultarListaEmpresasRelacionadas\r\n    async getCompaniesRelations(params) {\r\n\r\n        //params = {PartyId:600012387}\r\n        var data = qs.stringify(params);\r\n\r\n        var result = await this.get(url.URL_CORE_COMPANIESRELATIONS + \"?\" + data);\r\n\r\n        return PartiesStaffModel.fromJson(result);\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                       Api para obtener todos los paises desde el catalogo                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPaisesCatalogo() {\r\n        try {\r\n            var result = sessionStorage.getItem('catPaises');\r\n            if (result !== undefined && result !== null) {\r\n                return JSON.parse(result);\r\n            }\r\n            //sessionStorage.setItem('catPaises', JSON.stringify(result.roles));\r\n\r\n            let params = {\r\n                catalog_name: 'PAIS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n\r\n            sessionStorage.setItem('catPaises', JSON.stringify(result.catalog));\r\n\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*       Api para obtener las provincias de un pais, pasandole como parametro el id del pais      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getProvinciasCatalogo(pais) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'PROVINCIA',\r\n                parent_catalog_name: pais,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*    API para obtener los distrito de cada provincia pasandole como parametro el id provincia    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getDistritoCatalogo(provincia) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'DISTRITO',\r\n                parent_catalog_name: provincia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                      Api para obtener los corregimientos de cada distrito                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCorregimientoCatalogo(distrito) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'CORREGIMIENTO',\r\n                parent_catalog_name: distrito,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                         Api para obtener las ciudades de cada provincia                        */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCiudadCatalogo(provincia) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'CIUDAD',\r\n                parent_catalog_name: provincia,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                      Api para obtener el grupo economico de los catalogos                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getGrupoEconomicoCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'GRUPO ECONOMICO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            result.catalog.Records.unshift({ Description: \"N/A\", Code: \"N/A\" })\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                   Api para obtener las bancas esta api proviene de catalogos                   */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getBancaCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'BANCA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                   Api muestra todos los cargos que retorna desde el catalogo                   */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCargosCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'CARGO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     Api retorna todos los bancos exitentes para el catalogo                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getBancosCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'BANCOS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getActividadEconomicaCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'ACTIVIDAD ECONOMICA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO DE ACTIVIDAD ECONOMICA                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSubActividadEconomicaCatalogo(codeActividad) {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'SUB ACTIVIDAD ECONOMICA',\r\n                parent_catalog_name: codeActividad,\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (err) { }\r\n        return null;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO DE SECTOR ECONOMICO                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSectorEconomicoCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'SECTOR ECONOMICO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO RELACION                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getRelacionCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'RELACION',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO TIPO DE GARANTIA                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getTipoGarantiaCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'TIPO DE GARANTIA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n    /*\r\n    \"catalog\": {\r\n        \"type\": \"TIPO DE GARANTIA\",\r\n        \"records\": [\r\n            {\r\n                \"CODIGO\": \"100\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Mueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"200\",\r\n                \"DESCRIPCION\": \"Garantia Hipotecaria Inmueble\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"300\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en el Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"400\",\r\n                \"DESCRIPCION\": \"Depositos Pignorados en Otros Banco\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"500\",\r\n                \"DESCRIPCION\": \"Garantia Prendaria\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"600\",\r\n                \"DESCRIPCION\": \"Otras Garantias\"\r\n            },\r\n            {\r\n                \"CODIGO\": \"700\",\r\n                \"DESCRIPCION\": \"SIN GARANTIAS\"\r\n            }\r\n        ]\r\n    }\r\n    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO MONEDAS                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getMonedaCatalogo() {\r\n\r\n        try {\r\n            let params = {\r\n                catalog_name: 'MONEDA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     CATALOGO SUCURSAL  o Agencias                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSucursalCatalogo() {\r\n        try {\r\n            let params = {\r\n                catalog_name: 'SUCURSAL',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                       Api para obtener todos los subproductos catalogo                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSubProductosCatalogo() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUBPRODUCTO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                       Api para obtener todos las sucursales o agencias catalogo                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getSucursalesCatalogo() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUCURSAL',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Tipo de Limites de Credito\r\n    async getTypeOfCreditLimitsCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'LIMIT REFERENCE',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Aseguradoras\r\n    async getInsurersCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'ASEGURADORAS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Marcas de Auto\r\n    async getCarBrandCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'MARCA DE AUTOS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Modelos de Auto\r\n    async getCarModelCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'MODELO DE AUTO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Corredoras\r\n    async getBrokersCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'BROKER',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Fiduciaria\r\n    async getTrusteeCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'FIDUCIARIAS',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - SubProducto\r\n    async getSubProductCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUBPRODUCTO',\r\n                parent_catalog_name: \"3200\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Categorias\r\n    async getCategoriesCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'CATEGORIA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Tipo de poliza\r\n    async getPolicyTypeCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'TIPO POLIZA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Sub tipo de Garantia\r\n    async getSubTypeWarrantyCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'SUB TIPO GARANTIA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Clases de Auto\r\n    async getAutoClassCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'CLASE AUTO',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    //CATALOGO - Avaluadora\r\n    async getAppraiserCatalog() {\r\n        try {\r\n            // return json;\r\n            let params = {\r\n                catalog_name: 'AVALUADORA',\r\n                parent_catalog_name: \"\",\r\n                keyword: \"\"\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_CATALOGO + \"?\" + data);\r\n            return result.catalog;\r\n        }\r\n        catch (ex) { }\r\n        return null;\r\n    }\r\n\r\n    /*------------------------------------------------------------------------------------*/\r\n    ///v1/loans/details/informations\r\n    //Retorna las facilidades de un cliente ... partyId -> numero del cliente en T24\r\n    //getFacilidades\r\n    async getFacilities(partyId) {\r\n        try {\r\n            if(partyId.length <= 0){\r\n                return undefined;\r\n            }\r\n\r\n            let params = {\r\n                PartyId: partyId\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n\r\n            //return result.AcctLoans.AcctLoan;\r\n\r\n            var dataResult = [];\r\n            try {\r\n                //Armamos la data a mostrar en pantalla\r\n                result.AcctLoans.AcctLoan.map(function (item, i) {\r\n                    try {\r\n                        dataResult.push({\r\n                            \"facilityType\": item.ProductDesc, \"approvedAmount\": item.AcctOpeningInfo.InitialAmt.Amt,\r\n                            \"approvedDate\": item.AcctOpeningInfo.OpenDt, \"actualBalance\": item.AcctBal[0].CurAmt.Amt,\r\n                            \"debtorName\": item.AcctMember[0].PartyName.ShortName\r\n                        });\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            catch (err) { console.error(err); }\r\n\r\n            console.log(\"getFacilities\", dataResult)\r\n            return dataResult;\r\n            //Tipo de facilidad ProductDesc\r\n            //Monto Aprobadp AcctOpeningInfo.InitialAmt.Amt\r\n            //fecha AcctOpeningInfo.OpenDt\r\n            //Balance Actual AcctBal[0].CurAmt.Amt\r\n            //Deudor AcctMember[0].PartyName.ShortName\r\n        }\r\n        catch (err) { console.error(err) }\r\n        return undefined;\r\n    }\r\n\r\n    //retorna los Clientes Relacionados se le pasa el Numero de Cliente de T24\r\n    async getRelatedClients(partyId) {\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: partyId\r\n        }\r\n\r\n        let data = qs.stringify(params);\r\n\r\n        var dataResult = [];\r\n\r\n        try {\r\n            \r\n            //servicio retorna clientes relacionados\r\n            var resultData = await this.get(url.URL_CORE_COMPANIESRELATIONS + \"?\" + data);\r\n            //Armamos la data a mostrar en pantalla\r\n            resultData.PartyPartyRels.PartyPartyRel.forEach((client)=>{\r\n                try{\r\n                    var partyNumber = client.PartyPartyRelInfo.PartyRef[0].RelPartyRef[0].PartyKey[0].PartyId;\r\n                    if (partyNumber !== undefined && partyNumber !== null && partyNumber.length > 0) {    \r\n                        dataResult.push(partyNumber);\r\n                    }}\r\n                catch(err){}  \r\n            });\r\n        }\r\n        catch (err) {}\r\n            \r\n        return dataResult;\r\n    }\r\n\r\n    //ExposicionCorporativa se le pasa el Numero de Cliente de T24\r\n    async getCorporateExhibition(partyId) {\r\n\r\n        const currencyData = new Currency();\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n        \r\n        var dataResult = [];\r\n        var longTerm = { name: \"Facilidades Largo Plazo\", approved: 0,balance:0, proposal: 0, variation: 0};\r\n        var shortTerm = { name: \"Facilidades Corto Plazo\", approved: 0,balance:0, proposal: 0, variation: 0};\r\n        var totalTerm = { name: \"Total de Facilidades\", approved: 0,balance:0, proposal: 0, variation: 0};\r\n        var pledged = { name: \"Monto Pignorado\", approved: 0,balance:0, proposal: 0, variation: 0 };\r\n        var netExposition = { name: \"Exposicion Neta\", approved: 0,balance:0, proposal: 0, variation: 0 };\r\n\r\n        ////// Credit - Cortos Plazos\r\n        try{\r\n            var params = { PartyId: partyId }\r\n            var data = qs.stringify(params);\r\n                    \r\n            //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \r\n            //servicio retorna las cuentas del cliente\r\n            var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);                \r\n            \r\n            //var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\r\n                        \r\n            if(Array.isArray(result.Party.PartyInfo.CreditLine)) {\r\n            \r\n                result.Party.PartyInfo.CreditLine.forEach((item)=>{\r\n                    try {\r\n                        /*\r\n                        {\r\n                    \"AvailableAmt\": {\r\n                        \"Amt\": \"75,000.00\"\r\n                    },\r\n                    \"CreditLineId\": \"800048231.0010000.01\",\r\n                    \"CreditLineNum\": \"01\",\r\n                    \"CreditType\": {\r\n                        \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                    },\r\n                    \"CurCode\": \"USD\",\r\n                    \"IntRateType\": {\r\n                        \"Desc\": \"Fixed\"\r\n                    },\r\n                    \"OnlineAmt\": {\r\n                        \"Amt\": \"125000.00\"\r\n                    },\r\n                    \"PendingAmt\": {\r\n                        \"Amt\": \"50,000.00\"\r\n                    },\r\n                    \"Rating\": \"01\",\r\n                    \"SecuredAmt\": {\r\n                        \"Amt\": \"0.00\"\r\n                    }\r\n                }\r\n                        */\r\n                       \r\n                        var deudas = {debtype:\"short\",facilityType:item.CreditType.Desc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")}\r\n                        //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                        if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                            //deudas.debtype=\"long\";     \r\n                            longTerm.approved += deudas.approved;\r\n                            longTerm.balance += deudas.balance;              \r\n                        }\r\n                        else{\r\n                            shortTerm.approved += deudas.approved;\r\n                            shortTerm.balance += deudas.balance;              \r\n                        }                    \r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n                    \r\n                    var deudas = {debtype:\"short\",facilityType:item.CreditType.Desc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approved:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")}\r\n                            //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                    if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                        //deudas.debtype=\"long\";     \r\n                        longTerm.approved += deudas.approved;\r\n                        longTerm.balance += deudas.balance;              \r\n                    }\r\n                    else{\r\n                        shortTerm.approved += deudas.approved;\r\n                        shortTerm.balance += deudas.balance;              \r\n                    }\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch(err){}\r\n        \r\n        ////// loands - Cortos y Largos Plazos\r\n        try{\r\n            let params = {\r\n                PartyId: partyId\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n            \r\n            if(Array.isArray(result.AcctLoans.AcctLoan)) {\r\n            \r\n                result.AcctLoans.AcctLoan.forEach((item)=>{\r\n                    if(item.AcctKey !== null){\r\n                        try {\r\n                            /*\r\n                            {\r\n                    \"Category\": \"01\",\r\n                    \"Desc\": \"340000071156\",\r\n                    \"ProductDesc\": \"Prestamo Comercia\",\r\n                    \"AcctOpeningInfo\": {\r\n                        \"InitialAmt\": {\r\n                            \"Amt\": \"120000.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        },\r\n                        \"OpenDt\": \"2019-08-02\"\r\n                    },\r\n                    \"CreditAcctData\": {\r\n                        \"DueDt\": \"2028-07-05\",\r\n                        \"CreditAcctPmtInfo\": null\r\n                    },\r\n                    \"AcctKey\": {\r\n                        \"AcctId\": \"1020243542\"\r\n                    },\r\n                    \"AcctBal\": [\r\n                        {\r\n                            \"BalType\": \"Balance\",\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"87245.92\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"AcctMember\": [\r\n                        {\r\n                            \"PartyRole\": {\r\n                                \"Cod\": \"TITULAR/DEUDOR\"\r\n                            },\r\n                            \"PartyName\": {\r\n                                \"ShortName\": \"ASI DEVELOPMENT\"\r\n                            },\r\n                            \"PartyKey\": null\r\n                        }\r\n                    ]\r\n                }\r\n                            */\r\n                           \r\n                            var deudas = {debtype:\"short\",facilityType:item.ProductDesc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")}\r\n                            deudas.variation=deudas.approved - deudas.balance;\r\n                            if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                                //deudas.debtype=\"long\";     \r\n                                longTerm.approved += deudas.approved;\r\n                                longTerm.balance += deudas.balance;              \r\n                            }\r\n                            else{\r\n                                shortTerm.approved += deudas.approved;\r\n                                shortTerm.balance += deudas.balance;              \r\n                            }                        \r\n                        }                     \r\n                        catch (err) { }\r\n                    }                    \r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                if(item.AcctKey !== null){\r\n                    try {                    \r\n                        var deudas = {debtype:\"short\",facilityType:item.ProductDesc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approved:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")}\r\n                        deudas.variation=deudas.approved - deudas.balance;\r\n                        if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                            //deudas.debtype=\"long\";     \r\n                            longTerm.approved += deudas.approved;\r\n                            longTerm.balance += deudas.balance;              \r\n                        }\r\n                        else{\r\n                            shortTerm.approved += deudas.approved;\r\n                            shortTerm.balance += deudas.balance;              \r\n                        }\r\n                    }\r\n                    catch (err) { }\r\n                }\r\n                \r\n            }\r\n        }\r\n        catch(err){}\r\n        \r\n        longTerm.variation = longTerm.approved - longTerm.balance;\r\n        shortTerm.variation = shortTerm.approved - shortTerm.balance;\r\n\r\n        dataResult.push(longTerm);\r\n        dataResult.push(shortTerm);\r\n\r\n        totalTerm.approved = shortTerm.approved + longTerm.approved;\r\n        totalTerm.balance = shortTerm.balance + longTerm.balance;\r\n        totalTerm.variation = totalTerm.approved - totalTerm.balance;\r\n\r\n        dataResult.push(totalTerm);\r\n\r\n        try {\r\n            //servicio retorna Pignorados\r\n            var result = await this.get(url.URL_CORE_PIGNORADO + \"?\" + data);\r\n\r\n            //Armamos la data a mostrar en pantalla\r\n            result.Collaterals.CollateralInfo.map(function (item, i) {\r\n                if (item.AcctKey.AcctReference !== null) {\r\n                    pledged.approved += Number(item.Collateral.CollateralAmt.Amt);\r\n                    pledged.balance += 0;\r\n                    \r\n                }\r\n            })\r\n            pledged.variation = Number(pledged.approved - pledged.balance);\r\n\r\n            dataResult.push(pledged);\r\n        }\r\n        catch (err) {\r\n            console.error(\"URL_CORE_PIGNORADO\", err);\r\n        }\r\n\r\n        if (dataResult.length > 0) {\r\n            netExposition.approved = totalTerm.approved - pledged.approved;\r\n            netExposition.proposal = totalTerm.proposal - pledged.proposal;\r\n            netExposition.variation = totalTerm.variation - pledged.variation;\r\n\r\n            dataResult.push(netExposition);\r\n        }\r\n\r\n        console.error(\"getCoporateExhibition 123\", dataResult);\r\n        \r\n        return dataResult;\r\n    }\r\n\r\n    //ExposicionCorporativa se le pasa el Numero de Cliente de T24\r\n    async getCorporateExhibitionByClients(partyId) {\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n        \r\n        let clients = await this.getRelatedClients(partyId);\r\n        var dataResult = [];\r\n        for (var i = 0; i < clients.length; i++) {\r\n            let result = await this.getCorporateExhibition(clients[i]);\r\n            if (result !== null && result.length > 0) {\r\n                dataResult.push({ clientId: \"Cliente: \" + clients[i], data: result });\r\n            }\r\n        }\r\n        console.log(\"getCorporateExhibitionByClients\", dataResult);\r\n        return dataResult;\r\n    }\r\n\r\n    //Deudas a Corto y Largo Plazo --- APC, Credit, Loand\r\n    async getAllTermDebts(partyId,identification) {\r\n        \r\n        const currencyData = new Currency();\r\n  \r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        if(identification.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        var dataResult = {longTermresult:[],shortTermresult:[]};        \r\n        \r\n        ////// APC\r\n        try{\r\n            var tmpidentification = \"\";\r\n            identification.split('-').map((str)=> {\r\n                if(str.startsWith(\"0\")){\r\n                    tmpidentification += str.replace(/^0+/, '')+\"-\";\r\n                }\r\n                else{\r\n                    tmpidentification += str+\"-\";\r\n                }\r\n            })\r\n        \r\n            identification = tmpidentification.substring(0,tmpidentification.length-1);\r\n            var params = {\r\n                \"ConsultarAPC\": {\r\n                    \"Model\": {\r\n                        \"EsPrueba\": 0,\r\n                        \"ForzarBusqueda\": 0,\r\n                        \"IdentificacionConsulta\": identification,//\"8-773-1899\",\r\n                        \"PasswordAPC\": \"Banesco19.\",\r\n                        \"UltimusProcess\": 7,\r\n                        \"UsuarioAPC\": \"WTIBANESCO001\"\r\n                    }\r\n                }\r\n            }\r\n\r\n            //servicio retorna la info de APC del cliente\r\n            const result = await this.post(url.URL_CORE_APCINFO, params);\r\n        \r\n            if(Array.isArray(result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)) {\r\n                // myVatToTest is an array\r\n                //Armamos la data a mostrar en pantalla\r\n                result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function (item, i) {\r\n                try {\r\n                    var deudas = {debtype:\"short\",facilityType:item.dc_descr_corta_rela, bank:item.dc_nom_asoc,balance:Number(currencyData.getRealValue(item.dc_saldo_actual)),approvedAmount:Number(currencyData.getRealValue(item.dc_monto_original)),variation:0,startDate:item.dc_fec_inicio_rel,endDate:item.dc_fec_fin_rel}\r\n                    deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                    if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                        deudas.debtype=\"long\";     \r\n                        dataResult.longTermresult.push(deudas)               \r\n                    }\r\n                    else{\r\n                        dataResult.shortTermresult.push(deudas)                    \r\n                    }\r\n                    deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                    deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                        \r\n                    //dataResult.push(deudas);\r\n                }\r\n                catch (err) { }\r\n                })\r\n            } \r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n                    var deudas = {debtype:\"short\",facilityType:item.dc_descr_corta_rela, bank:item.dc_nom_asoc,balance:Number(currencyData.getRealValue(item.dc_saldo_actual)),approvedAmount:Number(currencyData.getRealValue(item.dc_monto_original)),variation:0,startDate:item.dc_fec_inicio_rel,endDate:item.dc_fec_fin_rel}\r\n                    deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                    if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                        deudas.debtype=\"long\";     \r\n                        dataResult.longTermresult.push(deudas)               \r\n                    }\r\n                    else{\r\n                        dataResult.shortTermresult.push(deudas)                    \r\n                    }\r\n                    deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                    deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                    //dataResult.push(deudas);\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch(err){}\r\n        \r\n        ////// Credit - Cortos Plazos\r\n        try{\r\n            var params = { PartyId: partyId }\r\n            var data = qs.stringify(params);\r\n                    \r\n            //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018    \r\n            //servicio retorna las cuentas del cliente\r\n            var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);                \r\n            \r\n            //var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\r\n                        \r\n            if(Array.isArray(result.Party.PartyInfo.CreditLine)) {\r\n            \r\n                result.Party.PartyInfo.CreditLine.forEach((item)=>{\r\n                    try {\r\n                        /*\r\n                        {\r\n                    \"AvailableAmt\": {\r\n                        \"Amt\": \"75,000.00\"\r\n                    },\r\n                    \"CreditLineId\": \"800048231.0010000.01\",\r\n                    \"CreditLineNum\": \"01\",\r\n                    \"CreditType\": {\r\n                        \"Desc\": \"LÃ­mite Global - rotativo\"\r\n                    },\r\n                    \"CurCode\": \"USD\",\r\n                    \"IntRateType\": {\r\n                        \"Desc\": \"Fixed\"\r\n                    },\r\n                    \"OnlineAmt\": {\r\n                        \"Amt\": \"125000.00\"\r\n                    },\r\n                    \"PendingAmt\": {\r\n                        \"Amt\": \"50,000.00\"\r\n                    },\r\n                    \"Rating\": \"01\",\r\n                    \"SecuredAmt\": {\r\n                        \"Amt\": \"0.00\"\r\n                    }\r\n                }\r\n                        */\r\n                       \r\n                        var deudas = {debtype:\"short\",facilityType:item.CreditType.Desc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")}\r\n                        //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                        if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                            deudas.debtype=\"long\";     \r\n                            dataResult.longTermresult.push(deudas)               \r\n                        }\r\n                        else{\r\n                            dataResult.shortTermresult.push(deudas)                    \r\n                        }\r\n                    \r\n                        deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                        deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n                    \r\n                    var deudas = {debtype:\"short\",facilityType:item.CreditType.Desc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AvailableAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.OnlineAmt.Amt)),variation:Number(currencyData.getRealValue(item.PendingAmt.Amt)),startDate:moment().format(\"YYYY-MM-DD\"),endDate:moment().format(\"YYYY-MM-DD\")}\r\n                            //deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                    if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                        deudas.debtype=\"long\";     \r\n                        dataResult.longTermresult.push(deudas)               \r\n                    }\r\n                    else{\r\n                        dataResult.shortTermresult.push(deudas)                    \r\n                    }\r\n                \r\n                    deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                    deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                }\r\n                catch (err) { }\r\n            }\r\n        }\r\n        catch(err){}\r\n        \r\n        ////// loands - Cortos y Largos Plazos\r\n        try{\r\n            let params = {\r\n                PartyId: partyId\r\n            }\r\n            let data = qs.stringify(params);\r\n            var result = await this.get(url.URL_CORE_FACILIDADES + \"?\" + data);\r\n            \r\n            if(Array.isArray(result.AcctLoans.AcctLoan)) {\r\n            \r\n                result.AcctLoans.AcctLoan.forEach((item)=>{\r\n                    if(item.AcctKey !== null){\r\n                        try {\r\n                            /*\r\n                            {\r\n                    \"Category\": \"01\",\r\n                    \"Desc\": \"340000071156\",\r\n                    \"ProductDesc\": \"Prestamo Comercia\",\r\n                    \"AcctOpeningInfo\": {\r\n                        \"InitialAmt\": {\r\n                            \"Amt\": \"120000.00\",\r\n                            \"CurCode\": \"USD\"\r\n                        },\r\n                        \"OpenDt\": \"2019-08-02\"\r\n                    },\r\n                    \"CreditAcctData\": {\r\n                        \"DueDt\": \"2028-07-05\",\r\n                        \"CreditAcctPmtInfo\": null\r\n                    },\r\n                    \"AcctKey\": {\r\n                        \"AcctId\": \"1020243542\"\r\n                    },\r\n                    \"AcctBal\": [\r\n                        {\r\n                            \"BalType\": \"Balance\",\r\n                            \"CurAmt\": {\r\n                                \"Amt\": \"87245.92\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"AcctMember\": [\r\n                        {\r\n                            \"PartyRole\": {\r\n                                \"Cod\": \"TITULAR/DEUDOR\"\r\n                            },\r\n                            \"PartyName\": {\r\n                                \"ShortName\": \"ASI DEVELOPMENT\"\r\n                            },\r\n                            \"PartyKey\": null\r\n                        }\r\n                    ]\r\n                }\r\n                            */\r\n                           \r\n                            var deudas = {debtype:\"short\",facilityType:item.ProductDesc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")}\r\n                            deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                            if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                                deudas.debtype=\"long\";     \r\n                                dataResult.longTermresult.push(deudas)               \r\n                            }\r\n                            else{\r\n                                dataResult.shortTermresult.push(deudas)                    \r\n                            }\r\n                        \r\n                            deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                            deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                        }                        \r\n                        catch (err) { }\r\n                    }                    \r\n                })\r\n            }\r\n            else {\r\n                // myVarToTest is not an array\r\n                //Armamos la data a mostrar en pantalla\r\n                var item = result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                if(item.AcctKey !== null){\r\n                    try {\r\n                    \r\n                        var deudas = {debtype:\"short\",facilityType:item.ProductDesc, bank:\"Banesco\",balance:Number(currencyData.getRealValue(item.AcctBal[0].CurAmt.Amt)),approvedAmount:Number(currencyData.getRealValue(item.AcctOpeningInfo.InitialAmt.Amt)),variation:0,startDate:moment(item.AcctOpeningInfo.OpenDt).format(\"YYYY-MM-DD\"),endDate:moment(item.CreditAcctData.DueDt).format(\"YYYY-MM-DD\")}\r\n                            deudas.variation=deudas.approvedAmount - deudas.balance;\r\n                            if(moment(deudas.endDate).diff(deudas.startDate, 'years')>1){\r\n                                deudas.debtype=\"long\";     \r\n                                dataResult.longTermresult.push(deudas)               \r\n                            }\r\n                            else{\r\n                                dataResult.shortTermresult.push(deudas)                    \r\n                            }\r\n                        \r\n                            deudas.endDate = moment(deudas.endDate).format(\"YYYY-MM-DD\")\r\n                            deudas.startDate = moment(deudas.startDate).format(\"YYYY-MM-DD\")\r\n                    }   \r\n                    catch (err) { }\r\n                }\r\n                \r\n            }\r\n        }\r\n        catch(err){}\r\n        \r\n        console.log(\"getShortLongTermDebts2\",dataResult);\r\n        \r\n        return dataResult;\r\n    }\r\n    \r\n\r\n    \r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                                 Retorna los balances por meses                                 */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getAverages(AcctReference) {\r\n        if(AcctReference.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            AcctReference: AcctReference\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     Obtenemos una lista de las importaciones que se generen                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getListaImportaciones(PartyId) {\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_IMPORTACIONES + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                 Obtenemos una lista de las exportaciones que se hayan generado                 */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getListaExportaciones(PartyId) {\r\n\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_EXPORTACIONES + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                          Obtenemos los prestamos entrantes existentes                          */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamosEntrantes(PartyId) {\r\n\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_INGOING + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                    Obtenemos una lista de todos los presstamos que ya salen                    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamosSalientes(PartyId) {\r\n\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_OUTOGOING + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*               Obtenemos la lista de creditos que existen en la actualidad activos              */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCreditosExistentes(PartyId) {\r\n\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_CREDITOS + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                                        Creditos en linea                                       */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getCreditosLine(PartyId) {\r\n\r\n        if(PartyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*     Nos devuelve todas las transacciones que ha realizado el usuario por un rango de fechas    */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getTransactions(AcctId, EndDt, StartDt) {\r\n\r\n        if(AcctId.length <= 0 || EndDt.length <= 0 || StartDt.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        // ejemplo del dataField\r\n        // AcctId=1001553287&EndDt=2021-10-16T09:32:51&StartDt=2021-09-16T00:00:00\r\n        let params = {\r\n            AcctId: AcctId,\r\n            EndDt: EndDt,\r\n            StartDt: StartDt,\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                                  Obtenemos todos los prestamos                                 */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamos(PartyId) {\r\n\r\n        if(PartyId.length <= 0 ){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: PartyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        var result = await this.get(url.URL_CORE_PRESTAMOS + \"?\" + data);\r\n\r\n        return result;\r\n    }\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*               Obtenemos toda la informacion del prestamos dentro de una actividad              */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    async getPrestamosInfo(AcctId) {\r\n\r\n        if(AcctId.length <= 0 ){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            AcctId: AcctId\r\n        }\r\n        let data = qs.stringify(params);\r\n\r\n        if(AcctId.length > 0){\r\n            var result = await this.get(url.URL_CORE_PRESTAMOS_INFORMATION + \"?\" + data);\r\n            return result;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*               Obtenemos toda la informacion del Reporting Services                            */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n\r\n    //https://qa.api.ob.banesco.com.pa/APIUtil/v1/reports/atoms?FECHA=20210930&CLIENTE=600167424\r\n\r\n    async getReportingServices(partyId) { //partyId -> numero del cliente en T24\r\n\r\n        if(partyId.length <= 0 ){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            FECHA: moment().add(-2,'months').format(\"YYYYMMDD\"), //preguntar pq la fecha no se puede cambiar\r\n            CLIENTE: partyId\r\n        }\r\n        let data = qs.stringify(params);\r\n        \r\n        var result = await this.get(url.URL_CORE_REPORTINGSERVICES + \"?\" + data);\r\n\r\n        console.log(\"getReportingServices\",result);   \r\n        \r\n            return result;\r\n\r\n        /*{\r\n    \"records\": [\r\n        {\r\n            \"FECHA\": \"20210930\",\r\n            \"T_CREDITO\": \"002\",\r\n            \"T_FACILIDAD\": \"05\",\r\n            \"CLASIFICACION\": \"02\",\r\n            \"LOC_EXT\": \"L\",\r\n            \"REGION\": \"014\",\r\n            \"CLIENTE_RUC\": \"8-805-442\",\r\n            \"TNO_EMPRESA\": \"06\",\r\n            \"NOMBRE_CLIENTE\": \"ROBERTO ANTONIO SANCHEZ CONCEPCION\",\r\n            \"GRUPO_ECON\": \"ROBERTO ANTONIO SANCHEZ CONCEPCION\",\r\n            \"GRUPO_RUC\": \"8-805-442\",\r\n            \"T_RELACION\": \"P999\",\r\n            \"ACT_ECON\": \"2103\",\r\n            \"TASA_INT\": \"10.5\",\r\n            \"MONTO_IN\": 5400,\r\n            \"INT_PC\": 0,\r\n            \"FECHA_INI\": \"20150616\",\r\n            \"FECHA_FIN\": \"20230116\",\r\n            \"FECHA_REFIN\": \"NA\",\r\n            \"FECHA_RENEG\": \"20200817\",\r\n            \"G1\": \"0701\",\r\n            \"MONTO_G1\": 0,\r\n            \"G2\": \"NA\",\r\n            \"MONTO_G2\": 0,\r\n            \"G3\": \"NA\",\r\n            \"MONTO_G3\": 0,\r\n            \"G4\": \"NA\",\r\n            \"MONTO_G4\": 0,\r\n            \"G5\": \"NA\",\r\n            \"MONTO_G5\": 0,\r\n            \"PROV_REG\": 0,\r\n            \"PROV_NIIF\": 119.05,\r\n            \"PROV_PAIS\": 0,\r\n            \"SALDO\": 6401.61,\r\n            \"N_CUOTAS_VENCER\": \"7\",\r\n            \"X_VENCER30\": \"100.86\",\r\n            \"X_VENCER60\": \"100.86\",\r\n            \"X_VENCER90\": \"100.86\",\r\n            \"X_VENCER120\": \"100.86\",\r\n            \"X_VENCER180\": \"100.86\",\r\n            \"X_VENCER1A\": \"100.86\",\r\n            \"X_VENCER5A\": \"5796.45\",\r\n            \"X_VENCER10A\": \"0.00\",\r\n            \"X_VENCERM10A\": \"0.00\",\r\n            \"N_CUOTA_VENCIDAS\": \"0\",\r\n            \"VENCIDOS30\": \"0.00\",\r\n            \"VENCIDOS60\": \"0.00\",\r\n            \"VENCIDOS90\": \"0.00\",\r\n            \"VENCIDOS120\": \"0.00\",\r\n            \"VENCIDOS180\": \"0.00\",\r\n            \"VENCIDOS1A\": \"0.00\",\r\n            \"VENCIDOSM1A\": \"0.00\",\r\n            \"RANGO_MORA\": \"1. Al dÃ­a\",\r\n            \"DIAS_MORA\": 0,\r\n            \"PROX_CAP\": \"20211016\",\r\n            \"PER_CAP\": \"01\",\r\n            \"PROX_INT\": \"20211016\",\r\n            \"PER_INT\": \"01\",\r\n            \"CUOTA_XPAGAR\": \"100.86\",\r\n            \"SUCURSAL\": \"201\",\r\n            \"MONEDA\": \"USD\",\r\n            \"CUENTA_CONTABLE\": \"\",\r\n            \"PRODUCTO\": \"TDC\",\r\n            \"BANCA\": \"\",\r\n            \"SECTOR1\": \"PRESTACARD\",\r\n            \"SECTOR2\": \"\",\r\n            \"SECTOR3\": \"\",\r\n            \"SECTOR4\": \"PRESTACARD\",\r\n            \"PRODUCTO1\": \"TARJETA DE CREDITO CONSUMO\",\r\n            \"PRODUCTO2\": \"TDC\",\r\n            \"PRODUCTO3\": \"Prestacard Visa\",\r\n            \"NUM_OPS\": \"4466840182907004\",\r\n            \"NUM_CLIENTE\": \"600167424\",\r\n            \"CENTRO_COSTO\": \"\",\r\n            \"NUM_LINEA\": \"\",\r\n            \"COD_OFIC\": \"\",\r\n            \"COD_OFIC2\": \"\"\r\n        }\r\n    ],\r\n    \"Status\": {\r\n        \"StatusCode\": \"M0000\",\r\n        \"StatusDesc\": \"SUCCESS\"\r\n    }\r\n} */\r\n    }\r\n\r\n\r\n    //Retorna todos los colateralsId por numero de cliente\r\n    async getColaterals(partyId) { //Numero del cliente en T24\r\n\r\n        if(partyId.length <= 0 ){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            PartyId: partyId\r\n        }\r\n\r\n        let data = qs.stringify(params);\r\n\r\n        var dataResult = [];\r\n        try {\r\n\r\n            console.log(\"plage\");\r\n\r\n            //servicio retorna Pignorados\r\n            var result = await this.get(url.URL_CORE_PIGNORADO + \"?\" + data);\r\n\r\n            //Armamos la data a mostrar en pantalla\r\n            result.Collaterals.CollateralInfo.map(function (item, i) {\r\n                if (item.Collateral.CollateralKey.CollateralId !== null) {\r\n                    dataResult.push({ collateralId: item.Collateral.CollateralKey.CollateralId, facilityAmt: item.Collateral.CollateralAmt.Amt });\r\n                }\r\n\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.error(\"URL_CORE_PIGNORADO\", err);\r\n        }\r\n\r\n        console.log(\"dataResult\", dataResult);\r\n        return dataResult;\r\n    }\r\n\r\n    // retorna Detalle de Garantias\r\n    async getWarrantyDetails(collateralId, warrantyType) { //Numero del id colateral ... warrytype = Muebles, Inmuebles, Otros, Depositos\r\n\r\n        if(collateralId.length <= 0 || warrantyType.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = {\r\n            CollateralId: collateralId,\r\n            InqType: warrantyType\r\n        }\r\n\r\n        let data = qs.stringify(params);\r\n\r\n        try {\r\n            //servicio retorna Pignorados\r\n            const result = await this.get(url.URL_CORE_COLLATERALS + \"?\" + data);\r\n            return result\r\n            //Armamos la data a mostrar en pantalla\r\n            /*result.Collaterals.CollateralInfo.map(function(item, i){\r\n                if(item.Collateral.CollateralKey.CollateralId!==null){\r\n                    dataResult.push({collateralId: item.Collateral.CollateralKey.CollateralId,facilityAmt: item.Collateral.CollateralAmt.Amt});\r\n                }                                \r\n            })*/\r\n        }\r\n        catch (err) {\r\n            console.error(\"URL_CORE_PIGNORADO\", err);\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    //retorna movimientos de cuentas\r\n    async getAccountMovements(partyId) { //Numero de Cliente de T24\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n        \r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            throw new Error(result.Status.StatusCode + \" - \" + result.Status.StatusDesc);\r\n            return;\r\n        }\r\n\r\n        var dataResult = [];\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n            params = { AcctReference: item.AcctKey.AcctReference }\r\n            data = qs.stringify(params);\r\n            try {\r\n                var year = 0;                \r\n                var dtResult = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n                if(dtResult.Acct.AcctBal.length>0){                   \r\n                    // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                    var dt = {AcctId:item.AcctKey.AcctId, dataByYear:[]}\r\n                    for (var accItem of dtResult.Acct.AcctBal) {\r\n                        if(year !== Number(accItem.AverageBalanceDt.split(' ')[1])){\r\n                            year = Number(accItem.AverageBalanceDt.split(' ')[1]);\r\n                            dt.dataByYear.push({year,dataresult:[]})\r\n                        }\r\n                        \r\n                        var dtr = {\r\n                            \"year\": Number(accItem.AverageBalanceDt.split(' ')[1]), \r\n                            \"month\": accItem.AverageBalanceDt.split(' ')[0],\r\n                            \"amount\": accItem.CurAmt.Amt,\r\n                            \"deposits\": 0\r\n                        }\r\n                        dt.dataByYear[dt.dataByYear.length-1].dataresult.push(dtr);\r\n                    }\r\n                    /*dtResult.Acct.AcctBal.map(function (accItem, i) {  \r\n                        if(year !== Number(accItem.AverageBalanceDt.split(' ')[1])){\r\n                            year = Number(accItem.AverageBalanceDt.split(' ')[1]);\r\n                            dt.dataByYear.push({year,dataresult:[]})\r\n                        }                                                \r\n                        dt.dataByYear[dt.dataByYear.length-1].dataresult.push({\r\n                            \"year\": Number(accItem.AverageBalanceDt.split(' ')[1]), \r\n                            \"month\": accItem.AverageBalanceDt.split(' ')[0],\r\n                            \"amount\": accItem.CurAmt.Amt\r\n                        }); \r\n                    }) */                                       \r\n                    dataResult.push(dt);\r\n                }\r\n            }\r\n            catch (err) { }\r\n        }\r\n\r\n            //Para sacar los depositos\r\n            //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n            //servicio retorna los movimientos de cuentas del cliente                        \r\n        /*try{\r\n            for (var i = 0; i < dataResult.length; ++i) {\r\n                var dtResult = dataResult[i];\r\n                for (var p = 0; p < dtResult.dataByYear.length; ++p) {\r\n                    var dtYear = dtResult.dataByYear[p];\r\n                    var currentYear =dtYear.year;\r\n                    params = null; //dtResult.AcctId\r\n                    if(currentYear === Number(moment().format(\"YYYY\"))){\r\n                        params = { AcctId: dtResult.AcctId, EndDt:moment().format(\"YYYY-MM-DD[T]HH:mm:ss\"), StartDt:currentYear+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    else{\r\n                        params = { AcctId: dtResult.AcctId, EndDt:currentYear+\"-12-31T23:59:59\", StartDt:currentYear+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    data = qs.stringify(params);\r\n                    try{\r\n                        var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data); \r\n                        for (var depo of deposits.Trn) {\r\n                            if(depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0){\r\n                                var monthName = GetMontNameByNumber(moment(depo.EffDt).format('M'));\r\n                                var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\r\n                                    if(dataByMonth!==undefined){\r\n                        \r\n                                        dataByMonth.deposits= (Number(dataByMonth.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);\r\n                                    }\r\n                            }                    \r\n                        }        \r\n                    }\r\n                    catch(err){}\r\n                }\r\n            }\r\n        }\r\n        catch(err){}\r\n        */\r\n            //Para sacar los depositos\r\n            //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/balances/totals?CUENTA=120000086315&FECHA_INI=20220101&FECHA_FIN=20220330&PROMEDIO=S\r\n        \r\n        try{\r\n            for (var i = 0; i < dataResult.length; ++i) {\r\n                var dtResult = dataResult[i];\r\n                for (var p = 0; p < dtResult.dataByYear.length; ++p) {\r\n                    var dtYear = dtResult.dataByYear[p];\r\n                    var currentYear =dtYear.year;\r\n                    params = null; //dtResult.AcctId\r\n                    if(currentYear === Number(moment().format(\"YYYY\"))){\r\n                        params = { CUENTA: dtResult.AcctId, FECHA_INI:currentYear+\"0101\",FECHA_FIN:moment().format(\"YYYYMMDD\"),PROMEDIO:\"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    else{                        \r\n                        params = { CUENTA: dtResult.AcctId, FECHA_INI:currentYear+\"0101\",FECHA_FIN:currentYear+\"1231\",PROMEDIO:\"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                    }\r\n                    data = qs.stringify(params);\r\n                    try{\r\n                        var deposits = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data); \r\n                        for (var record of deposits.records) {\r\n                            console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\r\n                                \r\n                            var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\r\n                                var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\r\n                                if(dataByMonth!==undefined){                        \r\n                                        dataByMonth.deposits= (Number(record.monto)).toFixed(2);\r\n                                    }                    \r\n                        }        \r\n                    }\r\n                    catch(err){}\r\n                }\r\n            }\r\n        }\r\n        catch(err){}\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    async getAccountDeposits(partyId,year,month) { //Numero de Cliente de T24\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n        \r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n\r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            throw new Error(result.Status.StatusCode + \" - \" + result.Status.StatusDesc);\r\n            return;\r\n        }\r\n\r\n        var dataResult = [];\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n            try{\r\n                        year =Number(year).toString(\"00\");\r\n                        month = Number(month).toString(\"00\");\r\n                        var endDate = moment(year+\"-\"+month+\"-01\").endOf('month').format('DD');\r\n                \r\n                        params = { AcctId: item.AcctKey.AcctId, EndDt:year+\"-\"+month+\"-\"+endDate+\"T23:59:59\", StartDt:year+\"-\"+month+\"-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n                        \r\n                        data = qs.stringify(params);\r\n                        try{\r\n                            var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data); \r\n                            for (var depo of deposits.Trn) {\r\n                                if(depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0){\r\n                                    dataResult.push({deposits:Number(depo.TotalCurAmt.Amt)})    \r\n                                }\r\n                            }        \r\n                        }\r\n                        catch(err){}\r\n            }\r\n            catch(err){}\r\n        }\r\n            //Para sacar los depositos\r\n            //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n        \r\n        return dataResult;\r\n    }\r\n\r\n    //retorna movimientos de cuentas\r\n    async getApcInfo(identification) { //Numero de identificacion del cliente\r\n\r\n        if(identification.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        var tmpidentification = \"\";\r\n        identification.split('-').map((str)=> {\r\n            if(str.startsWith(\"0\")){\r\n                tmpidentification += str.replace(/^0+/, '')+\"-\";\r\n            }\r\n            else{\r\n                tmpidentification += str+\"-\";\r\n            }\r\n        })\r\n\r\n        identification = tmpidentification.substring(0,tmpidentification.length-1);        \r\n        var params = {\r\n            \"ConsultarAPC\": {\r\n                \"Model\": {\r\n                    \"EsPrueba\": 0,\r\n                    \"ForzarBusqueda\": 0,\r\n                    \"IdentificacionConsulta\": identification,//\"8-773-1899\",\r\n                    \"PasswordAPC\": \"Banesco19.\",\r\n                    \"UltimusProcess\": 7,\r\n                    \"UsuarioAPC\": \"WTIBANESCO001\"\r\n                }\r\n            }\r\n        }\r\n\r\n        //servicio retorna la info de APC del cliente\r\n        const result = await this.post(url.URL_CORE_APCINFO, params);\r\n        \r\n        var dataResult = [];\r\n        try {\r\n            if(Array.isArray(result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC)){\r\n                //Armamos la data a mostrar en pantalla\r\n                result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC.map(function (item, i) {\r\n                    try {\r\n                        dataResult.push({\r\n                            \"year\": moment(item.dc_fec_inicio_rel).format(\"YYYY\"), \"month\": moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\r\n                            \"initialAmount\": item.dc_monto_original, \"actualAmount\": item.dc_saldo_actual, \"asociation\": item.dc_nom_asoc, \"source\": item.dc_descr_corta_rela\r\n                        });\r\n                    }\r\n                    catch (err) { }\r\n                })\r\n            }\r\n            else{\r\n                var item =result.ConsultarAPCResponse.ConsultarAPCResult.DetCompromisoAPC.DetCompromisoAPC;\r\n                try {\r\n                    dataResult.push({\r\n                        \"year\": moment(item.dc_fec_inicio_rel).format(\"YYYY\"), \"month\": moment(item.dc_fec_inicio_rel).format(\"MMMM\"),\r\n                        \"initialAmount\": item.dc_monto_original, \"actualAmount\": item.dc_saldo_actual, \"asociation\": item.dc_nom_asoc, \"source\": item.dc_descr_corta_rela\r\n                    });\r\n                }\r\n                catch (err) { }\r\n            }\r\n            \r\n        }\r\n        catch (err) { console.error(err); }\r\n\r\n        return dataResult;\r\n    }\r\n\r\n    async getEconomicGroup(partyId) { //partyId -> numero del cliente en T24\r\n        try{\r\n            let params = {PartyId: partyId}\r\n            let data = qs.stringify(params);\r\n            \r\n            var result = await this.get(url.URL_CORE_COMPANIESRELATIONS + \"?\" + data);\r\n    \r\n            console.log(\"getEconomicGroup\",result);\r\n            \r\n            return result.PartyPartyRels.PartyPartyRel[0].PartyPartyRelInfo.PartyRelName[0];    \r\n        }\r\n        catch(err){}\r\n        if(partyId.length <= 0 ){\r\n            return undefined;\r\n        }\r\n        \r\n        return null;\r\n        \r\n    }\r\n\r\n    async getReciprocity(partyId, year, month){\r\n\r\n            if(partyId.length <= 0){\r\n                return undefined;\r\n            }\r\n\r\n            year=Number(year);\r\n            \r\n            let params = { PartyId: partyId }\r\n            let data = qs.stringify(params);\r\n            \r\n            //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n        \r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            return undefined;\r\n        }\r\n\r\n        var resultToReturn={averageAmt:0 ,deposits:0}\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n            params = { AcctReference: item.AcctKey.AcctReference }\r\n            data = qs.stringify(params);\r\n            try {\r\n                var dtResult = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n                if(dtResult.Acct.AcctBal.length>0){                   \r\n                    // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                    for (var accItem of dtResult.Acct.AcctBal) {\r\n                        var dMonth = accItem.AverageBalanceDt.split(' ')[0]\r\n                        if(Number(accItem.AverageBalanceDt.split(' ')[1]) === year && dMonth.indexOf(month) >= 0){\r\n                            resultToReturn.averageAmt = (Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);  \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (err) { }\r\n\r\n            //Para sacar los depositos\r\n            try{\r\n                    var currentYear =year;                   \r\n                    var monthNum=GetMontNumberByName(month);\r\n                    var endDate = moment(year+\"-\"+monthNum+\"-01\").endOf('month').format('DD'); params = null; //dtResult.AcctId\r\n                    params = { CUENTA: item.AcctKey.AcctId, FECHA_INI:currentYear+monthNum+\"01\",FECHA_FIN:currentYear+monthNum+endDate,PROMEDIO:\"S\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n             \r\n                    data = qs.stringify(params);\r\n                    try{\r\n                        var deposits = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data); \r\n                        for (var record of deposits.records) {\r\n                            //console.log(\"depositsMonth\",record.Fecha.toString().substring(4,6));\r\n                                \r\n                            //var monthName = GetMontNameByNumber(record.Fecha.toString().substring(4,6));\r\n                                //var dataByMonth = dtYear.dataresult.find(x => x.month.indexOf(monthName)>= 0);\r\n                                //if(dataByMonth!==undefined){                        \r\n                                    resultToReturn.deposits=  (Number(resultToReturn.deposits) + Number(record.monto)).toFixed(2);\r\n                                  //  }                    \r\n                        }        \r\n                    }\r\n                    catch(err){}\r\n            }\r\n            catch(err){}\r\n    \r\n        }            \r\n        return resultToReturn;\r\n    }\r\n    async getReciprocityByYear(partyId, year){\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        year=Number(year);\r\n        \r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n        \r\n        //servicio retorna las cuentas del cliente\r\n    var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n        \r\n    if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n        return undefined;\r\n    }\r\n\r\n    console.log(\"getReciprocityByYear\",result);\r\n            \r\n    var resultToReturn={averageAmt:0 ,deposits:0}\r\n    for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n        var item = result.Accounts.Acct[i];\r\n        params = { AcctReference: item.AcctKey.AcctReference }\r\n        data = qs.stringify(params);\r\n        try {\r\n            var dtResult = await this.get(url.URL_CORE_AVERAGES + \"?\" + data);\r\n\r\n            if(dtResult.Acct.AcctBal.length>0){                   \r\n                // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                for (var accItem of dtResult.Acct.AcctBal) {\r\n                    var dMonth = accItem.AverageBalanceDt.split(' ')[0]\r\n                    if(Number(accItem.AverageBalanceDt.split(' ')[1]) === year){\r\n                        resultToReturn.averageAmt= (Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);  \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        //Para sacar los depositos\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n        try{\r\n            /*\r\n            //var monthN=GetMontNumberByName(month);\r\n            var endDate = moment(year+\"-12-01\").endOf('month').format('DD');\r\n            params = { AcctId: item.AcctKey.AcctId, EndDt:year+\"-12-\"+endDate+\"T23:59:59\", StartDt:year+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n            data = qs.stringify(params);\r\n            var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data); \r\n            console.log(\"getReciprocityByYear\",deposits);\r\n            for (var depo of deposits.Trn) {\r\n                if(depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0){\r\n                    resultToReturn.deposits= (Number(resultToReturn.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);                                   \r\n                }                    \r\n            }\r\n            */\r\n            console.log(\"getReciprocityByYear\",\"params\");\r\n            \r\n            var monthN = moment().forma(\"MM\");\r\n            var endDate = moment(year + monthN +\"01\").endOf('month').format('DD');\r\n            params = { CUENTA: item.AcctKey.AcctId, FECHA_INI:year+\"0101\", FECHA_FIN:year+monthN+endDate } \r\n            data = qs.stringify(params);\r\n            \r\n            console.log(\"getReciprocityByYear\",params);\r\n            \r\n            var deposits = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data); \r\n            console.log(\"getReciprocityByYear\",deposits);\r\n            for (var depo of deposits.Trn) {\r\n                resultToReturn.deposits= (Number(resultToReturn.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);                                   \r\n            }\r\n        }\r\n        catch(err){}\r\n    }            \r\n    return resultToReturn;\r\n    }   \r\n\r\n    async getDeposits(partyId, year, month){\r\n\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/balances/totals\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        year=Number(year);\r\n        \r\n        let params = { PartyId: partyId }\r\n        let data = qs.stringify(params);\r\n        \r\n        //servicio retorna las cuentas del cliente\r\n        var result = await this.get(url.URL_CORE_ACCOUNTSPARTIES + \"?\" + data);\r\n        \r\n        if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n            return undefined;\r\n        }\r\n\r\n        var resultToReturn={averageAmt:0 ,deposits:0}\r\n        for (var i = 0; i < result.Accounts.Acct.length; i++) {\r\n            var item = result.Accounts.Acct[i];\r\n\r\n            //CUENTA=120000086315&FECHA_INI=20220101&FECHA_FIN=20220330&PROMEDIO=S\r\n            var endDate = moment(year+\"-12-01\").endOf('month').format('DD');\r\n            params = { CUENTA: item.AcctKey.AcctId, FECHA_INI:year+\"0101\", FECHA_FIN:year+\"12\"+endDate } \r\n            data = qs.stringify(params);\r\n            try {\r\n                var dtResult = await this.get(url.URL_CORE_BALANCETOTALS + \"?\" + data);\r\n                if(dtResult.Acct.AcctBal.length>0){                   \r\n                    // queda pendiente el tema de los depositos con el servicio de banesco  \r\n                    for (var accItem of dtResult.Acct.AcctBal) {\r\n                        if(Number(accItem.AverageBalanceDt.split(' ')[1]) === year){\r\n                            resultToReturn.averageAmt= (Number(resultToReturn.averageAmt)+Number(accItem.CurAmt.Amt)).toFixed(2);  \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (err) { }\r\n\r\n        //Para sacar los depositos\r\n        //https://qa.api.ob.banesco.com.pa/acct/v1/accounts/transactions?AcctId=1000129123\r\n        //servicio retorna los movimientos de cuentas del cliente                        \r\n        try{\r\n            //var monthN=GetMontNumberByName(month);\r\n            var endDate = moment(year+\"-12-01\").endOf('month').format('DD');\r\n            params = { AcctId: item.AcctKey.AcctId, EndDt:year+\"-12-\"+endDate+\"T23:59:59\", StartDt:year+\"-01-01T00:00:00\" } //EndDt=2021-10-31T09:32:51&StartDt=2021-05-01T00:00:00\r\n            data = qs.stringify(params);\r\n            var deposits = await this.get(url.URL_CORE_TRANSACCTIONS + \"?\" + data); \r\n            console.log(\"getReciprocityByYear\",deposits);\r\n            for (var depo of deposits.Trn) {\r\n                if(depo.Desc.indexOf(\"CREDITO A CONTRATO\") < 0 && depo.Desc.indexOf(\"Intereses - Capitalizables\") < 0){\r\n                    resultToReturn.deposits= (Number(resultToReturn.deposits) + Number(depo.TotalCurAmt.Amt)).toFixed(2);                                   \r\n                }                    \r\n            }\r\n        }\r\n        catch(err){}\r\n    }            \r\n    return resultToReturn;\r\n    \r\n    }\r\n\r\n    /// Obtener el serial de la linea -- Parametros: NumeroT24 y Codigo Facilidad\r\n    async getLineSerial(partyId, facilityTypeCode){\r\n\r\n        try{\r\n            //partyId=\"800048231\"; facilityTypeCode=\"10000\"\r\n            \r\n            if(partyId.length <= 0){\r\n                return undefined;\r\n            }\r\n                    \r\n            let params = { PartyId: partyId }\r\n            let data = qs.stringify(params);\r\n                    \r\n            //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018\r\n    \r\n            //servicio retorna las cuentas del cliente\r\n            var result = await this.get(url.URL_CORE_CREDITOS_LINE + \"?\" + data);                \r\n            \r\n            var dataResults = result.Party.PartyInfo.CreditLine.filter(x => x.CreditLineId.split(\".\")[1].indexOf(facilityTypeCode) >= 0)\r\n            \r\n            var lineNumber=1;\r\n            dataResults.forEach((dt)=>{\r\n                lineNumber = Number(dt.CreditLineId.split(\".\")[2])>lineNumber?Number(dt.CreditLineId.split(\".\")[2]):lineNumber;            \r\n            })\r\n                \r\n            while(facilityTypeCode.length < 7){\r\n                facilityTypeCode=\"0\"+facilityTypeCode;\r\n            }\r\n            \r\n            if(lineNumber.toString().length<2){\r\n                lineNumber = (\"0\" + (lineNumber+1).toString()).slice(-2);            \r\n            }\r\n            else{\r\n                lineNumber=lineNumber.toString();\r\n            }\r\n\r\n            var lineserial = partyId + \".\" +facilityTypeCode+\".\"+lineNumber;\r\n            console.log(\"lineas\",lineserial);\r\n\r\n            return lineserial;\r\n        }\r\n        catch(err){}\r\n\r\n        return null;\r\n    }\r\n    ///Creacion de Linea para desembolso\r\n    //numero de linea = numero de cliente + tipo de linea + serial === EJ: 600197109.0011000.01\r\n    \r\n    //https://qa.api.ob.banesco.com.pa/APIUtil/v1/catalogs?catalog_name=LIMIT REFERENCE&parent_catalog_name=&keyword=  \r\n    //===> Catalogo de Tipo de Lineas\r\n    \r\n    //https://qa.api.ob.banesco.com.pa/party/v1/parties/credits?PartyId=600088018  \r\n    //===> Obtenemos todas las lineas y tomamos el total + 1 => Mas serial\r\n    async newline(partyId, facilityType){\r\n\r\n        if(partyId.length <= 0){\r\n            return undefined;\r\n        }\r\n\r\n        // Garantia loans/Colateral\r\n        //https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/collaterals\r\n    \r\n        // Desembolso\r\n        //https://qa.api.ob.banesco.com.pa/acctloan/v1/loans\r\n        \r\n        //lineas\r\n        //https://qa.api.ob.banesco.com.pa/acctloan/v1/loans/credits/lines/limits\r\n        var data = \r\n        {\r\n     \"CreditLine\": {\r\n       \"Activity\": {\r\n         \"Cod\": \"1413\"  //-> Cod. Actividad Economica\r\n       },\r\n       \"AuthType\": \"99\", //-> ??\r\n       \"AutonomyCode\": {\r\n         \"Cod\": \"9999\" //-> Codigo de la Autonomia No lo tenemos\r\n       },\r\n       \"AutonomyUser\": \"1\", //-> Usuario de Autonomia que esta login\r\n       \"CreditLimit\": {\r\n         \"AdviseAmt\": {\r\n           \"Amt\": \"25,000.00\", //-> Monto de La Facilidad\r\n           \"CurCode\":\"USD\" //-> Codigo Moneda\r\n         },\r\n         \"Allow\":{\r\n             \"ProductData\":{\r\n                \"Product\":{\r\n                    \"Cod\":\"1000\", // -> Tipo de Facilidad\r\n                }\r\n             }\r\n         },\r\n         \"AllowNetting\": \"N\", // -> ?? FIJO\r\n         \"ApprovalDt\": \"2022-02-02\", // -> Fecha de Aprobacion\r\n         \"AvailDt\": \"2022-02-02\",    // -> Fecha de Propuesta\r\n         \"AvailMarker\": \"Y\", // -> ?? FIJO\r\n         \"CountryRisk\": [ // -> Pais de riesgo\r\n           {\r\n             \"Country\": {\r\n               \"CountryCode\": \"PA\" // -> Codigo Pais de riesgo\r\n             },\r\n             \"Percent\": \"100\" // -> ??\r\n           }\r\n         ],\r\n         \"CreditLimitKey\": {\r\n           \"CreditLimitId\": \"600197109.0011000.01\" // -> numero de cliente + tipo de linea + mas serial\r\n         },\r\n         \"CurCode\": \"USD\", //-> Tipo de Moneda\r\n         \"DeadLineDt\": \"2022-02-02\",  //Fecha del dia\r\n         \"DueDt\": \"2023-02-02\",     //Fecha de expiracion\r\n         \"LimitAmt\": {\r\n           \"Amt\": \"25,000.00\" //-> Monto de La Linea\r\n         },\r\n         \"LimitAmtType\": \"FIXED\", //-> FIXED/VARIABLE\r\n         \"LimitReject\": \"Y\", // -> YES/NO ??\r\n         \"MaxCurAmt\": {\r\n           \"Amt\": \"25,000.00\" //-> Monto de La Linea\r\n         },\r\n         \"ProposalDt\": \"2022-02-02\", //Fecha Propuesta\r\n         \"ReviewDt\": \"2023-02-02\", //Fecha Revision\r\n         \"ReviewFreq\":{\r\n             \"FreqValue\":\"20230330M1230\" // YYYY MM DD ... codigo A/M/D ... cantidad de meses, el dia especifico\r\n         },\r\n         \"Signatories\": {\r\n           \"Signatory\": [\r\n             {\r\n               \"PartyKey\": {\r\n                 \"PartyId\": \"45469\" //Numero del Cliente T24\r\n               }\r\n             }\r\n           ]\r\n         }\r\n       }\r\n     }\r\n   }\r\n   \r\n   var result = await this.put(url.URL_CORE_LINES, data);\r\n\r\n    \r\n    if (result.Status.StatusCode !== OPTs.ResponseT24_STATUSOK) {\r\n        return undefined;\r\n    }\r\n\r\n    \r\n    return result;\r\n}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}