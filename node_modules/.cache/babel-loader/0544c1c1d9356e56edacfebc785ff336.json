{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\components\\\\PropuestaCreditoComercial\\\\facilities\\\\modalNewFacility\\\\ProposalSection.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { translationHelper } from '../../../../helpers';\nimport Select from \"react-select\";\nimport PropTypes from 'prop-types';\nimport { Row, Col, Label } from \"reactstrap\";\nimport { AvForm, AvField } from \"availity-reactstrap-validation\";\nimport AvGroup from \"availity-reactstrap-validation/lib/AvGroup\";\nimport { BackendServices, CoreServices } from \"../../../../services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProposalSection = /*#__PURE__*/React.forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  React.useImperativeHandle(ref, () => ({\n    validateForm: () => {\n      const form = document.getElementById('frmFacilidades');\n      form.requestSubmit();\n    },\n    getFormValidation: () => {\n      return formValid;\n    },\n    dataReturn\n  }));\n  const api = new BackendServices();\n  const apiCoreServices = new CoreServices();\n  const [dataReturn, setdataReturn] = useState({\n    proposalTypeId: null,\n    proposalTypeName: null,\n    facilityTypeId: null\n  });\n  const [formValid, setFormValid] = useState(false);\n  const [tipoPropuesta, settipoPropuesta] = useState(null);\n  const [tipoPropuestaSelect, settipoPropuestaSelect] = useState(undefined);\n  const [propuestaSet, setpropuestaSet] = useState(null);\n  const [tipoPropuestaRequerido, settipoPropuestaRequerido] = useState(false);\n  const [subPropuesta, setsubPropuesta] = useState(null);\n  const [subPropuestaSelect, setsubPropuestaSelect] = useState(undefined);\n  const [subPropuestaSet, setsubPropuestaSet] = useState(null);\n  const [subPropuestaRequerido, setsubPropuestaRequerido] = useState(false);\n  const [tipoFacilidad, settipoFacilidad] = useState(null);\n  const [tipoFacilidadSelect, settipoFacilidadSelect] = useState(undefined);\n  const [tipoFacilidadSet, settipoFacilidadSet] = useState(null);\n  const [tipoFacilidadRequerido, settipoFacilidadRequerido] = useState(false);\n  const t = translationHelper('commercial_credit');\n\n  function handleSubmit() {\n    // if (propuestaSet == \"\" || propuestaSet == null) {\n    //   settipoPropuestaRequerido(true);\n    //   return;\n    // } else {\n    //   settipoPropuestaRequerido(false);\n    // }\n    // if (subPropuestaSet == \"\" || subPropuestaSet == null) {\n    //   setsubPropuestaRequerido(true);\n    //   return;\n    // } else {\n    //   setsubPropuestaRequerido(false);\n    // }\n    // if (tipoFacilidadSet == \"\" || tipoFacilidadSet == null) {\n    //   settipoFacilidadRequerido(true);\n    //   return;\n    // } else {\n    //   settipoFacilidadRequerido(false);\n    // }\n    dataReturn.proposalTypeId = propuestaSet;\n    dataReturn.proposalTypeName = subPropuestaSet;\n    dataReturn.facilityTypeId = tipoFacilidadSet;\n    setdataReturn(dataReturn);\n    setFormValid(true);\n  }\n\n  React.useEffect(() => {\n    // Read Api Service data\n    initializeData();\n  }, []);\n  React.useEffect(() => {\n    console.log(props); // Read Api Service data\n\n    settipoPropuestaRequerido(props.validation.tipoPropuestaRequerido);\n    setsubPropuestaRequerido(props.validation.subPropuestaRequerido);\n    settipoFacilidadRequerido(props.validation.tipoFacilidadRequerido);\n  }, [props]);\n  React.useEffect(() => {\n    // Read Api Service data \n    var defaultVal = null;\n    settipoPropuestaSelect(undefined);\n    setsubPropuestaSelect(undefined);\n    settipoFacilidadSelect(undefined);\n\n    try {\n      if (tipoPropuesta.length > 0 && props.dataSet.proposalTypeId !== null && tipoPropuestaSelect === undefined) {\n        defaultVal = tipoPropuesta.find(x => x.value === props.dataSet.proposalTypeId);\n\n        if (defaultVal !== undefined) {\n          settipoPropuestaSelect(defaultVal);\n        }\n      }\n\n      if (subPropuesta.length > 0 && props.dataSet.proposalTypeName !== null && subPropuestaSelect === undefined) {\n        defaultVal = subPropuesta.find(x => x.value === props.dataSet.proposalTypeName);\n\n        if (defaultVal !== undefined) {\n          setsubPropuestaSelect(defaultVal);\n        }\n      }\n\n      if (tipoFacilidad.length > 0 && props.dataSet.facilityTypeId !== null && tipoFacilidadSelect === undefined) {\n        defaultVal = tipoFacilidad.find(x => x.value === props.dataSet.facilityTypeId);\n\n        if (defaultVal !== undefined) {\n          settipoFacilidadSelect(defaultVal);\n        }\n      }\n    } catch (err) {}\n  }, [props]);\n\n  function initializeData() {\n    api.retrieveProposalType().then(response => {\n      if (response === null) {\n        return;\n      }\n\n      let json = [];\n\n      for (let i = 0; i < response.length; i++) {\n        json.push({\n          label: response[i][\"description\"],\n          value: response[i][\"id\"]\n        });\n      }\n\n      settipoPropuesta(json);\n    }).catch(error => {\n      console.error('api error: ', error);\n    });\n    api.retrieveSubproposalType().then(response => {\n      if (response === null) {\n        return;\n      }\n\n      let json = [];\n\n      for (let i = 0; i < response.length; i++) {\n        json.push({\n          label: response[i][\"description\"],\n          value: response[i][\"id\"]\n        });\n      }\n\n      setsubPropuesta(json);\n    }).catch(error => {\n      console.error('api error: ', error);\n    });\n    api.retrieveFacilityType().then(response => {\n      if (response === null) {\n        return;\n      }\n\n      let json = [];\n\n      for (let i = 0; i < response.length; i++) {\n        json.push({\n          label: response[i][\"description\"],\n          value: response[i][\"id\"]\n        });\n      }\n\n      settipoFacilidad(json);\n    }).catch(error => {\n      console.error('api error: ', error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: t(\"Proposal\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: \"4\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"proposalType\",\n          children: t(\"Proposal Type\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: e => {\n            settipoPropuestaSelect(tipoPropuesta.find(x => x.value === e.value));\n            setpropuestaSet(e.value);\n            dataReturn.proposalTypeId = e.value;\n            setdataReturn(dataReturn);\n          },\n          options: tipoPropuesta,\n          placeholder: t(\"Select\"),\n          value: tipoPropuestaSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), props.validation.tipoPropuestaRequerido ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"message-error-parrafo\",\n          children: t(\"Required\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: \"4\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"subproposalType\",\n          children: t(\"SubProposal Type\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: e => {\n            setsubPropuestaSelect(subPropuesta.find(x => x.value === e.value));\n            setsubPropuestaSet(e.value);\n            dataReturn.proposalTypeName = e.value;\n            setdataReturn(dataReturn);\n          },\n          options: subPropuesta,\n          placeholder: t(\"Select\"),\n          value: subPropuestaSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), props.validation.subPropuestaRequerido ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"message-error-parrafo\",\n          children: t(\"Required\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: \"4\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"facilityType\",\n          children: t(\"Facility Type\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: e => {\n            settipoFacilidadSelect(tipoFacilidad.find(x => x.value === e.value));\n            settipoFacilidadSet(e.value);\n            dataReturn.facilityTypeId = e.value;\n            setdataReturn(dataReturn);\n          },\n          options: tipoFacilidad,\n          placeholder: t(\"Select\"),\n          value: tipoFacilidadSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), props.validation.tipoFacilidadRequerido ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"message-error-parrafo\",\n          children: t(\"Required\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: \"6\",\n        children: /*#__PURE__*/_jsxDEV(AvGroup, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            htmlFor: \"purpose\",\n            children: t(\"Purpose\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AvField, {\n            id: \"purpose\",\n            className: \"form-control\",\n            name: \"purpose\",\n            validate: {\n              required: {\n                value: true,\n                errorMessage: t(\"Required\")\n              }\n            },\n            type: \"textarea\",\n            value: props.dataSet.purpose,\n            rows: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: \"6\",\n        children: /*#__PURE__*/_jsxDEV(AvGroup, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            htmlFor: \"sublimits\",\n            children: t(\"Sub Limits\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AvField, {\n            id: \"sublimits\",\n            className: \"form-control\",\n            name: \"sublimits\",\n            value: props.dataSet.sublimits,\n            validate: {\n              required: {\n                value: true,\n                errorMessage: t(\"Required\")\n              }\n            },\n            type: \"textarea\",\n            rows: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n}, \"IqmWcpru1h9aSuwWIYxRJpzva6I=\", false, function () {\n  return [React.useImperativeHandle];\n}));\n_c2 = ProposalSection;\nProposalSection.propTypes = {\n  onSubmit: PropTypes.func\n};\nexport default ProposalSection;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProposalSection$React.forwardRef\");\n$RefreshReg$(_c2, \"ProposalSection\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/facilities/modalNewFacility/ProposalSection.js"],"names":["React","useState","translationHelper","Select","PropTypes","Row","Col","Label","AvForm","AvField","AvGroup","BackendServices","CoreServices","ProposalSection","forwardRef","props","ref","useImperativeHandle","validateForm","form","document","getElementById","requestSubmit","getFormValidation","formValid","dataReturn","api","apiCoreServices","setdataReturn","proposalTypeId","proposalTypeName","facilityTypeId","setFormValid","tipoPropuesta","settipoPropuesta","tipoPropuestaSelect","settipoPropuestaSelect","undefined","propuestaSet","setpropuestaSet","tipoPropuestaRequerido","settipoPropuestaRequerido","subPropuesta","setsubPropuesta","subPropuestaSelect","setsubPropuestaSelect","subPropuestaSet","setsubPropuestaSet","subPropuestaRequerido","setsubPropuestaRequerido","tipoFacilidad","settipoFacilidad","tipoFacilidadSelect","settipoFacilidadSelect","tipoFacilidadSet","settipoFacilidadSet","tipoFacilidadRequerido","settipoFacilidadRequerido","t","handleSubmit","useEffect","initializeData","console","log","validation","defaultVal","length","dataSet","find","x","value","err","retrieveProposalType","then","response","json","i","push","label","catch","error","retrieveSubproposalType","retrieveFacilityType","e","required","errorMessage","purpose","sublimits","propTypes","onSubmit","func"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,iBAAT,QAAkC,qBAAlC;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SACEC,GADF,EAEEC,GAFF,EAGEC,KAHF,QAIO,YAJP;AAMA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,gCAAhC;AACA,OAAOC,OAAP,MAAoB,4CAApB;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,sBAA9C;;AAGA,MAAMC,eAAe,gBAAGb,KAAK,CAACc,UAAN,SAAiB,CAACC,KAAD,EAAQC,GAAR,KAAgB;AAAA;;AACvDhB,EAAAA,KAAK,CAACiB,mBAAN,CAA0BD,GAA1B,EAA+B,OAAO;AACpCE,IAAAA,YAAY,EAAE,MAAM;AAClB,YAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAb;AACAF,MAAAA,IAAI,CAACG,aAAL;AACD,KAJmC;AAKpCC,IAAAA,iBAAiB,EAAE,MAAM;AACvB,aAAOC,SAAP;AACD,KAPmC;AAOjCC,IAAAA;AAPiC,GAAP,CAA/B;AASA,QAAMC,GAAG,GAAG,IAAIf,eAAJ,EAAZ;AACA,QAAMgB,eAAe,GAAG,IAAIf,YAAJ,EAAxB;AACA,QAAM,CAACa,UAAD,EAAaG,aAAb,IAA8B3B,QAAQ,CAAC;AAC3C4B,IAAAA,cAAc,EAAE,IAD2B;AAE3CC,IAAAA,gBAAgB,EAAE,IAFyB;AAG3CC,IAAAA,cAAc,EAAE;AAH2B,GAAD,CAA5C;AAKA,QAAM,CAACP,SAAD,EAAYQ,YAAZ,IAA4B/B,QAAQ,CAAC,KAAD,CAA1C;AAEA,QAAM,CAACgC,aAAD,EAAgBC,gBAAhB,IAAoCjC,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM,CAACkC,mBAAD,EAAsBC,sBAAtB,IAAgDnC,QAAQ,CAACoC,SAAD,CAA9D;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCtC,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAACuC,sBAAD,EAAyBC,yBAAzB,IAAsDxC,QAAQ,CAAC,KAAD,CAApE;AAEA,QAAM,CAACyC,YAAD,EAAeC,eAAf,IAAkC1C,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAAC2C,kBAAD,EAAqBC,qBAArB,IAA8C5C,QAAQ,CAACoC,SAAD,CAA5D;AACA,QAAM,CAACS,eAAD,EAAkBC,kBAAlB,IAAwC9C,QAAQ,CAAC,IAAD,CAAtD;AACA,QAAM,CAAC+C,qBAAD,EAAwBC,wBAAxB,IAAoDhD,QAAQ,CAAC,KAAD,CAAlE;AAEA,QAAM,CAACiD,aAAD,EAAgBC,gBAAhB,IAAoClD,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM,CAACmD,mBAAD,EAAsBC,sBAAtB,IAAgDpD,QAAQ,CAACoC,SAAD,CAA9D;AACA,QAAM,CAACiB,gBAAD,EAAmBC,mBAAnB,IAA0CtD,QAAQ,CAAC,IAAD,CAAxD;AACA,QAAM,CAACuD,sBAAD,EAAyBC,yBAAzB,IAAsDxD,QAAQ,CAAC,KAAD,CAApE;AACA,QAAMyD,CAAC,GAAGxD,iBAAiB,CAAC,mBAAD,CAA3B;;AACA,WAASyD,YAAT,GAAwB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAlC,IAAAA,UAAU,CAACI,cAAX,GAA4BS,YAA5B;AACAb,IAAAA,UAAU,CAACK,gBAAX,GAA8BgB,eAA9B;AACArB,IAAAA,UAAU,CAACM,cAAX,GAA4BuB,gBAA5B;AACA1B,IAAAA,aAAa,CAACH,UAAD,CAAb;AACAO,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;;AACDhC,EAAAA,KAAK,CAAC4D,SAAN,CAAgB,MAAM;AACpB;AACAC,IAAAA,cAAc;AACf,GAHD,EAGG,EAHH;AAIA7D,EAAAA,KAAK,CAAC4D,SAAN,CAAgB,MAAM;AACpBE,IAAAA,OAAO,CAACC,GAAR,CAAYhD,KAAZ,EADoB,CAEpB;;AACA0B,IAAAA,yBAAyB,CAAC1B,KAAK,CAACiD,UAAN,CAAiBxB,sBAAlB,CAAzB;AACAS,IAAAA,wBAAwB,CAAClC,KAAK,CAACiD,UAAN,CAAiBhB,qBAAlB,CAAxB;AACAS,IAAAA,yBAAyB,CAAC1C,KAAK,CAACiD,UAAN,CAAiBR,sBAAlB,CAAzB;AACD,GAND,EAMG,CAACzC,KAAD,CANH;AAOAf,EAAAA,KAAK,CAAC4D,SAAN,CAAgB,MAAM;AACpB;AACA,QAAIK,UAAU,GAAG,IAAjB;AACA7B,IAAAA,sBAAsB,CAACC,SAAD,CAAtB;AACAQ,IAAAA,qBAAqB,CAACR,SAAD,CAArB;AACAgB,IAAAA,sBAAsB,CAAChB,SAAD,CAAtB;;AACA,QAAI;AACF,UAAIJ,aAAa,CAACiC,MAAd,GAAuB,CAAvB,IAA4BnD,KAAK,CAACoD,OAAN,CAActC,cAAd,KAAiC,IAA7D,IAAqEM,mBAAmB,KAAKE,SAAjG,EAA4G;AAC1G4B,QAAAA,UAAU,GAAGhC,aAAa,CAACmC,IAAd,CAAmBC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYvD,KAAK,CAACoD,OAAN,CAActC,cAAlD,CAAb;;AACA,YAAIoC,UAAU,KAAK5B,SAAnB,EAA8B;AAC5BD,UAAAA,sBAAsB,CAAC6B,UAAD,CAAtB;AACD;AACF;;AACD,UAAIvB,YAAY,CAACwB,MAAb,GAAsB,CAAtB,IAA2BnD,KAAK,CAACoD,OAAN,CAAcrC,gBAAd,KAAmC,IAA9D,IAAsEc,kBAAkB,KAAKP,SAAjG,EAA4G;AAC1G4B,QAAAA,UAAU,GAAGvB,YAAY,CAAC0B,IAAb,CAAkBC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYvD,KAAK,CAACoD,OAAN,CAAcrC,gBAAjD,CAAb;;AACA,YAAImC,UAAU,KAAK5B,SAAnB,EAA8B;AAC5BQ,UAAAA,qBAAqB,CAACoB,UAAD,CAArB;AACD;AACF;;AACD,UAAIf,aAAa,CAACgB,MAAd,GAAuB,CAAvB,IAA4BnD,KAAK,CAACoD,OAAN,CAAcpC,cAAd,KAAiC,IAA7D,IAAqEqB,mBAAmB,KAAKf,SAAjG,EAA4G;AAC1G4B,QAAAA,UAAU,GAAGf,aAAa,CAACkB,IAAd,CAAmBC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYvD,KAAK,CAACoD,OAAN,CAAcpC,cAAlD,CAAb;;AACA,YAAIkC,UAAU,KAAK5B,SAAnB,EAA8B;AAC5BgB,UAAAA,sBAAsB,CAACY,UAAD,CAAtB;AACD;AACF;AACF,KAnBD,CAoBA,OAAOM,GAAP,EAAY,CAAG;AAChB,GA3BD,EA2BG,CAACxD,KAAD,CA3BH;;AA4BA,WAAS8C,cAAT,GAA0B;AACxBnC,IAAAA,GAAG,CAAC8C,oBAAJ,GACGC,IADH,CACSC,QAAD,IAAc;AAClB,UAAIA,QAAQ,KAAK,IAAjB,EAAuB;AAAE;AAAS;;AAClC,UAAIC,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACR,MAA7B,EAAqCU,CAAC,EAAtC,EAA0C;AACxCD,QAAAA,IAAI,CAACE,IAAL,CAAU;AAAEC,UAAAA,KAAK,EAAEJ,QAAQ,CAACE,CAAD,CAAR,CAAY,aAAZ,CAAT;AAAqCN,UAAAA,KAAK,EAAEI,QAAQ,CAACE,CAAD,CAAR,CAAY,IAAZ;AAA5C,SAAV;AACD;;AACD1C,MAAAA,gBAAgB,CAACyC,IAAD,CAAhB;AACD,KARH,EASGI,KATH,CASUC,KAAD,IAAW;AAChBlB,MAAAA,OAAO,CAACkB,KAAR,CAAc,aAAd,EAA6BA,KAA7B;AACD,KAXH;AAYAtD,IAAAA,GAAG,CAACuD,uBAAJ,GACGR,IADH,CACSC,QAAD,IAAc;AAClB,UAAIA,QAAQ,KAAK,IAAjB,EAAuB;AAAE;AAAS;;AAClC,UAAIC,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACR,MAA7B,EAAqCU,CAAC,EAAtC,EAA0C;AACxCD,QAAAA,IAAI,CAACE,IAAL,CAAU;AAAEC,UAAAA,KAAK,EAAEJ,QAAQ,CAACE,CAAD,CAAR,CAAY,aAAZ,CAAT;AAAqCN,UAAAA,KAAK,EAAEI,QAAQ,CAACE,CAAD,CAAR,CAAY,IAAZ;AAA5C,SAAV;AACD;;AACDjC,MAAAA,eAAe,CAACgC,IAAD,CAAf;AACD,KARH,EASGI,KATH,CASUC,KAAD,IAAW;AAChBlB,MAAAA,OAAO,CAACkB,KAAR,CAAc,aAAd,EAA6BA,KAA7B;AACD,KAXH;AAYAtD,IAAAA,GAAG,CAACwD,oBAAJ,GACGT,IADH,CACSC,QAAD,IAAc;AAClB,UAAIA,QAAQ,KAAK,IAAjB,EAAuB;AAAE;AAAS;;AAClC,UAAIC,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACR,MAA7B,EAAqCU,CAAC,EAAtC,EAA0C;AACxCD,QAAAA,IAAI,CAACE,IAAL,CAAU;AAAEC,UAAAA,KAAK,EAAEJ,QAAQ,CAACE,CAAD,CAAR,CAAY,aAAZ,CAAT;AAAqCN,UAAAA,KAAK,EAAEI,QAAQ,CAACE,CAAD,CAAR,CAAY,IAAZ;AAA5C,SAAV;AACD;;AACDzB,MAAAA,gBAAgB,CAACwB,IAAD,CAAhB;AACD,KARH,EASGI,KATH,CASUC,KAAD,IAAW;AAChBlB,MAAAA,OAAO,CAACkB,KAAR,CAAc,aAAd,EAA6BA,KAA7B;AACD,KAXH;AAYD;;AACD,sBACE,QAAC,KAAD,CAAO,QAAP;AAAA,4BACE;AAAA,gBAAKtB,CAAC,CAAC,UAAD;AAAN;AAAA;AAAA;AAAA;AAAA,YADF,eAGE,QAAC,GAAD;AAAA,8BACE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA,gCACE,QAAC,KAAD;AAAO,UAAA,OAAO,EAAC,cAAf;AAAA,oBAA+BA,CAAC,CAAC,eAAD;AAAhC;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,MAAD;AACE,UAAA,QAAQ,EAAGyB,CAAD,IAAO;AACf/C,YAAAA,sBAAsB,CAACH,aAAa,CAACmC,IAAd,CAAmBC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYa,CAAC,CAACb,KAAtC,CAAD,CAAtB;AACA/B,YAAAA,eAAe,CAAC4C,CAAC,CAACb,KAAH,CAAf;AACA7C,YAAAA,UAAU,CAACI,cAAX,GAA4BsD,CAAC,CAACb,KAA9B;AACA1C,YAAAA,aAAa,CAACH,UAAD,CAAb;AACD,WANH;AAOE,UAAA,OAAO,EAAEQ,aAPX;AAQE,UAAA,WAAW,EAAEyB,CAAC,CAAC,QAAD,CARhB;AASE,UAAA,KAAK,EAAEvB;AATT;AAAA;AAAA;AAAA;AAAA,gBAFF,EAaGpB,KAAK,CAACiD,UAAN,CAAiBxB,sBAAjB,gBACC;AAAG,UAAA,SAAS,EAAC,uBAAb;AAAA,oBAAsCkB,CAAC,CAAC,UAAD;AAAvC;AAAA;AAAA;AAAA;AAAA,gBADD,GAEG,IAfN;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAkBE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA,gCACE,QAAC,KAAD;AAAO,UAAA,OAAO,EAAC,iBAAf;AAAA,oBAAkCA,CAAC,CAAC,kBAAD;AAAnC;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,MAAD;AACE,UAAA,QAAQ,EAAGyB,CAAD,IAAO;AACftC,YAAAA,qBAAqB,CAACH,YAAY,CAAC0B,IAAb,CAAkBC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYa,CAAC,CAACb,KAArC,CAAD,CAArB;AACAvB,YAAAA,kBAAkB,CAACoC,CAAC,CAACb,KAAH,CAAlB;AACA7C,YAAAA,UAAU,CAACK,gBAAX,GAA8BqD,CAAC,CAACb,KAAhC;AACA1C,YAAAA,aAAa,CAACH,UAAD,CAAb;AACD,WANH;AAOE,UAAA,OAAO,EAAEiB,YAPX;AAQE,UAAA,WAAW,EAAEgB,CAAC,CAAC,QAAD,CARhB;AASE,UAAA,KAAK,EAAEd;AATT;AAAA;AAAA;AAAA;AAAA,gBAFF,EAaG7B,KAAK,CAACiD,UAAN,CAAiBhB,qBAAjB,gBACC;AAAG,UAAA,SAAS,EAAC,uBAAb;AAAA,oBAAsCU,CAAC,CAAC,UAAD;AAAvC;AAAA;AAAA;AAAA;AAAA,gBADD,GAEG,IAfN;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBF,eAoCE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA,gCACE,QAAC,KAAD;AAAO,UAAA,OAAO,EAAC,cAAf;AAAA,oBAA+BA,CAAC,CAAC,eAAD;AAAhC;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,MAAD;AACE,UAAA,QAAQ,EAAGyB,CAAD,IAAO;AACf9B,YAAAA,sBAAsB,CAACH,aAAa,CAACkB,IAAd,CAAmBC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAYa,CAAC,CAACb,KAAtC,CAAD,CAAtB;AACAf,YAAAA,mBAAmB,CAAC4B,CAAC,CAACb,KAAH,CAAnB;AACA7C,YAAAA,UAAU,CAACM,cAAX,GAA4BoD,CAAC,CAACb,KAA9B;AACA1C,YAAAA,aAAa,CAACH,UAAD,CAAb;AACD,WANH;AAOE,UAAA,OAAO,EAAEyB,aAPX;AAQE,UAAA,WAAW,EAAEQ,CAAC,CAAC,QAAD,CARhB;AASE,UAAA,KAAK,EAAEN;AATT;AAAA;AAAA;AAAA;AAAA,gBAFF,EAaGrC,KAAK,CAACiD,UAAN,CAAiBR,sBAAjB,gBACC;AAAG,UAAA,SAAS,EAAC,uBAAb;AAAA,oBAAsCE,CAAC,CAAC,UAAD;AAAvC;AAAA;AAAA;AAAA;AAAA,gBADD,GAEG,IAfN;AAAA;AAAA;AAAA;AAAA;AAAA,cApCF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF,eAyDE,QAAC,GAAD;AAAA,8BACE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA,+BACE,QAAC,OAAD;AAAS,UAAA,SAAS,EAAC,MAAnB;AAAA,kCACE,QAAC,KAAD;AAAO,YAAA,OAAO,EAAC,SAAf;AAAA,sBAA0BA,CAAC,CAAC,SAAD;AAA3B;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,OAAD;AAAS,YAAA,EAAE,EAAC,SAAZ;AACE,YAAA,SAAS,EAAC,cADZ;AAEE,YAAA,IAAI,EAAC,SAFP;AAGE,YAAA,QAAQ,EAAE;AACR0B,cAAAA,QAAQ,EAAE;AAAEd,gBAAAA,KAAK,EAAE,IAAT;AAAee,gBAAAA,YAAY,EAAE3B,CAAC,CAAC,UAAD;AAA9B;AADF,aAHZ;AAME,YAAA,IAAI,EAAC,UANP;AAOE,YAAA,KAAK,EAAE3C,KAAK,CAACoD,OAAN,CAAcmB,OAPvB;AAQE,YAAA,IAAI,EAAC;AARP;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAeE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA,+BACE,QAAC,OAAD;AAAS,UAAA,SAAS,EAAC,MAAnB;AAAA,kCACE,QAAC,KAAD;AAAO,YAAA,OAAO,EAAC,WAAf;AAAA,sBAA4B5B,CAAC,CAAC,YAAD;AAA7B;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,OAAD;AAAS,YAAA,EAAE,EAAC,WAAZ;AACE,YAAA,SAAS,EAAC,cADZ;AAEE,YAAA,IAAI,EAAC,WAFP;AAGE,YAAA,KAAK,EAAE3C,KAAK,CAACoD,OAAN,CAAcoB,SAHvB;AAIE,YAAA,QAAQ,EAAE;AACRH,cAAAA,QAAQ,EAAE;AAAEd,gBAAAA,KAAK,EAAE,IAAT;AAAee,gBAAAA,YAAY,EAAE3B,CAAC,CAAC,UAAD;AAA9B;AADF,aAJZ;AAOE,YAAA,IAAI,EAAC,UAPP;AAQE,YAAA,IAAI,EAAC;AARP;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAfF;AAAA;AAAA;AAAA;AAAA;AAAA,YAzDF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA2FD,CAnOuB;AAAA,UACtB1D,KAAK,CAACiB,mBADgB;AAAA,GAAxB;MAAMJ,e;AAoONA,eAAe,CAAC2E,SAAhB,GAA4B;AAC1BC,EAAAA,QAAQ,EAAErF,SAAS,CAACsF;AADM,CAA5B;AAIA,eAAe7E,eAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { translationHelper } from '../../../../helpers';\r\nimport Select from \"react-select\";\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport AvGroup from \"availity-reactstrap-validation/lib/AvGroup\"\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\n\r\n\r\nconst ProposalSection = React.forwardRef((props, ref) => {\r\n  React.useImperativeHandle(ref, () => ({\r\n    validateForm: () => {\r\n      const form = document.getElementById('frmFacilidades');\r\n      form.requestSubmit();\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }, dataReturn\r\n  }))\r\n  const api = new BackendServices();\r\n  const apiCoreServices = new CoreServices();\r\n  const [dataReturn, setdataReturn] = useState({\r\n    proposalTypeId: null,\r\n    proposalTypeName: null,\r\n    facilityTypeId: null,\r\n  });\r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  const [tipoPropuesta, settipoPropuesta] = useState(null);\r\n  const [tipoPropuestaSelect, settipoPropuestaSelect] = useState(undefined);\r\n  const [propuestaSet, setpropuestaSet] = useState(null);\r\n  const [tipoPropuestaRequerido, settipoPropuestaRequerido] = useState(false);\r\n\r\n  const [subPropuesta, setsubPropuesta] = useState(null);\r\n  const [subPropuestaSelect, setsubPropuestaSelect] = useState(undefined);\r\n  const [subPropuestaSet, setsubPropuestaSet] = useState(null);\r\n  const [subPropuestaRequerido, setsubPropuestaRequerido] = useState(false);\r\n\r\n  const [tipoFacilidad, settipoFacilidad] = useState(null);\r\n  const [tipoFacilidadSelect, settipoFacilidadSelect] = useState(undefined);\r\n  const [tipoFacilidadSet, settipoFacilidadSet] = useState(null);\r\n  const [tipoFacilidadRequerido, settipoFacilidadRequerido] = useState(false);\r\n  const t = translationHelper('commercial_credit');\r\n  function handleSubmit() {\r\n    // if (propuestaSet == \"\" || propuestaSet == null) {\r\n    //   settipoPropuestaRequerido(true);\r\n    //   return;\r\n    // } else {\r\n    //   settipoPropuestaRequerido(false);\r\n    // }\r\n    // if (subPropuestaSet == \"\" || subPropuestaSet == null) {\r\n    //   setsubPropuestaRequerido(true);\r\n    //   return;\r\n    // } else {\r\n    //   setsubPropuestaRequerido(false);\r\n    // }\r\n    // if (tipoFacilidadSet == \"\" || tipoFacilidadSet == null) {\r\n    //   settipoFacilidadRequerido(true);\r\n    //   return;\r\n    // } else {\r\n    //   settipoFacilidadRequerido(false);\r\n    // }\r\n    dataReturn.proposalTypeId = propuestaSet;\r\n    dataReturn.proposalTypeName = subPropuestaSet;\r\n    dataReturn.facilityTypeId = tipoFacilidadSet;\r\n    setdataReturn(dataReturn);\r\n    setFormValid(true);\r\n  }\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    initializeData();\r\n  }, []);\r\n  React.useEffect(() => {\r\n    console.log(props);\r\n    // Read Api Service data\r\n    settipoPropuestaRequerido(props.validation.tipoPropuestaRequerido);\r\n    setsubPropuestaRequerido(props.validation.subPropuestaRequerido);\r\n    settipoFacilidadRequerido(props.validation.tipoFacilidadRequerido);\r\n  }, [props]);\r\n  React.useEffect(() => {\r\n    // Read Api Service data \r\n    var defaultVal = null;\r\n    settipoPropuestaSelect(undefined);\r\n    setsubPropuestaSelect(undefined);\r\n    settipoFacilidadSelect(undefined);\r\n    try {\r\n      if (tipoPropuesta.length > 0 && props.dataSet.proposalTypeId !== null && tipoPropuestaSelect === undefined) {\r\n        defaultVal = tipoPropuesta.find(x => x.value === props.dataSet.proposalTypeId);\r\n        if (defaultVal !== undefined) {\r\n          settipoPropuestaSelect(defaultVal);\r\n        }\r\n      }\r\n      if (subPropuesta.length > 0 && props.dataSet.proposalTypeName !== null && subPropuestaSelect === undefined) {\r\n        defaultVal = subPropuesta.find(x => x.value === props.dataSet.proposalTypeName);\r\n        if (defaultVal !== undefined) {\r\n          setsubPropuestaSelect(defaultVal);\r\n        }\r\n      }\r\n      if (tipoFacilidad.length > 0 && props.dataSet.facilityTypeId !== null && tipoFacilidadSelect === undefined) {\r\n        defaultVal = tipoFacilidad.find(x => x.value === props.dataSet.facilityTypeId);\r\n        if (defaultVal !== undefined) {\r\n          settipoFacilidadSelect(defaultVal);\r\n        }\r\n      }\r\n    }\r\n    catch (err) { }\r\n  }, [props]);\r\n  function initializeData() {\r\n    api.retrieveProposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        settipoPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveSubproposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        setsubPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveFacilityType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        settipoFacilidad(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Proposal\")}</h5>\r\n      {/* <AvForm id=\"frmFacilidades\" className=\"needs-validation\" onSubmit={handleSubmit}> */}\r\n      <Row>\r\n        <Col md=\"4\">\r\n          <Label htmlFor=\"proposalType\">{t(\"Proposal Type\")}</Label>\r\n          <Select\r\n            onChange={(e) => {\r\n              settipoPropuestaSelect(tipoPropuesta.find(x => x.value === e.value))\r\n              setpropuestaSet(e.value);\r\n              dataReturn.proposalTypeId = e.value;\r\n              setdataReturn(dataReturn);\r\n            }}\r\n            options={tipoPropuesta}\r\n            placeholder={t(\"Select\")}\r\n            value={tipoPropuestaSelect}\r\n          />\r\n          {props.validation.tipoPropuestaRequerido ?\r\n            <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n            : null}\r\n        </Col>\r\n        <Col md=\"4\">\r\n          <Label htmlFor=\"subproposalType\">{t(\"SubProposal Type\")}</Label>\r\n          <Select\r\n            onChange={(e) => {\r\n              setsubPropuestaSelect(subPropuesta.find(x => x.value === e.value))\r\n              setsubPropuestaSet(e.value);\r\n              dataReturn.proposalTypeName = e.value;\r\n              setdataReturn(dataReturn);\r\n            }}\r\n            options={subPropuesta}\r\n            placeholder={t(\"Select\")}\r\n            value={subPropuestaSelect}\r\n          />\r\n          {props.validation.subPropuestaRequerido ?\r\n            <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n            : null}\r\n\r\n        </Col>\r\n        <Col md=\"4\">\r\n          <Label htmlFor=\"facilityType\">{t(\"Facility Type\")}</Label>\r\n          <Select\r\n            onChange={(e) => {\r\n              settipoFacilidadSelect(tipoFacilidad.find(x => x.value === e.value))\r\n              settipoFacilidadSet(e.value);\r\n              dataReturn.facilityTypeId = e.value;\r\n              setdataReturn(dataReturn);\r\n            }}\r\n            options={tipoFacilidad}\r\n            placeholder={t(\"Select\")}\r\n            value={tipoFacilidadSelect}\r\n          />\r\n          {props.validation.tipoFacilidadRequerido ?\r\n            <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n            : null}\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col md=\"6\">\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"purpose\">{t(\"Purpose\")}</Label>\r\n            <AvField id=\"purpose\"\r\n              className=\"form-control\"\r\n              name=\"purpose\"\r\n              validate={{\r\n                required: { value: true, errorMessage: t(\"Required\") }\r\n              }}\r\n              type=\"textarea\"\r\n              value={props.dataSet.purpose}\r\n              rows=\"4\" />\r\n          </AvGroup>\r\n        </Col>\r\n        <Col md=\"6\">\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"sublimits\">{t(\"Sub Limits\")}</Label>\r\n            <AvField id=\"sublimits\"\r\n              className=\"form-control\"\r\n              name=\"sublimits\"\r\n              value={props.dataSet.sublimits}\r\n              validate={{\r\n                required: { value: true, errorMessage: t(\"Required\") }\r\n              }}\r\n              type=\"textarea\"\r\n              rows=\"4\" />\r\n          </AvGroup></Col>\r\n      </Row>\r\n      {/* </AvForm> */}\r\n    </React.Fragment>\r\n  );\r\n\r\n});\r\nProposalSection.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n}\r\n\r\nexport default ProposalSection;\r\n"]},"metadata":{},"sourceType":"module"}