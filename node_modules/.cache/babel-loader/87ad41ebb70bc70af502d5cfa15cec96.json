{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../helpers/url_helper\";import{useTranslation,withTranslation}from\"react-i18next\";import{Row,Col,Button}from\"reactstrap\";import{Link}from\"react-router-dom\";// UI Components\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{ChangeSummary,CorporateExposure,CorporateExposureClient,FacilityList,FinancialSummary,GeneralSection}from\"../../../components/PropuestaCreditoComercial\";// Services\nimport{BackendServices,CoreServices,BpmServices}from\"../../../services\";import ApiServiceBackend from\"../../../services/BackendServices/Services\";import{ServicioExposicionCorporativa}from\"../../../services/PropuestaCredito\";import LoadingOverlay from\"react-loading-overlay\";// Services\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var coreServices=new CoreServices();var backServices=new BackendServices();var CommercialCreditProposalPage=function CommercialCreditProposalPage(props){var history=useHistory();var location=useLocation();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),proposal=_useState2[0],setProposal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),changeSummaryItems=_useState4[0],setChangeSummaryItems=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),facilityListItems=_useState6[0],setFacilityListItems=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),identificationList=_useState8[0],setIdentificationList=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),financialSummary=_useState10[0],setFinancialSummary=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),prospect=_useState12[0],setProspect=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),isActiveLoading=_useState14[0],setIsActiveLoading=_useState14[1];// services\nvar servicioExposicionCorporativa=new ServicioExposicionCorporativa();// const customerNumberT24 =location.data.customerId;\nvar customerNumberT24='600133774';useEffect(function(){getProspect();},[]);function fetchProposal(){setProposal({proposal:{id:1010,revisionType:'Bimensual',preapproved:false,minSib:'Provision',relatedPart:false,approvalLevel:'Nivel',flowType:'Normal',applicationDate:'24-sep-2021',lastApplicationDate:'24-sep-2021',nextRevisionDate:'24-sep-2021',expirationDate:'24-sep-2021'},client:{number:'3223213'},economicGroup:{number:'32132006176',name:'Grupo Tova SA',business:'Actividad seleccionada'},risk:{countryClass:'Panamá',classification:'Medio',countryRisk:'Nicaragua'},accountExecutive:{name:'Elibeth'},responsibleUnit:{name:'Unidad'}});setChangeSummaryItems([{description:'Incremento / Disminución (Exposición)'},{description:'Plazos: Fac 1'},{description:'Tasa: Fac 1'},{description:'Cuotas'},{description:'Garantías'},{description:'Covenats'},{description:'Fiadores / Codeudores'},{description:'Otras condiciones'}]);setFinancialSummary({client:{name:'Nombre Deudor'},financialStatus:{headers:['Auditados Dic-18','Auditados Dic-19','Auditados Dic-20','Proyecciones Dic-21'],items:[{label:'Clasificación SAFI',data:['-','-','5:6 Riesgo','-']},{label:'Crecimiento',data:['-','-3.4%','-12.5%','0.0%']},{label:'Costo de Ventas',data:['(1550)66.2%','(1510)66.8%','(1360)68.8%','(1360)68.8%']},{label:'Beneficio Mutuo en Operaciones',data:['(790)66.2%','(751)66.8%','(618)68.8%','(618)68.8%']},{label:'Margen Bruto',data:['','','','']}]},balances:{active:{title:t('Active Balance'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},passive:{title:t('Passive Balance and Capital'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},application:{title:t('Origin and Application Status'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]},indicators:{title:t('Indicators'),headers:[t('Period Date'),'','',''],items:[[t('Months'),'','',''],[t('Auditor'),'','',''],[t('Balance Type'),'','',''],[t('Figures Types'),'','',''],[t('Coins Types'),'','',''],[t('Exchange Rates'),'','','']]}},debts:{short:{items:[{bank:'Capital Bank',purpose:'Linea de Crédito',approvedAmount:200,balanceLastYear:200,balanceLast6Months:154,balanceForecast:200,rate:7.0,surety:'Fianza'},{bank:'St Georges',purpose:'Linea de Crédito',approvedAmount:320,balanceLastYear:200,balanceLast6Months:436,balanceForecast:450,rate:7.5,surety:'Fianza'},{bank:'St Georges',purpose:'TDC',approvedAmount:11,balanceLastYear:11,balanceLast6Months:0,balanceForecast:11,rate:null,surety:''}]},long:{items:[{bank:'Banesco',purpose:'Préstamo',approvedAmount:126,balanceLastYear:0,balanceLast6Months:0,balanceForecast:126,rate:6.5,surety:'Bien Inmueble'}]}}});cargarIdentificaciones();}function cargarIdentificaciones(){return new Promise(function(resolve,reject){backServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){setIdentificationList(data);}resolve();}).catch(function(error){resolve();console.error('api error: ',error);});});}function handleReturn(){history.push(url.URL_DASHBOARD);}function handleClose(){history.push(url.URL_DASHBOARD);}function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}function getProspect(){backServices.consultarUsuarioProspecto(location.data.transactionId).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resp){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(resp);setIsActiveLoading(false);// customerNumberT24 = resp.customerNumberT24;\nsetProspect(customerNumberT24);cargarListaFacilidades(customerNumberT24);fetchProposal();case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}function cargarListaFacilidades(idcliente){return new Promise(function(resolve,reject){coreServices.getFacilidades(idcliente).then(function(resp){setFacilityListItems(resp);resolve();}).catch(function(err){resolve();console.log(err);});});}function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Commercial Credit\"),breadcrumbItem:t(\"Credit Analysis\")}),/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(GeneralSection,{proposal:proposal,prospect:prospect})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(CorporateExposure,{prospect:prospect,title:t(\"CorporateExhibition\"),customerNumberT24:\"600133774\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(CorporateExposureClient,{title:t(\"CorporateExhibitionClient\"),customerNumberT24:\"600133774\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(ChangeSummary,{title:t(\"SummaryOfChanges\"),items:changeSummaryItems})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(FacilityList,{title:t(\"Facility List\"),items:facilityListItems,editMode:true,onSaveFacility:handleSaveFacility,identificationList:identificationList})})}),/*#__PURE__*/_jsx(Row,{className:\"my-2\",children:/*#__PURE__*/_jsxs(Col,{xl:\"12 text-end\",children:[/*#__PURE__*/_jsx(Button,{id:\"btnClose\",color:\"dark\",type:\"button\",style:{margin:'5px'},onClick:handleClose,children:t(\"Close\")}),/*#__PURE__*/_jsx(Button,{id:\"btnSave\",color:\"success\",type:\"button\",style:{margin:'5px'},onClick:handleReturn,children:t(\"Return\")}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/creditocomercial/analisiscredito/informefinanciero\",data:location.data},className:\"btn btn-success\",style:{margin:'5px'},children:t(\"Financial Report\")})]})})]})})]});};export default CommercialCreditProposalPage;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/6_AnalisisCredito/CommercialCreditProposalPage.js"],"names":["React","useEffect","useState","useLocation","useHistory","url","useTranslation","withTranslation","Row","Col","Button","Link","Breadcrumbs","ChangeSummary","CorporateExposure","CorporateExposureClient","FacilityList","FinancialSummary","GeneralSection","BackendServices","CoreServices","BpmServices","ApiServiceBackend","ServicioExposicionCorporativa","LoadingOverlay","coreServices","backServices","CommercialCreditProposalPage","props","history","location","t","i18n","proposal","setProposal","changeSummaryItems","setChangeSummaryItems","facilityListItems","setFacilityListItems","identificationList","setIdentificationList","financialSummary","setFinancialSummary","prospect","setProspect","isActiveLoading","setIsActiveLoading","servicioExposicionCorporativa","customerNumberT24","getProspect","fetchProposal","id","revisionType","preapproved","minSib","relatedPart","approvalLevel","flowType","applicationDate","lastApplicationDate","nextRevisionDate","expirationDate","client","number","economicGroup","name","business","risk","countryClass","classification","countryRisk","accountExecutive","responsibleUnit","description","financialStatus","headers","items","label","data","balances","active","title","passive","application","indicators","debts","short","bank","purpose","approvedAmount","balanceLastYear","balanceLast6Months","balanceForecast","rate","surety","long","cargarIdentificaciones","Promise","resolve","reject","consultarCatalogoTipoIdentificacion","then","undefined","catch","error","console","handleReturn","push","URL_DASHBOARD","handleClose","handleSaveFacility","newItem","newFacilities","consultarUsuarioProspecto","transactionId","resp","log","cargarListaFacilidades","idcliente","getFacilidades","err","margin","pathname"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button\r\n} from \"reactstrap\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\n// UI Components\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport {\r\n  ChangeSummary, CorporateExposure, CorporateExposureClient,\r\n  FacilityList, FinancialSummary,\r\n  GeneralSection\r\n} from \"../../../components/PropuestaCreditoComercial\"\r\n\r\n// Services\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport ApiServiceBackend from \"../../../services/BackendServices/Services\";\r\nimport {\r\n  ServicioExposicionCorporativa,\r\n} from \"../../../services/PropuestaCredito\";\r\nimport LoadingOverlay from \"react-loading-overlay\"\r\n\r\n// Services\r\nconst coreServices = new CoreServices();\r\nconst backServices = new BackendServices();\r\n\r\n\r\nconst CommercialCreditProposalPage = (props) => {\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const [proposal, setProposal] = useState(null);\r\n  const [changeSummaryItems, setChangeSummaryItems] = useState([]);\r\n  const [facilityListItems, setFacilityListItems] = useState([]);\r\n  const [identificationList, setIdentificationList] = useState([]);\r\n  const [financialSummary, setFinancialSummary] = useState(null);\r\n  const [prospect, setProspect] = useState({});\r\n  const [isActiveLoading, setIsActiveLoading] = useState(true);\r\n\r\n  // services\r\n  const servicioExposicionCorporativa = new ServicioExposicionCorporativa();\r\n\r\n  // const customerNumberT24 =location.data.customerId;\r\n  const customerNumberT24 = '600133774';\r\n\r\n  useEffect(() => {\r\n    getProspect();\r\n  }, []);\r\n\r\n  function fetchProposal() {\r\n\r\n    setProposal({\r\n      proposal: {\r\n        id: 1010,\r\n        revisionType: 'Bimensual',\r\n        preapproved: false,\r\n        minSib: 'Provision',\r\n        relatedPart: false,\r\n        approvalLevel: 'Nivel',\r\n        flowType: 'Normal',\r\n        applicationDate: '24-sep-2021',\r\n        lastApplicationDate: '24-sep-2021',\r\n        nextRevisionDate: '24-sep-2021',\r\n        expirationDate: '24-sep-2021'\r\n      },\r\n      client: {\r\n        number: '3223213',\r\n      },\r\n      economicGroup: {\r\n        number: '32132006176',\r\n        name: 'Grupo Tova SA',\r\n        business: 'Actividad seleccionada'\r\n      },\r\n      risk: {\r\n        countryClass: 'Panamá',\r\n        classification: 'Medio',\r\n        countryRisk: 'Nicaragua'\r\n      },\r\n      accountExecutive: {\r\n        name: 'Elibeth'\r\n      },\r\n      responsibleUnit: {\r\n        name: 'Unidad'\r\n      }\r\n    });\r\n\r\n    setChangeSummaryItems([\r\n      { description: 'Incremento / Disminución (Exposición)' },\r\n      { description: 'Plazos: Fac 1' },\r\n      { description: 'Tasa: Fac 1' },\r\n      { description: 'Cuotas' },\r\n      { description: 'Garantías' },\r\n      { description: 'Covenats' },\r\n      { description: 'Fiadores / Codeudores' },\r\n      { description: 'Otras condiciones' },\r\n    ]);\r\n\r\n    setFinancialSummary({\r\n      client: {\r\n        name: 'Nombre Deudor'\r\n      },\r\n      financialStatus: {\r\n        headers: ['Auditados Dic-18', 'Auditados Dic-19', 'Auditados Dic-20', 'Proyecciones Dic-21'],\r\n        items: [\r\n          {\r\n            label: 'Clasificación SAFI',\r\n            data: ['-', '-', '5:6 Riesgo', '-']\r\n          },\r\n          {\r\n            label: 'Crecimiento',\r\n            data: ['-', '-3.4%', '-12.5%', '0.0%']\r\n          },\r\n          {\r\n            label: 'Costo de Ventas',\r\n            data: ['(1550)66.2%', '(1510)66.8%', '(1360)68.8%', '(1360)68.8%']\r\n          },\r\n          {\r\n            label: 'Beneficio Mutuo en Operaciones',\r\n            data: ['(790)66.2%', '(751)66.8%', '(618)68.8%', '(618)68.8%']\r\n          },\r\n          {\r\n            label: 'Margen Bruto',\r\n            data: ['', '', '', '']\r\n          }\r\n        ]\r\n      },\r\n      balances: {\r\n        active: {\r\n          title: t('Active Balance'),\r\n          headers: [t('Period Date'), '', '', ''],\r\n          items: [\r\n            [t('Months'), '', '', ''],\r\n            [t('Auditor'), '', '', ''],\r\n            [t('Balance Type'), '', '', ''],\r\n            [t('Figures Types'), '', '', ''],\r\n            [t('Coins Types'), '', '', ''],\r\n            [t('Exchange Rates'), '', '', '']\r\n          ]\r\n        },\r\n        passive: {\r\n          title: t('Passive Balance and Capital'),\r\n          headers: [t('Period Date'), '', '', ''],\r\n          items: [\r\n            [t('Months'), '', '', ''],\r\n            [t('Auditor'), '', '', ''],\r\n            [t('Balance Type'), '', '', ''],\r\n            [t('Figures Types'), '', '', ''],\r\n            [t('Coins Types'), '', '', ''],\r\n            [t('Exchange Rates'), '', '', '']\r\n          ]\r\n        },\r\n        application: {\r\n          title: t('Origin and Application Status'),\r\n          headers: [t('Period Date'), '', '', ''],\r\n          items: [\r\n            [t('Months'), '', '', ''],\r\n            [t('Auditor'), '', '', ''],\r\n            [t('Balance Type'), '', '', ''],\r\n            [t('Figures Types'), '', '', ''],\r\n            [t('Coins Types'), '', '', ''],\r\n            [t('Exchange Rates'), '', '', '']\r\n          ]\r\n        },\r\n        indicators: {\r\n          title: t('Indicators'),\r\n          headers: [t('Period Date'), '', '', ''],\r\n          items: [\r\n            [t('Months'), '', '', ''],\r\n            [t('Auditor'), '', '', ''],\r\n            [t('Balance Type'), '', '', ''],\r\n            [t('Figures Types'), '', '', ''],\r\n            [t('Coins Types'), '', '', ''],\r\n            [t('Exchange Rates'), '', '', '']\r\n          ]\r\n        }\r\n      },\r\n      debts: {\r\n        short: {\r\n          items: [\r\n            {\r\n              bank: 'Capital Bank',\r\n              purpose: 'Linea de Crédito',\r\n              approvedAmount: 200,\r\n              balanceLastYear: 200,\r\n              balanceLast6Months: 154,\r\n              balanceForecast: 200,\r\n              rate: 7.0,\r\n              surety: 'Fianza'\r\n            },\r\n            {\r\n              bank: 'St Georges',\r\n              purpose: 'Linea de Crédito',\r\n              approvedAmount: 320,\r\n              balanceLastYear: 200,\r\n              balanceLast6Months: 436,\r\n              balanceForecast: 450,\r\n              rate: 7.5,\r\n              surety: 'Fianza'\r\n            },\r\n            {\r\n              bank: 'St Georges',\r\n              purpose: 'TDC',\r\n              approvedAmount: 11,\r\n              balanceLastYear: 11,\r\n              balanceLast6Months: 0,\r\n              balanceForecast: 11,\r\n              rate: null,\r\n              surety: ''\r\n            }\r\n          ]\r\n        },\r\n        long: {\r\n          items: [\r\n            {\r\n              bank: 'Banesco',\r\n              purpose: 'Préstamo',\r\n              approvedAmount: 126,\r\n              balanceLastYear: 0,\r\n              balanceLast6Months: 0,\r\n              balanceForecast: 126,\r\n              rate: 6.5,\r\n              surety: 'Bien Inmueble'\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    });\r\n\r\n    cargarIdentificaciones();\r\n\r\n\r\n  }\r\n\r\n  function cargarIdentificaciones() {\r\n\r\n    return new Promise((resolve, reject) => {\r\n      backServices.consultarCatalogoTipoIdentificacion()\r\n        .then((data) => {\r\n          if (data !== null && data !== undefined) {\r\n            setIdentificationList(data);\r\n          }\r\n          resolve();\r\n        })\r\n        .catch((error) => {\r\n          resolve();\r\n          console.error('api error: ', error);\r\n        });\r\n    })\r\n  }\r\n\r\n  function handleReturn() {\r\n    history.push(url.URL_DASHBOARD);\r\n  }\r\n\r\n  function handleClose() {\r\n    history.push(url.URL_DASHBOARD);\r\n  }\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n  function getProspect() {\r\n    backServices.consultarUsuarioProspecto(location.data.transactionId).then(async (resp) => {\r\n      console.log(resp);\r\n      setIsActiveLoading(false)\r\n      // customerNumberT24 = resp.customerNumberT24;\r\n      setProspect(customerNumberT24);\r\n      cargarListaFacilidades(customerNumberT24);\r\n      fetchProposal();\r\n    });\r\n  }\r\n\r\n\r\n  function cargarListaFacilidades(idcliente) {\r\n    return new Promise(function (resolve, reject) {\r\n      coreServices.getFacilidades(idcliente)\r\n        .then(resp => {\r\n          setFacilityListItems(resp);\r\n          resolve();\r\n        })\r\n        .catch(err => {\r\n          resolve();\r\n          console.log(err);\r\n        });\r\n    })\r\n  }\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-content\">\r\n\r\n      <Breadcrumbs title={t(\"Commercial Credit\")} breadcrumbItem={t(\"Credit Analysis\")} />\r\n\r\n      <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n\r\n        <>\r\n          <Row>\r\n            <Col xl=\"12\">\r\n              <GeneralSection proposal={proposal} prospect={prospect} />\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xl=\"12\">\r\n              <CorporateExposure prospect={prospect} title={t(\"CorporateExhibition\")} customerNumberT24={\"600133774\"} />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col xl=\"12\">\r\n              <CorporateExposureClient title={t(\"CorporateExhibitionClient\")} customerNumberT24={\"600133774\"} />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col xl=\"12\">\r\n              <ChangeSummary title={t(\"SummaryOfChanges\")} items={changeSummaryItems} />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col xl=\"12\">\r\n              <FacilityList title={t(\"Facility List\")}\r\n                items={facilityListItems}\r\n                editMode={true}\r\n                onSaveFacility={handleSaveFacility}\r\n                identificationList={identificationList} />\r\n            </Col>\r\n          </Row>\r\n\r\n          {/*financialSummary && (\r\n              <FinancialSummary client={financialSummary.client}\r\n                financialStatus={financialSummary.financialStatus}\r\n                balances={financialSummary.balances}\r\n                debts={financialSummary.debts} />\r\n            )*/}\r\n\r\n          <Row className=\"my-2\">\r\n            <Col xl=\"12 text-end\">\r\n              <Button id=\"btnClose\" color=\"dark\" type=\"button\" style={{ margin: '5px' }} onClick={handleClose}>\r\n                {t(\"Close\")}\r\n              </Button>\r\n              <Button id=\"btnSave\" color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={handleReturn}>\r\n                {t(\"Return\")}\r\n              </Button>\r\n              <Link to={{ pathname: \"/creditocomercial/analisiscredito/informefinanciero\", data: location.data }} className=\"btn btn-success\" style={{ margin: '5px' }}>{t(\"Financial Report\")}</Link>\r\n\r\n            </Col>\r\n          </Row>\r\n        </>\r\n\r\n      </LoadingOverlay >\r\n\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\n\r\nexport default CommercialCreditProposalPage;\r\n"]},"metadata":{},"sourceType":"module"}