{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{translationHelpers}from'../../../helpers/translation-helper';import{Table,Card,CardBody,Button}from\"reactstrap\";import ModalNewHistoryDetail from'./ModalNewHistoryDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var History=function History(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),displayModalNewHistoryDetail=_useState2[0],setDisplayModalNewHistoryDetail=_useState2[1];var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var headers=props.headers,data=props.data,editMode=props.editMode;if(!data){return null;}function calculateTotals(headers,data){var totals=new Array(headers.length);totals.fill(0,0,headers.length);headers.forEach(function(header,index){totals[index]=data.reduce(function(total,current){return total+current.data[index];},0);});return totals;}function calculateProportions(headers,data){var cols=new Array(headers.length);cols.fill(0,0,headers.length);return cols;}var dataHeaders=headers.map(function(header,index){return/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:header},\"header-\"+index);});var dataRows=data.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name},index),item.data.map(function(data,col){return/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:data},\"col-\"+col);})]},'row-'+index);});// Calculate total\nvar totals=calculateTotals(headers,data);var totalRow=/*#__PURE__*/_jsxs(\"tr\",{className:\"table-info\",children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Total\").toLocaleUpperCase()}),totals.map(function(val,index){return/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:val},index);})]});// Calculate proportions\nvar proportions=calculateProportions(headers,data);var proportionRow=/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"Proportion\").toLocaleUpperCase()}),proportions.map(function(val,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:val},index);})]});function toggleModalNewHistoryItem(){setDisplayModalNewHistoryDetail(!displayModalNewHistoryDetail);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"card-title clearfix\",children:[t(\"History Details\"),editMode&&/*#__PURE__*/_jsx(Button,{id:\"btnNew\",color:\"success\",type:\"button\",className:\"float-end\",style:{margin:'5px'},onClick:toggleModalNewHistoryItem,children:c(\"New\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive mt-2\",children:/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Country / Client\")}),dataHeaders]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[dataRows,totalRow,proportionRow]})]})}),/*#__PURE__*/_jsx(ModalNewHistoryDetail,{isOpen:displayModalNewHistoryDetail,toggle:toggleModalNewHistoryItem,onSave:props.addHistoryDetail})]});};History.defaultProps={editMode:false};export default History;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/financialSummary/History.js"],"names":["useState","translationHelpers","Table","Card","CardBody","Button","ModalNewHistoryDetail","History","props","displayModalNewHistoryDetail","setDisplayModalNewHistoryDetail","t","c","headers","data","editMode","calculateTotals","totals","Array","length","fill","forEach","header","index","reduce","total","current","calculateProportions","cols","dataHeaders","map","dataRows","item","name","col","totalRow","toLocaleUpperCase","val","proportions","proportionRow","toggleModalNewHistoryItem","margin","addHistoryDetail","defaultProps"],"mappings":"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","sourcesContent":["import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../helpers/translation-helper';\r\n\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Button\r\n} from \"reactstrap\"\r\n\r\nimport ModalNewHistoryDetail from './ModalNewHistoryDetail';\r\n\r\n\r\nconst History = (props) => {\r\n\r\n  const [displayModalNewHistoryDetail, setDisplayModalNewHistoryDetail] = useState(false);\r\n\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n\r\n  const { headers, data, editMode } = props;\r\n\r\n  if (!data) {\r\n    return null;\r\n  }\r\n\r\n  function calculateTotals(headers, data) {\r\n    const totals = new Array(headers.length);\r\n    totals.fill(0, 0, headers.length);\r\n    headers.forEach((header, index) => {\r\n      totals[index] = data.reduce((total, current) => {\r\n        return total + current.data[index];\r\n      }, 0);\r\n    });\r\n    return totals;\r\n  }\r\n\r\n  function calculateProportions(headers, data) {\r\n    const cols = new Array(headers.length);\r\n    cols.fill(0, 0, headers.length);\r\n    return cols;\r\n  }\r\n\r\n  const dataHeaders = headers.map((header, index) => (\r\n    <th key={\"header-\" + index} className=\"text-end\">{header}</th>\r\n  ));\r\n\r\n  const dataRows = data.map((item, index) => (\r\n    <tr key={'row-' + index}>\r\n      <td key={index}>{item.name}</td>\r\n      {item.data.map((data, col) => (\r\n        <td key={\"col-\" + col} className=\"text-end\">{data}</td>\r\n      ))}\r\n    </tr>)\r\n  );\r\n\r\n  // Calculate total\r\n  const totals = calculateTotals(headers, data);\r\n  const totalRow = (\r\n    <tr className=\"table-info\">\r\n      <th>{t(\"Total\").toLocaleUpperCase()}</th>\r\n      {totals.map((val, index) => (\r\n        <th key={index} className=\"text-end\">{val}</th>\r\n      ))}\r\n    </tr>\r\n  );\r\n\r\n  // Calculate proportions\r\n  const proportions = calculateProportions(headers, data);\r\n  const proportionRow = (\r\n    <tr>\r\n      <td>{t(\"Proportion\").toLocaleUpperCase()}</td>\r\n      {proportions.map((val, index) => (\r\n        <td key={index} className=\"text-end\">{val}</td>\r\n      ))}\r\n    </tr>\r\n  );\r\n\r\n  function toggleModalNewHistoryItem() {\r\n    setDisplayModalNewHistoryDetail(!displayModalNewHistoryDetail);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h4 className=\"card-title clearfix\">\r\n        {t(\"History Details\")}\r\n        {editMode &&\r\n          <Button id=\"btnNew\" color=\"success\" type=\"button\" className=\"float-end\" style={{ margin: '5px' }} onClick={toggleModalNewHistoryItem}>\r\n            {c(\"New\")}\r\n          </Button>\r\n        }\r\n      </h4>\r\n      <p className=\"card-title-desc\"></p>\r\n      <div className=\"table-responsive mt-2\">\r\n        <Table className=\"table mb-0\">\r\n          <thead className=\"table-light\">\r\n            <tr>\r\n              <th>{t(\"Country / Client\")}</th>\r\n              {dataHeaders}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {dataRows}\r\n            {totalRow}\r\n            {proportionRow}\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n      <ModalNewHistoryDetail isOpen={displayModalNewHistoryDetail} toggle={toggleModalNewHistoryItem} onSave={props.addHistoryDetail} />\r\n    </>\r\n  );\r\n};\r\n\r\nHistory.propTypes = {\r\n  title: PropTypes.string,\r\n  headers: PropTypes.array.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n  editMode: PropTypes.bool,\r\n  addHistoryDetail: PropTypes.func\r\n};\r\n\r\nHistory.defaultProps = {\r\n  editMode: false\r\n};\r\n\r\n\r\nexport default History;\r\n"]},"metadata":{},"sourceType":"module"}