{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{translationHelpers}from'../../../../helpers';import{Link,useLocation}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Row,Col,Table,Button}from\"reactstrap\";import ModalNewWarrant from\"../ModalNewWarrant\";import{BackendServices}from\"../../../../services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WarrantsList=function WarrantsList(props){var api=new BackendServices();var location=useLocation();var _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),dataLocation=_useState2[0],setData=_useState2[1];// Variables para alertas \nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),successSave_dlg=_useState4[0],setsuccessSave_dlg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error_dlg=_useState6[0],seterror_dlg=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error_msg=_useState8[0],seterror_msg=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),info_dlg=_useState10[0],setinfo_dlg=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),info_msg=_useState12[0],setinfo_msg=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),dynamic_title=_useState14[0],setdynamic_title=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),confirm_alert=_useState16[0],setconfirm_alert=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),success_dlg=_useState18[0],setsuccess_dlg=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),dynamic_description=_useState20[0],setdynamic_description=_useState20[1];// Variables para el componente\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),displayModal=_useState22[0],setDisplayModal=_useState22[1];var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var _useState23=useState(true),_useState24=_slicedToArray(_useState23,2),botonValidation=_useState24[0],setbotonValidation=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),tipo=_useState26[0],settipo=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),datacOMISION=_useState28[0],setdatacOMISION=_useState28[1];var _useState29=useState({\"guaranteeId\":1,\"guaranteeTypeName\":\"\",\"commercialValue\":0,\"fastValue\":0,\"observations\":\"\",\"ltv\":0,\"appraisalDate\":\"2021-12-22\",\"signature\":\"\",\"trustNumber\":\"\",\"fiduciary\":\"\",\"status\":true}),_useState30=_slicedToArray(_useState29,2),dataSet=_useState30[0],setdataSet=_useState30[1];React.useEffect(function(){// Read Api Service data\ninitializeData();},[]);function initializeData(){api.consultarGarantiaPropCred(2).then(function(resp){if(resp!=undefined){setdatacOMISION(resp.map(function(data){return data.status?/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.guaranteeTypeName}),/*#__PURE__*/_jsx(\"td\",{children:data.commercialValue}),/*#__PURE__*/_jsx(\"td\",{children:data.fastValue}),/*#__PURE__*/_jsx(\"td\",{children:data.observations}),/*#__PURE__*/_jsx(\"td\",{children:data.ltv}),/*#__PURE__*/_jsx(\"td\",{children:data.appraisalDate}),/*#__PURE__*/_jsx(\"td\",{children:data.signature}),/*#__PURE__*/_jsx(\"td\",{children:data.trustNumber}),/*#__PURE__*/_jsx(\"td\",{children:data.fiduciary}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){editarDatos(data,\"ECOMISION\");},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){EliminarDatos(data,\"DCOMISION\");},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]},data[0]):null;}));}else{setdatacOMISION(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"10\",style:{textAlign:'center'}})},1));}});}function verDatos(data,tipo2){setdataSet(data);setbotonValidation(false);settipo(tipo2);setDisplayModal(true);}function editarDatos(data,tipo2){setdataSet(data);setbotonValidation(true);settipo(tipo2);setDisplayModal(true);}function EliminarDatos(data,tipo2){setdataSet(data);settipo(tipo2);setconfirm_alert(true);}function handleAdd(){setDisplayModal(true);}function toggleModal(){setDisplayModal(!displayModal);}if(!props.items){return null;}function guardarDatos(values,tipo2){values.requestId=2;values.commercialValue=Number(values.commercialValue);values.fastValue=Number(values.fastValue);values.ltv=Number(values.ltv);if(tipo2==\"COMISION\"){api.nuevoGarantiaPropCred(values).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg(true);toggleModal();}else{toggleModal();seterror_dlg(true);}}).catch(function(err){seterror_dlg(true);});}if(tipo2==\"ECOMISION\"){values.guaranteeId=dataSet.guaranteeId;values.status=true;api.actualizarGarantiaPropCred(values).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg(true);toggleModal();}else{toggleModal();seterror_dlg(true);}}).catch(function(err){seterror_dlg(true);});}}function handleAdd(){setDisplayModal(true);}function toggleModal(){setDisplayModal(!displayModal);}if(!props.items){return null;}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Warrants\")}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(Table,{className:\"table\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Warrant Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Commercial Value\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Quick V-Value\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Description\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"LTV%\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Appraisal Date\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Signature\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Escrow\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Fiduciary\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:/*#__PURE__*/_jsx(Link,{className:\"float-end\",onClick:function onClick(){setbotonValidation(true);setdataSet({\"guaranteeId\":1,\"guaranteeTypeName\":\"\",\"commercialValue\":0,\"fastValue\":0,\"observations\":\"\",\"ltv\":0,\"appraisalDate\":\"2021-12-22\",\"signature\":\"\",\"trustNumber\":\"\",\"fiduciary\":\"\",\"status\":true});settipo(\"COMISION\");toggleModal();},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-box-multiple-outline mdi-24px\"})})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:datacOMISION})]})})}),/*#__PURE__*/_jsx(ModalNewWarrant,{guardarDatos:guardarDatos,botones:botonValidation,tipo:tipo,dataSet:dataSet,isOpen:displayModal,toggle:toggleModal,onSave:props.onSaveItem}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);initializeData();},children:t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),onConfirm:function onConfirm(){seterror_dlg(false);initializeData();},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:t(\"Yesdeleteit\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){var apiBack=new BackendServices();apiBack.eliminarGarantiaPropCred(2,dataSet.guaranteeId).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(true);}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(true);});},onCancel:function onCancel(){return setconfirm_alert(false);},children:t(\"Youwontbeabletorevertthis\")}):null]});};var WarrantsSection=function WarrantsSection(props){return/*#__PURE__*/_jsx(WarrantsList,{items:props.warrants,onSaveItem:props.onSaveItem,onDeleteItem:props.onDeleteItem});};export default WarrantsSection;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/facilities/modalNewFacility/WarrantsSection.js"],"names":["React","useState","translationHelpers","Link","useLocation","SweetAlert","Row","Col","Table","Button","ModalNewWarrant","BackendServices","WarrantsList","props","api","location","data","dataLocation","setData","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","info_dlg","setinfo_dlg","info_msg","setinfo_msg","dynamic_title","setdynamic_title","confirm_alert","setconfirm_alert","success_dlg","setsuccess_dlg","dynamic_description","setdynamic_description","displayModal","setDisplayModal","t","c","botonValidation","setbotonValidation","tipo","settipo","datacOMISION","setdatacOMISION","dataSet","setdataSet","useEffect","initializeData","consultarGarantiaPropCred","then","resp","undefined","map","status","guaranteeTypeName","commercialValue","fastValue","observations","ltv","appraisalDate","signature","trustNumber","fiduciary","textAlign","editarDatos","EliminarDatos","verDatos","tipo2","handleAdd","toggleModal","items","guardarDatos","values","requestId","Number","nuevoGarantiaPropCred","catch","err","guaranteeId","actualizarGarantiaPropCred","onSaveItem","apiBack","eliminarGarantiaPropCred","statusCode","error","WarrantsSection","warrants","onDeleteItem"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../../helpers';\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Table,\r\n  Button\r\n} from \"reactstrap\"\r\n\r\n\r\nimport ModalNewWarrant from \"../ModalNewWarrant\";\r\nimport { BackendServices } from \"../../../../services\";\r\n\r\n\r\n\r\nconst WarrantsList = (props) => {\r\n\r\n  const api = new BackendServices();\r\n  const location = useLocation()\r\n  const [dataLocation, setData] = useState(location.data);\r\n  // Variables para alertas \r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [info_dlg, setinfo_dlg] = useState(false)\r\n  const [info_msg, setinfo_msg] = useState(\"\")\r\n  const [dynamic_title, setdynamic_title] = useState(\"\")\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [success_dlg, setsuccess_dlg] = useState(false)\r\n  const [dynamic_description, setdynamic_description] = useState(\"\")\r\n  // Variables para el componente\r\n  const [displayModal, setDisplayModal] = useState(false);\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n  const [botonValidation, setbotonValidation] = useState(true);\r\n  const [tipo, settipo] = useState(\"\");\r\n  const [datacOMISION, setdatacOMISION] = useState(null);\r\n  const [dataSet, setdataSet] = useState({\r\n    \"guaranteeId\": 1,\r\n    \"guaranteeTypeName\": \"\",\r\n    \"commercialValue\": 0,\r\n    \"fastValue\": 0,\r\n    \"observations\": \"\",\r\n    \"ltv\": 0,\r\n    \"appraisalDate\": \"2021-12-22\",\r\n    \"signature\": \"\",\r\n    \"trustNumber\": \"\",\r\n    \"fiduciary\": \"\",\r\n    \"status\": true\r\n  });\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    initializeData();\r\n  }, []);\r\n  function initializeData() {\r\n    api.consultarGarantiaPropCred(2).then(resp => {\r\n      if (resp != undefined) {\r\n        setdatacOMISION(resp.map((data) => (\r\n          data.status ?\r\n            <tr key={data[0]}>\r\n              <td>{data.guaranteeTypeName}</td>\r\n              <td>{data.commercialValue}</td>\r\n              <td>{data.fastValue}</td>\r\n              <td>{data.observations}</td>\r\n              <td>{data.ltv}</td>\r\n              <td>{data.appraisalDate}</td>\r\n              <td>{data.signature}</td>\r\n              <td>{data.trustNumber}</td>\r\n              <td>{data.fiduciary}</td>\r\n              <td style={{ textAlign: \"right\" }}>\r\n                <Button type=\"button\" color=\"link\" onClick={(resp) => {\r\n                  editarDatos(data, \"ECOMISION\")\r\n                }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n                <Button type=\"button\" color=\"link\" onClick={(resp) => {\r\n                  EliminarDatos(data, \"DCOMISION\")\r\n                }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n              </td>\r\n            </tr> : null)\r\n        ));\r\n      } else {\r\n        setdatacOMISION(\r\n          <tr key={1}>\r\n            <td colSpan=\"10\" style={{ textAlign: 'center' }}></td>\r\n          </tr>);\r\n      }\r\n    })\r\n  }\r\n  function verDatos(data, tipo2) {\r\n    setdataSet(data)\r\n    setbotonValidation(false);\r\n    settipo(tipo2);\r\n    setDisplayModal(true);\r\n  }\r\n  function editarDatos(data, tipo2) {\r\n    setdataSet(data)\r\n    setbotonValidation(true);\r\n    settipo(tipo2);\r\n    setDisplayModal(true);\r\n  }\r\n  function EliminarDatos(data, tipo2) {\r\n    setdataSet(data)\r\n    settipo(tipo2);\r\n    setconfirm_alert(true);\r\n  }\r\n  function handleAdd() {\r\n    setDisplayModal(true);\r\n  }\r\n\r\n  function toggleModal() {\r\n    setDisplayModal(!displayModal);\r\n  }\r\n\r\n  if (!props.items) {\r\n    return null;\r\n  }\r\n\r\n  function guardarDatos(values, tipo2) {\r\n    values.requestId = 2;\r\n    values.commercialValue = Number(values.commercialValue);\r\n    values.fastValue = Number(values.fastValue);\r\n    values.ltv = Number(values.ltv);    \r\n    if (tipo2 == \"COMISION\") {\r\n      api.nuevoGarantiaPropCred(values).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          setsuccessSave_dlg(true)\r\n          toggleModal();\r\n        } else {\r\n          toggleModal();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(err => {\r\n        seterror_dlg(true);\r\n      })\r\n    }\r\n    if (tipo2 == \"ECOMISION\") {\r\n      values.guaranteeId = dataSet.guaranteeId;\r\n      values.status = true;\r\n      api.actualizarGarantiaPropCred(values).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          setsuccessSave_dlg(true)\r\n          toggleModal();\r\n        } else {\r\n          toggleModal();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(err => {\r\n        seterror_dlg(true);\r\n      })\r\n    }\r\n\r\n  }\r\n  function handleAdd() {\r\n    setDisplayModal(true);\r\n  }\r\n\r\n  function toggleModal() {\r\n    setDisplayModal(!displayModal);\r\n  }\r\n\r\n  if (!props.items) {\r\n    return null;\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Warrants\")}</h5>\r\n      <Row className=\"mb-3\">\r\n        <Col md=\"12\">\r\n          <Table className=\"table\" responsive>\r\n            <thead className=\"table-light\">\r\n              <tr>\r\n                <th>{t(\"Warrant Type\")}</th>\r\n                <th>{t(\"Commercial Value\")}</th>\r\n                <th>{t(\"Quick V-Value\")}</th>\r\n                <th>{t(\"Description\")}</th>\r\n                <th>{t(\"LTV%\")}</th>\r\n                <th>{t(\"Appraisal Date\")}</th>\r\n                <th>{t(\"Signature\")}</th>\r\n                <th>{t(\"Escrow\")}</th>\r\n                <th>{t(\"Fiduciary\")}</th>\r\n                <th className=\"text-end\">\r\n                  <Link className=\"float-end\" onClick={() => {\r\n                    setbotonValidation(true); setdataSet({\r\n                      \"guaranteeId\": 1,\r\n                      \"guaranteeTypeName\": \"\",\r\n                      \"commercialValue\": 0,\r\n                      \"fastValue\": 0,\r\n                      \"observations\": \"\",\r\n                      \"ltv\": 0,\r\n                      \"appraisalDate\": \"2021-12-22\",\r\n                      \"signature\": \"\",\r\n                      \"trustNumber\": \"\",\r\n                      \"fiduciary\": \"\",\r\n                      \"status\": true\r\n                    }); settipo(\"COMISION\"); toggleModal()\r\n                  }}><i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i></Link>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {datacOMISION}\r\n            </tbody>\r\n          </Table>\r\n        </Col>\r\n      </Row>\r\n      <ModalNewWarrant guardarDatos={guardarDatos} botones={botonValidation} tipo={tipo} dataSet={dataSet} isOpen={displayModal} toggle={toggleModal} onSave={props.onSaveItem} />\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={t(\"SuccessDialog\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={t(\"ErrorDialog\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={t(\"Yesdeleteit\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            const apiBack = new BackendServices();\r\n            apiBack.eliminarGarantiaPropCred(2, dataSet.guaranteeId).then(resp => {\r\n              if (resp.statusCode == \"500\") {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(true)\r\n              } else {\r\n                setconfirm_alert(false)\r\n                setsuccessSave_dlg(true)\r\n              }\r\n            }).catch(error => {\r\n              setconfirm_alert(false)\r\n              seterror_dlg(true)\r\n            })\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n\r\n};\r\n\r\nconst WarrantsSection = (props) => {\r\n  return (\r\n    <WarrantsList items={props.warrants} onSaveItem={props.onSaveItem} onDeleteItem={props.onDeleteItem} />\r\n  );\r\n};\r\n\r\nWarrantsSection.propTypes = {\r\n  warrants: PropTypes.array.isRequired,\r\n  onSaveItem: PropTypes.func.isRequired,\r\n  onDeleteItem: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default WarrantsSection;\r\n"]},"metadata":{},"sourceType":"module"}