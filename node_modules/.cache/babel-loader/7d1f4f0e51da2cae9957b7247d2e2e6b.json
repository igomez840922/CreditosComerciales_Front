{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useContext,useImperativeHandle,forwardRef}from'react';import RiesgoAmbientalContext from'../RiesgoAmbientalContext';import{Card,CardBody,Row,Col,Label}from\"reactstrap\";import{AvForm,AvField,AvGroup,AvInput}from\"availity-reactstrap-validation\";import AttachmentList from'../../../../components/Attachments/AttachmentList';//i18n\nimport{useTranslation}from'react-i18next';import ServicioRiesgoAmbiental from'../../../../services/RiesgoAmbiental/RiesgoAmbiental';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SimpleChekQuestion=function SimpleChekQuestion(props){return/*#__PURE__*/_jsxs(AvGroup,{check:true,className:\"my-2\",children:[/*#__PURE__*/_jsx(AvInput,{id:props.name,type:\"checkbox\",name:props.name}),/*#__PURE__*/_jsxs(Label,{check:true,htmlFor:props.name,children:[\" \",props.question]})]});};var ComposedQuestion=function ComposedQuestion(props){return/*#__PURE__*/_jsxs(AvGroup,{check:true,className:\"my-2\",children:[/*#__PURE__*/_jsx(AvInput,{id:props.name,type:\"checkbox\",name:props.name}),/*#__PURE__*/_jsxs(Label,{check:true,htmlFor:props.name,children:[\" \",props.question]}),/*#__PURE__*/_jsx(AvInput,{type:\"textarea\",name:props.name+'Comments'})]});};var FormAspectosAmbientales=/*#__PURE__*/forwardRef(function(props,ref){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1];// services\nvar context=useContext(RiesgoAmbientalContext);var servicioRiesgoAmbiental=new ServicioRiesgoAmbiental();var simpleQuestions=[{name:'natureLocationProject',question:'¿El proyecto está ubicado o es colindante a un área natural protegida?'},{name:'physicalResettlement',question:'¿El proyecto involucra reasentamiento físico y/o económico de más de 100 personas?'},{name:'environmentalPermits',question:'¿Se necesita la presentación de permisos ambientales para la ejecución del proyecto?'},{name:'newProject',question:'¿El proyecto es nuevo e involucra el uso de más de 35 Hectáreas de terreno?'},{name:'workersContractors',question:'¿La actividad emplea más de 50 trabajadores y manejan más de 15 contratistas?'}];useImperativeHandle(ref,function(){return{submit:function submit(){var validate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var form=document.getElementById('formAspectosAmbientales');form.requestSubmit();return formValid;},getFormValidation:function getFormValidation(){return formValid;}};});function handleSubmit(event,errors,values){event.preventDefault();var isValid=errors.length===0;setFormValid(isValid);if(isValid){console.log('submit',values,errors);var transactionId=context.transactionId;servicioRiesgoAmbiental.guardarAspectosAmbientales(transactionId,values).then(function(result){console.log('result',result);}).catch(function(error){console.error('Error guardando',error);});}}return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(AvForm,{id:\"formAspectosAmbientales\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"EnvironmentalAspects\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(Row,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"riskPreClassification\",children:t(\"PreClassificationRisk\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"preclassification\",type:\"text\",id:\"riskPreClassification\",value:\"Medio\",disabled:true})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sustainableCreditRating\",children:t(\"EnvironmentalRiskclassification\")}),/*#__PURE__*/_jsxs(AvField,{className:\"form-control\",name:\"sustainableCreditRating\",type:\"select\",id:\"sustainableCreditRating\",value:\"MedioAlto\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Bajo\",children:\"Bajo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Medio\",children:\"Medio\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MedioAlto\",children:\"Medio Alto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Alto\",children:\"Alto\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:\"12\",children:simpleQuestions.map(function(item){return/*#__PURE__*/_jsx(SimpleChekQuestion,{name:item.name,question:item.question},item.name);})})]}),/*#__PURE__*/_jsx(Row,{className:\"my-4\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AttachmentList,{editMode:true,attachments:[]})})})]})})});});export default FormAspectosAmbientales;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/16_RiesgoAmbiental/riesgoAmbiental/FormAspectosAmbientales.js"],"names":["useState","useContext","useImperativeHandle","forwardRef","RiesgoAmbientalContext","Card","CardBody","Row","Col","Label","AvForm","AvField","AvGroup","AvInput","AttachmentList","useTranslation","ServicioRiesgoAmbiental","SimpleChekQuestion","props","name","question","ComposedQuestion","FormAspectosAmbientales","ref","t","i18n","formValid","setFormValid","context","servicioRiesgoAmbiental","simpleQuestions","submit","validate","form","document","getElementById","requestSubmit","getFormValidation","handleSubmit","event","errors","values","preventDefault","isValid","length","console","log","transactionId","guardarAspectosAmbientales","then","result","catch","error","map","item"],"mappings":"+KACA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,mBAA/B,CAAoDC,UAApD,KAAsE,OAAtE,CACA,MAAOC,CAAAA,sBAAP,KAAmC,2BAAnC,CAEA,OACEC,IADF,CAEEC,QAFF,CAGEC,GAHF,CAIEC,GAJF,CAKEC,KALF,KAMO,YANP,CAQA,OAASC,MAAT,CAAiBC,OAAjB,CAA0BC,OAA1B,CAAmCC,OAAnC,KAAkD,gCAAlD,CACA,MAAOC,CAAAA,cAAP,KAA2B,mDAA3B,CAIA;AACA,OAASC,cAAT,KAA+B,eAA/B,CACA,MAAOC,CAAAA,uBAAP,KAAoC,sDAApC,C,wFAGA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,KAAK,CAAI,CAClC,mBACE,MAAC,OAAD,EAAS,KAAK,KAAd,CAAe,SAAS,CAAC,MAAzB,wBACE,KAAC,OAAD,EAAS,EAAE,CAAGA,KAAK,CAACC,IAApB,CAA2B,IAAI,CAAC,UAAhC,CAA2C,IAAI,CAAGD,KAAK,CAACC,IAAxD,EADF,cAEE,MAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,OAAO,CAAGD,KAAK,CAACC,IAA7B,eAAuCD,KAAK,CAACE,QAA7C,GAFF,GADF,CAMD,CAPD,CAcA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAH,KAAK,CAAI,CAChC,mBACE,MAAC,OAAD,EAAS,KAAK,KAAd,CAAe,SAAS,CAAC,MAAzB,wBACE,KAAC,OAAD,EAAS,EAAE,CAAGA,KAAK,CAACC,IAApB,CAA2B,IAAI,CAAC,UAAhC,CAA2C,IAAI,CAAGD,KAAK,CAACC,IAAxD,EADF,cAEE,MAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,OAAO,CAAGD,KAAK,CAACC,IAA7B,eAAuCD,KAAK,CAACE,QAA7C,GAFF,cAGE,KAAC,OAAD,EAAS,IAAI,CAAC,UAAd,CAAyB,IAAI,CAAGF,KAAK,CAACC,IAAN,CAAa,UAA7C,EAHF,GADF,CAOD,CARD,CAeA,GAAMG,CAAAA,uBAAuB,cAAGnB,UAAU,CAAC,SAACe,KAAD,CAAQK,GAAR,CAAgB,CAEzD,oBAAoBR,cAAc,EAAlC,CAAQS,CAAR,iBAAQA,CAAR,CAAWC,IAAX,iBAAWA,IAAX,CACA,cAAkCzB,QAAQ,CAAC,KAAD,CAA1C,wCAAO0B,SAAP,eAAkBC,YAAlB,eAEA;AACA,GAAMC,CAAAA,OAAO,CAAG3B,UAAU,CAACG,sBAAD,CAA1B,CACA,GAAMyB,CAAAA,uBAAuB,CAAG,GAAIb,CAAAA,uBAAJ,EAAhC,CAEA,GAAMc,CAAAA,eAAe,CAAG,CACtB,CAAEX,IAAI,CAAE,uBAAR,CAAiCC,QAAQ,CAAE,wEAA3C,CADsB,CAEtB,CAAED,IAAI,CAAE,sBAAR,CAAgCC,QAAQ,CAAE,oFAA1C,CAFsB,CAGtB,CAAED,IAAI,CAAE,sBAAR,CAAgCC,QAAQ,CAAE,sFAA1C,CAHsB,CAItB,CAAED,IAAI,CAAE,YAAR,CAAsBC,QAAQ,CAAE,6EAAhC,CAJsB,CAKtB,CAAED,IAAI,CAAE,oBAAR,CAA8BC,QAAQ,CAAE,+EAAxC,CALsB,CAAxB,CAQAlB,mBAAmB,CAACqB,GAAD,CAAM,iBAAO,CAC9BQ,MAAM,CAAE,iBAAqB,IAApBC,CAAAA,QAAoB,2DAAT,IAAS,CAC3B,GAAMC,CAAAA,IAAI,CAAGC,QAAQ,CAACC,cAAT,CAAwB,yBAAxB,CAAb,CACAF,IAAI,CAACG,aAAL,GACA,MAAOV,CAAAA,SAAP,CACD,CAL6B,CAM9BW,iBAAiB,CAAE,4BAAM,CACvB,MAAOX,CAAAA,SAAP,CACD,CAR6B,CAAP,EAAN,CAAnB,CAWA,QAASY,CAAAA,YAAT,CAAsBC,KAAtB,CAA6BC,MAA7B,CAAqCC,MAArC,CAA6C,CAC3CF,KAAK,CAACG,cAAN,GACA,GAAMC,CAAAA,OAAO,CAAGH,MAAM,CAACI,MAAP,GAAkB,CAAlC,CACAjB,YAAY,CAACgB,OAAD,CAAZ,CACA,GAAIA,OAAJ,CAAc,CACZE,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBL,MAAtB,CAA8BD,MAA9B,EACA,GAAQO,CAAAA,aAAR,CAA0BnB,OAA1B,CAAQmB,aAAR,CACAlB,uBAAuB,CAACmB,0BAAxB,CAAmDD,aAAnD,CAAkEN,MAAlE,EACGQ,IADH,CACQ,SAACC,MAAD,CAAY,CAChBL,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBI,MAAtB,EACD,CAHH,EAIGC,KAJH,CAIS,SAACC,KAAD,CAAW,CAChBP,OAAO,CAACO,KAAR,CAAc,iBAAd,CAAiCA,KAAjC,EACD,CANH,EAOD,CACF,CAED,mBACE,KAAC,IAAD,wBAEE,KAAC,QAAD,wBAEE,MAAC,MAAD,EAAQ,EAAE,CAAC,yBAAX,CAAqC,SAAS,CAAC,kBAA/C,CAAkE,QAAQ,CAAEd,YAA5E,wBAEA,WAAI,SAAS,CAAC,YAAd,UAA6Bd,CAAC,CAAC,sBAAD,CAA9B,EAFA,cAGA,UAAG,SAAS,CAAC,iBAAb,EAHA,cAKA,MAAC,GAAD,EAAK,SAAS,CAAC,MAAf,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBAEE,MAAC,OAAD,EAAS,SAAS,CAAC,MAAnB,wBACE,KAAC,KAAD,EAAO,OAAO,CAAC,uBAAf,UAAyCA,CAAC,CAAC,uBAAD,CAA1C,EADF,cAEE,KAAC,OAAD,EACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,mBAFP,CAGE,IAAI,CAAC,MAHP,CAIE,EAAE,CAAC,uBAJL,CAKE,KAAK,CAAC,OALR,CAME,QAAQ,CAAE,IANZ,EAFF,GAFF,EADF,cAcI,KAAC,GAAD,EAAK,EAAE,CAAC,GAAR,uBACA,MAAC,OAAD,EAAS,SAAS,CAAC,MAAnB,wBACE,KAAC,KAAD,EAAO,OAAO,CAAC,yBAAf,UAA2CA,CAAC,CAAC,iCAAD,CAA5C,EADF,cAEE,MAAC,OAAD,EACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,yBAFP,CAGE,IAAI,CAAC,QAHP,CAIE,EAAE,CAAC,yBAJL,CAKE,KAAK,CAAC,WALR,wBAME,eAAQ,KAAK,CAAC,MAAd,kBANF,cAOE,eAAQ,KAAK,CAAC,OAAd,mBAPF,cAQE,eAAQ,KAAK,CAAC,WAAd,wBARF,cASE,eAAQ,KAAK,CAAC,MAAd,kBATF,GAFF,GADA,EAdJ,cA8BI,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,UAEEM,eAAe,CAACuB,GAAhB,CAAoB,SAAAC,IAAI,qBACtB,KAAC,kBAAD,EAAsC,IAAI,CAAGA,IAAI,CAACnC,IAAlD,CAAyD,QAAQ,CAAGmC,IAAI,CAAClC,QAAzE,EAA0BkC,IAAI,CAACnC,IAA/B,CADsB,EAAxB,CAFF,EA9BJ,GALA,cAmDA,KAAC,GAAD,EAAK,SAAS,CAAC,MAAf,uBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,cAAD,EAAgB,QAAQ,CAAG,IAA3B,CAAkC,WAAW,CAAE,EAA/C,EADF,EADF,EAnDA,GAFF,EAFF,EADF,CAqED,CAlHyC,CAA1C,CAwHA,cAAeG,CAAAA,uBAAf","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useState, useContext, useImperativeHandle, forwardRef } from 'react';\r\nimport RiesgoAmbientalContext from '../RiesgoAmbientalContext';\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup, AvInput } from \"availity-reactstrap-validation\"\r\nimport AttachmentList from '../../../../components/Attachments/AttachmentList';\r\n\r\n\r\n\r\n//i18n\r\nimport { useTranslation } from 'react-i18next'\r\nimport ServicioRiesgoAmbiental from '../../../../services/RiesgoAmbiental/RiesgoAmbiental';\r\n\r\n\r\nconst SimpleChekQuestion = props => {\r\n  return (\r\n    <AvGroup check className=\"my-2\">\r\n      <AvInput id={ props.name } type=\"checkbox\" name={ props.name } />\r\n      <Label check htmlFor={ props.name }> { props.question }</Label>\r\n    </AvGroup>\r\n  );\r\n};\r\n\r\nSimpleChekQuestion.propTypes = {\r\n  name: PropTypes.string,\r\n  question: PropTypes.string\r\n};\r\n\r\nconst ComposedQuestion = props => {\r\n  return (\r\n    <AvGroup check className=\"my-2\">\r\n      <AvInput id={ props.name } type=\"checkbox\" name={ props.name } />\r\n      <Label check htmlFor={ props.name }> { props.question }</Label>\r\n      <AvInput type=\"textarea\" name={ props.name + 'Comments' } />\r\n    </AvGroup>\r\n  );\r\n};\r\n\r\nComposedQuestion.propTypes = {\r\n  name: PropTypes.string,\r\n  question: PropTypes.string\r\n};\r\n\r\nconst FormAspectosAmbientales = forwardRef((props, ref) => {\r\n\r\n  const { t, i18n } = useTranslation();\r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  // services\r\n  const context = useContext(RiesgoAmbientalContext);\r\n  const servicioRiesgoAmbiental = new ServicioRiesgoAmbiental();\r\n\r\n  const simpleQuestions = [\r\n    { name: 'natureLocationProject', question: '¿El proyecto está ubicado o es colindante a un área natural protegida?' },\r\n    { name: 'physicalResettlement', question: '¿El proyecto involucra reasentamiento físico y/o económico de más de 100 personas?' },\r\n    { name: 'environmentalPermits', question: '¿Se necesita la presentación de permisos ambientales para la ejecución del proyecto?' },\r\n    { name: 'newProject', question: '¿El proyecto es nuevo e involucra el uso de más de 35 Hectáreas de terreno?' },\r\n    { name: 'workersContractors', question: '¿La actividad emplea más de 50 trabajadores y manejan más de 15 contratistas?' },\r\n  ];\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    submit: (validate = true) => {\r\n      const form = document.getElementById('formAspectosAmbientales');\r\n      form.requestSubmit();\r\n      return formValid;\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n    if( isValid ) {\r\n      console.log('submit', values, errors);\r\n      const { transactionId } = context;\r\n      servicioRiesgoAmbiental.guardarAspectosAmbientales(transactionId, values)\r\n        .then((result) => {\r\n          console.log('result', result);\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error guardando', error);\r\n        });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n\r\n      <CardBody>\r\n\r\n        <AvForm id=\"formAspectosAmbientales\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n\r\n        <h4 className=\"card-title\">{ t(\"EnvironmentalAspects\") }</h4>\r\n        <p className=\"card-title-desc\"></p>\r\n\r\n        <Row className=\"my-2\">\r\n          <Col md=\"6\">\r\n\r\n            <AvGroup className=\"mb-3\">\r\n              <Label htmlFor=\"riskPreClassification\">{ t(\"PreClassificationRisk\") }</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"preclassification\"\r\n                type=\"text\"\r\n                id=\"riskPreClassification\"\r\n                value=\"Medio\"\r\n                disabled={true}></AvField>\r\n            </AvGroup>\r\n            </Col>\r\n            <Col md=\"6\">\r\n            <AvGroup className=\"mb-3\">\r\n              <Label htmlFor=\"sustainableCreditRating\">{ t(\"EnvironmentalRiskclassification\") }</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"sustainableCreditRating\"\r\n                type=\"select\"\r\n                id=\"sustainableCreditRating\"\r\n                value=\"MedioAlto\">\r\n                <option value=\"Bajo\">Bajo</option>\r\n                <option value=\"Medio\">Medio</option>\r\n                <option value=\"MedioAlto\">Medio Alto</option>\r\n                <option value=\"Alto\">Alto</option>\r\n              </AvField>\r\n            </AvGroup>\r\n            </Col>\r\n            <Col md=\"12\">\r\n\r\n            { simpleQuestions.map(item => (\r\n                <SimpleChekQuestion key={ item.name } name={ item.name } question={ item.question } />\r\n              ))\r\n            }\r\n\r\n{/*\r\n            { composedQuestions.map(item => (\r\n              <ComposedQuestion key={ item.name } name={ item.name } question={ item.question } />\r\n            ))}\r\n */}\r\n          </Col>\r\n\r\n        </Row>\r\n\r\n        <Row className=\"my-4\">\r\n          <Col md=\"12\">\r\n            <AttachmentList editMode={ true } attachments={[]} />\r\n          </Col>\r\n        </Row>\r\n\r\n        </AvForm>\r\n\r\n      </CardBody>\r\n\r\n    </Card>\r\n  );\r\n\r\n});\r\n\r\n\r\nFormAspectosAmbientales.propTypes = {\r\n};\r\n\r\nexport default FormAspectosAmbientales;\r\n"]},"metadata":{},"sourceType":"module"}