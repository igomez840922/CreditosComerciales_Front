{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\components\\\\PropuestaCreditoComercial\\\\FormNewFacility.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect, useRef } from \"react\";\nimport PropTypes from 'prop-types';\nimport { translationHelpers } from '../../helpers';\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Button, Row, Col } from \"reactstrap\";\nimport { AvForm } from \"availity-reactstrap-validation\";\nimport CustomerSection from \"./facilities/modalNewFacility/CustomerSection\";\nimport ProposalSection from \"./facilities/modalNewFacility/ProposalSection\";\nimport InterestRateSection from \"./facilities/modalNewFacility/InterestRateSection\";\nimport CommissionSection from \"./facilities/modalNewFacility/CommissionSection\";\nimport TermsSection from \"./facilities/modalNewFacility/TermsSection\";\nimport DisbursementSection from \"./facilities/modalNewFacility/DisbursementSection\";\nimport WarrantsSection from \"./facilities/modalNewFacility/WarrantsSection\";\nimport SuretiesSection from \"./facilities/modalNewFacility/SuretiesSection\";\nimport FinancialConditionsSection from \"./facilities/modalNewFacility/FinancialConditionsSection\";\nimport LtvSection from \"./facilities/modalNewFacility/LtvSection\";\nimport AmbientalRiskSection from \"./facilities/modalNewFacility/AmbientalRiskSection\";\nimport FinantialCovenantSection from \"./facilities/modalNewFacility/FinantialCovenantSection\";\nimport LegalDocumentationSection from \"./facilities/modalNewFacility/LegalDocumentationSection\";\nimport ProvisionSection from \"./facilities/modalNewFacility/ProvisionSection\";\nimport CreditRiskSection from \"./facilities/modalNewFacility/CreditRiskSection\";\nimport OtherConditionsSection from \"./facilities/modalNewFacility/OtherConditionsSection\";\nimport { BackendServices, CoreServices } from \"../../services\";\nimport CreditProposalContext from \"./CreditProposalContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormNewFacility = /*#__PURE__*/React.forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  const [dataSet, setdataSet] = useState({\n    \"requestId\": \"XYZ892022\",\n    \"cr\": \"\",\n    \"amount\": 0,\n    \"debtor\": \"\",\n    \"clientTypeId\": 0,\n    \"balance\": 0,\n    \"proposalTypeId\": \"\",\n    \"proposalTypeName\": \"\",\n    \"facilityTypeId\": \"\",\n    \"purpose\": \"\",\n    \"sublimits\": \"\",\n    \"proposalRate\": 0,\n    \"noSubsidyRate\": 0,\n    \"effectiveRate\": 0,\n    \"feci\": true,\n    \"termDays\": 0,\n    \"termDescription\": \"\",\n    \"ltv\": 0,\n    \"finantialConditions\": \"\",\n    \"environmentRiskCategory\": 0,\n    \"covenant\": \"\",\n    \"environmentRiskOpinion\": \"\",\n    \"finantialCovenant\": \"\",\n    \"legalDocumentation\": \"\",\n    \"creditRiskOpinion\": \"\",\n    \"provision\": \"\",\n    \"numero\": \"\",\n    \"otherConditions\": \"\"\n  });\n  const [dataValidation, setdataValidation] = useState({\n    tipoPropuestaRequerido: false,\n    subPropuestaRequerido: false,\n    tipoFacilidadRequerido: false\n  });\n  const context = useContext(CreditProposalContext);\n  const propostalSectionRef = useRef();\n  const [formValid, setFormValid] = useState(false);\n  const location = useLocation();\n  const [dataLocation, setData] = useState(location.data);\n  const [commissions, setCommissions] = useState([]);\n  const [disbursementTerms, setDisbursementTerms] = useState([]);\n  const [paymentPrograms, setPaymentPrograms] = useState([]);\n  const [disbursementMethods, setDisbursementMethods] = useState([]);\n  const [warrants, setWarrants] = useState([]);\n  const [sureties, setSureties] = useState([]);\n  const [otherconditions, setOtherconditions] = useState([]);\n  const [t, c] = translationHelpers('commercial_credit', 'common');\n  React.useImperativeHandle(ref, () => ({\n    submit: (validate = true) => {\n      const form = document.getElementById('formNewFacility');\n\n      if (validate) {\n        if (formValid) {\n          form.requestSubmit();\n          return true;\n        }\n\n        return false;\n      } else {\n        form.requestSubmit();\n        return true;\n      }\n    },\n    getFormValidation: () => {\n      return formValid;\n    }\n  })); // services\n\n  const backendServices = new BackendServices();\n  useEffect(() => {\n    // Read Api Service Data\n    const {\n      transactionId\n    } = context;\n    backendServices.consultPrincipalDebtor(transactionId).then(resp => {\n      dataSet.numero = resp.clientDocId;\n      setdataSet(dataSet);\n    });\n    backendServices.consultFacilidadPropCred(12, \"XYZ432022\").then(resp => {\n      if (resp != undefined) {\n        dataSet.cr = resp.cr;\n        dataSet.amount = resp.amount;\n        dataSet.debtor = resp.debtor;\n        dataSet.clientTypeId = resp.clientTypeId;\n        dataSet.balance = resp.balance;\n        dataSet.proposalTypeId = resp.proposalTypeId;\n        dataSet.proposalTypeName = resp.proposalTypeName;\n        dataSet.facilityTypeId = resp.facilityTypeId;\n        dataSet.purpose = resp.purpose;\n        dataSet.sublimits = resp.sublimits;\n        dataSet.proposalRate = resp.proposalRate;\n        dataSet.noSubsidyRate = resp.noSubsidyRate;\n        dataSet.effectiveRate = resp.effectiveRate;\n        dataSet.feci = resp.feci;\n        dataSet.termDays = resp.termDays;\n        dataSet.termDescription = resp.termDescription;\n        dataSet.ltv = resp.ltv;\n        dataSet.finantialConditions = resp.finantialConditions;\n        dataSet.environmentRiskCategory = resp.environmentRiskCategory;\n        dataSet.covenant = resp.covenant;\n        dataSet.environmentRiskOpinion = resp.environmentRiskOpinion;\n        dataSet.finantialCovenant = resp.finantialCovenant;\n        dataSet.legalDocumentation = resp.legalDocumentation;\n        dataSet.creditRiskOpinion = resp.creditRiskOpinion;\n        dataSet.provision = resp.provision;\n        dataSet.otherConditions = resp.provision;\n        setdataSet(dataSet);\n      }\n    });\n  }, []);\n\n  function handleSubmit(event, errors, values) {\n    if (propostalSectionRef.current.dataReturn.proposalTypeId == null) {\n      dataValidation.tipoPropuestaRequerido = true;\n      setdataValidation(dataValidation);\n      return;\n    } else {\n      values.proposalTypeId = propostalSectionRef.current.dataReturn.proposalTypeId;\n      dataValidation.tipoPropuestaRequerido = false;\n      setdataValidation(dataValidation);\n    }\n\n    if (propostalSectionRef.current.dataReturn.proposalTypeName == null) {\n      dataValidation.subPropuestaRequerido = true;\n      setdataValidation(dataValidation);\n      return;\n    } else {\n      values.proposalTypeName = propostalSectionRef.current.dataReturn.proposalTypeName;\n      dataValidation.subPropuestaRequerido = false;\n      setdataValidation(dataValidation);\n    }\n\n    if (propostalSectionRef.current.dataReturn.facilityTypeId == null) {\n      dataValidation.tipoFacilidadRequerido = true;\n      setdataValidation(dataValidation);\n      return;\n    } else {\n      values.facilityTypeId = propostalSectionRef.current.dataReturn.facilityTypeId;\n      dataValidation.tipoFacilidadRequerido = false;\n      setdataValidation(dataValidation);\n    }\n\n    event.preventDefault();\n\n    if (errors.length > 0) {\n      return;\n    }\n\n    if (event.target.id !== 'formNewFacility') {\n      return;\n    }\n\n    values.amount = Number(values.amount);\n    values.clientTypeId = Number(1);\n    values.balance = Number(values.balance);\n    values.proposalRate = Number(values.proposalRate);\n    values.noSubsidyRate = Number(values.noSubsidyRate);\n    values.effectiveRate = Number(values.effectiveRate);\n    values.feci = values.feci == \"true\" ? true : false;\n    values.termDays = Number(values.termDays);\n    values.environmentRiskCategory = Number(values.environmentRiskCategory);\n    console.log('submit new facility', values);\n    saveNewFacility(values).then(result => {\n      // props.onSave(values);\n      props.onDismiss();\n    });\n  }\n\n  function saveNewFacility(values) {\n    const {\n      requestId\n    } = context;\n    const data = Object.assign({\n      requestId\n    }, values);\n    return backendServices.newFacilityPropCred(data);\n  }\n\n  function handleCancel() {\n    props.onDismiss();\n  }\n\n  function handleNewCommission(newItem) {\n    const newCommissions = [...commissions, newItem];\n    setCommissions(newCommissions);\n  }\n\n  function handleDeleteCommission(item) {\n    const itemIndex = commissions.indexOf(item);\n\n    if (itemIndex === -1) {\n      return;\n    }\n\n    const newCommissions = [...commissions];\n    newCommissions.splice(itemIndex, 1);\n    setCommissions(newCommissions);\n  }\n\n  function handleNewDisbursementTerm(newItem) {\n    const newDisbursementTerms = [...disbursementTerms, newItem];\n    setDisbursementTerms(newDisbursementTerms);\n  }\n\n  function handleDeleteDisbursementTerm(item) {\n    const itemIndex = disbursementTerms.indexOf(item);\n\n    if (itemIndex === -1) {\n      return;\n    }\n\n    const newDisbursementTerms = [...disbursementTerms];\n    newDisbursementTerms.splice(itemIndex, 1);\n    setDisbursementTerms(newDisbursementTerms);\n  }\n\n  function handleNewPaymentProgram(newItem) {\n    const newPaymentPrograms = [...paymentPrograms, newItem];\n    setPaymentPrograms(newPaymentPrograms);\n  }\n\n  function handleDeletePaymentProgram(item) {\n    const itemIndex = paymentPrograms.indexOf(item);\n\n    if (itemIndex === -1) {\n      return;\n    }\n\n    const newPaymentPrograms = [...paymentPrograms];\n    newPaymentPrograms.splice(itemIndex, 1);\n    setPaymentPrograms(newPaymentPrograms);\n  }\n\n  function handleNewDisbursementMethod(newItem) {\n    const newDisbursementMethods = [...disbursementMethods, newItem];\n    setDisbursementMethods(newDisbursementMethods);\n  }\n\n  function handleDeleteDisbursementMethod(item) {\n    const itemIndex = disbursementMethods.indexOf(item);\n\n    if (itemIndex === -1) {\n      return;\n    }\n\n    const newDisbursementMethods = [...disbursementMethods];\n    newDisbursementMethods.splice(itemIndex, 1);\n    setDisbursementMethods(newDisbursementMethods);\n  }\n\n  function handleNewWarrant(newItem) {\n    const newWarrants = [...warrants, newItem];\n    setWarrants(newWarrants);\n  }\n\n  function handleDeleteWarrant(item) {\n    const itemIndex = warrants.indexOf(item);\n\n    if (itemIndex === -1) {\n      return;\n    }\n\n    const newWarrants = [...warrants];\n    newWarrants.splice(itemIndex, 1);\n    setWarrants(newWarrants);\n  }\n\n  function handleNewSurety(newItem) {\n    const newSureties = [...sureties, newItem];\n    setSureties(newSureties);\n  }\n\n  function handleDeleteSurety(item) {\n    console.log('delete surety', item);\n    const itemIndex = sureties.indexOf(item);\n\n    if (itemIndex === -1) {\n      return;\n    }\n\n    const newSureties = [...sureties];\n    newSureties.splice(itemIndex, 1);\n    setSureties(newSureties);\n  }\n\n  function handleNewOtherCondition(newItem) {\n    const newOtherConditions = [...otherconditions, newItem];\n    setOtherconditions(newOtherConditions);\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: t(\"Facility\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"card-title-desc\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AvForm, {\n      id: \"formNewFacility\",\n      className: \"needs-validation\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(CustomerSection, {\n            dataLocation: dataLocation,\n            validation: dataValidation,\n            dataSet: dataSet,\n            identificationList: props.identificationList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(ProposalSection, {\n            validation: dataValidation,\n            dataSet: dataSet,\n            ref: propostalSectionRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(InterestRateSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(CommissionSection, {\n            validation: dataValidation,\n            dataSet: dataSet,\n            items: commissions,\n            onSaveItem: handleNewCommission,\n            onDeleteItem: handleDeleteCommission\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(TermsSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(DisbursementSection, {\n            validation: dataValidation,\n            dataSet: dataSet,\n            disbursementTerms: disbursementTerms,\n            onSaveDisbursementTerm: handleNewDisbursementTerm,\n            onDeleteDisbursementTerm: handleDeleteDisbursementTerm,\n            paymentPrograms: paymentPrograms,\n            onSavePaymentProgram: handleNewPaymentProgram,\n            onDeletePaymentProgram: handleDeletePaymentProgram,\n            disbursementMethods: disbursementMethods,\n            onSaveDisbursementMethod: handleNewDisbursementMethod,\n            onDeleteDisbursementMethod: handleDeleteDisbursementMethod\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(WarrantsSection, {\n            validation: dataValidation,\n            dataSet: dataSet,\n            warrants: warrants,\n            onSaveItem: handleNewWarrant,\n            onDeleteItem: handleDeleteWarrant\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(LtvSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(SuretiesSection, {\n            validation: dataValidation,\n            dataSet: dataSet,\n            sureties: sureties,\n            onSaveItem: handleNewSurety,\n            onDeleteItem: handleDeleteSurety\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(FinancialConditionsSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(AmbientalRiskSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(FinantialCovenantSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(LegalDocumentationSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(OtherConditionsSection, {\n            validation: dataValidation,\n            dataSet: dataSet,\n            otherconditions: otherconditions,\n            onSaveOtherConditions: handleNewOtherCondition\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(CreditRiskSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(ProvisionSection, {\n            validation: dataValidation,\n            dataSet: dataSet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"my-2\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xl: \"12 text-end\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"#\",\n            className: \"btn btn-dark\",\n            onClick: handleCancel,\n            style: {\n              margin: '5px'\n            },\n            children: c(\"Cancel\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn btn-primary\",\n            type: \"submit\",\n            color: \"success\",\n            style: {\n              margin: '5px'\n            },\n            children: c(\"Save\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n}, \"3rPzRLtaTPTlX3p8Cxs+VN8X+GI=\", false, function () {\n  return [useLocation, React.useImperativeHandle];\n}));\n_c2 = FormNewFacility;\nFormNewFacility.propTypes = {\n  isOpen: PropTypes.bool,\n  onDismiss: PropTypes.func,\n  onSave: PropTypes.func\n};\nexport default FormNewFacility;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormNewFacility$React.forwardRef\");\n$RefreshReg$(_c2, \"FormNewFacility\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/FormNewFacility.js"],"names":["React","useContext","useState","useEffect","useRef","PropTypes","translationHelpers","Link","useLocation","Button","Row","Col","AvForm","CustomerSection","ProposalSection","InterestRateSection","CommissionSection","TermsSection","DisbursementSection","WarrantsSection","SuretiesSection","FinancialConditionsSection","LtvSection","AmbientalRiskSection","FinantialCovenantSection","LegalDocumentationSection","ProvisionSection","CreditRiskSection","OtherConditionsSection","BackendServices","CoreServices","CreditProposalContext","FormNewFacility","forwardRef","props","ref","dataSet","setdataSet","dataValidation","setdataValidation","tipoPropuestaRequerido","subPropuestaRequerido","tipoFacilidadRequerido","context","propostalSectionRef","formValid","setFormValid","location","dataLocation","setData","data","commissions","setCommissions","disbursementTerms","setDisbursementTerms","paymentPrograms","setPaymentPrograms","disbursementMethods","setDisbursementMethods","warrants","setWarrants","sureties","setSureties","otherconditions","setOtherconditions","t","c","useImperativeHandle","submit","validate","form","document","getElementById","requestSubmit","getFormValidation","backendServices","transactionId","consultPrincipalDebtor","then","resp","numero","clientDocId","consultFacilidadPropCred","undefined","cr","amount","debtor","clientTypeId","balance","proposalTypeId","proposalTypeName","facilityTypeId","purpose","sublimits","proposalRate","noSubsidyRate","effectiveRate","feci","termDays","termDescription","ltv","finantialConditions","environmentRiskCategory","covenant","environmentRiskOpinion","finantialCovenant","legalDocumentation","creditRiskOpinion","provision","otherConditions","handleSubmit","event","errors","values","current","dataReturn","preventDefault","length","target","id","Number","console","log","saveNewFacility","result","onDismiss","requestId","Object","assign","newFacilityPropCred","handleCancel","handleNewCommission","newItem","newCommissions","handleDeleteCommission","item","itemIndex","indexOf","splice","handleNewDisbursementTerm","newDisbursementTerms","handleDeleteDisbursementTerm","handleNewPaymentProgram","newPaymentPrograms","handleDeletePaymentProgram","handleNewDisbursementMethod","newDisbursementMethods","handleDeleteDisbursementMethod","handleNewWarrant","newWarrants","handleDeleteWarrant","handleNewSurety","newSureties","handleDeleteSurety","handleNewOtherCondition","newOtherConditions","identificationList","margin","propTypes","isOpen","bool","func","onSave"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from \"react\"\r\nimport PropTypes from 'prop-types'\r\nimport { translationHelpers } from '../../helpers';\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport {\r\n  Button,\r\n  Row,\r\n  Col,\r\n} from \"reactstrap\"\r\nimport { AvForm } from \"availity-reactstrap-validation\"\r\nimport CustomerSection from \"./facilities/modalNewFacility/CustomerSection\";\r\nimport ProposalSection from \"./facilities/modalNewFacility/ProposalSection\"\r\nimport InterestRateSection from \"./facilities/modalNewFacility/InterestRateSection\"\r\nimport CommissionSection from \"./facilities/modalNewFacility/CommissionSection\"\r\nimport TermsSection from \"./facilities/modalNewFacility/TermsSection\"\r\nimport DisbursementSection from \"./facilities/modalNewFacility/DisbursementSection\"\r\nimport WarrantsSection from \"./facilities/modalNewFacility/WarrantsSection\"\r\nimport SuretiesSection from \"./facilities/modalNewFacility/SuretiesSection\"\r\nimport FinancialConditionsSection from \"./facilities/modalNewFacility/FinancialConditionsSection\"\r\nimport LtvSection from \"./facilities/modalNewFacility/LtvSection\"\r\nimport AmbientalRiskSection from \"./facilities/modalNewFacility/AmbientalRiskSection\"\r\nimport FinantialCovenantSection from \"./facilities/modalNewFacility/FinantialCovenantSection\"\r\nimport LegalDocumentationSection from \"./facilities/modalNewFacility/LegalDocumentationSection\"\r\nimport ProvisionSection from \"./facilities/modalNewFacility/ProvisionSection\"\r\nimport CreditRiskSection from \"./facilities/modalNewFacility/CreditRiskSection\"\r\nimport OtherConditionsSection from \"./facilities/modalNewFacility/OtherConditionsSection\"\r\nimport { BackendServices, CoreServices } from \"../../services\";\r\nimport CreditProposalContext from \"./CreditProposalContext\";\r\n\r\n\r\nconst FormNewFacility = React.forwardRef((props, ref) => {\r\n  const [dataSet, setdataSet] = useState({\r\n    \"requestId\": \"XYZ892022\",\r\n    \"cr\": \"\",\r\n    \"amount\": 0,\r\n    \"debtor\": \"\",\r\n    \"clientTypeId\": 0,\r\n    \"balance\": 0,\r\n    \"proposalTypeId\": \"\",\r\n    \"proposalTypeName\": \"\",\r\n    \"facilityTypeId\": \"\",\r\n    \"purpose\": \"\",\r\n    \"sublimits\": \"\",\r\n    \"proposalRate\": 0,\r\n    \"noSubsidyRate\": 0,\r\n    \"effectiveRate\": 0,\r\n    \"feci\": true,\r\n    \"termDays\": 0,\r\n    \"termDescription\": \"\",\r\n    \"ltv\": 0,\r\n    \"finantialConditions\": \"\",\r\n    \"environmentRiskCategory\": 0,\r\n    \"covenant\": \"\",\r\n    \"environmentRiskOpinion\": \"\",\r\n    \"finantialCovenant\": \"\",\r\n    \"legalDocumentation\": \"\",\r\n    \"creditRiskOpinion\": \"\",\r\n    \"provision\": \"\",\r\n    \"numero\": \"\",\r\n    \"otherConditions\": \"\",\r\n  });\r\n\r\n  const [dataValidation, setdataValidation] = useState({\r\n    tipoPropuestaRequerido: false,\r\n    subPropuestaRequerido: false,\r\n    tipoFacilidadRequerido: false,\r\n  });\r\n\r\n  const context = useContext(CreditProposalContext);\r\n  const propostalSectionRef = useRef();\r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  const location = useLocation();\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [commissions, setCommissions] = useState([]);\r\n  const [disbursementTerms, setDisbursementTerms] = useState([]);\r\n  const [paymentPrograms, setPaymentPrograms] = useState([]);\r\n  const [disbursementMethods, setDisbursementMethods] = useState([]);\r\n  const [warrants, setWarrants] = useState([]);\r\n  const [sureties, setSureties] = useState([]);\r\n  const [otherconditions, setOtherconditions] = useState([]);\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n  React.useImperativeHandle(ref, () => ({\r\n    submit: (validate = true) => {\r\n      const form = document.getElementById('formNewFacility');\r\n      if (validate) {\r\n        if (formValid) {\r\n          form.requestSubmit();\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      else {\r\n        form.requestSubmit();\r\n        return true;\r\n      }\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n  // services\r\n  const backendServices = new BackendServices();\r\n\r\n  useEffect(() => {\r\n    // Read Api Service Data\r\n    const { transactionId } = context;\r\n    backendServices.consultPrincipalDebtor(transactionId).then(resp => {\r\n      dataSet.numero = resp.clientDocId\r\n      setdataSet(dataSet);\r\n    });\r\n    backendServices.consultFacilidadPropCred(12, \"XYZ432022\").then(resp => {\r\n      if (resp != undefined) {\r\n        dataSet.cr = resp.cr;\r\n        dataSet.amount = resp.amount;\r\n        dataSet.debtor = resp.debtor;\r\n        dataSet.clientTypeId = resp.clientTypeId;\r\n        dataSet.balance = resp.balance;\r\n        dataSet.proposalTypeId = resp.proposalTypeId;\r\n        dataSet.proposalTypeName = resp.proposalTypeName;\r\n        dataSet.facilityTypeId = resp.facilityTypeId;\r\n        dataSet.purpose = resp.purpose;\r\n        dataSet.sublimits = resp.sublimits;\r\n        dataSet.proposalRate = resp.proposalRate;\r\n        dataSet.noSubsidyRate = resp.noSubsidyRate;\r\n        dataSet.effectiveRate = resp.effectiveRate;\r\n        dataSet.feci = resp.feci;\r\n        dataSet.termDays = resp.termDays;\r\n        dataSet.termDescription = resp.termDescription;\r\n        dataSet.ltv = resp.ltv;\r\n        dataSet.finantialConditions = resp.finantialConditions;\r\n        dataSet.environmentRiskCategory = resp.environmentRiskCategory;\r\n        dataSet.covenant = resp.covenant;\r\n        dataSet.environmentRiskOpinion = resp.environmentRiskOpinion;\r\n        dataSet.finantialCovenant = resp.finantialCovenant;\r\n        dataSet.legalDocumentation = resp.legalDocumentation;\r\n        dataSet.creditRiskOpinion = resp.creditRiskOpinion;\r\n        dataSet.provision = resp.provision;\r\n        dataSet.otherConditions = resp.provision;\r\n        setdataSet(dataSet);\r\n      }\r\n    })\r\n  }, []);\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    if (propostalSectionRef.current.dataReturn.proposalTypeId == null) {\r\n      dataValidation.tipoPropuestaRequerido = true;\r\n      setdataValidation(dataValidation);\r\n      return;\r\n    } else {\r\n      values.proposalTypeId = propostalSectionRef.current.dataReturn.proposalTypeId;\r\n      dataValidation.tipoPropuestaRequerido = false;\r\n      setdataValidation(dataValidation);\r\n    }\r\n    if (propostalSectionRef.current.dataReturn.proposalTypeName == null) {\r\n      dataValidation.subPropuestaRequerido = true;\r\n      setdataValidation(dataValidation);\r\n      return;\r\n    } else {\r\n      values.proposalTypeName = propostalSectionRef.current.dataReturn.proposalTypeName;\r\n      dataValidation.subPropuestaRequerido = false;\r\n      setdataValidation(dataValidation);\r\n    }\r\n    if (propostalSectionRef.current.dataReturn.facilityTypeId == null) {\r\n      dataValidation.tipoFacilidadRequerido = true;\r\n      setdataValidation(dataValidation);\r\n      return;\r\n    } else {\r\n      values.facilityTypeId = propostalSectionRef.current.dataReturn.facilityTypeId;\r\n      dataValidation.tipoFacilidadRequerido = false;\r\n      setdataValidation(dataValidation);\r\n    }\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    if (event.target.id !== 'formNewFacility') {\r\n      return;\r\n    }\r\n    values.amount = Number(values.amount);\r\n    values.clientTypeId = Number(1);\r\n    values.balance = Number(values.balance);\r\n    values.proposalRate = Number(values.proposalRate);\r\n    values.noSubsidyRate = Number(values.noSubsidyRate);\r\n    values.effectiveRate = Number(values.effectiveRate);\r\n    values.feci = values.feci == \"true\" ? true : false;\r\n    values.termDays = Number(values.termDays);\r\n    values.environmentRiskCategory = Number(values.environmentRiskCategory);\r\n    console.log('submit new facility', values);\r\n    saveNewFacility(values)\r\n      .then((result) => {\r\n        // props.onSave(values);\r\n        props.onDismiss();\r\n      });\r\n  }\r\n\r\n  function saveNewFacility(values) {\r\n    const { requestId } = context;\r\n    const data = Object.assign({\r\n      requestId\r\n    }, values);\r\n    return backendServices.newFacilityPropCred(data);\r\n  }\r\n\r\n  function handleCancel() {\r\n    props.onDismiss();\r\n  }\r\n\r\n  function handleNewCommission(newItem) {\r\n    const newCommissions = [...commissions, newItem];\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleDeleteCommission(item) {\r\n    const itemIndex = commissions.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newCommissions = [...commissions];\r\n    newCommissions.splice(itemIndex, 1);\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleNewDisbursementTerm(newItem) {\r\n    const newDisbursementTerms = [...disbursementTerms, newItem];\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleDeleteDisbursementTerm(item) {\r\n    const itemIndex = disbursementTerms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementTerms = [...disbursementTerms];\r\n    newDisbursementTerms.splice(itemIndex, 1);\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleNewPaymentProgram(newItem) {\r\n    const newPaymentPrograms = [...paymentPrograms, newItem];\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleDeletePaymentProgram(item) {\r\n    const itemIndex = paymentPrograms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newPaymentPrograms = [...paymentPrograms];\r\n    newPaymentPrograms.splice(itemIndex, 1);\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleNewDisbursementMethod(newItem) {\r\n    const newDisbursementMethods = [...disbursementMethods, newItem];\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n\r\n  function handleDeleteDisbursementMethod(item) {\r\n    const itemIndex = disbursementMethods.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementMethods = [...disbursementMethods];\r\n    newDisbursementMethods.splice(itemIndex, 1);\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n\r\n  function handleNewWarrant(newItem) {\r\n    const newWarrants = [...warrants, newItem];\r\n    setWarrants(newWarrants);\r\n  }\r\n\r\n  function handleDeleteWarrant(item) {\r\n    const itemIndex = warrants.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newWarrants = [...warrants];\r\n    newWarrants.splice(itemIndex, 1);\r\n    setWarrants(newWarrants);\r\n  }\r\n\r\n  function handleNewSurety(newItem) {\r\n    const newSureties = [...sureties, newItem];\r\n    setSureties(newSureties);\r\n  }\r\n\r\n  function handleDeleteSurety(item) {\r\n    console.log('delete surety', item);\r\n    const itemIndex = sureties.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newSureties = [...sureties];\r\n    newSureties.splice(itemIndex, 1);\r\n    setSureties(newSureties);\r\n  }\r\n\r\n  function handleNewOtherCondition(newItem) {\r\n    const newOtherConditions = [...otherconditions, newItem];\r\n    setOtherconditions(newOtherConditions);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Facility\")}</h5>\r\n      <p className=\"card-title-desc\"></p>\r\n\r\n      <AvForm id=\"formNewFacility\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <CustomerSection dataLocation={dataLocation} validation={dataValidation} dataSet={dataSet} identificationList={props.identificationList} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <ProposalSection validation={dataValidation} dataSet={dataSet} ref={propostalSectionRef} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <InterestRateSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <CommissionSection validation={dataValidation} dataSet={dataSet} items={commissions}\r\n              onSaveItem={handleNewCommission}\r\n              onDeleteItem={handleDeleteCommission} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <TermsSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <DisbursementSection validation={dataValidation} dataSet={dataSet} disbursementTerms={disbursementTerms}\r\n              onSaveDisbursementTerm={handleNewDisbursementTerm}\r\n              onDeleteDisbursementTerm={handleDeleteDisbursementTerm}\r\n              paymentPrograms={paymentPrograms}\r\n              onSavePaymentProgram={handleNewPaymentProgram}\r\n              onDeletePaymentProgram={handleDeletePaymentProgram}\r\n              disbursementMethods={disbursementMethods}\r\n              onSaveDisbursementMethod={handleNewDisbursementMethod}\r\n              onDeleteDisbursementMethod={handleDeleteDisbursementMethod} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <WarrantsSection validation={dataValidation} dataSet={dataSet} warrants={warrants}\r\n              onSaveItem={handleNewWarrant}\r\n              onDeleteItem={handleDeleteWarrant} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <LtvSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <SuretiesSection validation={dataValidation} dataSet={dataSet} sureties={sureties}\r\n              onSaveItem={handleNewSurety}\r\n              onDeleteItem={handleDeleteSurety} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <FinancialConditionsSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <AmbientalRiskSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <FinantialCovenantSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <LegalDocumentationSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <OtherConditionsSection validation={dataValidation} dataSet={dataSet} otherconditions={otherconditions} onSaveOtherConditions={handleNewOtherCondition} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <CreditRiskSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <ProvisionSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"my-2\">\r\n          <Col xl=\"12 text-end\">\r\n            <Link to=\"#\" className=\"btn btn-dark\"\r\n              onClick={handleCancel} style={{ margin: '5px' }}>\r\n              {c(\"Cancel\")}\r\n            </Link>\r\n            <Button className=\"btn btn-primary\" type=\"submit\" color=\"success\" style={{ margin: '5px' }}>\r\n              {c(\"Save\")}\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </AvForm>\r\n\r\n    </React.Fragment>\r\n  )\r\n});\r\n\r\nFormNewFacility.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  onDismiss: PropTypes.func,\r\n  onSave: PropTypes.func\r\n};\r\n\r\n\r\nexport default FormNewFacility;\r\n"]},"metadata":{},"sourceType":"module"}