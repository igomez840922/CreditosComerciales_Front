{"ast":null,"code":"import { BackendServices, CoreServices } from \"../services\";\nconst backendServices = new BackendServices();\nconst coreServices = new CoreServices();\nexport default class AutoSaveData {\n  //salvamos deudas de un tramite\n  async saveInitialData(transactionId) {\n    this.saveFacilities(transactionId);\n    this.saveCorporateExhibition(transactionId);\n  } //salvamos exposicion por tramite\n\n\n  async saveCorporateExhibition(transactionId) {\n    try {\n      var dataResult = await backendServices.getExposicionCorporativaBD(transactionId);\n\n      if (dataResult !== undefined && dataResult !== null && dataResult.length > 0) {\n        return;\n      }\n\n      dataResult = await coreServices.getCorporateExhibition(transactionId);\n\n      for (let i = 0; i < dataResult.length; i++) {\n        let datoSent = {\n          \"transactId\": Number(transactionId),\n          //\"accountNumber\": data.name,\n          //\"t24ClientId\": data.customerNumberT24,\n          \"description\": dataResult[i].name,\n          \"approved\": dataResult[i].approved,\n          \"currentBalance\": dataResult[i].balance,\n          \"proposed\": dataResult[i].proposal,\n          \"ltv\": 0,\n          \"difference\": dataResult[i].variation\n        };\n        await backendServices.saveExposicionCorporativaBD(datoSent);\n      }\n    } catch (err) {}\n  } //salvamos facilidades por tramite\n\n\n  async saveFacilities(transactionId) {\n    try {\n      var dataResult1 = await coreServices.getFacilitiesByTransaction(transactionId);\n      console.log(\"saveFacilities\", dataResult1);\n      var request = await backendServices.consultGeneralDataPropCred(transactionId);\n      var dataResult = await backendServices.consultarFacilidadesT24(request[0].requestId);\n\n      if (dataResult !== undefined && dataResult !== null && dataResult.length > 0) {\n        return;\n      }\n\n      dataResult = await coreServices.getFacilitiesByTransaction(transactionId);\n\n      for (let i = 0; i < dataResult.length; i++) {\n        var _dataResult$i, _dataResult$i2, _dataResult$i3, _dataResult$i4, _dataResult$i5, _dataResult$i$facilit, _dataResult$i6, _request$0$requestId;\n\n        let datoSent = {\n          \"facilityNumber\": (_dataResult$i = dataResult[i]) === null || _dataResult$i === void 0 ? void 0 : _dataResult$i.AcctId,\n          \"cr\": \"\",\n          \"amount\": (_dataResult$i2 = dataResult[i]) === null || _dataResult$i2 === void 0 ? void 0 : _dataResult$i2.approvedAmount,\n          \"debtor\": (_dataResult$i3 = dataResult[i]) === null || _dataResult$i3 === void 0 ? void 0 : _dataResult$i3.debtorName,\n          \"clientTypeId\": (_dataResult$i4 = dataResult[i]) === null || _dataResult$i4 === void 0 ? void 0 : _dataResult$i4.debtorId,\n          \"balance\": (_dataResult$i5 = dataResult[i]) === null || _dataResult$i5 === void 0 ? void 0 : _dataResult$i5.actualBalance,\n          \"purpose\": \"\",\n          \"sublimits\": \"\",\n          \"proposalRate\": 0,\n          \"noSubsidyRate\": 0,\n          \"effectiveRate\": 0,\n          \"feci\": false,\n          \"termDays\": 0,\n          \"termDescription\": \"\",\n          \"ltv\": 0,\n          \"finantialConditions\": \" \",\n          \"environmentRiskCategory\": 0,\n          \"covenant\": \" \",\n          \"environmentRiskOpinion\": \" \",\n          \"finantialCovenant\": \" \",\n          \"legalDocumentation\": \"  \",\n          \"otherConditions\": \" \",\n          \"creditRiskOpinion\": \" \",\n          \"provision\": \" \",\n          \"proposalTypeId\": \"\",\n          \"proposalTypeName\": \"\",\n          \"facilityTypeId\": (_dataResult$i$facilit = (_dataResult$i6 = dataResult[i]) === null || _dataResult$i6 === void 0 ? void 0 : _dataResult$i6.facilityType) !== null && _dataResult$i$facilit !== void 0 ? _dataResult$i$facilit : \"\",\n          \"termType\": \"\",\n          \"origin\": \"CORE\",\n          \"applyEscrow\": false,\n          \"facilityId\": 0,\n          \"requestId\": (_request$0$requestId = request[0].requestId) !== null && _request$0$requestId !== void 0 ? _request$0$requestId : \"\",\n          \"startingAmount\": 0,\n          \"term\": \"\"\n        };\n        await backendServices.newFacilityPropCred(datoSent);\n      }\n    } catch (err) {}\n  }\n\n}","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/helpers/AutoSaveData.js"],"names":["BackendServices","CoreServices","backendServices","coreServices","AutoSaveData","saveInitialData","transactionId","saveFacilities","saveCorporateExhibition","dataResult","getExposicionCorporativaBD","undefined","length","getCorporateExhibition","i","datoSent","Number","name","approved","balance","proposal","variation","saveExposicionCorporativaBD","err","dataResult1","getFacilitiesByTransaction","console","log","request","consultGeneralDataPropCred","consultarFacilidadesT24","requestId","AcctId","approvedAmount","debtorName","debtorId","actualBalance","facilityType","newFacilityPropCred"],"mappings":"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","sourcesContent":["\r\nimport { BackendServices, CoreServices } from \"../services\";\r\n\r\nconst backendServices = new BackendServices();\r\nconst coreServices = new CoreServices();\r\n\r\nexport default class AutoSaveData{\r\n    \r\n\r\n    //salvamos deudas de un tramite\r\n    async saveInitialData(transactionId) {\r\n        this.saveFacilities(transactionId);\r\n        this.saveCorporateExhibition(transactionId);\r\n    }\r\n\r\n    //salvamos exposicion por tramite\r\n    async saveCorporateExhibition(transactionId) {\r\n        try{\r\n\r\n            var dataResult =  await  backendServices.getExposicionCorporativaBD(transactionId);\r\n            if(dataResult!==undefined && dataResult!==null && dataResult.length > 0){\r\n                return;\r\n            }\r\n    \r\n            dataResult =  await coreServices.getCorporateExhibition(transactionId)\r\n           for (let i = 0; i < dataResult.length; i++) {\r\n            let datoSent = {\r\n              \"transactId\": Number(transactionId),\r\n              //\"accountNumber\": data.name,\r\n              //\"t24ClientId\": data.customerNumberT24,\r\n              \"description\": dataResult[i].name,\r\n              \"approved\": dataResult[i].approved,\r\n              \"currentBalance\": dataResult[i].balance,\r\n              \"proposed\": dataResult[i].proposal,\r\n              \"ltv\": 0,\r\n              \"difference\": dataResult[i].variation,\r\n            }\r\n            await backendServices.saveExposicionCorporativaBD(datoSent)\r\n          }         \r\n        }\r\n        catch(err){}\r\n    }\r\n   \r\n    //salvamos facilidades por tramite\r\n    async saveFacilities(transactionId) {\r\n        try{\r\n           var dataResult1 =  await coreServices.getFacilitiesByTransaction(transactionId);\r\n           console.log(\"saveFacilities\",dataResult1);\r\n        \r\n           var request = await backendServices.consultGeneralDataPropCred(transactionId);\r\n          \r\n           var dataResult =  await backendServices.consultarFacilidadesT24(request[0].requestId);\r\n            if(dataResult!==undefined && dataResult!==null && dataResult.length > 0){\r\n                return;\r\n            }\r\n\r\n           dataResult =  await coreServices.getFacilitiesByTransaction(transactionId)\r\n           for (let i = 0; i < dataResult.length; i++) {\r\n            let datoSent = {\r\n                \"facilityNumber\": dataResult[i]?.AcctId,\r\n                \"cr\": \"\",\r\n                \"amount\": dataResult[i]?.approvedAmount,\r\n                \"debtor\": dataResult[i]?.debtorName,\r\n                \"clientTypeId\": dataResult[i]?.debtorId,\r\n                \"balance\": dataResult[i]?.actualBalance,\r\n                \"purpose\": \"\",\r\n                \"sublimits\": \"\",\r\n                \"proposalRate\": 0,\r\n                \"noSubsidyRate\": 0,\r\n                \"effectiveRate\": 0,\r\n                \"feci\": false,\r\n                \"termDays\": 0,\r\n                \"termDescription\": \"\",\r\n                \"ltv\": 0,\r\n                \"finantialConditions\": \" \",\r\n                \"environmentRiskCategory\": 0,\r\n                \"covenant\": \" \",\r\n                \"environmentRiskOpinion\": \" \",\r\n                \"finantialCovenant\": \" \",\r\n                \"legalDocumentation\": \"  \",\r\n                \"otherConditions\": \" \",\r\n                \"creditRiskOpinion\": \" \",\r\n                \"provision\": \" \",\r\n                \"proposalTypeId\": \"\",\r\n                \"proposalTypeName\": \"\",\r\n                \"facilityTypeId\": dataResult[i]?.facilityType ?? \"\",\r\n                \"termType\": \"\",\r\n                \"origin\": \"CORE\",\r\n                \"applyEscrow\": false,\r\n                \"facilityId\": 0,\r\n                \"requestId\": request[0].requestId ?? \"\",\r\n                \"startingAmount\": 0,\r\n                \"term\": \"\"\r\n              }\r\n            await backendServices.newFacilityPropCred(datoSent)\r\n          }         \r\n        }\r\n        catch(err){}\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}