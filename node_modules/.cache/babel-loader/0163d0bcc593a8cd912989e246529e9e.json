{"ast":null,"code":"import _defineProperty from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{translationHelper}from'../../../../helpers';import Select from\"react-select\";import{Row,Col,Label}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";import AvGroup from\"availity-reactstrap-validation/lib/AvGroup\";import{BackendServices,CoreServices}from\"../../../../services\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProposalSection=/*#__PURE__*/React.forwardRef(function(props,ref){var _jsx2,_jsx3;React.useImperativeHandle(ref,function(){return{validateForm:function validateForm(){var form=document.getElementById('frmFacilidades');form.requestSubmit();},getFormValidation:function getFormValidation(){return formValid;},dataReturn:dataReturn};});var api=new BackendServices();var apiCoreServices=new CoreServices();var _useState=useState({proposalTypeId:null,proposalTypeName:null,facilityTypeId:null}),_useState2=_slicedToArray(_useState,2),dataReturn=_useState2[0],setdataReturn=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formValid=_useState4[0],setFormValid=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),tipoPropuesta=_useState6[0],settipoPropuesta=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),tipoPropuestaSelect=_useState8[0],settipoPropuestaSelect=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),propuestaSet=_useState10[0],setpropuestaSet=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),tipoPropuestaRequerido=_useState12[0],settipoPropuestaRequerido=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),subPropuesta=_useState14[0],setsubPropuesta=_useState14[1];var _useState15=useState(undefined),_useState16=_slicedToArray(_useState15,2),subPropuestaSelect=_useState16[0],setsubPropuestaSelect=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),subPropuestaSet=_useState18[0],setsubPropuestaSet=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),subPropuestaRequerido=_useState20[0],setsubPropuestaRequerido=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),tipoFacilidad=_useState22[0],settipoFacilidad=_useState22[1];var _useState23=useState(undefined),_useState24=_slicedToArray(_useState23,2),tipoFacilidadSelect=_useState24[0],settipoFacilidadSelect=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),tipoFacilidadSet=_useState26[0],settipoFacilidadSet=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),tipoFacilidadRequerido=_useState28[0],settipoFacilidadRequerido=_useState28[1];var t=translationHelper('commercial_credit');function handleSubmit(){// if (propuestaSet == \"\" || propuestaSet == null) {\n//   settipoPropuestaRequerido(true);\n//   return;\n// } else {\n//   settipoPropuestaRequerido(false);\n// }\n// if (subPropuestaSet == \"\" || subPropuestaSet == null) {\n//   setsubPropuestaRequerido(true);\n//   return;\n// } else {\n//   setsubPropuestaRequerido(false);\n// }\n// if (tipoFacilidadSet == \"\" || tipoFacilidadSet == null) {\n//   settipoFacilidadRequerido(true);\n//   return;\n// } else {\n//   settipoFacilidadRequerido(false);\n// }\ndataReturn.proposalTypeId=propuestaSet;dataReturn.proposalTypeName=subPropuestaSet;dataReturn.facilityTypeId=tipoFacilidadSet;setdataReturn(dataReturn);setFormValid(true);}React.useEffect(function(){// Read Api Service data\ninitializeData();},[]);React.useEffect(function(){console.log(props);// Read Api Service data\nsettipoPropuestaRequerido(props.validation.tipoPropuestaRequerido);setsubPropuestaRequerido(props.validation.subPropuestaRequerido);settipoFacilidadRequerido(props.validation.tipoFacilidadRequerido);},[props]);React.useEffect(function(){// Read Api Service data \nvar defaultVal=null;settipoPropuestaSelect(undefined);setsubPropuestaSelect(undefined);settipoFacilidadSelect(undefined);try{if(tipoPropuesta.length>0&&props.dataSet.proposalTypeId!==null&&tipoPropuestaSelect===undefined){defaultVal=tipoPropuesta.find(function(x){return x.value===props.dataSet.proposalTypeId;});if(defaultVal!==undefined){settipoPropuestaSelect(defaultVal);}}if(subPropuesta.length>0&&props.dataSet.proposalTypeName!==null&&subPropuestaSelect===undefined){defaultVal=subPropuesta.find(function(x){return x.value===props.dataSet.proposalTypeName;});if(defaultVal!==undefined){setsubPropuestaSelect(defaultVal);}}if(tipoFacilidad.length>0&&props.dataSet.facilityTypeId!==null&&tipoFacilidadSelect===undefined){defaultVal=tipoFacilidad.find(function(x){return x.value===props.dataSet.facilityTypeId;});if(defaultVal!==undefined){settipoFacilidadSelect(defaultVal);}}}catch(err){}},[props]);function initializeData(){api.retrieveProposalType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}settipoPropuesta(json);}).catch(function(error){console.error('api error: ',error);});api.retrieveSubproposalType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}setsubPropuesta(json);}).catch(function(error){console.error('api error: ',error);});api.retrieveFacilityType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}settipoFacilidad(json);}).catch(function(error){console.error('api error: ',error);});}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"proposalType\",children:t(\"Proposal Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){settipoPropuestaSelect(tipoPropuesta.find(function(x){return x.value===e.value;}));setpropuestaSet(e.value);dataReturn.proposalTypeId=e.value;setdataReturn(dataReturn);},options:tipoPropuesta,placeholder:t(\"Select\"),value:tipoPropuestaSelect}),props.validation.tipoPropuestaRequerido?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"subproposalType\",children:t(\"SubProposal Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){setsubPropuestaSelect(subPropuesta.find(function(x){return x.value===e.value;}));setsubPropuestaSet(e.value);dataReturn.proposalTypeName=e.value;setdataReturn(dataReturn);},options:subPropuesta,placeholder:t(\"Select\"),value:subPropuestaSelect}),props.validation.subPropuestaRequerido?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"facilityType\",children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(Select,{onChange:function onChange(e){settipoFacilidadSelect(tipoFacilidad.find(function(x){return x.value===e.value;}));settipoFacilidadSet(e.value);dataReturn.facilityTypeId=e.value;setdataReturn(dataReturn);},options:tipoFacilidad,placeholder:t(\"Select\"),value:tipoFacilidadSelect}),props.validation.tipoFacilidadRequerido?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"purpose\",children:t(\"Purpose\")}),/*#__PURE__*/_jsx(AvField,(_jsx2={id:\"purpose\",className:\"form-control\",name:\"purpose\"},_defineProperty(_jsx2,\"id\",\"purpose\"),_defineProperty(_jsx2,\"validate\",{required:{value:true,errorMessage:t(\"Required\")}}),_defineProperty(_jsx2,\"type\",\"textarea\"),_defineProperty(_jsx2,\"value\",props.dataSet.purpose),_defineProperty(_jsx2,\"rows\",\"4\"),_jsx2))]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sublimits\",children:t(\"Sub Limits\")}),/*#__PURE__*/_jsx(AvField,(_jsx3={id:\"sublimits\",className:\"form-control\",name:\"sublimits\"},_defineProperty(_jsx3,\"id\",\"sublimits\"),_defineProperty(_jsx3,\"value\",props.dataSet.sublimits),_defineProperty(_jsx3,\"validate\",{required:{value:true,errorMessage:t(\"Required\")}}),_defineProperty(_jsx3,\"type\",\"textarea\"),_defineProperty(_jsx3,\"rows\",\"4\"),_jsx3))]})})]})]});});export default ProposalSection;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/facilities/modalNewFacility/ProposalSection.js"],"names":["React","useState","translationHelper","Select","Row","Col","Label","AvForm","AvField","AvGroup","BackendServices","CoreServices","ProposalSection","forwardRef","props","ref","useImperativeHandle","validateForm","form","document","getElementById","requestSubmit","getFormValidation","formValid","dataReturn","api","apiCoreServices","proposalTypeId","proposalTypeName","facilityTypeId","setdataReturn","setFormValid","tipoPropuesta","settipoPropuesta","undefined","tipoPropuestaSelect","settipoPropuestaSelect","propuestaSet","setpropuestaSet","tipoPropuestaRequerido","settipoPropuestaRequerido","subPropuesta","setsubPropuesta","subPropuestaSelect","setsubPropuestaSelect","subPropuestaSet","setsubPropuestaSet","subPropuestaRequerido","setsubPropuestaRequerido","tipoFacilidad","settipoFacilidad","tipoFacilidadSelect","settipoFacilidadSelect","tipoFacilidadSet","settipoFacilidadSet","tipoFacilidadRequerido","settipoFacilidadRequerido","t","handleSubmit","useEffect","initializeData","console","log","validation","defaultVal","length","dataSet","find","x","value","err","retrieveProposalType","then","response","json","i","push","label","catch","error","retrieveSubproposalType","retrieveFacilityType","e","required","errorMessage","purpose","sublimits"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { translationHelper } from '../../../../helpers';\r\nimport Select from \"react-select\";\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport AvGroup from \"availity-reactstrap-validation/lib/AvGroup\"\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\n\r\n\r\nconst ProposalSection = React.forwardRef((props, ref) => {\r\n  React.useImperativeHandle(ref, () => ({\r\n    validateForm: () => {\r\n      const form = document.getElementById('frmFacilidades');\r\n      form.requestSubmit();\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }, dataReturn\r\n  }))\r\n  const api = new BackendServices();\r\n  const apiCoreServices = new CoreServices();\r\n  const [dataReturn, setdataReturn] = useState({\r\n    proposalTypeId: null,\r\n    proposalTypeName: null,\r\n    facilityTypeId: null,\r\n  });\r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  const [tipoPropuesta, settipoPropuesta] = useState(null);\r\n  const [tipoPropuestaSelect, settipoPropuestaSelect] = useState(undefined);\r\n  const [propuestaSet, setpropuestaSet] = useState(null);\r\n  const [tipoPropuestaRequerido, settipoPropuestaRequerido] = useState(false);\r\n\r\n  const [subPropuesta, setsubPropuesta] = useState(null);\r\n  const [subPropuestaSelect, setsubPropuestaSelect] = useState(undefined);\r\n  const [subPropuestaSet, setsubPropuestaSet] = useState(null);\r\n  const [subPropuestaRequerido, setsubPropuestaRequerido] = useState(false);\r\n\r\n  const [tipoFacilidad, settipoFacilidad] = useState(null);\r\n  const [tipoFacilidadSelect, settipoFacilidadSelect] = useState(undefined);\r\n  const [tipoFacilidadSet, settipoFacilidadSet] = useState(null);\r\n  const [tipoFacilidadRequerido, settipoFacilidadRequerido] = useState(false);\r\n  const t = translationHelper('commercial_credit');\r\n  function handleSubmit() {\r\n    // if (propuestaSet == \"\" || propuestaSet == null) {\r\n    //   settipoPropuestaRequerido(true);\r\n    //   return;\r\n    // } else {\r\n    //   settipoPropuestaRequerido(false);\r\n    // }\r\n    // if (subPropuestaSet == \"\" || subPropuestaSet == null) {\r\n    //   setsubPropuestaRequerido(true);\r\n    //   return;\r\n    // } else {\r\n    //   setsubPropuestaRequerido(false);\r\n    // }\r\n    // if (tipoFacilidadSet == \"\" || tipoFacilidadSet == null) {\r\n    //   settipoFacilidadRequerido(true);\r\n    //   return;\r\n    // } else {\r\n    //   settipoFacilidadRequerido(false);\r\n    // }\r\n    dataReturn.proposalTypeId = propuestaSet;\r\n    dataReturn.proposalTypeName = subPropuestaSet;\r\n    dataReturn.facilityTypeId = tipoFacilidadSet;\r\n    setdataReturn(dataReturn);\r\n    setFormValid(true);\r\n  }\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    initializeData();\r\n  }, []);\r\n  React.useEffect(() => {\r\n    console.log(props);\r\n    // Read Api Service data\r\n    settipoPropuestaRequerido(props.validation.tipoPropuestaRequerido);\r\n    setsubPropuestaRequerido(props.validation.subPropuestaRequerido);\r\n    settipoFacilidadRequerido(props.validation.tipoFacilidadRequerido);\r\n  }, [props]);\r\n  React.useEffect(() => {\r\n    // Read Api Service data \r\n    var defaultVal = null;\r\n    settipoPropuestaSelect(undefined);\r\n    setsubPropuestaSelect(undefined);\r\n    settipoFacilidadSelect(undefined);\r\n    try {\r\n      if (tipoPropuesta.length > 0 && props.dataSet.proposalTypeId !== null && tipoPropuestaSelect === undefined) {\r\n        defaultVal = tipoPropuesta.find(x => x.value === props.dataSet.proposalTypeId);\r\n        if (defaultVal !== undefined) {\r\n          settipoPropuestaSelect(defaultVal);\r\n        }\r\n      }\r\n      if (subPropuesta.length > 0 && props.dataSet.proposalTypeName !== null && subPropuestaSelect === undefined) {\r\n        defaultVal = subPropuesta.find(x => x.value === props.dataSet.proposalTypeName);\r\n        if (defaultVal !== undefined) {\r\n          setsubPropuestaSelect(defaultVal);\r\n        }\r\n      }\r\n      if (tipoFacilidad.length > 0 && props.dataSet.facilityTypeId !== null && tipoFacilidadSelect === undefined) {\r\n        defaultVal = tipoFacilidad.find(x => x.value === props.dataSet.facilityTypeId);\r\n        if (defaultVal !== undefined) {\r\n          settipoFacilidadSelect(defaultVal);\r\n        }\r\n      }\r\n    }\r\n    catch (err) { }\r\n  }, [props]);\r\n  function initializeData() {\r\n    api.retrieveProposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        settipoPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveSubproposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        setsubPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveFacilityType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        settipoFacilidad(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Proposal\")}</h5>\r\n      {/* <AvForm id=\"frmFacilidades\" className=\"needs-validation\" onSubmit={handleSubmit}> */}\r\n      <Row>\r\n        <Col md=\"4\">\r\n          <Label htmlFor=\"proposalType\">{t(\"Proposal Type\")}</Label>\r\n          <Select\r\n            onChange={(e) => {\r\n              settipoPropuestaSelect(tipoPropuesta.find(x => x.value === e.value))\r\n              setpropuestaSet(e.value);\r\n              dataReturn.proposalTypeId = e.value;\r\n              setdataReturn(dataReturn);\r\n            }}\r\n            options={tipoPropuesta}\r\n            placeholder={t(\"Select\")}\r\n            value={tipoPropuestaSelect}\r\n          />\r\n          {props.validation.tipoPropuestaRequerido ?\r\n            <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n            : null}\r\n        </Col>\r\n        <Col md=\"4\">\r\n          <Label htmlFor=\"subproposalType\">{t(\"SubProposal Type\")}</Label>\r\n          <Select\r\n            onChange={(e) => {\r\n              setsubPropuestaSelect(subPropuesta.find(x => x.value === e.value))\r\n              setsubPropuestaSet(e.value);\r\n              dataReturn.proposalTypeName = e.value;\r\n              setdataReturn(dataReturn);\r\n            }}\r\n            options={subPropuesta}\r\n            placeholder={t(\"Select\")}\r\n            value={subPropuestaSelect}\r\n          />\r\n          {props.validation.subPropuestaRequerido ?\r\n            <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n            : null}\r\n\r\n        </Col>\r\n        <Col md=\"4\">\r\n          <Label htmlFor=\"facilityType\">{t(\"Facility Type\")}</Label>\r\n          <Select\r\n            onChange={(e) => {\r\n              settipoFacilidadSelect(tipoFacilidad.find(x => x.value === e.value))\r\n              settipoFacilidadSet(e.value);\r\n              dataReturn.facilityTypeId = e.value;\r\n              setdataReturn(dataReturn);\r\n            }}\r\n            options={tipoFacilidad}\r\n            placeholder={t(\"Select\")}\r\n            value={tipoFacilidadSelect}\r\n          />\r\n          {props.validation.tipoFacilidadRequerido ?\r\n            <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n            : null}\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col md=\"6\">\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"purpose\">{t(\"Purpose\")}</Label>\r\n            <AvField id=\"purpose\"\r\n              className=\"form-control\"\r\n              name=\"purpose\"\r\n              id=\"purpose\"\r\n              validate={{\r\n                required: { value: true, errorMessage: t(\"Required\") }\r\n              }}\r\n              type=\"textarea\"\r\n              value={props.dataSet.purpose}\r\n              rows=\"4\" />\r\n          </AvGroup>\r\n        </Col>\r\n        <Col md=\"6\">\r\n          <AvGroup className=\"mb-3\">\r\n            <Label htmlFor=\"sublimits\">{t(\"Sub Limits\")}</Label>\r\n            <AvField id=\"sublimits\"\r\n              className=\"form-control\"\r\n              name=\"sublimits\"\r\n              id=\"sublimits\"\r\n              value={props.dataSet.sublimits}\r\n              validate={{\r\n                required: { value: true, errorMessage: t(\"Required\") }\r\n              }}\r\n              type=\"textarea\"\r\n              rows=\"4\" />\r\n          </AvGroup></Col>\r\n      </Row>\r\n      {/* </AvForm> */}\r\n    </React.Fragment>\r\n  );\r\n\r\n});\r\nProposalSection.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n}\r\n\r\nexport default ProposalSection;\r\n"]},"metadata":{},"sourceType":"module"}