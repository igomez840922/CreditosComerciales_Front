{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\17_RiesgoCredito\\\\riesgoCredito\\\\Conclusiones.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext, useImperativeHandle, forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation, withTranslation } from \"react-i18next\";\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { Card, CardBody, Row, Col, Button, Label } from \"reactstrap\";\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\";\nimport RiesgoCreditoContext from '../RiesgoCreditoContext';\nimport ServicioRiesgoCredito from '../../../../services/RiesgoCredito/RiesgoCredito';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormConclusiones = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [formValid, setFormValid] = useState(false);\n  const [conclusions, setConclusions] = useState('');\n  const [isUpdatingRecord, setIsUpdatingRecord] = useState(false); // services\n\n  const context = useContext(RiesgoCreditoContext);\n  const servicioRiesgoCredito = new ServicioRiesgoCredito();\n  const {\n    locationData\n  } = props;\n  useImperativeHandle(ref, () => ({\n    submit: () => {\n      const form = document.getElementById('formRiesgoCreditoConclusiones');\n      form.requestSubmit();\n      return formValid;\n    },\n    getFormValidation: () => {\n      return formValid;\n    }\n  }));\n  useEffect(() => {\n    // load data\n    if (!context.transactionId) {\n      return;\n    }\n\n    const {\n      transactionId\n    } = context;\n    servicioRiesgoCredito.consultarRiesgoCreditoComercial(transactionId).then(info => {\n      if (info.transactId) {\n        setIsUpdatingRecord(true);\n      }\n\n      setConclusions(info.conclusions);\n    }).catch(error => {\n      console.error('error fetch riesgo credito', error);\n    });\n  }, []);\n\n  function handleSubmit(event, errors, values) {\n    event.preventDefault();\n    const isValid = errors.length === 0;\n    setFormValid(isValid);\n\n    if (isValid) {\n      servicioRiesgoCredito.guardarInformacionRiesgoCredito(locationData.transactionId, values, isUpdatingRecord).then(result => {\n        props.onSaveSuccess();\n      }).catch(error => {\n        console.error('save error', error);\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"card-sub-title\",\n      children: t(\"ConclusionsAndRecomendations\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n      children: /*#__PURE__*/_jsxDEV(AvForm, {\n        id: \"formRiesgoCreditoConclusiones\",\n        className: \"needs-validation\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"my-3\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(AvGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"conclusions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AvField, {\n                className: \"form-control\",\n                name: \"conclusions\",\n                type: \"textarea\",\n                id: \"conclusions\",\n                value: conclusions,\n                rows: \"7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}, \"buRvDBlzLxaH2/xfd+W8RjkGlyw=\", false, function () {\n  return [useTranslation, useImperativeHandle];\n}));\n_c2 = FormConclusiones;\nFormConclusiones.propTypes = {\n  onSaveSuccess: PropTypes.func,\n  locationData: PropTypes.any\n};\nexport default FormConclusiones;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormConclusiones$forwardRef\");\n$RefreshReg$(_c2, \"FormConclusiones\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/17_RiesgoCredito/riesgoCredito/Conclusiones.js"],"names":["useState","useEffect","useContext","useImperativeHandle","forwardRef","PropTypes","useTranslation","withTranslation","useLocation","useHistory","Card","CardBody","Row","Col","Button","Label","AvForm","AvField","AvGroup","RiesgoCreditoContext","ServicioRiesgoCredito","FormConclusiones","props","ref","t","i18n","formValid","setFormValid","conclusions","setConclusions","isUpdatingRecord","setIsUpdatingRecord","context","servicioRiesgoCredito","locationData","submit","form","document","getElementById","requestSubmit","getFormValidation","transactionId","consultarRiesgoCreditoComercial","then","info","transactId","catch","error","console","handleSubmit","event","errors","values","preventDefault","isValid","length","guardarInformacionRiesgoCredito","result","onSaveSuccess","propTypes","func","any"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext, useImperativeHandle, forwardRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\n\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport RiesgoCreditoContext from '../RiesgoCreditoContext';\r\nimport ServicioRiesgoCredito from '../../../../services/RiesgoCredito/RiesgoCredito';\r\n\r\nconst FormConclusiones = forwardRef((props, ref) => {\r\n\r\n  const { t, i18n } = useTranslation();\r\n  \r\n  const [formValid, setFormValid] = useState(false);\r\n  const [conclusions, setConclusions] = useState('');\r\n  const [isUpdatingRecord, setIsUpdatingRecord] = useState(false);\r\n\r\n  // services\r\n  const context = useContext(RiesgoCreditoContext);\r\n  const servicioRiesgoCredito = new ServicioRiesgoCredito();\r\n\r\n  const { locationData } = props;\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    submit: () => {\r\n      const form = document.getElementById('formRiesgoCreditoConclusiones');\r\n      form.requestSubmit();\r\n      return formValid;\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n\r\n  useEffect(() => {\r\n    // load data\r\n    if (!context.transactionId) {\r\n      return;\r\n    }\r\n    const { transactionId } = context;\r\n    servicioRiesgoCredito.consultarRiesgoCreditoComercial(transactionId)\r\n      .then((info) => {\r\n        if( info.transactId ) {\r\n          setIsUpdatingRecord(true);\r\n        }\r\n        setConclusions(info.conclusions);\r\n      })\r\n      .catch((error) => {\r\n        console.error('error fetch riesgo credito', error);\r\n      });\r\n  }, []);\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n    if (isValid) {\r\n      servicioRiesgoCredito.guardarInformacionRiesgoCredito(locationData.transactionId, values, isUpdatingRecord)\r\n        .then((result) => {\r\n          props.onSaveSuccess();\r\n        })\r\n        .catch((error) => {\r\n          console.error('save error', error);\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Card>\r\n      <h5 className=\"card-sub-title\">{ t(\"ConclusionsAndRecomendations\") }</h5>\r\n        \r\n      <CardBody>\r\n        <AvForm id=\"formRiesgoCreditoConclusiones\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n          <Row className=\"my-3\">\r\n            <Col md=\"12\">\r\n              <AvGroup>\r\n                <Label htmlFor=\"conclusions\"></Label>\r\n                <AvField className=\"form-control\"\r\n                  name=\"conclusions\"\r\n                  type=\"textarea\"\r\n                  id=\"conclusions\"\r\n                  value={conclusions}\r\n                  rows=\"7\" />\r\n              </AvGroup>\r\n            </Col>\r\n          </Row>\r\n        </AvForm>\r\n      </CardBody>\r\n    </Card>\r\n  );\r\n});\r\n\r\n\r\nFormConclusiones.propTypes = {\r\n  onSaveSuccess: PropTypes.func,\r\n  locationData:PropTypes.any\r\n};\r\n\r\nexport default FormConclusiones;\r\n"]},"metadata":{},"sourceType":"module"}