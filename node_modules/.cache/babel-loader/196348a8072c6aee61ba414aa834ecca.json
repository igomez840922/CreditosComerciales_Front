{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\components\\\\Common\\\\AccountMovementsHistory.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport Select from \"react-select\";\nimport { useLocation, useHistory } from 'react-router-dom';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { Row, Col, Card, CardBody, Button, Label, Table, Pagination, PaginationItem, PaginationLink, CardFooter } from \"reactstrap\";\nimport { AvForm, AvField } from \"availity-reactstrap-validation\";\nimport { Link } from \"react-router-dom\";\nimport { CoreServices, BackendServices } from '../../services';\nimport Currency from '../../helpers/currency';\nimport { uniq_key } from '../../helpers/unq_key';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n;\n\nconst AccountMovementsHistory = props => {\n  _s();\n\n  const currencyData = new Currency();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [dataRows, setDataRows] = useState([]);\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\n  const [apiServiceBackend, setapiServiceBackend] = useState(new BackendServices());\n  const [apiCoreServices, setCoreServices] = useState(new CoreServices());\n  const [dataMovimientos, setdataMovimientos] = useState(null); //On Mounting (componentDidMount)\n\n  React.useEffect(() => {\n    fetchData();\n  }, []);\n\n  function fetchData() {\n    loadData();\n  }\n\n  function groupBy(collection, property) {\n    var i = 0,\n        val,\n        index,\n        values = [],\n        result = [];\n\n    for (; i < collection.length; i++) {\n      val = collection[i][property];\n      index = values.indexOf(val);\n      if (index > -1) result[index].push(collection[i]);else {\n        values.push(val);\n        result.push([collection[i]]);\n      }\n    }\n\n    return result;\n  } //cargar lista de facilidades\n\n\n  async function loadData(core = false) {\n    var _props$transactionId;\n\n    setIsActiveLoading(true);\n    await apiServiceBackend.consultMovementsBank((_props$transactionId = props === null || props === void 0 ? void 0 : props.transactionId) !== null && _props$transactionId !== void 0 ? _props$transactionId : 0).then(resp => {\n      setIsActiveLoading(false);\n\n      if (resp !== undefined && resp !== null && resp.bankBanesco.length > 0) {\n        setIsActiveLoading(false); //toca dibujar la tabla\n\n        if (resp.bankBanesco.length > 0) {\n          resp = Array.from(new Set(resp.bankBanesco.map(({\n            accountNumber,\n            averageBalance,\n            deposits,\n            month,\n            year,\n            status\n          }) => JSON.stringify({\n            accountNumber,\n            averageBalance,\n            deposits,\n            month,\n            year,\n            status\n          })))).map(JSON.parse); // console.log(\"ssdadasda\",groupBy(resp,\"accountNumber\"));\n          // let newJson=groupBy(resp,\"accountNumber\");\n\n          setdataMovimientos(resp.map((data, index, arr) => {\n            var _resp, _arr, _data$averageBalance, _data$deposits, _arr2, _arr3, _movementsYear$reduce, _movementsYear$reduce2, _movementsYear$reduce3, _movementsYear$reduce4;\n\n            let movementsYear = (_resp = resp) === null || _resp === void 0 ? void 0 : _resp.filter(movement => movement.year === data.year && movement.status && movement.accountNumber === data.accountNumber);\n            return data.status ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: ((_arr = arr[index - 1]) === null || _arr === void 0 ? void 0 : _arr.accountNumber) != data.accountNumber && data.accountNumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: data.year\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: data.month\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"$\", currencyData.formatTable((_data$averageBalance = data.averageBalance) !== null && _data$averageBalance !== void 0 ? _data$averageBalance : 0)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"$\", currencyData.formatTable((_data$deposits = data.deposits) !== null && _data$deposits !== void 0 ? _data$deposits : 0)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 21\n                }, this)]\n              }, uniq_key() + \"1\", true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 19\n              }, this), (data.year !== ((_arr2 = arr[index + 1]) === null || _arr2 === void 0 ? void 0 : _arr2.year) || data.accountNumber !== ((_arr3 = arr[index + 1]) === null || _arr3 === void 0 ? void 0 : _arr3.accountNumber)) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: t(\"Total\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: [\"$\", currencyData.formatTable((_movementsYear$reduce = movementsYear === null || movementsYear === void 0 ? void 0 : movementsYear.reduce((acu, crr) => acu + crr.averageBalance, 0).toFixed(2)) !== null && _movementsYear$reduce !== void 0 ? _movementsYear$reduce : 0)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: [\"$\", currencyData.formatTable((_movementsYear$reduce2 = movementsYear === null || movementsYear === void 0 ? void 0 : movementsYear.reduce((acu, crr) => acu + crr.deposits, 0).toFixed(2)) !== null && _movementsYear$reduce2 !== void 0 ? _movementsYear$reduce2 : 0)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 98,\n                    columnNumber: 25\n                  }, this)]\n                }, uniq_key() + \"2\", true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: t(\"Average\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 102,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: [\"$\", currencyData.formatTable((_movementsYear$reduce3 = movementsYear === null || movementsYear === void 0 ? void 0 : movementsYear.reduce((acu, crr) => acu + crr.averageBalance / movementsYear.length, 0).toFixed(2)) !== null && _movementsYear$reduce3 !== void 0 ? _movementsYear$reduce3 : 0)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: [\"$\", currencyData.formatTable((_movementsYear$reduce4 = movementsYear === null || movementsYear === void 0 ? void 0 : movementsYear.reduce((acu, crr) => acu + crr.deposits / movementsYear.length, 0).toFixed(2)) !== null && _movementsYear$reduce4 !== void 0 ? _movementsYear$reduce4 : 0)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 25\n                  }, this)]\n                }, uniq_key() + \"3\", true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true) : null;\n          }));\n        } else {\n          setdataMovimientos( /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"6\",\n              style: {\n                textAlign: 'center'\n              },\n              children: t(\"NoData\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, uniq_key() + \"2\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this));\n        }\n      } else {\n        if (core) {\n          setIsActiveLoading(false);\n          return;\n        }\n      }\n    });\n  }\n\n  function getUniqueListBy(arr, key) {\n    return [...new Map(arr.map(item => [item[key], item])).values()];\n  }\n\n  return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n    active: isActiveLoading,\n    spinner: true,\n    text: t(\"WaitingPlease\"),\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"6\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"card-sub-title\",\n            children: t(\"AccountMovementsHistory\") + \" - Banesco\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            md: \"12\",\n            className: \"table-responsive styled-table-div\",\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              className: \"table table-striped table-hover styled-table table\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: t(\"Account\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: t(\"Year\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: t(\"Month\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: t(\"AverageAmount\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: t(\"Deposits\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: dataMovimientos\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AccountMovementsHistory, \"hOBh6RtKyynYB6dmdNTW6Lb2034=\", false, function () {\n  return [useTranslation];\n});\n\n_c = AccountMovementsHistory;\nAccountMovementsHistory.propTypes = {\n  customerNumberT24: PropTypes.string\n}; //export default (withTranslation()(DatosGenerales));\n\nexport default AccountMovementsHistory;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountMovementsHistory\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/Common/AccountMovementsHistory.js"],"names":["React","useState","PropTypes","useTranslation","Select","useLocation","useHistory","LoadingOverlay","Row","Col","Card","CardBody","Button","Label","Table","Pagination","PaginationItem","PaginationLink","CardFooter","AvForm","AvField","Link","CoreServices","BackendServices","Currency","uniq_key","AccountMovementsHistory","props","currencyData","t","i18n","dataRows","setDataRows","isActiveLoading","setIsActiveLoading","apiServiceBackend","setapiServiceBackend","apiCoreServices","setCoreServices","dataMovimientos","setdataMovimientos","useEffect","fetchData","loadData","groupBy","collection","property","i","val","index","values","result","length","indexOf","push","core","consultMovementsBank","transactionId","then","resp","undefined","bankBanesco","Array","from","Set","map","accountNumber","averageBalance","deposits","month","year","status","JSON","stringify","parse","data","arr","movementsYear","filter","movement","formatTable","reduce","acu","crr","toFixed","textAlign","getUniqueListBy","key","Map","item","propTypes","customerNumberT24","string"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation } from 'react-i18next'\r\nimport Select from \"react-select\";\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport LoadingOverlay from 'react-loading-overlay';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Button,\r\n  Label,\r\n  Table,\r\n  Pagination,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  CardFooter,\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport { CoreServices, BackendServices } from '../../services';\r\nimport Currency from '../../helpers/currency'; import { uniq_key } from '../../helpers/unq_key';\r\n;\r\n\r\nconst AccountMovementsHistory = (props) => {\r\n  const currencyData = new Currency();\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const [dataRows, setDataRows] = useState([]);\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n\r\n  const [apiServiceBackend, setapiServiceBackend] = useState(new BackendServices());\r\n  const [apiCoreServices, setCoreServices] = useState(new CoreServices());\r\n\r\n  const [dataMovimientos, setdataMovimientos] = useState(null);\r\n  //On Mounting (componentDidMount)\r\n  React.useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  function fetchData() {\r\n    loadData();\r\n  }\r\n  function groupBy(collection, property) {\r\n    var i = 0, val, index,\r\n      values = [], result = [];\r\n    for (; i < collection.length; i++) {\r\n      val = collection[i][property];\r\n      index = values.indexOf(val);\r\n      if (index > -1)\r\n        result[index].push(collection[i]);\r\n      else {\r\n        values.push(val);\r\n        result.push([collection[i]]);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  //cargar lista de facilidades\r\n  async function loadData(core = false) {\r\n\r\n    setIsActiveLoading(true)\r\n    await apiServiceBackend.consultMovementsBank(props?.transactionId ?? 0).then(resp => {\r\n      setIsActiveLoading(false)\r\n      if (resp !== undefined && resp !== null && resp.bankBanesco.length > 0) {\r\n        setIsActiveLoading(false)\r\n        //toca dibujar la tabla\r\n        if (resp.bankBanesco.length > 0) {\r\n\r\n          resp = Array.from(new Set(resp.bankBanesco.map(({ accountNumber, averageBalance, deposits, month, year, status }) => JSON.stringify({ accountNumber, averageBalance, deposits, month, year, status })))).map(JSON.parse);\r\n          // console.log(\"ssdadasda\",groupBy(resp,\"accountNumber\"));\r\n          // let newJson=groupBy(resp,\"accountNumber\");\r\n          setdataMovimientos(resp.map((data, index, arr) => {\r\n            let movementsYear = resp?.filter(movement => movement.year === data.year && movement.status && movement.accountNumber === data.accountNumber);\r\n            return (\r\n              data.status ?\r\n                <>\r\n                  <tr key={uniq_key() + \"1\"}>\r\n                    <th>{arr[index - 1]?.accountNumber != data.accountNumber && data.accountNumber}</th>\r\n                    <td>{data.year}</td>\r\n                    <td>{data.month}</td>\r\n                    <td>${currencyData.formatTable(data.averageBalance ?? 0)}</td>\r\n                    <td>${currencyData.formatTable(data.deposits ?? 0)}</td>\r\n\r\n                  </tr>\r\n                  {(data.year !== arr[index + 1]?.year || data.accountNumber !== arr[index + 1]?.accountNumber) && (\r\n                    <>\r\n                      <tr key={uniq_key() + \"2\"}>\r\n                        <td></td>\r\n                        <th><b>{t(\"Total\")}</b></th>\r\n                        <td></td>\r\n                        <th>${currencyData.formatTable(movementsYear?.reduce((acu, crr) => acu + crr.averageBalance, 0).toFixed(2) ?? 0)}</th>\r\n                        <th>${currencyData.formatTable(movementsYear?.reduce((acu, crr) => acu + crr.deposits, 0).toFixed(2) ?? 0)}</th>\r\n                        <td></td>\r\n                      </tr>\r\n                      <tr key={uniq_key() + \"3\"}>\r\n                        <td></td>\r\n                        <th><b>{t(\"Average\")}</b></th>\r\n                        <td></td>\r\n                        <th>${currencyData.formatTable(movementsYear?.reduce((acu, crr) => acu + crr.averageBalance / movementsYear.length, 0).toFixed(2) ?? 0)}</th>\r\n                        <th>${currencyData.formatTable(movementsYear?.reduce((acu, crr) => acu + crr.deposits / movementsYear.length, 0).toFixed(2) ?? 0)}</th>\r\n                        <td></td>\r\n                      </tr>\r\n                    </>\r\n                  )}\r\n                </>\r\n                : null)\r\n          }\r\n          ));\r\n        } else {\r\n          setdataMovimientos(\r\n            <tr key={uniq_key() + \"2\"}>\r\n              <td colSpan=\"6\" style={{ textAlign: 'center' }}>{t(\"NoData\")}</td>\r\n            </tr>);\r\n        }\r\n      } else {\r\n        if (core) {\r\n          setIsActiveLoading(false)\r\n          return;\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  function getUniqueListBy(arr, key) {\r\n    return [...new Map(arr.map(item => [item[key], item])).values()]\r\n  }\r\n\r\n  return (\r\n\r\n    <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n\r\n      <Card>\r\n\r\n        <Row>\r\n          <Col md=\"6\">\r\n            <h5 className=\"card-sub-title\">{t(\"AccountMovementsHistory\") + \" - Banesco\"}</h5>\r\n          </Col>\r\n        </Row>\r\n\r\n        <CardBody>\r\n\r\n          <Row>\r\n            <Col md=\"12\" className=\"table-responsive styled-table-div\">\r\n              <Table className=\"table table-striped table-hover styled-table table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>{t(\"Account\")}</th>\r\n                    <th>{t(\"Year\")}</th>\r\n                    <th>{t(\"Month\")}</th>\r\n                    <th>{t(\"AverageAmount\")}</th>\r\n                    <th>{t(\"Deposits\")}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {/* {dataRows.length > 0 ? dataRows : null} */}\r\n                  {dataMovimientos}\r\n                </tbody>\r\n              </Table>\r\n            </Col>\r\n          </Row>\r\n        </CardBody>\r\n      </Card>\r\n\r\n    </LoadingOverlay>\r\n\r\n  )\r\n}\r\n\r\nAccountMovementsHistory.propTypes = {\r\n  customerNumberT24: PropTypes.string\r\n}\r\n\r\n//export default (withTranslation()(DatosGenerales));\r\nexport default AccountMovementsHistory;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}