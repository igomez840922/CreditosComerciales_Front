{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*ExclusionList = Lista de Exclusion*/import React,{useState}from\"react\";import{useLocation,useHistory}from'react-router-dom';import LoadingOverlay from'react-loading-overlay';import ModalEndProcess from\"../../../components/EndProcess/ModalEndProcess\";import*as OPTs from\"../../../helpers/options_helper\";import*as url from\"../../../helpers/url_helper\";import{Row,Col,Card,CardBody,Label,CardFooter,CardHeader,Button}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";import{Link}from\"react-router-dom\";//Import Breadcrumb\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";//i18n\nimport{withTranslation}from\"react-i18next\";import FormResult from\"./FormResultados\";import ModalAdvanceOptions from\"./ModalAdvanceOptions\";import ModalCloseOptions from\"./ModalCloseOptions\";import{BackendServices,CoreServices,BpmServices}from\"../../../services\";import SweetAlert from\"react-bootstrap-sweetalert\";import{useTranslation}from\"react-i18next\";import{InfoBpmModel}from'../../../models/Common/InfoBpmModel';import{LogProcessModel}from'../../../models/Common/LogProcessModel';import LogProcess from\"../../../components/LogProcess/index\";import{saveLogProcess}from\"../../../helpers/logs_helper\";import HorizontalSteeper from\"../../../components/Common/HorizontalSteeper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListaExclusion=function ListaExclusion(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isReadOnly=_useState2[0],setReadOnly=_useState2[1];var history=useHistory();var location=useLocation();//Data que recibimos en el location\nvar _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),locationData=_useState4[0],setLocationData=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dataList=_useState6[0],setDataList=_useState6[1];//items de la lista de exclusion\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),dataListSelected=_useState8[0],setDataListSelected=_useState8[1];//items selected de la lista de exclusion       \nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isActiveLoading=_useState10[0],setIsActiveLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),successSave_dlg=_useState12[0],setsuccessSave_dlg=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),error_dlg=_useState14[0],seterror_dlg=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),error_msg=_useState16[0],seterror_msg=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),displayModalAdvanceOptions=_useState18[0],setDisplayModalAdvanceOptions=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),displayModalCloseOptions=_useState20[0],setDisplayModalCloseOptions=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),displayModalEndProcess=_useState22[0],setdisplayModalEndProcess=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),mainDebtor=_useState24[0],setmainDebtor=_useState24[1];//Servicios\nvar _useState25=useState(new BackendServices()),_useState26=_slicedToArray(_useState25,2),backendServices=_useState26[0],setbackendServices=_useState26[1];var _useState27=useState(new BpmServices()),_useState28=_slicedToArray(_useState27,2),bpmServices=_useState28[0],setbpmServices=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),checked=_useState30[0],setchecked=_useState30[1];//On Mounting (componentDid Mount)\nReact.useEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);fetchData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);fetchData(result);}}},[]);React.useEffect(function(){var lista=document.getElementsByClassName(\"listaExclusion\");for(var i=0;i<lista.length;i++){for(var j=0;j<dataListSelected.length;j++){if(dataListSelected[j].exclusionCatListId==dataList[i].exclusionId){document.getElementById(dataList[i].exclusionId).checked=true;setchecked(true);}}}},[props,dataListSelected]);//Caraga Inicial de datos\nfunction fetchData(locationData){console.log(locationData);if(locationData.readOnly!=null){setReadOnly(locationData.readOnly);if(locationData.readOnly&&locationData.taskStatus==\"Reservado\"){bpmServices.checkAndStartTask(locationData).then(function(iniresult){if(iniresult===false){history.push(url.URL_DASHBOARD);}});}}else{setReadOnly(false);}loadMainDebtor(locationData);setLocationData(locationData);initializeData(locationData);}//Caraga Inicial\nfunction initializeData(locdata){var processNumber=locdata?locdata.transactionId:null;/* ---------------------------------------------------------------------------------------------- */ /*                     Buscar en Servicio el ExclisionList de este proceso...                     */ /* ---------------------------------------------------------------------------------------------- */backendServices.queryListExclusion().then(function(data){setDataList(data.exclusionCatListDTOList);}).catch(function(error){console.error('api error: ',error);});//{ transactId: location.data.transactionId, processId: location.data.processId, activityId: location.data.activityId }\n/* ---------------------------------------------------------------------------------------------- */ /*                       Obtenemos los datos de la lista de exclusion record                      */ /* ---------------------------------------------------------------------------------------------- */if(processNumber!=null){backendServices.consultListExclusionChecked({transactId:processNumber}).then(function(data){var datos=data.getExclusionApplicationListDTOList;setDataListSelected(datos);}).catch(function(error){console.error('api error: ',error);});}}function startProcess(status,taskId){if(status===\"Ready\"){bpmServices.startedStatusTask(taskId).then(function(resp){if(resp===undefined){history.push(url.URL_DASHBOARD);}});}}function removeBodyCss(){document.body.classList.add(\"no_padding\");}function loadMainDebtor(InputData){backendServices.consultPrincipalDebtor(InputData.transactionId).then(function(resp){//resp.personType\n//resp.identificationType\n//resp.customerNumberT24\n//resp.firstName\n//resp.secondName\n//resp.firstLastName\n//resp.secondLastName\n//resp.customerDocumentId\n// dataReturn.nuevoDato = \"\"\nsetmainDebtor(resp);});}//Modal Opciones para avanzar\nfunction toggleModalAdvanceOptions(){setDisplayModalAdvanceOptions(!displayModalAdvanceOptions);}//Modal Opciones al Salir\nfunction toggleModalCloseOptions(){setDisplayModalCloseOptions(!displayModalCloseOptions);}function onSelectOption(e){if(document.getElementById(e.exclusionId).checked){setchecked(true);backendServices.saveListExclusion(locationData.transactionId,e.exclusionId).then(function(resp){if(resp===undefined){//Mensaje ERROR\nseterror_msg(t(\"ErrorSaveMessage\")+\" \"+t(\"ExclusionList\"));seterror_dlg(false);return;}});}else{setchecked(false);backendServices.removeCheckedExclusionList(locationData.transactionId,e.exclusionId).then(function(resp){if(resp===undefined){//Mensaje ERROR\nseterror_msg(t(\"ErrorSaveMessage\")+\" \"+t(\"ExclusionList\"));seterror_dlg(false);return;}});}}//Chequear si existen opciones seleccionadas en la lista\nfunction checkSelectedOptions(){/* ---------------------------------------------------------------------------------------------- */ /*              chequear si tiene seleccionada alguna opcion de la lista de exclusion             */ /*              mostrar mensaje para confirmacion y finalizar proceso                             */ /* ---------------------------------------------------------------------------------------------- */var checkboxes=document.getElementsByClassName(\"listaExclusion\");var check=0;for(var i=0;i<checkboxes.length;i++){if(checkboxes[i].checked){check++;}}if(check>0){setDisplayModalAdvanceOptions(true);}else{//Avanzamos el Proceso\nonSaveProcess(OPTs.PROCESS_INFORMEGESTION);}}//Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\nfunction onSaveProcess(option){switch(option){case OPTs.PROCESS_INFORMEGESTION:{//Guardamos la seleccion\nvar checkboxes=document.getElementsByClassName(\"listaExclusion\");for(var i=0;i<checkboxes.length;i++){if(checkboxes[i].checked){option=OPTs.PROCESS_CANCELPROCESS;}}break;}}saveJBPMProcess(option);}function saveJBPMProcess(_x){return _saveJBPMProcess.apply(this,arguments);}////////// PARTE ES LA FINAL DEL PROCESO ///////\n//Modal Para mostrar Comentario de Fin de Proceso\nfunction _saveJBPMProcess(){_saveJBPMProcess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(option){var _locationData$infoBpm,_locationData$infoBpm2,_locationData$infoBpm3,_locationData$infoBpm4;var maindebtor,infoBpmModel,values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 2:maindebtor=_context.sent;infoBpmModel=new InfoBpmModel((_locationData$infoBpm=(_locationData$infoBpm2=locationData.infoBpmModel)===null||_locationData$infoBpm2===void 0?void 0:_locationData$infoBpm2.instanceId)!==null&&_locationData$infoBpm!==void 0?_locationData$infoBpm:locationData.instanceId,(_locationData$infoBpm3=(_locationData$infoBpm4=locationData.infoBpmModel)===null||_locationData$infoBpm4===void 0?void 0:_locationData$infoBpm4.transactId)!==null&&_locationData$infoBpm3!==void 0?_locationData$infoBpm3:locationData.transactionId,0,0,maindebtor===null||maindebtor===void 0?void 0:maindebtor.personId);infoBpmModel.personName=maindebtor!==undefined?maindebtor.name+\" \"+maindebtor.name2+\" \"+maindebtor.lastName+\" \"+maindebtor.lastName2:\"\";_context.t0=option;_context.next=_context.t0===OPTs.PROCESS_CANCELPROCESS?8:_context.t0===OPTs.PROCESS_LISTAEXCLUSION?10:_context.t0===OPTs.PROCESS_INFORMEGESTION?15:20;break;case 8:bpmServices.abortProcess(infoBpmModel.instanceId).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);}else{//Mensaje ERROR\nseterror_msg(t(\"ErrorSaveMessage\"));seterror_dlg(false);}});return _context.abrupt(\"break\",20);case 10:infoBpmModel.processId=OPTs.PROCESS_LISTAEXCLUSION;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_LISTAEXCLUSION.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId.toString(),\"customerId\":locationData.customerId.toString(),\"applicationNumber\":\"\",\"procedureNumber\":\"\"//\"decision\":\"no\"          \n};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);}else{//Mensaje ERROR\nseterror_msg(t(\"ErrorSaveMessage\"));seterror_dlg(false);}});return _context.abrupt(\"break\",20);case 15:infoBpmModel.processId=OPTs.PROCESS_INFORMEGESTION;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_INFORMEGESTION.toString(),\"activityId\":OPTs.ACT_DATOSGENERALES.toString(),\"transactionId\":locationData.transactionId.toString(),\"customerId\":locationData.customerId.toString(),\"applicationNumber\":\"\",\"procedureNumber\":\"\"//\"decision\":\"no\"          \n};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){saveAutoLog(null);history.push({pathname:url.URL_MANAGEMENTREPORT,data:locationData});}else{//Mensaje ERROR\nseterror_msg(t(\"ErrorSaveMessage\"));seterror_dlg(false);}});return _context.abrupt(\"break\",20);case 20:case\"end\":return _context.stop();}}},_callee);}));return _saveJBPMProcess.apply(this,arguments);}function showModalEndProcess(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setdisplayModalEndProcess(show);}//salvar comentario de end process\nfunction onSaveEndProcess(values){//Salvar los comentarios en Bitacora    \nlocationData[\"endProcessComment\"]=values.txtComment;UpdateDataModel(locationData);onSaveProcess(OPTs.PROCESS_CANCELPROCESS);}//Actualizamos El Modelo de Datos segun va cambiando\nfunction UpdateDataModel(data){setLocationData(data);}function saveAutoLog(_x2){return _saveAutoLog.apply(this,arguments);}function _saveAutoLog(){_saveAutoLog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(APPLICATION_STATUS){var _mainDebtor$personId,_APPLICATION_STATUS$i,_APPLICATION_STATUS$n;var mainDebtor,log;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 2:mainDebtor=_context2.sent;log=new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_LISTAEXCLUSION,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_03);log.clientId=(_mainDebtor$personId=mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.personId)!==null&&_mainDebtor$personId!==void 0?_mainDebtor$personId:log.clientId;log.observations=t(\"NotCoincidenceInExclusionList\");log.requestId=(_APPLICATION_STATUS$i=APPLICATION_STATUS===null||APPLICATION_STATUS===void 0?void 0:APPLICATION_STATUS.id)!==null&&_APPLICATION_STATUS$i!==void 0?_APPLICATION_STATUS$i:0;log.statusDescription=(_APPLICATION_STATUS$n=APPLICATION_STATUS===null||APPLICATION_STATUS===void 0?void 0:APPLICATION_STATUS.name)!==null&&_APPLICATION_STATUS$n!==void 0?_APPLICATION_STATUS$n:\"\";saveLogProcess(log);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _saveAutoLog.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"CommercialCredit\"),breadcrumbItem:t(\"ExclusionList\")}),/*#__PURE__*/_jsx(HorizontalSteeper,{processNumber:1,activeStep:1}),/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:[!isReadOnly?/*#__PURE__*/_jsxs(Row,{style:{marginTop:\"0px\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsx(Col,{md:3,style:{textAlign:\"left\"},children:/*#__PURE__*/_jsxs(Button,{color:\"danger\",style:{margin:'5px 0px'},type:\"button\",onClick:function onClick(){showModalEndProcess();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"CancelProcess\")]})}),/*#__PURE__*/_jsxs(Col,{md:9,style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{marginRight:\"5px\"},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save-outline mid-12px\"}),\" \",t(\"Exit\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",style:{},onClick:function onClick(){checkSelectedOptions();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"Advance\")]})]})]}):/*#__PURE__*/_jsx(Row,{style:{marginBottom:\"15px\"}}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"ExclusionList\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"Selectifyoumeetanyofthefollowingpoints\")})]}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title title-header\",children:[mainDebtor!=null?mainDebtor.typePerson===\"1\"?mainDebtor.name+\" \"+mainDebtor.name2+\" \"+mainDebtor.lastName+\" \"+mainDebtor.lastName2:mainDebtor.name:\"\",\" \"]})}),/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",style:{textAlign:\"right\"},children:[t(\"Tramit\"),\":\",\" \",\"#\",locationData===null||locationData===void 0?void 0:locationData.transactionId]})})]})})]})}),/*#__PURE__*/_jsx(CardBody,{children:dataList.length>0&&/*#__PURE__*/_jsx(FormResult,{results:dataList,dataCheck:dataListSelected,setDataListSelected:setDataListSelected,onSelectOption:onSelectOption})}),/*#__PURE__*/_jsx(CardFooter,{})]}),locationData!==undefined&&locationData.customerId!==null&&locationData.customerId!==undefined&&locationData.customerId.length>0?/*#__PURE__*/_jsx(LogProcess,{locationData:locationData}):null]}),locationData?/*#__PURE__*/_jsx(LogProcess,{logProcessModel:new LogProcessModel(locationData.instanceId,locationData.transactionId,0,\"\",\"\",OPTs.PROCESS_LISTAEXCLUSION,OPTs.ACT_NONE,OPTs.BPM_ACTIVITY_03)}):null,!isReadOnly?/*#__PURE__*/_jsxs(Row,{style:{marginTop:\"0px\",marginBottom:\"15px\"},children:[/*#__PURE__*/_jsx(Col,{md:3,style:{textAlign:\"left\"},children:/*#__PURE__*/_jsxs(Button,{color:\"danger\",style:{margin:'5px 0px'},type:\"button\",onClick:function onClick(){showModalEndProcess();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"CancelProcess\")]})}),/*#__PURE__*/_jsxs(Col,{md:9,style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",type:\"button\",style:{marginRight:\"5px\"},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save-outline mid-12px\"}),\" \",t(\"Exit\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",style:{},onClick:function onClick(){checkSelectedOptions();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"Advance\")]})]})]}):null,/*#__PURE__*/_jsx(ModalCloseOptions,{onSaveProcess:onSaveProcess,isOpen:displayModalCloseOptions,toggle:function toggle(){toggleModalCloseOptions();}}),/*#__PURE__*/_jsx(ModalAdvanceOptions,{onSaveProcess:onSaveProcess,isOpen:displayModalAdvanceOptions,toggle:function toggle(){toggleModalAdvanceOptions();}}),/*#__PURE__*/_jsx(ModalEndProcess,{onSaveEndProcess:onSaveEndProcess,isOpen:displayModalEndProcess,toggle:function toggle(){showModalEndProcess(false);}}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);history.push(url.URL_DASHBOARD);},children:t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){seterror_dlg(false);},children:error_msg}):null]})});};export default withTranslation()(ListaExclusion);","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/18_ListaExclusion/index.js"],"names":["React","useState","useLocation","useHistory","LoadingOverlay","ModalEndProcess","OPTs","url","Row","Col","Card","CardBody","Label","CardFooter","CardHeader","Button","AvForm","AvField","Link","Breadcrumbs","withTranslation","FormResult","ModalAdvanceOptions","ModalCloseOptions","BackendServices","CoreServices","BpmServices","SweetAlert","useTranslation","InfoBpmModel","LogProcessModel","LogProcess","saveLogProcess","HorizontalSteeper","ListaExclusion","props","isReadOnly","setReadOnly","history","location","undefined","locationData","setLocationData","t","i18n","dataList","setDataList","dataListSelected","setDataListSelected","isActiveLoading","setIsActiveLoading","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","displayModalAdvanceOptions","setDisplayModalAdvanceOptions","displayModalCloseOptions","setDisplayModalCloseOptions","displayModalEndProcess","setdisplayModalEndProcess","mainDebtor","setmainDebtor","backendServices","setbackendServices","bpmServices","setbpmServices","checked","setchecked","useEffect","data","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","fetchData","result","getItem","parse","lista","document","getElementsByClassName","i","j","exclusionCatListId","exclusionId","getElementById","console","log","readOnly","taskStatus","checkAndStartTask","then","iniresult","loadMainDebtor","initializeData","locdata","processNumber","queryListExclusion","exclusionCatListDTOList","catch","error","consultListExclusionChecked","transactId","datos","getExclusionApplicationListDTOList","startProcess","status","taskId","startedStatusTask","resp","removeBodyCss","body","classList","add","InputData","consultPrincipalDebtor","toggleModalAdvanceOptions","toggleModalCloseOptions","onSelectOption","e","saveListExclusion","removeCheckedExclusionList","checkSelectedOptions","checkboxes","check","onSaveProcess","PROCESS_INFORMEGESTION","option","PROCESS_CANCELPROCESS","saveJBPMProcess","maindebtor","infoBpmModel","instanceId","personId","personName","name","name2","lastName","lastName2","PROCESS_LISTAEXCLUSION","abortProcess","processId","activityId","ACT_NONE","values","toString","customerId","updatevariables","ACT_DATOSGENERALES","saveAutoLog","pathname","URL_MANAGEMENTREPORT","showModalEndProcess","show","onSaveEndProcess","txtComment","UpdateDataModel","APPLICATION_STATUS","BPM_ACTIVITY_03","clientId","observations","requestId","id","statusDescription","marginTop","marginBottom","textAlign","margin","marginRight","typePerson"],"mappings":"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","sourcesContent":["/*ExclusionList = Lista de Exclusion*/\r\nimport React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport ModalEndProcess from \"../../../components/EndProcess/ModalEndProcess\"\r\nimport * as OPTs from \"../../../helpers/options_helper\"\r\nimport * as url from \"../../../helpers/url_helper\"\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Label,\r\n  CardFooter,\r\n  CardHeader,\r\n  Button\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport { Link } from \"react-router-dom\"\r\n//Import Breadcrumb\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\n\r\n//i18n\r\nimport { withTranslation } from \"react-i18next\"\r\n\r\nimport FormResult from \"./FormResultados\"\r\nimport ModalAdvanceOptions from \"./ModalAdvanceOptions\"\r\nimport ModalCloseOptions from \"./ModalCloseOptions\"\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { InfoBpmModel } from '../../../models/Common/InfoBpmModel';\r\n\r\nimport { LogProcessModel } from '../../../models/Common/LogProcessModel';\r\nimport LogProcess from \"../../../components/LogProcess/index\";\r\n\r\nimport { saveLogProcess } from \"../../../helpers/logs_helper\";\r\n\r\nimport HorizontalSteeper from \"../../../components/Common/HorizontalSteeper\";\r\n\r\nconst ListaExclusion = props => {\r\n\r\n  const [isReadOnly, setReadOnly] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const location = useLocation()\r\n  //Data que recibimos en el location\r\n  const [locationData, setLocationData] = useState(undefined);\r\n\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const [dataList, setDataList] = useState([]); //items de la lista de exclusion\r\n  const [dataListSelected, setDataListSelected] = useState([]); //items selected de la lista de exclusion       \r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [displayModalAdvanceOptions, setDisplayModalAdvanceOptions] = useState(false);\r\n  const [displayModalCloseOptions, setDisplayModalCloseOptions] = useState(false);\r\n  const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n\r\n  const [checked, setchecked] = useState(false);\r\n  //On Mounting (componentDid Mount)\r\n  React.useEffect(() => {\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        fetchData(location.data);\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        fetchData(result);\r\n      }\r\n    }\r\n  }, []);\r\n  React.useEffect(() => {\r\n    let lista = document.getElementsByClassName(\"listaExclusion\");\r\n    for (var i = 0; i < lista.length; i++) {\r\n      for (let j = 0; j < dataListSelected.length; j++) {\r\n        if (dataListSelected[j].exclusionCatListId == dataList[i].exclusionId) {\r\n          document.getElementById(dataList[i].exclusionId).checked = true;\r\n          setchecked(true);\r\n        }\r\n      }\r\n    }\r\n  }, [props, dataListSelected]);\r\n\r\n  //Caraga Inicial de datos\r\n  function fetchData(locationData) {\r\n    console.log(locationData);\r\n    if (locationData.readOnly != null) {\r\n      setReadOnly(locationData.readOnly);\r\n      if (locationData.readOnly && locationData.taskStatus == \"Reservado\") {\r\n        bpmServices.checkAndStartTask(locationData)\r\n          .then((iniresult) => {\r\n            if (iniresult === false) {\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      setReadOnly(false);\r\n    }\r\n\r\n    loadMainDebtor(locationData);\r\n    setLocationData(locationData);\r\n    initializeData(locationData);\r\n  }\r\n\r\n  //Caraga Inicial\r\n  function initializeData(locdata) {\r\n    var processNumber = locdata ? locdata.transactionId : null;\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                     Buscar en Servicio el ExclisionList de este proceso...                     */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    backendServices.queryListExclusion().then((data) => {\r\n      setDataList(data.exclusionCatListDTOList);\r\n    }).catch((error) => {\r\n      console.error('api error: ', error);\r\n    });\r\n    //{ transactId: location.data.transactionId, processId: location.data.processId, activityId: location.data.activityId }\r\n\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*                       Obtenemos los datos de la lista de exclusion record                      */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    if (processNumber != null) {\r\n      backendServices.consultListExclusionChecked({ transactId: processNumber }).then((data) => {\r\n        let datos = data.getExclusionApplicationListDTOList;\r\n        setDataListSelected(datos);\r\n\r\n      }).catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    }\r\n  }\r\n  function startProcess(status, taskId) {\r\n    if (status === \"Ready\") {\r\n      bpmServices.startedStatusTask(taskId).then(resp => {\r\n        if (resp === undefined) {\r\n          history.push(url.URL_DASHBOARD);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  function removeBodyCss() {\r\n    document.body.classList.add(\"no_padding\")\r\n  }\r\n  function loadMainDebtor(InputData) {\r\n    backendServices.consultPrincipalDebtor(InputData.transactionId).then(resp => {\r\n      //resp.personType\r\n      //resp.identificationType\r\n      //resp.customerNumberT24\r\n      //resp.firstName\r\n      //resp.secondName\r\n      //resp.firstLastName\r\n      //resp.secondLastName\r\n      //resp.customerDocumentId\r\n      // dataReturn.nuevoDato = \"\"\r\n      setmainDebtor(resp)\r\n    })\r\n  }\r\n\r\n  //Modal Opciones para avanzar\r\n  function toggleModalAdvanceOptions() {\r\n    setDisplayModalAdvanceOptions(!displayModalAdvanceOptions);\r\n  }\r\n  //Modal Opciones al Salir\r\n  function toggleModalCloseOptions() {\r\n    setDisplayModalCloseOptions(!displayModalCloseOptions);\r\n  }\r\n\r\n  function onSelectOption(e) {\r\n    if (document.getElementById(e.exclusionId).checked) {\r\n      setchecked(true);\r\n      backendServices.saveListExclusion(locationData.transactionId, e.exclusionId).then(resp => {\r\n        if (resp === undefined) {\r\n          //Mensaje ERROR\r\n          seterror_msg(t(\"ErrorSaveMessage\") + \" \" + t(\"ExclusionList\"))\r\n          seterror_dlg(false)\r\n          return;\r\n        }\r\n      });\r\n    } else {\r\n      setchecked(false);\r\n      backendServices.removeCheckedExclusionList(locationData.transactionId, e.exclusionId).then(resp => {\r\n        if (resp === undefined) {\r\n          //Mensaje ERROR\r\n          seterror_msg(t(\"ErrorSaveMessage\") + \" \" + t(\"ExclusionList\"))\r\n          seterror_dlg(false)\r\n          return;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  //Chequear si existen opciones seleccionadas en la lista\r\n  function checkSelectedOptions() {\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    /*              chequear si tiene seleccionada alguna opcion de la lista de exclusion             */\r\n    /*              mostrar mensaje para confirmacion y finalizar proceso                             */\r\n    /* ---------------------------------------------------------------------------------------------- */\r\n    var checkboxes = document.getElementsByClassName(\"listaExclusion\");\r\n    let check = 0;\r\n    for (var i = 0; i < checkboxes.length; i++) {\r\n      if (checkboxes[i].checked) {\r\n        check++;\r\n      }\r\n    }\r\n\r\n    if (check > 0) {\r\n      setDisplayModalAdvanceOptions(true);\r\n    } else {\r\n      //Avanzamos el Proceso\r\n      onSaveProcess(OPTs.PROCESS_INFORMEGESTION);\r\n    }\r\n  }\r\n\r\n  //Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\r\n  function onSaveProcess(option) {\r\n\r\n    switch (option) {\r\n      case OPTs.PROCESS_INFORMEGESTION: {\r\n        //Guardamos la seleccion\r\n        var checkboxes = document.getElementsByClassName(\"listaExclusion\");\r\n        for (var i = 0; i < checkboxes.length; i++) {\r\n          if (checkboxes[i].checked) {\r\n            option = OPTs.PROCESS_CANCELPROCESS;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n\r\n\r\n    saveJBPMProcess(option);\r\n\r\n  }\r\n\r\n  async function saveJBPMProcess(option) {\r\n\r\n    var maindebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n\r\n    var infoBpmModel = new InfoBpmModel(\r\n      locationData.infoBpmModel?.instanceId ?? locationData.instanceId,\r\n      locationData.infoBpmModel?.transactId ?? locationData.transactionId,\r\n      0, 0,\r\n      maindebtor?.personId\r\n    );\r\n    infoBpmModel.personName = maindebtor !== undefined ? (maindebtor.name + \" \" + maindebtor.name2 + \" \" + maindebtor.lastName + \" \" + maindebtor.lastName2) : \"\";\r\n\r\n    switch (option) {\r\n      case OPTs.PROCESS_CANCELPROCESS: {\r\n        bpmServices.abortProcess(infoBpmModel.instanceId)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              seterror_msg(t(\"ErrorSaveMessage\"))\r\n              seterror_dlg(false)\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_LISTAEXCLUSION: {\r\n        infoBpmModel.processId = OPTs.PROCESS_LISTAEXCLUSION;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_LISTAEXCLUSION.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId.toString(),\r\n          \"customerId\": locationData.customerId.toString(),\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          //\"decision\":\"no\"          \r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              seterror_msg(t(\"ErrorSaveMessage\"))\r\n              seterror_dlg(false)\r\n            }\r\n          });\r\n\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_INFORMEGESTION: {\r\n        infoBpmModel.processId = OPTs.PROCESS_INFORMEGESTION;\r\n        infoBpmModel.activityId = OPTs.ACT_NONE;\r\n\r\n        var values = {\r\n          \"info\": JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_INFORMEGESTION.toString(),\r\n          \"activityId\": OPTs.ACT_DATOSGENERALES.toString(),\r\n          \"transactionId\": locationData.transactionId.toString(),\r\n          \"customerId\": locationData.customerId.toString(),\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          //\"decision\":\"no\"          \r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              saveAutoLog(null)\r\n              history.push({\r\n                pathname: url.URL_MANAGEMENTREPORT,\r\n                data: locationData,\r\n              });\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              seterror_msg(t(\"ErrorSaveMessage\"))\r\n              seterror_dlg(false)\r\n            }\r\n          });\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  ////////// PARTE ES LA FINAL DEL PROCESO ///////\r\n  //Modal Para mostrar Comentario de Fin de Proceso\r\n  function showModalEndProcess(show = true) {\r\n    setdisplayModalEndProcess(show);\r\n  }\r\n\r\n  //salvar comentario de end process\r\n  function onSaveEndProcess(values) {\r\n\r\n    //Salvar los comentarios en Bitacora    \r\n    locationData[\"endProcessComment\"] = values.txtComment;\r\n\r\n    UpdateDataModel(locationData);\r\n\r\n    onSaveProcess(OPTs.PROCESS_CANCELPROCESS);\r\n  }\r\n\r\n  //Actualizamos El Modelo de Datos segun va cambiando\r\n  function UpdateDataModel(data) {\r\n    setLocationData(data);\r\n  }\r\n\r\n  async function saveAutoLog(APPLICATION_STATUS) {\r\n    var mainDebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId);\r\n    var log = new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_LISTAEXCLUSION, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_03)\r\n    log.clientId = mainDebtor?.personId ?? log.clientId;\r\n    log.observations = t(\"NotCoincidenceInExclusionList\");\r\n    log.requestId = APPLICATION_STATUS?.id ?? 0;\r\n    log.statusDescription = APPLICATION_STATUS?.name ?? \"\";\r\n    saveLogProcess(log);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"page-content\">\r\n        <Breadcrumbs title={t(\"CommercialCredit\")} breadcrumbItem={t(\"ExclusionList\")} />\r\n\r\n        <HorizontalSteeper processNumber={1} activeStep={1}></HorizontalSteeper>\r\n\r\n        <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n          {!isReadOnly ?\r\n            <Row style={{ marginTop: \"0px\", marginBottom: \"15px\" }}>\r\n              <Col md={3} style={{ textAlign: \"left\" }}>\r\n                <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { showModalEndProcess() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n              </Col>\r\n              <Col md={9} style={{ textAlign: \"right\" }}>\r\n                <Button color=\"primary\" type=\"button\" style={{ marginRight: \"5px\" }} onClick={() => { onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n                <Button color=\"success\" type=\"button\" style={{}}\r\n                  onClick={() => { checkSelectedOptions(); }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"Advance\")}</Button>\r\n              </Col>\r\n            </Row> : <Row style={{ marginBottom: \"15px\" }} />\r\n          }\r\n\r\n\r\n          <Card>\r\n            <CardHeader>\r\n              <Row>\r\n                <Col md={6}>\r\n                  <h4 className=\"card-title\">{t(\"ExclusionList\")}</h4>\r\n                  <p className=\"card-title-desc\">{t(\"Selectifyoumeetanyofthefollowingpoints\")}</p>\r\n                </Col>\r\n                <Col md={6}>\r\n                  <Row>\r\n                    <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                      <h5 className=\"card-title title-header\">{mainDebtor != null ? (mainDebtor.typePerson === \"1\" ? (mainDebtor.name + \" \" + mainDebtor.name2 + \" \" + mainDebtor.lastName + \" \" + mainDebtor.lastName2) : (mainDebtor.name)) : \"\"} </h5>\r\n                    </Col>\r\n                    <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                      <h5 className=\"card-title\" style={{ textAlign: \"right\" }}>{t(\"Tramit\")}:{\" \"}#{locationData?.transactionId}</h5>\r\n                    </Col>\r\n                  </Row>\r\n                </Col>\r\n              </Row>\r\n            </CardHeader>\r\n            <CardBody>\r\n              {dataList.length > 0 && (\r\n                <FormResult results={dataList} dataCheck={dataListSelected} setDataListSelected={setDataListSelected} onSelectOption={onSelectOption} />\r\n              )}\r\n            </CardBody>\r\n            <CardFooter>\r\n              {/*\r\n              <Row>\r\n                <Col md={3} style={{ textAlign: \"left\"}}>\r\n                  <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { showModalEndProcess() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n                </Col>\r\n                <Col md={9} style={{ textAlign: \"right\"}}>\r\n                  <Button color=\"primary\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n                  <Button color=\"success\" type=\"button\"\r\n                    onClick={() => { checkSelectedOptions(); }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"ManagementReport\")}</Button>\r\n                </Col>\r\n              </Row>\r\n              */}\r\n            </CardFooter>\r\n          </Card>\r\n\r\n          {(locationData !== undefined && locationData.customerId !== null && locationData.customerId !== undefined && locationData.customerId.length > 0) ? (<LogProcess locationData={locationData} />) : null}\r\n\r\n        </LoadingOverlay>\r\n\r\n        {locationData ?\r\n          <LogProcess logProcessModel={new LogProcessModel(locationData.instanceId, locationData.transactionId, 0, \"\", \"\", OPTs.PROCESS_LISTAEXCLUSION, OPTs.ACT_NONE, OPTs.BPM_ACTIVITY_03)} />\r\n          : null}\r\n\r\n        {!isReadOnly ?\r\n          <Row style={{ marginTop: \"0px\", marginBottom: \"15px\" }}>\r\n            <Col md={3} style={{ textAlign: \"left\" }}>\r\n              <Button color=\"danger\" style={{ margin: '5px 0px' }} type=\"button\" onClick={() => { showModalEndProcess() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"CancelProcess\")}</Button>\r\n            </Col>\r\n            <Col md={9} style={{ textAlign: \"right\" }}>\r\n              <Button color=\"primary\" type=\"button\" style={{ marginRight: \"5px\" }} onClick={() => { onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION) }}><i className=\"mdi mdi-content-save-outline mid-12px\"></i> {t(\"Exit\")}</Button>\r\n              <Button color=\"success\" type=\"button\" style={{}}\r\n                onClick={() => { checkSelectedOptions(); }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"Advance\")}</Button>\r\n            </Col>\r\n          </Row> : null\r\n        }\r\n\r\n\r\n\r\n\r\n        <ModalCloseOptions onSaveProcess={onSaveProcess} isOpen={displayModalCloseOptions} toggle={() => { toggleModalCloseOptions() }} />\r\n        <ModalAdvanceOptions onSaveProcess={onSaveProcess} isOpen={displayModalAdvanceOptions} toggle={() => { toggleModalAdvanceOptions() }} />\r\n        <ModalEndProcess onSaveEndProcess={onSaveEndProcess} isOpen={displayModalEndProcess} toggle={() => { showModalEndProcess(false) }} />\r\n\r\n        {successSave_dlg ? (\r\n          <SweetAlert\r\n            success\r\n            title={t(\"SuccessDialog\")}\r\n            confirmButtonText={t(\"Confirm\")}\r\n            cancelButtonText={t(\"Cancel\")}\r\n            onConfirm={() => {\r\n              setsuccessSave_dlg(false)\r\n\r\n              history.push(url.URL_DASHBOARD);\r\n            }}\r\n          >\r\n            {t(\"SuccessSaveMessage\")}\r\n          </SweetAlert>\r\n        ) : null}\r\n\r\n        {error_dlg ? (\r\n          <SweetAlert\r\n            error\r\n            title={t(\"ErrorDialog\")}\r\n            confirmButtonText={t(\"Confirm\")}\r\n            cancelButtonText={t(\"Cancel\")}\r\n            onConfirm={() => {\r\n              seterror_dlg(false)\r\n            }}\r\n          >\r\n            {error_msg}\r\n          </SweetAlert>\r\n        ) : null}\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default (withTranslation()(ListaExclusion))\r\n"]},"metadata":{},"sourceType":"module"}