{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{translationHelper}from'../../../../helpers';import{AvForm,AvGroup,AvField,AvFeedback}from\"availity-reactstrap-validation\";import{Table,Card,CardBody,Row,Col,Label}from\"reactstrap\";import{useTranslation}from\"react-i18next\";import{BackendServices,CoreServices}from\"../../../../services\";import Currency from\"../../../../helpers/currency\";import{useHistory,useLocation}from'react-router-dom';import*as url from\"../../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangeSummary=/*#__PURE__*/React.forwardRef(function(props,ref){var _dataReturn$rate;React.useImperativeHandle(ref,function(){return{validateForm:function validateForm(){var form=document.getElementById('frmResumenCambios');form.requestSubmit();},getFormValidation:function getFormValidation(){return formValid;},dataReturn:dataReturn};});var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),dataReturn=_useState2[0],setdataReturn=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formValid=_useState4[0],setformValid=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),requestId=_useState6[0],setRequestId=_useState6[1];var currencyData=new Currency();var apiBack=new BackendServices();var location=useLocation();var history=useHistory();var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),locationData=_useState8[0],setLocationData=_useState8[1];useEffect(function(){var _dataSession$transact,_dataSession;var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}apiBack.consultGeneralDataPropCred((_dataSession$transact=(_dataSession=dataSession)===null||_dataSession===void 0?void 0:_dataSession.transactionId)!==null&&_dataSession$transact!==void 0?_dataSession$transact:0).then(function(resp){var _resp$;var requestId=resp.length===0?props.dataGlobal.requestId:(_resp$=resp[0])===null||_resp$===void 0?void 0:_resp$.requestId;initializeData(requestId);setRequestId(requestId);}).catch(function(err){console.log(err);});},[props.activeTab]);function initializeData(requestId){// consultarResumenCambios\napiBack.consultarResumenCambios(requestId).then(function(resp){setdataReturn(resp);});}function handleSubmit(event,errors,values){event.preventDefault();if(errors.length>0){setformValid(false);return;}values.increase=values.increase!=null||values!=\"\"||values.increase?values.increase:\" \";values.rate=values.rate!=null||values!=\"\"||values.rate?values.rate:\" \";values.guarantee=values.guarantee!=null||values!=\"\"||values.guarantee?values.guarantee:\" \";values.desbtorsGuarantors=values.desbtorsGuarantors!=null||values!=\"\"||values.desbtorsGuarantors?values.desbtorsGuarantors:\" \";values.terms=values.terms!=null||values!=\"\"||values.terms?values.terms:\" \";values.fees=values.fees!=null||values!=\"\"||values.fees?values.fees:\" \";values.covenats=values.covenats!=null||values!=\"\"||values.covenats?values.covenats:\" \";values.others=values.others!=null||values!=\"\"||values.others?values.others:\" \";values.requestId=requestId;values.status=true;setdataReturn(values);setformValid(true);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(AvForm,{id:\"frmResumenCambios\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h5\",{children:props.title}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"increase\",children:t(\"Increase / Decrease (Exposure)\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"increase\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.increase:\" \",id:\"increase\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Rate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"rate\",type:\"text\",id:\"rate\",value:(_dataReturn$rate=dataReturn===null||dataReturn===void 0?void 0:dataReturn.rate)!==null&&_dataReturn$rate!==void 0?_dataReturn$rate:' '})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Guarantee\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"guarantee\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.guarantee:\" \",id:\"guarantee\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Guarantors / Co-signers\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"desbtorsGuarantors\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.desbtorsGuarantors:\" \",id:\"desbtorsGuarantors\"})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Deadlines\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"terms\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.terms:\" \",id:\"terms\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Dues\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"fees\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.fees:\" \",id:\"fees\"})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Covenats\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"covenats\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.covenats:\" \",id:\"covenats\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"6\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"Other conditions\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"others\",type:\"text\",value:dataReturn!=null?dataReturn===null||dataReturn===void 0?void 0:dataReturn.others:\" \",id:\"others\"})]})]})]})})]})});});export default ChangeSummary;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/ResumenCambios.js"],"names":["React","useState","useEffect","translationHelper","AvForm","AvGroup","AvField","AvFeedback","Table","Card","CardBody","Row","Col","Label","useTranslation","BackendServices","CoreServices","Currency","useHistory","useLocation","url","ChangeSummary","forwardRef","props","ref","useImperativeHandle","validateForm","form","document","getElementById","requestSubmit","getFormValidation","formValid","dataReturn","t","i18n","setdataReturn","setformValid","requestId","setRequestId","currencyData","apiBack","location","history","locationData","setLocationData","dataSession","data","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","consultGeneralDataPropCred","then","resp","dataGlobal","initializeData","catch","err","console","log","activeTab","consultarResumenCambios","handleSubmit","event","errors","values","preventDefault","increase","rate","guarantee","desbtorsGuarantors","terms","fees","covenats","others","status","title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelper } from '../../../../helpers';\r\nimport { AvForm, AvGroup, AvField, AvFeedback } from \"availity-reactstrap-validation\"\r\nimport {\r\n    Table,\r\n    Card,\r\n    CardBody,\r\n    Row,\r\n    Col,\r\n    Label,\r\n} from \"reactstrap\"\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\nimport Currency from \"../../../../helpers/currency\";\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport * as url from \"../../../../helpers/url_helper\"\r\n\r\nconst ChangeSummary = React.forwardRef((props, ref) => {\r\n    React.useImperativeHandle(ref, () => ({\r\n        validateForm: () => {\r\n            const form = document.getElementById('frmResumenCambios');\r\n            form.requestSubmit();\r\n        },\r\n        getFormValidation: () => {\r\n            return formValid;\r\n        }, dataReturn\r\n    }));\r\n    const { t, i18n } = useTranslation();\r\n    const [dataReturn, setdataReturn] = useState(null);\r\n    const [formValid, setformValid] = useState(false);\r\n    const [requestId, setRequestId] = useState(null);\r\n\r\n    const currencyData = new Currency();\r\n\r\n    const apiBack = new BackendServices();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const [locationData, setLocationData] = useState(null);\r\n\r\n    useEffect(() => {\r\n        let dataSession;\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                dataSession = location.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                dataSession = result\r\n            }\r\n        }\r\n\r\n        apiBack.consultGeneralDataPropCred(dataSession?.transactionId ?? 0).then(resp => {\r\n            let requestId = resp.length === 0 ? props.dataGlobal.requestId : resp[0]?.requestId;\r\n            initializeData(requestId)\r\n            setRequestId(requestId)\r\n        }).catch(err => { console.log(err) })\r\n\r\n    }, [props.activeTab]);\r\n    function initializeData(requestId) {\r\n        // consultarResumenCambios\r\n        apiBack.consultarResumenCambios(requestId).then((resp) => {\r\n            setdataReturn(resp)\r\n        });\r\n    }\r\n    function handleSubmit(event, errors, values) {\r\n        event.preventDefault();\r\n        if (errors.length > 0) {\r\n            setformValid(false);\r\n            return;\r\n        }\r\n        values.increase = values.increase != null || values != \"\" || values.increase ? values.increase : \" \";\r\n        values.rate = values.rate != null || values != \"\" || values.rate ? values.rate : \" \";\r\n        values.guarantee = values.guarantee != null || values != \"\" || values.guarantee ? values.guarantee : \" \";\r\n        values.desbtorsGuarantors = values.desbtorsGuarantors != null || values != \"\" || values.desbtorsGuarantors ? values.desbtorsGuarantors : \" \";\r\n        values.terms = values.terms != null || values != \"\" || values.terms ? values.terms : \" \";\r\n        values.fees = values.fees != null || values != \"\" || values.fees ? values.fees : \" \";\r\n        values.covenats = values.covenats != null || values != \"\" || values.covenats ? values.covenats : \" \";\r\n        values.others = values.others != null || values != \"\" || values.others ? values.others : \" \";\r\n        values.requestId = requestId;\r\n        values.status = true;\r\n        setdataReturn(values);\r\n        setformValid(true);\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <AvForm id=\"frmResumenCambios\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n                <h5>{props.title}</h5>\r\n                <Card>\r\n                    <CardBody>\r\n                        <Row>\r\n                            <Col md=\"6\">\r\n                                <Label htmlFor=\"increase\">{t(\"Increase / Decrease (Exposure)\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"increase\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.increase : \" \"}\r\n                                    id=\"increase\"\r\n                                />\r\n                            </Col>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Rate\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"rate\"\r\n                                    type=\"text\"\r\n                                    id=\"rate\"\r\n                                    value={dataReturn?.rate ?? ' '} />\r\n\r\n\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Guarantee\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"guarantee\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.guarantee : \" \"}\r\n                                    id=\"guarantee\"\r\n                                />\r\n                            </Col>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Guarantors / Co-signers\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"desbtorsGuarantors\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.desbtorsGuarantors : \" \"}\r\n                                    id=\"desbtorsGuarantors\"\r\n                                />\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Deadlines\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"terms\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.terms : \" \"}\r\n                                    id=\"terms\"\r\n                                />\r\n                            </Col>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Dues\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"fees\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.fees : \" \"}\r\n                                    id=\"fees\"\r\n                                />\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Covenats\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"covenats\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.covenats : \" \"}\r\n                                    id=\"covenats\"\r\n                                />\r\n                            </Col>\r\n                            <Col md=\"6\">\r\n                                <Label>{t(\"Other conditions\")}</Label>\r\n                                <AvField\r\n                                    className=\"form-control\"\r\n                                    name=\"others\"\r\n                                    type=\"text\"\r\n                                    value={dataReturn != null ? dataReturn?.others : \" \"}\r\n                                    id=\"others\"\r\n                                />\r\n                            </Col>\r\n                        </Row>\r\n                    </CardBody>\r\n                </Card>\r\n            </AvForm>\r\n        </React.Fragment>\r\n    );\r\n});\r\nexport default ChangeSummary;\r\n"]},"metadata":{},"sourceType":"module"}