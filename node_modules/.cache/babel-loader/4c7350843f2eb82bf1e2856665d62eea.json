{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useLocation,useHistory}from'react-router-dom';import*as OPTs from\"../../../helpers/options_helper\";import*as url from\"../../../helpers/url_helper\";import{Row,Col,Card,CardBody,Label,CardFooter,Button,Table,CardHeader}from\"reactstrap\";import Alert from'react-bootstrap/Alert';import{Link}from\"react-router-dom\";import Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{setDefaults,useTranslation}from\"react-i18next\";import LoadingOverlay from'react-loading-overlay';import ClientForm from\"./ClientForm\";import ModalEndProcess from\"../../../components/EndProcess/ModalEndProcess\";import{BackendServices,CoreServices,BpmServices}from\"../../../services\";import{PersonModel}from'../../../models/Common/PersonModel';import{InfoBpmModel}from'../../../models/Common/InfoBpmModel';import SearchClientCore from\"../../../components/Common/SearchClientCore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PreRequest=function PreRequest(props){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var history=useHistory();var location=useLocation();var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isActiveLoading=_useState4[0],setIsActiveLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openNewClient=_useState6[0],setopenNewClient=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),dataClientList=_useState8[0],setdataClientList=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),selectedClient=_useState10[0],setselectedClient=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),identificationTypeList=_useState12[0],setidentificationTypeList=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),personTypeList=_useState14[0],setpersonTypeList=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),displayModalEndProcess=_useState16[0],setdisplayModalEndProcess=_useState16[1];var _useState17=useState({show:false,msg:\"\",isError:false}),_useState18=_slicedToArray(_useState17,2),msgData=_useState18[0],setmsgData=_useState18[1];//Servicios\nvar _useState19=useState(new BackendServices()),_useState20=_slicedToArray(_useState19,2),backendServices=_useState20[0],setbackendServices=_useState20[1];var _useState21=useState(new BpmServices()),_useState22=_slicedToArray(_useState21,2),bpmServices=_useState22[0],setbpmServices=_useState22[1];//On Mounting (componentDidMount)\nReact.useEffect(function(){if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){location.data.transactionId=0;checkAndCreateProcedure(location.data);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);fetchData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);fetchData(result);}}},[]);//Caraga Inicial de datos\nfunction fetchData(locationData){//chequear si la tarea no ha sido iniciada\nbpmServices.checkAndStartTask(locationData).then(function(iniresult){if(iniresult===false){history.push(url.URL_DASHBOARD);}});//checkAndCreateProcedure(locationData);\nloadIdentificationTypes();loadPersonTypes();getProcessClients(locationData.transactionId);}//CHEQUEAMOS Y GENERAMOS EL PROCESO EN BASE DE DATOS\nfunction checkAndCreateProcedure(locationData){backendServices.nuevoTramite(locationData.transactionId,locationData.instanceId,OPTs.PROCESS_BUSQUEDADESCARTE,OPTs.PROCESS_BUSQUEDADESCARTE,\"admin\",\"0\").then(function(data){if(data!==null&&data!==undefined){locationData.transactionId=data.transactId;sessionStorage.setItem('locationData',JSON.stringify(locationData));setLocationData(locationData);fetchData(locationData);//Actualizamos Variables\nvar values={\"transactionId\":locationData.transactionId};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){}});}}).catch(function(error){});}//cargar lista de tipo de identificacion\nfunction loadIdentificationTypes(){backendServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"description\"]),value:data[i][\"id\"]});}setidentificationTypeList(json);}}).catch(function(error){});}//cargar lista de tipo de personas\nfunction loadPersonTypes(){backendServices.consultarCatalogoTipoPersona().then(function(data){if(data!==null&&data!==undefined){var json=[];for(var i=0;i<data.length;i++){json.push({label:t(data[i][\"label\"]),value:data[i][\"code\"]});}setpersonTypeList(json);}}).catch(function(error){});}//se buscan todos los clientes de este proceso \nfunction getProcessClients(transactionId){backendServices.consultarOrquestadoListaPersonaSolicitud(transactionId).then(function(data){if(data!==null&&data!==undefined){setdataClientList(data);/*if (data.length <= 0) {\r\n            setselectedClient(new PersonModel());\r\n            onOpenNewClient();\r\n          }*/}}).catch(function(error){});}//Abrir formulario Persona\nfunction onOpenNewClient(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setopenNewClient(show);}//Editar Persona\nfunction onEditClient(dataClient){setselectedClient(dataClient);onOpenNewClient();}//Eliminar Persona\nfunction onDeleteClient(dataClient){//eliminarOrquestadoListaPersonaSolicitud\nbackendServices.eliminarOrquestadoListaPersonaSolicitud(dataClient).then(function(data){getProcessClients(dataClient.transactId);}).catch(function(error){});}//retorna el Tipo de Persona\nfunction getPersnoType(pType){return personTypeList.find(function(x){return x.value===pType;});}//retorna el Tipo de identificacion\nfunction getIdentificationType(idType){console.log(\"getIdentificationType\");if(idType!==undefined&&idType!==null&&idType.length>0){return identificationTypeList.find(function(x){return x.value===idType;});}return\"\";}//Carga de Datos de Cliente de T24 Seleccionado\nfunction loadClientDataT24(dataClientT24){var clientPerson=new PersonModel();clientPerson.customerNumberT24=dataClientT24.id;clientPerson.clientDocumentId=dataClientT24.idnumber;clientPerson.name=dataClientT24.firstname;clientPerson.secondName=dataClientT24.secondname;clientPerson.lastName=dataClientT24.lastname;clientPerson.secondSurname=dataClientT24.secondlastname;clientPerson.personType=personTypeList.find(function(x){return x.value===Number(dataClientT24.partyType);}).value;clientPerson.idType=identificationTypeList.find(function(x){return x.value===dataClientT24.idtype;}).value;onEditClient(clientPerson);}//mostrar mensaje \nfunction showMessage(message){var isError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setmsgData({show:true,msg:message,isError:isError});}////////// PARTE ES LA FINAL DEL PROCESO ///////\n//Modal Para mostrar Comentario de Fin de Proceso\nfunction showModalEndProcess(){var show=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setdisplayModalEndProcess(show);}//Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\nfunction onSaveProcess(option){var person=null;for(var i=0;i<dataClientList.length;i++){console.log(dataClientList[i]);if(dataClientList[i].blacklist[dataClientList[i].blacklist.length-1].blackList===true){person=dataClientList[i];break;}}if(person!==null&&option===OPTs.PROCESS_LISTAEXCLUSION){option=OPTs.PROCESS_CUMPLIMIENTO;}switch(option){case OPTs.PROCESS_LISTAEXCLUSION:case OPTs.PROCESS_CUMPLIMIENTO:{//chequear si existe algun deudor para poder continuar\nbackendServices.consultPrincipalDebtor(locationData.transactionId).then(function(data){if(data!==null&&data!==undefined){saveJBPMProcess(option);}else{//Mensaje ERROR\nshowMessage(t(\"Youmustselectatleastonedebtor\"),true);}}).catch(function(error){});break;}default:{saveJBPMProcess(option);break;}}}function saveJBPMProcess(_x){return _saveJBPMProcess.apply(this,arguments);}//salvar comentario de end process\nfunction _saveJBPMProcess(){_saveJBPMProcess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(option){var _locationData$infoBpm,_locationData$infoBpm2,_locationData$infoBpm3,_locationData$infoBpm4;var maindebtor,infoBpmModel,values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultPrincipalDebtor(locationData.transactionId);case 2:maindebtor=_context.sent;infoBpmModel=new InfoBpmModel((_locationData$infoBpm=(_locationData$infoBpm2=locationData.infoBpmModel)===null||_locationData$infoBpm2===void 0?void 0:_locationData$infoBpm2.instanceId)!==null&&_locationData$infoBpm!==void 0?_locationData$infoBpm:locationData.instanceId,(_locationData$infoBpm3=(_locationData$infoBpm4=locationData.infoBpmModel)===null||_locationData$infoBpm4===void 0?void 0:_locationData$infoBpm4.transactId)!==null&&_locationData$infoBpm3!==void 0?_locationData$infoBpm3:locationData.transactionId,0,0,maindebtor===null||maindebtor===void 0?void 0:maindebtor.personId);infoBpmModel.personName=maindebtor!==undefined?maindebtor.name+\" \"+maindebtor.name2+\" \"+maindebtor.lastName+\" \"+maindebtor.lastName2:\"\";_context.t0=option;_context.next=_context.t0===OPTs.PROCESS_CANCELPROCESS?8:_context.t0===OPTs.PROCESS_BUSQUEDADESCARTE?10:_context.t0===OPTs.PROCESS_CUMPLIMIENTO?15:_context.t0===OPTs.PROCESS_LISTAEXCLUSION?20:25;break;case 8:bpmServices.abortProcess(locationData.instanceId).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);}else{//Mensaje ERROR\nshowMessage(t(\"TheProcessCouldNotFinish\"),true);}});return _context.abrupt(\"break\",25);case 10:infoBpmModel.processId=OPTs.PROCESS_BUSQUEDADESCARTE;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_BUSQUEDADESCARTE.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"customerId\":\"\",\"applicationNumber\":\"\",\"procedureNumber\":\"\"//\"decision\":\"no\"          \n};bpmServices.updatevariables(locationData.instanceId,values).then(function(data){if(data!==undefined){showMessage(t(\"TheProcessCouldNotFinish\"));}else{//Mensaje ERROR\nshowMessage(t(\"ErrorSaveMessage\"),true);}});return _context.abrupt(\"break\",25);case 15:infoBpmModel.processId=OPTs.PROCESS_CUMPLIMIENTO;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_CUMPLIMIENTO.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"customerId\":\"\",\"applicationNumber\":\"\",\"procedureNumber\":\"\",\"decision\":\"si\"};bpmServices.completedStatusTask(locationData.taskId,values).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);showMessage(t(\"TheProcessCouldNotFinish\"));}else{//Mensaje ERROR\nshowMessage(t(\"ErrorSaveMessage\"),true);}});return _context.abrupt(\"break\",25);case 20:infoBpmModel.processId=OPTs.PROCESS_LISTAEXCLUSION;infoBpmModel.activityId=OPTs.ACT_NONE;values={\"info\":JSON.stringify(infoBpmModel),\"processId\":OPTs.PROCESS_LISTAEXCLUSION.toString(),\"activityId\":OPTs.ACT_NONE.toString(),\"transactionId\":locationData.transactionId,\"customerId\":\"\",\"applicationNumber\":\"\",\"procedureNumber\":\"\",\"decision\":\"no\"};bpmServices.completedStatusTask(locationData.taskId,values).then(function(data){if(data!==undefined){history.push(url.URL_DASHBOARD);showMessage(t(\"TheProcessCouldNotFinish\"));}else{//Mensaje ERROR\nshowMessage(t(\"ErrorSaveMessage\"),true);}});return _context.abrupt(\"break\",25);case 25:case\"end\":return _context.stop();}}},_callee);}));return _saveJBPMProcess.apply(this,arguments);}function onSaveEndProcess(values){onSaveProcess(OPTs.PROCESS_CANCELPROCESS);}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"CommercialCredit\"),breadcrumbItem:t(\"PreRequest\")}),/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"card-title\",children:[t(\"PreRequest\"),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",t(\"Process\")+\": #\"+(locationData===null||locationData===void 0?void 0:locationData.instanceId)]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"This form is official and must be filled out correctly\")})]}),/*#__PURE__*/_jsx(CardBody,{children:openNewClient?/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(ClientForm,{transactId:locationData.transactionId,clientSelected:selectedClient,onCancel:function onCancel(){onOpenNewClient(false);getProcessClients(locationData.transactionId);}})})}):/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(SearchClientCore,{onClientSelect:loadClientDataT24,onNewClientSelect:function onNewClientSelect(){setselectedClient(undefined);onOpenNewClient();}})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"ParticipantsList\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"PersonType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"FullName\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"IdentificationType\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"IdentificationNumber\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Roles\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"WatchList\")}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataClientList.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:getPersnoType(Number(item.personType)).label}),/*#__PURE__*/_jsx(\"td\",{children:Number(item.personType)>1?item.name:item.name+\" \"+item.secondName+\" \"+item.lastName+\" \"+item.secondSurname}),/*#__PURE__*/_jsx(\"td\",{children:getIdentificationType(item.idType).label}),/*#__PURE__*/_jsx(\"td\",{children:item.clientDocumentId}),/*#__PURE__*/_jsx(\"td\",{children:item.roles!==undefined?item.roles.map(function(rol,index){return rol.roleDescription+\" - \";}):null}),/*#__PURE__*/_jsx(\"td\",{children:item.blacklist!==undefined&&item.blacklist.length>0?item.blacklist[item.blacklist.length-1].blackList===true?\"Aplica\":\"No Aplica\":\"No Aplica\"}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:function onClick(e){onEditClient(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:function onClick(e){onDeleteClient(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]});})})]})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(Alert,{show:msgData.show,variant:msgData.isError?\"danger\":\"success\",dismissible:true,onClose:function onClose(){console.log(\"onClose\");setmsgData({show:false,msg:\"\",isError:false});},children:msgData.msg})})})]})}),!openNewClient?/*#__PURE__*/_jsx(React.Fragment,{children:dataClientList.length>0?/*#__PURE__*/_jsxs(CardFooter,{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){showModalEndProcess();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\" \",t(\"Advance\")]})]}):/*#__PURE__*/_jsx(CardFooter,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{textAlign:\"center\"},children:t(\"NoData\")})})})})}):null]})}),/*#__PURE__*/_jsx(ModalEndProcess,{onSaveEndProcess:onSaveEndProcess,isOpen:displayModalEndProcess,toggle:function toggle(){showModalEndProcess(false);}})]});};export default PreRequest;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/1_Presolicitud/index.js"],"names":["React","useState","useLocation","useHistory","OPTs","url","Row","Col","Card","CardBody","Label","CardFooter","Button","Table","CardHeader","Alert","Link","Breadcrumbs","setDefaults","useTranslation","LoadingOverlay","ClientForm","ModalEndProcess","BackendServices","CoreServices","BpmServices","PersonModel","InfoBpmModel","SearchClientCore","PreRequest","props","t","i18n","history","location","undefined","locationData","setLocationData","isActiveLoading","setIsActiveLoading","openNewClient","setopenNewClient","dataClientList","setdataClientList","selectedClient","setselectedClient","identificationTypeList","setidentificationTypeList","personTypeList","setpersonTypeList","displayModalEndProcess","setdisplayModalEndProcess","show","msg","isError","msgData","setmsgData","backendServices","setbackendServices","bpmServices","setbpmServices","useEffect","data","transactionId","length","checkAndCreateProcedure","sessionStorage","setItem","JSON","stringify","fetchData","result","getItem","parse","checkAndStartTask","then","iniresult","push","URL_DASHBOARD","loadIdentificationTypes","loadPersonTypes","getProcessClients","nuevoTramite","instanceId","PROCESS_BUSQUEDADESCARTE","transactId","values","updatevariables","catch","error","consultarCatalogoTipoIdentificacion","json","i","label","value","consultarCatalogoTipoPersona","consultarOrquestadoListaPersonaSolicitud","onOpenNewClient","onEditClient","dataClient","onDeleteClient","eliminarOrquestadoListaPersonaSolicitud","getPersnoType","pType","find","x","getIdentificationType","idType","console","log","loadClientDataT24","dataClientT24","clientPerson","customerNumberT24","id","clientDocumentId","idnumber","name","firstname","secondName","secondname","lastName","lastname","secondSurname","secondlastname","personType","Number","partyType","idtype","showMessage","message","showModalEndProcess","onSaveProcess","option","person","blacklist","blackList","PROCESS_LISTAEXCLUSION","PROCESS_CUMPLIMIENTO","consultPrincipalDebtor","saveJBPMProcess","maindebtor","infoBpmModel","personId","personName","name2","lastName2","PROCESS_CANCELPROCESS","abortProcess","processId","activityId","ACT_NONE","toString","completedStatusTask","taskId","onSaveEndProcess","map","item","index","roles","rol","roleDescription","textAlign","e","margin"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as OPTs from \"../../../helpers/options_helper\"\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Label,\r\n  CardFooter,\r\n  Button,\r\n  Table,\r\n  CardHeader,\r\n} from \"reactstrap\"\r\nimport Alert from 'react-bootstrap/Alert'\r\nimport { Link } from \"react-router-dom\"\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport { setDefaults, useTranslation } from \"react-i18next\";\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport ClientForm from \"./ClientForm\";\r\nimport ModalEndProcess from \"../../../components/EndProcess/ModalEndProcess\";\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport { PersonModel } from '../../../models/Common/PersonModel';\r\nimport { InfoBpmModel } from '../../../models/Common/InfoBpmModel';\r\nimport SearchClientCore from \"../../../components/Common/SearchClientCore\";\r\n\r\nconst PreRequest = props => {\r\n  const { t, i18n } = useTranslation();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [locationData, setLocationData] = useState(undefined);\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n  const [openNewClient, setopenNewClient] = useState(false);\r\n  const [dataClientList, setdataClientList] = useState([]);\r\n  const [selectedClient, setselectedClient] = useState(undefined);\r\n  const [identificationTypeList, setidentificationTypeList] = useState([]);\r\n  const [personTypeList, setpersonTypeList] = useState([]);\r\n  const [displayModalEndProcess, setdisplayModalEndProcess] = useState(false);\r\n  const [msgData, setmsgData] = useState({ show: false, msg: \"\", isError: false });\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n\r\n  //On Mounting (componentDidMount)\r\n  React.useEffect(() => {\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        location.data.transactionId = 0;\r\n        checkAndCreateProcedure(location.data);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        fetchData(location.data);\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        fetchData(result);\r\n      }\r\n    }\r\n  }, []);\r\n  //Caraga Inicial de datos\r\n  function fetchData(locationData) {\r\n    //chequear si la tarea no ha sido iniciada\r\n    bpmServices.checkAndStartTask(locationData)\r\n      .then((iniresult) => {\r\n        if (iniresult === false) {\r\n          history.push(url.URL_DASHBOARD);\r\n        }\r\n      })\r\n    //checkAndCreateProcedure(locationData);\r\n    loadIdentificationTypes();\r\n    loadPersonTypes();\r\n    getProcessClients(locationData.transactionId);\r\n  }\r\n  //CHEQUEAMOS Y GENERAMOS EL PROCESO EN BASE DE DATOS\r\n  function checkAndCreateProcedure(locationData) {\r\n    backendServices.nuevoTramite(locationData.transactionId, locationData.instanceId, OPTs.PROCESS_BUSQUEDADESCARTE, OPTs.PROCESS_BUSQUEDADESCARTE, \"admin\", \"0\")\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          locationData.transactionId = data.transactId;\r\n          sessionStorage.setItem('locationData', JSON.stringify(locationData));\r\n          setLocationData(locationData);\r\n          fetchData(locationData);\r\n          //Actualizamos Variables\r\n          var values = { \"transactionId\": locationData.transactionId };\r\n          bpmServices.updatevariables(locationData.instanceId, values)\r\n            .then((data) => {\r\n              if (data !== undefined) { }\r\n            });\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //cargar lista de tipo de identificacion\r\n  function loadIdentificationTypes() {\r\n    backendServices.consultarCatalogoTipoIdentificacion()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"description\"]), value: data[i][\"id\"] })\r\n          }\r\n          setidentificationTypeList(json);\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //cargar lista de tipo de personas\r\n  function loadPersonTypes() {\r\n    backendServices.consultarCatalogoTipoPersona()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          for (let i = 0; i < data.length; i++) {\r\n            json.push({ label: t(data[i][\"label\"]), value: data[i][\"code\"] })\r\n          }\r\n          setpersonTypeList(json);\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //se buscan todos los clientes de este proceso \r\n  function getProcessClients(transactionId) {\r\n    backendServices.consultarOrquestadoListaPersonaSolicitud(transactionId)\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          setdataClientList(data)\r\n          /*if (data.length <= 0) {\r\n            setselectedClient(new PersonModel());\r\n            onOpenNewClient();\r\n          }*/\r\n        }\r\n      }).catch((error) => { });\r\n  }\r\n  //Abrir formulario Persona\r\n  function onOpenNewClient(show = true) {\r\n    setopenNewClient(show)\r\n  }\r\n  //Editar Persona\r\n  function onEditClient(dataClient) {\r\n    setselectedClient(dataClient)\r\n    onOpenNewClient();\r\n  }\r\n  //Eliminar Persona\r\n  function onDeleteClient(dataClient) {\r\n    //eliminarOrquestadoListaPersonaSolicitud\r\n    backendServices.eliminarOrquestadoListaPersonaSolicitud(dataClient)\r\n      .then((data) => {\r\n        getProcessClients(dataClient.transactId);\r\n      }).catch((error) => { });\r\n  }\r\n  //retorna el Tipo de Persona\r\n  function getPersnoType(pType) {\r\n    return personTypeList.find(x => x.value === pType);\r\n  }\r\n  //retorna el Tipo de identificacion\r\n  function getIdentificationType(idType) {\r\n    console.log(\"getIdentificationType\",)\r\n    if (idType !== undefined && idType !== null && idType.length > 0) {\r\n      return identificationTypeList.find(x => x.value === idType);\r\n    }\r\n    return \"\";\r\n  }\r\n  //Carga de Datos de Cliente de T24 Seleccionado\r\n  function loadClientDataT24(dataClientT24) {\r\n    var clientPerson = new PersonModel();\r\n    clientPerson.customerNumberT24 = dataClientT24.id;\r\n    clientPerson.clientDocumentId = dataClientT24.idnumber;\r\n    clientPerson.name = dataClientT24.firstname;\r\n    clientPerson.secondName = dataClientT24.secondname;\r\n    clientPerson.lastName = dataClientT24.lastname;\r\n    clientPerson.secondSurname = dataClientT24.secondlastname;\r\n    clientPerson.personType = personTypeList.find(x => x.value === Number(dataClientT24.partyType)).value;\r\n    clientPerson.idType = identificationTypeList.find(x => x.value === dataClientT24.idtype).value;\r\n    onEditClient(clientPerson);\r\n  }\r\n  \r\n  //mostrar mensaje \r\n  function showMessage(message, isError = false) {\r\n\r\n    setmsgData({ show: true, msg: message, isError: isError })\r\n  }\r\n  ////////// PARTE ES LA FINAL DEL PROCESO ///////\r\n  //Modal Para mostrar Comentario de Fin de Proceso\r\n  function showModalEndProcess(show = true) {\r\n    setdisplayModalEndProcess(show);\r\n  }\r\n  //Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\r\n  function onSaveProcess(option) {\r\n    \r\n    var person = null;\r\n    for (var i = 0; i < dataClientList.length; i++) {\r\n      console.log(dataClientList[i])\r\n      if (dataClientList[i].blacklist[dataClientList[i].blacklist.length - 1].blackList === true) {\r\n        person = dataClientList[i];\r\n        break;\r\n      }\r\n    }\r\n    if (person !== null && option === OPTs.PROCESS_LISTAEXCLUSION) {\r\n      option = OPTs.PROCESS_CUMPLIMIENTO;\r\n    }\r\n    switch (option) {\r\n      case OPTs.PROCESS_LISTAEXCLUSION:\r\n      case OPTs.PROCESS_CUMPLIMIENTO: {\r\n        //chequear si existe algun deudor para poder continuar\r\n        backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n          .then((data) => {\r\n            if (data !== null && data !== undefined) {\r\n              saveJBPMProcess(option);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"Youmustselectatleastonedebtor\"), true);\r\n            }\r\n          }).catch((error) => { });\r\n        break;\r\n      }\r\n      default: {\r\n        saveJBPMProcess(option);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  async function saveJBPMProcess(option) {\r\n    \r\n    var maindebtor = await backendServices.consultPrincipalDebtor(locationData.transactionId)\r\n\r\n    var infoBpmModel = new InfoBpmModel(\r\n      locationData.infoBpmModel?.instanceId??locationData.instanceId,\r\n      locationData.infoBpmModel?.transactId??locationData.transactionId,\r\n      0,0,\r\n      maindebtor?.personId\r\n    );\r\n    infoBpmModel.personName=maindebtor!==undefined?(maindebtor.name + \" \" +maindebtor.name2 + \" \" +maindebtor.lastName + \" \" +maindebtor.lastName2 ):\"\";\r\n    \r\n    switch (option) {\r\n      case OPTs.PROCESS_CANCELPROCESS: {    \r\n        bpmServices.abortProcess(locationData.instanceId)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"TheProcessCouldNotFinish\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_BUSQUEDADESCARTE: {\r\n    \r\n        infoBpmModel.processId=OPTs.PROCESS_BUSQUEDADESCARTE;\r\n        infoBpmModel.activityId=OPTs.ACT_NONE;\r\n        \r\n        var values = {\r\n          \"info\":JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_BUSQUEDADESCARTE.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"customerId\": \"\",\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          //\"decision\":\"no\"          \r\n        };\r\n        bpmServices.updatevariables(locationData.instanceId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              showMessage(t(\"TheProcessCouldNotFinish\"));\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"ErrorSaveMessage\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_CUMPLIMIENTO: {\r\n        \r\n        infoBpmModel.processId=OPTs.PROCESS_CUMPLIMIENTO;\r\n        infoBpmModel.activityId=OPTs.ACT_NONE;\r\n    \r\n        var values = {\r\n          \"info\":JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_CUMPLIMIENTO.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"customerId\": \"\",\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          \"decision\": \"si\"\r\n        };\r\n        bpmServices.completedStatusTask(locationData.taskId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n              showMessage(t(\"TheProcessCouldNotFinish\"));\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"ErrorSaveMessage\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n      case OPTs.PROCESS_LISTAEXCLUSION: {\r\n    \r\n        infoBpmModel.processId=OPTs.PROCESS_LISTAEXCLUSION;\r\n        infoBpmModel.activityId=OPTs.ACT_NONE;\r\n    \r\n        var values = {\r\n          \"info\":JSON.stringify(infoBpmModel),\r\n          \"processId\": OPTs.PROCESS_LISTAEXCLUSION.toString(),\r\n          \"activityId\": OPTs.ACT_NONE.toString(),\r\n          \"transactionId\": locationData.transactionId,\r\n          \"customerId\": \"\",\r\n          \"applicationNumber\": \"\",\r\n          \"procedureNumber\": \"\",\r\n          \"decision\": \"no\"\r\n        };\r\n        bpmServices.completedStatusTask(locationData.taskId, values)\r\n          .then((data) => {\r\n            if (data !== undefined) {\r\n              history.push(url.URL_DASHBOARD);\r\n              showMessage(t(\"TheProcessCouldNotFinish\"));\r\n            }\r\n            else {\r\n              //Mensaje ERROR\r\n              showMessage(t(\"ErrorSaveMessage\"), true);\r\n            }\r\n          });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  //salvar comentario de end process\r\n  function onSaveEndProcess(values) {\r\n    onSaveProcess(OPTs.PROCESS_CANCELPROCESS);\r\n  }\r\n  return (\r\n    <div className=\"page-content\">\r\n      <Breadcrumbs title={t(\"CommercialCredit\")} breadcrumbItem={t(\"PreRequest\")} />\r\n      <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n        <Card>\r\n          <CardHeader>\r\n            <h4 className=\"card-title\">{t(\"PreRequest\")} <br /> {t(\"Process\") + \": #\" + locationData?.instanceId}</h4>\r\n            <p className=\"card-title-desc\">{t(\"This form is official and must be filled out correctly\")}</p>\r\n          </CardHeader>\r\n          <CardBody>            \r\n\r\n            {openNewClient ?\r\n              <Row>\r\n                <Col md=\"12\">\r\n                  <ClientForm transactId={locationData.transactionId} clientSelected={selectedClient} onCancel={() => { onOpenNewClient(false); getProcessClients(locationData.transactionId) }}></ClientForm>\r\n                </Col>\r\n              </Row>\r\n              :\r\n              <React.Fragment>\r\n                <Row>\r\n                  <Col md=\"12\">\r\n                    <SearchClientCore onClientSelect={loadClientDataT24} onNewClientSelect={() => { setselectedClient(undefined); onOpenNewClient() }}/>      \r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"ParticipantsList\")}</h5>\r\n                    <p className=\"card-title-desc\"></p>\r\n                    <div className=\"table-responsive\">\r\n                      <Table className=\"table mb-0\">\r\n                        <thead className=\"table-light\">\r\n                          <tr>\r\n                            <th>{t(\"PersonType\")}</th>\r\n                            <th>{t(\"FullName\")}</th>\r\n                            <th>{t(\"IdentificationType\")}</th>\r\n                            <th>{t(\"IdentificationNumber\")}</th>\r\n                            <th>{t(\"Roles\")}</th>\r\n                            <th>{t(\"WatchList\")}</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {dataClientList.map((item, index) => (\r\n                            <tr>\r\n                              <td>{getPersnoType(Number(item.personType)).label}</td>\r\n                              <td>{Number(item.personType) > 1 ? (item.name) : (item.name + \" \" + item.secondName + \" \" + item.lastName + \" \" + item.secondSurname)}</td>\r\n                              <td>{getIdentificationType(item.idType).label}</td>\r\n                              <td>{item.clientDocumentId}</td>\r\n                              <td>\r\n                                {item.roles !== undefined ?\r\n                                  item.roles.map((rol, index) => (\r\n                                    rol.roleDescription + \" - \"\r\n                                  )) : null}\r\n                              </td>\r\n                              <td>\r\n                                {item.blacklist !== undefined && item.blacklist.length > 0 ?                                \r\n                                  (item.blacklist[item.blacklist.length - 1].blackList === true ? \"Aplica\" : \"No Aplica\") : \"No Aplica\"}\r\n                              </td>\r\n                              <td style={{ textAlign: \"right\" }}>\r\n                                <Link to=\"#\" onClick={(e) => { onEditClient(item) }}><i className=\"mdi mdi-border-color mdi-24px\"></i></Link>\r\n                                <Link to=\"#\" onClick={(e) => { onDeleteClient(item) }}><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Link>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </Table>\r\n                    </div>\r\n\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md=\"12\">\r\n                    <Alert show={msgData.show} variant={msgData.isError ? \"danger\" : \"success\"} dismissible onClose={() => { console.log(\"onClose\"); setmsgData({ show: false, msg: \"\", isError: false }) }}>\r\n                      {msgData.msg}\r\n                    </Alert>\r\n                  </Col>\r\n                </Row>\r\n              </React.Fragment>\r\n            }\r\n          </CardBody>\r\n\r\n          {!openNewClient ?\r\n            <React.Fragment>\r\n              {dataClientList.length > 0 ?\r\n                <CardFooter style={{ textAlign: \"right\" }}>\r\n                  <Button color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={() => { showModalEndProcess() }}><i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"Cancel\")}</Button>\r\n                  <Button color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.PROCESS_LISTAEXCLUSION) }}><i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i> {t(\"Advance\")}</Button>\r\n                </CardFooter>\r\n                : \r\n                <CardFooter>\r\n                  <Row>\r\n                  <Col md=\"12\"><div className=\"alert alert-info\" style={{ textAlign: \"center\" }}>{t(\"NoData\")}</div></Col>\r\n                </Row>\r\n                </CardFooter>  \r\n              }\r\n            </React.Fragment>  \r\n            :null                    \r\n          }\r\n        </Card>\r\n      </LoadingOverlay>\r\n\r\n      <ModalEndProcess onSaveEndProcess={onSaveEndProcess} isOpen={displayModalEndProcess} toggle={() => { showModalEndProcess(false) }} />\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default PreRequest\r\n"]},"metadata":{},"sourceType":"module"}