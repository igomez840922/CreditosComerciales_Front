{"ast":null,"code":"import _defineProperty from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{withTranslation}from\"react-i18next\";import{Link}from\"react-router-dom\";import{Table,Card,CardBody,Pagination,PaginationItem,PaginationLink,CardFooter,Button,Row,Col}from\"reactstrap\";import ApiServicesDetalleDocumentacion from'../../../../services/DocumentacionLegal/ApiServicesDetalleDocumentacion';import{BpmServices,BackendServices}from\"../../../../services\";import{useLocation,useHistory}from\"react-router-dom\";import*as url from\"../../../../helpers/url_helper\";import SweetAlert from\"react-bootstrap-sweetalert\";import{AvField,AvForm,AvGroup}from'availity-reactstrap-validation';import Switch from\"react-switch\";import{useTranslation}from'react-i18next';import Currency from'../../../../helpers/currency';import{uniq_key}from'../../../../helpers/unq_key';import LoadingOverlay from\"react-loading-overlay\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Offsymbol=function Offsymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"No\"]});};var OnSymbol=function OnSymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"Si\"]});};var estiloTotales={backgroundColor:\"lightgrey !important\",color:\"black !important\",textAlign:\"center\"};var Honorarios=function Honorarios(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isActiveLoading=_useState2[0],setIsActiveLoading=_useState2[1];//loading de la pagina\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),datosJsonCheck=_useState4[0],setdatosJsonCheck=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),datosJsonCheck1=_useState6[0],setdatosJsonCheck1=_useState6[1];var _useState7=useState(\"local\"),_useState8=_slicedToArray(_useState7,2),tipo=_useState8[0],settipo=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),switch1=_useState10[0],setswitch1=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),switch2=_useState12[0],setswitch2=_useState12[1];var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var currencyData=new Currency();var apiServiceBackend=new BackendServices();var location=useLocation();var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),openModalRiesgo=_useState14[0],setopenModalRiesgo=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),facilidadesData=_useState16[0],setfacilidadesData=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),recordsFacilidades=_useState18[0],setrecordsFacilidades=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),dataRows=_useState20[0],setdataRows=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),dataSuma=_useState22[0],setdataSuma=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),dataSuma1=_useState24[0],setdataSuma1=_useState24[1];var _useState25=useState(location.data),_useState26=_slicedToArray(_useState25,2),locationData=_useState26[0],setLocationData=_useState26[1];var history=useHistory();var jsonHonorarios=[{min:0.01,max:10000.01,amountAdd:150.00,porcent:7},{min:10000.00,max:50000.00,amountAdd:200.00,porcent:7},{min:50000.00,max:100000.00,amountAdd:300.00,porcent:7},{min:100000.01,max:250000.00,amountAdd:350.00,porcent:7},{min:250000.01,max:1000000.01,amountAdd:500.00,porcent:7},{min:1000000.01,max:2000000.00,amountAdd:750.00,porcent:7},{min:2000000.01,max:3000000.00,amountAdd:1000.00,porcent:7},{min:3000000.01,max:4000000.00,amountAdd:1500.00,porcent:7},{min:4000000.01,max:5000000.00,amountAdd:2000.00,porcent:7},{min:5000000.01,max:6000000.00,amountAdd:2500.00,porcent:7},{min:6000000.01,max:7000000.00,amountAdd:3000.00,porcent:7},{min:7000000.01,max:8000000.00,amountAdd:3500.00,porcent:7},{min:8000000.01,max:9000000.00,amountAdd:4000.00,porcent:7},{min:9000000.01,max:10000000.00,amountAdd:4500.00,porcent:7}];React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){history.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}if(props.activeTab==5){setIsActiveLoading(true);setdatosJsonCheck([]);loadData(dataSession);}},[props.activeTab==5]);function loadData(_x){return _loadData.apply(this,arguments);}function _loadData(){_loadData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dataSession){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return apiServiceBackend.getDocumentationJson(dataSession.transactionId).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resp){var _resp$legalDocResults,dato;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(resp.legalDocResults.find(function(x){return x.typeDocument==\"honorarios\";})){dato=Object.entries((_resp$legalDocResults=resp.legalDocResults.find(function(x){return x.typeDocument==\"honorarios\";}))===null||_resp$legalDocResults===void 0?void 0:_resp$legalDocResults.dataJson).map(function(object){return object[1];});settipo(\"base\");setdatosJsonCheck(dato);cargarData(dato);setTimeout(function(){setIsActiveLoading(false);var total=0;for(var i=0;i<dato.length;i++){if(dato[i].proposalTypeName2){total+=parseFloat(dato[i].proposalTypeName2==\"0\"?dato[i].totalSuma:dato[i].proposalTypeName2==\"1\"?dato[i].adendaH:dato[i].proposalTypeName2==\"2\"?dato[i].adendaF:dato[i].totalSuma);document.getElementById(\"amount\"+i).innerHTML=currencyData.format(parseFloat(dato[i].proposalTypeName2==\"0\"?dato[i].totalSuma:dato[i].proposalTypeName2==\"1\"?dato[i].adendaH:dato[i].proposalTypeName2==\"2\"?dato[i].adendaF:dato[i].totalSuma).toFixed(2));}}document.getElementById(\"totalFinal\").innerHTML=\"$\"+currencyData.format(parseFloat(total).toFixed(2));},2000);}else{settipo(\"local\");setIsActiveLoading(false);initializeData(dataSession);}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref.apply(this,arguments);};}()).catch(function(err){setIsActiveLoading(false);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _loadData.apply(this,arguments);}function initializeData(_x2){return _initializeData.apply(this,arguments);}function _initializeData(){_initializeData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dataSession){var _ref2,_dataSession$transact;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return apiServiceBackend.consultGeneralDataPropCred((_ref2=(_dataSession$transact=dataSession===null||dataSession===void 0?void 0:dataSession.transactionId)!==null&&_dataSession$transact!==void 0?_dataSession$transact:dataSession===null||dataSession===void 0?void 0:dataSession.transactionId)!==null&&_ref2!==void 0?_ref2:0).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var _data$;var requestId;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:requestId=(_data$=data[0])===null||_data$===void 0?void 0:_data$.requestId;_context6.next=3;return apiServiceBackend.retrieveProposalType().then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(propuesta){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return apiServiceBackend.retrieveFacilityType().then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(facilidad){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return apiServiceBackend.consultarFacilidades(requestId).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(resp){var jsonSet,jsonCheck,totales,totales2,_loop,i;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:jsonSet=[];jsonCheck=[];totales=0;totales2=0;_loop=function _loop(i){var _jsonAdd$,_jsonAdd$2,_jsonAdd$3,_jsonAdd$4,_jsonAdd$5,_jsonAdd$6,_facilidad$find,_propuesta$find,_propuesta$find2,_jsonAdd$0$amountAdd,_jsonAdd$7,_jsonAdd$0$max,_jsonAdd$8,_jsonAdd$0$min,_jsonAdd$9,_jsonAdd$10,_jsonAdd$11,_jsonAdd$12,_jsonAdd$13,_jsonAdd$14,_jsonAdd$0$min2,_jsonAdd$15,_jsonAdd$0$porcent,_jsonAdd$16,_jsonAdd$17,_jsonAdd$18,_jsonAdd$19,_jsonSet$push,_facilidad$find2,_propuesta$find3,_propuesta$find4,_jsonAdd$0$amountAdd2,_jsonAdd$20,_jsonAdd$0$max2,_jsonAdd$21,_jsonAdd$0$min3,_jsonAdd$22,_jsonAdd$23,_jsonAdd$24,_jsonAdd$25,_jsonAdd$26,_jsonAdd$27,_jsonAdd$0$min4,_jsonAdd$28,_jsonAdd$0$porcent2,_jsonAdd$29,_jsonAdd$30,_jsonAdd$31,_jsonAdd$32,_datosJsonCheck$push;var jsonAdd=jsonHonorarios.filter(function(x){return resp[i].amount>=x.min&&resp[i].amount<=x.max;});// totales.totalMonto = Number(parseFloat(totales.totalMonto)) + Number(resp[i].amount);\n// totales.totalMonto = Number(parseFloat(totales.totalMonto)) + Number(resp[i].amount);\ntotales=Number(parseFloat(totales))+Number(parseFloat(((_jsonAdd$=jsonAdd[0])===null||_jsonAdd$===void 0?void 0:_jsonAdd$.amountAdd)+((_jsonAdd$2=jsonAdd[0])===null||_jsonAdd$2===void 0?void 0:_jsonAdd$2.porcent)/100*((_jsonAdd$3=jsonAdd[0])===null||_jsonAdd$3===void 0?void 0:_jsonAdd$3.amountAdd)).toFixed(2));totales2=Number(parseFloat(totales2))+Number(parseFloat(((_jsonAdd$4=jsonAdd[0])===null||_jsonAdd$4===void 0?void 0:_jsonAdd$4.amountAdd)+((_jsonAdd$5=jsonAdd[0])===null||_jsonAdd$5===void 0?void 0:_jsonAdd$5.porcent)/100*((_jsonAdd$6=jsonAdd[0])===null||_jsonAdd$6===void 0?void 0:_jsonAdd$6.amountAdd)).toFixed(2));jsonSet.push((_jsonSet$push={amount:Number(resp[i].amount),facilityTypeId:resp[i].facilityTypeId,facilityTypeName:(_facilidad$find=facilidad.find(function(x){return x.id===resp[i].facilityTypeId;}))===null||_facilidad$find===void 0?void 0:_facilidad$find.description,proposalTypeId:resp[i].proposalTypeId,proposalTypeName:(_propuesta$find=propuesta.find(function(x){return x.id===resp[i].proposalTypeId;}))===null||_propuesta$find===void 0?void 0:_propuesta$find.description,proposalTypeName2:(_propuesta$find2=propuesta.find(function(x){return x.id===resp[i].proposalTypeId;}))===null||_propuesta$find2===void 0?void 0:_propuesta$find2.description,debtor:resp[i].debtor,amountAdd:(_jsonAdd$0$amountAdd=(_jsonAdd$7=jsonAdd[0])===null||_jsonAdd$7===void 0?void 0:_jsonAdd$7.amountAdd)!==null&&_jsonAdd$0$amountAdd!==void 0?_jsonAdd$0$amountAdd:0,max:(_jsonAdd$0$max=(_jsonAdd$8=jsonAdd[0])===null||_jsonAdd$8===void 0?void 0:_jsonAdd$8.max)!==null&&_jsonAdd$0$max!==void 0?_jsonAdd$0$max:0,min:(_jsonAdd$0$min=(_jsonAdd$9=jsonAdd[0])===null||_jsonAdd$9===void 0?void 0:_jsonAdd$9.min)!==null&&_jsonAdd$0$min!==void 0?_jsonAdd$0$min:0,CAH:false,CAF:false,CAFval:0,CAHval:0,totalSuma:Number(parseFloat(((_jsonAdd$10=jsonAdd[0])===null||_jsonAdd$10===void 0?void 0:_jsonAdd$10.amountAdd)+((_jsonAdd$11=jsonAdd[0])===null||_jsonAdd$11===void 0?void 0:_jsonAdd$11.porcent)/100*((_jsonAdd$12=jsonAdd[0])===null||_jsonAdd$12===void 0?void 0:_jsonAdd$12.amountAdd)).toFixed(2)),adendaH:Number(parseFloat(150+((_jsonAdd$13=jsonAdd[0])===null||_jsonAdd$13===void 0?void 0:_jsonAdd$13.porcent)/100*150).toFixed(2)),adendaF:Number(parseFloat(200+((_jsonAdd$14=jsonAdd[0])===null||_jsonAdd$14===void 0?void 0:_jsonAdd$14.porcent)/100*200).toFixed(2))},_defineProperty(_jsonSet$push,\"min\",(_jsonAdd$0$min2=(_jsonAdd$15=jsonAdd[0])===null||_jsonAdd$15===void 0?void 0:_jsonAdd$15.min)!==null&&_jsonAdd$0$min2!==void 0?_jsonAdd$0$min2:0),_defineProperty(_jsonSet$push,\"porcent\",(_jsonAdd$0$porcent=(_jsonAdd$16=jsonAdd[0])===null||_jsonAdd$16===void 0?void 0:_jsonAdd$16.porcent)!==null&&_jsonAdd$0$porcent!==void 0?_jsonAdd$0$porcent:0),_defineProperty(_jsonSet$push,\"totalAmount\",parseFloat(((_jsonAdd$17=jsonAdd[0])===null||_jsonAdd$17===void 0?void 0:_jsonAdd$17.amountAdd)+((_jsonAdd$18=jsonAdd[0])===null||_jsonAdd$18===void 0?void 0:_jsonAdd$18.porcent)/100*((_jsonAdd$19=jsonAdd[0])===null||_jsonAdd$19===void 0?void 0:_jsonAdd$19.amountAdd)).toFixed(2)),_jsonSet$push));datosJsonCheck.push((_datosJsonCheck$push={amount:Number(resp[i].amount),facilityTypeId:resp[i].facilityTypeId,facilityTypeName:(_facilidad$find2=facilidad.find(function(x){return x.id===resp[i].facilityTypeId;}))===null||_facilidad$find2===void 0?void 0:_facilidad$find2.description,proposalTypeId:resp[i].proposalTypeId,proposalTypeName:(_propuesta$find3=propuesta.find(function(x){return x.id===resp[i].proposalTypeId;}))===null||_propuesta$find3===void 0?void 0:_propuesta$find3.description,proposalTypeName2:(_propuesta$find4=propuesta.find(function(x){return x.id===resp[i].proposalTypeId;}))===null||_propuesta$find4===void 0?void 0:_propuesta$find4.description,debtor:resp[i].debtor,amountAdd:(_jsonAdd$0$amountAdd2=(_jsonAdd$20=jsonAdd[0])===null||_jsonAdd$20===void 0?void 0:_jsonAdd$20.amountAdd)!==null&&_jsonAdd$0$amountAdd2!==void 0?_jsonAdd$0$amountAdd2:0,max:(_jsonAdd$0$max2=(_jsonAdd$21=jsonAdd[0])===null||_jsonAdd$21===void 0?void 0:_jsonAdd$21.max)!==null&&_jsonAdd$0$max2!==void 0?_jsonAdd$0$max2:0,min:(_jsonAdd$0$min3=(_jsonAdd$22=jsonAdd[0])===null||_jsonAdd$22===void 0?void 0:_jsonAdd$22.min)!==null&&_jsonAdd$0$min3!==void 0?_jsonAdd$0$min3:0,CAH:false,CAF:false,CAFval:0,CAHval:0,totalSuma:Number(parseFloat(((_jsonAdd$23=jsonAdd[0])===null||_jsonAdd$23===void 0?void 0:_jsonAdd$23.amountAdd)+((_jsonAdd$24=jsonAdd[0])===null||_jsonAdd$24===void 0?void 0:_jsonAdd$24.porcent)/100*((_jsonAdd$25=jsonAdd[0])===null||_jsonAdd$25===void 0?void 0:_jsonAdd$25.amountAdd)).toFixed(2)),adendaH:Number(parseFloat(150+((_jsonAdd$26=jsonAdd[0])===null||_jsonAdd$26===void 0?void 0:_jsonAdd$26.porcent)/100*150).toFixed(2)),adendaF:Number(parseFloat(200+((_jsonAdd$27=jsonAdd[0])===null||_jsonAdd$27===void 0?void 0:_jsonAdd$27.porcent)/100*200).toFixed(2))},_defineProperty(_datosJsonCheck$push,\"min\",(_jsonAdd$0$min4=(_jsonAdd$28=jsonAdd[0])===null||_jsonAdd$28===void 0?void 0:_jsonAdd$28.min)!==null&&_jsonAdd$0$min4!==void 0?_jsonAdd$0$min4:0),_defineProperty(_datosJsonCheck$push,\"porcent\",(_jsonAdd$0$porcent2=(_jsonAdd$29=jsonAdd[0])===null||_jsonAdd$29===void 0?void 0:_jsonAdd$29.porcent)!==null&&_jsonAdd$0$porcent2!==void 0?_jsonAdd$0$porcent2:0),_defineProperty(_datosJsonCheck$push,\"totalAmount\",parseFloat(((_jsonAdd$30=jsonAdd[0])===null||_jsonAdd$30===void 0?void 0:_jsonAdd$30.amountAdd)+((_jsonAdd$31=jsonAdd[0])===null||_jsonAdd$31===void 0?void 0:_jsonAdd$31.porcent)/100*((_jsonAdd$32=jsonAdd[0])===null||_jsonAdd$32===void 0?void 0:_jsonAdd$32.amountAdd)).toFixed(2)),_datosJsonCheck$push));};for(i=0;i<resp.length;i++){_loop(i);}if(document.getElementById(\"totalFinal\")){document.getElementById(\"totalFinal\").innerHTML=\"$\"+currencyData.format(parseFloat(totales).toFixed(2));}setdatosJsonCheck(datosJsonCheck);setdataSuma1(totales2);setdataSuma(totales);cargarData(jsonSet);case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x7){return _ref6.apply(this,arguments);};}());case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6){return _ref5.apply(this,arguments);};}());case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref4.apply(this,arguments);};}());case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref3.apply(this,arguments);};}());case 2:case\"end\":return _context7.stop();}}},_callee7);}));return _initializeData.apply(this,arguments);}function cargarData(jsonSet){setfacilidadesData(jsonSet.map(function(data,index){var _data$amount;return data.facilityTypeName?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.facilityTypeName}),/*#__PURE__*/_jsx(\"td\",{children:data.proposalTypeName}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"center\"},children:[\"$\",currencyData.formatTable((_data$amount=data.amount)!==null&&_data$amount!==void 0?_data$amount:0)]}),/*#__PURE__*/_jsx(\"td\",{children:data.proposalTypeName2==\"NUEVO\"?\"NUEVO\":/*#__PURE__*/_jsxs(\"select\",{onClick:function onClick(e){if(e.target.value==\"0\"){var _parseFloat$toFixed;datosJsonCheck[index].proposalTypeName2=\"0\";document.getElementById(\"amount\"+index).innerHTML=\"$\"+currencyData.format((_parseFloat$toFixed=parseFloat(data===null||data===void 0?void 0:data.totalSuma).toFixed(2))!==null&&_parseFloat$toFixed!==void 0?_parseFloat$toFixed:0);}if(e.target.value==\"1\"){var _parseFloat$toFixed2;datosJsonCheck[index].proposalTypeName2=\"1\";document.getElementById(\"amount\"+index).innerHTML=\"$\"+currencyData.format((_parseFloat$toFixed2=parseFloat(data===null||data===void 0?void 0:data.adendaH).toFixed(2))!==null&&_parseFloat$toFixed2!==void 0?_parseFloat$toFixed2:0);}if(e.target.value==\"2\"){var _parseFloat$toFixed3;datosJsonCheck[index].proposalTypeName2=\"2\";document.getElementById(\"amount\"+index).innerHTML=\"$\"+currencyData.format((_parseFloat$toFixed3=parseFloat(data===null||data===void 0?void 0:data.adendaF).toFixed(2))!==null&&_parseFloat$toFixed3!==void 0?_parseFloat$toFixed3:0);}var total=0;for(var i=0;i<jsonSet.length;i++){total+=parseFloat(document.getElementById(\"amount\"+i).innerHTML.replace(\"$\",\"\"));}setdatosJsonCheck(datosJsonCheck);document.getElementById(\"totalFinal\").innerHTML=\"$\"+currencyData.format(parseFloat(total).toFixed(2));},className:\"form-control\",defaultValue:data.proposalTypeName2,children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Nueva\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Adenda hipoteca\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Adenda fideicomiso\"})]})}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"b\",{id:\"amount\"+index,children:[\"$\",currencyData.format(parseFloat(data.proposalTypeName==\"0\"?data.totalSuma:data.proposalTypeName==\"1\"?data.adendaH:data.proposalTypeName==\"2\"?data.adendaF:data.totalSuma).toFixed(2))]})})]},uniq_key())}):null;}));}function saveData(){return _saveData.apply(this,arguments);}function _saveData(){_saveData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var indice;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:setIsActiveLoading(true);indice=datosJsonCheck.length;datosJsonCheck[indice+1]={transactId:locationData.transactionId,totalValue:document.getElementById(\"totalFinal\").innerHTML.replace(\"$\",\"\")};setdatosJsonCheck(datosJsonCheck);_context11.next=6;return apiServiceBackend.getDocumentationJson(locationData.transactionId).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(resp){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!resp.legalDocResults.find(function(x){return x.typeDocument==\"honorarios\";})){_context10.next=5;break;}_context10.next=3;return apiServiceBackend.updateDocumentationJson(locationData.transactionId,2,\"honorarios\",datosJsonCheck).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(resp){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(resp);setIsActiveLoading(false);case 2:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x9){return _ref8.apply(this,arguments);};}()).catch(function(err){setIsActiveLoading(false);});case 3:_context10.next=7;break;case 5:_context10.next=7;return apiServiceBackend.newDocumentationJson(locationData.transactionId,2,\"honorarios\",datosJsonCheck).then(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(resp){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:console.log(resp);setIsActiveLoading(false);case 2:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x10){return _ref9.apply(this,arguments);};}()).catch(function(err){setIsActiveLoading(false);});case 7:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x8){return _ref7.apply(this,arguments);};}());case 6:case\"end\":return _context11.stop();}}},_callee11);}));return _saveData.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"Processinginformation\"),children:/*#__PURE__*/_jsxs(AvForm,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",border:\"0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:t(\"Proposal\")}),/*#__PURE__*/_jsxs(\"th\",{style:{textAlign:\"center\"},children:[t(\"Amount\"),\" Facilidad\"]}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"Tipo de honorario\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:t(\"Monto de honorario\")})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[facilidadesData,/*#__PURE__*/_jsxs(\"tr\",{style:estiloTotales,children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Total de honorarios\"})}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"right\"},children:/*#__PURE__*/_jsx(\"b\",{id:\"totalFinal\",children:\"$0.00\"})})]})]})]})})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Button,{className:\"btn \",color:\"success\",type:\"button\",onClick:function onClick(){saveData();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",t(\"Save\")]})})})]})})});};export default Honorarios;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/11_DocumentacionLegal/PantallaDetalle/Honorarios.js"],"names":["React","useEffect","useState","withTranslation","Link","Table","Card","CardBody","Pagination","PaginationItem","PaginationLink","CardFooter","Button","Row","Col","ApiServicesDetalleDocumentacion","BpmServices","BackendServices","useLocation","useHistory","url","SweetAlert","AvField","AvForm","AvGroup","Switch","useTranslation","Currency","uniq_key","LoadingOverlay","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","estiloTotales","backgroundColor","textAlign","Honorarios","props","isActiveLoading","setIsActiveLoading","datosJsonCheck","setdatosJsonCheck","datosJsonCheck1","setdatosJsonCheck1","tipo","settipo","switch1","setswitch1","switch2","setswitch2","t","i18n","currencyData","apiServiceBackend","location","openModalRiesgo","setopenModalRiesgo","facilidadesData","setfacilidadesData","recordsFacilidades","setrecordsFacilidades","dataRows","setdataRows","dataSuma","setdataSuma","dataSuma1","setdataSuma1","data","locationData","setLocationData","history","jsonHonorarios","min","max","amountAdd","porcent","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","activeTab","loadData","getDocumentationJson","then","resp","legalDocResults","find","x","typeDocument","dato","Object","entries","dataJson","map","object","cargarData","setTimeout","total","i","proposalTypeName2","parseFloat","totalSuma","adendaH","adendaF","document","getElementById","innerHTML","format","toFixed","initializeData","catch","err","consultGeneralDataPropCred","requestId","retrieveProposalType","propuesta","retrieveFacilityType","facilidad","consultarFacilidades","jsonSet","jsonCheck","totales","totales2","jsonAdd","filter","amount","Number","facilityTypeId","facilityTypeName","id","description","proposalTypeId","proposalTypeName","debtor","CAH","CAF","CAFval","CAHval","index","formatTable","e","target","value","replace","saveData","indice","transactId","totalValue","updateDocumentationJson","console","log","newDocumentationJson"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from \"react\"\r\nimport { withTranslation } from \"react-i18next\"\r\nimport { Link } from \"react-router-dom\"\r\nimport {\r\n    Table,\r\n    Card,\r\n    CardBody,\r\n    Pagination,\r\n    PaginationItem,\r\n    PaginationLink,\r\n    CardFooter,\r\n    Button,\r\n    Row,\r\n    Col,\r\n} from \"reactstrap\"\r\nimport ApiServicesDetalleDocumentacion from '../../../../services/DocumentacionLegal/ApiServicesDetalleDocumentacion';\r\nimport { BpmServices, BackendServices } from \"../../../../services\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\nimport * as url from \"../../../../helpers/url_helper\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport { AvField, AvForm, AvGroup } from 'availity-reactstrap-validation';\r\nimport Switch from \"react-switch\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport Currency from '../../../../helpers/currency';\r\nimport { uniq_key } from '../../../../helpers/unq_key';\r\nimport LoadingOverlay from \"react-loading-overlay\"\r\nconst Offsymbol = () => {\r\n    return (\r\n        <div\r\n            style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                height: \"100%\",\r\n                fontSize: 12,\r\n                color: \"#fff\",\r\n                paddingRight: 2,\r\n            }}\r\n        >\r\n            {\" \"}\r\n            No\r\n        </div>\r\n    );\r\n};\r\nconst OnSymbol = () => {\r\n    return (\r\n        <div\r\n            style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                height: \"100%\",\r\n                fontSize: 12,\r\n                color: \"#fff\",\r\n                paddingRight: 2,\r\n            }}\r\n        >\r\n            {\" \"}\r\n            Si\r\n        </div>\r\n    );\r\n};\r\nconst estiloTotales = { backgroundColor: \"lightgrey !important\", color: \"black !important\", textAlign: \"center\" }\r\nconst Honorarios = (props) => {\r\n    const [isActiveLoading, setIsActiveLoading] = useState(false); //loading de la pagina\r\n    const [datosJsonCheck, setdatosJsonCheck] = useState([]);\r\n    const [datosJsonCheck1, setdatosJsonCheck1] = useState(null);\r\n    const [tipo, settipo] = useState(\"local\");\r\n    const [switch1, setswitch1] = useState(false);\r\n    const [switch2, setswitch2] = useState(false);\r\n    const { t, i18n } = useTranslation();\r\n    const currencyData = new Currency();\r\n    const apiServiceBackend = new BackendServices();\r\n    const location = useLocation()\r\n    const [openModalRiesgo, setopenModalRiesgo] = useState(false);\r\n    const [facilidadesData, setfacilidadesData] = useState(null);\r\n    const [recordsFacilidades, setrecordsFacilidades] = useState(0);\r\n    const [dataRows, setdataRows] = useState(null);\r\n    const [dataSuma, setdataSuma] = useState(0);\r\n    const [dataSuma1, setdataSuma1] = useState(0);\r\n    const [locationData, setLocationData] = useState(location.data);\r\n    const history = useHistory();\r\n    const jsonHonorarios = [\r\n        {\r\n            min: 0.01,\r\n            max: 10000.01,\r\n            amountAdd: 150.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 10000.00,\r\n            max: 50000.00,\r\n            amountAdd: 200.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 50000.00,\r\n            max: 100000.00,\r\n            amountAdd: 300.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 100000.01,\r\n            max: 250000.00,\r\n            amountAdd: 350.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 250000.01,\r\n            max: 1000000.01,\r\n            amountAdd: 500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 1000000.01,\r\n            max: 2000000.00,\r\n            amountAdd: 750.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 2000000.01,\r\n            max: 3000000.00,\r\n            amountAdd: 1000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 3000000.01,\r\n            max: 4000000.00,\r\n            amountAdd: 1500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 4000000.01,\r\n            max: 5000000.00,\r\n            amountAdd: 2000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 5000000.01,\r\n            max: 6000000.00,\r\n            amountAdd: 2500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 6000000.01,\r\n            max: 7000000.00,\r\n            amountAdd: 3000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 7000000.01,\r\n            max: 8000000.00,\r\n            amountAdd: 3500.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 8000000.01,\r\n            max: 9000000.00,\r\n            amountAdd: 4000.00,\r\n            porcent: 7\r\n        },\r\n        {\r\n            min: 9000000.01,\r\n            max: 10000000.00,\r\n            amountAdd: 4500.00,\r\n            porcent: 7\r\n        }\r\n    ]\r\n    React.useEffect(() => {\r\n        let dataSession;\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                history.push(url.URL_DASHBOARD);\r\n            } else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n                dataSession = location.data;\r\n            }\r\n        } else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n        if (props.activeTab == 5) {\r\n            setIsActiveLoading(true)\r\n            setdatosJsonCheck([])\r\n            loadData(dataSession);\r\n        }\r\n\r\n    }, [props.activeTab == 5]);\r\n    async function loadData(dataSession) {\r\n        await apiServiceBackend.getDocumentationJson(dataSession.transactionId).then(async resp => {\r\n            if (resp.legalDocResults.find(x => x.typeDocument == \"honorarios\")) {\r\n                let dato = Object.entries(resp.legalDocResults.find(x => x.typeDocument == \"honorarios\")?.dataJson).map(object => object[1]);\r\n                settipo(\"base\")\r\n                setdatosJsonCheck(dato)\r\n                cargarData(dato)\r\n                setTimeout(() => {\r\n                    setIsActiveLoading(false)\r\n                    let total = 0;\r\n                    for (let i = 0; i < dato.length; i++) {\r\n                        if (dato[i].proposalTypeName2) {\r\n                            total += parseFloat(dato[i].proposalTypeName2 == \"0\" ? dato[i].totalSuma : dato[i].proposalTypeName2 == \"1\" ? dato[i].adendaH : dato[i].proposalTypeName2 == \"2\" ? dato[i].adendaF : dato[i].totalSuma);\r\n                            document.getElementById(\"amount\" + i).innerHTML = currencyData.format(parseFloat(dato[i].proposalTypeName2 == \"0\" ? dato[i].totalSuma : dato[i].proposalTypeName2 == \"1\" ? dato[i].adendaH : dato[i].proposalTypeName2 == \"2\" ? dato[i].adendaF : dato[i].totalSuma).toFixed(2))\r\n                        }\r\n                    }\r\n                    document.getElementById(\"totalFinal\").innerHTML = \"$\" + currencyData.format(parseFloat(total).toFixed(2));\r\n                }, 2000);\r\n            } else {\r\n                settipo(\"local\")\r\n                setIsActiveLoading(false)\r\n                initializeData(dataSession)\r\n            }\r\n        }).catch(err => {\r\n            setIsActiveLoading(false)\r\n        })\r\n    }\r\n    async function initializeData(dataSession) {\r\n        await apiServiceBackend.consultGeneralDataPropCred(dataSession?.transactionId ?? dataSession?.transactionId ?? 0)\r\n            .then(async (data) => {\r\n                let requestId = data[0]?.requestId;\r\n                await apiServiceBackend.retrieveProposalType()\r\n                    .then(async (propuesta) => {\r\n                        await apiServiceBackend.retrieveFacilityType()\r\n                            .then(async (facilidad) => {\r\n                                await apiServiceBackend.consultarFacilidades(requestId).then(async resp => {\r\n                                    let jsonSet = [];\r\n                                    let jsonCheck = [];\r\n                                    let totales = 0\r\n                                    let totales2 = 0\r\n                                    for (let i = 0; i < resp.length; i++) {\r\n                                        let jsonAdd = jsonHonorarios.filter(x => resp[i].amount >= x.min && resp[i].amount <= x.max);\r\n                                        // totales.totalMonto = Number(parseFloat(totales.totalMonto)) + Number(resp[i].amount);\r\n                                        totales = Number(parseFloat(totales)) + Number(parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * jsonAdd[0]?.amountAdd)).toFixed(2));\r\n                                        totales2 = Number(parseFloat(totales2)) + Number(parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * jsonAdd[0]?.amountAdd)).toFixed(2));\r\n                                        jsonSet.push({\r\n                                            amount: Number(resp[i].amount),\r\n                                            facilityTypeId: resp[i].facilityTypeId,\r\n                                            facilityTypeName: facilidad.find(x => x.id === resp[i].facilityTypeId)?.description,\r\n                                            proposalTypeId: resp[i].proposalTypeId,\r\n                                            proposalTypeName: propuesta.find(x => x.id === resp[i].proposalTypeId)?.description,\r\n                                            proposalTypeName2: propuesta.find(x => x.id === resp[i].proposalTypeId)?.description,\r\n                                            debtor: resp[i].debtor,\r\n                                            amountAdd: jsonAdd[0]?.amountAdd ?? 0,\r\n                                            max: jsonAdd[0]?.max ?? 0,\r\n                                            min: jsonAdd[0]?.min ?? 0,\r\n                                            CAH: false,\r\n                                            CAF: false,\r\n                                            CAFval: 0,\r\n                                            CAHval: 0,\r\n                                            totalSuma: Number(parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * jsonAdd[0]?.amountAdd)).toFixed(2)),\r\n                                            adendaH: Number(parseFloat(150 + ((jsonAdd[0]?.porcent / 100) * 150)).toFixed(2)),\r\n                                            adendaF: Number(parseFloat(200 + ((jsonAdd[0]?.porcent / 100) * 200)).toFixed(2)),\r\n                                            min: jsonAdd[0]?.min ?? 0,\r\n                                            porcent: jsonAdd[0]?.porcent ?? 0,\r\n                                            totalAmount: parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * jsonAdd[0]?.amountAdd)).toFixed(2),\r\n                                        })\r\n                                        datosJsonCheck.push({\r\n                                            amount: Number(resp[i].amount),\r\n                                            facilityTypeId: resp[i].facilityTypeId,\r\n                                            facilityTypeName: facilidad.find(x => x.id === resp[i].facilityTypeId)?.description,\r\n                                            proposalTypeId: resp[i].proposalTypeId,\r\n                                            proposalTypeName: propuesta.find(x => x.id === resp[i].proposalTypeId)?.description,\r\n                                            proposalTypeName2: propuesta.find(x => x.id === resp[i].proposalTypeId)?.description,\r\n                                            debtor: resp[i].debtor,\r\n                                            amountAdd: jsonAdd[0]?.amountAdd ?? 0,\r\n                                            max: jsonAdd[0]?.max ?? 0,\r\n                                            min: jsonAdd[0]?.min ?? 0,\r\n                                            CAH: false,\r\n                                            CAF: false,\r\n                                            CAFval: 0,\r\n                                            CAHval: 0,\r\n                                            totalSuma: Number(parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * jsonAdd[0]?.amountAdd)).toFixed(2)),\r\n                                            adendaH: Number(parseFloat(150 + ((jsonAdd[0]?.porcent / 100) * 150)).toFixed(2)),\r\n                                            adendaF: Number(parseFloat(200 + ((jsonAdd[0]?.porcent / 100) * 200)).toFixed(2)),\r\n                                            min: jsonAdd[0]?.min ?? 0,\r\n                                            porcent: jsonAdd[0]?.porcent ?? 0,\r\n                                            totalAmount: parseFloat(jsonAdd[0]?.amountAdd + ((jsonAdd[0]?.porcent / 100) * jsonAdd[0]?.amountAdd)).toFixed(2),\r\n                                        })\r\n                                    }\r\n                                    if (document.getElementById(\"totalFinal\")) {\r\n                                        document.getElementById(\"totalFinal\").innerHTML = \"$\" + currencyData.format(parseFloat(totales).toFixed(2));\r\n                                    }\r\n                                    setdatosJsonCheck(datosJsonCheck)\r\n                                    setdataSuma1(totales2)\r\n                                    setdataSuma(totales)\r\n                                    cargarData(jsonSet)\r\n\r\n                                })\r\n                            });\r\n                    });\r\n            });\r\n    }\r\n    function cargarData(jsonSet) {\r\n        setfacilidadesData(jsonSet.map((data, index) => (data.facilityTypeName ? <>\r\n            <tr key={uniq_key()}>\r\n                <td>{data.facilityTypeName}</td>\r\n                <td>{data.proposalTypeName}</td>\r\n                <td style={{ textAlign: \"center\" }}>${currencyData.formatTable(data.amount ?? 0)}</td>\r\n                <td>\r\n                    {data.proposalTypeName2 == \"NUEVO\" ? \"NUEVO\" :\r\n                        <select onClick={(e) => {\r\n                            if (e.target.value == \"0\") {\r\n                                datosJsonCheck[index].proposalTypeName2 = \"0\"\r\n                                document.getElementById(\"amount\" + index).innerHTML = \"$\" + currencyData.format(parseFloat(data?.totalSuma).toFixed(2) ?? 0);\r\n                            }\r\n                            if (e.target.value == \"1\") {\r\n                                datosJsonCheck[index].proposalTypeName2 = \"1\"\r\n                                document.getElementById(\"amount\" + index).innerHTML = \"$\" + currencyData.format(parseFloat(data?.adendaH).toFixed(2) ?? 0);\r\n                            }\r\n                            if (e.target.value == \"2\") {\r\n                                datosJsonCheck[index].proposalTypeName2 = \"2\"\r\n                                document.getElementById(\"amount\" + index).innerHTML = \"$\" + currencyData.format(parseFloat(data?.adendaF).toFixed(2) ?? 0);\r\n                            }\r\n                            let total = 0;\r\n                            for (let i = 0; i < jsonSet.length; i++) {\r\n                                total += parseFloat(document.getElementById(\"amount\" + i).innerHTML.replace(\"$\", \"\"));\r\n                            }\r\n                            setdatosJsonCheck(datosJsonCheck);\r\n                            document.getElementById(\"totalFinal\").innerHTML = \"$\" + currencyData.format(parseFloat(total).toFixed(2));\r\n                        }} className=\"form-control\" defaultValue={data.proposalTypeName2}>\r\n                            <option value=\"0\">Nueva</option>\r\n                            <option value=\"1\">Adenda hipoteca</option>\r\n                            <option value=\"2\">Adenda fideicomiso</option>\r\n                        </select>}\r\n                </td>\r\n                <td style={{ textAlign: \"right\" }}><b id={\"amount\" + index}>${currencyData.format(parseFloat(data.proposalTypeName == \"0\" ? data.totalSuma : data.proposalTypeName == \"1\" ? data.adendaH : data.proposalTypeName == \"2\" ? data.adendaF : data.totalSuma).toFixed(2))}</b></td>\r\n            </tr>\r\n        </> : null))\r\n        )\r\n\r\n    }\r\n    async function saveData() {\r\n        setIsActiveLoading(true)\r\n        let indice = datosJsonCheck.length\r\n        datosJsonCheck[indice + 1] = {\r\n            transactId: locationData.transactionId, totalValue: document.getElementById(\"totalFinal\").innerHTML.replace(\"$\", \"\")\r\n        }\r\n        setdatosJsonCheck(datosJsonCheck)\r\n        await apiServiceBackend.getDocumentationJson(locationData.transactionId).then(async resp => {\r\n            if (resp.legalDocResults.find(x => x.typeDocument == \"honorarios\")) {\r\n                // update\r\n                await apiServiceBackend.updateDocumentationJson(locationData.transactionId, 2, \"honorarios\", datosJsonCheck).then(async resp => {\r\n                    console.log(resp);\r\n                    setIsActiveLoading(false)\r\n                }).catch(err => {\r\n                    setIsActiveLoading(false)\r\n                })\r\n            } else {\r\n                await apiServiceBackend.newDocumentationJson(locationData.transactionId, 2, \"honorarios\", datosJsonCheck).then(async resp => {\r\n                    console.log(resp);\r\n                    setIsActiveLoading(false)\r\n                }).catch(err => {\r\n                    setIsActiveLoading(false)\r\n                })\r\n            }\r\n        })\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <LoadingOverlay active={isActiveLoading} spinner text={t(\"Processinginformation\")}>\r\n                <AvForm>\r\n                    <Row>\r\n                        <Col md=\"12\">\r\n                            <div className=\"table-responsive styled-table-div\">\r\n                                <Table className=\"table table-striped table-hover styled-table table\" border=\"0\">\r\n                                    <thead>\r\n                                        <tr >\r\n                                            <th>{t(\"Facility Type\")}</th>\r\n                                            <th style={{ textAlign: \"center\" }}>{t(\"Proposal\")}</th>\r\n                                            <th style={{ textAlign: \"center\" }}>{t(\"Amount\")} Facilidad</th>\r\n                                            <th style={{ textAlign: \"center\" }}>Tipo de honorario</th>\r\n                                            <th style={{ textAlign: \"center\" }}>{t(\"Monto de honorario\")}</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {facilidadesData}\r\n\r\n                                        <tr style={estiloTotales}>\r\n                                            <td></td>\r\n                                            <td></td>\r\n                                            <td></td>\r\n                                            <td><b>Total de honorarios</b></td>\r\n                                            <td style={{ textAlign: \"right\" }}><b id=\"totalFinal\">$0.00</b></td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </Table>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col md=\"12\" style={{ textAlign: \"right\" }}>\r\n                            <Button className=\"btn \" color=\"success\" type=\"button\" onClick={() => { saveData() }}><i className=\"mdi mdi-content-save mdi-12px\"></i>{\" \"}{t(\"Save\")}</Button>\r\n                        </Col>\r\n                    </Row>\r\n                </AvForm>\r\n            </LoadingOverlay>\r\n        </React.Fragment>\r\n    );\r\n}\r\nexport default Honorarios;\r\n"]},"metadata":{},"sourceType":"module"}