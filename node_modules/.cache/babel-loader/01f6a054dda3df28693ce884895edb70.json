{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useRef,useEffect}from\"react\";import{Link}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Table,Card,CardBody,Button,Row,Col,Label,Alert}from\"reactstrap\";import{AvForm,AvGroup,AvField,AvInput}from\"availity-reactstrap-validation\";import listaFacilidades from\"../../../../api/bpm/propuestacredito/facilidades\";import{Facilidad}from\"../../../../models/PropuestaCredito\";import{BackendServices,CoreServices}from\"../../../../services\";import Select from\"react-select\";import ComisionSeccion from\"./Comision\";import DisbursementSection from\"./DisturbementSeccion\";import WarrantsSection from\"./WarrantsSection\";import SuretiesSection from\"./SuretiesSection\";import Switch from\"react-switch\";import{useLocation,useHistory}from'react-router-dom';import*as url from\"../../../../helpers/url_helper\";import Currency from\"../../../../helpers/currency\";import{useTranslation}from\"react-i18next/\";import FacilityHistory from\"../../../../components/Common/FacilityHistory\";import LoadingOverlay from\"react-loading-overlay\";import AttachmentFileCore from\"../../../../components/Common/AttachmentFileCore\";import{AttachmentFileInputModel}from\"../../../../models/Common/AttachmentFileInputModel\";import*as OPTs from\"../../../../helpers/options_helper\";import TreasuryCurve from\"./treasuryCurve.model\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Offsymbol=function Offsymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"No\"]});};var OnSymbol=function OnSymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"Si\"]});};var ListaFacilidad=/*#__PURE__*/React.forwardRef(function(props,ref){var _dataSet$amount,_document$getElementB5,_dataSet$startingAmou,_dataSet$balance,_dataSet$proposalRate,_dataSet$noSubsidyRat,_parseFloat,_dataSet$creditRiskOp;var location=useLocation();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState({\"requestId\":\"\",\"cr\":\"\",\"amount\":0,\"debtor\":\"\",\"clientTypeId\":0,\"balance\":0,\"proposalTypeId\":\"\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":true,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\"\",\"environmentRiskCategory\":0,\"covenant\":\"\",\"environmentRiskOpinion\":\"\",\"finantialCovenant\":\"\",\"legalDocumentation\":\"\",\"creditRiskOpinion\":\"\",\"provision\":\"\",\"numero\":\"\",\"otherConditions\":\"\",\"facilityId\":0}),_useState2=_slicedToArray(_useState,2),dataSet=_useState2[0],setdataSet=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),datosUsuario=_useState4[0],setdatosUsuario=_useState4[1];var _useState5=useState({tipoPropuestaRequerido:false,subPropuestaRequerido:false,tipoFacilidadRequerido:false}),_useState6=_slicedToArray(_useState5,2),dataValidation=_useState6[0],setdataValidation=_useState6[1];var _useState7=useState(location.data),_useState8=_slicedToArray(_useState7,2),context=_useState8[0],setcontext=_useState8[1];var propostalSectionRef=useRef();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),formValid=_useState10[0],setFormValid=_useState10[1];var _useState11=useState(location.data),_useState12=_slicedToArray(_useState11,2),dataLocation=_useState12[0],setData=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),commissions=_useState14[0],setCommissions=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),disbursementTerms=_useState16[0],setDisbursementTerms=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),paymentPrograms=_useState18[0],setPaymentPrograms=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),disbursementMethods=_useState20[0],setDisbursementMethods=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),warrants=_useState22[0],setWarrants=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),sureties=_useState24[0],setSureties=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),garantiaET=_useState26[0],setgarantiaET=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),ViewSeccion=_useState28[0],setViewSeccion=_useState28[1];var backendServices=new BackendServices();// Variables para alertas\nvar _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),successSave_dlg=_useState30[0],setsuccessSave_dlg=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),error_dlg=_useState32[0],seterror_dlg=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),error_msg=_useState34[0],seterror_msg=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),info_dlg=_useState36[0],setinfo_dlg=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),info_msg=_useState38[0],setinfo_msg=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),dynamic_title=_useState40[0],setdynamic_title=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),confirm_alert=_useState42[0],setconfirm_alert=_useState42[1];var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),confirm_alertDelete=_useState44[0],setconfirm_alertDelete=_useState44[1];var _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),success_dlg=_useState46[0],setsuccess_dlg=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),applyEscrow=_useState48[0],setapplyEscrow=_useState48[1];var _useState49=useState(false),_useState50=_slicedToArray(_useState49,2),isActiveLoading=_useState50[0],setIsActiveLoading=_useState50[1];var history=useHistory();var currencyData=new Currency();var _useState51=useState(null),_useState52=_slicedToArray(_useState51,2),locationData=_useState52[0],setLocationData=_useState52[1];var _useState53=useState(false),_useState54=_slicedToArray(_useState53,2),checkSubProp=_useState54[0],setcheckSubProp=_useState54[1];var _useState55=useState(false),_useState56=_slicedToArray(_useState55,2),campoTasa=_useState56[0],setcampoTasa=_useState56[1];var _useState57=useState(false),_useState58=_slicedToArray(_useState57,2),campoTasa2=_useState58[0],setcampoTasa2=_useState58[1];var _useState59=useState(false),_useState60=_slicedToArray(_useState59,2),campoTasa3=_useState60[0],setcampoTasa3=_useState60[1];var _useState61=useState(false),_useState62=_slicedToArray(_useState61,2),campoTasa4=_useState62[0],setcampoTasa4=_useState62[1];var _useState63=useState(0),_useState64=_slicedToArray(_useState63,2),PropotalRate=_useState64[0],setPropotalRate=_useState64[1];var _useState65=useState(0),_useState66=_slicedToArray(_useState65,2),TotalPropotalRate=_useState66[0],setTotalPropotalRate=_useState66[1];var _useState67=useState(undefined),_useState68=_slicedToArray(_useState67,2),historyDetails=_useState68[0],setHistoryDetails=_useState68[1];var termOptions=[{label:\"\".concat(t(\"ShortTerm\")),value:\"CP\"},{label:\"\".concat(t(\"LongTerm\")),value:\"LP\"}];var _useState69=useState(null),_useState70=_slicedToArray(_useState69,2),term=_useState70[0],setTerm=_useState70[1];var _useState71=useState(false),_useState72=_slicedToArray(_useState71,2),isActiveLoadingFacilities=_useState72[0],setIsActiveLoadingFacilities=_useState72[1];var _useState73=useState(),_useState74=_slicedToArray(_useState73,2),treasuryCurveClass=_useState74[0],setTreasuryCurveClass=_useState74[1];var _useState75=useState(false),_useState76=_slicedToArray(_useState75,2),treasuryCurveMessage=_useState76[0],setTreasuryCurveMessage=_useState76[1];React.useImperativeHandle(ref,function(){return{submit:function submit(){var validate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var form=document.getElementById('formNewFacility');if(validate){if(formValid){form.requestSubmit();return true;}return false;}else{form.requestSubmit();return true;}},getFormValidation:function getFormValidation(){return formValid;}};});// services\nuseEffect(function(){setTerm(undefined);var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}// Read Api Service  ata\n// consultarDeudorPrincipal\nbackendServices.consultPrincipalDebtor(dataSession.transactionId).then(function(resp){dataSet.numero=resp.clientDocId;setdataSet(dataSet);setdatosUsuario(resp);});backendServices.consultEnvironmentalAspectsIGR(dataSession.transactionId).then(function(dataAsp){var _dataAsp$environmenta,_dataAsp$environmenta2;setgarantiaET((_dataAsp$environmenta=dataAsp===null||dataAsp===void 0?void 0:(_dataAsp$environmenta2=dataAsp.environmentalAspectsDTO)===null||_dataAsp$environmenta2===void 0?void 0:_dataAsp$environmenta2.riskClassificationConfirmation)!==null&&_dataAsp$environmenta!==void 0?_dataAsp$environmenta:\"\");});},[]);function handleSubmitFacilidad(_x,_x2,_x3){return _handleSubmitFacilidad.apply(this,arguments);}function _handleSubmitFacilidad(){_handleSubmitFacilidad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,errors,values){var _document,_document$getElementB6,_values$amount,_values$balance,_values$proposalRate,_values$noSubsidyRate,_values$effectiveRate,_values$ltv,_values$startingAmoun;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!propuestaSet||!tipoFacilidadSet)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(!(+((_document=document)===null||_document===void 0?void 0:(_document$getElementB6=_document.getElementById(\"amount\"))===null||_document$getElementB6===void 0?void 0:_document$getElementB6.value)<0)){_context.next=4;break;}return _context.abrupt(\"return\");case 4:if(!campoTasa){_context.next=6;break;}return _context.abrupt(\"return\");case 6:if(!campoTasa2){_context.next=8;break;}return _context.abrupt(\"return\");case 8:if(!campoTasa3){_context.next=10;break;}return _context.abrupt(\"return\");case 10:// if (campoTasa4) {\n//   return;\n// }\nevent.preventDefault();if(!(errors.length>0)){_context.next=13;break;}return _context.abrupt(\"return\");case 13:setIsActiveLoading(true);console.log(values===null||values===void 0?void 0:values.amount);values.amount=Number(currencyData.getRealValue((_values$amount=values===null||values===void 0?void 0:values.amount)!==null&&_values$amount!==void 0?_values$amount:0));values.clientTypeId=Number(1);values.balance=Number(currencyData.getRealValue((_values$balance=values===null||values===void 0?void 0:values.balance)!==null&&_values$balance!==void 0?_values$balance:0));values.proposalRate=Number(currencyData.getRealPercent((_values$proposalRate=values===null||values===void 0?void 0:values.proposalRate)!==null&&_values$proposalRate!==void 0?_values$proposalRate:0));values.noSubsidyRate=Number(currencyData.getRealPercent((_values$noSubsidyRate=values===null||values===void 0?void 0:values.noSubsidyRate)!==null&&_values$noSubsidyRate!==void 0?_values$noSubsidyRate:0));values.effectiveRate=Number(currencyData.getRealPercent((_values$effectiveRate=values===null||values===void 0?void 0:values.effectiveRate)!==null&&_values$effectiveRate!==void 0?_values$effectiveRate:0));values.feci=values.feci==\"true\"?true:false;values.termDays=values.termDays===''?0:values.termDays;values.ltv=Number(currencyData.getRealPercent((_values$ltv=values===null||values===void 0?void 0:values.ltv)!==null&&_values$ltv!==void 0?_values$ltv:0));values.environmentRiskCategory=values.environmentRiskCategory;values.proposalTypeId=tipoPropuestaSelect==undefined?\" \":tipoPropuestaSelect.value;values.proposalTypeName=subPropuestaSelect==undefined?\" \":subPropuestaSelect.value;values.facilityTypeId=tipoFacilidadSelect==undefined?\" \":tipoFacilidadSelect.value;values.termType=terminosSelect==undefined?\" \":terminosSelect.value;values.facilityId=dataSet.facilityId;values.requestId=dataGlobalReq!==null&&dataGlobalReq!==void 0?dataGlobalReq:0;values.applyEscrow=applyEscrow!==null&&applyEscrow!==void 0?applyEscrow:false;values.startingAmount=currencyData.getRealValue((_values$startingAmoun=values===null||values===void 0?void 0:values.startingAmount)!==null&&_values$startingAmoun!==void 0?_values$startingAmoun:0);values.term=!term?\" \":term.value;props.setViewAutonomy(false);saveNewFacility(values).then(function(result){// props.onSave(values);\n// props.onDismiss();\nprops.setViewAutonomy(true);}).catch(function(err){console.log(err);props.setViewAutonomy(true);});case 36:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmitFacilidad.apply(this,arguments);}function newFacility(){return _newFacility.apply(this,arguments);}function _newFacility(){_newFacility=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _modelTreasuryCurve$t;var data,modelTreasuryCurve,_args4=arguments;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=_args4.length>0&&_args4[0]!==undefined?_args4[0]:{\"facilityNumber\":\"0\",\"cr\":\"0\",\"amount\":0,\"debtor\":\"  \",\"clientTypeId\":1,\"customer\":{\"id\":\"469303-1-434018\"},\"balance\":0,\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":false,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\" \",\"environmentRiskCategory\":0,\"covenant\":\" \",\"environmentRiskOpinion\":\" \",\"finantialCovenant\":\" \",\"legalDocumentation\":\"  \",\"otherConditions\":\" \",\"creditRiskOpinion\":\" \",\"provision\":\" \",\"proposalTypeId\":\"\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"termType\":\"\",\"origin\":\"MVP\",\"applyEscrow\":false,facilityId:0,\"requestId\":dataGlobalReq!==null&&dataGlobalReq!==void 0?dataGlobalReq:0,startingAmount:0,t24:false,term:''};modelTreasuryCurve=new TreasuryCurve();_context4.next=4;return modelTreasuryCurve.initial();case 4:setTreasuryCurveClass(modelTreasuryCurve);setTreasuryCurveMessage(((_modelTreasuryCurve$t=modelTreasuryCurve.treasuryCurve)===null||_modelTreasuryCurve$t===void 0?void 0:_modelTreasuryCurve$t.length)===0);// nuevoFacilidadPropCred\nbackendServices.newFacilityPropCred(data).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(resp){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return backendServices.consultarFacilidades2(dataGlobalReq!==null&&dataGlobalReq!==void 0?dataGlobalReq:0).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resp2){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:resp2=resp2.find(function(facilities){return facilities.facilityId==Math.max.apply(Math,_toConsumableArray(resp2.map(function(arr){return arr.facilityId;})));});data.facilityId=resp;setViewSeccion(!ViewSeccion);setHistoryDetails(false);// setapplyEscrow(locationData)\n// setapplyEscrow(locationData)\nsetIsActiveLoading(true);_context2.next=7;return Promise.allSettled([backendServices.consultarFacilidades(dataGlobalReq!==null&&dataGlobalReq!==void 0?dataGlobalReq:0),backendServices.consultarDetalleOpinionRiesgoCredito(locationData.transactionId),backendServices.getEnvironmentalRiskInfo(locationData.transactionId)]).then(function(response){var _EnvironmentalRiskInf,_EnvironmentalRiskInf2,_data$proposalTypeId;var _response=_slicedToArray(response,3),Facilidades=_response[0].value,DetalleOpinionRiesgoCredito=_response[1].value,EnvironmentalRiskInfo=_response[2].value;data.covenant=(_EnvironmentalRiskInf=EnvironmentalRiskInfo===null||EnvironmentalRiskInfo===void 0?void 0:EnvironmentalRiskInfo.detail)!==null&&_EnvironmentalRiskInf!==void 0?_EnvironmentalRiskInf:\"\";data.environmentRiskOpinion=(_EnvironmentalRiskInf2=EnvironmentalRiskInfo===null||EnvironmentalRiskInfo===void 0?void 0:EnvironmentalRiskInfo.recommendations)!==null&&_EnvironmentalRiskInf2!==void 0?_EnvironmentalRiskInf2:\"\";data.opinionRiskCredit=DetalleOpinionRiesgoCredito.length>0?DetalleOpinionRiesgoCredito[0].opinion:\"\";data.facilityIdVisible=(Facilidades===null||Facilidades===void 0?void 0:Facilidades.filter(function($$){return $$.debtor!=\"  \";}).length)+1||1;data.facilityId=resp;console.log(data);setIsActiveLoading(false);setTerm(null);setpropuestaSet(null);settipoFacilidadSet(null);setcheckSubProp(false);setsubPropuestaSet(null);settipoPropuestaSelect((_data$proposalTypeId=data===null||data===void 0?void 0:data.proposalTypeId)!==null&&_data$proposalTypeId!==void 0?_data$proposalTypeId:undefined);setsubPropuestaSelect(undefined);settipoFacilidadSelect(undefined);setdataSet(data);cargarDataSelect(data);}).catch(function(err){setIsActiveLoading(false);console.log(err);dataSet.facilityId=resp;setdataSet(dataSet);setTerm(null);setpropuestaSet(null);settipoFacilidadSet(null);setcheckSubProp(false);setsubPropuestaSet(null);settipoPropuestaSelect(undefined);setsubPropuestaSelect(undefined);settipoFacilidadSelect(undefined);});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x7){return _ref3.apply(this,arguments);};}());case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x6){return _ref2.apply(this,arguments);};}());case 7:case\"end\":return _context4.stop();}}},_callee4);}));return _newFacility.apply(this,arguments);}function saveNewFacility(values){return new Promise(function(resolve,reject){var datos={\"requestId\":values.requestId,\"facilityId\":dataSet.facilityId,\"cr\":values.cr,\"amount\":values.amount,\"debtor\":deudoresListSelect.value,\"clientTypeId\":deudoresListSelect.value,\"balance\":values.balance,\"proposalTypeId\":values.proposalTypeId,\"proposalTypeName\":values.proposalTypeName,// \"facilityTypeId\": values.facilityTypeId,\n\"facilityTypeId\":values.facilityTypeId,\"purpose\":values.purpose,\"sublimits\":values.sublimits,\"proposalRate\":values.proposalRate,\"noSubsidyRate\":values.noSubsidyRate,\"effectiveRate\":values.effectiveRate,\"feci\":values.feci,\"termDays\":values.termDays,\"termDescription\":values.termDescription,\"ltv\":values.ltv,\"finantialConditions\":values.finantialConditions,\"environmentRiskCategory\":0,\"covenant\":values.covenant,\"environmentRiskOpinion\":values.environmentRiskOpinion,\"finantialCovenant\":values.finantialCovenant,\"legalDocumentation\":values.legalDocumentation,\"creditRiskOpinion\":values.creditRiskOpinion,\"otherConditions\":values.otherConditions,\"provision\":values.provision,\"applyEscrow\":values.applyEscrow,\"termType\":values.termType,\"startingAmount\":+values.startingAmount,\"term\":values.term,t24:false,\"origin\":\"MVP\"};console.log(datos);props.setLevelAutonomy(function(levelAutonomy){return levelAutonomy+ +datos.amount;});// actualizarFacilidadPropCred\nbackendServices.updateFacilityPropCred(datos).then(function(resp){console.log(\"🚀 ~ file: FacilidadesSeccion.js ~ line 399 ~ backendServices.updateFacilityPropCred ~ resp\",resp);if(resp!==null&&resp!==undefined){setViewSeccion(!ViewSeccion);setsuccessSave_dlg(true);}else{seterror_dlg(false);}cargarFacilidades(locationData);setIsActiveLoading(false);resetData();resolve();}).catch(function(err){console.log(err);seterror_dlg(false);setIsActiveLoading(false);resetData();resolve();});});}function handleNewCommission(newItem){var newCommissions=[].concat(_toConsumableArray(commissions),[newItem]);setCommissions(newCommissions);}function handleDeleteCommission(item){var itemIndex=commissions.indexOf(item);if(itemIndex===-1){return;}var newCommissions=_toConsumableArray(commissions);newCommissions.splice(itemIndex,1);setCommissions(newCommissions);}function handleNewDisbursementTerm(newItem){var newDisbursementTerms=[].concat(_toConsumableArray(disbursementTerms),[newItem]);setDisbursementTerms(newDisbursementTerms);}function handleDeleteDisbursementTerm(item){var itemIndex=disbursementTerms.indexOf(item);if(itemIndex===-1){return;}var newDisbursementTerms=_toConsumableArray(disbursementTerms);newDisbursementTerms.splice(itemIndex,1);setDisbursementTerms(newDisbursementTerms);}function handleNewPaymentProgram(newItem){var newPaymentPrograms=[].concat(_toConsumableArray(paymentPrograms),[newItem]);setPaymentPrograms(newPaymentPrograms);}function handleDeletePaymentProgram(item){var itemIndex=paymentPrograms.indexOf(item);if(itemIndex===-1){return;}var newPaymentPrograms=_toConsumableArray(paymentPrograms);newPaymentPrograms.splice(itemIndex,1);setPaymentPrograms(newPaymentPrograms);}function handleNewDisbursementMethod(newItem){var newDisbursementMethods=[].concat(_toConsumableArray(disbursementMethods),[newItem]);setDisbursementMethods(newDisbursementMethods);}function handleDeleteDisbursementMethod(item){var itemIndex=disbursementMethods.indexOf(item);if(itemIndex===-1){return;}var newDisbursementMethods=_toConsumableArray(disbursementMethods);newDisbursementMethods.splice(itemIndex,1);setDisbursementMethods(newDisbursementMethods);}function handleNewWarrant(newItem){var newWarrants=[].concat(_toConsumableArray(warrants),[newItem]);setWarrants(newWarrants);}function handleDeleteWarrant(item){var itemIndex=warrants.indexOf(item);if(itemIndex===-1){return;}var newWarrants=_toConsumableArray(warrants);newWarrants.splice(itemIndex,1);setWarrants(newWarrants);}function handleNewSurety(newItem){var newSureties=[].concat(_toConsumableArray(sureties),[newItem]);setSureties(newSureties);}function handleDeleteSurety(item){var itemIndex=sureties.indexOf(item);if(itemIndex===-1){return;}var newSureties=_toConsumableArray(sureties);newSureties.splice(itemIndex,1);setSureties(newSureties);}// FUNCIONES PARA PROPOSTALSECTION\nvar api=new BackendServices();var apiCoreServices=new CoreServices();var _useState77=useState({proposalTypeId:null,proposalTypeName:null,facilityTypeId:null}),_useState78=_slicedToArray(_useState77,2),dataReturn=_useState78[0],setdataReturn=_useState78[1];var _useState79=useState(null),_useState80=_slicedToArray(_useState79,2),tipoPropuesta=_useState80[0],settipoPropuesta=_useState80[1];var _useState81=useState(undefined),_useState82=_slicedToArray(_useState81,2),tipoPropuestaSelect=_useState82[0],settipoPropuestaSelect=_useState82[1];var _useState83=useState(null),_useState84=_slicedToArray(_useState83,2),propuestaSet=_useState84[0],setpropuestaSet=_useState84[1];var _useState85=useState(false),_useState86=_slicedToArray(_useState85,2),tipoPropuestaRequerido=_useState86[0],settipoPropuestaRequerido=_useState86[1];var _useState87=useState(null),_useState88=_slicedToArray(_useState87,2),subPropuesta=_useState88[0],setsubPropuesta=_useState88[1];var _useState89=useState(undefined),_useState90=_slicedToArray(_useState89,2),subPropuestaSelect=_useState90[0],setsubPropuestaSelect=_useState90[1];var _useState91=useState(null),_useState92=_slicedToArray(_useState91,2),subPropuestaSet=_useState92[0],setsubPropuestaSet=_useState92[1];var _useState93=useState(false),_useState94=_slicedToArray(_useState93,2),subPropuestaRequerido=_useState94[0],setsubPropuestaRequerido=_useState94[1];var _useState95=useState(null),_useState96=_slicedToArray(_useState95,2),tipoFacilidad=_useState96[0],settipoFacilidad=_useState96[1];var _useState97=useState(undefined),_useState98=_slicedToArray(_useState97,2),tipoFacilidadSelect=_useState98[0],settipoFacilidadSelect=_useState98[1];var _useState99=useState(undefined),_useState100=_slicedToArray(_useState99,2),deudoresListSelect=_useState100[0],setdeudoresListSelect=_useState100[1];var _useState101=useState(undefined),_useState102=_slicedToArray(_useState101,2),terminosSelect=_useState102[0],setterminosSelect=_useState102[1];var _useState103=useState(null),_useState104=_slicedToArray(_useState103,2),tipoFacilidadSet=_useState104[0],settipoFacilidadSet=_useState104[1];var _useState105=useState(null),_useState106=_slicedToArray(_useState105,2),deudoresList=_useState106[0],setdeudoresList=_useState106[1];var _useState107=useState(\"guardar\"),_useState108=_slicedToArray(_useState107,2),tipo=_useState108[0],settipo=_useState108[1];var _useState109=useState(null),_useState110=_slicedToArray(_useState109,2),dataRows=_useState110[0],setdataRows=_useState110[1];var _useState111=useState(null),_useState112=_slicedToArray(_useState111,2),dataEdit=_useState112[0],setdataEdit=_useState112[1];var _useState113=useState(false),_useState114=_slicedToArray(_useState113,2),campoRequeridoDeudores=_useState114[0],setcampoRequeridoDeudores=_useState114[1];var _useState115=useState(0),_useState116=_slicedToArray(_useState115,2),MontoFacilidad=_useState116[0],setMontoFacilidad=_useState116[1];var _useState117=useState(0),_useState118=_slicedToArray(_useState117,2),dataGlobalReq=_useState118[0],setdataGlobalReq=_useState118[1];var listaIdentificacion=props.identificationList;var _useState119=useState(false),_useState120=_slicedToArray(_useState119,2),tipoFacilidadRequerido=_useState120[0],settipoFacilidadRequerido=_useState120[1];var _useState121=useState(1),_useState122=_slicedToArray(_useState121,2),facilityNumber=_useState122[0],setfacilityNumber=_useState122[1];var typeTerms=[{label:t(\"Days\"),value:\"DÍAS\"},{label:t(\"Months\"),value:\"MESES\"},{label:t(\"Years\"),value:\"AÑOS\"}];var _useState123=useState(0),_useState124=_slicedToArray(_useState123,2),proposalRate=_useState124[0],setProposalRate=_useState124[1];var _useState125=useState(false),_useState126=_slicedToArray(_useState125,2),rateTreasuryCurve=_useState126[0],setRateTreasuryCurve=_useState126[1];var _useState127=useState({Description:\"\",Code:\"\"}),_useState128=_slicedToArray(_useState127,2),rateProposalTreasuryCurve=_useState128[0],setRateProposalTreasuryCurve=_useState128[1];React.useEffect(function(){setterminosSelect(typeTerms[0]);// Read Api Service data\n// initializeData();\n},[]);React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}if(props.activeTab==3){var _ref,_dataSession$transact,_dataSession,_dataSession2;var backendServicesAll=new BackendServices();backendServicesAll.consultGeneralDataPropCred((_ref=(_dataSession$transact=(_dataSession=dataSession)===null||_dataSession===void 0?void 0:_dataSession.transactionId)!==null&&_dataSession$transact!==void 0?_dataSession$transact:(_dataSession2=dataSession)===null||_dataSession2===void 0?void 0:_dataSession2.transactionId)!==null&&_ref!==void 0?_ref:0).then(function(data){var _data$2;console.log(\"🚀 ~ file: FacilidadesSeccion.js ~ line 576 ~ .then ~ data\",data);if(data!==undefined){var _data$;setdataGlobalReq((_data$=data[0])===null||_data$===void 0?void 0:_data$.requestId);}cargarFacilidades(dataSession,(_data$2=data[0])===null||_data$2===void 0?void 0:_data$2.requestId);initializeData(dataSession);});}// Read Api Service data\n},[props.activeTab==3]);function cargarFacilidades(dataSession){var requestId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:dataGlobalReq;setIsActiveLoadingFacilities(true);api.consultarDeudores(dataSession.transactionId).then(function(data2){if(data2!==null&&data2!==undefined){var jsonDeudores=[];for(var i=0;i<data2.length;i++){jsonDeudores.push({label:data2[i][\"typePerson\"]==2?data2[i][\"name\"]:data2[i][\"name\"]+\" \"+data2[i][\"name2\"]+\" \"+data2[i][\"lastName\"]+\" \"+data2[i][\"lastName2\"],value:data2[i][\"personId\"]});// jsonDeudores.push({ label: data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"], value: data2[i][\"personId\"] })\n}api.retrieveProposalType().then(function(propuesta){api.retrieveFacilityType().then(function(facilidad){api.consultarFacilidades(requestId).then(function(resp){var _resp;var acu=0;if(((_resp=resp)===null||_resp===void 0?void 0:_resp.filter(function(data){return data.debtor!=\"  \";}).length)>0){resp=currencyData.orderByJSON(resp,'facilityId','asc');setdataRows(resp.map(function(data,index){var _jsonDeudores$find,_facilidad$find,_propuesta$find,_data$amount,_data$proposalRate;acu++;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Facility\"),children:acu}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Debtor\"),children:(_jsonDeudores$find=jsonDeudores.find(function(x){return x.value===Number(data.debtor);}))===null||_jsonDeudores$find===void 0?void 0:_jsonDeudores$find.label}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Facility Type\"),children:(_facilidad$find=facilidad.find(function(x){return x.id===data.facilityTypeId;}))===null||_facilidad$find===void 0?void 0:_facilidad$find.description}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t(\"Proposal\"),children:(_propuesta$find=propuesta.find(function(x){return x.id===data.proposalTypeId;}))===null||_propuesta$find===void 0?void 0:_propuesta$find.description}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":t(\"Amount\"),children:[\"$\",currencyData.formatTable((_data$amount=data.amount)!==null&&_data$amount!==void 0?_data$amount:0)]}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":t(\"Amount\")+\" \"+t(\"Rate\"),children:[currencyData.formatTable((_data$proposalRate=data.proposalRate)!==null&&_data$proposalRate!==void 0?_data$proposalRate:0),\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":t(\"Actions\"),style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){update(data,index);},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){setdataSet(data);eliminarFacilidades();},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]},acu);}));setIsActiveLoadingFacilities(false);}else{setdataRows(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",style:{textAlign:'center'}})},1));setIsActiveLoadingFacilities(false);}}).catch(function(err){});});});}}).catch(function(error){console.error('api error: ',error);});}function update(_x4,_x5){return _update.apply(this,arguments);}function _update(){_update=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data,index){var _modelTreasuryCurve$t2,_data$proposalRate2,_data$termType;var modelTreasuryCurve;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:modelTreasuryCurve=new TreasuryCurve();_context5.next=3;return modelTreasuryCurve.initial();case 3:setTreasuryCurveClass(modelTreasuryCurve);setTreasuryCurveMessage(((_modelTreasuryCurve$t2=modelTreasuryCurve.treasuryCurve)===null||_modelTreasuryCurve$t2===void 0?void 0:_modelTreasuryCurve$t2.length)===0);data.facilityIdVisible=index+1;setdataSet(data);cargarDataSelect(data);settipo(\"editar\");setViewSeccion(true);changeRateProposal((_data$proposalRate2=data.proposalRate)!==null&&_data$proposalRate2!==void 0?_data$proposalRate2:0,(_data$termType=data.termType)!==null&&_data$termType!==void 0?_data$termType:'DÍAS',modelTreasuryCurve);dataReturn.termType=data.termType;setdataReturn(dataReturn);setPropotalRate(data.proposalRate);setTotalPropotalRate(+data.proposalRate-+data.noSubsidyRate);case 15:case\"end\":return _context5.stop();}}},_callee5);}));return _update.apply(this,arguments);}function eliminarFacilidades(){settipo(\"eliminar\");setconfirm_alertDelete(true);}React.useEffect(function(){// Read Api Service data\nsettipoPropuestaRequerido(dataValidation.tipoPropuestaRequerido);setsubPropuestaRequerido(dataValidation.subPropuestaRequerido);settipoFacilidadRequerido(dataValidation.tipoFacilidadRequerido);},[dataValidation]);function cargarDataSelect(data){var defaultVal=null;setapplyEscrow(data===null||data===void 0?void 0:data.applyEscrow);console.log(termOptions,data);try{if(termOptions.length>0&&data.term){defaultVal=termOptions.find(function(x){return x.value.toUpperCase()===data.term.toUpperCase();});if(defaultVal!==undefined){setTerm(defaultVal);}}if(tipoPropuesta.length>0&&data.proposalTypeId!==null){defaultVal=tipoPropuesta.find(function(x){return x.value.toUpperCase()===data.proposalTypeId.toUpperCase();});if(defaultVal!==undefined){settipoPropuestaSelect(defaultVal);setpropuestaSet(defaultVal);}}if(subPropuesta.length>0&&data.proposalTypeName!==null){defaultVal=subPropuesta.find(function(x){return x.value.toUpperCase()===data.proposalTypeName.toUpperCase();});if(defaultVal!==undefined){setsubPropuestaSelect(defaultVal);setsubPropuestaSet(defaultVal);}}if(tipoFacilidad.length>0&&data.facilityTypeId!==null){defaultVal=tipoFacilidad.find(function(x){return x.value.toUpperCase()===data.facilityTypeId.toUpperCase();});if(defaultVal!==undefined){settipoFacilidadSelect(defaultVal);settipoFacilidadSet(defaultVal);}}console.log(deudoresList);if(deudoresList.length>0&&data.debtor!==null){defaultVal=deudoresList.find(function(x){return x.value===data.debtor;});if(defaultVal!==undefined){setdeudoresListSelect(defaultVal);}}if(typeTerms.length>0&&data.termType){defaultVal=typeTerms.find(function(x){return x.value.toUpperCase()===data.termType.toUpperCase();});if(defaultVal!==undefined){setterminosSelect(defaultVal);}}}catch(err){console.log(console.error(err));}}React.useEffect(function(){cargarDataSelect(dataSet);// Read Api Service data\nsetMontoFacilidad(dataSet.amount);},[dataSet,ViewSeccion,subPropuesta]);var treasuryCurveCat0;function initializeData(dataLocation){// consultarDeudores\napi.consultarDeudores(dataLocation.transactionId).then(function(data){if(data!==null&&data!==undefined){var json=[];console.log(data);for(var i=0;i<data.length;i++){// json.push({ label: data[i][\"name\"] + \" \" + data[i][\"name2\"] + \" \" + data[i][\"lastName\"] + \" \" + data[i][\"lastName2\"], value: data[i][\"personId\"] })\njson.push({label:data[i][\"typePerson\"]==2?data[i][\"name\"]:data[i][\"name\"]+\" \"+data[i][\"name2\"]+\" \"+data[i][\"lastName\"]+\" \"+data[i][\"lastName2\"],value:data[i][\"personId\"]});}console.log(\"initializeData\",json);setdeudoresListSelect(json[0]);setdeudoresList(json);}}).catch(function(error){console.error('api error: ',error);});api.retrieveProposalType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}console.log(\"retrieveProposalType\",response);settipoPropuesta(json);}).catch(function(error){console.error('api error: ',error);});api.retrieveFacilityType().then(function(response){console.log(\"retrieveFacilityType\",response);if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){if(response[i][\"id\"]!==\"TDC\"){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}}settipoFacilidad(json);console.log(\"retrieveFacilityType\",response);}).catch(function(error){console.error('api error: ',error);});api.retrieveSubproposalType().then(function(response){if(response===null){return;}var json=[];for(var i=0;i<response.length;i++){json.push({label:response[i][\"description\"],value:response[i][\"id\"]});}console.log(\"retrieveSubproposalType\",response);setsubPropuesta(json);}).catch(function(error){console.error('api error: ',error);});}function soloNumeros(e,dato){var teclaPulsada=window.event?window.event.keyCode:e.which;var valor=document.getElementById(dato).value;if(teclaPulsada===45&&valor.indexOf(\"-\")===-1){document.getElementById(dato).value=\"-\"+valor;}if(teclaPulsada===13||teclaPulsada===46&&valor.indexOf(\".\")===-1){return true;}console.log(valor);return /\\d/.test(String.fromCharCode(teclaPulsada));}//   function handleChangeInputfrmSearch(e) {\n//     values[e.target.name] = e.target.value;\n// }\nfunction resetData(){var data={\"facilityNumber\":\"0\",\"cr\":\"0\",\"amount\":0,\"debtor\":\"  \",\"clientTypeId\":1,\"customer\":{\"id\":\"469303-1-434018\"},\"balance\":0,\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":false,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\" \",\"environmentRiskCategory\":0,\"covenant\":\" \",\"environmentRiskOpinion\":\" \",\"finantialCovenant\":\" \",\"legalDocumentation\":\"  \",\"otherConditions\":\" \",\"creditRiskOpinion\":\" \",\"provision\":\" \",\"proposalTypeId\":\"\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"termType\":\"\",\"applyEscrow\":false,facilityId:0,t24:false,\"requestId\":dataGlobalReq!==null&&dataGlobalReq!==void 0?dataGlobalReq:0,\"term\":\"\"};setdataSet(data);setTerm(null);setpropuestaSet(null);settipoFacilidadSet(null);setcheckSubProp(false);setsubPropuestaSet(null);settipoPropuestaSelect(undefined);setsubPropuestaSelect(undefined);settipoFacilidadSelect(undefined);setPropotalRate(0);setTotalPropotalRate(0);setRateProposalTreasuryCurve({Description:\"\",Code:\"\"});}function check(e){var tecla=document.all?e.keyCode:e.which;//Tecla de retroceso para borrar, siempre la permite\nif(tecla===45){e.preventDefault();return true;}return false;}function editFacilitiesT24(data){console.log(\"editFacilitiesT24\",data);setIsActiveLoadingFacilities(true);// AA19214M07G3\napi.consultGeneralDataPropCred(locationData===null||locationData===void 0?void 0:locationData.transactionId).then(function(resp2){if(resp2!=undefined&&data!==undefined){if(data.cr!==null&&data.cr!==undefined&&data.cr.length>0){apiCoreServices.getFacilityInfo(data.cr).then(function(resp){var _resp2$0$requestId,_resp2$;setIsActiveLoadingFacilities(false);console.log(\"Data facilities\",resp);var tmpdata={\"facilityNumber\":\"0\",\"cr\":\"0\",\"amount\":0,// \"debtor\": datosUsuario.personId,\n\"debtor\":\" \",\"clientTypeId\":1,\"customer\":{\"id\":\"469303-1-434018\"},\"balance\":data.balance,\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":false,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\" \",\"environmentRiskCategory\":0,\"covenant\":\" \",\"environmentRiskOpinion\":\" \",\"finantialCovenant\":\" \",\"legalDocumentation\":\"  \",\"otherConditions\":\" \",\"creditRiskOpinion\":\" \",\"provision\":\" \",\"proposalTypeId\":\"MEN\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"termType\":\"\",\"applyEscrow\":false,facilityId:0,\"requestId\":(_resp2$0$requestId=(_resp2$=resp2[0])===null||_resp2$===void 0?void 0:_resp2$.requestId)!==null&&_resp2$0$requestId!==void 0?_resp2$0$requestId:0,startingAmount:data.amount,term:'',origin:\"MVP\"};if(resp!=null||resp!=undefined){var _resp$IntRateData$Int,_resp$IntRateData,_resp$CreditAcctData$,_resp$CreditAcctData,_resp$CreditAcctData$2,_resp$CreditAcctData2,_resp$CreditAcctData3;//data.amount = resp?.AcctBal[1]?.CurAmt?.Amt ?? 0;\ntmpdata.proposalRate=(_resp$IntRateData$Int=resp===null||resp===void 0?void 0:(_resp$IntRateData=resp.IntRateData)===null||_resp$IntRateData===void 0?void 0:_resp$IntRateData.IntRate)!==null&&_resp$IntRateData$Int!==void 0?_resp$IntRateData$Int:0;tmpdata.feci=(_resp$CreditAcctData$=resp===null||resp===void 0?void 0:(_resp$CreditAcctData=resp.CreditAcctData)===null||_resp$CreditAcctData===void 0?void 0:_resp$CreditAcctData.FeciProperty)!==null&&_resp$CreditAcctData$!==void 0?_resp$CreditAcctData$:false;tmpdata.termDays=(_resp$CreditAcctData$2=resp===null||resp===void 0?void 0:(_resp$CreditAcctData2=resp.CreditAcctData)===null||_resp$CreditAcctData2===void 0?void 0:(_resp$CreditAcctData3=_resp$CreditAcctData2.Term)===null||_resp$CreditAcctData3===void 0?void 0:_resp$CreditAcctData3.ProposedTerm)!==null&&_resp$CreditAcctData$2!==void 0?_resp$CreditAcctData$2:\"0\";tmpdata.termDays=Number(tmpdata.termDays.length>1?tmpdata.termDays.substring(0,tmpdata.termDays.length-1):tmpdata.termDays);// creamos una nueva facilidad\nconsole.log(\"tmpdata\",tmpdata);newFacility(tmpdata);}else{setHistoryDetails(true);//newFacility(data)\n}}).catch(function(err){console.log(err);setIsActiveLoadingFacilities(false);});}else{var _resp2$0$requestId2,_resp2$2;var tmpdata={\"facilityNumber\":\"0\",\"cr\":\"0\",\"amount\":0,// \"debtor\": datosUsuario.personId,\n\"debtor\":\" \",\"clientTypeId\":1,\"customer\":{\"id\":\"469303-1-434018\"},\"balance\":data.balance,\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":false,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\" \",\"environmentRiskCategory\":0,\"covenant\":\" \",\"environmentRiskOpinion\":\" \",\"finantialCovenant\":\" \",\"legalDocumentation\":\"  \",\"otherConditions\":\" \",\"creditRiskOpinion\":\" \",\"provision\":\" \",\"proposalTypeId\":\"MEN\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"termType\":\"\",t24:false,origin:\"MVP\",\"applyEscrow\":false,facilityId:0,\"requestId\":(_resp2$0$requestId2=(_resp2$2=resp2[0])===null||_resp2$2===void 0?void 0:_resp2$2.requestId)!==null&&_resp2$0$requestId2!==void 0?_resp2$0$requestId2:0,startingAmount:data.amount,term:''};/*data.amount = resp?.AcctBal[1]?.CurAmt?.Amt ?? 0;\r\n              data.proposalRate = resp?.IntRateData?.IntRate ?? 0;\r\n              data.feci = resp?.CreditAcctData?.FeciProperty ?? false;\r\n              data.requestId = resp?.AcctKey?.AcctId ?? '';\r\n              data.termDays = resp?.CreditAcctData?.Term?.ProposedTerm ?? 0;*/ // creamos una nueva facilidad\nnewFacility(tmpdata);}}}).catch(function(err){console.log(err);setIsActiveLoadingFacilities(false);});}function changeRateProposal(proposalRate,termType){var _treasury$Description,_treasury$Code,_treasury$Description2,_document$getElementB,_document$getElementB2,_document$getElementB3,_document$getElementB4;var modelTreasuryCurve=arguments.length>2&&arguments[2]!==undefined?arguments[2]:treasuryCurveClass;var treasury=modelTreasuryCurve.showTreasuryCurve({proposalRate:proposalRate,termType:termType});rateProposalTreasuryCurve.Description=(_treasury$Description=treasury===null||treasury===void 0?void 0:treasury.Description)!==null&&_treasury$Description!==void 0?_treasury$Description:0;rateProposalTreasuryCurve.Code=(_treasury$Code=treasury===null||treasury===void 0?void 0:treasury.Code)!==null&&_treasury$Code!==void 0?_treasury$Code:0;setRateProposalTreasuryCurve(rateProposalTreasuryCurve);dataReturn.proposalRate=(_treasury$Description2=treasury===null||treasury===void 0?void 0:treasury.Description)!==null&&_treasury$Description2!==void 0?_treasury$Description2:0;setdataReturn(dataReturn);// setPropotalRate(treasury?.Description ?? 0)\nsetTotalPropotalRate(+currencyData.getRealPercent((_document$getElementB=(_document$getElementB2=document.getElementById('proposalRate'))===null||_document$getElementB2===void 0?void 0:_document$getElementB2.value)!==null&&_document$getElementB!==void 0?_document$getElementB:dataSet===null||dataSet===void 0?void 0:dataSet.noSubsidyRate)-+currencyData.getRealPercent((_document$getElementB3=(_document$getElementB4=document.getElementById('noSubsidyRate'))===null||_document$getElementB4===void 0?void 0:_document$getElementB4.value)!==null&&_document$getElementB3!==void 0?_document$getElementB3:dataSet===null||dataSet===void 0?void 0:dataSet.noSubsidyRate));}function test(x){dataSet.proposalRate=x;setdataSet(dataSet);setPropotalRate(x);}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(AvForm,{id:\"formFacilidades\",className:\"needs-validation\",onSubmit:handleSubmitFacilidad,children:[!ViewSeccion?/*#__PURE__*/_jsxs(React.Fragment,{children:[datosUsuario&&locationData&&dataGlobalReq!=0?/*#__PURE__*/_jsx(FacilityHistory,{setLevelAutonomy:props.setLevelAutonomy,requestId:dataGlobalReq,transactId:locationData.transactionId,editFacilitiesT24:editFacilitiesT24,mainDebtor:datosUsuario,partyId:datosUsuario.customerNumberT24,historyDetails:historyDetails}):null,/*#__PURE__*/_jsx(LoadingOverlay,{active:isActiveLoadingFacilities,spinner:true,text:t(\"WaitingPlease\"),children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-sub-title\",children:t(\"ActualFacilityList\")}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Col,{md:\"12\",style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Button,{className:\"btn\",color:\"success\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){newFacility();},title:t(\"Add\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lg fa-plus-circle\"}),\" \",\" \"]})}),/*#__PURE__*/_jsx(Col,{md:\"12\",className:\"table-responsive styled-table-div\",children:/*#__PURE__*/_jsxs(Table,{className:\"table table-striped table-hover styled-table table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Debtor\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"ProposalRisk\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Rate\")}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataRows})]})})]})]})})]}):null,ViewSeccion?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(LoadingOverlay,{active:isActiveLoading,spinner:true,text:t(\"WaitingPlease\"),children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Facility\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"General Data\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Label,{htmlFor:\"facilityNumber\",children:[t(\"Facility\"),\" \",t(\" \"),\" \",t(\"Number\")]}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"facilityNumber\",type:\"text\",validate:{number:{value:true,errorMessage:t(\"InvalidField\")}},value:dataSet.facilityIdVisible,id:\"facilityNumber\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"cr\",children:t(\"CR\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"cr\",value:dataSet.cr,type:\"text\",id:\"cr\"})]})}),/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"amount\",children:t(\"Amount\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"amount\",type:\"text\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},onChange:function onChange(e){setMontoFacilidad(e.target.value);},value:currencyData.format((_dataSet$amount=dataSet===null||dataSet===void 0?void 0:dataSet.amount)!==null&&_dataSet$amount!==void 0?_dataSet$amount:1),id:\"amount\"}),+((_document$getElementB5=document.getElementById(\"amount\"))===null||_document$getElementB5===void 0?void 0:_document$getElementB5.value)<0?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"The amount entered must be greater than or equal to $0\")}):null]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"8\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"Term Type\",children:t(\"Term Type\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setTerm(termOptions.find(function(x){return x.value===e.value;}));},options:termOptions,classNamePrefix:\"select2-selection\",placeholder:t(\"Select\"),value:term})]}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"Initial Amount\",children:t(\"Initial Amount\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"startingAmount\",value:currencyData.format((_dataSet$startingAmou=dataSet===null||dataSet===void 0?void 0:dataSet.startingAmount)!==null&&_dataSet$startingAmou!==void 0?_dataSet$startingAmou:0),pattern:\"^[0-9,.-]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},type:\"text\",id:\"startingAmount\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"8\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"amount\",children:t(\"Debtors\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setdeudoresListSelect(deudoresList.find(function(x){return x.value===e.value;}));},options:deudoresList,classNamePrefix:\"select2-selection\",placeholder:t(\"Select\"),value:deudoresListSelect}),campoRequeridoDeudores?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required Field\")}):null]}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"balance\",children:t(\"Balance\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"balance\",value:currencyData.format((_dataSet$balance=dataSet===null||dataSet===void 0?void 0:dataSet.balance)!==null&&_dataSet$balance!==void 0?_dataSet$balance:0),pattern:\"^[0-9,.-]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);},type:\"text\",id:\"balance\"})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"proposalType\",children:t(\"Proposal Type\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){var facilities=tipoPropuesta.find(function(x){return x.value===e.value;});settipoPropuestaSelect(facilities);if(facilities.value==='RES'||facilities.value==='REF'){setcheckSubProp(true);}else{setcheckSubProp(false);}setpropuestaSet(e.value);dataReturn.proposalTypeId=e.value;setdataReturn(dataReturn);},options:tipoPropuesta,placeholder:t(\"Select\"),value:tipoPropuestaSelect}),!propuestaSet?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"subproposalType\",children:t(\"SubProposal Type\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setsubPropuestaSelect(subPropuesta.find(function(x){return x.value===e.value;}));setsubPropuestaSet(e.value);dataReturn.proposalTypeName=e.value;setdataReturn(dataReturn);},options:subPropuesta,placeholder:t(\"Select\"),value:subPropuestaSelect})]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"facilityType\",children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){settipoFacilidadSelect(tipoFacilidad.find(function(x){return x.value===e.value;}));settipoFacilidadSet(e.value);dataReturn.facilityTypeId=e.value;setdataReturn(dataReturn);},options:tipoFacilidad,placeholder:t(\"Select\"),value:tipoFacilidadSelect}),!tipoFacilidadSet?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Required\")}):null]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"purpose\",children:t(\"Purpose\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"purpose\",id:\"purpose\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required\") }\n// }}\n,type:\"textarea\",value:dataSet.purpose,rows:\"4\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sublimits\",children:t(\"Sub Limits\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"sublimits\",id:\"sublimits\",value:dataSet.sublimits,type:\"textarea\",rows:\"4\"})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"proposalRate\",children:t(\"Proposed Interest Rate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"proposalRate\",type:\"text\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealPercent(e.target.value);test(x);e.target.value=currencyData.formatPercent(x,e);setTotalPropotalRate(x-+currencyData.getRealPercent(document.getElementById('noSubsidyRate').value));},onChange:function onChange(e){var x=currencyData.getRealPercent(e.target.value);parseFloat(x)>100?setcampoTasa(true):setcampoTasa(false);},id:\"proposalRate\",value:\"\".concat((_dataSet$proposalRate=dataSet===null||dataSet===void 0?void 0:dataSet.proposalRate)!==null&&_dataSet$proposalRate!==void 0?_dataSet$proposalRate:0,\"%\")}),campoTasa?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Thepercentageexceeds100%\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"noSubsidyRate\",children:t(\"Subsidy Rate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"noSubsidyRate\",type:\"text\",id:\"noSubsidyRate\",value:\"\".concat(currencyData.format((_dataSet$noSubsidyRat=dataSet===null||dataSet===void 0?void 0:dataSet.noSubsidyRate)!==null&&_dataSet$noSubsidyRat!==void 0?_dataSet$noSubsidyRat:0),\"%\"),onKeyUp:function onKeyUp(e){var x=currencyData.getRealPercent(e.target.value);e.target.value=currencyData.formatPercent(x,e);setTotalPropotalRate(PropotalRate-x);},onChange:function onChange(e){var x=currencyData.getRealPercent(e.target.value);parseFloat(x)>100?setcampoTasa2(true):setcampoTasa2(false);}}),campoTasa2?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Thepercentageexceeds100%\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"effectiveRate\",children:t(\"Total Rate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"effectiveRate\",value:\"\".concat(currencyData.format((_parseFloat=parseFloat(TotalPropotalRate.toFixed(2)))!==null&&_parseFloat!==void 0?_parseFloat:0),\"%\"),type:\"text\",id:\"effectiveRate\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealPercent(e.target.value);e.target.value=currencyData.formatPercent(x,e);},onChange:function onChange(e){var x=currencyData.getRealPercent(e.target.value);parseFloat(x)>100?setcampoTasa3(true):setcampoTasa3(false);}}),campoTasa3?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Thepercentageexceeds100%\")}):null]})}),/*#__PURE__*/_jsx(Col,{md:\"3\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"feci\",children:t(\"FECI\")}),/*#__PURE__*/_jsxs(AvField,{id:\"feci\",className:\"form-control\",name:\"feci\",type:\"select\",value:dataSet.feci?\"true\":\"false\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Si\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"No\"})]})]})})]})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(ComisionSeccion,{MontoFacilidad:MontoFacilidad,validation:dataValidation,dataSet:dataSet,items:commissions,onSaveItem:handleNewCommission,onDeleteItem:handleDeleteCommission})})}),/*#__PURE__*/_jsx(\"h5\",{children:t(\"Terms\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"termDays\",children:t(\"Quantity\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"termDays\",value:dataSet.termDays,onKeyUp:function onKeyUp(e){setProposalRate(e.target.value);test(+currencyData.getRealPercent(document.getElementById('proposalRate').value));changeRateProposal(e.target.value,dataSet.termType||'DÍAS');},type:\"text\",validate:{number:{value:true,errorMessage:t(\"InvalidField\")}},id:\"termDays\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"DaysMonthsYears\")}),/*#__PURE__*/_jsx(Select,{noOptionsMessage:function noOptionsMessage(){return\"\";},onChange:function onChange(e){setterminosSelect(typeTerms.find(function(x){return x.value===e.value;}));dataReturn.termType=e.value;setdataReturn(dataReturn);changeRateProposal(proposalRate,e.value);},options:typeTerms,placeholder:t(\"Select\"),value:terminosSelect})]})}),/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"termsDescription\",children:t(\"Terms Description\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"termDescription\",type:\"textarea\",id:\"termDescription\",value:dataSet.termDescription,rows:\"4\"})]})})]}),/*#__PURE__*/_jsx(DisbursementSection,{validation:dataValidation,dataSet:dataSet,disbursementTerms:disbursementTerms,onSaveDisbursementTerm:handleNewDisbursementTerm,onDeleteDisbursementTerm:handleDeleteDisbursementTerm,paymentPrograms:paymentPrograms,onSavePaymentProgram:handleNewPaymentProgram,onDeletePaymentProgram:handleDeletePaymentProgram,disbursementMethods:disbursementMethods,onSaveDisbursementMethod:handleNewDisbursementMethod,onDeleteDisbursementMethod:handleDeleteDisbursementMethod}),/*#__PURE__*/_jsx(WarrantsSection,{ViewSeccion:ViewSeccion,validation:dataValidation,dataSet:dataSet,warrants:warrants,onSaveItem:handleNewWarrant,onDeleteItem:handleDeleteWarrant}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsxs(Label,{htmlFor:\"relatedPart\",children:[t(\"LTV\"),\"(%)\"]}),/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"ltv\",value:\"\".concat(dataSet.ltv,\"%\"),type:\"text\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealPercent(e.target.value);e.target.value=currencyData.formatPercent(x,e);}// onChange={(e) => { let x = currencyData.getRealPercent(e.target.value); parseFloat(x) > 100 ? setcampoTasa4(true) : setcampoTasa4(false); }}\n,id:\"ltv\"}),campoTasa4?/*#__PURE__*/_jsx(\"p\",{className:\"message-error-parrafo\",children:t(\"Thepercentageexceeds100%\")}):null]})]}),/*#__PURE__*/_jsxs(Col,{md:\"4\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"relatedPart\",children:t(\"Escrow\")}),/*#__PURE__*/_jsx(AvGroup,{check:true,className:\"mb-3\",children:/*#__PURE__*/_jsx(Switch,{name:\"fd\",uncheckedIcon:/*#__PURE__*/_jsx(Offsymbol,{}),checkedIcon:/*#__PURE__*/_jsx(OnSymbol,{}),onColor:\"#007943\",id:\"check1\",className:\"form-label\",onChange:function onChange(){setapplyEscrow(!applyEscrow);},checked:applyEscrow})})]})]})})}),/*#__PURE__*/_jsx(SuretiesSection,{validation:dataValidation,dataSet:dataSet,sureties:sureties,onSaveItem:handleNewSurety,onDeleteItem:handleDeleteSurety}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"FinancialConditions\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"finantialConditions\",type:\"textarea\",value:dataSet.finantialConditions,id:\"finantialConditions\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"AmbientalRisk\")}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"category\",children:t(\"Category\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"environmentRiskCategory\",type:\"text\",value:garantiaET,id:\"environmentRiskCategory\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"covenant\",children:t(\"Covenant\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"covenant\",type:\"text\",value:dataSet.covenant,id:\"covenant\"})]})}),/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"opinion\",children:t(\"Opinion\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"environmentRiskOpinion\",type:\"textarea\",value:dataSet===null||dataSet===void 0?void 0:dataSet.environmentRiskOpinion,id:\"environmentRiskOpinion\",rows:\"4\"})]})})]})]})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"FinantialCovenant\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"finantialCovenant\",value:dataSet.finantialCovenant,type:\"textarea\",id:\"finantialCovenant\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Status of Legal Documentation\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"legalDocumentation\",value:dataSet.legalDocumentation,type:\"textarea\",id:\"legalDocumentation\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"OtherConditions\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"otherConditions\",value:dataSet.otherConditions,type:\"textarea\",id:\"otherConditions\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"CreditRisk\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"creditrisk\",children:t(\"Opinion\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"creditRiskOpinion\",type:\"textarea\",value:(_dataSet$creditRiskOp=dataSet===null||dataSet===void 0?void 0:dataSet.creditRiskOpinion)!==null&&_dataSet$creditRiskOp!==void 0?_dataSet$creditRiskOp:\"\",id:\"creditRiskOpinion\",rows:\"4\"})]})})})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Provision\")}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AvGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"provision\",value:dataSet.provision,type:\"textarea\",id:\"provision\",rows:\"4\"})})})})]})}),/*#__PURE__*/_jsx(Row,{className:\"my-2\",children:/*#__PURE__*/_jsxs(Col,{xl:\"12 text-end\",children:[/*#__PURE__*/_jsxs(Button,{color:\"danger\",onClick:function onClick(e){setViewSeccion(!ViewSeccion);cargarFacilidades(locationData);resetData();},style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary\",type:\"submit\",color:\"success\",style:{margin:'5px'},children:t(\"Save\")})]})})]})})}):null]}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);cargarFacilidades(locationData);},children:t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),confirmButtonText:t(\"Confirm\"),cancelButtonText:t(\"Cancel\"),onConfirm:function onConfirm(){seterror_dlg(false);},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:t(\"Yesdeleteit\"),cancelButtonText:t(\"Cancel\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){setViewSeccion(!ViewSeccion);},onCancel:function onCancel(){return setconfirm_alert(false);},children:t(\"Youwontbeabletorevertthis\")}):null,confirm_alertDelete?/*#__PURE__*/_jsx(SweetAlert,{title:t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:t(\"Yesdeleteit\"),cancelButtonText:t(\"Cancel\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){if(tipo==\"eliminar\"){var _dataSet$facilityId,_dataSet$requestId;props.setViewAutonomy(false);backendServices.deleteFacility((_dataSet$facilityId=dataSet===null||dataSet===void 0?void 0:dataSet.facilityId)!==null&&_dataSet$facilityId!==void 0?_dataSet$facilityId:\"\",(_dataSet$requestId=dataSet===null||dataSet===void 0?void 0:dataSet.requestId)!==null&&_dataSet$requestId!==void 0?_dataSet$requestId:\"\").then(function(resp){if(resp.statusCode==\"500\"){seterror_dlg(false);setconfirm_alertDelete(false);}else{setconfirm_alertDelete(false);resetData();setsuccessSave_dlg(true);// props.setLevelAutonomy(levelAutonomy => levelAutonomy - (+dataSet?.amount))\n// cargarFacilidades(locationData)\n}props.setViewAutonomy(true);}).catch(function(err){props.setViewAutonomy(true);});}},onCancel:function onCancel(){return setconfirm_alertDelete(false);},children:t(\"Youwontbeabletorevertthis\")}):null]});});ListaFacilidad.defaultProps={items:[],editMode:false};export default ListaFacilidad;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/FacilidadesSeccion.js"],"names":["React","useState","useContext","useRef","useEffect","Link","SweetAlert","Table","Card","CardBody","Button","Row","Col","Label","Alert","AvForm","AvGroup","AvField","AvInput","listaFacilidades","Facilidad","BackendServices","CoreServices","Select","ComisionSeccion","DisbursementSection","WarrantsSection","SuretiesSection","Switch","useLocation","useHistory","url","Currency","useTranslation","FacilityHistory","LoadingOverlay","AttachmentFileCore","AttachmentFileInputModel","OPTs","TreasuryCurve","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","ListaFacilidad","forwardRef","props","ref","location","t","i18n","dataSet","setdataSet","datosUsuario","setdatosUsuario","tipoPropuestaRequerido","subPropuestaRequerido","tipoFacilidadRequerido","dataValidation","setdataValidation","data","context","setcontext","propostalSectionRef","formValid","setFormValid","dataLocation","setData","commissions","setCommissions","disbursementTerms","setDisbursementTerms","paymentPrograms","setPaymentPrograms","disbursementMethods","setDisbursementMethods","warrants","setWarrants","sureties","setSureties","garantiaET","setgarantiaET","ViewSeccion","setViewSeccion","backendServices","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","info_dlg","setinfo_dlg","info_msg","setinfo_msg","dynamic_title","setdynamic_title","confirm_alert","setconfirm_alert","confirm_alertDelete","setconfirm_alertDelete","success_dlg","setsuccess_dlg","applyEscrow","setapplyEscrow","isActiveLoading","setIsActiveLoading","history","currencyData","locationData","setLocationData","checkSubProp","setcheckSubProp","campoTasa","setcampoTasa","campoTasa2","setcampoTasa2","campoTasa3","setcampoTasa3","campoTasa4","setcampoTasa4","PropotalRate","setPropotalRate","TotalPropotalRate","setTotalPropotalRate","undefined","historyDetails","setHistoryDetails","termOptions","label","value","term","setTerm","isActiveLoadingFacilities","setIsActiveLoadingFacilities","treasuryCurveClass","setTreasuryCurveClass","treasuryCurveMessage","setTreasuryCurveMessage","useImperativeHandle","submit","validate","form","document","getElementById","requestSubmit","getFormValidation","dataSession","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","consultPrincipalDebtor","then","resp","numero","clientDocId","consultEnvironmentalAspectsIGR","dataAsp","environmentalAspectsDTO","riskClassificationConfirmation","handleSubmitFacilidad","event","errors","values","propuestaSet","tipoFacilidadSet","preventDefault","console","log","amount","Number","getRealValue","clientTypeId","balance","proposalRate","getRealPercent","noSubsidyRate","effectiveRate","feci","termDays","ltv","environmentRiskCategory","proposalTypeId","tipoPropuestaSelect","proposalTypeName","subPropuestaSelect","facilityTypeId","tipoFacilidadSelect","termType","terminosSelect","facilityId","requestId","dataGlobalReq","startingAmount","setViewAutonomy","saveNewFacility","catch","err","newFacility","t24","modelTreasuryCurve","initial","treasuryCurve","newFacilityPropCred","consultarFacilidades2","resp2","find","facilities","Math","max","map","arr","Promise","allSettled","consultarFacilidades","consultarDetalleOpinionRiesgoCredito","getEnvironmentalRiskInfo","response","Facilidades","DetalleOpinionRiesgoCredito","EnvironmentalRiskInfo","covenant","detail","environmentRiskOpinion","recommendations","opinionRiskCredit","opinion","facilityIdVisible","filter","$$","debtor","setpropuestaSet","settipoFacilidadSet","setsubPropuestaSet","settipoPropuestaSelect","setsubPropuestaSelect","settipoFacilidadSelect","cargarDataSelect","resolve","reject","datos","cr","deudoresListSelect","purpose","sublimits","termDescription","finantialConditions","finantialCovenant","legalDocumentation","creditRiskOpinion","otherConditions","provision","setLevelAutonomy","levelAutonomy","updateFacilityPropCred","cargarFacilidades","resetData","handleNewCommission","newItem","newCommissions","handleDeleteCommission","item","itemIndex","indexOf","splice","handleNewDisbursementTerm","newDisbursementTerms","handleDeleteDisbursementTerm","handleNewPaymentProgram","newPaymentPrograms","handleDeletePaymentProgram","handleNewDisbursementMethod","newDisbursementMethods","handleDeleteDisbursementMethod","handleNewWarrant","newWarrants","handleDeleteWarrant","handleNewSurety","newSureties","handleDeleteSurety","api","apiCoreServices","dataReturn","setdataReturn","tipoPropuesta","settipoPropuesta","settipoPropuestaRequerido","subPropuesta","setsubPropuesta","subPropuestaSet","setsubPropuestaRequerido","tipoFacilidad","settipoFacilidad","setdeudoresListSelect","setterminosSelect","deudoresList","setdeudoresList","tipo","settipo","dataRows","setdataRows","dataEdit","setdataEdit","campoRequeridoDeudores","setcampoRequeridoDeudores","MontoFacilidad","setMontoFacilidad","setdataGlobalReq","listaIdentificacion","identificationList","settipoFacilidadRequerido","facilityNumber","setfacilityNumber","typeTerms","setProposalRate","rateTreasuryCurve","setRateTreasuryCurve","Description","Code","rateProposalTreasuryCurve","setRateProposalTreasuryCurve","activeTab","backendServicesAll","consultGeneralDataPropCred","initializeData","consultarDeudores","data2","jsonDeudores","i","retrieveProposalType","propuesta","retrieveFacilityType","facilidad","acu","orderByJSON","index","x","id","description","formatTable","textAlign","update","eliminarFacilidades","error","changeRateProposal","defaultVal","toUpperCase","treasuryCurveCat0","json","retrieveSubproposalType","soloNumeros","e","dato","teclaPulsada","window","keyCode","which","valor","test","String","fromCharCode","check","tecla","all","editFacilitiesT24","getFacilityInfo","tmpdata","origin","IntRateData","IntRate","CreditAcctData","FeciProperty","Term","ProposedTerm","substring","treasury","showTreasuryCurve","customerNumberT24","margin","number","errorMessage","target","format","formatPercent","parseFloat","toFixed","deleteFacility","statusCode","defaultProps","items","editMode"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useRef, useEffect } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from \"react-router-dom\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Label,\r\n  Alert\r\n} from \"reactstrap\"\r\nimport { AvForm, AvGroup, AvField, AvInput } from \"availity-reactstrap-validation\"\r\nimport listaFacilidades from \"../../../../api/bpm/propuestacredito/facilidades\";\r\nimport { Facilidad } from \"../../../../models/PropuestaCredito\";\r\nimport { BackendServices, CoreServices } from \"../../../../services\";\r\nimport Select from \"react-select\";\r\nimport ComisionSeccion from \"./Comision\";\r\nimport DisbursementSection from \"./DisturbementSeccion\";\r\nimport WarrantsSection from \"./WarrantsSection\";\r\nimport SuretiesSection from \"./SuretiesSection\";\r\nimport Switch from \"react-switch\";\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport * as url from \"../../../../helpers/url_helper\"\r\nimport Currency from \"../../../../helpers/currency\"\r\nimport { useTranslation } from \"react-i18next/\";\r\nimport FacilityHistory from \"../../../../components/Common/FacilityHistory\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport AttachmentFileCore from \"../../../../components/Common/AttachmentFileCore\";\r\nimport { AttachmentFileInputModel } from \"../../../../models/Common/AttachmentFileInputModel\";\r\nimport * as OPTs from \"../../../../helpers/options_helper\";\r\nimport TreasuryCurve from \"./treasuryCurve.model\";\r\n\r\nconst Offsymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      No\r\n    </div>\r\n  );\r\n};\r\nconst OnSymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      Si\r\n    </div>\r\n  );\r\n};\r\nconst ListaFacilidad = React.forwardRef((props, ref) => {\r\n  const location = useLocation()\r\n  const { t, i18n } = useTranslation();\r\n  const [dataSet, setdataSet] = useState({\r\n    \"requestId\": \"\",\r\n    \"cr\": \"\",\r\n    \"amount\": 0,\r\n    \"debtor\": \"\",\r\n    \"clientTypeId\": 0,\r\n    \"balance\": 0,\r\n    \"proposalTypeId\": \"\",\r\n    \"proposalTypeName\": \"\",\r\n    \"facilityTypeId\": \"\",\r\n    \"purpose\": \"\",\r\n    \"sublimits\": \"\",\r\n    \"proposalRate\": 0,\r\n    \"noSubsidyRate\": 0,\r\n    \"effectiveRate\": 0,\r\n    \"feci\": true,\r\n    \"termDays\": 0,\r\n    \"termDescription\": \"\",\r\n    \"ltv\": 0,\r\n    \"finantialConditions\": \"\",\r\n    \"environmentRiskCategory\": 0,\r\n    \"covenant\": \"\",\r\n    \"environmentRiskOpinion\": \"\",\r\n    \"finantialCovenant\": \"\",\r\n    \"legalDocumentation\": \"\",\r\n    \"creditRiskOpinion\": \"\",\r\n    \"provision\": \"\",\r\n    \"numero\": \"\",\r\n    \"otherConditions\": \"\",\r\n    \"facilityId\": 0,\r\n  });\r\n  const [datosUsuario, setdatosUsuario] = useState(null)\r\n  const [dataValidation, setdataValidation] = useState({\r\n    tipoPropuestaRequerido: false,\r\n    subPropuestaRequerido: false,\r\n    tipoFacilidadRequerido: false,\r\n  });\r\n  const [context, setcontext] = useState(location.data)\r\n  const propostalSectionRef = useRef();\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [commissions, setCommissions] = useState([]);\r\n  const [disbursementTerms, setDisbursementTerms] = useState([]);\r\n  const [paymentPrograms, setPaymentPrograms] = useState([]);\r\n  const [disbursementMethods, setDisbursementMethods] = useState([]);\r\n  const [warrants, setWarrants] = useState([]);\r\n  const [sureties, setSureties] = useState([]);\r\n  const [garantiaET, setgarantiaET] = useState([]);\r\n  const [ViewSeccion, setViewSeccion] = useState(false);\r\n  const backendServices = new BackendServices();\r\n  // Variables para alertas\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [info_dlg, setinfo_dlg] = useState(false)\r\n  const [info_msg, setinfo_msg] = useState(\"\")\r\n  const [dynamic_title, setdynamic_title] = useState(\"\")\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [confirm_alertDelete, setconfirm_alertDelete] = useState(false)\r\n  const [success_dlg, setsuccess_dlg] = useState(false)\r\n  const [applyEscrow, setapplyEscrow] = useState(false)\r\n  const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n  const history = useHistory();\r\n  const currencyData = new Currency();\r\n  const [locationData, setLocationData] = useState(null);\r\n  const [checkSubProp, setcheckSubProp] = useState(false);\r\n\r\n  const [campoTasa, setcampoTasa] = useState(false);\r\n  const [campoTasa2, setcampoTasa2] = useState(false);\r\n  const [campoTasa3, setcampoTasa3] = useState(false);\r\n  const [campoTasa4, setcampoTasa4] = useState(false);\r\n  const [PropotalRate, setPropotalRate] = useState(0);\r\n  const [TotalPropotalRate, setTotalPropotalRate] = useState(0);\r\n\r\n  const [historyDetails, setHistoryDetails] = useState(undefined);\r\n\r\n  const termOptions = [{ label: `${t(\"ShortTerm\")}`, value: \"CP\" }, { label: `${t(\"LongTerm\")}`, value: \"LP\" }];\r\n  const [term, setTerm] = useState(null);\r\n\r\n  const [isActiveLoadingFacilities, setIsActiveLoadingFacilities] = useState(false);\r\n  const [treasuryCurveClass, setTreasuryCurveClass] = useState();\r\n  const [treasuryCurveMessage, setTreasuryCurveMessage] = useState(false);\r\n\r\n  React.useImperativeHandle(ref, () => ({\r\n    submit: (validate = true) => {\r\n      const form = document.getElementById('formNewFacility');\r\n      if (validate) {\r\n        if (formValid) {\r\n          form.requestSubmit();\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      else {\r\n        form.requestSubmit();\r\n        return true;\r\n      }\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n  // services\r\n  useEffect(() => {\r\n    setTerm(undefined);\r\n\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n\r\n    // Read Api Service  ata\r\n    // consultarDeudorPrincipal\r\n    backendServices.consultPrincipalDebtor(dataSession.transactionId).then(resp => {\r\n      dataSet.numero = resp.clientDocId\r\n      setdataSet(dataSet);\r\n      setdatosUsuario(resp)\r\n    })\r\n    backendServices.consultEnvironmentalAspectsIGR(dataSession.transactionId).then(dataAsp => {\r\n      setgarantiaET(dataAsp?.environmentalAspectsDTO?.riskClassificationConfirmation ?? \"\");\r\n    })\r\n\r\n\r\n\r\n  }, []);\r\n\r\n\r\n  async function handleSubmitFacilidad(event, errors, values) {\r\n\r\n    // console.log(\"termOptions\", term.value)\r\n    if (!propuestaSet || !tipoFacilidadSet) {\r\n      return\r\n    }\r\n    if (+document?.getElementById(\"amount\")?.value < 0) {\r\n      return;\r\n    }\r\n    if (campoTasa) {\r\n      return;\r\n    }\r\n    if (campoTasa2) {\r\n      return;\r\n    }\r\n    if (campoTasa3) {\r\n      return;\r\n    }\r\n    // if (campoTasa4) {\r\n    //   return;\r\n    // }\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    setIsActiveLoading(true);\r\n    console.log(values?.amount);\r\n    values.amount = Number(currencyData.getRealValue(values?.amount ?? 0));\r\n    values.clientTypeId = Number(1);\r\n    values.balance = Number(currencyData.getRealValue(values?.balance ?? 0));\r\n    values.proposalRate = Number(currencyData.getRealPercent(values?.proposalRate ?? 0));\r\n    values.noSubsidyRate = Number(currencyData.getRealPercent(values?.noSubsidyRate ?? 0));\r\n    values.effectiveRate = Number(currencyData.getRealPercent(values?.effectiveRate ?? 0));\r\n    values.feci = values.feci == \"true\" ? true : false;\r\n    values.termDays = (values.termDays === '' ? 0 : values.termDays);\r\n    values.ltv = Number(currencyData.getRealPercent(values?.ltv ?? 0));\r\n    values.environmentRiskCategory = values.environmentRiskCategory;\r\n    values.proposalTypeId = tipoPropuestaSelect == undefined ? \" \" : tipoPropuestaSelect.value;\r\n    values.proposalTypeName = subPropuestaSelect == undefined ? \" \" : subPropuestaSelect.value;\r\n    values.facilityTypeId = tipoFacilidadSelect == undefined ? \" \" : tipoFacilidadSelect.value;\r\n    values.termType = terminosSelect == undefined ? \" \" : terminosSelect.value;\r\n    values.facilityId = dataSet.facilityId;\r\n    values.requestId = dataGlobalReq ?? 0;\r\n    values.applyEscrow = applyEscrow ?? false;\r\n    values.startingAmount = currencyData.getRealValue(values?.startingAmount ?? 0);\r\n    values.term = !term ? \" \" : term.value;\r\n\r\n    props.setViewAutonomy(false);\r\n\r\n    saveNewFacility(values)\r\n      .then((result) => {\r\n        // props.onSave(values);\r\n        // props.onDismiss();\r\n        props.setViewAutonomy(true);\r\n      }).catch(err => {\r\n        console.log(err);\r\n        props.setViewAutonomy(true);\r\n      });\r\n  }\r\n\r\n  async function newFacility(data = {\r\n    \"facilityNumber\": \"0\",\r\n    \"cr\": \"0\",\r\n    \"amount\": 0,\r\n    \"debtor\": \"  \",\r\n    \"clientTypeId\": 1,\r\n    \"customer\": {\r\n      \"id\": \"469303-1-434018\"\r\n    },\r\n    \"balance\": 0,\r\n    \"purpose\": \"\",\r\n    \"sublimits\": \"\",\r\n    \"proposalRate\": 0,\r\n    \"noSubsidyRate\": 0,\r\n    \"effectiveRate\": 0,\r\n    \"feci\": false,\r\n    \"termDays\": 0,\r\n    \"termDescription\": \"\",\r\n    \"ltv\": 0,\r\n    \"finantialConditions\": \" \",\r\n    \"environmentRiskCategory\": 0,\r\n    \"covenant\": \" \",\r\n    \"environmentRiskOpinion\": \" \",\r\n    \"finantialCovenant\": \" \",\r\n    \"legalDocumentation\": \"  \",\r\n    \"otherConditions\": \" \",\r\n    \"creditRiskOpinion\": \" \",\r\n    \"provision\": \" \",\r\n    \"proposalTypeId\": \"\",\r\n    \"proposalTypeName\": \"\",\r\n    \"facilityTypeId\": \"\",\r\n    \"termType\": \"\",\r\n    \"origin\": \"MVP\",\r\n    \"applyEscrow\": false,\r\n    facilityId: 0,\r\n    \"requestId\": dataGlobalReq ?? 0,\r\n    startingAmount: 0,\r\n    t24:false,\r\n    term: ''\r\n  }) {\r\n\r\n    let modelTreasuryCurve = new TreasuryCurve();\r\n\r\n    await modelTreasuryCurve.initial()\r\n    setTreasuryCurveClass(modelTreasuryCurve);\r\n    setTreasuryCurveMessage(modelTreasuryCurve.treasuryCurve?.length === 0)\r\n\r\n\r\n    // nuevoFacilidadPropCred\r\n    backendServices.newFacilityPropCred(data).then(async resp => {\r\n      await backendServices.consultarFacilidades2(dataGlobalReq ?? 0).then(async resp2 => {\r\n\r\n        resp2 = (resp2.find(facilities => facilities.facilityId == Math.max(...resp2.map(arr => arr.facilityId))));\r\n        data.facilityId = resp;\r\n\r\n        setViewSeccion(!ViewSeccion);\r\n        setHistoryDetails(false)\r\n\r\n        // setapplyEscrow(locationData)\r\n\r\n        setIsActiveLoading(true);\r\n\r\n        await Promise.allSettled([\r\n          backendServices.consultarFacilidades(dataGlobalReq ?? 0),\r\n          backendServices.consultarDetalleOpinionRiesgoCredito(locationData.transactionId),\r\n          backendServices.getEnvironmentalRiskInfo(locationData.transactionId)\r\n        ]).then(response => {\r\n          const [{ value: Facilidades }, { value: DetalleOpinionRiesgoCredito }, { value: EnvironmentalRiskInfo }] = response;\r\n\r\n          data.covenant = EnvironmentalRiskInfo?.detail ?? \"\";\r\n          data.environmentRiskOpinion = EnvironmentalRiskInfo?.recommendations ?? \"\";\r\n\r\n          data.opinionRiskCredit = DetalleOpinionRiesgoCredito.length > 0 ? DetalleOpinionRiesgoCredito[0].opinion : \"\";\r\n\r\n          data.facilityIdVisible = (Facilidades?.filter($$ => $$.debtor != \"  \").length + 1) || 1;\r\n\r\n          data.facilityId = resp;\r\n          console.log(data)\r\n\r\n          setIsActiveLoading(false);\r\n\r\n          setTerm(null);\r\n\r\n          setpropuestaSet(null);\r\n          settipoFacilidadSet(null);\r\n          setcheckSubProp(false);\r\n          setsubPropuestaSet(null);\r\n\r\n          settipoPropuestaSelect(data?.proposalTypeId ?? undefined);\r\n          setsubPropuestaSelect(undefined);\r\n          settipoFacilidadSelect(undefined);\r\n\r\n          setdataSet(data)\r\n          cargarDataSelect(data)\r\n\r\n        }).catch(err => {\r\n          setIsActiveLoading(false);\r\n          console.log(err)\r\n          dataSet.facilityId = resp;\r\n          setdataSet(dataSet)\r\n\r\n          setTerm(null);\r\n          setpropuestaSet(null);\r\n          settipoFacilidadSet(null);\r\n          setcheckSubProp(false);\r\n          setsubPropuestaSet(null);\r\n\r\n          settipoPropuestaSelect(undefined);\r\n          setsubPropuestaSelect(undefined);\r\n          settipoFacilidadSelect(undefined);\r\n        });\r\n\r\n      })\r\n\r\n    });\r\n  }\r\n  function saveNewFacility(values) {\r\n    return new Promise((resolve, reject) => {\r\n      const datos = {\r\n        \"requestId\": values.requestId,\r\n        \"facilityId\": dataSet.facilityId,\r\n        \"cr\": values.cr,\r\n        \"amount\": values.amount,\r\n        \"debtor\": deudoresListSelect.value,\r\n        \"clientTypeId\": deudoresListSelect.value,\r\n        \"balance\": values.balance,\r\n        \"proposalTypeId\": values.proposalTypeId,\r\n        \"proposalTypeName\": values.proposalTypeName,\r\n        // \"facilityTypeId\": values.facilityTypeId,\r\n        \"facilityTypeId\": values.facilityTypeId,\r\n        \"purpose\": values.purpose,\r\n        \"sublimits\": values.sublimits,\r\n        \"proposalRate\": values.proposalRate,\r\n        \"noSubsidyRate\": values.noSubsidyRate,\r\n        \"effectiveRate\": values.effectiveRate,\r\n        \"feci\": values.feci,\r\n        \"termDays\": values.termDays,\r\n        \"termDescription\": values.termDescription,\r\n        \"ltv\": values.ltv,\r\n        \"finantialConditions\": values.finantialConditions,\r\n        \"environmentRiskCategory\": 0,\r\n        \"covenant\": values.covenant,\r\n        \"environmentRiskOpinion\": values.environmentRiskOpinion,\r\n        \"finantialCovenant\": values.finantialCovenant,\r\n        \"legalDocumentation\": values.legalDocumentation,\r\n        \"creditRiskOpinion\": values.creditRiskOpinion,\r\n        \"otherConditions\": values.otherConditions,\r\n        \"provision\": values.provision,\r\n        \"applyEscrow\": values.applyEscrow,\r\n        \"termType\": values.termType,\r\n        \"startingAmount\": +values.startingAmount,\r\n        \"term\": values.term,\r\n        t24: false,\r\n        \"origin\": \"MVP\"\r\n      }\r\n      console.log(datos)\r\n      props.setLevelAutonomy(levelAutonomy => levelAutonomy + +datos.amount)\r\n      // actualizarFacilidadPropCred\r\n      backendServices.updateFacilityPropCred(datos).then(resp => {\r\n        console.log(\"🚀 ~ file: FacilidadesSeccion.js ~ line 399 ~ backendServices.updateFacilityPropCred ~ resp\", resp)\r\n        if (resp !== null && resp !== undefined) {\r\n          setViewSeccion(!ViewSeccion);\r\n          setsuccessSave_dlg(true);\r\n        } else {\r\n          seterror_dlg(false);\r\n        }\r\n        cargarFacilidades(locationData)\r\n        setIsActiveLoading(false);\r\n        resetData();\r\n        resolve();\r\n      }).catch(err => {\r\n        console.log(err)\r\n        seterror_dlg(false);\r\n        setIsActiveLoading(false)\r\n        resetData();\r\n        resolve();\r\n      })\r\n    });\r\n  }\r\n  function handleNewCommission(newItem) {\r\n    const newCommissions = [...commissions, newItem];\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleDeleteCommission(item) {\r\n    const itemIndex = commissions.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newCommissions = [...commissions];\r\n    newCommissions.splice(itemIndex, 1);\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleNewDisbursementTerm(newItem) {\r\n    const newDisbursementTerms = [...disbursementTerms, newItem];\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleDeleteDisbursementTerm(item) {\r\n    const itemIndex = disbursementTerms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementTerms = [...disbursementTerms];\r\n    newDisbursementTerms.splice(itemIndex, 1);\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleNewPaymentProgram(newItem) {\r\n    const newPaymentPrograms = [...paymentPrograms, newItem];\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleDeletePaymentProgram(item) {\r\n    const itemIndex = paymentPrograms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newPaymentPrograms = [...paymentPrograms];\r\n    newPaymentPrograms.splice(itemIndex, 1);\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleNewDisbursementMethod(newItem) {\r\n    const newDisbursementMethods = [...disbursementMethods, newItem];\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n  function handleDeleteDisbursementMethod(item) {\r\n    const itemIndex = disbursementMethods.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementMethods = [...disbursementMethods];\r\n    newDisbursementMethods.splice(itemIndex, 1);\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n  function handleNewWarrant(newItem) {\r\n    const newWarrants = [...warrants, newItem];\r\n    setWarrants(newWarrants);\r\n  }\r\n  function handleDeleteWarrant(item) {\r\n    const itemIndex = warrants.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newWarrants = [...warrants];\r\n    newWarrants.splice(itemIndex, 1);\r\n    setWarrants(newWarrants);\r\n  }\r\n  function handleNewSurety(newItem) {\r\n    const newSureties = [...sureties, newItem];\r\n    setSureties(newSureties);\r\n  }\r\n  function handleDeleteSurety(item) {\r\n    const itemIndex = sureties.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newSureties = [...sureties];\r\n    newSureties.splice(itemIndex, 1);\r\n    setSureties(newSureties);\r\n  }\r\n  // FUNCIONES PARA PROPOSTALSECTION\r\n  const api = new BackendServices();\r\n  const apiCoreServices = new CoreServices();\r\n  const [dataReturn, setdataReturn] = useState({\r\n    proposalTypeId: null,\r\n    proposalTypeName: null,\r\n    facilityTypeId: null,\r\n  });\r\n  const [tipoPropuesta, settipoPropuesta] = useState(null);\r\n  const [tipoPropuestaSelect, settipoPropuestaSelect] = useState(undefined);\r\n  const [propuestaSet, setpropuestaSet] = useState(null);\r\n  const [tipoPropuestaRequerido, settipoPropuestaRequerido] = useState(false);\r\n  const [subPropuesta, setsubPropuesta] = useState(null);\r\n  const [subPropuestaSelect, setsubPropuestaSelect] = useState(undefined);\r\n  const [subPropuestaSet, setsubPropuestaSet] = useState(null);\r\n  const [subPropuestaRequerido, setsubPropuestaRequerido] = useState(false);\r\n  const [tipoFacilidad, settipoFacilidad] = useState(null);\r\n  const [tipoFacilidadSelect, settipoFacilidadSelect] = useState(undefined);\r\n  const [deudoresListSelect, setdeudoresListSelect] = useState(undefined);\r\n  const [terminosSelect, setterminosSelect] = useState(undefined);\r\n  const [tipoFacilidadSet, settipoFacilidadSet] = useState(null);\r\n  const [deudoresList, setdeudoresList] = useState(null);\r\n  const [tipo, settipo] = useState(\"guardar\");\r\n  const [dataRows, setdataRows] = useState(null);\r\n  const [dataEdit, setdataEdit] = useState(null);\r\n  const [campoRequeridoDeudores, setcampoRequeridoDeudores] = useState(false);\r\n  const [MontoFacilidad, setMontoFacilidad] = useState(0);\r\n  const [dataGlobalReq, setdataGlobalReq] = useState(0);\r\n  let listaIdentificacion = props.identificationList;\r\n  const [tipoFacilidadRequerido, settipoFacilidadRequerido] = useState(false);\r\n  const [facilityNumber, setfacilityNumber] = useState(1);\r\n  const typeTerms = [{ label: t(\"Days\"), value: \"DÍAS\" }, { label: t(\"Months\"), value: \"MESES\" }, { label: t(\"Years\"), value: \"AÑOS\" }]\r\n  const [proposalRate, setProposalRate] = useState(0);\r\n  const [rateTreasuryCurve, setRateTreasuryCurve] = useState(false);\r\n  const [rateProposalTreasuryCurve, setRateProposalTreasuryCurve] = useState({ Description: \"\", Code: \"\" });\r\n\r\n  React.useEffect(() => {\r\n    setterminosSelect(typeTerms[0])\r\n    // Read Api Service data\r\n    // initializeData();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n    if (props.activeTab == 3) {\r\n      const backendServicesAll = new BackendServices();\r\n      backendServicesAll.consultGeneralDataPropCred(dataSession?.transactionId ?? dataSession?.transactionId ?? 0)\r\n        .then((data) => {\r\n          console.log(\"🚀 ~ file: FacilidadesSeccion.js ~ line 576 ~ .then ~ data\", data)\r\n          if (data !== undefined) {\r\n            setdataGlobalReq(data[0]?.requestId);\r\n          }\r\n          cargarFacilidades(dataSession, data[0]?.requestId)\r\n          initializeData(dataSession);\r\n        });\r\n    }\r\n\r\n    // Read Api Service data\r\n  }, [props.activeTab == 3]);\r\n  function cargarFacilidades(dataSession, requestId = dataGlobalReq) {\r\n    setIsActiveLoadingFacilities(true);\r\n    api.consultarDeudores(dataSession.transactionId)\r\n      .then((data2) => {\r\n        if (data2 !== null && data2 !== undefined) {\r\n          let jsonDeudores = [];\r\n          for (let i = 0; i < data2.length; i++) {\r\n            jsonDeudores.push({ label: data2[i][\"typePerson\"] == 2 ? data2[i][\"name\"] : (data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"]), value: data2[i][\"personId\"] })\r\n            // jsonDeudores.push({ label: data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"], value: data2[i][\"personId\"] })\r\n          }\r\n\r\n          api.retrieveProposalType()\r\n            .then((propuesta) => {\r\n              api.retrieveFacilityType()\r\n                .then((facilidad) => {\r\n                  api.consultarFacilidades(requestId).then(resp => {\r\n                    let acu = 0;\r\n                    if (resp?.filter(data => data.debtor != \"  \").length > 0) {\r\n                      resp = currencyData.orderByJSON(resp, 'facilityId', 'asc');\r\n                      setdataRows(resp.map((data, index) => {\r\n                        acu++;\r\n                        return (\r\n                          <tr key={acu}>\r\n                            <td data-label={t(\"Facility\")}>{acu}</td>\r\n                            <td data-label={t(\"Debtor\")}>{jsonDeudores.find(x => x.value === Number(data.debtor))?.label}</td>\r\n                            <td data-label={t(\"Facility Type\")}>{facilidad.find(x => x.id === data.facilityTypeId)?.description}</td>\r\n                            <td data-label={t(\"Proposal\")}>{propuesta.find(x => x.id === data.proposalTypeId)?.description}</td>\r\n                            <td data-label={t(\"Amount\")}>${currencyData.formatTable(data.amount ?? 0)}</td>\r\n                            <td data-label={t(\"Amount\") + \" \" + t(\"Rate\")}>{currencyData.formatTable(data.proposalRate ?? 0)}%</td>\r\n                            <td data-label={t(\"Actions\")} style={{ textAlign: \"right\" }}>\r\n                              <Button type=\"button\" color=\"link\" onClick={(resp) => {\r\n                                update(data, index)\r\n                              }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n                              <Button type=\"button\" color=\"link\" onClick={(resp) => { setdataSet(data); eliminarFacilidades(); }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n                            </td>\r\n                          </tr>)\r\n                      }\r\n                      ));\r\n                      setIsActiveLoadingFacilities(false);\r\n                    } else {\r\n                      setdataRows(\r\n                        <tr key={1}>\r\n                          <td colSpan=\"7\" style={{ textAlign: 'center' }}></td>\r\n                        </tr>);\r\n                      setIsActiveLoadingFacilities(false);\r\n                    }\r\n                  }).catch(err => {\r\n                  });\r\n                })\r\n            })\r\n        }\r\n\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  async function update(data, index) {\r\n\r\n    let modelTreasuryCurve = new TreasuryCurve();\r\n\r\n    await modelTreasuryCurve.initial()\r\n    setTreasuryCurveClass(modelTreasuryCurve);\r\n    setTreasuryCurveMessage(modelTreasuryCurve.treasuryCurve?.length === 0)\r\n\r\n\r\n    data.facilityIdVisible = index + 1;\r\n\r\n    setdataSet(data); cargarDataSelect(data); settipo(\"editar\"); setViewSeccion(true);\r\n    changeRateProposal(data.proposalRate ?? 0, data.termType ?? 'DÍAS', modelTreasuryCurve)\r\n    dataReturn.termType = data.termType;\r\n    setdataReturn(dataReturn);\r\n    setPropotalRate(data.proposalRate);\r\n    setTotalPropotalRate(+data.proposalRate - +data.noSubsidyRate)\r\n  }\r\n\r\n\r\n  function eliminarFacilidades() {\r\n    settipo(\"eliminar\");\r\n    setconfirm_alertDelete(true);\r\n  }\r\n  React.useEffect(() => {\r\n    // Read Api Service data\r\n    settipoPropuestaRequerido(dataValidation.tipoPropuestaRequerido);\r\n    setsubPropuestaRequerido(dataValidation.subPropuestaRequerido);\r\n    settipoFacilidadRequerido(dataValidation.tipoFacilidadRequerido);\r\n  }, [dataValidation]);\r\n  function cargarDataSelect(data) {\r\n    var defaultVal = null;\r\n    setapplyEscrow(data?.applyEscrow);\r\n    console.log(termOptions, data)\r\n    try {\r\n      if (termOptions.length > 0 && data.term) {\r\n        defaultVal = termOptions.find(x => (x.value).toUpperCase() === (data.term).toUpperCase());\r\n        if (defaultVal !== undefined) {\r\n          setTerm(defaultVal);\r\n        }\r\n      }\r\n      if (tipoPropuesta.length > 0 && data.proposalTypeId !== null) {\r\n        defaultVal = tipoPropuesta.find(x => (x.value).toUpperCase() === (data.proposalTypeId).toUpperCase());\r\n        if (defaultVal !== undefined) {\r\n          settipoPropuestaSelect(defaultVal);\r\n          setpropuestaSet(defaultVal)\r\n        }\r\n      }\r\n      if (subPropuesta.length > 0 && data.proposalTypeName !== null) {\r\n        defaultVal = subPropuesta.find(x => (x.value).toUpperCase() === (data.proposalTypeName).toUpperCase());\r\n        if (defaultVal !== undefined) {\r\n          setsubPropuestaSelect(defaultVal);\r\n          setsubPropuestaSet(defaultVal)\r\n        }\r\n      }\r\n      if (tipoFacilidad.length > 0 && data.facilityTypeId !== null) {\r\n        defaultVal = tipoFacilidad.find(x => (x.value).toUpperCase() === (data.facilityTypeId).toUpperCase());\r\n        if (defaultVal !== undefined) {\r\n          settipoFacilidadSelect(defaultVal);\r\n          settipoFacilidadSet(defaultVal)\r\n        }\r\n      }\r\n      console.log(deudoresList)\r\n      if (deudoresList.length > 0 && data.debtor !== null) {\r\n        defaultVal = deudoresList.find(x => (x.value) === (data.debtor));\r\n        if (defaultVal !== undefined) {\r\n          setdeudoresListSelect(defaultVal);\r\n        }\r\n      }\r\n      if (typeTerms.length > 0 && data.termType) {\r\n        defaultVal = typeTerms.find(x => (x.value).toUpperCase() === (data.termType).toUpperCase());\r\n        if (defaultVal !== undefined) {\r\n          setterminosSelect(defaultVal);\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n\r\n    catch (err) {\r\n      console.log(console.error(err))\r\n    }\r\n  }\r\n  React.useEffect(() => {\r\n    cargarDataSelect(dataSet)\r\n    // Read Api Service data\r\n    setMontoFacilidad(dataSet.amount)\r\n\r\n  }, [dataSet, ViewSeccion, subPropuesta]);\r\n\r\n  var treasuryCurveCat0;\r\n  function initializeData(dataLocation) {\r\n\r\n    // consultarDeudores\r\n    api.consultarDeudores(dataLocation.transactionId)\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          let json = [];\r\n          console.log(data)\r\n          for (let i = 0; i < data.length; i++) {\r\n            // json.push({ label: data[i][\"name\"] + \" \" + data[i][\"name2\"] + \" \" + data[i][\"lastName\"] + \" \" + data[i][\"lastName2\"], value: data[i][\"personId\"] })\r\n            json.push({ label: data[i][\"typePerson\"] == 2 ? data[i][\"name\"] : (data[i][\"name\"] + \" \" + data[i][\"name2\"] + \" \" + data[i][\"lastName\"] + \" \" + data[i][\"lastName2\"]), value: data[i][\"personId\"] })\r\n          }\r\n          console.log(\"initializeData\", json);\r\n          setdeudoresListSelect(json[0])\r\n          setdeudoresList(json)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveProposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        console.log(\"retrieveProposalType\", response)\r\n        settipoPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveFacilityType()\r\n      .then((response) => {\r\n        console.log(\"retrieveFacilityType\", response)\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          if (response[i][\"id\"] !== \"TDC\") {\r\n            json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n          }\r\n        }\r\n        settipoFacilidad(json);\r\n        console.log(\"retrieveFacilityType\", response)\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n    api.retrieveSubproposalType()\r\n      .then((response) => {\r\n        if (response === null) { return; }\r\n        let json = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n          json.push({ label: response[i][\"description\"], value: response[i][\"id\"] })\r\n        }\r\n        console.log(\"retrieveSubproposalType\", response)\r\n        setsubPropuesta(json);\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n  function soloNumeros(e, dato) {\r\n    var teclaPulsada = window.event ? window.event.keyCode : e.which;\r\n    var valor = document.getElementById(dato).value;\r\n    if (teclaPulsada === 45 && valor.indexOf(\"-\") === -1) {\r\n      document.getElementById(dato).value = \"-\" + valor;\r\n    }\r\n    if (teclaPulsada === 13 || (teclaPulsada === 46 && valor.indexOf(\".\") === -1)) {\r\n      return true;\r\n    }\r\n    console.log(valor);\r\n    return /\\d/.test(String.fromCharCode(teclaPulsada));\r\n\r\n  }\r\n  //   function handleChangeInputfrmSearch(e) {\r\n  //     values[e.target.name] = e.target.value;\r\n  // }\r\n\r\n\r\n  function resetData() {\r\n    let data = {\r\n      \"facilityNumber\": \"0\",\r\n      \"cr\": \"0\",\r\n      \"amount\": 0,\r\n      \"debtor\": \"  \",\r\n      \"clientTypeId\": 1,\r\n      \"customer\": {\r\n        \"id\": \"469303-1-434018\"\r\n      },\r\n      \"balance\": 0,\r\n      \"purpose\": \"\",\r\n      \"sublimits\": \"\",\r\n      \"proposalRate\": 0,\r\n      \"noSubsidyRate\": 0,\r\n      \"effectiveRate\": 0,\r\n      \"feci\": false,\r\n      \"termDays\": 0,\r\n      \"termDescription\": \"\",\r\n      \"ltv\": 0,\r\n      \"finantialConditions\": \" \",\r\n      \"environmentRiskCategory\": 0,\r\n      \"covenant\": \" \",\r\n      \"environmentRiskOpinion\": \" \",\r\n      \"finantialCovenant\": \" \",\r\n      \"legalDocumentation\": \"  \",\r\n      \"otherConditions\": \" \",\r\n      \"creditRiskOpinion\": \" \",\r\n      \"provision\": \" \",\r\n      \"proposalTypeId\": \"\",\r\n      \"proposalTypeName\": \"\",\r\n      \"facilityTypeId\": \"\",\r\n      \"termType\": \"\",\r\n      \"applyEscrow\": false,\r\n      facilityId: 0,\r\n      t24: false,\r\n      \"requestId\": dataGlobalReq ?? 0,\r\n      \"term\": \"\"\r\n    }\r\n    setdataSet(data);\r\n\r\n\r\n    setTerm(null);\r\n    setpropuestaSet(null);\r\n    settipoFacilidadSet(null);\r\n    setcheckSubProp(false);\r\n    setsubPropuestaSet(null);\r\n\r\n    settipoPropuestaSelect(undefined);\r\n    setsubPropuestaSelect(undefined);\r\n    settipoFacilidadSelect(undefined);\r\n\r\n    setPropotalRate(0)\r\n    setTotalPropotalRate(0)\r\n\r\n\r\n    setRateProposalTreasuryCurve({ Description: \"\", Code: \"\" })\r\n\r\n  }\r\n\r\n  function check(e) {\r\n    let tecla = (document.all) ? e.keyCode : e.which;\r\n    //Tecla de retroceso para borrar, siempre la permite\r\n    if (tecla === 45) {\r\n      e.preventDefault();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n  function editFacilitiesT24(data) {\r\n    console.log(\"editFacilitiesT24\", data);\r\n    setIsActiveLoadingFacilities(true)\r\n    // AA19214M07G3\r\n    api.consultGeneralDataPropCred(locationData?.transactionId).then((resp2) => {\r\n      if (resp2 != undefined && data !== undefined) {\r\n        if (data.cr !== null && data.cr !== undefined && data.cr.length > 0) {\r\n          apiCoreServices.getFacilityInfo(data.cr).then(resp => {\r\n            setIsActiveLoadingFacilities(false)\r\n\r\n            console.log(\"Data facilities\", resp);\r\n            let tmpdata = {\r\n              \"facilityNumber\": \"0\",\r\n              \"cr\": \"0\",\r\n              \"amount\": 0,\r\n              // \"debtor\": datosUsuario.personId,\r\n              \"debtor\": \" \",\r\n              \"clientTypeId\": 1,\r\n              \"customer\": {\r\n                \"id\": \"469303-1-434018\"\r\n              },\r\n              \"balance\": data.balance,\r\n              \"purpose\": \"\",\r\n              \"sublimits\": \"\",\r\n              \"proposalRate\": 0,\r\n              \"noSubsidyRate\": 0,\r\n              \"effectiveRate\": 0,\r\n              \"feci\": false,\r\n              \"termDays\": 0,\r\n              \"termDescription\": \"\",\r\n              \"ltv\": 0,\r\n              \"finantialConditions\": \" \",\r\n              \"environmentRiskCategory\": 0,\r\n              \"covenant\": \" \",\r\n              \"environmentRiskOpinion\": \" \",\r\n              \"finantialCovenant\": \" \",\r\n              \"legalDocumentation\": \"  \",\r\n              \"otherConditions\": \" \",\r\n              \"creditRiskOpinion\": \" \",\r\n              \"provision\": \" \",\r\n              \"proposalTypeId\": \"MEN\",\r\n              \"proposalTypeName\": \"\",\r\n              \"facilityTypeId\": \"\",\r\n              \"termType\": \"\",\r\n              \"applyEscrow\": false,\r\n              facilityId: 0,\r\n              \"requestId\": resp2[0]?.requestId ?? 0,\r\n              startingAmount: data.amount,\r\n              term: '',\r\n              origin: \"MVP\"\r\n            }\r\n            if (resp != null || resp != undefined) {\r\n              //data.amount = resp?.AcctBal[1]?.CurAmt?.Amt ?? 0;\r\n              tmpdata.proposalRate = resp?.IntRateData?.IntRate ?? 0;\r\n              tmpdata.feci = resp?.CreditAcctData?.FeciProperty ?? false;\r\n              tmpdata.termDays = resp?.CreditAcctData?.Term?.ProposedTerm ?? \"0\";\r\n              tmpdata.termDays = Number(tmpdata.termDays.length > 1 ? tmpdata.termDays.substring(0, tmpdata.termDays.length - 1) : tmpdata.termDays);\r\n              // creamos una nueva facilidad\r\n              console.log(\"tmpdata\", tmpdata);\r\n              newFacility(tmpdata);\r\n            } else {\r\n              setHistoryDetails(true)\r\n              //newFacility(data)\r\n            }\r\n          }).catch(err => {\r\n            console.log(err)\r\n            setIsActiveLoadingFacilities(false)\r\n          });\r\n        }\r\n        else {\r\n          let tmpdata = {\r\n            \"facilityNumber\": \"0\",\r\n            \"cr\": \"0\",\r\n            \"amount\": 0,\r\n            // \"debtor\": datosUsuario.personId,\r\n            \"debtor\": \" \",\r\n            \"clientTypeId\": 1,\r\n            \"customer\": {\r\n              \"id\": \"469303-1-434018\"\r\n            },\r\n            \"balance\": data.balance,\r\n            \"purpose\": \"\",\r\n            \"sublimits\": \"\",\r\n            \"proposalRate\": 0,\r\n            \"noSubsidyRate\": 0,\r\n            \"effectiveRate\": 0,\r\n            \"feci\": false,\r\n            \"termDays\": 0,\r\n            \"termDescription\": \"\",\r\n            \"ltv\": 0,\r\n            \"finantialConditions\": \" \",\r\n            \"environmentRiskCategory\": 0,\r\n            \"covenant\": \" \",\r\n            \"environmentRiskOpinion\": \" \",\r\n            \"finantialCovenant\": \" \",\r\n            \"legalDocumentation\": \"  \",\r\n            \"otherConditions\": \" \",\r\n            \"creditRiskOpinion\": \" \",\r\n            \"provision\": \" \",\r\n            \"proposalTypeId\": \"MEN\",\r\n            \"proposalTypeName\": \"\",\r\n            \"facilityTypeId\": \"\",\r\n            \"termType\": \"\",\r\n            t24: false,\r\n            origin: \"MVP\",\r\n            \"applyEscrow\": false,\r\n            facilityId: 0,\r\n            \"requestId\": resp2[0]?.requestId ?? 0,\r\n            startingAmount: data.amount,\r\n            term: ''\r\n          }\r\n\r\n          /*data.amount = resp?.AcctBal[1]?.CurAmt?.Amt ?? 0;\r\n              data.proposalRate = resp?.IntRateData?.IntRate ?? 0;\r\n              data.feci = resp?.CreditAcctData?.FeciProperty ?? false;\r\n              data.requestId = resp?.AcctKey?.AcctId ?? '';\r\n              data.termDays = resp?.CreditAcctData?.Term?.ProposedTerm ?? 0;*/\r\n          // creamos una nueva facilidad\r\n          newFacility(tmpdata);\r\n\r\n        }\r\n      }\r\n\r\n    }).catch(err => {\r\n      console.log(err)\r\n      setIsActiveLoadingFacilities(false)\r\n    });\r\n\r\n  }\r\n\r\n  function changeRateProposal(proposalRate, termType, modelTreasuryCurve = treasuryCurveClass) {\r\n\r\n    let treasury = modelTreasuryCurve.showTreasuryCurve({ proposalRate, termType });\r\n    rateProposalTreasuryCurve.Description = treasury?.Description ?? 0\r\n    rateProposalTreasuryCurve.Code = treasury?.Code ?? 0\r\n    setRateProposalTreasuryCurve(rateProposalTreasuryCurve);\r\n    dataReturn.proposalRate = treasury?.Description ?? 0;\r\n    setdataReturn(dataReturn);\r\n\r\n    // setPropotalRate(treasury?.Description ?? 0)\r\n\r\n    setTotalPropotalRate((+currencyData.getRealPercent(document.getElementById('proposalRate')?.value ?? dataSet?.noSubsidyRate)) - (+currencyData.getRealPercent(document.getElementById('noSubsidyRate')?.value ?? dataSet?.noSubsidyRate)))\r\n  }\r\n  function test(x) {\r\n    dataSet.proposalRate = x;\r\n    setdataSet(dataSet);\r\n    setPropotalRate(x)\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <AvForm id=\"formFacilidades\" className=\"needs-validation\" onSubmit={handleSubmitFacilidad}>\r\n        {!ViewSeccion ?\r\n          <React.Fragment>\r\n            {datosUsuario && locationData && dataGlobalReq != 0 ?\r\n              <FacilityHistory setLevelAutonomy={props.setLevelAutonomy} requestId={dataGlobalReq} transactId={locationData.transactionId} editFacilitiesT24={editFacilitiesT24} mainDebtor={datosUsuario} partyId={datosUsuario.customerNumberT24} historyDetails={historyDetails} />\r\n              : null}\r\n            <LoadingOverlay active={isActiveLoadingFacilities} spinner text={t(\"WaitingPlease\")}>\r\n\r\n              <Card>\r\n                <h5 className=\"card-sub-title\">{t(\"ActualFacilityList\")}</h5>\r\n                <CardBody>\r\n                  <Col md=\"12\" style={{ textAlign: \"right\" }}>\r\n                    <Button className=\"btn\" color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => {\r\n                      newFacility();\r\n                    }} title={t(\"Add\")}><i className=\"fas fa-lg fa-plus-circle\"></i> {(\" \")}</Button>\r\n                  </Col>\r\n                  <Col md=\"12\" className=\"table-responsive styled-table-div\">\r\n                    <Table className=\"table table-striped table-hover styled-table table\" >\r\n                      <thead>\r\n                        <tr>\r\n                          <th>{t(\"Facility\")}</th>\r\n                          <th>{t(\"Debtor\")}</th>\r\n                          <th>{t(\"Facility Type\")}</th>\r\n                          <th>{t(\"Proposal\")}</th>\r\n                          <th>{t(\"ProposalRisk\")}</th>\r\n                          <th>{t(\"Rate\")}</th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dataRows}\r\n                      </tbody>\r\n                    </Table>\r\n                  </Col>\r\n                </CardBody>\r\n              </Card>\r\n            </LoadingOverlay>\r\n          </React.Fragment>\r\n          : null}\r\n        {ViewSeccion ?\r\n          <Card>\r\n            <CardBody>\r\n              <LoadingOverlay active={isActiveLoading} spinner text={t(\"WaitingPlease\")}>\r\n                <h5>{t(\"Facility\")}</h5>\r\n                <p className=\"card-title-desc\"></p>\r\n                {/* CustomerSeccion */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"General Data\")}</h5>\r\n                    <Row>\r\n                      <Col lg=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"facilityNumber\">{t(\"Facility\")} {t(\" \")} {t(\"Number\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"facilityNumber\"\r\n                            type=\"text\"\r\n                            validate={{\r\n                              number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                            }}\r\n                            value={dataSet.facilityIdVisible}\r\n                            id=\"facilityNumber\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col lg=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"cr\">{t(\"CR\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"cr\"\r\n                            value={dataSet.cr}\r\n                            type=\"text\"\r\n                            id=\"cr\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col lg=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"amount\">{t(\"Amount\")}</Label>\r\n                          {/* <CurrencyInput\r\n                            className=\"form-control\"\r\n                            name=\"amount\"\r\n                            id=\"amount\"\r\n                            onChange={(event) => { setMontoFacilidad(event.value) }}\r\n                            value={dataSet.amount} /> */}\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"amount\"\r\n                            type=\"text\"\r\n                            pattern=\"^[0-9,.]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                            onChange={(e) => { setMontoFacilidad(e.target.value); }}\r\n                            value={currencyData.format(dataSet?.amount ?? 1)}\r\n                            id=\"amount\" />\r\n                          {+document.getElementById(\"amount\")?.value < 0 ?\r\n                            <p className=\"message-error-parrafo\">{t(\"The amount entered must be greater than or equal to $0\")}</p>\r\n                            : null}\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md=\"8\">\r\n                        <Label htmlFor=\"Term Type\">{t(\"Term Type\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"}\r\n                          onChange={(e) => {\r\n                            setTerm(termOptions.find(x => x.value === e.value))\r\n                          }}\r\n                          options={termOptions}\r\n                          classNamePrefix=\"select2-selection\"\r\n                          placeholder={t(\"Select\")}\r\n                          value={term}\r\n                        />\r\n                        {/* {campoRequeridoDeudores ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                          : null} */}\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"Initial Amount\">{t(\"Initial Amount\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"startingAmount\"\r\n                            value={currencyData.format(dataSet?.startingAmount ?? 0)}\r\n                            pattern=\"^[0-9,.-]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                            type=\"text\"\r\n                            id=\"startingAmount\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md=\"8\">\r\n                        <Label htmlFor=\"amount\">{t(\"Debtors\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"}\r\n                          onChange={(e) => {\r\n                            setdeudoresListSelect(deudoresList.find(x => x.value === e.value))\r\n                          }}\r\n                          options={deudoresList}\r\n                          classNamePrefix=\"select2-selection\"\r\n                          placeholder={t(\"Select\")}\r\n                          value={deudoresListSelect}\r\n                        />\r\n                        {campoRequeridoDeudores ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                          : null}\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"balance\">{t(\"Balance\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"balance\"\r\n                            value={currencyData.format(dataSet?.balance ?? 0)}\r\n                            pattern=\"^[0-9,.-]*$\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                            type=\"text\"\r\n                            id=\"balance\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* ProposalSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"Proposal\")}</h5>\r\n                    {/* <AvForm id=\"frmFacilidades\" className=\"needs-validation\" onSubmit={handleSubmitFacilidad}> */}\r\n                    <Row>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"proposalType\">{t(\"Proposal Type\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"}\r\n                          onChange={(e) => {\r\n                            let facilities = tipoPropuesta.find(x => x.value === e.value)\r\n                            settipoPropuestaSelect(facilities)\r\n\r\n                            if (facilities.value === 'RES' || facilities.value === 'REF') {\r\n                              setcheckSubProp(true);\r\n                            } else {\r\n                              setcheckSubProp(false);\r\n                            }\r\n\r\n                            setpropuestaSet(e.value);\r\n                            dataReturn.proposalTypeId = e.value;\r\n                            setdataReturn(dataReturn);\r\n                          }}\r\n                          options={tipoPropuesta}\r\n                          placeholder={t(\"Select\")}\r\n                          value={tipoPropuestaSelect}\r\n                        />\r\n                        {!propuestaSet ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                          : null}\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"subproposalType\">{t(\"SubProposal Type\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"}\r\n                          onChange={(e) => {\r\n                            setsubPropuestaSelect(subPropuesta.find(x => x.value === e.value))\r\n                            setsubPropuestaSet(e.value);\r\n                            dataReturn.proposalTypeName = e.value;\r\n                            setdataReturn(dataReturn);\r\n                          }}\r\n                          options={subPropuesta}\r\n                          placeholder={t(\"Select\")}\r\n                          value={subPropuestaSelect}\r\n                        />\r\n                        {/* {checkSubProp && (!subPropuestaSet ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                          : null)} */}\r\n\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"facilityType\">{t(\"Facility Type\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"}\r\n                          onChange={(e) => {\r\n                            settipoFacilidadSelect(tipoFacilidad.find(x => x.value === e.value))\r\n                            settipoFacilidadSet(e.value);\r\n                            dataReturn.facilityTypeId = e.value;\r\n                            setdataReturn(dataReturn);\r\n                          }}\r\n                          options={tipoFacilidad}\r\n                          placeholder={t(\"Select\")}\r\n                          value={tipoFacilidadSelect}\r\n                        />\r\n                        {!tipoFacilidadSet ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required\")}</p>\r\n                          : null}\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"purpose\">{t(\"Purpose\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"purpose\"\r\n                            id=\"purpose\"\r\n                            // validate={{\r\n                            //   required: { value: true, errorMessage: t(\"Required\") }\r\n                            // }}\r\n                            type=\"textarea\"\r\n                            value={dataSet.purpose}\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"sublimits\">{t(\"Sub Limits\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"sublimits\"\r\n                            id=\"sublimits\"\r\n                            value={dataSet.sublimits}\r\n                            type=\"textarea\"\r\n                            rows=\"4\" />\r\n                        </AvGroup></Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* InterestRateSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    {/* <h5>{t(\"Proposed Interest Rate\")}</h5> */}\r\n                    <Row>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"proposalRate\">{t(\"Proposed Interest Rate\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"proposalRate\"\r\n                            type=\"text\"\r\n                            onKeyUp={(e) => {\r\n                              let x = currencyData.getRealPercent(e.target.value);\r\n                              test(x);\r\n                              e.target.value = currencyData.formatPercent(x, e);\r\n                              setTotalPropotalRate(x - (+currencyData.getRealPercent(document.getElementById('noSubsidyRate').value)))\r\n                            }}\r\n                            onChange={(e) => { let x = currencyData.getRealPercent(e.target.value); parseFloat(x) > 100 ? setcampoTasa(true) : setcampoTasa(false); }}\r\n                            id=\"proposalRate\"\r\n                            value={`${dataSet?.proposalRate ?? 0}%`} />\r\n                          {campoTasa ?\r\n                            <p className=\"message-error-parrafo\">{t(\"Thepercentageexceeds100%\")}</p>\r\n                            : null}\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"noSubsidyRate\">{t(\"Subsidy Rate\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"noSubsidyRate\"\r\n                            type=\"text\"\r\n                            id=\"noSubsidyRate\"\r\n                            value={`${currencyData.format(dataSet?.noSubsidyRate ?? 0)}%`}\r\n                            onKeyUp={(e) => {\r\n                              let x = currencyData.getRealPercent(e.target.value); e.target.value = currencyData.formatPercent(x, e);\r\n                              setTotalPropotalRate(PropotalRate - x)\r\n                            }}\r\n                            onChange={(e) => { let x = currencyData.getRealPercent(e.target.value); parseFloat(x) > 100 ? setcampoTasa2(true) : setcampoTasa2(false); }}\r\n                          />\r\n                          {campoTasa2 ?\r\n                            <p className=\"message-error-parrafo\">{t(\"Thepercentageexceeds100%\")}</p>\r\n                            : null}\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"effectiveRate\">{t(\"Total Rate\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"effectiveRate\"\r\n                            value={`${currencyData.format((parseFloat(TotalPropotalRate.toFixed(2))) ?? 0)}%`}\r\n                            type=\"text\"\r\n                            id=\"effectiveRate\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealPercent(e.target.value); e.target.value = currencyData.formatPercent(x, e); }}\r\n                            onChange={(e) => { let x = currencyData.getRealPercent(e.target.value); parseFloat(x) > 100 ? setcampoTasa3(true) : setcampoTasa3(false); }}\r\n                          />\r\n                          {campoTasa3 ?\r\n                            <p className=\"message-error-parrafo\">{t(\"Thepercentageexceeds100%\")}</p>\r\n                            : null}\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"3\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"feci\">{t(\"FECI\")}</Label>\r\n                          <AvField id=\"feci\"\r\n                            className=\"form-control\"\r\n                            name=\"feci\"\r\n                            type=\"select\"\r\n                            value={dataSet.feci ? \"true\" : \"false\"}\r\n                            required>\r\n                            <option value=\"true\">Si</option>\r\n                            <option value=\"false\">No</option>\r\n                          </AvField>\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n\r\n                {/* Treasury Curve */}\r\n                {/*\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"Minimum Rate value according to Treasury Curve\")} {rateProposalTreasuryCurve?.Description ? `${rateProposalTreasuryCurve?.Description}%` : ''}</h5>\r\n                    {treasuryCurveMessage && <div className=\"text-danger\">{t(\"For this Bank does not apply Treasury Curve\")}</div>}\r\n                    {+PropotalRate < +(rateProposalTreasuryCurve?.Description ?? 0) && <div className=\"text-danger\">{t(\"Lower Proposal Rate than Treasury Curve\")}</div>}\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup check className=\"my-2\">\r\n                          <AvInput type=\"checkbox\" defaultChecked={rateTreasuryCurve} name=\"rateTreasuryCurve\" onChange={() => { setRateTreasuryCurve(!rateTreasuryCurve) }} />\r\n                          <Label htmlFor=\"rateTreasuryCurve\"> {t(\"Rate according to the price of the Treasury Curve\")}</Label>\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                    {+PropotalRate < +(rateProposalTreasuryCurve?.Description ?? 0) && <>\r\n                      <Row>\r\n                        <Col md=\"12\">\r\n                          <AvGroup className=\"mb-3\">\r\n                            <Label htmlFor=\"opinion\">{t(\"Comment\")}</Label>\r\n                            <AvField\r\n                              className=\"form-control\"\r\n                              name=\"treasuryCurveComment\"\r\n                              type=\"textarea\"\r\n                              value={dataSet?.treasuryCurveComment}\r\n                              id=\"treasuryCurveComment\"\r\n                              rows=\"4\" />\r\n                          </AvGroup>\r\n                        </Col>\r\n                      </Row>\r\n                      <AttachmentFileCore attachmentFileInputModel={new AttachmentFileInputModel(locationData.transactionId, OPTs.PROCESS_PROPUESTACREDITO, OPTs.ACT_PROPUESTACREDITO)} />\r\n                    </>}\r\n\r\n                  </Col>\r\n                </Row>\r\n        */}\r\n                {/* CommissionSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <ComisionSeccion MontoFacilidad={MontoFacilidad} validation={dataValidation} dataSet={dataSet} items={commissions}\r\n                      onSaveItem={handleNewCommission}\r\n                      onDeleteItem={handleDeleteCommission} />\r\n                  </Col>\r\n                </Row>\r\n                {/* TermsSection */}\r\n                <h5>{t(\"Terms\")}</h5>\r\n                <Row>\r\n                  <Col md=\"4\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label htmlFor=\"termDays\">{t(\"Quantity\")}</Label>\r\n                      <AvField\r\n                        className=\"form-control\"\r\n                        name=\"termDays\"\r\n                        value={dataSet.termDays}\r\n                        onKeyUp={(e) => {\r\n                          setProposalRate(e.target.value)\r\n                          test(+currencyData.getRealPercent(document.getElementById('proposalRate').value));\r\n                          changeRateProposal(e.target.value, dataSet.termType || 'DÍAS')\r\n                        }}\r\n                        type=\"text\"\r\n                        validate={{\r\n                          number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                        }}\r\n                        id=\"termDays\" />\r\n                    </AvGroup>\r\n                  </Col>\r\n                  <Col md=\"4\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label>{t(\"DaysMonthsYears\")}</Label>\r\n                      <Select noOptionsMessage={() => \"\"}\r\n                        onChange={(e) => {\r\n                          setterminosSelect(typeTerms.find(x => x.value === e.value))\r\n                          dataReturn.termType = e.value;\r\n                          setdataReturn(dataReturn);\r\n                          changeRateProposal(proposalRate, e.value)\r\n                        }}\r\n                        options={typeTerms}\r\n                        placeholder={t(\"Select\")}\r\n                        value={terminosSelect}\r\n                      />\r\n                    </AvGroup>\r\n                  </Col>\r\n\r\n                  {/* <Col md=\"4\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label htmlFor=\"termDays\">{t(\"Terms in Days/Month/Year\")}</Label>\r\n                      <AvField\r\n                        className=\"form-control\"\r\n                        name=\"termDays\"\r\n                        value={dataSet.deadlinesDays}\r\n                        type=\"text\"\r\n                        validate={{\r\n                          number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                        }}\r\n                        id=\"termDays\" />\r\n                    </AvGroup>\r\n                  </Col> */}\r\n                  <Col md=\"12\">\r\n                    <AvGroup className=\"mb-3\">\r\n                      <Label htmlFor=\"termsDescription\">{t(\"Terms Description\")}</Label>\r\n                      <AvField\r\n                        className=\"form-control\"\r\n                        name=\"termDescription\"\r\n                        type=\"textarea\"\r\n                        id=\"termDescription\"\r\n                        value={dataSet.termDescription}\r\n                        rows=\"4\" />\r\n                    </AvGroup>\r\n                  </Col>\r\n                </Row>\r\n                {/* DisbursementSection */}\r\n                <DisbursementSection validation={dataValidation} dataSet={dataSet} disbursementTerms={disbursementTerms}\r\n                  onSaveDisbursementTerm={handleNewDisbursementTerm}\r\n                  onDeleteDisbursementTerm={handleDeleteDisbursementTerm}\r\n                  paymentPrograms={paymentPrograms}\r\n                  onSavePaymentProgram={handleNewPaymentProgram}\r\n                  onDeletePaymentProgram={handleDeletePaymentProgram}\r\n                  disbursementMethods={disbursementMethods}\r\n                  onSaveDisbursementMethod={handleNewDisbursementMethod}\r\n                  onDeleteDisbursementMethod={handleDeleteDisbursementMethod} />\r\n                {/* WarrantsSection */}\r\n                <WarrantsSection ViewSeccion={ViewSeccion} validation={dataValidation} dataSet={dataSet} warrants={warrants}\r\n                  onSaveItem={handleNewWarrant}\r\n                  onDeleteItem={handleDeleteWarrant} />\r\n                {/* LTV */}\r\n                <Row>\r\n                  <Col md=\"12\">\r\n                    <Row>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"relatedPart\">{t(\"LTV\")}(%)</Label>\r\n                        <AvGroup className=\"mb-3\">\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"ltv\"\r\n                            value={`${dataSet.ltv}%`}\r\n                            type=\"text\"\r\n                            onKeyUp={(e) => { let x = currencyData.getRealPercent(e.target.value); e.target.value = currencyData.formatPercent(x, e); }}\r\n                            // onChange={(e) => { let x = currencyData.getRealPercent(e.target.value); parseFloat(x) > 100 ? setcampoTasa4(true) : setcampoTasa4(false); }}\r\n                            id=\"ltv\" />\r\n                          {campoTasa4 ?\r\n                            <p className=\"message-error-parrafo\">{t(\"Thepercentageexceeds100%\")}</p>\r\n                            : null}\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <Label htmlFor=\"relatedPart\">{t(\"Escrow\")}</Label>\r\n                        <AvGroup check className=\"mb-3\">\r\n                          <Switch name=\"fd\"\r\n                            uncheckedIcon={<Offsymbol />}\r\n                            checkedIcon={<OnSymbol />}\r\n                            onColor=\"#007943\"\r\n                            id=\"check1\"\r\n                            className=\"form-label\"\r\n                            onChange={() => {\r\n                              setapplyEscrow(!applyEscrow);\r\n                            }}\r\n                            checked={applyEscrow}\r\n                          />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* SuretiesSection */}\r\n                <SuretiesSection validation={dataValidation} dataSet={dataSet} sureties={sureties}\r\n                  onSaveItem={handleNewSurety}\r\n                  onDeleteItem={handleDeleteSurety} />\r\n                {/* FinancialConditionsSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"FinancialConditions\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"finantialConditions\"\r\n                            type=\"textarea\"\r\n                            value={dataSet.finantialConditions}\r\n                            id=\"finantialConditions\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* AmbientalRiskSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"AmbientalRisk\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"category\">{t(\"Category\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"environmentRiskCategory\"\r\n                            type=\"text\"\r\n                            value={garantiaET}\r\n                            id=\"environmentRiskCategory\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"6\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"covenant\">{t(\"Covenant\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"covenant\"\r\n                            type=\"text\"\r\n                            value={dataSet.covenant}\r\n                            id=\"covenant\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"opinion\">{t(\"Opinion\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"environmentRiskOpinion\"\r\n                            type=\"textarea\"\r\n                            value={dataSet?.environmentRiskOpinion}\r\n                            id=\"environmentRiskOpinion\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* FinantialCovenantSection */}\r\n                <Row className=\"mb-3\">\r\n                  <Col md=\"12\">\r\n                    <h5>{t(\"FinantialCovenant\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"finantialCovenant\"\r\n                            value={dataSet.finantialCovenant}\r\n                            type=\"textarea\"\r\n                            id=\"finantialCovenant\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* LegalDocumentationSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"Status of Legal Documentation\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"legalDocumentation\"\r\n                            value={dataSet.legalDocumentation}\r\n                            type=\"textarea\"\r\n                            id=\"legalDocumentation\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* OtherConditionsSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"OtherConditions\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"otherConditions\"\r\n                            value={dataSet.otherConditions}\r\n                            type=\"textarea\"\r\n                            id=\"otherConditions\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* CreditRiskSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"CreditRisk\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n                          <Label htmlFor=\"creditrisk\">{t(\"Opinion\")}</Label>\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"creditRiskOpinion\"\r\n                            type=\"textarea\"\r\n                            value={dataSet?.creditRiskOpinion ?? \"\"}\r\n                            id=\"creditRiskOpinion\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                {/* ProvisionSection */}\r\n                <Row>\r\n                  <Col>\r\n                    <h5>{t(\"Provision\")}</h5>\r\n                    <Row>\r\n                      <Col md=\"12\">\r\n                        <AvGroup className=\"mb-3\">\r\n\r\n                          <AvField\r\n                            className=\"form-control\"\r\n                            name=\"provision\"\r\n                            value={dataSet.provision}\r\n                            type=\"textarea\"\r\n                            id=\"provision\"\r\n                            rows=\"4\" />\r\n                        </AvGroup>\r\n                      </Col>\r\n                    </Row>\r\n                  </Col>\r\n                </Row>\r\n                <Row className=\"my-2\">\r\n                  <Col xl=\"12 text-end\">\r\n                    <Button color=\"danger\"\r\n                      onClick={(e) => {\r\n                        setViewSeccion(!ViewSeccion);\r\n                        cargarFacilidades(locationData);\r\n\r\n                        resetData()\r\n\r\n                      }} style={{ margin: '5px' }}>\r\n                      <i className=\"mdi mdi-cancel mid-12px\"></i> {t(\"Cancel\")}\r\n                    </Button>\r\n                    <Button className=\"btn btn-primary\" type=\"submit\" color=\"success\" style={{ margin: '5px' }}>\r\n                      {t(\"Save\")}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </LoadingOverlay>\r\n            </CardBody>\r\n          </Card>\r\n          : null}\r\n      </AvForm>\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={t(\"SuccessDialog\")}\r\n          confirmButtonText={t(\"Confirm\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false);\r\n            cargarFacilidades(locationData)\r\n          }}\r\n        >\r\n          {t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={t(\"ErrorDialog\")}\r\n          confirmButtonText={t(\"Confirm\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={t(\"Yesdeleteit\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            setViewSeccion(!ViewSeccion);\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alertDelete ? (\r\n        <SweetAlert\r\n          title={t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={t(\"Yesdeleteit\")}\r\n          cancelButtonText={t(\"Cancel\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            if (tipo == \"eliminar\") {\r\n              props.setViewAutonomy(false);\r\n              backendServices.deleteFacility(dataSet?.facilityId ?? \"\", dataSet?.requestId ?? \"\").then(resp => {\r\n                if (resp.statusCode == \"500\") {\r\n                  seterror_dlg(false)\r\n                  setconfirm_alertDelete(false)\r\n                } else {\r\n                  setconfirm_alertDelete(false)\r\n                  resetData()\r\n                  setsuccessSave_dlg(true)\r\n                  // props.setLevelAutonomy(levelAutonomy => levelAutonomy - (+dataSet?.amount))\r\n                  // cargarFacilidades(locationData)\r\n                }\r\n                props.setViewAutonomy(true);\r\n              }).catch(err => {\r\n                props.setViewAutonomy(true);\r\n              })\r\n            }\r\n          }\r\n          }\r\n          onCancel={() => setconfirm_alertDelete(false)}\r\n        >\r\n          {t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n\r\n  );\r\n});\r\nListaFacilidad.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  editMode: PropTypes.bool,\r\n  onSaveFacility: PropTypes.func\r\n};\r\nListaFacilidad.defaultProps = {\r\n  items: [],\r\n  editMode: false\r\n};\r\nexport default ListaFacilidad;\r\n"]},"metadata":{},"sourceType":"module"}