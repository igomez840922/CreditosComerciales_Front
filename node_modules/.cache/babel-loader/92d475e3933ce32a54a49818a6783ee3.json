{"ast":null,"code":"import _createForOfIteratorHelper from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useTranslation,withTranslation}from\"react-i18next\";import*as opt from\"../../../../../helpers/options_helper\";import{Row,Col,Button,Label,Input,Modal,Card,CardBody,CardFooter,InputGroup}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import Select from\"react-select\";import Currency from\"../../../../../helpers/currency\";import{BackendServices,CoreServices,BpmServices}from\"../../../../../services\";import SessionHelper from\"../../../../../helpers/SessionHelper\";import moment from\"moment\";import{GetMontNumberByName,GetMontNameByNumber,Capitalize}from'../../../../../helpers/commons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalReciprocidad=function ModalReciprocidad(props){var currencyData=new Currency();var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),campoRequeridoAno=_useState2[0],setcampoRequeridoAno=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),campoRequeridoMes=_useState4[0],setcampoRequeridoMes=_useState4[1];var _useState5=useState(\"0000\"),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],setyear=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),month=_useState8[0],setmonth=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),mesSelect=_useState10[0],setmesSelect=_useState10[1];var meses=[{label:t(\"January\"),value:t(\"January\")},{label:t(\"February\"),value:t(\"February\")},{label:t(\"March\"),value:t(\"March\")},{label:t(\"April\"),value:t(\"April\")},{label:t(\"May\"),value:t(\"May\")},{label:t(\"June\"),value:t(\"June\")},{label:t(\"July\"),value:t(\"July\")},{label:t(\"August\"),value:t(\"August\")},{label:t(\"September\"),value:t(\"September\")},{label:t(\"October\"),value:t(\"October\")},{label:t(\"November\"),value:t(\"November\")},{label:t(\"December\"),value:t(\"December\")}];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),mainDebtor=_useState12[0],setmainDebtor=_useState12[1];var _useState13=useState(new CoreServices()),_useState14=_slicedToArray(_useState13,2),coreServices=_useState14[0],setcoreServices=_useState14[1];var _useState15=useState(new BackendServices()),_useState16=_slicedToArray(_useState15,2),backendServices=_useState16[0],setbackendServices=_useState16[1];var _useState17=useState(new SessionHelper()),_useState18=_slicedToArray(_useState17,2),sessionHelper=_useState18[0],setsessionHelper=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),deposits=_useState20[0],setdeposits=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),averageBalance=_useState22[0],setaverageBalance=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),debts=_useState24[0],setdebts=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),reciprocity=_useState26[0],setreciprocity=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),sow=_useState28[0],setsow=_useState28[1];var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),sales=_useState30[0],setsales=_useState30[1];React.useEffect(function(){var _props$dataRecipro$de,_props$dataRecipro,_props$dataRecipro$av,_props$dataRecipro2,_props$dataRecipro$re,_props$dataRecipro3,_props$dataRecipro$so,_props$dataRecipro4,_props$dataRecipro$sa,_props$dataRecipro5,_props$dataRecipro$ye,_props$dataRecipro6;setdeposits(currencyData.format((_props$dataRecipro$de=props===null||props===void 0?void 0:(_props$dataRecipro=props.dataRecipro)===null||_props$dataRecipro===void 0?void 0:_props$dataRecipro.deposits)!==null&&_props$dataRecipro$de!==void 0?_props$dataRecipro$de:0));setaverageBalance(currencyData.format((_props$dataRecipro$av=props===null||props===void 0?void 0:(_props$dataRecipro2=props.dataRecipro)===null||_props$dataRecipro2===void 0?void 0:_props$dataRecipro2.averageBalance)!==null&&_props$dataRecipro$av!==void 0?_props$dataRecipro$av:0));setreciprocity(currencyData.format((_props$dataRecipro$re=props===null||props===void 0?void 0:(_props$dataRecipro3=props.dataRecipro)===null||_props$dataRecipro3===void 0?void 0:_props$dataRecipro3.reciprocity)!==null&&_props$dataRecipro$re!==void 0?_props$dataRecipro$re:0));setsow(currencyData.format((_props$dataRecipro$so=props===null||props===void 0?void 0:(_props$dataRecipro4=props.dataRecipro)===null||_props$dataRecipro4===void 0?void 0:_props$dataRecipro4.sow)!==null&&_props$dataRecipro$so!==void 0?_props$dataRecipro$so:0));setsales(currencyData.format((_props$dataRecipro$sa=props===null||props===void 0?void 0:(_props$dataRecipro5=props.dataRecipro)===null||_props$dataRecipro5===void 0?void 0:_props$dataRecipro5.sales)!==null&&_props$dataRecipro$sa!==void 0?_props$dataRecipro$sa:0));var result=sessionHelper.get(opt.VARNAME_LOCATIONDATA);if(result!==undefined&&result!==null){loadMainDebtor(result.transactionId);}// Read Api Service data\nvar defaultVal=null;setmesSelect(undefined);setyear((_props$dataRecipro$ye=(_props$dataRecipro6=props.dataRecipro)===null||_props$dataRecipro6===void 0?void 0:_props$dataRecipro6.year)!==null&&_props$dataRecipro$ye!==void 0?_props$dataRecipro$ye:\"0000\");try{// console.log(meses.length );\n// console.log(props.dataRecipro.month );\n// console.log(mesSelect);\nif(meses.length>0&&props.dataRecipro.month!=null){defaultVal=meses.find(function(x){return x.value==props.dataRecipro.month;});if(defaultVal!==undefined){setmesSelect(defaultVal);setmonth(defaultVal.value.toUpperCase());}}else{defaultVal=meses[0];setmesSelect(defaultVal);setmonth(defaultVal.value.toUpperCase());}}catch(err){}},[props.isOpen]);React.useEffect(function(){getReciprocityT24();getDebts();},[year,month,mainDebtor]);React.useEffect(function(){calculateData();},[sales,deposits,averageBalance,reciprocity,sow,debts]);//cargar deudor principal\nfunction loadMainDebtor(_x){return _loadMainDebtor.apply(this,arguments);}// Submitimos formulario para busqueda de clientes\nfunction _loadMainDebtor(){_loadMainDebtor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(transactionId){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultPrincipalDebtor(transactionId);case 2:result=_context.sent;if(result!==undefined&&result!==null){setmainDebtor(result);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _loadMainDebtor.apply(this,arguments);}function handleSubmit(event,errors,values){var _values$sales,_values$deposits,_values$sow,_mesSelect$value;event.preventDefault();if(errors.length>0){return;}// values.sales = sales !== null ? sales : props.dataRecipro.sales;\n// values.averageBalance = averageBalance !== null ? averageBalance : props.dataRecipro.averageBalance;\n// values.deposits = deposits !== null ? deposits : props.dataRecipro.deposits;\n// values.reciprocity = reciprocity !== null ? reciprocity : props.dataRecipro.reciprocity;\n// values.sow = sow !== null ? sow : props.dataRecipro.sow;\n// values.year = year !== null ? year : props.dataRecipro.year;\n// values.month = mesSelect?.value ?? \"Enero\";\nvalues.sales=Number(currencyData.getRealValue((_values$sales=values===null||values===void 0?void 0:values.sales)!==null&&_values$sales!==void 0?_values$sales:0));// values.averageBalance = averageBalance !== null ? averageBalance : props.dataRecipro.averageBalance;\nvalues.averageBalance=\"\";values.deposits=Number(currencyData.getRealValue((_values$deposits=values===null||values===void 0?void 0:values.deposits)!==null&&_values$deposits!==void 0?_values$deposits:0));values.reciprocity=reciprocity!==null?reciprocity:props.dataRecipro.reciprocity;values.sow=Number(currencyData.getRealValue((_values$sow=values===null||values===void 0?void 0:values.sow)!==null&&_values$sow!==void 0?_values$sow:0));values.year=year!==null?year:props.dataRecipro.year;values.month=(_mesSelect$value=mesSelect===null||mesSelect===void 0?void 0:mesSelect.value)!==null&&_mesSelect$value!==void 0?_mesSelect$value:\"Enero\";console.log(values);// return\nif(props.tipo==\"guardar\"){props.dataManagament(values,props.tipo);}else{values.reciprocity_id=props.dataRecipro.reciprocity_id;props.dataManagament(values,props.tipo);}// props.onSubmit(values);\n}function getReciprocityT24(){return _getReciprocityT.apply(this,arguments);}//carga las deudas \nfunction _getReciprocityT(){_getReciprocityT=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(mainDebtor!==null&&year!==null&&year>1995&&year<=Number(moment().format(\"YYYY\"))&&month!==null)){_context2.next=6;break;}_context2.next=3;return coreServices.getReciprocityByYear(mainDebtor===null||mainDebtor===void 0?void 0:mainDebtor.customerNumberT24,year);case 3:data=_context2.sent;console.log(\"getReciprocity\",year,month,data);if(data!==undefined){setdeposits(currencyData.format(data.deposits));setaverageBalance(currencyData.format(data.averageAmt));}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _getReciprocityT.apply(this,arguments);}function getDebts(){return _getDebts.apply(this,arguments);}function _getDebts(){_getDebts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var monthNum,date,result,shortDebts,longDebts,sowData,_iterator,_step,short,_iterator2,_step2,long;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(mainDebtor!==null&&year!==null&&year>1995&&year<=Number(moment().format(\"YYYY\"))&&month!==null)){_context3.next=21;break;}monthNum=GetMontNumberByName(month);date=year+\"-\"+monthNum;result=sessionHelper.get(opt.VARNAME_LOCATIONDATA);if(!(result!==undefined&&result!==null)){_context3.next=21;break;}_context3.next=7;return backendServices.consultBankingRelationsDebtsCP(result.transactionId);case 7:shortDebts=_context3.sent;if(shortDebts!==undefined&&shortDebts.getBankingRelationCPDTOList.length>0){shortDebts=shortDebts.getBankingRelationCPDTOList.filter(function(element){return element.status===true;//&& element.date.indexOf(date) >= 0\n});}_context3.next=11;return backendServices.consultBankRelationsDebtsLP(result.transactionId);case 11:longDebts=_context3.sent;if(longDebts!==undefined&&longDebts.bankingRelationLPDTOList.length>0){longDebts=longDebts.bankingRelationLPDTOList.filter(function(element){return element.status===true;//&& element.date.indexOf(date) >= 0\n});}sowData={otherBank:0,banesco:0,total:0,sow:0};sowData.otherBank=0;sowData.banesco=0;////////////////////////////////////////////////\nif(shortDebts!==null){_iterator=_createForOfIteratorHelper(shortDebts);try{for(_iterator.s();!(_step=_iterator.n()).done;){short=_step.value;if(short.bank.toLowerCase().indexOf('banesco')>=0){if(short.facilityType.toLowerCase().indexOf('lc')>=0||short.facilityType.toLowerCase().indexOf('l.')>=0||short.facilityType.toLowerCase().indexOf('linea')>=0||short.facilityType.toLowerCase().indexOf('línea')>=0){sowData.banesco+=Number(short.amount);}else if(short.facilityType.toLowerCase().indexOf('p.')>=0||short.facilityType.toLowerCase().indexOf('prestamo')>=0||short.facilityType.toLowerCase().indexOf('préstamo')>=0){sowData.banesco+=Number(short.debitBalance1)+Number(short.debitBalance2)+Number(short.debitBalance3);}else if(short.facilityType.toLowerCase().indexOf('nueva')>=0||short.facilityType.toLowerCase().indexOf('nuevo')>=0){sowData.banesco+=Number(short.amount);}else{sowData.banesco+=Number(short.amount);}}else{if(short.facilityType.toLowerCase().indexOf('lc')>=0||short.facilityType.toLowerCase().indexOf('l.')>=0||short.facilityType.toLowerCase().indexOf('linea')>=0||short.facilityType.toLowerCase().indexOf('línea')>=0){sowData.otherBank+=Number(short.amount);}else if(short.facilityType.toLowerCase().indexOf('p.')>=0||short.facilityType.toLowerCase().indexOf('prestamo')>=0||short.facilityType.toLowerCase().indexOf('préstamo')>=0){sowData.otherBank+=Number(short.debitBalance1)+Number(short.debitBalance2)+Number(short.debitBalance3);}else if(short.facilityType.toLowerCase().indexOf('nueva')>=0||short.facilityType.toLowerCase().indexOf('nuevo')>=0){sowData.otherBank+=Number(short.amount);}else{sowData.otherBank+=Number(short.amount);}//sowApproved.otherBank += Number(short.amount)\n//sowProposal.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\n}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(longDebts!==null){_iterator2=_createForOfIteratorHelper(longDebts);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){long=_step2.value;if(short.bank.toLowerCase().indexOf('banesco')>=0){if(short.facilityType.toLowerCase().indexOf('lc')>=0||short.facilityType.toLowerCase().indexOf('l.')>=0||short.facilityType.toLowerCase().indexOf('linea')>=0||short.facilityType.toLowerCase().indexOf('línea')>=0){sowData.banesco+=Number(short.amount);}else if(short.facilityType.toLowerCase().indexOf('p.')>=0||short.facilityType.toLowerCase().indexOf('prestamo')>=0||short.facilityType.toLowerCase().indexOf('préstamo')>=0){sowData.banesco+=Number(short.debitBalance1)+Number(short.debitBalance2)+Number(short.debitBalance3);}else if(short.facilityType.toLowerCase().indexOf('nueva')>=0||short.facilityType.toLowerCase().indexOf('nuevo')>=0){sowData.banesco+=Number(short.amount);}else{sowData.banesco+=Number(short.amount);}}else{if(short.facilityType.toLowerCase().indexOf('lc')>=0||short.facilityType.toLowerCase().indexOf('l.')>=0||short.facilityType.toLowerCase().indexOf('linea')>=0||short.facilityType.toLowerCase().indexOf('línea')>=0){sowData.otherBank+=Number(short.amount);}else if(short.facilityType.toLowerCase().indexOf('p.')>=0||short.facilityType.toLowerCase().indexOf('prestamo')>=0||short.facilityType.toLowerCase().indexOf('préstamo')>=0){sowData.otherBank+=Number(short.debitBalance1)+Number(short.debitBalance2)+Number(short.debitBalance3);}else if(short.facilityType.toLowerCase().indexOf('nueva')>=0||short.facilityType.toLowerCase().indexOf('nuevo')>=0){sowData.otherBank+=Number(short.amount);}else{sowData.otherBank+=Number(short.amount);}//sowApproved.otherBank += Number(short.amount)\n//sowProposal.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\n}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}///////////////////////////////////////////////\n/*\r\n        if (shortDebts !== null) {\r\n          for (var short of shortDebts) {\r\n            if (short.bank.toLowerCase().indexOf('banesco') >= 0) {\r\n              sowData.banesco += Number(short.amount)\r\n              sowData.banesco += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n            }\r\n            else {\r\n              sowData.otherBank += Number(short.amount)\r\n              sowData.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n            }\r\n          }\r\n        }\r\n\r\n        if (longDebts !== null) {\r\n          for (var long of longDebts) {\r\n            if (long.bank.toLowerCase().indexOf('banesco') >= 0) {\r\n              sowData.banesco += Number(long.amount)\r\n              sowData.banesco += Number(long.debitBalance1) + Number(long.debitBalance2) + Number(long.debitBalance3)\r\n            }\r\n            else {\r\n              sowData.otherBank += Number(long.amount)\r\n              sowData.otherBank += Number(long.debitBalance1) + Number(long.debitBalance2) + Number(long.debitBalance3)\r\n            }\r\n          }\r\n        }\r\n        */sowData.total=sowData.banesco+sowData.otherBank;sowData.sow=sowData.total>0?Number(sowData.banesco/sowData.total*100):0;setdebts(sowData);case 21:case\"end\":return _context3.stop();}}},_callee3);}));return _getDebts.apply(this,arguments);}function calculateData(){if(sales>0){var recipro=Number(deposits)/Number(sales)*100;setreciprocity(currencyData.format(Number(recipro).toFixed(2)));}//Calcular SOW\nif(debts!==null){//sowShort,sowLong\nsetsow(currencyData.format(Number(debts.sow).toFixed(2)));}}function check(e){var tecla=document.all?e.keyCode:e.which;//Tecla de retroceso para borrar, siempre la permite\nif(tecla==45){e.preventDefault();return true;}return false;}return/*#__PURE__*/_jsxs(Modal,{size:\"md\",isOpen:props.isOpen,toggle:props.toggle,centered:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title mt-0\",children:t(\"Reciprocity\")}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:props.toggle,\"data-dismiss\":\"modal\",className:\"close\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",style:{backgroundColor:\"#f3f5f7\"},children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(AvForm,{id:\"frmSearch\",className:\"needs-validation\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"idYear\",children:t(\"Date\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"requestDate\",type:\"month\",id:\"requestDate\",onChange:function onChange(e){setyear(e.target.value.split(\"-\")[0]);var monthselect=e.target.value.split(\"-\")[1];monthselect=GetMontNameByNumber(Number(monthselect));setmonth(monthselect);monthselect=Capitalize(monthselect);console.log(monthselect);setmesSelect(meses.find(function(x){return x.value===monthselect;}));},value:moment(year+\"-\"+(mesSelect!==undefined?GetMontNumberByName(mesSelect.value.toUpperCase()):\"01\")).format(\"YYYY-MM\")})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sales\",children:t(\"Sales\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"sales\",id:\"sales\",onChange:function onChange(e){setsales(currencyData.getRealValue(e.target.value));},value:sales,pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"deposits\",children:t(\"Deposits\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"deposits\",onChange:function onChange(e){setdeposits(currencyData.getRealValue(e.target.value));},value:deposits,id:\"deposits\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"reciprocity\",children:t(\"Reciprocity\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",type:\"text\",name:\"reciprocity\",onChange:function onChange(e){setreciprocity(currencyData.getRealValue(e.target.value));},value:reciprocity,id:\"reciprocity\",pattern:\"^[0-9,.]*$\",onKeyUp:function onKeyUp(e){var x=currencyData.getRealValue(e.target.value);e.target.value=currencyData.format(x);}})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"sow\",children:t(\"Sow\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\"// type=\"text\"\n,type:\"number\",min:0,name:\"sow\",value:sow,onChange:function onChange(e){setsow(currencyData.getRealValue(e.target.value));},onKeyPress:function onKeyPress(e){return check(e);},id:\"sow\"// pattern=\"^[0-9,.]*$\"\n// onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\n})]})})]})}),/*#__PURE__*/_jsxs(CardFooter,{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsxs(Button,{id:\"btnNew\",color:\"danger\",type:\"button\",style:{margin:'5px'},onClick:props.toggle,\"data-dismiss\":\"modal\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi mdi-cancel mid-12px\"}),\" \",t(\"Cancel\")]}),props.botones?/*#__PURE__*/_jsxs(Button,{id:\"btnSearch\",color:\"success\",type:\"submit\",style:{margin:'5px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-content-save mdi-12px\"}),\" \",\" \",props.tipo==\"guardar\"?t(\"Save\"):t(\"Save\")]}):null]})]})})})})})]});};export default ModalReciprocidad;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/ModalReciprocidad.js"],"names":["React","useState","useTranslation","withTranslation","opt","Row","Col","Button","Label","Input","Modal","Card","CardBody","CardFooter","InputGroup","AvForm","AvField","AvGroup","Select","Currency","BackendServices","CoreServices","BpmServices","SessionHelper","moment","GetMontNumberByName","GetMontNameByNumber","Capitalize","ModalReciprocidad","props","currencyData","t","i18n","campoRequeridoAno","setcampoRequeridoAno","campoRequeridoMes","setcampoRequeridoMes","year","setyear","month","setmonth","undefined","mesSelect","setmesSelect","meses","label","value","mainDebtor","setmainDebtor","coreServices","setcoreServices","backendServices","setbackendServices","sessionHelper","setsessionHelper","deposits","setdeposits","averageBalance","setaverageBalance","debts","setdebts","reciprocity","setreciprocity","sow","setsow","sales","setsales","useEffect","format","dataRecipro","result","get","VARNAME_LOCATIONDATA","loadMainDebtor","transactionId","defaultVal","length","find","x","toUpperCase","err","isOpen","getReciprocityT24","getDebts","calculateData","consultPrincipalDebtor","handleSubmit","event","errors","values","preventDefault","Number","getRealValue","console","log","tipo","dataManagament","reciprocity_id","getReciprocityByYear","customerNumberT24","data","averageAmt","monthNum","date","consultBankingRelationsDebtsCP","shortDebts","getBankingRelationCPDTOList","filter","element","status","consultBankRelationsDebtsLP","longDebts","bankingRelationLPDTOList","sowData","otherBank","banesco","total","short","bank","toLowerCase","indexOf","facilityType","amount","debitBalance1","debitBalance2","debitBalance3","long","recipro","toFixed","check","e","tecla","document","all","keyCode","which","toggle","backgroundColor","target","split","monthselect","textAlign","margin","botones"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\nimport * as opt from \"../../../../../helpers/options_helper\"\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label,\r\n  Input,\r\n  Modal,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  InputGroup,\r\n} from \"reactstrap\"\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport Select from \"react-select\";\r\nimport Currency from \"../../../../../helpers/currency\";\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../../../services\";\r\nimport SessionHelper from \"../../../../../helpers/SessionHelper\";\r\nimport moment from \"moment\";\r\n\r\nimport { GetMontNumberByName, GetMontNameByNumber, Capitalize } from '../../../../../helpers/commons'\r\n\r\nconst ModalReciprocidad = (props) => {\r\n  const currencyData = new Currency();\r\n  const { t, i18n } = useTranslation();\r\n  const [campoRequeridoAno, setcampoRequeridoAno] = useState(false);\r\n  const [campoRequeridoMes, setcampoRequeridoMes] = useState(false);\r\n  const [year, setyear] = useState(\"0000\");\r\n  const [month, setmonth] = useState(null);\r\n  const [mesSelect, setmesSelect] = useState(undefined);\r\n  const meses = [{ label: t(\"January\"), value: t(\"January\") }\r\n    , { label: t(\"February\"), value: t(\"February\") },\r\n  { label: t(\"March\"), value: t(\"March\") },\r\n  { label: t(\"April\"), value: t(\"April\") },\r\n  { label: t(\"May\"), value: t(\"May\") },\r\n  { label: t(\"June\"), value: t(\"June\") },\r\n  { label: t(\"July\"), value: t(\"July\") },\r\n  { label: t(\"August\"), value: t(\"August\") },\r\n  { label: t(\"September\"), value: t(\"September\") },\r\n  { label: t(\"October\"), value: t(\"October\") },\r\n  { label: t(\"November\"), value: t(\"November\") },\r\n  { label: t(\"December\"), value: t(\"December\") }];\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n\r\n  const [coreServices, setcoreServices] = useState(new CoreServices());\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [sessionHelper, setsessionHelper] = useState(new SessionHelper());\r\n\r\n  const [deposits, setdeposits] = useState(null)\r\n  const [averageBalance, setaverageBalance] = useState(null)\r\n  const [debts, setdebts] = useState(null)\r\n\r\n  const [reciprocity, setreciprocity] = useState(null)\r\n  const [sow, setsow] = useState(null)\r\n  const [sales, setsales] = useState(null)\r\n\r\n  React.useEffect(() => {\r\n    setdeposits(currencyData.format(props?.dataRecipro?.deposits ?? 0))\r\n    setaverageBalance(currencyData.format(props?.dataRecipro?.averageBalance ?? 0))\r\n    setreciprocity(currencyData.format(props?.dataRecipro?.reciprocity ?? 0))\r\n    setsow(currencyData.format(props?.dataRecipro?.sow ?? 0))\r\n    setsales(currencyData.format(props?.dataRecipro?.sales ?? 0))\r\n    var result = sessionHelper.get(opt.VARNAME_LOCATIONDATA);\r\n    if (result !== undefined && result !== null) {\r\n      loadMainDebtor(result.transactionId)\r\n    }\r\n\r\n    // Read Api Service data\r\n    var defaultVal = null;\r\n    setmesSelect(undefined)\r\n    \r\n    setyear(props.dataRecipro?.year??\"0000\")\r\n    try {\r\n      // console.log(meses.length );\r\n      // console.log(props.dataRecipro.month );\r\n      // console.log(mesSelect);\r\n      if (meses.length > 0 && props.dataRecipro.month != null) {\r\n        defaultVal = meses.find(x => x.value == props.dataRecipro.month);\r\n        if (defaultVal !== undefined) {\r\n          setmesSelect(defaultVal);\r\n          setmonth(defaultVal.value.toUpperCase())\r\n        }\r\n      }\r\n      else {\r\n        defaultVal = meses[0];\r\n        setmesSelect(defaultVal);\r\n        setmonth(defaultVal.value.toUpperCase());\r\n      }\r\n    }\r\n    catch (err) { }\r\n  }, [props.isOpen]);\r\n\r\n  React.useEffect(() => {\r\n    getReciprocityT24();\r\n    getDebts();\r\n  }, [year, month, mainDebtor]);\r\n\r\n  React.useEffect(() => {\r\n    calculateData()\r\n  }, [sales, deposits, averageBalance, reciprocity, sow, debts]);\r\n\r\n  //cargar deudor principal\r\n  async function loadMainDebtor(transactionId) {\r\n    var result = await backendServices.consultPrincipalDebtor(transactionId)\r\n    if (result !== undefined && result !== null) {\r\n      setmainDebtor(result);\r\n    }\r\n  }\r\n\r\n  // Submitimos formulario para busqueda de clientes\r\n  function handleSubmit(event, errors, values) {\r\n\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n\r\n    // values.sales = sales !== null ? sales : props.dataRecipro.sales;\r\n    // values.averageBalance = averageBalance !== null ? averageBalance : props.dataRecipro.averageBalance;\r\n    // values.deposits = deposits !== null ? deposits : props.dataRecipro.deposits;\r\n    // values.reciprocity = reciprocity !== null ? reciprocity : props.dataRecipro.reciprocity;\r\n    // values.sow = sow !== null ? sow : props.dataRecipro.sow;\r\n    // values.year = year !== null ? year : props.dataRecipro.year;\r\n    // values.month = mesSelect?.value ?? \"Enero\";\r\n    values.sales = Number(currencyData.getRealValue(values?.sales ?? 0));\r\n    // values.averageBalance = averageBalance !== null ? averageBalance : props.dataRecipro.averageBalance;\r\n    values.averageBalance = \"\";\r\n    values.deposits = Number(currencyData.getRealValue(values?.deposits ?? 0));\r\n    values.reciprocity = reciprocity !== null ? reciprocity : props.dataRecipro.reciprocity;\r\n    values.sow = Number(currencyData.getRealValue(values?.sow ?? 0));\r\n    values.year = year !== null ? year : props.dataRecipro.year;\r\n    values.month = mesSelect?.value ?? \"Enero\";\r\n    console.log(values);\r\n    // return\r\n    if (props.tipo == \"guardar\") {\r\n      props.dataManagament(values, props.tipo);\r\n    } else {\r\n      values.reciprocity_id = props.dataRecipro.reciprocity_id;\r\n      props.dataManagament(values, props.tipo);\r\n    }\r\n    // props.onSubmit(values);\r\n  }\r\n\r\n  async function getReciprocityT24() {\r\n    if (mainDebtor !== null && year !== null && year > 1995 && year <= Number(moment().format(\"YYYY\")) && month !== null) {\r\n      var data = await coreServices.getReciprocityByYear(mainDebtor?.customerNumberT24, year);\r\n      console.log(\"getReciprocity\", year, month, data);\r\n      if (data !== undefined) {\r\n        setdeposits(currencyData.format(data.deposits))\r\n        setaverageBalance(currencyData.format(data.averageAmt))\r\n      }\r\n    }\r\n  }\r\n\r\n  //carga las deudas \r\n  async function getDebts() {\r\n    if (mainDebtor !== null && year !== null && year > 1995 && year <= Number(moment().format(\"YYYY\")) && month !== null) {\r\n\r\n      var monthNum = GetMontNumberByName(month);\r\n      var date = year + \"-\" + monthNum;\r\n\r\n      var result = sessionHelper.get(opt.VARNAME_LOCATIONDATA);\r\n      if (result !== undefined && result !== null) {\r\n        var shortDebts = await backendServices.consultBankingRelationsDebtsCP(result.transactionId)\r\n        if (shortDebts !== undefined && shortDebts.getBankingRelationCPDTOList.length > 0) {\r\n          shortDebts = shortDebts.getBankingRelationCPDTOList.filter((element) => {\r\n            return (element.status === true);//&& element.date.indexOf(date) >= 0\r\n          })\r\n        }\r\n\r\n        var longDebts = await backendServices.consultBankRelationsDebtsLP(result.transactionId)\r\n        if (longDebts !== undefined && longDebts.bankingRelationLPDTOList.length > 0) {\r\n          longDebts = longDebts.bankingRelationLPDTOList.filter((element) => {\r\n            return (element.status === true);//&& element.date.indexOf(date) >= 0\r\n          })\r\n        }\r\n\r\n        \r\n        var sowData = { otherBank: 0, banesco: 0, total: 0, sow: 0 }\r\n        sowData.otherBank = 0;\r\n        sowData.banesco = 0;\r\n\r\n        ////////////////////////////////////////////////\r\n        if (shortDebts !== null) {\r\n          for (var short of shortDebts) {\r\n            if (short.bank.toLowerCase().indexOf('banesco') >= 0) {\r\n    \r\n              if (short.facilityType.toLowerCase().indexOf('lc') >= 0 || short.facilityType.toLowerCase().indexOf('l.') >= 0 || short.facilityType.toLowerCase().indexOf('linea') >= 0 || short.facilityType.toLowerCase().indexOf('línea') >= 0) {\r\n                sowData.banesco += Number(short.amount)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('p.') >= 0 || short.facilityType.toLowerCase().indexOf('prestamo') >= 0 || short.facilityType.toLowerCase().indexOf('préstamo') >= 0) {\r\n                sowData.banesco += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('nueva') >= 0 || short.facilityType.toLowerCase().indexOf('nuevo') >= 0){\r\n                sowData.banesco += Number(short.amount)            \r\n              }\r\n              else{\r\n                sowData.banesco += Number(short.amount)        \r\n              }\r\n            }\r\n            else {\r\n              if (short.facilityType.toLowerCase().indexOf('lc') >= 0 || short.facilityType.toLowerCase().indexOf('l.') >= 0 || short.facilityType.toLowerCase().indexOf('linea') >= 0 || short.facilityType.toLowerCase().indexOf('línea') >= 0) {\r\n                sowData.otherBank += Number(short.amount)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('p.') >= 0 || short.facilityType.toLowerCase().indexOf('prestamo') >= 0 || short.facilityType.toLowerCase().indexOf('préstamo') >= 0) {\r\n                sowData.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('nueva') >= 0 || short.facilityType.toLowerCase().indexOf('nuevo') >= 0){\r\n                sowData.otherBank += Number(short.amount)            \r\n              }\r\n              else{\r\n                sowData.otherBank += Number(short.amount)            \r\n              }\r\n              //sowApproved.otherBank += Number(short.amount)\r\n              //sowProposal.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n            }\r\n          }\r\n        }\r\n        if (longDebts !== null) {\r\n          for (var long of longDebts) {\r\n            if (short.bank.toLowerCase().indexOf('banesco') >= 0) {\r\n    \r\n              if (short.facilityType.toLowerCase().indexOf('lc') >= 0 || short.facilityType.toLowerCase().indexOf('l.') >= 0 || short.facilityType.toLowerCase().indexOf('linea') >= 0 || short.facilityType.toLowerCase().indexOf('línea') >= 0) {\r\n                sowData.banesco += Number(short.amount)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('p.') >= 0 || short.facilityType.toLowerCase().indexOf('prestamo') >= 0 || short.facilityType.toLowerCase().indexOf('préstamo') >= 0) {\r\n                sowData.banesco += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('nueva') >= 0 || short.facilityType.toLowerCase().indexOf('nuevo') >= 0){\r\n                sowData.banesco += Number(short.amount)            \r\n              }\r\n              else{\r\n                sowData.banesco += Number(short.amount)            \r\n              }\r\n            }\r\n            else {\r\n              if (short.facilityType.toLowerCase().indexOf('lc') >= 0 || short.facilityType.toLowerCase().indexOf('l.') >= 0 || short.facilityType.toLowerCase().indexOf('linea') >= 0 || short.facilityType.toLowerCase().indexOf('línea') >= 0) {\r\n                sowData.otherBank += Number(short.amount)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('p.') >= 0 || short.facilityType.toLowerCase().indexOf('prestamo') >= 0 || short.facilityType.toLowerCase().indexOf('préstamo') >= 0) {\r\n                sowData.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n              }\r\n              else if (short.facilityType.toLowerCase().indexOf('nueva') >= 0 || short.facilityType.toLowerCase().indexOf('nuevo') >= 0){\r\n                sowData.otherBank += Number(short.amount)            \r\n              }\r\n              else{\r\n                sowData.otherBank += Number(short.amount)            \r\n              }\r\n              //sowApproved.otherBank += Number(short.amount)\r\n              //sowProposal.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n            }\r\n          }\r\n        }\r\n        ///////////////////////////////////////////////\r\n\r\n        /*\r\n        if (shortDebts !== null) {\r\n          for (var short of shortDebts) {\r\n            if (short.bank.toLowerCase().indexOf('banesco') >= 0) {\r\n              sowData.banesco += Number(short.amount)\r\n              sowData.banesco += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n            }\r\n            else {\r\n              sowData.otherBank += Number(short.amount)\r\n              sowData.otherBank += Number(short.debitBalance1) + Number(short.debitBalance2) + Number(short.debitBalance3)\r\n            }\r\n          }\r\n        }\r\n\r\n        if (longDebts !== null) {\r\n          for (var long of longDebts) {\r\n            if (long.bank.toLowerCase().indexOf('banesco') >= 0) {\r\n              sowData.banesco += Number(long.amount)\r\n              sowData.banesco += Number(long.debitBalance1) + Number(long.debitBalance2) + Number(long.debitBalance3)\r\n            }\r\n            else {\r\n              sowData.otherBank += Number(long.amount)\r\n              sowData.otherBank += Number(long.debitBalance1) + Number(long.debitBalance2) + Number(long.debitBalance3)\r\n            }\r\n          }\r\n        }\r\n        */\r\n\r\n        sowData.total = sowData.banesco + sowData.otherBank;\r\n        sowData.sow = sowData.total > 0 ? Number(sowData.banesco / sowData.total * 100) : 0;\r\n\r\n        setdebts(sowData)\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  function calculateData() {\r\n    if (sales > 0) {\r\n      var recipro = (Number(deposits) / Number(sales)) * 100;\r\n      setreciprocity(currencyData.format(Number(recipro).toFixed(2)))\r\n    }\r\n\r\n    //Calcular SOW\r\n    if (debts !== null) {\r\n      //sowShort,sowLong\r\n      setsow(currencyData.format(Number(debts.sow).toFixed(2)));\r\n    }\r\n  }\r\n\r\n  function check(e) {\r\n    let tecla = (document.all) ? e.keyCode : e.which;\r\n    //Tecla de retroceso para borrar, siempre la permite\r\n    if (tecla == 45) {\r\n      e.preventDefault();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      size=\"md\"\r\n      isOpen={props.isOpen}\r\n      toggle={props.toggle}\r\n      centered={true}>\r\n      <div className=\"modal-header\">\r\n        <h5 className=\"modal-title mt-0\">{t(\"Reciprocity\")}</h5>\r\n        <button\r\n          type=\"button\"\r\n          onClick={props.toggle}\r\n          data-dismiss=\"modal\"\r\n          className=\"close\"\r\n          aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div className=\"modal-body\" style={{ backgroundColor: \"#f3f5f7\" }}>\r\n        <Row>\r\n          <Col xl=\"12\">\r\n            <AvForm id=\"frmSearch\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n              <Card>\r\n                <CardBody>\r\n                  <Row>\r\n          {/* {mesSelect !== undefined ?mesSelect.value:\"01\"} */}\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"idYear\">{t(\"Date\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          name=\"requestDate\"\r\n                          type=\"month\"\r\n                          id=\"requestDate\"\r\n                          onChange={(e) => { setyear(e.target.value.split(\"-\")[0]); var monthselect = e.target.value.split(\"-\")[1]; monthselect = GetMontNameByNumber(Number(monthselect)); setmonth(monthselect); monthselect = Capitalize(monthselect); console.log(monthselect); setmesSelect(meses.find(x => x.value === monthselect)); }}\r\n                          value={moment(year + \"-\" + (mesSelect !== undefined ? GetMontNumberByName(mesSelect.value.toUpperCase()) : \"01\")).format(\"YYYY-MM\")}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n\r\n                    {/*\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"idYear\">{t(\"Year\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"year\"\r\n                          id=\"year\"\r\n                          onChange={(e) => { setyear(e.target.value);}}\r\n                          value={props.dataRecipro.year}\r\n                          validate={{\r\n                            required: { value: true, errorMessage: t(\"Required Field\") },\r\n                            number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"idMonth\">{t(\"Month\")}</Label>\r\n                        <Select noOptionsMessage={() => \"\"} \r\n                          onChange={(e) => { setmesSelect(meses.find(x => x.value === e.value)); setmonth(e.value);}}\r\n                          options={meses}\r\n                          id=\"sustainableCustomer\"\r\n                          classNamePrefix=\"select2-selection\"\r\n                          placeholder={t(\"toselect\")}\r\n                          value={mesSelect}\r\n                        // value={props.dataRecipro.mes}\r\n                        />\r\n                        {campoRequeridoMes ?\r\n                          <p className=\"message-error-parrafo\">{t(\"Required Field\")}</p>\r\n                          : null}\r\n                      </div>\r\n                    </Col>\r\n                        */}\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"sales\">{t(\"Sales\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"sales\"\r\n                          id=\"sales\"\r\n                          onChange={(e) => { setsales(currencyData.getRealValue(e.target.value)); }}\r\n                          value={sales}\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"deposits\">{t(\"Deposits\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"deposits\"\r\n                          onChange={(e) => { setdeposits(currencyData.getRealValue(e.target.value)); }}\r\n                          value={deposits}\r\n                          id=\"deposits\"\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    {/* <Col md=\"3\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"averagebalance\">{t(\"AverageBalance\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"averageBalance\"\r\n                          onChange={(e) => { setaverageBalance(currencyData.getRealValue(e.target.value)); }}\r\n                          value={averageBalance}\r\n                          id=\"averageBalance\"\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col> */}\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"reciprocity\">{t(\"Reciprocity\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          type=\"text\"\r\n                          name=\"reciprocity\"\r\n                          onChange={(e) => { setreciprocity(currencyData.getRealValue(e.target.value)); }}\r\n                          value={reciprocity}\r\n                          id=\"reciprocity\"\r\n                          pattern=\"^[0-9,.]*$\"\r\n                          onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col md=\"6\">\r\n                      <div className=\"mb-3\">\r\n                        <Label htmlFor=\"sow\">{t(\"Sow\")}</Label>\r\n                        <AvField\r\n                          className=\"form-control\"\r\n                          // type=\"text\"\r\n                          type=\"number\"\r\n                          min={0}\r\n                          name=\"sow\"\r\n                          value={sow}\r\n                          onChange={(e) => { setsow(currencyData.getRealValue(e.target.value)); }}\r\n                          onKeyPress={(e) => { return check(e) }}\r\n                          id=\"sow\"\r\n                        // pattern=\"^[0-9,.]*$\"\r\n                        // onKeyUp={(e) => { let x = currencyData.getRealValue(e.target.value); e.target.value = currencyData.format(x); }}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n                </CardBody>\r\n                <CardFooter style={{ textAlign: \"right\" }}>\r\n                  <Button id=\"btnNew\" color=\"danger\" type=\"button\" style={{ margin: '5px' }} onClick={props.toggle} data-dismiss=\"modal\">\r\n                    <i className=\"mdi mdi mdi-cancel mid-12px\"></i>{\" \"}{t(\"Cancel\")}\r\n                  </Button>\r\n                  {props.botones ?\r\n                    <Button id=\"btnSearch\" color=\"success\" type=\"submit\" style={{ margin: '5px' }}><i className=\"mdi mdi-content-save mdi-12px\"></i>\r\n                      {\" \"} {props.tipo == \"guardar\" ? t(\"Save\") : t(\"Save\")}\r\n                    </Button> : null}\r\n                </CardFooter>\r\n              </Card>\r\n            </AvForm>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\nModalReciprocidad.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  toggle: PropTypes.func,\r\n  partyId: PropTypes.string\r\n};\r\n\r\nexport default ModalReciprocidad;\r\n"]},"metadata":{},"sourceType":"module"}