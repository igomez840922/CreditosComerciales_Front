{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useTranslation,withTranslation}from\"react-i18next\";import{Link,useLocation,useHistory}from\"react-router-dom\";import{Row,Col,Label,Table}from\"reactstrap\";import{AvForm,AvField}from\"availity-reactstrap-validation\";import AttachmentFileCore from\"../../../../../components/Common/AttachmentFileCore\";import*as OPTs from\"../../../../../helpers/options_helper\";import{AttachmentFileInputModel}from'../../../../../models/Common/AttachmentFileInputModel';import{BackendServices}from\"../../../../../services/index.js\";//Import Flatepicker\nimport\"flatpickr/dist/themes/material_blue.css\";import*as url from\"../../../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Proyecciones=/*#__PURE__*/React.forwardRef(function(props,ref){var _props$dataProyeccion,_props$dataProyeccion2,_props$dataProyeccion3,_props$dataProyeccion4,_props$dataProyeccion5,_props$dataProyeccion6,_props$dataProyeccion7,_props$dataProyeccion8,_props$dataProyeccion9,_props$dataProyeccion10,_props$dataProyeccion11,_props$dataProyeccion12,_props$dataProyeccion13,_props$dataProyeccion14,_props$dataProyeccion15;var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;// const { locationData } = props;\nvar location=useLocation();var _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),dataLocation=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formValid=_useState4[0],setFormValid=_useState4[1];var _useState5=useState(props.dataProyecciones),_useState6=_slicedToArray(_useState5,2),dataReturn=_useState6[0],setDataReturn=_useState6[1];var history=useHistory();var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),locationData=_useState8[0],setLocationData=_useState8[1];React.useImperativeHandle(ref,function(){return{validateForm:function validateForm(){var form=document.getElementById('frmProyecciones');form.requestSubmit();},getFormValidation:function getFormValidation(){return formValid;},dataReturn:dataReturn};});React.useEffect(function(){var dataSession;if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);dataSession=location.data;}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);dataSession=result;}}// Read Api Service data\ninitializeData(dataSession);},[props.activeTab==13]);function initializeData(dataLocation){var api=new BackendServices();// consultarProyecciones\napi.consultProjections(dataLocation.transactionId).then(function(resp){setDataReturn(resp);});}// Form Submission\nfunction handleSubmit(event,errors,values){event.preventDefault();if(errors.length>0){return;}console.log(values);setDataReturn(values);setFormValid(true);//props.onSubmit(values);\n}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Projections\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(AvForm,{id:\"frmProyecciones\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"companyHistoryDetails\",children:t(\"Details\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"descripcion\",type:\"textarea\",value:(_props$dataProyeccion=props===null||props===void 0?void 0:(_props$dataProyeccion2=props.dataProyecciones)===null||_props$dataProyeccion2===void 0?void 0:_props$dataProyeccion2.descripcion)!==null&&_props$dataProyeccion!==void 0?_props$dataProyeccion:\" \",id:\"descripcion\",rows:\"7\"})]})})}),locationData?(props===null||props===void 0?void 0:props.activeTab)==13?/*#__PURE__*/_jsx(AttachmentFileCore,{attachmentFileInputModel:new AttachmentFileInputModel(locationData.transactionId,OPTs.PROCESS_INFORMEGESTION,OPTs.ACT_PROYECCIONES)}):null:null,/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"EstimatesVariationsInItsAssetStructure\")}),/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Amount\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Reason\")})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"OperatingAssets\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"assetsOperatingAmount\",type:\"number\",value:(_props$dataProyeccion3=props.dataProyecciones.assetsOperatingAmount)!==null&&_props$dataProyeccion3!==void 0?_props$dataProyeccion3:0,id:\"assetsOperatingAmount\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}},rows:\"7\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"assetsOperatingReason\",type:\"text\",value:(_props$dataProyeccion4=props.dataProyecciones.assetsOperatingReason)!==null&&_props$dataProyeccion4!==void 0?_props$dataProyeccion4:\" \",id:\"assetsOperatingReason\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required Field\") }\n// }}\n,rows:\"7\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"FixedAssets\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"fixedAssetsAmount\",type:\"number\",value:(_props$dataProyeccion5=props.dataProyecciones.fixedAssetsAmount)!==null&&_props$dataProyeccion5!==void 0?_props$dataProyeccion5:0,id:\"fixedAssetsAmount\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}},rows:\"7\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"fixedAssetsReason\",type:\"text\",value:(_props$dataProyeccion6=props.dataProyecciones.fixedAssetsReason)!==null&&_props$dataProyeccion6!==void 0?_props$dataProyeccion6:\" \",id:\"fixedAssetsReason\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required Field\") }\n// }}\n,rows:\"7\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"OthersAssets\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"othersAssetsAmount\",type:\"number\",value:(_props$dataProyeccion7=props.dataProyecciones.othersAssetsAmount)!==null&&_props$dataProyeccion7!==void 0?_props$dataProyeccion7:0,id:\"othersAssetsAmount\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}},rows:\"7\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"othersAssetsReason\",type:\"text\",value:(_props$dataProyeccion8=props.dataProyecciones.othersAssetsReason)!==null&&_props$dataProyeccion8!==void 0?_props$dataProyeccion8:\" \",id:\"othersAssetsReason\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required Field\") }\n// }}\n,rows:\"7\"})})]})]})]})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"EstimatesVariationsInItsFinancingSources\")}),/*#__PURE__*/_jsxs(Table,{className:\"table mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Amount\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Reason\")})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"Banking\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"bankAmount\",type:\"number\",value:(_props$dataProyeccion9=props.dataProyecciones.bankAmount)!==null&&_props$dataProyeccion9!==void 0?_props$dataProyeccion9:0,id:\"bankAmount\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}},rows:\"7\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"bankReason\",type:\"text\",value:(_props$dataProyeccion10=props.dataProyecciones.bankReason)!==null&&_props$dataProyeccion10!==void 0?_props$dataProyeccion10:\" \",id:\"bankReason\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required Field\") }\n// }}\n,rows:\"7\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"Providers\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"providersAmount\",type:\"number\",value:(_props$dataProyeccion11=props.dataProyecciones.providersAmount)!==null&&_props$dataProyeccion11!==void 0?_props$dataProyeccion11:0,id:\"providersAmount\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}},rows:\"7\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"providersReason\",type:\"text\",value:(_props$dataProyeccion12=props.dataProyecciones.providersReason)!==null&&_props$dataProyeccion12!==void 0?_props$dataProyeccion12:\" \",id:\"providersReason\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required Field\") }\n// }}\n,rows:\"7\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(\"Capital\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"capitalAmount\",type:\"number\",value:(_props$dataProyeccion13=props.dataProyecciones.capitalAmount)!==null&&_props$dataProyeccion13!==void 0?_props$dataProyeccion13:0,id:\"capitalAmount\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}},rows:\"7\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"capitalReason\",type:\"text\",value:(_props$dataProyeccion14=props.dataProyecciones.capitalReason)!==null&&_props$dataProyeccion14!==void 0?_props$dataProyeccion14:\" \",id:\"capitalReason\"// validate={{\n//   required: { value: true, errorMessage: t(\"Required Field\") }\n// }}\n,rows:\"7\"})})]})]})]})]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"MaximumAmountOfBankDebtToTake\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"maximodeuda\",type:\"text\",value:(_props$dataProyeccion15=props.dataProyecciones.maximodeuda)!==null&&_props$dataProyeccion15!==void 0?_props$dataProyeccion15:0,id:\"maximodeuda\",validate:{// required: { value: true, errorMessage: t(\"Required Field\") },\nnumber:{value:true,errorMessage:t(\"InvalidField\")}}})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Label,{children:t(\"EstimatedDate\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"estimatedDate\",type:\"date\",value:props.dataProyecciones.estimatedDate,id:\"estimatedDate\"})]})})]})]})]});});export default Proyecciones;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/Proyecciones.js"],"names":["React","useState","useTranslation","withTranslation","Link","useLocation","useHistory","Row","Col","Label","Table","AvForm","AvField","AttachmentFileCore","OPTs","AttachmentFileInputModel","BackendServices","url","Proyecciones","forwardRef","props","ref","t","i18n","location","data","dataLocation","setData","formValid","setFormValid","dataProyecciones","dataReturn","setDataReturn","history","locationData","setLocationData","useImperativeHandle","validateForm","form","document","getElementById","requestSubmit","getFormValidation","useEffect","dataSession","undefined","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","initializeData","activeTab","api","consultProjections","then","resp","handleSubmit","event","errors","values","preventDefault","console","log","descripcion","PROCESS_INFORMEGESTION","ACT_PROYECCIONES","assetsOperatingAmount","number","value","errorMessage","assetsOperatingReason","fixedAssetsAmount","fixedAssetsReason","othersAssetsAmount","othersAssetsReason","bankAmount","bankReason","providersAmount","providersReason","capitalAmount","capitalReason","maximodeuda","estimatedDate"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types'\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\"\r\nimport {\r\n  Row,\r\n  Col,\r\n  Label,\r\n  Table,\r\n} from \"reactstrap\"\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\nimport AttachmentFileCore from \"../../../../../components/Common/AttachmentFileCore\";\r\nimport * as OPTs from \"../../../../../helpers/options_helper\";\r\nimport { AttachmentFileInputModel } from '../../../../../models/Common/AttachmentFileInputModel';\r\nimport { BackendServices } from \"../../../../../services/index.js\"\r\n//Import Flatepicker\r\nimport \"flatpickr/dist/themes/material_blue.css\";\r\nimport * as url from \"../../../../../helpers/url_helper\"\r\n\r\nconst Proyecciones = React.forwardRef((props, ref) => {\r\n  const { t, i18n } = useTranslation();\r\n  // const { locationData } = props;\r\n\r\n  const location = useLocation()\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [dataReturn, setDataReturn] = useState(props.dataProyecciones);\r\n  const history = useHistory();\r\n  const [locationData, setLocationData] = useState(null);\r\n\r\n  React.useImperativeHandle(ref, () => ({\r\n    validateForm: () => {\r\n      const form = document.getElementById('frmProyecciones');\r\n      form.requestSubmit();\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }, dataReturn\r\n  }));\r\n  React.useEffect(() => {\r\n    let dataSession;\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        dataSession = location.data;\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        dataSession = result;\r\n      }\r\n    }\r\n\r\n    // Read Api Service data\r\n    initializeData(dataSession);\r\n  }, [props.activeTab == 13]);\r\n  function initializeData(dataLocation) {\r\n    const api = new BackendServices()\r\n    // consultarProyecciones\r\n    api.consultProjections(dataLocation.transactionId).then(resp => {\r\n      setDataReturn(resp);\r\n    })\r\n  }\r\n  // Form Submission\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    console.log(values);\r\n    setDataReturn(values)\r\n    setFormValid(true)\r\n    //props.onSubmit(values);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h5>\r\n        {t(\"Projections\")}\r\n      </h5>\r\n      <p className=\"card-title-desc\"></p>\r\n      <AvForm id=\"frmProyecciones\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n        <Row>\r\n          <Col md=\"12\">\r\n            <div className=\"mb-3\">\r\n              <Label htmlFor=\"companyHistoryDetails\">{t(\"Details\")}</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"descripcion\"\r\n                type=\"textarea\"\r\n                value={props?.dataProyecciones?.descripcion??\" \"}\r\n                id=\"descripcion\"\r\n                rows=\"7\" />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        {locationData ? (props?.activeTab == 13 ?\r\n          <AttachmentFileCore attachmentFileInputModel={new AttachmentFileInputModel(locationData.transactionId, OPTs.PROCESS_INFORMEGESTION, OPTs.ACT_PROYECCIONES)} />\r\n          : null) : null}\r\n        <Row>\r\n          <Col md=\"12\">\r\n            <Label>{t(\"EstimatesVariationsInItsAssetStructure\")}</Label>\r\n            <Table className=\"table mb-0\">\r\n              <thead className=\"table-light\">\r\n                <tr>\r\n                  <th>{t(\"Type\")}</th>\r\n                  <th>{t(\"Amount\")}</th>\r\n                  <th>{t(\"Reason\")}</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>{t(\"OperatingAssets\")}</td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"assetsOperatingAmount\"\r\n                      type=\"number\"\r\n                      value={props.dataProyecciones.assetsOperatingAmount??0}\r\n                      id=\"assetsOperatingAmount\"\r\n                      validate={{\r\n                        // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                        number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                      }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"assetsOperatingReason\"\r\n                      type=\"text\"\r\n                      value={props.dataProyecciones.assetsOperatingReason??\" \"}\r\n                      id=\"assetsOperatingReason\"\r\n                      // validate={{\r\n                      //   required: { value: true, errorMessage: t(\"Required Field\") }\r\n                      // }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{t(\"FixedAssets\")}</td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"fixedAssetsAmount\"\r\n                      type=\"number\"\r\n                      value={props.dataProyecciones.fixedAssetsAmount??0}\r\n                      id=\"fixedAssetsAmount\"\r\n                      validate={{\r\n                        // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                        number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                      }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"fixedAssetsReason\"\r\n                      type=\"text\"\r\n                      value={props.dataProyecciones.fixedAssetsReason??\" \"}\r\n                      id=\"fixedAssetsReason\"\r\n                      // validate={{\r\n                      //   required: { value: true, errorMessage: t(\"Required Field\") }\r\n                      // }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{t(\"OthersAssets\")}</td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"othersAssetsAmount\"\r\n                      type=\"number\"\r\n                      value={props.dataProyecciones.othersAssetsAmount??0}\r\n                      id=\"othersAssetsAmount\"\r\n                      validate={{\r\n                        // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                        number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                      }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"othersAssetsReason\"\r\n                      type=\"text\"\r\n                      value={props.dataProyecciones.othersAssetsReason??\" \"}\r\n                      id=\"othersAssetsReason\"\r\n                      // validate={{\r\n                      //   required: { value: true, errorMessage: t(\"Required Field\") }\r\n                      // }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md=\"12\">\r\n            <Label>{t(\"EstimatesVariationsInItsFinancingSources\")}</Label>\r\n            <Table className=\"table mb-0\">\r\n              <thead className=\"table-light\">\r\n                <tr>\r\n                  <th>{t(\"Type\")}</th>\r\n                  <th>{t(\"Amount\")}</th>\r\n                  <th>{t(\"Reason\")}</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>{t(\"Banking\")}</td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"bankAmount\"\r\n                      type=\"number\"\r\n                      value={props.dataProyecciones.bankAmount??0}\r\n                      id=\"bankAmount\"\r\n                      validate={{\r\n                        // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                        number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                      }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"bankReason\"\r\n                      type=\"text\"\r\n                      value={props.dataProyecciones.bankReason??\" \"}\r\n                      id=\"bankReason\"\r\n                      // validate={{\r\n                      //   required: { value: true, errorMessage: t(\"Required Field\") }\r\n                      // }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{t(\"Providers\")}</td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"providersAmount\"\r\n                      type=\"number\"\r\n                      value={props.dataProyecciones.providersAmount??0}\r\n                      id=\"providersAmount\"\r\n                      validate={{\r\n                        // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                        number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                      }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"providersReason\"\r\n                      type=\"text\"\r\n                      value={props.dataProyecciones.providersReason??\" \"}\r\n                      id=\"providersReason\"\r\n                      // validate={{\r\n                      //   required: { value: true, errorMessage: t(\"Required Field\") }\r\n                      // }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{t(\"Capital\")}</td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"capitalAmount\"\r\n                      type=\"number\"\r\n                      value={props.dataProyecciones.capitalAmount??0}\r\n                      id=\"capitalAmount\"\r\n                      validate={{\r\n                        // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                        number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                      }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                  <td>\r\n                    <AvField\r\n                      className=\"form-control\"\r\n                      name=\"capitalReason\"\r\n                      type=\"text\"\r\n                      value={props.dataProyecciones.capitalReason??\" \"}\r\n                      id=\"capitalReason\"\r\n                      // validate={{\r\n                      //   required: { value: true, errorMessage: t(\"Required Field\") }\r\n                      // }}\r\n                      rows=\"7\" />\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </Table>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row>\r\n          <Col md=\"6\">\r\n            <div className=\"mb-3\">\r\n              <Label>{t(\"MaximumAmountOfBankDebtToTake\")}</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"maximodeuda\"\r\n                type=\"text\"\r\n                value={props.dataProyecciones.maximodeuda??0}\r\n                id=\"maximodeuda\"\r\n                validate={{\r\n                  // required: { value: true, errorMessage: t(\"Required Field\") },\r\n                  number: { value: true, errorMessage: t(\"InvalidField\") },\r\n                }} />\r\n            </div>\r\n          </Col>\r\n          <Col md=\"6\">\r\n            <div className=\"mb-3\">\r\n              <Label>{t(\"EstimatedDate\")}</Label>\r\n              <AvField\r\n                className=\"form-control\"\r\n                name=\"estimatedDate\"\r\n                type=\"date\"\r\n                value={props.dataProyecciones.estimatedDate}\r\n                id=\"estimatedDate\"\r\n              />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </AvForm>\r\n    </React.Fragment>\r\n  );\r\n});\r\nProyecciones.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  locationData: PropTypes.any,\r\n}\r\nexport default Proyecciones;\r\n"]},"metadata":{},"sourceType":"module"}