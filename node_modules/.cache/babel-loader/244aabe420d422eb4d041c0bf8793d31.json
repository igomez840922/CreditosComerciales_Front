{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\Dashboard\\\\modal\\\\PreviewHistorical.js\",\n    _s = $RefreshSig$();\n\nimport LogProcess from \"../../../components/LogProcess\";\nimport { LogProcessModel } from \"../../../models/Common/LogProcessModel\";\nimport FormDetalles from \"../../CommercialCredit/16_RiesgoAmbiental/riesgoAmbiental/FormDetalles\";\nimport AspectosAmbientales from \"../../CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/AspectosAmbientales\";\nimport GeneralesEmpresaIGRPreview from \"./GeneralesEmpresaIGRPreview\";\nimport { Card, CardBody, Row, Col, Button, Label } from \"reactstrap\";\nimport AttachmentFileCore from \"../../../components/Common/AttachmentFileCore\";\nimport { AttachmentFileInputModel } from \"../../../models/Common/AttachmentFileInputModel\";\nimport * as OPTs from \"../../../helpers/options_helper\";\nimport HeaderSections from '../../../components/Common/HeaderSections';\nimport { useEffect, useState } from \"react\";\nimport { AvForm, AvGroup } from \"availity-reactstrap-validation\";\nimport Switch from \"react-switch\";\nimport { useTranslation } from 'react-i18next';\nimport Flatpickr from \"react-flatpickr\";\nimport moment from \"moment\";\nimport { BackendServices } from \"../../../services\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport * as url from \"../../../helpers/url_helper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Offsymbol = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      height: \"100%\",\n      fontSize: 12,\n      color: \"#fff\",\n      paddingRight: 2\n    },\n    children: [\" \", \"No\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Offsymbol;\n\nconst OnSymbol = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      height: \"100%\",\n      fontSize: 12,\n      color: \"#fff\",\n      paddingRight: 2\n    },\n    children: [\" \", \"Si\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n\n_c2 = OnSymbol;\n\nconst PreviewHistorical = props => {\n  _s();\n\n  var _props$closingPreview, _props$autonomyBank, _props$closingPreview2, _props$autonomyBank2, _props$autonomyBank3;\n\n  const [reputationResearch, setReputationResearch] = useState('');\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [environemntCovenantClosing, setEnvironemntCovenantClosing] = useState(props.closingPreview);\n  const [environemntRisk, setEnvironemntRisk] = useState(undefined);\n  const [fechaSet, setfechaSet] = useState(props.dateClosing);\n  const backendServices = new BackendServices();\n  const location = useLocation();\n  const history = useHistory();\n  useEffect(() => {\n    console.log({\n      props\n    }, !(props === null || props === void 0 ? void 0 : props.autonomyBank));\n    let dataSession;\n\n    if (location.data !== null && location.data !== undefined) {\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\n        //location.data.transactionId = 0;\n        //checkAndCreateProcedure(location.data);\n        history.push(url.URL_DASHBOARD);\n      } else {\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\n        dataSession = location.data;\n      }\n    } else {\n      //chequeamos si tenemos guardado en session\n      var result = sessionStorage.getItem('locationData');\n\n      if (result !== undefined && result !== null) {\n        result = JSON.parse(result);\n        dataSession = result;\n      }\n    }\n\n    loadEnvironmentalRiskOthers(dataSession);\n  }, []);\n  useEffect(() => {\n    let datos = { ...environemntRisk,\n      closingComplianceDate: fechaSet,\n      closingCompliance: environemntCovenantClosing\n    };\n    console.log({\n      datos\n    });\n  }, [fechaSet, environemntCovenantClosing]);\n\n  function loadEnvironmentalRiskOthers(locationData) {\n    backendServices.getEnvironmentalRiskInfo(locationData.transactionId).then(environmentalRiskInf => {\n      setEnvironemntRisk(environmentalRiskInf);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(GeneralesEmpresaIGRPreview, {\n      transactId: props.transactId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), props.title != \"Historical Preview\" ? /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(AspectosAmbientales, {\n          setReputationResearch: setReputationResearch,\n          reputationResearch: reputationResearch,\n          previsualizar: true,\n          previsualizarHistoria: true,\n          activeTab: \"18\",\n          locationData: {\n            transactionId: props.transactId,\n            transactId: props.transactId\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(FormDetalles, {\n          previsualizarHistoria: true,\n          locationData: {\n            transactionId: props.transactId,\n            transactId: props.transactId\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(HeaderSections, {\n            title: \"Attach Compliance Support\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(AvForm, {\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                md: \"4\",\n                className: \"\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  className: \"form-check-label\",\n                  htmlFor: \"isProjectLocatedProtectedNaturalArea\",\n                  children: [t(\"Closing\"), \" Covenants\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(AvGroup, {\n                  check: true,\n                  className: \"m-0\",\n                  children: [/*#__PURE__*/_jsxDEV(Switch, {\n                    name: \"isProjectLocatedProtectedNaturalArea\",\n                    uncheckedIcon: /*#__PURE__*/_jsxDEV(Offsymbol, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 64\n                    }, this),\n                    checkedIcon: /*#__PURE__*/_jsxDEV(OnSymbol, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 62\n                    }, this),\n                    onColor: \"#007943\",\n                    id: \"check1\",\n                    disabled: ((_props$closingPreview = props === null || props === void 0 ? void 0 : props.closingPreview) !== null && _props$closingPreview !== void 0 ? _props$closingPreview : false) || ((_props$autonomyBank = props === null || props === void 0 ? void 0 : props.autonomyBank) !== null && _props$autonomyBank !== void 0 ? _props$autonomyBank : false),\n                    className: \"form-label\",\n                    onChange: () => {\n                      setEnvironemntCovenantClosing(!environemntCovenantClosing);\n                    },\n                    checked: environemntCovenantClosing\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 45\n                  }, this), '   ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                md: \"3\",\n                className: \"mt-3\",\n                children: /*#__PURE__*/_jsxDEV(AvGroup, {\n                  className: \"mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    htmlFor: \"birthDate\",\n                    children: t(\"Compliance Date\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Flatpickr, {\n                    id: \"issuedDate\",\n                    name: \"issuedDate\",\n                    className: \"form-control d-block\",\n                    placeholder: OPTs.FORMAT_DATE_SHOW,\n                    disabled: ((_props$closingPreview2 = props === null || props === void 0 ? void 0 : props.closingPreview) !== null && _props$closingPreview2 !== void 0 ? _props$closingPreview2 : false) || ((_props$autonomyBank2 = props === null || props === void 0 ? void 0 : props.autonomyBank) !== null && _props$autonomyBank2 !== void 0 ? _props$autonomyBank2 : false),\n                    options: {\n                      dateFormat: OPTs.FORMAT_DATE,\n                      //maxDate: new Date().setFullYear(new Date().getFullYear() - 18),\n                      defaultDate: fechaSet\n                    },\n                    onChange: (selectedDates, dateStr, instance) => {\n                      let date = moment(dateStr, \"DD/MM/YYYY\").format(\"YYYY-MM-DD\");\n                      setfechaSet(date);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(AttachmentFileCore, {\n            preview: (_props$autonomyBank3 = props === null || props === void 0 ? void 0 : props.autonomyBank) !== null && _props$autonomyBank3 !== void 0 ? _props$autonomyBank3 : false,\n            attachmentFileInputModel: new AttachmentFileInputModel(props.transactI, OPTs.PROCESS_EVIROMENTRISK, OPTs.ACT_ASPECTOSAMBIENTALES)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }, this) : null, !(props === null || props === void 0 ? void 0 : props.autonomyBank) && /*#__PURE__*/_jsxDEV(LogProcess, {\n      logProcessModel: new LogProcessModel(props.instanceId, props.transactId, 0, \"\", \"\"),\n      preview: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 38\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PreviewHistorical, \"+HKuSAuGYhFgVKXt/HlFjPyMvDg=\", false, function () {\n  return [useTranslation, useLocation, useHistory];\n});\n\n_c3 = PreviewHistorical;\nexport default PreviewHistorical;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Offsymbol\");\n$RefreshReg$(_c2, \"OnSymbol\");\n$RefreshReg$(_c3, \"PreviewHistorical\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/Dashboard/modal/PreviewHistorical.js"],"names":["LogProcess","LogProcessModel","FormDetalles","AspectosAmbientales","GeneralesEmpresaIGRPreview","Card","CardBody","Row","Col","Button","Label","AttachmentFileCore","AttachmentFileInputModel","OPTs","HeaderSections","useEffect","useState","AvForm","AvGroup","Switch","useTranslation","Flatpickr","moment","BackendServices","useHistory","useLocation","url","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","PreviewHistorical","props","reputationResearch","setReputationResearch","t","i18n","environemntCovenantClosing","setEnvironemntCovenantClosing","closingPreview","environemntRisk","setEnvironemntRisk","undefined","fechaSet","setfechaSet","dateClosing","backendServices","location","history","console","log","autonomyBank","dataSession","data","transactionId","length","push","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","result","getItem","parse","loadEnvironmentalRiskOthers","datos","closingComplianceDate","closingCompliance","locationData","getEnvironmentalRiskInfo","then","environmentalRiskInf","catch","err","transactId","title","FORMAT_DATE_SHOW","dateFormat","FORMAT_DATE","defaultDate","selectedDates","dateStr","instance","date","format","transactI","PROCESS_EVIROMENTRISK","ACT_ASPECTOSAMBIENTALES","instanceId"],"mappings":"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","sourcesContent":["import LogProcess from \"../../../components/LogProcess\";\r\nimport { LogProcessModel } from \"../../../models/Common/LogProcessModel\";\r\nimport FormDetalles from \"../../CommercialCredit/16_RiesgoAmbiental/riesgoAmbiental/FormDetalles\";\r\nimport AspectosAmbientales from \"../../CommercialCredit/4_InformeGestionReforzado/FormularioIGR/Secciones/AspectosAmbientales\";\r\nimport GeneralesEmpresaIGRPreview from \"./GeneralesEmpresaIGRPreview\";\r\nimport {\r\n    Card,\r\n    CardBody,\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Label\r\n} from \"reactstrap\"\r\nimport AttachmentFileCore from \"../../../components/Common/AttachmentFileCore\";\r\nimport { AttachmentFileInputModel } from \"../../../models/Common/AttachmentFileInputModel\";\r\nimport * as OPTs from \"../../../helpers/options_helper\";\r\nimport HeaderSections from '../../../components/Common/HeaderSections';\r\nimport { useEffect, useState } from \"react\";\r\nimport { AvForm, AvGroup } from \"availity-reactstrap-validation\";\r\nimport Switch from \"react-switch\";\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Flatpickr from \"react-flatpickr\";\r\nimport moment from \"moment\";\r\nimport { BackendServices } from \"../../../services\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport * as url from \"../../../helpers/url_helper\"\r\n\r\n\r\nconst Offsymbol = () => {\r\n    return (\r\n        <div\r\n            style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                height: \"100%\",\r\n                fontSize: 12,\r\n                color: \"#fff\",\r\n                paddingRight: 2,\r\n            }}\r\n        >\r\n            {\" \"}\r\n            No\r\n        </div>\r\n    );\r\n};\r\n\r\nconst OnSymbol = () => {\r\n    return (\r\n        <div\r\n            style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                height: \"100%\",\r\n                fontSize: 12,\r\n                color: \"#fff\",\r\n                paddingRight: 2,\r\n            }}\r\n        >\r\n            {\" \"}\r\n            Si\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PreviewHistorical = (props) => {\r\n    const [reputationResearch, setReputationResearch] = useState('');\r\n    const { t, i18n } = useTranslation();\r\n\r\n    const [environemntCovenantClosing, setEnvironemntCovenantClosing] = useState(props.closingPreview)\r\n    const [environemntRisk, setEnvironemntRisk] = useState(undefined)\r\n    const [fechaSet, setfechaSet] = useState(props.dateClosing)\r\n\r\n    const backendServices = new BackendServices();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n\r\n\r\n    useEffect(() => {\r\n        console.log({ props }, !props?.autonomyBank)\r\n        let dataSession;\r\n\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                dataSession = location.data;\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                dataSession = result;\r\n            }\r\n        }\r\n\r\n\r\n        loadEnvironmentalRiskOthers(dataSession)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        let datos = { ...environemntRisk, closingComplianceDate: fechaSet, closingCompliance: environemntCovenantClosing };\r\n        console.log({ datos })\r\n    }, [fechaSet, environemntCovenantClosing])\r\n\r\n\r\n    function loadEnvironmentalRiskOthers(locationData) {\r\n        backendServices.getEnvironmentalRiskInfo(locationData.transactionId).then(environmentalRiskInf => {\r\n            setEnvironemntRisk(environmentalRiskInf)\r\n        }).catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <GeneralesEmpresaIGRPreview transactId={props.transactId} />\r\n            {props.title != \"Historical Preview\" ?\r\n                <Card>\r\n                    <CardBody>\r\n                        <AspectosAmbientales setReputationResearch={setReputationResearch} reputationResearch={reputationResearch} previsualizar={true} previsualizarHistoria={true} activeTab=\"18\" locationData={{ transactionId: props.transactId, transactId: props.transactId }} />\r\n                        <FormDetalles previsualizarHistoria={true} locationData={{ transactionId: props.transactId, transactId: props.transactId }} />\r\n                        {<>\r\n                            <HeaderSections title=\"Attach Compliance Support\" />\r\n                            <AvForm>\r\n                                <Row>\r\n                                    <Col md=\"4\" className=\"\">\r\n                                        <Label className=\"form-check-label\" htmlFor=\"isProjectLocatedProtectedNaturalArea\">{t(\"Closing\")} Covenants</Label>\r\n                                        <AvGroup check className=\"m-0\">\r\n                                            <Switch name=\"isProjectLocatedProtectedNaturalArea\"\r\n                                                uncheckedIcon={<Offsymbol />}\r\n                                                checkedIcon={<OnSymbol />}\r\n                                                onColor=\"#007943\"\r\n                                                id=\"check1\"\r\n                                                disabled={(props?.closingPreview ?? false) || (props?.autonomyBank ?? false)}\r\n                                                className=\"form-label\"\r\n                                                onChange={() => {\r\n                                                    setEnvironemntCovenantClosing(!environemntCovenantClosing);\r\n                                                }}\r\n                                                checked={environemntCovenantClosing}\r\n                                            />\r\n                                            {'   '}\r\n                                        </AvGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row>\r\n                                    <Col md=\"3\" className=\"mt-3\">\r\n                                        <AvGroup className=\"mb-3\">\r\n                                            <Label htmlFor=\"birthDate\">{t(\"Compliance Date\")}</Label>\r\n                                            <Flatpickr\r\n                                                id=\"issuedDate\"\r\n                                                name=\"issuedDate\"\r\n                                                className=\"form-control d-block\"\r\n                                                placeholder={OPTs.FORMAT_DATE_SHOW}\r\n                                                disabled={(props?.closingPreview ?? false) || (props?.autonomyBank ?? false)}\r\n                                                options={{\r\n                                                    dateFormat: OPTs.FORMAT_DATE,\r\n                                                    //maxDate: new Date().setFullYear(new Date().getFullYear() - 18),\r\n                                                    defaultDate: fechaSet\r\n                                                }}\r\n                                                onChange={(selectedDates, dateStr, instance) => {\r\n                                                    let date = moment(dateStr, \"DD/MM/YYYY\").format(\"YYYY-MM-DD\");\r\n                                                    setfechaSet(date)\r\n                                                }}\r\n                                            />\r\n\r\n                                        </AvGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                            </AvForm>\r\n                            <AttachmentFileCore preview={props?.autonomyBank ?? false} attachmentFileInputModel={new AttachmentFileInputModel(props.transactI, OPTs.PROCESS_EVIROMENTRISK, OPTs.ACT_ASPECTOSAMBIENTALES)} />\r\n                        </>}\r\n                    </CardBody>\r\n                </Card> : null}\r\n            {!props?.autonomyBank && <LogProcess logProcessModel={new LogProcessModel(props.instanceId, props.transactId, 0, \"\", \"\")} preview={true} />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default PreviewHistorical;"]},"metadata":{},"sourceType":"module"}