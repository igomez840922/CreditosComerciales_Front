{"ast":null,"code":"import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import{translationHelpers}from\"../../../helpers\";import{useLocation,useHistory}from'react-router-dom';import*as OPTs from\"../../../helpers/options_helper\";import*as url from\"../../../helpers/url_helper\";import{CreditProposalProvider}from'../../../components/PropuestaCreditoComercial/CreditProposalContext';import{Row,Col,Button,Card,CardBody,CardFooter,TabPane}from\"reactstrap\";import{ChangeSummary,CorporateExposure,FacilityList,FormCreditProposal,Refinancing,CheckList}from\"../../../components/PropuestaCreditoComercial\";// UI Components\nimport Breadcrumbs from\"../../../components/Common/Breadcrumb\";import LogProcess from\"../../../components/LogProcess\";import LoadingIndicator from\"../../../components/UI/LoadingIndicator\";import SuccessMessage from\"../../../components/UI/SuccessMessage\";import ModalCloseOptions from\"../../../components/UI/ModalCloseOptions\";import WizardSidebar from\"../../../components/UI/WizardSidebar\";// Services\nimport{BackendServices,CoreServices,BpmServices}from\"../../../services\";import SweetAlert from\"react-bootstrap-sweetalert\";import{ServicioExposicionCorporativa,ServicioResumenCambios,ServicioFacilidades,ServicioRefinanciamiento,ServicioChecklist,ServicioPropuestaCredito}from\"../../../services/PropuestaCredito\";import CorporateExposureClient from\"../../../components/PropuestaCreditoComercial/CorporateExposureClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreditProposalPage=function CreditProposalPage(props){var location=useLocation();var history=useHistory();// modelo.datosGenerales.transactId=location.data.transactionId;\n//Data que recibimos en el location\nvar _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showSuccess=_useState6[0],setShowSuccess=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),exposicionCorporativa=_useState8[0],setExposicionCorporativa=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),exposicionCorporativaClientes=_useState10[0],setExposicionCorporativaClientes=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),changeSummaryItems=_useState12[0],setChangeSummaryItems=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),facilityListItems=_useState14[0],setFacilityListItems=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),identificationList=_useState16[0],setIdentificationList=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),refinancing=_useState18[0],setRefinancing=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),documentAuthors=_useState20[0],setDocumentAuthors=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),checkListItems=_useState22[0],setCheckListItems=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),currentTab=_useState24[0],setCurrentTab=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),displayModalCloseOptions=_useState26[0],setDisplayModalCloseOptions=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),displayModalEndProcess=_useState28[0],setDisplayModalEndProcess=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),successSave_dlg=_useState30[0],setsuccessSave_dlg=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),error_dlg=_useState32[0],seterror_dlg=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),error_msg=_useState34[0],seterror_msg=_useState34[1];var _useState35=useState({}),_useState36=_slicedToArray(_useState35,2),context=_useState36[0],setContext=_useState36[1];var _useState37=useState({}),_useState38=_slicedToArray(_useState37,2),datosGenerales=_useState38[0],setDatosGenerales=_useState38[1];// Services\nvar coreServices=new CoreServices();var backendServices=new BackendServices();var servicioPropuestaCredito=new ServicioPropuestaCredito();var servicioExposicionCorporativa=new ServicioExposicionCorporativa();var servicioResumenCambios=new ServicioResumenCambios();var servicioRefinanciamiento=new ServicioRefinanciamiento();var servicioChecklist=new ServicioChecklist();// Component Refs\nvar wizardRef=useRef();var creditProposalRef=useRef();var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];var sections=[t('General Data'),t('Corporate Exposure'),t('Change Summary'),t('Facilities'),t('Checklist')];//On Mounting (componentDidMount)\nReact.useEffect(function(){if(!location.data){location.data={\"requestId\":\"XYZ892022\",\"facilityId\":\"\",\"customerId\":\"68\",\"transactionId\":\"101\",\"processId\":\"6\",\"activityId\":\"0\",\"instanceId\":9104,\"taskId\":456,\"taskStatus\":\"InProgress\"};}setLocationData(location.data);//guardamos los datos que se pasan como parametros\ninitializeData(location.data);// update context\nsetContext({transactionId:location.data.transactionId,customerId:location.data.customerId,instanceId:location.data.instanceId,requestId:location.data.requestId// debe venir del resultado de guardar datos generales\n});},[]);//Caraga Inicial\nfunction initializeData(params){var transactionId=params.transactionId,requestId=params.requestId,customerId=params.customerId;console.log('location.data',location.data);// coreServices.getPaisesCatalogo()\n//   .then((paises) => {\n//  if(response === null){ return;}\n//     console.log('paises', paises);\n//   })\n//   .catch((error) => {\n//     console.error('error fetching countries', error);\n//   });\ncargarDatosGenerales(transactionId,requestId);cargarIdentificaciones();cargarListaFacilidades(customerId);fetchReport(transactionId);}function cargarDatosGenerales(transactionId,requestId){servicioPropuestaCredito.consultarDatosGenerales(transactionId,requestId).then(function(data){console.log('datos generales',transactionId,requestId,data);setDatosGenerales(data);});}function cargarListaFacilidades(idcliente){coreServices.getFacilidades(idcliente).then(function(resp){setFacilityListItems(resp.AcctLoans.AcctLoan);}).catch(function(err){console.log(err);});}function cargarIdentificaciones(){backendServices.consultarCatalogoTipoIdentificacion().then(function(data){if(data!==null&&data!==undefined){setIdentificationList(data);}}).catch(function(error){console.error('api error: ',error);});}function fetchReport(transactionId){// setLoading(true);\nbackendServices.consultarUsuarioProspecto(transactionId).then(function(resp){console.log(\"fetchReport\",resp);coreServices.getCorporateExhibition(resp.customerNumberT24).then(function(results){console.log(results);setExposicionCorporativa(results);});servicioExposicionCorporativa.consultarExposicionCliente(resp.customerNumberT24).then(function(results){setExposicionCorporativaClientes(results);});}).catch(function(error){});servicioResumenCambios.consultarResumenCambios(transactionId).then(function(results){setChangeSummaryItems(results);});// servicioFacilidades.consultarListaFacilidades(idCliente)\n//   .then((results) => {\n//     setFacilityListItfems(results);\n//   });\nservicioRefinanciamiento.consultarBitacoraRefinanciamiento(transactionId).then(function(results){setRefinancing(results);});servicioChecklist.consultarListaCheckList(transactionId).then(function(results){setCheckListItems(results);});setDocumentAuthors({owner:{name:'Carolina Delgado'},ceo:{name:'Carolina Delgado'}});}function handleSaveFacility(newItem){var newFacilities=[].concat(_toConsumableArray(facilityListItems),[newItem]);setFacilityListItems(newFacilities);}function handleSaveCheckListItem(newItem){var newCheckListItems=[].concat(_toConsumableArray(checkListItems),[newItem]);setCheckListItems(newCheckListItems);}//Modal Opciones al Salir\nfunction toggleModalCloseOptions(){setDisplayModalCloseOptions(!displayModalCloseOptions);removeBodyCss();}//Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\nfunction onSaveProcess(option){switch(option){case OPTs.OPT_FINALIZARPROCESO:{/* ---------------------------------------------------------------------------------------------- */ /*                     Procedemos a llamar al servicio de finalizar el proceso                    */ /* ---------------------------------------------------------------------------------------------- */var api=new BpmServices();console.log(location.data.instanceId);var data=location.data.instanceId;api.abortProcess(data).then(function(resp){if(resp!==undefined){setsuccessSave_dlg(true);}else{//Mensaje ERROR\nseterror_msg(props.t(\"TheProcessCouldNotFinish\"));seterror_dlg(true);}});toggleModalEndProcess();// navigate to dashboard\nhistory.push(url.URL_DASHBOARD);return;}case OPTs.OPT_SALVAPARCIAL:{submitData(false);wizardRef.current.next();break;}case OPTs.OPT_SALVAFULL:{submitData(true);break;}default:{// do nothing\nreturn;}}}//Modal Para mostrar Comentario de Fin de Proceso\nfunction toggleModalEndProcess(){setDisplayModalEndProcess(!displayModalEndProcess);}function submitData(){var validate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;console.log('submit',validate);var submitResult=creditProposalRef.current.submit(validate);if(!submitResult){// select first invalid tab\nwizardRef.current.selectTab(0);return false;}return submitResult;}function removeBodyCss(){document.body.classList.add(\"no_padding\");}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(CreditProposalProvider,{value:context,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Commercial Credit\"),breadcrumbItem:t(\"Credit Proposal\")}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:t(\"Credit Proposal\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:t(\"This form is official and must be filled out correctly\")}),/*#__PURE__*/_jsxs(WizardSidebar,{sections:sections,sidebarColWidth:3,ref:wizardRef,activeTab:currentTab,onChangeTab:setCurrentTab,children:[/*#__PURE__*/_jsx(TabPane,{tabId:0,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(FormCreditProposal,{ref:creditProposalRef,title:t(\"General Data\"),values:datosGenerales})})})}),/*#__PURE__*/_jsxs(TabPane,{tabId:1,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(CorporateExposure,{title:t(\"Corporate Exposure\"),items:exposicionCorporativa})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(CorporateExposureClient,{title:t(\"Customer Corporate Exposure\"),items:exposicionCorporativaClientes})})})]}),/*#__PURE__*/_jsx(TabPane,{tabId:2,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(ChangeSummary,{title:t(\"Change Summary\"),items:changeSummaryItems})})})}),/*#__PURE__*/_jsx(TabPane,{tabId:3,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(FacilityList,{title:t(\"Facility List\"),items:facilityListItems,editMode:true,onSaveFacility:handleSaveFacility,identificationList:identificationList})})})}),/*#__PURE__*/_jsx(TabPane,{tabId:4,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xl:\"12\",children:/*#__PURE__*/_jsx(CheckList,{title:t(\"Check List\"),items:checkListItems,onSaveItem:handleSaveCheckListItem})})})})]})]}),/*#__PURE__*/_jsxs(CardFooter,{className:\"text-end\",children:[/*#__PURE__*/_jsxs(Button,{color:\"dark\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){toggleModalCloseOptions();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-left-bold-circle-outline mid-12px\"}),\"\\xA0\",c(\"Exit\")]}),currentTab>0&&/*#__PURE__*/ // <Button color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { wizardRef.current.NextPrevious(selectedTabIndex - 1) }}>{c(\"Previous\")}</Button>\n_jsxs(Button,{color:\"success\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){wizardRef.current.prev();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-left-bold mid-12px\"}),\"\\xA0\",c(\"Previous\")]}),currentTab<4&&/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",style:{margin:'5px'},onClick:function onClick(){onSaveProcess(OPTs.OPT_SALVAPARCIAL);},children:[c(\"Next\"),\"\\xA0\",/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold mid-12px\"})]}),/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"button\",style:{marginLeft:'5px'},onClick:function onClick(){onSaveProcess(OPTs.OPT_SALVAFULL);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"}),\"\\xA0\",c(\"Continue\")]})]})]}),/*#__PURE__*/_jsx(LogProcess,{}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:props.t(\"SuccessDialog\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);history.push(url.URL_DASHBOARD);},children:props.t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:props.t(\"ErrorDialog\"),onConfirm:function onConfirm(){seterror_dlg(false);},children:error_msg}):null]}),loading&&/*#__PURE__*/_jsx(LoadingIndicator,{message:c(\"Please Wait\")}),showSuccess&&/*#__PURE__*/_jsx(SuccessMessage,{title:c(\"Operation Complete\"),message:t(\"Credit Proposal Saved\")}),/*#__PURE__*/_jsx(ModalCloseOptions,{onSaveProcess:onSaveProcess,isOpen:displayModalCloseOptions,toggle:function toggle(){toggleModalCloseOptions();}})]})});};export default CreditProposalPage;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/CreditProposalPage.js"],"names":["React","useState","useRef","translationHelpers","useLocation","useHistory","OPTs","url","CreditProposalProvider","Row","Col","Button","Card","CardBody","CardFooter","TabPane","ChangeSummary","CorporateExposure","FacilityList","FormCreditProposal","Refinancing","CheckList","Breadcrumbs","LogProcess","LoadingIndicator","SuccessMessage","ModalCloseOptions","WizardSidebar","BackendServices","CoreServices","BpmServices","SweetAlert","ServicioExposicionCorporativa","ServicioResumenCambios","ServicioFacilidades","ServicioRefinanciamiento","ServicioChecklist","ServicioPropuestaCredito","CorporateExposureClient","CreditProposalPage","props","location","history","data","locationData","setLocationData","loading","setLoading","showSuccess","setShowSuccess","exposicionCorporativa","setExposicionCorporativa","exposicionCorporativaClientes","setExposicionCorporativaClientes","changeSummaryItems","setChangeSummaryItems","facilityListItems","setFacilityListItems","identificationList","setIdentificationList","refinancing","setRefinancing","documentAuthors","setDocumentAuthors","checkListItems","setCheckListItems","currentTab","setCurrentTab","displayModalCloseOptions","setDisplayModalCloseOptions","displayModalEndProcess","setDisplayModalEndProcess","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","context","setContext","datosGenerales","setDatosGenerales","coreServices","backendServices","servicioPropuestaCredito","servicioExposicionCorporativa","servicioResumenCambios","servicioRefinanciamiento","servicioChecklist","wizardRef","creditProposalRef","t","c","sections","useEffect","initializeData","transactionId","customerId","instanceId","requestId","params","console","log","cargarDatosGenerales","cargarIdentificaciones","cargarListaFacilidades","fetchReport","consultarDatosGenerales","then","idcliente","getFacilidades","resp","AcctLoans","AcctLoan","catch","err","consultarCatalogoTipoIdentificacion","undefined","error","consultarUsuarioProspecto","getCorporateExhibition","customerNumberT24","results","consultarExposicionCliente","consultarResumenCambios","consultarBitacoraRefinanciamiento","consultarListaCheckList","owner","name","ceo","handleSaveFacility","newItem","newFacilities","handleSaveCheckListItem","newCheckListItems","toggleModalCloseOptions","removeBodyCss","onSaveProcess","option","OPT_FINALIZARPROCESO","api","abortProcess","toggleModalEndProcess","push","URL_DASHBOARD","OPT_SALVAPARCIAL","submitData","current","next","OPT_SALVAFULL","validate","submitResult","submit","selectTab","document","body","classList","add","margin","prev","marginLeft"],"mappings":"sWAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,KAAwC,OAAxC,CACA,OAASC,kBAAT,KAAmC,kBAAnC,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,kBAAxC,CACA,MAAO,GAAKC,CAAAA,IAAZ,KAAsB,iCAAtB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,6BAArB,CACA,OAASC,sBAAT,KAAuC,qEAAvC,CAEA,OACEC,GADF,CAEEC,GAFF,CAGEC,MAHF,CAIEC,IAJF,CAKEC,QALF,CAMEC,UANF,CAOEC,OAPF,KAQO,YARP,CAUA,OACEC,aADF,CACiBC,iBADjB,CAEEC,YAFF,CAEgBC,kBAFhB,CAGEC,WAHF,CAGeC,SAHf,KAIO,+CAJP,CAOA;AACA,MAAOC,CAAAA,WAAP,KAAwB,uCAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gCAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,yCAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,uCAA3B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,0CAA9B,CACA,MAAOC,CAAAA,aAAP,KAA0B,sCAA1B,CAEA;AACA,OAASC,eAAT,CAA0BC,YAA1B,CAAwCC,WAAxC,KAA4D,mBAA5D,CACA,MAAOC,CAAAA,UAAP,KAAuB,4BAAvB,CACA,OACEC,6BADF,CAEEC,sBAFF,CAGEC,mBAHF,CAIEC,wBAJF,CAKEC,iBALF,CAMEC,wBANF,KAOO,oCAPP,CAQA,MAAOC,CAAAA,uBAAP,KAAoC,uEAApC,C,wFAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAW,CAEpC,GAAMC,CAAAA,QAAQ,CAAGrC,WAAW,EAA5B,CACA,GAAMsC,CAAAA,OAAO,CAAGrC,UAAU,EAA1B,CACA;AAEA;AACA,cAAwCJ,QAAQ,CAACwC,QAAQ,CAACE,IAAV,CAAhD,wCAAOC,YAAP,eAAqBC,eAArB,eACA,eAA8B5C,QAAQ,CAAC,KAAD,CAAtC,yCAAO6C,OAAP,eAAgBC,UAAhB,eACA,eAAsC9C,QAAQ,CAAC,KAAD,CAA9C,yCAAO+C,WAAP,eAAoBC,cAApB,eACA,eAA0DhD,QAAQ,CAAC,EAAD,CAAlE,yCAAOiD,qBAAP,eAA8BC,wBAA9B,eACA,eAA0ElD,QAAQ,CAAC,EAAD,CAAlF,0CAAOmD,6BAAP,gBAAsCC,gCAAtC,gBACA,gBAAoDpD,QAAQ,CAAC,EAAD,CAA5D,2CAAOqD,kBAAP,gBAA2BC,qBAA3B,gBACA,gBAAkDtD,QAAQ,CAAC,EAAD,CAA1D,2CAAOuD,iBAAP,gBAA0BC,oBAA1B,gBACA,gBAAoDxD,QAAQ,CAAC,EAAD,CAA5D,2CAAOyD,kBAAP,gBAA2BC,qBAA3B,gBACA,gBAAsC1D,QAAQ,CAAC,EAAD,CAA9C,2CAAO2D,WAAP,gBAAoBC,cAApB,gBACA,gBAA8C5D,QAAQ,CAAC,IAAD,CAAtD,2CAAO6D,eAAP,gBAAwBC,kBAAxB,gBACA,gBAA4C9D,QAAQ,CAAC,EAAD,CAApD,2CAAO+D,cAAP,gBAAuBC,iBAAvB,gBACA,gBAAoChE,QAAQ,CAAC,CAAD,CAA5C,2CAAOiE,UAAP,gBAAmBC,aAAnB,gBACA,gBAAgElE,QAAQ,CAAC,KAAD,CAAxE,2CAAOmE,wBAAP,gBAAiCC,2BAAjC,gBACA,gBAA4DpE,QAAQ,CAAC,KAAD,CAApE,2CAAOqE,sBAAP,gBAA+BC,yBAA/B,gBACA,gBAA8CtE,QAAQ,CAAC,KAAD,CAAtD,2CAAOuE,eAAP,gBAAwBC,kBAAxB,gBACA,gBAAkCxE,QAAQ,CAAC,KAAD,CAA1C,2CAAOyE,SAAP,gBAAkBC,YAAlB,gBACA,gBAAkC1E,QAAQ,CAAC,EAAD,CAA1C,2CAAO2E,SAAP,gBAAkBC,YAAlB,gBACA,gBAA8B5E,QAAQ,CAAC,EAAD,CAAtC,2CAAO6E,OAAP,gBAAgBC,UAAhB,gBACA,gBAA4C9E,QAAQ,CAAC,EAAD,CAApD,2CAAO+E,cAAP,gBAAuBC,iBAAvB,gBAEA;AACA,GAAMC,CAAAA,YAAY,CAAG,GAAIrD,CAAAA,YAAJ,EAArB,CACA,GAAMsD,CAAAA,eAAe,CAAG,GAAIvD,CAAAA,eAAJ,EAAxB,CACA,GAAMwD,CAAAA,wBAAwB,CAAG,GAAI/C,CAAAA,wBAAJ,EAAjC,CACA,GAAMgD,CAAAA,6BAA6B,CAAG,GAAIrD,CAAAA,6BAAJ,EAAtC,CACA,GAAMsD,CAAAA,sBAAsB,CAAG,GAAIrD,CAAAA,sBAAJ,EAA/B,CACA,GAAMsD,CAAAA,wBAAwB,CAAG,GAAIpD,CAAAA,wBAAJ,EAAjC,CACA,GAAMqD,CAAAA,iBAAiB,CAAG,GAAIpD,CAAAA,iBAAJ,EAA1B,CAEA;AACA,GAAMqD,CAAAA,SAAS,CAAGvF,MAAM,EAAxB,CACA,GAAMwF,CAAAA,iBAAiB,CAAGxF,MAAM,EAAhC,CAEA,wBAAeC,kBAAkB,CAAC,mBAAD,CAAsB,QAAtB,CAAjC,4DAAOwF,CAAP,yBAAUC,CAAV,yBAEA,GAAMC,CAAAA,QAAQ,CAAG,CACfF,CAAC,CAAC,cAAD,CADc,CAEfA,CAAC,CAAC,oBAAD,CAFc,CAGfA,CAAC,CAAC,gBAAD,CAHc,CAIfA,CAAC,CAAC,YAAD,CAJc,CAKfA,CAAC,CAAC,WAAD,CALc,CAAjB,CAQA;AACA3F,KAAK,CAAC8F,SAAN,CAAgB,UAAM,CAEpB,GAAI,CAACrD,QAAQ,CAACE,IAAd,CAAoB,CAClBF,QAAQ,CAACE,IAAT,CAAgB,CACd,YAAa,WADC,CAEd,aAAc,EAFA,CAGd,aAAc,IAHA,CAId,gBAAiB,KAJH,CAKd,YAAa,GALC,CAMd,aAAc,GANA,CAOd,aAAc,IAPA,CAQd,SAAU,GARI,CASd,aAAc,YATA,CAAhB,CAWD,CAEDE,eAAe,CAACJ,QAAQ,CAACE,IAAV,CAAf,CAA+B;AAC/BoD,cAAc,CAACtD,QAAQ,CAACE,IAAV,CAAd,CAEA;AACAoC,UAAU,CAAC,CACTiB,aAAa,CAAEvD,QAAQ,CAACE,IAAT,CAAcqD,aADpB,CAETC,UAAU,CAAExD,QAAQ,CAACE,IAAT,CAAcsD,UAFjB,CAGTC,UAAU,CAAEzD,QAAQ,CAACE,IAAT,CAAcuD,UAHjB,CAITC,SAAS,CAAE1D,QAAQ,CAACE,IAAT,CAAcwD,SAAW;AAJ3B,CAAD,CAAV,CAOD,CA3BD,CA2BG,EA3BH,EA6BA;AACA,QAASJ,CAAAA,cAAT,CAAwBK,MAAxB,CAAgC,CAE9B,GAAQJ,CAAAA,aAAR,CAAiDI,MAAjD,CAAQJ,aAAR,CAAuBG,SAAvB,CAAiDC,MAAjD,CAAuBD,SAAvB,CAAkCF,UAAlC,CAAiDG,MAAjD,CAAkCH,UAAlC,CAEAI,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6B7D,QAAQ,CAACE,IAAtC,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA4D,oBAAoB,CAACP,aAAD,CAAgBG,SAAhB,CAApB,CAEAK,sBAAsB,GAEtBC,sBAAsB,CAACR,UAAD,CAAtB,CAEAS,WAAW,CAACV,aAAD,CAAX,CACD,CAED,QAASO,CAAAA,oBAAT,CAA8BP,aAA9B,CAA6CG,SAA7C,CAAwD,CACtDf,wBAAwB,CAACuB,uBAAzB,CAAiDX,aAAjD,CAAgEG,SAAhE,EACGS,IADH,CACQ,SAACjE,IAAD,CAAU,CACd0D,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BN,aAA/B,CAA8CG,SAA9C,CAAyDxD,IAAzD,EACAsC,iBAAiB,CAACtC,IAAD,CAAjB,CACD,CAJH,EAKD,CAED,QAAS8D,CAAAA,sBAAT,CAAgCI,SAAhC,CAA2C,CACzC3B,YAAY,CAAC4B,cAAb,CAA4BD,SAA5B,EACGD,IADH,CACQ,SAAAG,IAAI,CAAI,CACZtD,oBAAoB,CAACsD,IAAI,CAACC,SAAL,CAAeC,QAAhB,CAApB,CACD,CAHH,EAIGC,KAJH,CAIS,SAAAC,GAAG,CAAI,CACZd,OAAO,CAACC,GAAR,CAAYa,GAAZ,EACD,CANH,EAOD,CAED,QAASX,CAAAA,sBAAT,EAAkC,CAEhCrB,eAAe,CAACiC,mCAAhB,GACGR,IADH,CACQ,SAACjE,IAAD,CAAU,CACd,GAAIA,IAAI,GAAK,IAAT,EAAiBA,IAAI,GAAK0E,SAA9B,CAAyC,CACvC1D,qBAAqB,CAAChB,IAAD,CAArB,CACD,CACF,CALH,EAMGuE,KANH,CAMS,SAACI,KAAD,CAAW,CAChBjB,OAAO,CAACiB,KAAR,CAAc,aAAd,CAA6BA,KAA7B,EACD,CARH,EASD,CAED,QAASZ,CAAAA,WAAT,CAAqBV,aAArB,CAAoC,CAElC;AACAb,eAAe,CAACoC,yBAAhB,CAA0CvB,aAA1C,EAAyDY,IAAzD,CAA8D,SAAAG,IAAI,CAAI,CAEpEV,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BS,IAA3B,EAEE7B,YAAY,CAACsC,sBAAb,CAAoCT,IAAI,CAACU,iBAAzC,EACCb,IADD,CACM,SAACc,OAAD,CAAa,CACjBrB,OAAO,CAACC,GAAR,CAAYoB,OAAZ,EACAvE,wBAAwB,CAACuE,OAAD,CAAxB,CACD,CAJD,EAMArC,6BAA6B,CAACsC,0BAA9B,CAAyDZ,IAAI,CAACU,iBAA9D,EACCb,IADD,CACM,SAACc,OAAD,CAAa,CACjBrE,gCAAgC,CAACqE,OAAD,CAAhC,CACD,CAHD,EAKD,CAfH,EAeKR,KAfL,CAeW,SAACI,KAAD,CAAW,CAAE,CAfxB,EAkBAhC,sBAAsB,CAACsC,uBAAvB,CAA+C5B,aAA/C,EACGY,IADH,CACQ,SAACc,OAAD,CAAa,CACjBnE,qBAAqB,CAACmE,OAAD,CAArB,CACD,CAHH,EAKA;AACA;AACA;AACA;AAEAnC,wBAAwB,CAACsC,iCAAzB,CAA2D7B,aAA3D,EACGY,IADH,CACQ,SAACc,OAAD,CAAa,CACjB7D,cAAc,CAAC6D,OAAD,CAAd,CACD,CAHH,EAKAlC,iBAAiB,CAACsC,uBAAlB,CAA0C9B,aAA1C,EACGY,IADH,CACQ,SAACc,OAAD,CAAa,CACjBzD,iBAAiB,CAACyD,OAAD,CAAjB,CACD,CAHH,EAKA3D,kBAAkB,CAAC,CACjBgE,KAAK,CAAE,CAAEC,IAAI,CAAE,kBAAR,CADU,CAEjBC,GAAG,CAAE,CAAED,IAAI,CAAE,kBAAR,CAFY,CAAD,CAAlB,CAKD,CAED,QAASE,CAAAA,kBAAT,CAA4BC,OAA5B,CAAqC,CACnC,GAAMC,CAAAA,aAAa,8BAAO5E,iBAAP,GAA0B2E,OAA1B,EAAnB,CACA1E,oBAAoB,CAAC2E,aAAD,CAApB,CACD,CAED,QAASC,CAAAA,uBAAT,CAAiCF,OAAjC,CAA0C,CACxC,GAAMG,CAAAA,iBAAiB,8BAAOtE,cAAP,GAAuBmE,OAAvB,EAAvB,CACAlE,iBAAiB,CAACqE,iBAAD,CAAjB,CACD,CAED;AACA,QAASC,CAAAA,uBAAT,EAAmC,CACjClE,2BAA2B,CAAC,CAACD,wBAAF,CAA3B,CACAoE,aAAa,GACd,CAED;AACA,QAASC,CAAAA,aAAT,CAAuBC,MAAvB,CAA+B,CAE7B,OAAQA,MAAR,EACE,IAAKpI,CAAAA,IAAI,CAACqI,oBAAV,CAAgC,CAC9B,oGAD8B,CAE9B,oGAF8B,CAG9B,oGACA,GAAMC,CAAAA,GAAG,CAAG,GAAI9G,CAAAA,WAAJ,EAAZ,CACAuE,OAAO,CAACC,GAAR,CAAY7D,QAAQ,CAACE,IAAT,CAAcuD,UAA1B,EACA,GAAIvD,CAAAA,IAAI,CAAGF,QAAQ,CAACE,IAAT,CAAcuD,UAAzB,CACA0C,GAAG,CAACC,YAAJ,CAAiBlG,IAAjB,EAAuBiE,IAAvB,CAA4B,SAACG,IAAD,CAAU,CACpC,GAAIA,IAAI,GAAKM,SAAb,CAAwB,CACtB5C,kBAAkB,CAAC,IAAD,CAAlB,CACD,CAFD,IAGK,CACH;AACAI,YAAY,CAACrC,KAAK,CAACmD,CAAN,CAAQ,0BAAR,CAAD,CAAZ,CACAhB,YAAY,CAAC,IAAD,CAAZ,CACD,CAEF,CAVD,EAWAmE,qBAAqB,GACrB;AACApG,OAAO,CAACqG,IAAR,CAAaxI,GAAG,CAACyI,aAAjB,EACA,OACD,CACD,IAAK1I,CAAAA,IAAI,CAAC2I,gBAAV,CAA4B,CAC1BC,UAAU,CAAC,KAAD,CAAV,CACAzD,SAAS,CAAC0D,OAAV,CAAkBC,IAAlB,GACA,MACD,CACD,IAAK9I,CAAAA,IAAI,CAAC+I,aAAV,CAAyB,CACvBH,UAAU,CAAC,IAAD,CAAV,CACA,MACD,CACD,QAAS,CACP;AACA,OACD,CApCH,CAwCD,CAED;AACA,QAASJ,CAAAA,qBAAT,EAAiC,CAC/BvE,yBAAyB,CAAC,CAACD,sBAAF,CAAzB,CACD,CAED,QAAS4E,CAAAA,UAAT,EAAsC,IAAlBI,CAAAA,QAAkB,2DAAP,KAAO,CAEpCjD,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBgD,QAAtB,EACA,GAAMC,CAAAA,YAAY,CAAG7D,iBAAiB,CAACyD,OAAlB,CAA0BK,MAA1B,CAAiCF,QAAjC,CAArB,CACA,GAAI,CAACC,YAAL,CAAmB,CACjB;AACA9D,SAAS,CAAC0D,OAAV,CAAkBM,SAAlB,CAA4B,CAA5B,EACA,MAAO,MAAP,CACD,CACD,MAAOF,CAAAA,YAAP,CACD,CAED,QAASf,CAAAA,aAAT,EAAyB,CACvBkB,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,YAA5B,EACD,CAGD,mBACE,KAAC,KAAD,CAAO,QAAP,wBAEE,MAAC,sBAAD,EAAwB,KAAK,CAAE/E,OAA/B,wBAEE,aAAK,SAAS,CAAC,cAAf,wBAEE,KAAC,WAAD,EAAa,KAAK,CAAEa,CAAC,CAAC,mBAAD,CAArB,CAA4C,cAAc,CAAEA,CAAC,CAAC,iBAAD,CAA7D,EAFF,cAIE,MAAC,IAAD,yBAEE,MAAC,QAAD,yBAEE,WAAI,SAAS,CAAC,YAAd,UAA4BA,CAAC,CAAC,iBAAD,CAA7B,EAFF,cAGE,UAAG,SAAS,CAAC,iBAAb,UAAgCA,CAAC,CAAC,wDAAD,CAAjC,EAHF,cAKE,MAAC,aAAD,EAAe,QAAQ,CAAEE,QAAzB,CACE,eAAe,CAAE,CADnB,CAEE,GAAG,CAAEJ,SAFP,CAGE,SAAS,CAAEvB,UAHb,CAIE,WAAW,CAAEC,aAJf,wBAME,KAAC,OAAD,EAAS,KAAK,CAAE,CAAhB,uBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,kBAAD,EAAoB,GAAG,CAAEuB,iBAAzB,CACE,KAAK,CAAEC,CAAC,CAAC,cAAD,CADV,CAEE,MAAM,CAAEX,cAFV,EADF,EADF,EADF,EANF,cAgBE,MAAC,OAAD,EAAS,KAAK,CAAE,CAAhB,wBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,iBAAD,EAAmB,KAAK,CAAEW,CAAC,CAAC,oBAAD,CAA3B,CAAmD,KAAK,CAAEzC,qBAA1D,EADF,EADF,EADF,cAME,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,uBAAD,EAAyB,KAAK,CAAEyC,CAAC,CAAC,6BAAD,CAAjC,CAAkE,KAAK,CAAEvC,6BAAzE,EADF,EADF,EANF,GAhBF,cA6BE,KAAC,OAAD,EAAS,KAAK,CAAE,CAAhB,uBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,aAAD,EAAe,KAAK,CAAEuC,CAAC,CAAC,gBAAD,CAAvB,CAA2C,KAAK,CAAErC,kBAAlD,EADF,EADF,EADF,EA7BF,cAqCE,KAAC,OAAD,EAAS,KAAK,CAAE,CAAhB,uBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,YAAD,EAAc,KAAK,CAAEqC,CAAC,CAAC,eAAD,CAAtB,CACE,KAAK,CAAEnC,iBADT,CAEE,QAAQ,CAAE,IAFZ,CAGE,cAAc,CAAE0E,kBAHlB,CAIE,kBAAkB,CAAExE,kBAJtB,EADF,EADF,EADF,EArCF,cAiDE,KAAC,OAAD,EAAS,KAAK,CAAE,CAAhB,uBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,uBACE,KAAC,SAAD,EAAW,KAAK,CAAEiC,CAAC,CAAC,YAAD,CAAnB,CAAmC,KAAK,CAAE3B,cAA1C,CACE,UAAU,CAAEqE,uBADd,EADF,EADF,EADF,EAjDF,GALF,GAFF,cAqEE,MAAC,UAAD,EAAY,SAAS,CAAC,UAAtB,wBAEE,MAAC,MAAD,EAAQ,KAAK,CAAC,MAAd,CAAqB,IAAI,CAAC,QAA1B,CAAmC,KAAK,CAAE,CAAEyB,MAAM,CAAE,KAAV,CAA1C,CACE,OAAO,CAAE,kBAAM,CAAEvB,uBAAuB,GAAI,CAD9C,wBAEE,UAAG,SAAS,CAAC,iDAAb,EAFF,QAGG3C,CAAC,CAAC,MAAD,CAHJ,GAFF,CAQG1B,UAAU,CAAG,CAAb,gBACC;AACA,MAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,CAAwB,IAAI,CAAC,QAA7B,CAAsC,KAAK,CAAE,CAAE4F,MAAM,CAAE,KAAV,CAA7C,CAAgE,OAAO,CAAE,kBAAM,CAAErE,SAAS,CAAC0D,OAAV,CAAkBY,IAAlB,GAA0B,CAA3G,wBACE,UAAG,SAAS,CAAC,kCAAb,EADF,QAEGnE,CAAC,CAAC,UAAD,CAFJ,GAVJ,CAgBG1B,UAAU,CAAG,CAAb,eACC,MAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,CAAwB,IAAI,CAAC,QAA7B,CAAsC,KAAK,CAAE,CAAE4F,MAAM,CAAE,KAAV,CAA7C,CAAgE,OAAO,CAAE,kBAAM,CAAErB,aAAa,CAACnI,IAAI,CAAC2I,gBAAN,CAAb,CAAsC,CAAvH,WACGrD,CAAC,CAAC,MAAD,CADJ,qBAEE,UAAG,SAAS,CAAC,mCAAb,EAFF,GAjBJ,cAuBE,MAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,CAAwB,IAAI,CAAC,QAA7B,CAAsC,KAAK,CAAE,CAAEoE,UAAU,CAAE,KAAd,CAA7C,CAAoE,OAAO,CAAE,kBAAM,CAAEvB,aAAa,CAACnI,IAAI,CAAC+I,aAAN,CAAb,CAAmC,CAAxH,wBACE,UAAG,SAAS,CAAC,kDAAb,EADF,QAEGzD,CAAC,CAAC,UAAD,CAFJ,GAvBF,GArEF,GAJF,cAyGE,KAAC,UAAD,IAzGF,CA0GGpB,eAAe,cACd,KAAC,UAAD,EACE,OAAO,KADT,CAEE,KAAK,CAAEhC,KAAK,CAACmD,CAAN,CAAQ,eAAR,CAFT,CAGE,SAAS,CAAE,oBAAM,CACflB,kBAAkB,CAAC,KAAD,CAAlB,CAEA/B,OAAO,CAACqG,IAAR,CAAaxI,GAAG,CAACyI,aAAjB,EACD,CAPH,UASGxG,KAAK,CAACmD,CAAN,CAAQ,oBAAR,CATH,EADc,CAYZ,IAtHN,CAwHGjB,SAAS,cACR,KAAC,UAAD,EACE,KAAK,KADP,CAEE,KAAK,CAAElC,KAAK,CAACmD,CAAN,CAAQ,aAAR,CAFT,CAGE,SAAS,CAAE,oBAAM,CACfhB,YAAY,CAAC,KAAD,CAAZ,CACD,CALH,UAOGC,SAPH,EADQ,CAUN,IAlIN,GAFF,CAuIG9B,OAAO,eACN,KAAC,gBAAD,EAAkB,OAAO,CAAE8C,CAAC,CAAC,aAAD,CAA5B,EAxIJ,CA2IG5C,WAAW,eACV,KAAC,cAAD,EAAgB,KAAK,CAAE4C,CAAC,CAAC,oBAAD,CAAxB,CAAgD,OAAO,CAAED,CAAC,CAAC,uBAAD,CAA1D,EA5IJ,cA+IE,KAAC,iBAAD,EAAmB,aAAa,CAAE8C,aAAlC,CAAiD,MAAM,CAAErE,wBAAzD,CAAmF,MAAM,CAAE,iBAAM,CAAEmE,uBAAuB,GAAI,CAA9H,EA/IF,GAFF,EADF,CAyJD,CApaD,CAyaA,cAAehG,CAAAA,kBAAf","sourcesContent":["import React, { useState, useRef } from \"react\"\r\nimport { translationHelpers } from \"../../../helpers\";\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport * as OPTs from \"../../../helpers/options_helper\"\r\nimport * as url from \"../../../helpers/url_helper\"\r\nimport { CreditProposalProvider } from '../../../components/PropuestaCreditoComercial/CreditProposalContext';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  TabPane\r\n} from \"reactstrap\"\r\n\r\nimport {\r\n  ChangeSummary, CorporateExposure,\r\n  FacilityList, FormCreditProposal,\r\n  Refinancing, CheckList\r\n} from \"../../../components/PropuestaCreditoComercial\";\r\n\r\n\r\n// UI Components\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport LogProcess from \"../../../components/LogProcess\";\r\nimport LoadingIndicator from \"../../../components/UI/LoadingIndicator\";\r\nimport SuccessMessage from \"../../../components/UI/SuccessMessage\";\r\nimport ModalCloseOptions from \"../../../components/UI/ModalCloseOptions\";\r\nimport WizardSidebar from \"../../../components/UI/WizardSidebar\";\r\n\r\n// Services\r\nimport { BackendServices, CoreServices, BpmServices, } from \"../../../services\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport {\r\n  ServicioExposicionCorporativa,\r\n  ServicioResumenCambios,\r\n  ServicioFacilidades,\r\n  ServicioRefinanciamiento,\r\n  ServicioChecklist,\r\n  ServicioPropuestaCredito,\r\n} from \"../../../services/PropuestaCredito\";\r\nimport CorporateExposureClient from \"../../../components/PropuestaCreditoComercial/CorporateExposureClient\";\r\n\r\nconst CreditProposalPage = (props) => {\r\n\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  // modelo.datosGenerales.transactId=location.data.transactionId;\r\n\r\n  //Data que recibimos en el location\r\n  const [locationData, setLocationData] = useState(location.data);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [exposicionCorporativa, setExposicionCorporativa] = useState([]);\r\n  const [exposicionCorporativaClientes, setExposicionCorporativaClientes] = useState([]);\r\n  const [changeSummaryItems, setChangeSummaryItems] = useState([]);\r\n  const [facilityListItems, setFacilityListItems] = useState([]);\r\n  const [identificationList, setIdentificationList] = useState([]);\r\n  const [refinancing, setRefinancing] = useState([]);\r\n  const [documentAuthors, setDocumentAuthors] = useState(null);\r\n  const [checkListItems, setCheckListItems] = useState([]);\r\n  const [currentTab, setCurrentTab] = useState(0);\r\n  const [displayModalCloseOptions, setDisplayModalCloseOptions] = useState(false);\r\n  const [displayModalEndProcess, setDisplayModalEndProcess] = useState(false);\r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [context, setContext] = useState({});\r\n  const [datosGenerales, setDatosGenerales] = useState({});\r\n\r\n  // Services\r\n  const coreServices = new CoreServices();\r\n  const backendServices = new BackendServices();\r\n  const servicioPropuestaCredito = new ServicioPropuestaCredito();\r\n  const servicioExposicionCorporativa = new ServicioExposicionCorporativa();\r\n  const servicioResumenCambios = new ServicioResumenCambios();\r\n  const servicioRefinanciamiento = new ServicioRefinanciamiento();\r\n  const servicioChecklist = new ServicioChecklist();\r\n\r\n  // Component Refs\r\n  const wizardRef = useRef();\r\n  const creditProposalRef = useRef();\r\n\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n\r\n  const sections = [\r\n    t('General Data'),\r\n    t('Corporate Exposure'),\r\n    t('Change Summary'),\r\n    t('Facilities'),\r\n    t('Checklist')\r\n  ];\r\n\r\n  //On Mounting (componentDidMount)\r\n  React.useEffect(() => {\r\n\r\n    if (!location.data) {\r\n      location.data = {\r\n        \"requestId\": \"XYZ892022\",\r\n        \"facilityId\": \"\",\r\n        \"customerId\": \"68\",\r\n        \"transactionId\": \"101\",\r\n        \"processId\": \"6\",\r\n        \"activityId\": \"0\",\r\n        \"instanceId\": 9104,\r\n        \"taskId\": 456,\r\n        \"taskStatus\": \"InProgress\"\r\n      }\r\n    }\r\n\r\n    setLocationData(location.data);//guardamos los datos que se pasan como parametros\r\n    initializeData(location.data);\r\n\r\n    // update context\r\n    setContext({\r\n      transactionId: location.data.transactionId,\r\n      customerId: location.data.customerId,\r\n      instanceId: location.data.instanceId,\r\n      requestId: location.data.requestId, // debe venir del resultado de guardar datos generales\r\n    });\r\n\r\n  }, []);\r\n\r\n  //Caraga Inicial\r\n  function initializeData(params) {\r\n\r\n    const { transactionId, requestId, customerId } = params;\r\n\r\n    console.log('location.data', location.data);\r\n\r\n    // coreServices.getPaisesCatalogo()\r\n    //   .then((paises) => {\r\n    //  if(response === null){ return;}\r\n    //     console.log('paises', paises);\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     console.error('error fetching countries', error);\r\n    //   });\r\n\r\n    cargarDatosGenerales(transactionId, requestId);\r\n\r\n    cargarIdentificaciones();\r\n\r\n    cargarListaFacilidades(customerId);\r\n\r\n    fetchReport(transactionId);\r\n  }\r\n\r\n  function cargarDatosGenerales(transactionId, requestId) {\r\n    servicioPropuestaCredito.consultarDatosGenerales(transactionId, requestId)\r\n      .then((data) => {\r\n        console.log('datos generales', transactionId, requestId, data);\r\n        setDatosGenerales(data);\r\n      });\r\n  }\r\n\r\n  function cargarListaFacilidades(idcliente) {\r\n    coreServices.getFacilidades(idcliente)\r\n      .then(resp => {\r\n        setFacilityListItems(resp.AcctLoans.AcctLoan);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function cargarIdentificaciones() {\r\n\r\n    backendServices.consultarCatalogoTipoIdentificacion()\r\n      .then((data) => {\r\n        if (data !== null && data !== undefined) {\r\n          setIdentificationList(data);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('api error: ', error);\r\n      });\r\n  }\r\n\r\n  function fetchReport(transactionId) {\r\n    \r\n    // setLoading(true);\r\n    backendServices.consultarUsuarioProspecto(transactionId).then(resp => {\r\n\r\n      console.log(\"fetchReport\", resp);\r\n\r\n        coreServices.getCorporateExhibition(resp.customerNumberT24)\r\n        .then((results) => {\r\n          console.log(results);\r\n          setExposicionCorporativa(results);\r\n        });\r\n              \r\n        servicioExposicionCorporativa.consultarExposicionCliente(resp.customerNumberT24)\r\n        .then((results) => {\r\n          setExposicionCorporativaClientes(results);\r\n        });\r\n\r\n      }).catch((error) => {});\r\n      \r\n      \r\n    servicioResumenCambios.consultarResumenCambios(transactionId)\r\n      .then((results) => {\r\n        setChangeSummaryItems(results);\r\n      });\r\n\r\n    // servicioFacilidades.consultarListaFacilidades(idCliente)\r\n    //   .then((results) => {\r\n    //     setFacilityListItfems(results);\r\n    //   });\r\n\r\n    servicioRefinanciamiento.consultarBitacoraRefinanciamiento(transactionId)\r\n      .then((results) => {\r\n        setRefinancing(results);\r\n      });\r\n\r\n    servicioChecklist.consultarListaCheckList(transactionId)\r\n      .then((results) => {\r\n        setCheckListItems(results);\r\n      });\r\n\r\n    setDocumentAuthors({\r\n      owner: { name: 'Carolina Delgado' },\r\n      ceo: { name: 'Carolina Delgado' }\r\n    });\r\n\r\n  }\r\n\r\n  function handleSaveFacility(newItem) {\r\n    const newFacilities = [...facilityListItems, newItem];\r\n    setFacilityListItems(newFacilities);\r\n  }\r\n\r\n  function handleSaveCheckListItem(newItem) {\r\n    const newCheckListItems = [...checkListItems, newItem];\r\n    setCheckListItems(newCheckListItems);\r\n  }\r\n\r\n  //Modal Opciones al Salir\r\n  function toggleModalCloseOptions() {\r\n    setDisplayModalCloseOptions(!displayModalCloseOptions);\r\n    removeBodyCss();\r\n  }\r\n\r\n  //Salvando el Proceso y le pasamos una opcion: 1-Finalizar Proceso, 2- Salvarlo, 3- A Cumplimmineto, 4- Avanzar a IGR\r\n  function onSaveProcess(option) {\r\n\r\n    switch (option) {\r\n      case OPTs.OPT_FINALIZARPROCESO: {\r\n        /* ---------------------------------------------------------------------------------------------- */\r\n        /*                     Procedemos a llamar al servicio de finalizar el proceso                    */\r\n        /* ---------------------------------------------------------------------------------------------- */\r\n        const api = new BpmServices();\r\n        console.log(location.data.instanceId);\r\n        let data = location.data.instanceId;\r\n        api.abortProcess(data).then((resp) => {\r\n          if (resp !== undefined) {\r\n            setsuccessSave_dlg(true);\r\n          }\r\n          else {\r\n            //Mensaje ERROR\r\n            seterror_msg(props.t(\"TheProcessCouldNotFinish\"));\r\n            seterror_dlg(true);\r\n          }\r\n\r\n        });\r\n        toggleModalEndProcess();\r\n        // navigate to dashboard\r\n        history.push(url.URL_DASHBOARD);\r\n        return;\r\n      }\r\n      case OPTs.OPT_SALVAPARCIAL: {\r\n        submitData(false);\r\n        wizardRef.current.next();\r\n        break;\r\n      }\r\n      case OPTs.OPT_SALVAFULL: {\r\n        submitData(true);\r\n        break;\r\n      }\r\n      default: {\r\n        // do nothing\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  //Modal Para mostrar Comentario de Fin de Proceso\r\n  function toggleModalEndProcess() {\r\n    setDisplayModalEndProcess(!displayModalEndProcess);\r\n  }\r\n\r\n  function submitData(validate = false) {\r\n\r\n    console.log('submit', validate);\r\n    const submitResult = creditProposalRef.current.submit(validate);\r\n    if (!submitResult) {\r\n      // select first invalid tab\r\n      wizardRef.current.selectTab(0);\r\n      return false;\r\n    }\r\n    return submitResult;\r\n  }\r\n\r\n  function removeBodyCss() {\r\n    document.body.classList.add(\"no_padding\")\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n      <CreditProposalProvider value={context}>\r\n\r\n        <div className=\"page-content\">\r\n\r\n          <Breadcrumbs title={t(\"Commercial Credit\")} breadcrumbItem={t(\"Credit Proposal\")} />\r\n\r\n          <Card>\r\n\r\n            <CardBody>\r\n\r\n              <h4 className=\"card-title\">{t(\"Credit Proposal\")}</h4>\r\n              <p className=\"card-title-desc\">{t(\"This form is official and must be filled out correctly\")}</p>\r\n\r\n              <WizardSidebar sections={sections}\r\n                sidebarColWidth={3}\r\n                ref={wizardRef}\r\n                activeTab={currentTab}\r\n                onChangeTab={setCurrentTab}>\r\n\r\n                <TabPane tabId={0}>\r\n                  <Row>\r\n                    <Col xl=\"12\">\r\n                      <FormCreditProposal ref={creditProposalRef}\r\n                        title={t(\"General Data\")}\r\n                        values={datosGenerales} />\r\n                    </Col>\r\n                  </Row>\r\n                </TabPane>\r\n\r\n                <TabPane tabId={1}>\r\n                  <Row>\r\n                    <Col xl=\"12\">\r\n                      <CorporateExposure title={t(\"Corporate Exposure\")} items={exposicionCorporativa} />\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col xl=\"12\">\r\n                      <CorporateExposureClient title={t(\"Customer Corporate Exposure\")} items={exposicionCorporativaClientes} />\r\n                    </Col>\r\n                  </Row>\r\n                </TabPane>\r\n\r\n                <TabPane tabId={2}>\r\n                  <Row>\r\n                    <Col xl=\"12\">\r\n                      <ChangeSummary title={t(\"Change Summary\")} items={changeSummaryItems} />\r\n                    </Col>\r\n                  </Row>\r\n                </TabPane>\r\n\r\n                <TabPane tabId={3}>\r\n                  <Row>\r\n                    <Col xl=\"12\">\r\n                      <FacilityList title={t(\"Facility List\")}\r\n                        items={facilityListItems}\r\n                        editMode={true}\r\n                        onSaveFacility={handleSaveFacility}\r\n                        identificationList={identificationList} />\r\n                    </Col>\r\n                  </Row>\r\n                </TabPane>\r\n\r\n                <TabPane tabId={4}>\r\n                  <Row>\r\n                    <Col xl=\"12\">\r\n                      <CheckList title={t(\"Check List\")} items={checkListItems}\r\n                        onSaveItem={handleSaveCheckListItem} />\r\n                    </Col>\r\n                  </Row>\r\n                </TabPane>\r\n\r\n              </WizardSidebar>\r\n\r\n            </CardBody>\r\n\r\n            <CardFooter className=\"text-end\">\r\n\r\n              <Button color=\"dark\" type=\"button\" style={{ margin: '5px' }}\r\n                onClick={() => { toggleModalCloseOptions() }}>\r\n                <i className=\"mdi mdi-arrow-left-bold-circle-outline mid-12px\"></i>&nbsp;\r\n                {c(\"Exit\")}\r\n              </Button>\r\n\r\n              {currentTab > 0 && (\r\n                // <Button color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { wizardRef.current.NextPrevious(selectedTabIndex - 1) }}>{c(\"Previous\")}</Button>\r\n                <Button color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { wizardRef.current.prev() }}>\r\n                  <i className=\"mdi mdi-arrow-left-bold mid-12px\"></i>&nbsp;\r\n                  {c(\"Previous\")}\r\n                </Button>)\r\n              }\r\n\r\n              {currentTab < 4 && (\r\n                <Button color=\"success\" type=\"button\" style={{ margin: '5px' }} onClick={() => { onSaveProcess(OPTs.OPT_SALVAPARCIAL) }}>\r\n                  {c(\"Next\")}&nbsp;\r\n                  <i className=\"mdi mdi-arrow-right-bold mid-12px\"></i>\r\n                </Button>)\r\n              }\r\n\r\n              <Button color=\"success\" type=\"button\" style={{ marginLeft: '5px' }} onClick={() => { onSaveProcess(OPTs.OPT_SALVAFULL) }}>\r\n                <i className=\"mdi mdi-arrow-right-bold-circle-outline mid-12px\"></i>&nbsp;\r\n                {c(\"Continue\")}\r\n              </Button>\r\n\r\n            </CardFooter>\r\n\r\n          </Card>\r\n\r\n          <LogProcess />\r\n          {successSave_dlg ? (\r\n            <SweetAlert\r\n              success\r\n              title={props.t(\"SuccessDialog\")}\r\n              onConfirm={() => {\r\n                setsuccessSave_dlg(false)\r\n\r\n                history.push(url.URL_DASHBOARD);\r\n              }}\r\n            >\r\n              {props.t(\"SuccessSaveMessage\")}\r\n            </SweetAlert>\r\n          ) : null}\r\n\r\n          {error_dlg ? (\r\n            <SweetAlert\r\n              error\r\n              title={props.t(\"ErrorDialog\")}\r\n              onConfirm={() => {\r\n                seterror_dlg(false)\r\n              }}\r\n            >\r\n              {error_msg}\r\n            </SweetAlert>\r\n          ) : null}\r\n        </div>\r\n\r\n        {loading && (\r\n          <LoadingIndicator message={c(\"Please Wait\")} />\r\n        )}\r\n\r\n        {showSuccess && (\r\n          <SuccessMessage title={c(\"Operation Complete\")} message={t(\"Credit Proposal Saved\")} />\r\n        )}\r\n\r\n        <ModalCloseOptions onSaveProcess={onSaveProcess} isOpen={displayModalCloseOptions} toggle={() => { toggleModalCloseOptions() }} />\r\n\r\n      </CreditProposalProvider>\r\n\r\n    </React.Fragment>\r\n  );\r\n\r\n}\r\n\r\nCreditProposalPage.propTypes = {\r\n};\r\n\r\nexport default CreditProposalPage;\r\n"]},"metadata":{},"sourceType":"module"}