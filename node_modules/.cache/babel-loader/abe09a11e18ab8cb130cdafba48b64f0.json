{"ast":null,"code":"var _jsxFileName = \"D:\\\\_PROJECTS\\\\_SOAINT\\\\JBPM\\\\App\\\\banescocreditoscomerciales\\\\src\\\\pages\\\\CommercialCredit\\\\12_Abogado\\\\PantallaDetalle\\\\index.js\",\n    _s = $RefreshSig$();\n\n/*ReinforcedManagementReport = Lista de Informe Reforzado*/\nimport React, { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { useLocation } from 'react-router-dom';\nimport { Link } from \"react-router-dom\";\nimport { Card, CardHeader, CardBody, Col, Button, CardFooter } from \"reactstrap\"; //Import Breadcrumb\n\nimport Breadcrumbs from \"../../../../components/Common/Breadcrumb\"; //i18n\n\nimport { withTranslation } from \"react-i18next\";\nimport DatosGenerales from \"./DatosGenerales\";\nimport ResultadosBusqueda from \"./ResultadosBusqueda\";\nimport ApiServicesDetalleAbogado from \"../../../../services/Abogado/ApiServicesDetalleAbogado\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PantallaBusqueda = props => {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const location = useLocation();\n  const {\n    selectedData\n  } = location;\n  const [showResults, setShowResults] = useState(false);\n  const [dataList, setDataList] = useState([]);\n  const [locationData, setLocationData] = useState(null); //Servicios\n\n  const [backendServices, setbackendServices] = useState(new BackendServices());\n  const [bpmServices, setbpmServices] = useState(new BpmServices()); //const [coreServices, setcoreServices] = useState(new CoreServices());\n\n  const [mainDebtor, setmainDebtor] = useState(null); //On Mounting (componentDidMount)\n\n  React.useEffect(() => {\n    if (location.data !== null && location.data !== undefined) {\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\n        //location.data.transactionId = 0;\n        //checkAndCreateProcedure(location.data);\n        history.push(url.URL_DASHBOARD);\n      } else {\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\n        setLocationData(location.data);\n        fetchData(location.data);\n      }\n    } else {\n      //chequeamos si tenemos guardado en session\n      var result = sessionStorage.getItem('locationData');\n\n      if (result !== undefined && result !== null) {\n        result = JSON.parse(result);\n        setLocationData(result);\n        fetchData(result);\n      }\n    }\n  }, []); //Caraga Inicial de datos\n\n  function fetchData(locationData) {\n    //chequear si la tarea no ha sido iniciada\n    bpmServices.checkAndStartTask(locationData).then(iniresult => {\n      if (iniresult === false) {\n        history.push(url.URL_DASHBOARD);\n      }\n    });\n    loadUserProspect(locationData.transactionId); // Read Api Service data\n\n    searchData(null);\n  }\n\n  function loadUserProspect(transactionId) {\n    // consultarDeudorPrincipal\n    backendServices.consultPrincipalDebtor(transactionId).then(data => {\n      if (data !== undefined) {\n        setmainDebtor(data);\n      }\n    });\n  }\n\n  function searchData(values) {\n    // console.log(values);\n    const api = new ApiServicesDetalleAbogado();\n    api.getResultadoDetalleAbogadoMode(values).then(data => {\n      // console.log(data);\n      setDataList(data);\n    }).catch(error => {\n      console.error('Error fetching documents', error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content\",\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumbs, {\n        title: props.t(\"CommercialCredit\"),\n        breadcrumbItem: props.t(\"Lawyer\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardBody, {\n          children: /*#__PURE__*/_jsxDEV(ResultadosBusqueda, {\n            results: dataList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n          style: {\n            textAlign: \"right\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            className: \"btn btn-dark\",\n            style: {\n              margin: '5px'\n            },\n            to: {\n              pathname: \"/dashboard\",\n              selectedData: undefined\n            },\n            children: props.t(\"Close\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            id: \"btnSave\",\n            color: \"success\",\n            type: \"submit\",\n            style: {\n              margin: '5px'\n            },\n            children: props.t(\"Advance\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PantallaBusqueda, \"8bAmwFLZhnWszCRomGhi5G0gbK0=\", true, function () {\n  return [useLocation];\n});\n\n_c = PantallaBusqueda;\nexport default withTranslation()(PantallaBusqueda);\n\nvar _c;\n\n$RefreshReg$(_c, \"PantallaBusqueda\");","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/12_Abogado/PantallaDetalle/index.js"],"names":["React","useState","PropTypes","useLocation","Link","Card","CardHeader","CardBody","Col","Button","CardFooter","Breadcrumbs","withTranslation","DatosGenerales","ResultadosBusqueda","ApiServicesDetalleAbogado","PantallaBusqueda","props","t","i18n","useTranslation","location","selectedData","showResults","setShowResults","dataList","setDataList","locationData","setLocationData","backendServices","setbackendServices","BackendServices","bpmServices","setbpmServices","BpmServices","mainDebtor","setmainDebtor","useEffect","data","undefined","transactionId","length","history","push","url","URL_DASHBOARD","sessionStorage","setItem","JSON","stringify","fetchData","result","getItem","parse","checkAndStartTask","then","iniresult","loadUserProspect","searchData","consultPrincipalDebtor","values","api","getResultadoDetalleAbogadoMode","catch","error","console","textAlign","margin","pathname"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,IAAT,QAAqB,kBAArB;AAGA,SACEC,IADF,EACOC,UADP,EAEEC,QAFF,EAGEC,GAHF,EAIEC,MAJF,EAKEC,UALF,QAMO,YANP,C,CAQA;;AACA,OAAOC,WAAP,MAAwB,0CAAxB,C,CAEA;;AACA,SAASC,eAAT,QAAgC,eAAhC;AAEA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,OAAOC,yBAAP,MAAsC,wDAAtC;;;AAGA,MAAMC,gBAAgB,GAAGC,KAAK,IAAI;AAAA;;AAGhC,QAAM;AAAEC,IAAAA,CAAF;AAAKC,IAAAA;AAAL,MAAcC,cAAc,EAAlC;AACA,QAAMC,QAAQ,GAAGlB,WAAW,EAA5B;AACA,QAAM;AAAEmB,IAAAA;AAAF,MAAmBD,QAAzB;AAEA,QAAM,CAACE,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACwB,QAAD,EAAWC,WAAX,IAA0BzB,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAM,CAAC0B,YAAD,EAAeC,eAAf,IAAkC3B,QAAQ,CAAC,IAAD,CAAhD,CAVgC,CAWhC;;AACA,QAAM,CAAC4B,eAAD,EAAkBC,kBAAlB,IAAwC7B,QAAQ,CAAC,IAAI8B,eAAJ,EAAD,CAAtD;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgChC,QAAQ,CAAC,IAAIiC,WAAJ,EAAD,CAA9C,CAbgC,CAchC;;AAEA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BnC,QAAQ,CAAC,IAAD,CAA5C,CAhBgC,CAkBhC;;AACAD,EAAAA,KAAK,CAACqC,SAAN,CAAgB,MAAM;AACpB,QAAIhB,QAAQ,CAACiB,IAAT,KAAkB,IAAlB,IAA0BjB,QAAQ,CAACiB,IAAT,KAAkBC,SAAhD,EAA2D;AACzD,UAAIlB,QAAQ,CAACiB,IAAT,CAAcE,aAAd,KAAgCD,SAAhC,IAA6ClB,QAAQ,CAACiB,IAAT,CAAcE,aAAd,CAA4BC,MAA5B,IAAsC,CAAvF,EAA0F;AACxF;AACA;AACAC,QAAAA,OAAO,CAACC,IAAR,CAAaC,GAAG,CAACC,aAAjB;AACD,OAJD,MAKK;AACHC,QAAAA,cAAc,CAACC,OAAf,CAAuB,cAAvB,EAAuCC,IAAI,CAACC,SAAL,CAAe5B,QAAQ,CAACiB,IAAxB,CAAvC;AACAV,QAAAA,eAAe,CAACP,QAAQ,CAACiB,IAAV,CAAf;AACAY,QAAAA,SAAS,CAAC7B,QAAQ,CAACiB,IAAV,CAAT;AACD;AACF,KAXD,MAYK;AACH;AACA,UAAIa,MAAM,GAAGL,cAAc,CAACM,OAAf,CAAuB,cAAvB,CAAb;;AACA,UAAID,MAAM,KAAKZ,SAAX,IAAwBY,MAAM,KAAK,IAAvC,EAA6C;AAC3CA,QAAAA,MAAM,GAAGH,IAAI,CAACK,KAAL,CAAWF,MAAX,CAAT;AACAvB,QAAAA,eAAe,CAACuB,MAAD,CAAf;AACAD,QAAAA,SAAS,CAACC,MAAD,CAAT;AACD;AACF;AACF,GAtBD,EAsBG,EAtBH,EAnBgC,CA2ChC;;AACA,WAASD,SAAT,CAAmBvB,YAAnB,EAAiC;AAE/B;AACAK,IAAAA,WAAW,CAACsB,iBAAZ,CAA8B3B,YAA9B,EACG4B,IADH,CACSC,SAAD,IAAe;AACnB,UAAIA,SAAS,KAAK,KAAlB,EAAyB;AACvBd,QAAAA,OAAO,CAACC,IAAR,CAAaC,GAAG,CAACC,aAAjB;AACD;AACF,KALH;AAOAY,IAAAA,gBAAgB,CAAC9B,YAAY,CAACa,aAAd,CAAhB,CAV+B,CAW/B;;AACAkB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AAED,WAASD,gBAAT,CAA0BjB,aAA1B,EAAyC;AACvC;AACAX,IAAAA,eAAe,CAAC8B,sBAAhB,CAAuCnB,aAAvC,EACGe,IADH,CACSjB,IAAD,IAAU;AACd,UAAIA,IAAI,KAAKC,SAAb,EAAwB;AACtBH,QAAAA,aAAa,CAACE,IAAD,CAAb;AACD;AACF,KALH;AAMD;;AAED,WAASoB,UAAT,CAAoBE,MAApB,EAA4B;AAC1B;AACA,UAAMC,GAAG,GAAG,IAAI9C,yBAAJ,EAAZ;AACA8C,IAAAA,GAAG,CAACC,8BAAJ,CAAmCF,MAAnC,EACGL,IADH,CACSjB,IAAD,IAAU;AAEd;AACAZ,MAAAA,WAAW,CAACY,IAAD,CAAX;AAED,KANH,EAOGyB,KAPH,CAOUC,KAAD,IAAW;AAEhBC,MAAAA,OAAO,CAACD,KAAR,CAAc,0BAAd,EAA0CA,KAA1C;AACD,KAVH;AAWD;;AAGD,sBACE,QAAC,KAAD,CAAO,QAAP;AAAA,2BAEE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BAEE,QAAC,WAAD;AAAa,QAAA,KAAK,EAAE/C,KAAK,CAACC,CAAN,CAAQ,kBAAR,CAApB;AAAiD,QAAA,cAAc,EAAED,KAAK,CAACC,CAAN,CAAQ,QAAR;AAAjE;AAAA;AAAA;AAAA;AAAA,cAFF,eAIE,QAAC,IAAD;AAAA,gCACE,QAAC,QAAD;AAAA,iCAEE,QAAC,kBAAD;AAAoB,YAAA,OAAO,EAAEO;AAA7B;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,UAAD;AAAY,UAAA,KAAK,EAAE;AAAEyC,YAAAA,SAAS,EAAE;AAAb,WAAnB;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,SAAS,EAAC,cAAhB;AAA+B,YAAA,KAAK,EAAE;AAAEC,cAAAA,MAAM,EAAE;AAAV,aAAtC;AAAyD,YAAA,EAAE,EAAE;AAAEC,cAAAA,QAAQ,EAAE,YAAZ;AAA0B9C,cAAAA,YAAY,EAAEiB;AAAxC,aAA7D;AAAA,sBAAmHtB,KAAK,CAACC,CAAN,CAAQ,OAAR;AAAnH;AAAA;AAAA;AAAA;AAAA,kBADF,eAGE,QAAC,MAAD;AAAQ,YAAA,EAAE,EAAC,SAAX;AAAqB,YAAA,KAAK,EAAC,SAA3B;AAAqC,YAAA,IAAI,EAAC,QAA1C;AAAmD,YAAA,KAAK,EAAE;AAAEiD,cAAAA,MAAM,EAAE;AAAV,aAA1D;AAAA,sBACGlD,KAAK,CAACC,CAAN,CAAQ,SAAR;AADH;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,UADF;AA2BD,CAjHD;;GAAMF,gB;UAIab,W;;;KAJba,gB;AAoHN,eAAgBJ,eAAe,GAAGI,gBAAH,CAA/B","sourcesContent":["/*ReinforcedManagementReport = Lista de Informe Reforzado*/\r\nimport React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { useLocation } from 'react-router-dom'\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nimport {\r\n  Card,CardHeader,\r\n  CardBody,\r\n  Col,\r\n  Button,\r\n  CardFooter,\r\n} from \"reactstrap\"\r\n\r\n//Import Breadcrumb\r\nimport Breadcrumbs from \"../../../../components/Common/Breadcrumb\"\r\n\r\n//i18n\r\nimport { withTranslation } from \"react-i18next\"\r\n\r\nimport DatosGenerales from \"./DatosGenerales\"\r\nimport ResultadosBusqueda from \"./ResultadosBusqueda\"\r\nimport ApiServicesDetalleAbogado from \"../../../../services/Abogado/ApiServicesDetalleAbogado\"\r\n\r\n\r\nconst PantallaBusqueda = props => {\r\n\r\n  \r\n  const { t, i18n } = useTranslation();\r\n  const location = useLocation()\r\n  const { selectedData } = location;\r\n\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [dataList, setDataList] = useState([]);\r\n\r\n  const [locationData, setLocationData] = useState(null);\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n  //const [coreServices, setcoreServices] = useState(new CoreServices());\r\n\r\n  const [mainDebtor, setmainDebtor] = useState(null);\r\n\r\n  //On Mounting (componentDidMount)\r\n  React.useEffect(() => {\r\n    if (location.data !== null && location.data !== undefined) {\r\n      if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n        //location.data.transactionId = 0;\r\n        //checkAndCreateProcedure(location.data);\r\n        history.push(url.URL_DASHBOARD);\r\n      }\r\n      else {\r\n        sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n        setLocationData(location.data);\r\n        fetchData(location.data);\r\n      }\r\n    }\r\n    else {\r\n      //chequeamos si tenemos guardado en session\r\n      var result = sessionStorage.getItem('locationData');\r\n      if (result !== undefined && result !== null) {\r\n        result = JSON.parse(result);\r\n        setLocationData(result);\r\n        fetchData(result);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  //Caraga Inicial de datos\r\n  function fetchData(locationData) {\r\n\r\n    //chequear si la tarea no ha sido iniciada\r\n    bpmServices.checkAndStartTask(locationData)\r\n      .then((iniresult) => {\r\n        if (iniresult === false) {\r\n          history.push(url.URL_DASHBOARD);\r\n        }\r\n      })\r\n\r\n    loadUserProspect(locationData.transactionId)\r\n    // Read Api Service data\r\n    searchData(null);\r\n  }\r\n\r\n  function loadUserProspect(transactionId) {\r\n    // consultarDeudorPrincipal\r\n    backendServices.consultPrincipalDebtor(transactionId)\r\n      .then((data) => {\r\n        if (data !== undefined) {\r\n          setmainDebtor(data);\r\n        }\r\n      });\r\n  }\r\n\r\n  function searchData(values) {\r\n    // console.log(values);\r\n    const api = new ApiServicesDetalleAbogado()\r\n    api.getResultadoDetalleAbogadoMode(values)\r\n      .then((data) => {\r\n\r\n        // console.log(data);\r\n        setDataList(data);\r\n\r\n      })\r\n      .catch((error) => {\r\n\r\n        console.error('Error fetching documents', error);\r\n      });\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n      <div className=\"page-content\">\r\n\r\n        <Breadcrumbs title={props.t(\"CommercialCredit\")} breadcrumbItem={props.t(\"Lawyer\")} />\r\n\r\n        <Card>\r\n          <CardBody>\r\n            {/* <DatosGenerales  /> */}\r\n            <ResultadosBusqueda results={dataList} />\r\n\r\n          </CardBody>\r\n          <CardFooter style={{ textAlign: \"right\" }}>\r\n            <Link className=\"btn btn-dark\" style={{ margin: '5px' }} to={{ pathname: \"/dashboard\", selectedData: undefined }}>{props.t(\"Close\")}</Link>\r\n\r\n            <Button id=\"btnSave\" color=\"success\" type=\"submit\" style={{ margin: '5px' }}>\r\n              {props.t(\"Advance\")}\r\n            </Button>\r\n\r\n          </CardFooter>\r\n        </Card>\r\n\r\n      </div>\r\n\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\n\r\nexport default (withTranslation()(PantallaBusqueda))\r\n"]},"metadata":{},"sourceType":"module"}