{"ast":null,"code":"import _toConsumableArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{translationHelpers}from'../../helpers';import{Link,useLocation}from\"react-router-dom\";import{Button,Row,Col}from\"reactstrap\";import{AvForm}from\"availity-reactstrap-validation\";import CustomerSection from\"./facilities/modalNewFacility/CustomerSection\";import ProposalSection from\"./facilities/modalNewFacility/ProposalSection\";import InterestRateSection from\"./facilities/modalNewFacility/InterestRateSection\";import CommissionSection from\"./facilities/modalNewFacility/CommissionSection\";import TermsSection from\"./facilities/modalNewFacility/TermsSection\";import DisbursementSection from\"./facilities/modalNewFacility/DisbursementSection\";import WarrantsSection from\"./facilities/modalNewFacility/WarrantsSection\";import SuretiesSection from\"./facilities/modalNewFacility/SuretiesSection\";import FinancialConditionsSection from\"./facilities/modalNewFacility/FinancialConditionsSection\";import LtvSection from\"./facilities/modalNewFacility/LtvSection\";import AmbientalRiskSection from\"./facilities/modalNewFacility/AmbientalRiskSection\";import FinantialCovenantSection from\"./facilities/modalNewFacility/FinantialCovenantSection\";import LegalDocumentationSection from\"./facilities/modalNewFacility/LegalDocumentationSection\";import ProvisionSection from\"./facilities/modalNewFacility/ProvisionSection\";import CreditRiskSection from\"./facilities/modalNewFacility/CreditRiskSection\";import OtherConditionsSection from\"./facilities/modalNewFacility/OtherConditionsSection\";import{BackendServices,CoreServices}from\"../../services\";import CreditProposalContext from\"./CreditProposalContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormNewFacility=function FormNewFacility(props){var _useState=useState({\"requestId\":\"XYZ892022\",\"cr\":\"\",\"amount\":0,\"debtor\":\"\",\"clientTypeId\":0,\"balance\":0,\"proposalTypeId\":\"\",\"proposalTypeName\":\"\",\"facilityTypeId\":\"\",\"purpose\":\"\",\"sublimits\":\"\",\"proposalRate\":0,\"noSubsidyRate\":0,\"effectiveRate\":0,\"feci\":true,\"termDays\":0,\"termDescription\":\"\",\"ltv\":0,\"finantialConditions\":\"\",\"environmentRiskCategory\":0,\"covenant\":\"\",\"environmentRiskOpinion\":\"\",\"finantialCovenant\":\"\",\"legalDocumentation\":\"\",\"creditRiskOpinion\":\"\",\"provision\":\"\",\"numero\":\"\",\"otherConditions\":\"\"}),_useState2=_slicedToArray(_useState,2),dataSet=_useState2[0],setdataSet=_useState2[1];var _useState3=useState({tipoPropuestaRequerido:false,subPropuestaRequerido:false,tipoFacilidadRequerido:false}),_useState4=_slicedToArray(_useState3,2),dataValidation=_useState4[0],setdataValidation=_useState4[1];var propostalSectionRef=React.useRef();var api=new BackendServices();var apiCoreServices=new CoreServices();var location=useLocation();var _useState5=useState(location.data),_useState6=_slicedToArray(_useState5,2),dataLocation=_useState6[0],setData=_useState6[1];var context=useContext(CreditProposalContext);var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),commissions=_useState8[0],setCommissions=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),disbursementTerms=_useState10[0],setDisbursementTerms=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),paymentPrograms=_useState12[0],setPaymentPrograms=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),disbursementMethods=_useState14[0],setDisbursementMethods=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),warrants=_useState16[0],setWarrants=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),sureties=_useState18[0],setSureties=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),otherconditions=_useState20[0],setOtherconditions=_useState20[1];var _translationHelpers=translationHelpers('commercial_credit','common'),_translationHelpers2=_slicedToArray(_translationHelpers,2),t=_translationHelpers2[0],c=_translationHelpers2[1];// services\nvar backendServices=new BackendServices();React.useEffect(function(){// Read Api Service  ata    \nbackendServices.consultarUsuarioProspecto(dataLocation.transactionId).then(function(resp){dataSet.numero=resp.customerDocumentId;setdataSet(dataSet);});backendServices.consultarFacilidadPropCred(12,\"XYZ892022\").then(function(resp){if(resp!=undefined){dataSet.cr=resp.cr;dataSet.amount=resp.amount;dataSet.debtor=resp.debtor;dataSet.clientTypeId=resp.clientTypeId;dataSet.balance=resp.balance;dataSet.proposalTypeId=resp.proposalTypeId;dataSet.proposalTypeName=resp.proposalTypeName;dataSet.facilityTypeId=resp.facilityTypeId;dataSet.purpose=resp.purpose;dataSet.sublimits=resp.sublimits;dataSet.proposalRate=resp.proposalRate;dataSet.noSubsidyRate=resp.noSubsidyRate;dataSet.effectiveRate=resp.effectiveRate;dataSet.feci=resp.feci;dataSet.termDays=resp.termDays;dataSet.termDescription=resp.termDescription;dataSet.ltv=resp.ltv;dataSet.finantialConditions=resp.finantialConditions;dataSet.environmentRiskCategory=resp.environmentRiskCategory;dataSet.covenant=resp.covenant;dataSet.environmentRiskOpinion=resp.environmentRiskOpinion;dataSet.finantialCovenant=resp.finantialCovenant;dataSet.legalDocumentation=resp.legalDocumentation;dataSet.creditRiskOpinion=resp.creditRiskOpinion;dataSet.provision=resp.provision;dataSet.otherConditions=resp.provision;setdataSet(dataSet);}});},[]);function handleSubmit(event,errors,values){if(propostalSectionRef.current.dataReturn.proposalTypeId==null){dataValidation.tipoPropuestaRequerido=true;setdataValidation(dataValidation);return;}else{values.proposalTypeId=propostalSectionRef.current.dataReturn.proposalTypeId;dataValidation.tipoPropuestaRequerido=false;setdataValidation(dataValidation);}if(propostalSectionRef.current.dataReturn.proposalTypeName==null){dataValidation.subPropuestaRequerido=true;setdataValidation(dataValidation);return;}else{values.proposalTypeName=propostalSectionRef.current.dataReturn.proposalTypeName;dataValidation.subPropuestaRequerido=false;setdataValidation(dataValidation);}if(propostalSectionRef.current.dataReturn.facilityTypeId==null){dataValidation.tipoFacilidadRequerido=true;setdataValidation(dataValidation);return;}else{values.facilityTypeId=propostalSectionRef.current.dataReturn.facilityTypeId;dataValidation.tipoFacilidadRequerido=false;setdataValidation(dataValidation);}event.preventDefault();if(errors.length>0){return;}if(event.target.id!=='formNewFacility'){return;}values.amount=Number(values.amount);values.clientTypeId=Number(1);values.balance=Number(values.balance);values.proposalRate=Number(values.proposalRate);values.noSubsidyRate=Number(values.noSubsidyRate);values.effectiveRate=Number(values.effectiveRate);values.feci=values.feci==\"true\"?true:false;values.termDays=Number(values.termDays);values.environmentRiskCategory=Number(values.environmentRiskCategory);console.log('submit new facility',values);saveNewFacility(values).then(function(result){// props.onSave(values); \nprops.onDismiss();});}function saveNewFacility(values){var requestId=context.requestId;var data=Object.assign({requestId:requestId},values);return backendServices.actualizarFacilidadPropCred(data);}function handleCancel(){props.onDismiss();}function handleNewCommission(newItem){var newCommissions=[].concat(_toConsumableArray(commissions),[newItem]);setCommissions(newCommissions);}function handleDeleteCommission(item){var itemIndex=commissions.indexOf(item);if(itemIndex===-1){return;}var newCommissions=_toConsumableArray(commissions);newCommissions.splice(itemIndex,1);setCommissions(newCommissions);}function handleNewDisbursementTerm(newItem){var newDisbursementTerms=[].concat(_toConsumableArray(disbursementTerms),[newItem]);setDisbursementTerms(newDisbursementTerms);}function handleDeleteDisbursementTerm(item){var itemIndex=disbursementTerms.indexOf(item);if(itemIndex===-1){return;}var newDisbursementTerms=_toConsumableArray(disbursementTerms);newDisbursementTerms.splice(itemIndex,1);setDisbursementTerms(newDisbursementTerms);}function handleNewPaymentProgram(newItem){var newPaymentPrograms=[].concat(_toConsumableArray(paymentPrograms),[newItem]);setPaymentPrograms(newPaymentPrograms);}function handleDeletePaymentProgram(item){var itemIndex=paymentPrograms.indexOf(item);if(itemIndex===-1){return;}var newPaymentPrograms=_toConsumableArray(paymentPrograms);newPaymentPrograms.splice(itemIndex,1);setPaymentPrograms(newPaymentPrograms);}function handleNewDisbursementMethod(newItem){var newDisbursementMethods=[].concat(_toConsumableArray(disbursementMethods),[newItem]);setDisbursementMethods(newDisbursementMethods);}function handleDeleteDisbursementMethod(item){var itemIndex=disbursementMethods.indexOf(item);if(itemIndex===-1){return;}var newDisbursementMethods=_toConsumableArray(disbursementMethods);newDisbursementMethods.splice(itemIndex,1);setDisbursementMethods(newDisbursementMethods);}function handleNewWarrant(newItem){var newWarrants=[].concat(_toConsumableArray(warrants),[newItem]);setWarrants(newWarrants);}function handleDeleteWarrant(item){var itemIndex=warrants.indexOf(item);if(itemIndex===-1){return;}var newWarrants=_toConsumableArray(warrants);newWarrants.splice(itemIndex,1);setWarrants(newWarrants);}function handleNewSurety(newItem){var newSureties=[].concat(_toConsumableArray(sureties),[newItem]);setSureties(newSureties);}function handleDeleteSurety(item){console.log('delete surety',item);var itemIndex=sureties.indexOf(item);if(itemIndex===-1){return;}var newSureties=_toConsumableArray(sureties);newSureties.splice(itemIndex,1);setSureties(newSureties);}function handleNewOtherCondition(newItem){var newOtherConditions=[].concat(_toConsumableArray(otherconditions),[newItem]);setOtherconditions(newOtherConditions);}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Facility\")}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(AvForm,{id:\"formNewFacility\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(CustomerSection,{dataLocation:dataLocation,validation:dataValidation,dataSet:dataSet,identificationList:props.identificationList})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(ProposalSection,{validation:dataValidation,dataSet:dataSet,ref:propostalSectionRef})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(InterestRateSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(CommissionSection,{validation:dataValidation,dataSet:dataSet,items:commissions,onSaveItem:handleNewCommission,onDeleteItem:handleDeleteCommission})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(TermsSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(DisbursementSection,{validation:dataValidation,dataSet:dataSet,disbursementTerms:disbursementTerms,onSaveDisbursementTerm:handleNewDisbursementTerm,onDeleteDisbursementTerm:handleDeleteDisbursementTerm,paymentPrograms:paymentPrograms,onSavePaymentProgram:handleNewPaymentProgram,onDeletePaymentProgram:handleDeletePaymentProgram,disbursementMethods:disbursementMethods,onSaveDisbursementMethod:handleNewDisbursementMethod,onDeleteDisbursementMethod:handleDeleteDisbursementMethod})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(WarrantsSection,{validation:dataValidation,dataSet:dataSet,warrants:warrants,onSaveItem:handleNewWarrant,onDeleteItem:handleDeleteWarrant})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(LtvSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(SuretiesSection,{validation:dataValidation,dataSet:dataSet,sureties:sureties,onSaveItem:handleNewSurety,onDeleteItem:handleDeleteSurety})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(FinancialConditionsSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(AmbientalRiskSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(FinantialCovenantSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(LegalDocumentationSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(OtherConditionsSection,{validation:dataValidation,dataSet:dataSet,otherconditions:otherconditions,onSaveOtherConditions:handleNewOtherCondition})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(CreditRiskSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsx(ProvisionSection,{validation:dataValidation,dataSet:dataSet})})}),/*#__PURE__*/_jsx(Row,{className:\"my-2\",children:/*#__PURE__*/_jsxs(Col,{xl:\"12 text-end\",children:[/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btn btn-dark\",onClick:handleCancel,style:{margin:'5px'},children:c(\"Cancel\")}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary\",type:\"submit\",color:\"success\",style:{margin:'5px'},children:c(\"Save\")})]})})]})]});};export default FormNewFacility;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/FormNewFacility.js"],"names":["React","useContext","useState","translationHelpers","Link","useLocation","Button","Row","Col","AvForm","CustomerSection","ProposalSection","InterestRateSection","CommissionSection","TermsSection","DisbursementSection","WarrantsSection","SuretiesSection","FinancialConditionsSection","LtvSection","AmbientalRiskSection","FinantialCovenantSection","LegalDocumentationSection","ProvisionSection","CreditRiskSection","OtherConditionsSection","BackendServices","CoreServices","CreditProposalContext","FormNewFacility","props","dataSet","setdataSet","tipoPropuestaRequerido","subPropuestaRequerido","tipoFacilidadRequerido","dataValidation","setdataValidation","propostalSectionRef","useRef","api","apiCoreServices","location","data","dataLocation","setData","context","commissions","setCommissions","disbursementTerms","setDisbursementTerms","paymentPrograms","setPaymentPrograms","disbursementMethods","setDisbursementMethods","warrants","setWarrants","sureties","setSureties","otherconditions","setOtherconditions","t","c","backendServices","useEffect","consultarUsuarioProspecto","transactionId","then","resp","numero","customerDocumentId","consultarFacilidadPropCred","undefined","cr","amount","debtor","clientTypeId","balance","proposalTypeId","proposalTypeName","facilityTypeId","purpose","sublimits","proposalRate","noSubsidyRate","effectiveRate","feci","termDays","termDescription","ltv","finantialConditions","environmentRiskCategory","covenant","environmentRiskOpinion","finantialCovenant","legalDocumentation","creditRiskOpinion","provision","otherConditions","handleSubmit","event","errors","values","current","dataReturn","preventDefault","length","target","id","Number","console","log","saveNewFacility","result","onDismiss","requestId","Object","assign","actualizarFacilidadPropCred","handleCancel","handleNewCommission","newItem","newCommissions","handleDeleteCommission","item","itemIndex","indexOf","splice","handleNewDisbursementTerm","newDisbursementTerms","handleDeleteDisbursementTerm","handleNewPaymentProgram","newPaymentPrograms","handleDeletePaymentProgram","handleNewDisbursementMethod","newDisbursementMethods","handleDeleteDisbursementMethod","handleNewWarrant","newWarrants","handleDeleteWarrant","handleNewSurety","newSureties","handleDeleteSurety","handleNewOtherCondition","newOtherConditions","identificationList","margin"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\"\r\nimport PropTypes from 'prop-types'\r\nimport { translationHelpers } from '../../helpers';\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport {\r\n  Button,\r\n  Row,\r\n  Col,\r\n} from \"reactstrap\"\r\nimport { AvForm } from \"availity-reactstrap-validation\"\r\nimport CustomerSection from \"./facilities/modalNewFacility/CustomerSection\";\r\nimport ProposalSection from \"./facilities/modalNewFacility/ProposalSection\"\r\nimport InterestRateSection from \"./facilities/modalNewFacility/InterestRateSection\"\r\nimport CommissionSection from \"./facilities/modalNewFacility/CommissionSection\"\r\nimport TermsSection from \"./facilities/modalNewFacility/TermsSection\"\r\nimport DisbursementSection from \"./facilities/modalNewFacility/DisbursementSection\"\r\nimport WarrantsSection from \"./facilities/modalNewFacility/WarrantsSection\"\r\nimport SuretiesSection from \"./facilities/modalNewFacility/SuretiesSection\"\r\nimport FinancialConditionsSection from \"./facilities/modalNewFacility/FinancialConditionsSection\"\r\nimport LtvSection from \"./facilities/modalNewFacility/LtvSection\"\r\nimport AmbientalRiskSection from \"./facilities/modalNewFacility/AmbientalRiskSection\"\r\nimport FinantialCovenantSection from \"./facilities/modalNewFacility/FinantialCovenantSection\"\r\nimport LegalDocumentationSection from \"./facilities/modalNewFacility/LegalDocumentationSection\"\r\nimport ProvisionSection from \"./facilities/modalNewFacility/ProvisionSection\"\r\nimport CreditRiskSection from \"./facilities/modalNewFacility/CreditRiskSection\"\r\nimport OtherConditionsSection from \"./facilities/modalNewFacility/OtherConditionsSection\"\r\nimport { BackendServices, CoreServices } from \"../../services\";\r\nimport CreditProposalContext from \"./CreditProposalContext\";\r\n\r\n\r\nconst FormNewFacility = (props) => {\r\n  const [dataSet, setdataSet] = useState({\r\n    \"requestId\": \"XYZ892022\",\r\n    \"cr\": \"\",\r\n    \"amount\": 0,\r\n    \"debtor\": \"\",\r\n    \"clientTypeId\": 0,\r\n    \"balance\": 0,\r\n    \"proposalTypeId\": \"\",\r\n    \"proposalTypeName\": \"\",\r\n    \"facilityTypeId\": \"\",\r\n    \"purpose\": \"\",\r\n    \"sublimits\": \"\",\r\n    \"proposalRate\": 0,\r\n    \"noSubsidyRate\": 0,\r\n    \"effectiveRate\": 0,\r\n    \"feci\": true,\r\n    \"termDays\": 0,\r\n    \"termDescription\": \"\",\r\n    \"ltv\": 0,\r\n    \"finantialConditions\": \"\",\r\n    \"environmentRiskCategory\": 0,\r\n    \"covenant\": \"\",\r\n    \"environmentRiskOpinion\": \"\",\r\n    \"finantialCovenant\": \"\",\r\n    \"legalDocumentation\": \"\",\r\n    \"creditRiskOpinion\": \"\",\r\n    \"provision\": \"\",\r\n    \"numero\": \"\",\r\n    \"otherConditions\": \"\",\r\n  });\r\n\r\n  const [dataValidation, setdataValidation] = useState({\r\n    tipoPropuestaRequerido: false,\r\n    subPropuestaRequerido: false,\r\n    tipoFacilidadRequerido: false,\r\n  });\r\n  const propostalSectionRef = React.useRef();\r\n  const api = new BackendServices();\r\n  const apiCoreServices = new CoreServices();\r\n  const location = useLocation()\r\n  const [dataLocation, setData] = useState(location.data);\r\n  const context = useContext(CreditProposalContext);\r\n  const [commissions, setCommissions] = useState([]);\r\n  const [disbursementTerms, setDisbursementTerms] = useState([]);\r\n  const [paymentPrograms, setPaymentPrograms] = useState([]);\r\n  const [disbursementMethods, setDisbursementMethods] = useState([]);\r\n  const [warrants, setWarrants] = useState([]);\r\n  const [sureties, setSureties] = useState([]);\r\n  const [otherconditions, setOtherconditions] = useState([]);\r\n  const [t, c] = translationHelpers('commercial_credit', 'common');\r\n  // services\r\n  const backendServices = new BackendServices();\r\n  React.useEffect(() => {\r\n    // Read Api Service  ata    \r\n    backendServices.consultarUsuarioProspecto(dataLocation.transactionId).then(resp => {\r\n      dataSet.numero = resp.customerDocumentId\r\n      setdataSet(dataSet);\r\n    })  \r\n    backendServices.consultarFacilidadPropCred(12, \"XYZ892022\").then(resp => {\r\n      if (resp != undefined) {\r\n        dataSet.cr = resp.cr;\r\n        dataSet.amount = resp.amount;\r\n        dataSet.debtor = resp.debtor;\r\n        dataSet.clientTypeId = resp.clientTypeId;\r\n        dataSet.balance = resp.balance;\r\n        dataSet.proposalTypeId = resp.proposalTypeId;\r\n        dataSet.proposalTypeName = resp.proposalTypeName;\r\n        dataSet.facilityTypeId = resp.facilityTypeId;\r\n        dataSet.purpose = resp.purpose;\r\n        dataSet.sublimits = resp.sublimits;\r\n        dataSet.proposalRate = resp.proposalRate;\r\n        dataSet.noSubsidyRate = resp.noSubsidyRate;\r\n        dataSet.effectiveRate = resp.effectiveRate;\r\n        dataSet.feci = resp.feci;\r\n        dataSet.termDays = resp.termDays;\r\n        dataSet.termDescription = resp.termDescription;\r\n        dataSet.ltv = resp.ltv;\r\n        dataSet.finantialConditions = resp.finantialConditions;\r\n        dataSet.environmentRiskCategory = resp.environmentRiskCategory;\r\n        dataSet.covenant = resp.covenant;\r\n        dataSet.environmentRiskOpinion = resp.environmentRiskOpinion;\r\n        dataSet.finantialCovenant = resp.finantialCovenant;\r\n        dataSet.legalDocumentation = resp.legalDocumentation;\r\n        dataSet.creditRiskOpinion = resp.creditRiskOpinion;\r\n        dataSet.provision = resp.provision;\r\n        dataSet.otherConditions = resp.provision;\r\n        setdataSet(dataSet);\r\n      }\r\n    })\r\n  }, []);\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    if (propostalSectionRef.current.dataReturn.proposalTypeId == null) {\r\n      dataValidation.tipoPropuestaRequerido = true;\r\n      setdataValidation(dataValidation);\r\n      return;\r\n    } else {\r\n      values.proposalTypeId = propostalSectionRef.current.dataReturn.proposalTypeId;\r\n      dataValidation.tipoPropuestaRequerido = false;\r\n      setdataValidation(dataValidation);\r\n    }\r\n    if (propostalSectionRef.current.dataReturn.proposalTypeName == null) {\r\n      dataValidation.subPropuestaRequerido = true;\r\n      setdataValidation(dataValidation);\r\n      return;\r\n    } else {\r\n      values.proposalTypeName = propostalSectionRef.current.dataReturn.proposalTypeName;\r\n      dataValidation.subPropuestaRequerido = false;\r\n      setdataValidation(dataValidation);\r\n    }\r\n    if (propostalSectionRef.current.dataReturn.facilityTypeId == null) {\r\n      dataValidation.tipoFacilidadRequerido = true;\r\n      setdataValidation(dataValidation);\r\n      return;\r\n    } else {\r\n      values.facilityTypeId = propostalSectionRef.current.dataReturn.facilityTypeId;\r\n      dataValidation.tipoFacilidadRequerido = false;\r\n      setdataValidation(dataValidation);\r\n    }\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      return;\r\n    }\r\n    if (event.target.id !== 'formNewFacility') {\r\n      return;\r\n    }\r\n    values.amount = Number(values.amount);\r\n    values.clientTypeId = Number(1);\r\n    values.balance = Number(values.balance);\r\n    values.proposalRate = Number(values.proposalRate);\r\n    values.noSubsidyRate = Number(values.noSubsidyRate);\r\n    values.effectiveRate = Number(values.effectiveRate);\r\n    values.feci = values.feci == \"true\" ? true : false;\r\n    values.termDays = Number(values.termDays);\r\n    values.environmentRiskCategory = Number(values.environmentRiskCategory);\r\n    console.log('submit new facility', values);\r\n    saveNewFacility(values)\r\n      .then((result) => {\r\n        // props.onSave(values); \r\n        props.onDismiss();\r\n      });\r\n  }\r\n\r\n  function saveNewFacility(values) {\r\n    const { requestId } = context;\r\n    const data = Object.assign({\r\n      requestId\r\n    }, values);\r\n    return backendServices.actualizarFacilidadPropCred(data);\r\n  }\r\n\r\n  function handleCancel() {\r\n    props.onDismiss();\r\n  }\r\n\r\n  function handleNewCommission(newItem) {\r\n    const newCommissions = [...commissions, newItem];\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleDeleteCommission(item) {\r\n    const itemIndex = commissions.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newCommissions = [...commissions];\r\n    newCommissions.splice(itemIndex, 1);\r\n    setCommissions(newCommissions);\r\n  }\r\n\r\n  function handleNewDisbursementTerm(newItem) {\r\n    const newDisbursementTerms = [...disbursementTerms, newItem];\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleDeleteDisbursementTerm(item) {\r\n    const itemIndex = disbursementTerms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementTerms = [...disbursementTerms];\r\n    newDisbursementTerms.splice(itemIndex, 1);\r\n    setDisbursementTerms(newDisbursementTerms);\r\n  }\r\n\r\n  function handleNewPaymentProgram(newItem) {\r\n    const newPaymentPrograms = [...paymentPrograms, newItem];\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleDeletePaymentProgram(item) {\r\n    const itemIndex = paymentPrograms.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newPaymentPrograms = [...paymentPrograms];\r\n    newPaymentPrograms.splice(itemIndex, 1);\r\n    setPaymentPrograms(newPaymentPrograms);\r\n  }\r\n\r\n  function handleNewDisbursementMethod(newItem) {\r\n    const newDisbursementMethods = [...disbursementMethods, newItem];\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n\r\n  function handleDeleteDisbursementMethod(item) {\r\n    const itemIndex = disbursementMethods.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newDisbursementMethods = [...disbursementMethods];\r\n    newDisbursementMethods.splice(itemIndex, 1);\r\n    setDisbursementMethods(newDisbursementMethods);\r\n  }\r\n\r\n  function handleNewWarrant(newItem) {\r\n    const newWarrants = [...warrants, newItem];\r\n    setWarrants(newWarrants);\r\n  }\r\n\r\n  function handleDeleteWarrant(item) {\r\n    const itemIndex = warrants.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newWarrants = [...warrants];\r\n    newWarrants.splice(itemIndex, 1);\r\n    setWarrants(newWarrants);\r\n  }\r\n\r\n  function handleNewSurety(newItem) {\r\n    const newSureties = [...sureties, newItem];\r\n    setSureties(newSureties);\r\n  }\r\n\r\n  function handleDeleteSurety(item) {\r\n    console.log('delete surety', item);\r\n    const itemIndex = sureties.indexOf(item);\r\n    if (itemIndex === -1) {\r\n      return;\r\n    }\r\n    const newSureties = [...sureties];\r\n    newSureties.splice(itemIndex, 1);\r\n    setSureties(newSureties);\r\n  }\r\n\r\n  function handleNewOtherCondition(newItem) {\r\n    const newOtherConditions = [...otherconditions, newItem];\r\n    setOtherconditions(newOtherConditions);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Facility\")}</h5>\r\n      <p className=\"card-title-desc\"></p>\r\n\r\n      <AvForm id=\"formNewFacility\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <CustomerSection dataLocation={dataLocation} validation={dataValidation} dataSet={dataSet} identificationList={props.identificationList} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <ProposalSection validation={dataValidation} dataSet={dataSet} ref={propostalSectionRef} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <InterestRateSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <CommissionSection validation={dataValidation} dataSet={dataSet} items={commissions}\r\n              onSaveItem={handleNewCommission}\r\n              onDeleteItem={handleDeleteCommission} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <TermsSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <DisbursementSection validation={dataValidation} dataSet={dataSet} disbursementTerms={disbursementTerms}\r\n              onSaveDisbursementTerm={handleNewDisbursementTerm}\r\n              onDeleteDisbursementTerm={handleDeleteDisbursementTerm}\r\n              paymentPrograms={paymentPrograms}\r\n              onSavePaymentProgram={handleNewPaymentProgram}\r\n              onDeletePaymentProgram={handleDeletePaymentProgram}\r\n              disbursementMethods={disbursementMethods}\r\n              onSaveDisbursementMethod={handleNewDisbursementMethod}\r\n              onDeleteDisbursementMethod={handleDeleteDisbursementMethod} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <WarrantsSection validation={dataValidation} dataSet={dataSet} warrants={warrants}\r\n              onSaveItem={handleNewWarrant}\r\n              onDeleteItem={handleDeleteWarrant} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <LtvSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <SuretiesSection validation={dataValidation} dataSet={dataSet} sureties={sureties}\r\n              onSaveItem={handleNewSurety}\r\n              onDeleteItem={handleDeleteSurety} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <FinancialConditionsSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <AmbientalRiskSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <FinantialCovenantSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <LegalDocumentationSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <OtherConditionsSection validation={dataValidation} dataSet={dataSet} otherconditions={otherconditions} onSaveOtherConditions={handleNewOtherCondition} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <CreditRiskSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md=\"12\">\r\n            <ProvisionSection validation={dataValidation} dataSet={dataSet} />\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row className=\"my-2\">\r\n          <Col xl=\"12 text-end\">\r\n            <Link to=\"#\" className=\"btn btn-dark\"\r\n              onClick={handleCancel} style={{ margin: '5px' }}>\r\n              {c(\"Cancel\")}\r\n            </Link>\r\n            <Button className=\"btn btn-primary\" type=\"submit\" color=\"success\" style={{ margin: '5px' }}>\r\n              {c(\"Save\")}\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </AvForm>\r\n\r\n    </React.Fragment>\r\n  )\r\n};\r\n\r\nFormNewFacility.propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  onDismiss: PropTypes.func,\r\n  onSave: PropTypes.func\r\n};\r\n\r\n\r\nexport default FormNewFacility;\r\n"]},"metadata":{},"sourceType":"module"}