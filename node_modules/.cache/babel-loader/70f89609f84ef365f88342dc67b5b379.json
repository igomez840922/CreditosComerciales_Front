{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useTranslation,withTranslation}from\"react-i18next\";import Breadcrumbs from\"../../../components/Common/Breadcrumb\";import{Row,Col,Button,Label,Input,Modal,Card,CardBody,CardFooter,InputGroup,CardHeader,Table}from\"reactstrap\";import Switch from\"react-switch\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import{BackendServices}from\"../../../services\";import{useLocation,useHistory}from'react-router-dom';import FinancialReportComp from\"./FinancialReportComp\";import{translationHelpers}from\"../../../helpers\";import{Background,ExchangeRisk,FinancialInformation,Projections,Workload}from\"../../../components/InformeFinanciero\";import Guarantees from\"../../../components/InformeFinanciero/background/Guarantees\";import{FormCreditRisk,FormRecommendations}from\"../../../components/InformeFinanciero\";import LoadingOverlay from\"react-loading-overlay\";import FinancialReportContent from\"./FinancialReportContent\";import*as url from\"../../../helpers/url_helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ModalPrevicualizarAIF=function ModalPrevicualizarAIF(props){var location=useLocation();// const [locationData, setLocationData] = useState(location.data ?? JSON.parse(sessionStorage.getItem('locationData')));\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),locationData=_useState2[0],setLocationData=_useState2[1];var _useState3=useState(new BackendServices()),_useState4=_slicedToArray(_useState3,2),backendServices=_useState4[0],setbackendServices=_useState4[1];var _translationHelpers=translationHelpers('translation','common','translation'),_translationHelpers2=_slicedToArray(_translationHelpers,3),t=_translationHelpers2[0],c=_translationHelpers2[1],tr=_translationHelpers2[2];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),Opinion=_useState6[0],setOpinion=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),Recomendation=_useState8[0],setRecomendation=_useState8[1];var isOpen=props.isOpen,toggle=props.toggle;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isActiveLoading=_useState10[0],setIsActiveLoading=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),datosUsuario=_useState12[0],setdatosUsuario=_useState12[1];var history=useHistory();useEffect(function(){var _location$pathname,_location$pathname2,_dataSession;var dataSession={};console.log(location===null||location===void 0?void 0:(_location$pathname=location.pathname)===null||_location$pathname===void 0?void 0:_location$pathname.split(\"previsualizarAIF/\")[1]);if(location===null||location===void 0?void 0:(_location$pathname2=location.pathname)===null||_location$pathname2===void 0?void 0:_location$pathname2.split(\"previsualizarAIF/\")[1]){var _location$pathname3;dataSession={transactionId:atob(location===null||location===void 0?void 0:(_location$pathname3=location.pathname)===null||_location$pathname3===void 0?void 0:_location$pathname3.split(\"previsualizarAIF/\")[1])};sessionStorage.setItem('locationData',JSON.stringify(dataSession));}if(location.data!==null&&location.data!==undefined){if(location.data.transactionId===undefined||location.data.transactionId.length<=0){//location.data.transactionId = 0;\n//checkAndCreateProcedure(location.data);\nhistory.push(url.URL_DASHBOARD);}else{sessionStorage.setItem('locationData',JSON.stringify(location.data));setLocationData(location.data);}}else{//chequeamos si tenemos guardado en session\nvar result=sessionStorage.getItem('locationData');if(result!==undefined&&result!==null){result=JSON.parse(result);setLocationData(result);}}var api=new BackendServices();// consultarDeudorPrincipal\napi.consultPrincipalDebtor((_dataSession=dataSession)===null||_dataSession===void 0?void 0:_dataSession.transactionId).then(function(resp){if(resp!=undefined){setdatosUsuario(resp);}});},[]);return/*#__PURE__*/_jsx(_Fragment,{children:locationData?/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Credit Analysis\"),breadcrumbItem:t(\"Financial Report\")}),/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title title-header\",children:[datosUsuario!=null?datosUsuario.typePerson===\"1\"?datosUsuario.name+\" \"+datosUsuario.name2+\" \"+datosUsuario.lastName+\" \"+datosUsuario.lastName2:datosUsuario.name:\"\",\" \"]})}),/*#__PURE__*/_jsx(Col,{sm:12,style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",style:{textAlign:\"right\"},children:[t(\"Tramit\"),\":\",\" \",\"#\",locationData===null||locationData===void 0?void 0:locationData.transactionId]})})]})}),/*#__PURE__*/_jsx(Card,{className:\"m-0\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(FinancialReportContent,{preview:true})})})]})}):/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:/*#__PURE__*/_jsx(Breadcrumbs,{title:t(\"Commercial Credit\"),breadcrumbItem:t(\"Credit Proposal\")})})})});};export default ModalPrevicualizarAIF;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/6_AnalisisCredito/previsualizarAIF.js"],"names":["React","useEffect","useState","useTranslation","withTranslation","Breadcrumbs","Row","Col","Button","Label","Input","Modal","Card","CardBody","CardFooter","InputGroup","CardHeader","Table","Switch","AvForm","AvField","AvGroup","BackendServices","useLocation","useHistory","FinancialReportComp","translationHelpers","Background","ExchangeRisk","FinancialInformation","Projections","Workload","Guarantees","FormCreditRisk","FormRecommendations","LoadingOverlay","FinancialReportContent","url","ModalPrevicualizarAIF","props","location","locationData","setLocationData","backendServices","setbackendServices","t","c","tr","Opinion","setOpinion","Recomendation","setRecomendation","isOpen","toggle","isActiveLoading","setIsActiveLoading","datosUsuario","setdatosUsuario","history","dataSession","console","log","pathname","split","transactionId","atob","sessionStorage","setItem","JSON","stringify","data","undefined","length","push","URL_DASHBOARD","result","getItem","parse","api","consultPrincipalDebtor","then","resp","textAlign","typePerson","name","name2","lastName","lastName2"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport PropTypes from 'prop-types';\r\nimport Breadcrumbs from \"../../../components/Common/Breadcrumb\"\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Label,\r\n    Input,\r\n    Modal,\r\n    Card,\r\n    CardBody,\r\n    CardFooter,\r\n    InputGroup,\r\n    CardHeader,\r\n    Table,\r\n} from \"reactstrap\"\r\nimport Switch from \"react-switch\";\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport { BackendServices } from \"../../../services\";\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport FinancialReportComp from \"./FinancialReportComp\";\r\nimport { translationHelpers } from \"../../../helpers\"\r\nimport { Background, ExchangeRisk, FinancialInformation, Projections, Workload } from \"../../../components/InformeFinanciero\";\r\nimport Guarantees from \"../../../components/InformeFinanciero/background/Guarantees\";\r\nimport { FormCreditRisk, FormRecommendations } from \"../../../components/InformeFinanciero\"\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport FinancialReportContent from \"./FinancialReportContent\";\r\nimport * as url from \"../../../helpers/url_helper\"\r\n\r\n\r\nconst ModalPrevicualizarAIF = (props) => {\r\n\r\n    const location = useLocation();\r\n    // const [locationData, setLocationData] = useState(location.data ?? JSON.parse(sessionStorage.getItem('locationData')));\r\n    const [locationData, setLocationData] = useState(null);\r\n    const [backendServices, setbackendServices] = useState(new BackendServices());\r\n\r\n\r\n    const [t, c, tr] = translationHelpers('translation', 'common', 'translation');\r\n\r\n    const [Opinion, setOpinion] = useState(null);\r\n    const [Recomendation, setRecomendation] = useState(null);\r\n\r\n    const { isOpen, toggle } = props;\r\n\r\n    const [isActiveLoading, setIsActiveLoading] = useState(false);\r\n    const [datosUsuario, setdatosUsuario] = useState(null)\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n\r\n        let dataSession = {};\r\n        console.log(location?.pathname?.split(\"previsualizarAIF/\")[1])\r\n        if (location?.pathname?.split(\"previsualizarAIF/\")[1]) {\r\n            dataSession = { transactionId: atob(location?.pathname?.split(\"previsualizarAIF/\")[1]) };\r\n            sessionStorage.setItem('locationData', JSON.stringify(dataSession));\r\n        }\r\n\r\n        if (location.data !== null && location.data !== undefined) {\r\n            if (location.data.transactionId === undefined || location.data.transactionId.length <= 0) {\r\n                //location.data.transactionId = 0;\r\n                //checkAndCreateProcedure(location.data);\r\n                history.push(url.URL_DASHBOARD);\r\n            }\r\n            else {\r\n                sessionStorage.setItem('locationData', JSON.stringify(location.data));\r\n                setLocationData(location.data);\r\n            }\r\n        }\r\n        else {\r\n            //chequeamos si tenemos guardado en session\r\n            var result = sessionStorage.getItem('locationData');\r\n            if (result !== undefined && result !== null) {\r\n                result = JSON.parse(result);\r\n                setLocationData(result);\r\n            }\r\n        }\r\n        const api = new BackendServices();\r\n        // consultarDeudorPrincipal\r\n        api.consultPrincipalDebtor(dataSession?.transactionId).then(resp => {\r\n            if (resp != undefined) {\r\n                setdatosUsuario(resp);\r\n            }\r\n        })\r\n    }, []);\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            {locationData ?\r\n                <React.Fragment>\r\n                    <div className=\"page-content\">\r\n                        <Breadcrumbs title={t(\"Credit Analysis\")} breadcrumbItem={t(\"Financial Report\")} />\r\n                        <Col md={12}>\r\n                            <Row>\r\n                                <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                                    <h5 className=\"card-title title-header\">{datosUsuario != null ? (datosUsuario.typePerson === \"1\" ? (datosUsuario.name + \" \" + datosUsuario.name2 + \" \" + datosUsuario.lastName + \" \" + datosUsuario.lastName2) : (datosUsuario.name)) : \"\"} </h5>\r\n                                </Col>\r\n                                <Col sm={12} style={{ textAlign: \"right\" }}>\r\n                                    <h5 className=\"card-title\" style={{ textAlign: \"right\" }}>{t(\"Tramit\")}:{\" \"}#{locationData?.transactionId}</h5>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                        <Card className=\"m-0\">\r\n                            <CardBody>\r\n                                <FinancialReportContent\r\n                                    preview={true}\r\n                                />\r\n                            </CardBody>\r\n                        </Card>\r\n\r\n                    </div>\r\n                </React.Fragment >\r\n                : <React.Fragment>\r\n                    <div className=\"page-content\">\r\n                        <Breadcrumbs title={t(\"Commercial Credit\")} breadcrumbItem={t(\"Credit Proposal\")} />\r\n                    </div>\r\n                </React.Fragment >}\r\n        </>\r\n    );\r\n};\r\n\r\nModalPrevicualizarAIF.propTypes = {\r\n    isOpen: PropTypes.bool,\r\n    toggle: PropTypes.func\r\n};\r\n\r\nexport default ModalPrevicualizarAIF;\r\n"]},"metadata":{},"sourceType":"module"}