{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{translationHelpers}from'../../../../helpers';import{Link,useLocation}from\"react-router-dom\";import SweetAlert from\"react-bootstrap-sweetalert\";import{Row,Col,Table,Button}from\"reactstrap\";import ModalNuevaComision from\"./ModalNuevaComision\";import{BackendServices}from\"../../../../services\";import{useTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ComisionSeccion=function ComisionSeccion(props){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var api=new BackendServices();var location=useLocation();var _useState=useState(location.data),_useState2=_slicedToArray(_useState,2),dataLocation=_useState2[0],setData=_useState2[1];// Variables para alertas \nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),successSave_dlg=_useState4[0],setsuccessSave_dlg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error_dlg=_useState6[0],seterror_dlg=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error_msg=_useState8[0],seterror_msg=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),confirm_alert=_useState10[0],setconfirm_alert=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),dataGeneralComisiones=_useState12[0],setdataGeneralComisiones=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),displayModal=_useState14[0],setDisplayModal=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),botonValidation=_useState16[0],setbotonValidation=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),tipo=_useState18[0],settipo=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),datacOMISION=_useState20[0],setdatacOMISION=_useState20[1];var _useState21=useState({\"facilityId\":0,\"commissionType\":\"\",\"amount\":0,\"observations\":\" \"}),_useState22=_slicedToArray(_useState21,2),dataSet=_useState22[0],setdataSet=_useState22[1];React.useEffect(function(){initializeData();},[]);function initializeData(){// consultarComisionPropCred\napi.consultCommissionPropCred(props.dataSet.facilityId).then(function(resp){console.log(resp);if(resp!=undefined){setdataGeneralComisiones(resp.commissions);setdatacOMISION(resp.commissions.map(function(data){return data.status?/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.comisionType.code}),/*#__PURE__*/_jsx(\"td\",{children:data.amount}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){updateData(data,\"ECOMISION\");},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-border-color mdi-24px\"})}),/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"link\",onClick:function onClick(resp){deleteData(data,\"DCOMISION\");},className:\"btn btn-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-trash-can-outline mdi-24px\"})})]})]},data.commissionId):null;}));}else{setdatacOMISION(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",style:{textAlign:'center'}})},1));}});}function updateData(data,tipo2){setdataSet(data);setbotonValidation(true);settipo(tipo2);setDisplayModal(true);}function deleteData(data,tipo2){setdataSet(data);settipo(tipo2);setconfirm_alert(true);}function toggleModal(){setDisplayModal(!displayModal);}if(!props.items){return null;}function saveData(values,tipo2){values.facilityId=props.dataSet.facilityId;values.amount=Number(values.amount);values.observations=\" \";if(tipo2==\"COMISION\"){api.newCommissionPropCred(values).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg(true);toggleModal();}else{toggleModal();seterror_dlg(true);}}).catch(function(err){seterror_dlg(true);});}if(tipo2==\"ECOMISION\"){values.commissionId=dataSet.commissionId;values.status=true;api.updateComisionPropCred(values).then(function(resp){if(resp!==null&&resp!==undefined){setsuccessSave_dlg(true);toggleModal();}else{toggleModal();seterror_dlg(true);}}).catch(function(err){seterror_dlg(true);});}}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:t(\"Commission\")}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(Table,{className:\"table\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Commission Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Amount\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:/*#__PURE__*/_jsx(Link,{className:\"float-end\",onClick:function onClick(){setbotonValidation(true);setdataSet({\"facilityId\":0,\"commissionType\":\"\",\"amount\":0,\"observations\":\" \"});settipo(\"COMISION\");toggleModal();},children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-box-multiple-outline mdi-24px\"})})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:datacOMISION})]})})}),/*#__PURE__*/_jsx(ModalNuevaComision,{MontoFacilidad:props.MontoFacilidad,dataGeneralComisiones:dataGeneralComisiones,saveData:saveData,botones:botonValidation,tipo:tipo,dataSet:dataSet,isOpen:displayModal,toggle:toggleModal}),successSave_dlg?/*#__PURE__*/_jsx(SweetAlert,{success:true,title:t(\"SuccessDialog\"),onConfirm:function onConfirm(){setsuccessSave_dlg(false);initializeData();},children:t(\"SuccessSaveMessage\")}):null,error_dlg?/*#__PURE__*/_jsx(SweetAlert,{error:true,title:t(\"ErrorDialog\"),onConfirm:function onConfirm(){seterror_dlg(false);initializeData();},children:error_msg}):null,confirm_alert?/*#__PURE__*/_jsx(SweetAlert,{title:t(\"Areyousure\"),warning:true,showCancel:true,confirmButtonText:t(\"Yesdeleteit\"),confirmBtnBsStyle:\"success\",cancelBtnBsStyle:\"danger\",onConfirm:function onConfirm(){var apiBack=new BackendServices();apiBack.deleteComisionPropCred(props.dataSet.facilityId,dataSet.commissionId).then(function(resp){if(resp.statusCode==\"500\"){setconfirm_alert(false);seterror_dlg(true);}else{setconfirm_alert(false);setsuccessSave_dlg(true);}}).catch(function(error){setconfirm_alert(false);seterror_dlg(true);});},onCancel:function onCancel(){return setconfirm_alert(false);},children:t(\"Youwontbeabletorevertthis\")}):null]});};export default ComisionSeccion;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/5_PropuestaCredito/Secciones/Comision.js"],"names":["React","useState","translationHelpers","Link","useLocation","SweetAlert","Row","Col","Table","Button","ModalNuevaComision","BackendServices","useTranslation","ComisionSeccion","props","t","i18n","api","location","data","dataLocation","setData","successSave_dlg","setsuccessSave_dlg","error_dlg","seterror_dlg","error_msg","seterror_msg","confirm_alert","setconfirm_alert","dataGeneralComisiones","setdataGeneralComisiones","displayModal","setDisplayModal","botonValidation","setbotonValidation","tipo","settipo","datacOMISION","setdatacOMISION","dataSet","setdataSet","useEffect","initializeData","consultCommissionPropCred","facilityId","then","resp","console","log","undefined","commissions","map","status","comisionType","code","amount","textAlign","updateData","deleteData","commissionId","tipo2","toggleModal","items","saveData","values","Number","observations","newCommissionPropCred","catch","err","updateComisionPropCred","MontoFacilidad","apiBack","deleteComisionPropCred","statusCode","error"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../../helpers';\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport SweetAlert from \"react-bootstrap-sweetalert\"\r\nimport {\r\n  Row,\r\n  Col,\r\n  Table,\r\n  Button,\r\n} from \"reactstrap\"\r\nimport ModalNuevaComision from \"./ModalNuevaComision\";\r\nimport { BackendServices } from \"../../../../services\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst ComisionSeccion = (props) => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const api = new BackendServices();\r\n  const location = useLocation()\r\n  const [dataLocation, setData] = useState(location.data);\r\n  // Variables para alertas \r\n  const [successSave_dlg, setsuccessSave_dlg] = useState(false);\r\n  const [error_dlg, seterror_dlg] = useState(false);\r\n  const [error_msg, seterror_msg] = useState(\"\");\r\n  const [confirm_alert, setconfirm_alert] = useState(false)\r\n  const [dataGeneralComisiones, setdataGeneralComisiones] = useState(null)\r\n  const [displayModal, setDisplayModal] = useState(false);\r\n  const [botonValidation, setbotonValidation] = useState(true);\r\n  const [tipo, settipo] = useState(\"\");\r\n  const [datacOMISION, setdatacOMISION] = useState(null);\r\n  const [dataSet, setdataSet] = useState({\r\n    \"facilityId\": 0,\r\n    \"commissionType\": \"\",\r\n    \"amount\": 0,\r\n    \"observations\": \" \"\r\n  });\r\n  React.useEffect(() => {\r\n    initializeData();\r\n  }, []);\r\n  function initializeData() {\r\n    // consultarComisionPropCred\r\n    api.consultCommissionPropCred(props.dataSet.facilityId).then(resp => {\r\n      console.log(resp);\r\n      if (resp != undefined) {\r\n        setdataGeneralComisiones(resp.commissions);\r\n        setdatacOMISION(resp.commissions.map((data) => (\r\n          data.status ?\r\n            <tr key={data.commissionId}>\r\n              <td>{data.comisionType.code}</td>\r\n              <td>{data.amount}</td>\r\n              <td style={{ textAlign: \"right\" }}>\r\n                <Button type=\"button\" color=\"link\" onClick={(resp) => {\r\n                  updateData(data, \"ECOMISION\")\r\n                }} className=\"btn btn-link\" ><i className=\"mdi mdi-border-color mdi-24px\"></i></Button>\r\n                <Button type=\"button\" color=\"link\" onClick={(resp) => {\r\n                  deleteData(data, \"DCOMISION\")\r\n                }} className=\"btn btn-link\" ><i className=\"mdi mdi-trash-can-outline mdi-24px\"></i></Button>\r\n              </td>\r\n            </tr> : null)\r\n        ));\r\n      } else {\r\n        setdatacOMISION(\r\n          <tr key={1}>\r\n            <td colSpan=\"3\" style={{ textAlign: 'center' }}></td>\r\n          </tr>);\r\n      }\r\n    })\r\n  }\r\n  function updateData(data, tipo2) {\r\n    setdataSet(data)\r\n    setbotonValidation(true);\r\n    settipo(tipo2);\r\n    setDisplayModal(true);\r\n  }\r\n  function deleteData(data, tipo2) {\r\n    setdataSet(data)\r\n    settipo(tipo2);\r\n    setconfirm_alert(true);\r\n  }\r\n  function toggleModal() {\r\n    setDisplayModal(!displayModal);\r\n  }\r\n  if (!props.items) {\r\n    return null;\r\n  }\r\n  function saveData(values, tipo2) {\r\n    values.facilityId = props.dataSet.facilityId;\r\n    values.amount = Number(values.amount);\r\n    values.observations = \" \";\r\n    if (tipo2 == \"COMISION\") {\r\n      api.newCommissionPropCred(values).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          setsuccessSave_dlg(true)\r\n          toggleModal();\r\n        } else {\r\n          toggleModal();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(err => {\r\n        seterror_dlg(true);\r\n      })\r\n    }\r\n    if (tipo2 == \"ECOMISION\") {\r\n      values.commissionId = dataSet.commissionId;\r\n      values.status = true;\r\n      api.updateComisionPropCred(values).then(resp => {\r\n        if (resp !== null && resp !== undefined) {\r\n          setsuccessSave_dlg(true)\r\n          toggleModal();\r\n        } else {\r\n          toggleModal();\r\n          seterror_dlg(true);\r\n        }\r\n      }).catch(err => {\r\n        seterror_dlg(true);\r\n      })\r\n    }\r\n\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <h5>{t(\"Commission\")}</h5>\r\n      <Row className=\"mb-3\">\r\n        <Col md=\"12\">\r\n          <Table className=\"table\" responsive>\r\n            <thead className=\"table-light\">\r\n              <tr>\r\n                <th>{t(\"Commission Type\")}</th>\r\n                <th>{t(\"Amount\")}</th>\r\n                {/* <th>{t(\"Percent\")}</th> */}\r\n                <th className=\"text-end\">\r\n                  <Link className=\"float-end\" onClick={() => {\r\n                    setbotonValidation(true); setdataSet({\r\n                      \"facilityId\": 0,\r\n                      \"commissionType\": \"\",\r\n                      \"amount\": 0,\r\n                      \"observations\": \" \"\r\n                    }); settipo(\"COMISION\"); toggleModal()\r\n                  }}><i className=\"mdi mdi-plus-box-multiple-outline mdi-24px\"></i></Link>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {datacOMISION}\r\n            </tbody>\r\n\r\n          </Table>\r\n        </Col>\r\n      </Row>\r\n\r\n      <ModalNuevaComision MontoFacilidad={props.MontoFacilidad} dataGeneralComisiones={dataGeneralComisiones} saveData={saveData} botones={botonValidation} tipo={tipo} dataSet={dataSet} isOpen={displayModal} toggle={toggleModal} />\r\n      {successSave_dlg ? (\r\n        <SweetAlert\r\n          success\r\n          title={t(\"SuccessDialog\")}\r\n          onConfirm={() => {\r\n            setsuccessSave_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {t(\"SuccessSaveMessage\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n\r\n      {error_dlg ? (\r\n        <SweetAlert\r\n          error\r\n          title={t(\"ErrorDialog\")}\r\n          onConfirm={() => {\r\n            seterror_dlg(false)\r\n            initializeData();\r\n          }}\r\n        >\r\n          {error_msg}\r\n        </SweetAlert>\r\n      ) : null}\r\n      {confirm_alert ? (\r\n        <SweetAlert\r\n          title={t(\"Areyousure\")}\r\n          warning\r\n          showCancel\r\n          confirmButtonText={t(\"Yesdeleteit\")}\r\n          confirmBtnBsStyle=\"success\"\r\n          cancelBtnBsStyle=\"danger\"\r\n          onConfirm={() => {\r\n            const apiBack = new BackendServices();\r\n            apiBack.deleteComisionPropCred(props.dataSet.facilityId, dataSet.commissionId).then(resp => {\r\n              if (resp.statusCode == \"500\") {\r\n                setconfirm_alert(false)\r\n                seterror_dlg(true)\r\n              } else {\r\n                setconfirm_alert(false)\r\n                setsuccessSave_dlg(true)\r\n              }\r\n            }).catch(error => {\r\n              setconfirm_alert(false)\r\n              seterror_dlg(true)\r\n            })\r\n          }}\r\n          onCancel={() => setconfirm_alert(false)}\r\n        >\r\n          {t(\"Youwontbeabletorevertthis\")}\r\n        </SweetAlert>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ComisionSeccion;\r\n"]},"metadata":{},"sourceType":"module"}