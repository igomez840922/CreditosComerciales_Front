{"ast":null,"code":"import _defineProperty from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useRef,useState}from\"react\";import{BackendServices}from\"../../../../services/\";import Currency from\"../../../../helpers/currency\";import{optionsPersonType}from\"../dummy/optionsSelect\";import{LoadAsyncSelects}from\"../searchDataSelects\";var services=new BackendServices();var currencyValidation=new Currency();export var useFormQuoter=function useFormQuoter(initialForm){var _useState=useState(initialForm),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),response=_useState8[0],setResponse=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),typePerson=_useState10[0],setTypePerson=_useState10[1];var _useState11=useState(optionsPersonType),_useState12=_slicedToArray(_useState11,2),selectionFields=_useState12[0],setselectionFields=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),disableFeci=_useState14[0],setDisableFeci=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),disableDefinedFee=_useState16[0],setDisableDefinedFee=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),disableTerm=_useState18[0],setDisableTerm=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),disableGracePeriod=_useState20[0],setDisableGracePeriod=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),optionsIdTypes=_useState22[0],setOptionsIdTypes=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),optionsCountries=_useState24[0],setOptionsCountries=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),optionsBanks=_useState26[0],setOptionsBanks=_useState26[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$LoadAsyncSelec,idTypesList,countriesList,banksList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return LoadAsyncSelects();case 2:_yield$LoadAsyncSelec=_context2.sent;idTypesList=_yield$LoadAsyncSelec.idTypesList;countriesList=_yield$LoadAsyncSelec.countriesList;banksList=_yield$LoadAsyncSelec.banksList;setOptionsIdTypes(idTypesList);setOptionsCountries(countriesList.Records);setOptionsBanks(banksList.Records);return _context2.abrupt(\"return\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return LoadAsyncSelects();case 2:case\"end\":return _context.stop();}}},_callee);})));case 10:case\"end\":return _context2.stop();}}},_callee2);})),[]);var hdlOnChange=function hdlOnChange(evt,selectField){var name=(evt===null||evt===void 0?void 0:evt.target)?evt.target.name:selectField.name;var value=(evt===null||evt===void 0?void 0:evt.target)?evt.target.value:evt.value;if(name===\"amountDebt\"||name===\"customerDefinedPayment\"){// value = Number(currencyValidation.getRealValue(evt.target.value)).toFixed(2)\nvalue=currencyValidation.getRealValue(evt.target.value);console.info(\"value\",value);}if(name===\"anualRate\"||name===\"feciRate\"){value=currencyValidation.getRealPercent(evt.target.value);console.info(\"value\",value);}if(selectField===null||selectField===void 0?void 0:selectField.name){auxSelectFields(selectField.name,value);}setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},name,value)));};var handleChangeInput=function handleChangeInput(evt){var regexOnlyNum=new RegExp(/^[0-9]+$/);var regexOnlyNum2=evt.target.value.replace(/[^0-9,.]/g,\"\");var valueAmountDebt=regexOnlyNum2;};var handleKeyOnlyNum=function handleKeyOnlyNum(evt){var keyPress=evt.key;var regexOnlyNum=/^[0-9,.]+$/;if(!regexOnlyNum.test(keyPress))return;// console.log('here!');\n};var hdlOnKeyUpRealNumber=function hdlOnKeyUpRealNumber(e){var input=currencyValidation.getRealValue(e.target.value);e.target.value=currencyValidation.format(input);console.info(\"real number decimal:\",Number(input).toFixed(2));};var hdlOnKeyUpPercentageNumber=function hdlOnKeyUpPercentageNumber(e){var input=currencyValidation.getRealPercent(e.target.value);e.target.value=currencyValidation.formatPercent(input);console.info(\"percentage number:\",input);};var hdlOnSubmit=function hdlOnSubmit(evt){console.group(\"FORM SUBMIT\");console.info(\"evt:\",evt);console.groupEnd();};var hdlOnValidSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.group(\"VALID FORM\");console.info(\"Data submitted!\",form);setLoading(true);_context3.next=5;return services.getQuoterPaymentPlan(form.loanType,form.amountDebt,form.anualRate,form.feciRate,form.term,form.paymentPeriod,form.gracePeriod,form.gracePeriodType,form.customerDefinedPayment);case 5:resp=_context3.sent;setLoading(false);console.info(\"Service response\",resp);setResponse(resp.payments);setForm(initialForm);console.groupEnd();case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function hdlOnValidSubmit(){return _ref3.apply(this,arguments);};}();var hdlOnInvalidSubmit=function hdlOnInvalidSubmit(evt,errors,values){console.group(\"INVALID FORM\");console.info(\"Not working!\");console.groupEnd();};var hdlTest=function hdlTest(evt){console.group(\"HANDLE TEST\");console.info(\"\",evt);console.groupEnd();};var auxSelectFields=function auxSelectFields(selectFieldName,selectedValue){switch(selectFieldName){case\"feciSelect\":var _disableFeci=selectedValue===\"Si\"?false:true;setDisableFeci(_disableFeci);return;case\"personType\":var type=selectedValue===\"Natural\"?\"Natural\":\"Juridica\";setForm({personType:type});return;case\"definedPayment\":var definedFee=selectedValue===\"Si\"?false:true;setDisableDefinedFee(definedFee);setDisableTerm(!definedFee);return;case\"gracePeriodSelect\":var _disableGracePeriod=selectedValue===\"Si\"?false:true;setDisableGracePeriod(_disableGracePeriod);return;default:break;}};var changeSelectOptions=function changeSelectOptions(valueCheck,option){var activateOption=valueCheck===option?false:true;return activateOption;};return{form:form,errors:errors,loading:loading,response:response,hdlTest:hdlTest,hdlOnKeyUpRealNumber:hdlOnKeyUpRealNumber,hdlOnKeyUpPercentageNumber:hdlOnKeyUpPercentageNumber,hdlOnChange:hdlOnChange,hdlOnSubmit:hdlOnSubmit,hdlOnInvalidSubmit:hdlOnInvalidSubmit,hdlOnValidSubmit:hdlOnValidSubmit,disableFeci:disableFeci,disableDefinedFee:disableDefinedFee,disableTerm:disableTerm,disableGracePeriod:disableGracePeriod,optionsIdTypes:optionsIdTypes,optionsCountries:optionsCountries,optionsBanks:optionsBanks};};","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/20_Cotizador/Hooks/useFormQuoter.js"],"names":["useEffect","useRef","useState","BackendServices","Currency","optionsPersonType","LoadAsyncSelects","services","currencyValidation","useFormQuoter","initialForm","form","setForm","errors","setErrors","loading","setLoading","response","setResponse","typePerson","setTypePerson","selectionFields","setselectionFields","disableFeci","setDisableFeci","disableDefinedFee","setDisableDefinedFee","disableTerm","setDisableTerm","disableGracePeriod","setDisableGracePeriod","optionsIdTypes","setOptionsIdTypes","optionsCountries","setOptionsCountries","optionsBanks","setOptionsBanks","idTypesList","countriesList","banksList","Records","hdlOnChange","evt","selectField","name","target","value","getRealValue","console","info","getRealPercent","auxSelectFields","handleChangeInput","regexOnlyNum","RegExp","regexOnlyNum2","replace","valueAmountDebt","handleKeyOnlyNum","keyPress","key","test","hdlOnKeyUpRealNumber","e","input","format","Number","toFixed","hdlOnKeyUpPercentageNumber","formatPercent","hdlOnSubmit","group","groupEnd","hdlOnValidSubmit","getQuoterPaymentPlan","loanType","amountDebt","anualRate","feciRate","term","paymentPeriod","gracePeriod","gracePeriodType","customerDefinedPayment","resp","payments","hdlOnInvalidSubmit","values","hdlTest","selectFieldName","selectedValue","type","personType","definedFee","changeSelectOptions","valueCheck","option","activateOption"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { BackendServices } from \"../../../../services/\";\r\nimport Currency from \"../../../../helpers/currency\";\r\nimport { optionsPersonType } from \"../dummy/optionsSelect\";\r\nimport { LoadAsyncSelects } from \"../searchDataSelects\";\r\n\r\nconst services = new BackendServices();\r\nconst currencyValidation = new Currency();\r\n\r\nexport const useFormQuoter = (initialForm) => {\r\n  const [form, setForm] = useState(initialForm);\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [response, setResponse] = useState(null);\r\n  const [typePerson, setTypePerson] = useState(true);\r\n  const [selectionFields, setselectionFields] = useState(optionsPersonType);\r\n  const [disableFeci, setDisableFeci] = useState(true);\r\n  const [disableDefinedFee, setDisableDefinedFee] = useState(true);\r\n  const [disableTerm, setDisableTerm] = useState(false);\r\n  const [disableGracePeriod, setDisableGracePeriod] = useState(true);\r\n  const [optionsIdTypes, setOptionsIdTypes] = useState([]);\r\n  const [optionsCountries, setOptionsCountries] = useState([]);\r\n  const [optionsBanks, setOptionsBanks] = useState([]);\r\n\r\n  useEffect(async () => {\r\n    const { idTypesList, countriesList, banksList } = await LoadAsyncSelects();\r\n    setOptionsIdTypes(idTypesList);\r\n    setOptionsCountries(countriesList.Records);\r\n    setOptionsBanks(banksList.Records);\r\n\r\n    return async () => {\r\n      await LoadAsyncSelects();\r\n    };\r\n  }, []);\r\n\r\n  const hdlOnChange = (evt, selectField) => {\r\n    const name = evt?.target ? evt.target.name : selectField.name;\r\n\r\n    let value = evt?.target ? evt.target.value : evt.value;\r\n\r\n    if (name === \"amountDebt\" || name === \"customerDefinedPayment\") {\r\n      // value = Number(currencyValidation.getRealValue(evt.target.value)).toFixed(2)\r\n      value = currencyValidation.getRealValue(evt.target.value);\r\n      console.info(\"value\", value);\r\n    }\r\n\r\n    if (name === \"anualRate\" || name === \"feciRate\") {\r\n      value = currencyValidation.getRealPercent(evt.target.value);\r\n      console.info(\"value\", value);\r\n    }\r\n\r\n    if (selectField?.name) {\r\n      auxSelectFields(selectField.name, value);\r\n    }\r\n\r\n    setForm({\r\n      ...form,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleChangeInput = (evt) => {\r\n    const regexOnlyNum = new RegExp(/^[0-9]+$/);\r\n    const regexOnlyNum2 = evt.target.value.replace(/[^0-9,.]/g, \"\");\r\n    const valueAmountDebt = regexOnlyNum2;\r\n  };\r\n\r\n  const handleKeyOnlyNum = (evt) => {\r\n    const keyPress = evt.key;\r\n    const regexOnlyNum = /^[0-9,.]+$/;\r\n\r\n    if (!regexOnlyNum.test(keyPress)) return;\r\n    // console.log('here!');\r\n  };\r\n\r\n  const hdlOnKeyUpRealNumber = (e) => {\r\n    let input = currencyValidation.getRealValue(e.target.value);\r\n    e.target.value = currencyValidation.format(input);\r\n    console.info(\"real number decimal:\", Number(input).toFixed(2));\r\n  };\r\n\r\n  const hdlOnKeyUpPercentageNumber = (e) => {\r\n    let input = currencyValidation.getRealPercent(e.target.value);\r\n    e.target.value = currencyValidation.formatPercent(input);\r\n    console.info(\"percentage number:\", input);\r\n  };\r\n\r\n  const hdlOnSubmit = (evt) => {\r\n    console.group(\"FORM SUBMIT\");\r\n    console.info(\"evt:\", evt);\r\n    console.groupEnd();\r\n  };\r\n\r\n  const hdlOnValidSubmit = async () => {\r\n    console.group(\"VALID FORM\");\r\n    console.info(\"Data submitted!\", form);\r\n\r\n    setLoading(true);\r\n    const resp = await services.getQuoterPaymentPlan(\r\n      form.loanType,\r\n      form.amountDebt,\r\n      form.anualRate,\r\n      form.feciRate,\r\n      form.term,\r\n      form.paymentPeriod,\r\n      form.gracePeriod,\r\n      form.gracePeriodType,\r\n      form.customerDefinedPayment\r\n    );\r\n    setLoading(false);\r\n\r\n    console.info(\"Service response\", resp);\r\n\r\n    setResponse(resp.payments);\r\n    setForm(initialForm);\r\n\r\n    console.groupEnd();\r\n  };\r\n\r\n  const hdlOnInvalidSubmit = (evt, errors, values) => {\r\n    console.group(\"INVALID FORM\");\r\n    console.info(\"Not working!\");\r\n    console.groupEnd();\r\n  };\r\n\r\n  const hdlTest = (evt) => {\r\n    console.group(\"HANDLE TEST\");\r\n    console.info(\"\", evt);\r\n    console.groupEnd();\r\n  };\r\n\r\n  const auxSelectFields = (selectFieldName, selectedValue) => {\r\n    switch (selectFieldName) {\r\n      case \"feciSelect\":\r\n        const disableFeci = selectedValue === \"Si\" ? false : true;\r\n        setDisableFeci(disableFeci);\r\n        return;\r\n      case \"personType\":\r\n        const type = selectedValue === \"Natural\" ? \"Natural\" : \"Juridica\";\r\n        setForm({\r\n          personType: type,\r\n        });\r\n        return;\r\n      case \"definedPayment\":\r\n        const definedFee = selectedValue === \"Si\" ? false : true;\r\n        setDisableDefinedFee(definedFee);\r\n        setDisableTerm(!definedFee);\r\n        return;\r\n      case \"gracePeriodSelect\":\r\n        const disableGracePeriod = selectedValue === \"Si\" ? false : true;\r\n        setDisableGracePeriod(disableGracePeriod);\r\n        return;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const changeSelectOptions = (valueCheck, option) => {\r\n    const activateOption = valueCheck === option ? false : true;\r\n\r\n    return activateOption;\r\n  };\r\n\r\n  return {\r\n    form,\r\n    errors,\r\n    loading,\r\n    response,\r\n    hdlTest,\r\n    hdlOnKeyUpRealNumber,\r\n    hdlOnKeyUpPercentageNumber,\r\n    hdlOnChange,\r\n    hdlOnSubmit,\r\n    hdlOnInvalidSubmit,\r\n    hdlOnValidSubmit,\r\n    disableFeci,\r\n    disableDefinedFee,\r\n    disableTerm,\r\n    disableGracePeriod,\r\n    optionsIdTypes,\r\n    optionsCountries,\r\n    optionsBanks,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}