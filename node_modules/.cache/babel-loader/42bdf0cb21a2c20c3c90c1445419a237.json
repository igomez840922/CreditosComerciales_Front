{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useImperativeHandle,forwardRef,useContext,useEffect}from'react';import{translationHelpers}from'../../../../helpers';import RiesgoAmbientalContext from'../RiesgoAmbientalContext';import{Card,CardBody,Row,Col,Button,Label}from\"reactstrap\";import Switch from\"react-switch\";import{AvForm,AvField,AvGroup,AvInput}from\"availity-reactstrap-validation\";import{BackendServices,CoreServices}from\"../../../../services\";import{useTranslation}from'react-i18next';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Offsymbol=function Offsymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"No\"]});};var OnSymbol=function OnSymbol(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",fontSize:12,color:\"#fff\",paddingRight:2},children:[\" \",\"Si\"]});};var FormDetalles=/*#__PURE__*/forwardRef(function(props,ref){React.useImperativeHandle(ref,function(){return{validateForm:function validateForm(){var form=document.getElementById('frmDetalleAmbiental');form.requestSubmit();},getFormValidation:function getFormValidation(){return formValid;},dataReturn:dataReturn};});var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),displayCovenantDetails=_useState2[0],setDisplayCovenantDetails=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formValid=_useState4[0],setFormValid=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUpdatingRecord=_useState6[0],setUpdatingRecord=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),environmentCovenant=_useState8[0],setEnvironemntCovenant=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),detail=_useState10[0],setDetail=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),compliance=_useState12[0],setCompliance=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),detected=_useState14[0],setDetected=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),term=_useState16[0],setTerm=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),recommendations=_useState18[0],setRecommendations=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),conclusions=_useState20[0],setConclusions=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),dataReturn=_useState22[0],setdataReturn=_useState22[1];var _useState23=useState(props.locationData),_useState24=_slicedToArray(_useState23,2),locationData=_useState24[0],setLocationData=_useState24[1];//Servicios\nvar _useState25=useState(new BackendServices()),_useState26=_slicedToArray(_useState25,2),backendServices=_useState26[0],setbackendServices=_useState26[1];//const [bpmServices, setbpmServices] = useState(new BpmServices());\n//const [coreServices, setcoreServices] = useState(new CoreServices());\nuseEffect(function(){// load data        \nbackendServices.getEnvironmentalRiskInfo(locationData.transactionId).then(function(info){if(info.transactId){setUpdatingRecord(true);setEnvironemntCovenant(info.environmentCovenant);setDetail(info.detail);setCompliance(info.compliance);setDetected(info.detected);setTerm(info.term);setRecommendations(info.recommendations);setConclusions(info.conclusions);}}).catch(function(error){console.log('error fetch detalles',error);});},[]);function handleCovenantChange(event){setDisplayCovenantDetails(event.target.value==='Si'?true:false);}function handleSubmit(event,errors,values){values.environmentCovenant=environmentCovenant;event.preventDefault();if(errors.length>0){setFormValid(false);return;}setdataReturn(values);event.preventDefault();var isValid=errors.length===0;setFormValid(isValid);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-sub-title\",children:t(\"OtherDetails\")}),/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(AvForm,{id:\"frmDetalleAmbiental\",className:\"needs-validation\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsxs(Col,{md:\"12\",children:[/*#__PURE__*/_jsxs(Label,{className:\"form-check-label\",htmlFor:\"isProjectLocatedProtectedNaturalArea\",children:[\" \",t(\"Covenants Ambientales\")]}),/*#__PURE__*/_jsxs(AvGroup,{check:true,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Switch,{name:\"isProjectLocatedProtectedNaturalArea\",uncheckedIcon:/*#__PURE__*/_jsx(Offsymbol,{}),checkedIcon:/*#__PURE__*/_jsx(OnSymbol,{}),onColor:\"#007943\",id:\"check1\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,className:\"form-label\",onChange:function onChange(){setEnvironemntCovenant(!environmentCovenant);},checked:environmentCovenant}),'   ']})]})}),environmentCovenant&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"my-3\",children:[/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"detail\",children:t(\"Detalle\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"detail\",type:\"text\",id:\"detail\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,value:detail})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"compliance\",children:t(\"Cumplimiento\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"compliance\",type:\"text\",id:\"compliance\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,value:compliance})]})}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"term\",children:t(\"Plazo\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"term\",type:\"text\",id:\"term\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,value:term})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"detected\",children:t(\"Situacion Detectada\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"detected\",type:\"textarea\",id:\"detected\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,value:detected,rows:\"7\"})]})})})]}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"recommendations\",children:t(\"Recomendaciones\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"recommendations\",type:\"textarea\",id:\"recommendations\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,value:recommendations,rows:\"7\"})]})})}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"conclusions\",children:t(\"Conclusiones\")}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"conclusions\",type:\"textarea\",id:\"conclusions\",disabled:(props===null||props===void 0?void 0:props.previsualizarHistoria)?true:false,value:conclusions,rows:\"7\"})]})})})]})})]})});});export default FormDetalles;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/16_RiesgoAmbiental/riesgoAmbiental/FormDetalles.js"],"names":["React","useState","useImperativeHandle","forwardRef","useContext","useEffect","translationHelpers","RiesgoAmbientalContext","Card","CardBody","Row","Col","Button","Label","Switch","AvForm","AvField","AvGroup","AvInput","BackendServices","CoreServices","useTranslation","Offsymbol","display","justifyContent","alignItems","height","fontSize","color","paddingRight","OnSymbol","FormDetalles","props","ref","validateForm","form","document","getElementById","requestSubmit","getFormValidation","formValid","dataReturn","t","i18n","displayCovenantDetails","setDisplayCovenantDetails","setFormValid","isUpdatingRecord","setUpdatingRecord","environmentCovenant","setEnvironemntCovenant","detail","setDetail","compliance","setCompliance","detected","setDetected","term","setTerm","recommendations","setRecommendations","conclusions","setConclusions","setdataReturn","locationData","setLocationData","backendServices","setbackendServices","getEnvironmentalRiskInfo","transactionId","then","info","transactId","catch","error","console","log","handleCovenantChange","event","target","value","handleSubmit","errors","values","preventDefault","length","isValid","previsualizarHistoria"],"mappings":"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","sourcesContent":["import React, { useState, useImperativeHandle, forwardRef, useContext, useEffect } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelpers } from '../../../../helpers';\r\nimport RiesgoAmbientalContext from '../RiesgoAmbientalContext';\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label\r\n} from \"reactstrap\"\r\nimport Switch from \"react-switch\";\r\n\r\nimport { AvForm, AvField, AvGroup, AvInput } from \"availity-reactstrap-validation\"\r\nimport { BackendServices, CoreServices } from \"../../../../services\"\r\nimport { useTranslation } from 'react-i18next'\r\nconst Offsymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      No\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OnSymbol = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        fontSize: 12,\r\n        color: \"#fff\",\r\n        paddingRight: 2,\r\n      }}\r\n    >\r\n      {\" \"}\r\n      Si\r\n    </div>\r\n  );\r\n};\r\nconst FormDetalles = forwardRef((props, ref) => {\r\n\r\n  React.useImperativeHandle(ref, () => ({\r\n    validateForm: () => {\r\n      const form = document.getElementById('frmDetalleAmbiental');\r\n      form.requestSubmit();\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }, dataReturn\r\n  }))\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const [displayCovenantDetails, setDisplayCovenantDetails] = useState(true);\r\n  const [formValid, setFormValid] = useState(false);\r\n  const [isUpdatingRecord, setUpdatingRecord] = useState(false);\r\n  const [environmentCovenant, setEnvironemntCovenant] = useState(false);\r\n  const [detail, setDetail] = useState('');\r\n  const [compliance, setCompliance] = useState('');\r\n  const [detected, setDetected] = useState('');\r\n  const [term, setTerm] = useState('');\r\n  const [recommendations, setRecommendations] = useState('');\r\n  const [conclusions, setConclusions] = useState('');\r\n  const [dataReturn, setdataReturn] = useState('');\r\n  const [locationData, setLocationData] = useState(props.locationData);\r\n\r\n  //Servicios\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n  //const [bpmServices, setbpmServices] = useState(new BpmServices());\r\n  //const [coreServices, setcoreServices] = useState(new CoreServices());\r\n\r\n  useEffect(() => {\r\n    // load data        \r\n    backendServices.getEnvironmentalRiskInfo(locationData.transactionId)\r\n      .then((info) => {\r\n\r\n        if (info.transactId) {\r\n          setUpdatingRecord(true);\r\n          setEnvironemntCovenant(info.environmentCovenant);\r\n          setDetail(info.detail);\r\n          setCompliance(info.compliance);\r\n          setDetected(info.detected);\r\n          setTerm(info.term);\r\n          setRecommendations(info.recommendations);\r\n          setConclusions(info.conclusions);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log('error fetch detalles', error);\r\n      })\r\n  }, []);\r\n\r\n  function handleCovenantChange(event) {\r\n    setDisplayCovenantDetails(event.target.value === 'Si'?true:false);\r\n  }\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    values.environmentCovenant=environmentCovenant;\r\n    event.preventDefault();\r\n    if (errors.length > 0) {\r\n      setFormValid(false);\r\n      return;\r\n    }\r\n    setdataReturn(values)\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n      <Card>\r\n      <h5 className=\"card-sub-title\">{t(\"OtherDetails\")}</h5>\r\n      \r\n        <CardBody>\r\n        <AvForm id=\"frmDetalleAmbiental\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n            <Row className=\"my-3\">\r\n              <Col md=\"12\">\r\n                <Label className=\"form-check-label\" htmlFor=\"isProjectLocatedProtectedNaturalArea\"> {t(\"Covenants Ambientales\")}</Label>\r\n              <AvGroup check className=\"mb-3\">\r\n                <Switch name=\"isProjectLocatedProtectedNaturalArea\"\r\n                  uncheckedIcon={<Offsymbol />}\r\n                  checkedIcon={<OnSymbol />}\r\n                  onColor=\"#007943\"\r\n                  id=\"check1\"\r\n                  disabled={props?.previsualizarHistoria ? true : false}\r\n                  className=\"form-label\"\r\n                  onChange={() => {\r\n                    setEnvironemntCovenant(!environmentCovenant);\r\n                  }}\r\n                  checked={environmentCovenant}\r\n                />\r\n                {'   '}\r\n              </AvGroup>\r\n                {/* <AvGroup>\r\n                  <Label htmlFor=\"environmentCovenant\">{t(\"Covenants Ambientales\")}</Label>\r\n                  <AvField\r\n                    className=\"form-control\"\r\n                    name=\"environmentCovenant\"\r\n                    type=\"select\"\r\n                    id=\"environmentCovenant\"\r\n                    value={environmentCovenant}\r\n                    onChange={handleCovenantChange}>\r\n                    <option value={true}>{t(\"Yes\")}</option>\r\n                    <option value={false}>{t(\"No\")}</option>\r\n                  </AvField>\r\n                </AvGroup> */}\r\n              </Col>\r\n            </Row>\r\n\r\n            {environmentCovenant && (\r\n              <>\r\n                <Row className=\"my-3\">\r\n                  <Col md=\"4\">\r\n                    <AvGroup>\r\n                      <Label htmlFor=\"detail\">{t(\"Detalle\")}</Label>\r\n                      <AvField className=\"form-control\"\r\n                        name=\"detail\"\r\n                        type=\"text\"\r\n                        id=\"detail\"\r\n                        disabled={props?.previsualizarHistoria ? true : false}\r\n                        value={detail} />\r\n                    </AvGroup>\r\n                  </Col>\r\n                  <Col md=\"4\">\r\n                    <AvGroup>\r\n                      <Label htmlFor=\"compliance\">{t(\"Cumplimiento\")}</Label>\r\n                      <AvField className=\"form-control\"\r\n                        name=\"compliance\"\r\n                        type=\"text\"\r\n                        id=\"compliance\"\r\n                        disabled={props?.previsualizarHistoria ? true : false}\r\n                        value={compliance} />\r\n                    </AvGroup>\r\n                  </Col>\r\n                  <Col md=\"4\">\r\n                    <AvGroup>\r\n                      <Label htmlFor=\"term\">{t(\"Plazo\")}</Label>\r\n                      <AvField className=\"form-control\"\r\n                        name=\"term\"\r\n                        type=\"text\"\r\n                        id=\"term\"\r\n                        disabled={props?.previsualizarHistoria ? true : false}\r\n                        value={term} />\r\n                    </AvGroup>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row className=\"my-3\">\r\n                  <Col md=\"12\">\r\n                    <AvGroup>\r\n                      <Label htmlFor=\"detected\">{t(\"Situacion Detectada\")}</Label>\r\n                      <AvField className=\"form-control\"\r\n                        name=\"detected\"\r\n                        type=\"textarea\"\r\n                        id=\"detected\"\r\n                        disabled={props?.previsualizarHistoria ? true : false}\r\n                        value={detected}\r\n                        rows=\"7\" />\r\n                    </AvGroup>\r\n                  </Col>\r\n                </Row>\r\n              </>\r\n            )}\r\n\r\n            <Row className=\"my-3\">\r\n              <Col md=\"12\">\r\n                <AvGroup>\r\n                  <Label htmlFor=\"recommendations\">{t(\"Recomendaciones\")}</Label>\r\n                  <AvField className=\"form-control\"\r\n                    name=\"recommendations\"\r\n                    type=\"textarea\"\r\n                    id=\"recommendations\"\r\n                    disabled={props?.previsualizarHistoria ? true : false}\r\n                    value={recommendations}\r\n                    rows=\"7\" />\r\n                </AvGroup>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row className=\"my-3\">\r\n              <Col md=\"12\">\r\n                <AvGroup>\r\n                  <Label htmlFor=\"conclusions\">{t(\"Conclusiones\")}</Label>\r\n                  <AvField className=\"form-control\"\r\n                    name=\"conclusions\"\r\n                    type=\"textarea\"\r\n                    id=\"conclusions\"\r\n                    disabled={props?.previsualizarHistoria ? true : false}\r\n                    value={conclusions}\r\n                    rows=\"7\" />\r\n                </AvGroup>\r\n              </Col>\r\n            </Row>\r\n\r\n      </AvForm>\r\n\r\n        </CardBody>\r\n      </Card>\r\n\r\n     \r\n    </React.Fragment>\r\n  );\r\n});\r\n\r\n\r\nFormDetalles.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  locationData: PropTypes.any,\r\n};\r\n\r\nexport default FormDetalles;\r\n"]},"metadata":{},"sourceType":"module"}