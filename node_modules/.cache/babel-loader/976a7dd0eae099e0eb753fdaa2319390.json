{"ast":null,"code":"import _regeneratorRuntime from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{translationHelper}from'../../helpers';import{AvForm,AvGroup,AvField,AvFeedback}from\"availity-reactstrap-validation\";import{Table,Card,CardBody,Row,Col,Label}from\"reactstrap\";import HeaderSections from'../Common/HeaderSections';import{useTranslation}from\"react-i18next\";import{BackendServices,CoreServices}from\"../../services\";import Currency from'../../helpers/currency';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FacilityListBpm=function FacilityListBpm(props){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),dataReturn=_useState2[0],setdataReturn=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),debtorList=_useState4[0],setdebtorList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),daudorList=_useState6[0],setdaudorList=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),facilityTypeList=_useState8[0],setfacilityTypeList=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),proposalTypeList=_useState10[0],setproposalTypeList=_useState10[1];var currencyData=new Currency();//Servicios\nvar _useState11=useState(new CoreServices()),_useState12=_slicedToArray(_useState11,2),coreServices=_useState12[0],setcoreServices=_useState12[1];var _useState13=useState(new BackendServices()),_useState14=_slicedToArray(_useState13,2),backendServices=_useState14[0],setbackendServices=_useState14[1];useEffect(function(){if(props.transactionId!=null){initializeData();}},[]);function initializeData(){return _initializeData.apply(this,arguments);}function _initializeData(){_initializeData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return backendServices.consultarDeudores(props.transactionId);case 2:result=_context.sent;if(result!==undefined){setdebtorList(result);}//catalogo de facilidades\n_context.next=6;return backendServices.retrieveFacilityType();case 6:result=_context.sent;if(result!==undefined){setfacilityTypeList(result);}//catalogo de Propuestas\n_context.next=10;return backendServices.retrieveProposalType();case 10:result=_context.sent;if(result!==undefined){setproposalTypeList(result);}// consultarPropuesta de Credito\nbackendServices.consultGeneralDataPropCred(props.transactionId).then(function(resp){if(resp!==undefined||(resp===null||resp===void 0?void 0:resp.length)>0){backendServices.consultarDeudores(props.transactionId).then(function(data2){if(data2!==null&&data2!==undefined){var jsonDeudores=[];for(var i=0;i<data2.length;i++){jsonDeudores.push({label:data2[i][\"name\"]+\" \"+data2[i][\"name2\"]+\" \"+data2[i][\"lastName\"]+\" \"+data2[i][\"lastName2\"],value:data2[i][\"personId\"]});}setdaudorList(jsonDeudores);}//Consultar Lista de Facilidades\n});backendServices.consultarFacilidades(resp[0].requestId).then(function(resp){setdataReturn(resp);});}});case 13:case\"end\":return _context.stop();}}},_callee);}));return _initializeData.apply(this,arguments);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(HeaderSections,{title:\"FacilityActual\",t:t}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\"}),/*#__PURE__*/_jsxs(Table,{className:\"table mt-1\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Debtor\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Facility Type\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Proposal\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"ProposedRisk\")}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:t(\"ProposedRate\")})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataReturn?dataReturn.filter(function(item){return item.facilityType!==\"1\";}).map(function(item,index){var _daudorList$find,_facilityTypeList$fin,_proposalTypeList$fin,_item$amount,_item$proposedRate;return item.debtor!=\"  \"?/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:(_daudorList$find=daudorList.find(function(x){return x.value===Number(item.debtor);}))===null||_daudorList$find===void 0?void 0:_daudorList$find.label}),/*#__PURE__*/_jsx(\"td\",{children:(_facilityTypeList$fin=facilityTypeList.find(function(x){return x.id===item.facilityType;}))===null||_facilityTypeList$fin===void 0?void 0:_facilityTypeList$fin.description}),/*#__PURE__*/_jsx(\"td\",{children:(_proposalTypeList$fin=proposalTypeList.find(function(x){return x.id===item.proposedType;}))===null||_proposalTypeList$fin===void 0?void 0:_proposalTypeList$fin.description}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$\",currencyData.format((_item$amount=item===null||item===void 0?void 0:item.amount)!==null&&_item$amount!==void 0?_item$amount:0)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$\",currencyData.format((_item$proposedRate=item===null||item===void 0?void 0:item.proposedRate)!==null&&_item$proposedRate!==void 0?_item$proposedRate:0)]})]},'row-'+index):null;}):null})]})]})})});};export default FacilityListBpm;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/components/PropuestaCreditoComercial/FacilityListBpm.js"],"names":["React","useState","useEffect","translationHelper","AvForm","AvGroup","AvField","AvFeedback","Table","Card","CardBody","Row","Col","Label","HeaderSections","useTranslation","BackendServices","CoreServices","Currency","FacilityListBpm","props","t","i18n","dataReturn","setdataReturn","debtorList","setdebtorList","daudorList","setdaudorList","facilityTypeList","setfacilityTypeList","proposalTypeList","setproposalTypeList","currencyData","coreServices","setcoreServices","backendServices","setbackendServices","transactionId","initializeData","consultarDeudores","result","undefined","retrieveFacilityType","retrieveProposalType","consultGeneralDataPropCred","then","resp","length","data2","jsonDeudores","i","push","label","value","consultarFacilidades","requestId","filter","item","facilityType","map","index","debtor","find","x","Number","id","description","proposedType","format","amount","proposedRate"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { translationHelper } from '../../helpers';\r\nimport { AvForm, AvGroup, AvField, AvFeedback } from \"availity-reactstrap-validation\"\r\nimport {\r\n  Table,\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Label,\r\n} from \"reactstrap\"\r\n\r\nimport HeaderSections from '../Common/HeaderSections';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { BackendServices, CoreServices } from \"../../services\";\r\nimport Currency from '../../helpers/currency';\r\n\r\nconst FacilityListBpm = (props) => {\r\n\r\n  const { t, i18n } = useTranslation();\r\n  const [dataReturn, setdataReturn] = useState(null);\r\n  const [debtorList, setdebtorList] = useState([]);\r\n  const [daudorList, setdaudorList] = useState([]);\r\n  const [facilityTypeList, setfacilityTypeList] = useState([]);\r\n  const [proposalTypeList, setproposalTypeList] = useState([]);\r\n  const currencyData = new Currency();\r\n  //Servicios\r\n  const [coreServices, setcoreServices] = useState(new CoreServices());\r\n  const [backendServices, setbackendServices] = useState(new BackendServices());\r\n\r\n  useEffect(() => {\r\n    if (props.transactionId != null) {\r\n      initializeData();\r\n    }\r\n  }, []);\r\n\r\n  async function initializeData() {\r\n\r\n    //los deudores\r\n    var result = await backendServices.consultarDeudores(props.transactionId);\r\n    if (result !== undefined) {\r\n      setdebtorList(result);\r\n    }\r\n\r\n    //catalogo de facilidades\r\n    result = await backendServices.retrieveFacilityType();\r\n    if (result !== undefined) {\r\n      setfacilityTypeList(result);\r\n    }\r\n\r\n    //catalogo de Propuestas\r\n    result = await backendServices.retrieveProposalType();\r\n    if (result !== undefined) {\r\n      setproposalTypeList(result);\r\n    }\r\n\r\n    // consultarPropuesta de Credito\r\n    backendServices.consultGeneralDataPropCred(props.transactionId).then((resp) => {\r\n      if (resp !== undefined || resp?.length > 0) {\r\n        backendServices.consultarDeudores(props.transactionId).then((data2) => {\r\n          if (data2 !== null && data2 !== undefined) {\r\n            let jsonDeudores = [];\r\n            for (let i = 0; i < data2.length; i++) {\r\n              jsonDeudores.push({ label: data2[i][\"name\"] + \" \" + data2[i][\"name2\"] + \" \" + data2[i][\"lastName\"] + \" \" + data2[i][\"lastName2\"], value: data2[i][\"personId\"] })\r\n            }\r\n            setdaudorList(jsonDeudores)\r\n          }\r\n          //Consultar Lista de Facilidades\r\n        });\r\n        backendServices.consultarFacilidades(resp[0].requestId).then((resp) => {\r\n          setdataReturn(resp)\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n\r\n    <React.Fragment>\r\n      <>\r\n        <CardBody>\r\n          <HeaderSections title={\"FacilityActual\"} t={t}></HeaderSections>\r\n          <p className=\"card-title-desc\">\r\n          </p>\r\n          <Table className=\"table mt-1\" responsive>\r\n            <thead className=\"table-light\">\r\n              <tr>\r\n                <th>{t(\"Debtor\")}</th>\r\n                <th>{t(\"Facility Type\")}</th>\r\n                <th>{t(\"Proposal\")}</th>\r\n                <th className=\"text-end\">{t(\"ProposedRisk\")}</th>\r\n                <th className=\"text-end\">{t(\"ProposedRate\")}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {dataReturn ?\r\n                dataReturn.filter(item => item.facilityType !== \"1\").map((item, index) => (\r\n                  item.debtor != \"  \" ?\r\n                    <tr key={'row-' + index}>\r\n                      <td>\r\n                        {\r\n                          daudorList.find(x => x.value === Number(item.debtor))?.label\r\n                        }\r\n                      </td>\r\n                      <td>\r\n                        {\r\n                          facilityTypeList.find(x => x.id === item.facilityType)?.description\r\n                        }\r\n                      </td>\r\n                      <td>\r\n                        {\r\n                          proposalTypeList.find(x => x.id === item.proposedType)?.description\r\n                        }\r\n                      </td>\r\n                      <td className=\"text-end\">${currencyData.format(item?.amount??0)}</td>\r\n                      <td className=\"text-end\">${currencyData.format(item?.proposedRate??0)}</td>\r\n                    </tr> : null\r\n                ))\r\n                : null}\r\n            </tbody>\r\n          </Table>\r\n        </CardBody>\r\n      </>\r\n    </React.Fragment >\r\n\r\n  );\r\n};\r\nFacilityListBpm.propTypes = {\r\n  transactionId: PropTypes.string,\r\n};\r\nexport default FacilityListBpm;\r\n"]},"metadata":{},"sourceType":"module"}