{"ast":null,"code":"import _slicedToArray from\"D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext,useImperativeHandle,forwardRef}from'react';import{useTranslation,withTranslation}from\"react-i18next\";import{useLocation,useHistory}from'react-router-dom';import{Card,CardBody,Row,Col,Button,Label}from\"reactstrap\";import{AvForm,AvField,AvGroup}from\"availity-reactstrap-validation\";import RiesgoCreditoContext from'../RiesgoCreditoContext';import ServicioRiesgoCredito from'../../../../services/RiesgoCredito/RiesgoCredito';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormConclusiones=/*#__PURE__*/forwardRef(function(props,ref){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),conclusions=_useState4[0],setConclusions=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUpdatingRecord=_useState6[0],setIsUpdatingRecord=_useState6[1];// services\nvar context=useContext(RiesgoCreditoContext);var servicioRiesgoCredito=new ServicioRiesgoCredito();var locationData=props.locationData;useImperativeHandle(ref,function(){return{submit:function submit(){var form=document.getElementById('formRiesgoCreditoConclusiones');form.requestSubmit();return formValid;},getFormValidation:function getFormValidation(){return formValid;}};});useEffect(function(){// load data\nif(!context.transactionId){return;}var transactionId=context.transactionId;servicioRiesgoCredito.consultarRiesgoCreditoComercial(transactionId).then(function(info){if(info.transactId){setIsUpdatingRecord(true);}setConclusions(info.conclusions);}).catch(function(error){console.error('error fetch riesgo credito',error);});},[]);function handleSubmit(event,errors,values){event.preventDefault();var isValid=errors.length===0;setFormValid(isValid);if(isValid){servicioRiesgoCredito.guardarInformacionRiesgoCredito(locationData.transactionId,values,isUpdatingRecord).then(function(result){props.onSaveSuccess();}).catch(function(error){console.error('save error',error);});}}return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-sub-title\",children:t(\"ConclusionsAndRecomendations\")}),/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(AvForm,{id:\"formRiesgoCreditoConclusiones\",className:\"needs-validation\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsx(Col,{md:\"12\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"conclusions\"}),/*#__PURE__*/_jsx(AvField,{className:\"form-control\",name:\"conclusions\",type:\"textarea\",id:\"conclusions\",value:conclusions,rows:\"7\"})]})})})})})]});});export default FormConclusiones;","map":{"version":3,"sources":["D:/_PROJECTS/_SOAINT/JBPM/App/banescocreditoscomerciales/src/pages/CommercialCredit/17_RiesgoCredito/riesgoCredito/Conclusiones.js"],"names":["useState","useEffect","useContext","useImperativeHandle","forwardRef","useTranslation","withTranslation","useLocation","useHistory","Card","CardBody","Row","Col","Button","Label","AvForm","AvField","AvGroup","RiesgoCreditoContext","ServicioRiesgoCredito","FormConclusiones","props","ref","t","i18n","formValid","setFormValid","conclusions","setConclusions","isUpdatingRecord","setIsUpdatingRecord","context","servicioRiesgoCredito","locationData","submit","form","document","getElementById","requestSubmit","getFormValidation","transactionId","consultarRiesgoCreditoComercial","then","info","transactId","catch","error","console","handleSubmit","event","errors","values","preventDefault","isValid","length","guardarInformacionRiesgoCredito","result","onSaveSuccess"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext, useImperativeHandle, forwardRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation, withTranslation } from \"react-i18next\"\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\n\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Label\r\n} from \"reactstrap\"\r\n\r\nimport { AvForm, AvField, AvGroup } from \"availity-reactstrap-validation\"\r\nimport RiesgoCreditoContext from '../RiesgoCreditoContext';\r\nimport ServicioRiesgoCredito from '../../../../services/RiesgoCredito/RiesgoCredito';\r\n\r\nconst FormConclusiones = forwardRef((props, ref) => {\r\n\r\n  const { t, i18n } = useTranslation();\r\n  \r\n  const [formValid, setFormValid] = useState(false);\r\n  const [conclusions, setConclusions] = useState('');\r\n  const [isUpdatingRecord, setIsUpdatingRecord] = useState(false);\r\n\r\n  // services\r\n  const context = useContext(RiesgoCreditoContext);\r\n  const servicioRiesgoCredito = new ServicioRiesgoCredito();\r\n\r\n  const { locationData } = props;\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    submit: () => {\r\n      const form = document.getElementById('formRiesgoCreditoConclusiones');\r\n      form.requestSubmit();\r\n      return formValid;\r\n    },\r\n    getFormValidation: () => {\r\n      return formValid;\r\n    }\r\n  }));\r\n\r\n  useEffect(() => {\r\n    // load data\r\n    if (!context.transactionId) {\r\n      return;\r\n    }\r\n    const { transactionId } = context;\r\n    servicioRiesgoCredito.consultarRiesgoCreditoComercial(transactionId)\r\n      .then((info) => {\r\n        if( info.transactId ) {\r\n          setIsUpdatingRecord(true);\r\n        }\r\n        setConclusions(info.conclusions);\r\n      })\r\n      .catch((error) => {\r\n        console.error('error fetch riesgo credito', error);\r\n      });\r\n  }, []);\r\n\r\n  function handleSubmit(event, errors, values) {\r\n    event.preventDefault();\r\n    const isValid = errors.length === 0;\r\n    setFormValid(isValid);\r\n    if (isValid) {\r\n      servicioRiesgoCredito.guardarInformacionRiesgoCredito(locationData.transactionId, values, isUpdatingRecord)\r\n        .then((result) => {\r\n          props.onSaveSuccess();\r\n        })\r\n        .catch((error) => {\r\n          console.error('save error', error);\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Card>\r\n      <h5 className=\"card-sub-title\">{ t(\"ConclusionsAndRecomendations\") }</h5>\r\n        \r\n      <CardBody>\r\n        <AvForm id=\"formRiesgoCreditoConclusiones\" className=\"needs-validation\" onSubmit={handleSubmit}>\r\n          <Row className=\"my-3\">\r\n            <Col md=\"12\">\r\n              <AvGroup>\r\n                <Label htmlFor=\"conclusions\"></Label>\r\n                <AvField className=\"form-control\"\r\n                  name=\"conclusions\"\r\n                  type=\"textarea\"\r\n                  id=\"conclusions\"\r\n                  value={conclusions}\r\n                  rows=\"7\" />\r\n              </AvGroup>\r\n            </Col>\r\n          </Row>\r\n        </AvForm>\r\n      </CardBody>\r\n    </Card>\r\n  );\r\n});\r\n\r\n\r\nFormConclusiones.propTypes = {\r\n  onSaveSuccess: PropTypes.func,\r\n  locationData:PropTypes.any\r\n};\r\n\r\nexport default FormConclusiones;\r\n"]},"metadata":{},"sourceType":"module"}